import React, { createContext, useEffect, useState, useRef, useCallback, useLayoutEffect, useMemo, useContext, Suspense } from 'react';
import { useThree, useFrame } from '@react-three/fiber';
import { InstancedMesh, Vector3, Quaternion as Quaternion$1, Matrix4, MeshBasicMaterial, SphereGeometry, BoxGeometry, PlaneGeometry, Mesh, CylinderGeometry, BufferGeometry, Float32BufferAttribute, Scene, Object3D, Euler, MathUtils, DynamicDrawUsage } from 'three';

const context = /*#__PURE__*/createContext({});
const debugContext = /*#__PURE__*/createContext(null);

function decodeBase64(base64, enableUnicode) {
    var binaryString = atob(base64);
    if (enableUnicode) {
        var binaryView = new Uint8Array(binaryString.length);
        for (var i = 0, n = binaryString.length; i < n; ++i) {
            binaryView[i] = binaryString.charCodeAt(i);
        }
        return String.fromCharCode.apply(null, new Uint16Array(binaryView.buffer));
    }
    return binaryString;
}

function createURL(base64, sourcemapArg, enableUnicodeArg) {
    var sourcemap = sourcemapArg === undefined ? null : sourcemapArg;
    var enableUnicode = enableUnicodeArg === undefined ? false : enableUnicodeArg;
    var source = decodeBase64(base64, enableUnicode);
    var start = source.indexOf('\n', 10) + 1;
    var body = source.substring(start) + (sourcemap ? '\/\/# sourceMappingURL=' + sourcemap : '');
    var blob = new Blob([body], { type: 'application/javascript' });
    return URL.createObjectURL(blob);
}

function createBase64WorkerFactory(base64, sourcemapArg, enableUnicodeArg) {
    var url;
    return function WorkerFactory(options) {
        url = url || createURL(base64, sourcemapArg, enableUnicodeArg);
        return new Worker(url, options);
    };
}

var WorkerFactory = createBase64WorkerFactory('Lyogcm9sbHVwLXBsdWdpbi13ZWItd29ya2VyLWxvYWRlciAqLwooZnVuY3Rpb24gKCkgewogICd1c2Ugc3RyaWN0JzsKCiAgLyoqCiAgICogUmVjb3JkcyB3aGF0IG9iamVjdHMgYXJlIGNvbGxpZGluZyB3aXRoIGVhY2ggb3RoZXIKICAgKi8KICAvKioKICAgKiBBIDN4MyBtYXRyaXguCiAgICogQXV0aG9yZWQgYnkge0BsaW5rIGh0dHA6Ly9naXRodWIuY29tL3NjaHRlcHBlLyBzY2h0ZXBwZX0KICAgKi8KCgogIGNsYXNzIE1hdDMgewogICAgLyoqCiAgICAgKiBBIHZlY3RvciBvZiBsZW5ndGggOSwgY29udGFpbmluZyBhbGwgbWF0cml4IGVsZW1lbnRzLgogICAgICovCgogICAgLyoqCiAgICAgKiBAcGFyYW0gZWxlbWVudHMgQSB2ZWN0b3Igb2YgbGVuZ3RoIDksIGNvbnRhaW5pbmcgYWxsIG1hdHJpeCBlbGVtZW50cy4KICAgICAqLwogICAgY29uc3RydWN0b3IoZWxlbWVudHMpIHsKICAgICAgaWYgKGVsZW1lbnRzID09PSB2b2lkIDApIHsKICAgICAgICBlbGVtZW50cyA9IFswLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwXTsKICAgICAgfQoKICAgICAgdGhpcy5lbGVtZW50cyA9IHZvaWQgMDsKICAgICAgdGhpcy5lbGVtZW50cyA9IGVsZW1lbnRzOwogICAgfQogICAgLyoqCiAgICAgKiBTZXRzIHRoZSBtYXRyaXggdG8gaWRlbnRpdHkKICAgICAqIEB0b2RvIFNob3VsZCBwZXJoYXBzIGJlIHJlbmFtZWQgdG8gYHNldElkZW50aXR5KClgIHRvIGJlIG1vcmUgY2xlYXIuCiAgICAgKiBAdG9kbyBDcmVhdGUgYW5vdGhlciBmdW5jdGlvbiB0aGF0IGltbWVkaWF0ZWx5IGNyZWF0ZXMgYW4gaWRlbnRpdHkgbWF0cml4IGVnLiBgZXllKClgCiAgICAgKi8KCgogICAgaWRlbnRpdHkoKSB7CiAgICAgIGNvbnN0IGUgPSB0aGlzLmVsZW1lbnRzOwogICAgICBlWzBdID0gMTsKICAgICAgZVsxXSA9IDA7CiAgICAgIGVbMl0gPSAwOwogICAgICBlWzNdID0gMDsKICAgICAgZVs0XSA9IDE7CiAgICAgIGVbNV0gPSAwOwogICAgICBlWzZdID0gMDsKICAgICAgZVs3XSA9IDA7CiAgICAgIGVbOF0gPSAxOwogICAgfQogICAgLyoqCiAgICAgKiBTZXQgYWxsIGVsZW1lbnRzIHRvIHplcm8KICAgICAqLwoKCiAgICBzZXRaZXJvKCkgewogICAgICBjb25zdCBlID0gdGhpcy5lbGVtZW50czsKICAgICAgZVswXSA9IDA7CiAgICAgIGVbMV0gPSAwOwogICAgICBlWzJdID0gMDsKICAgICAgZVszXSA9IDA7CiAgICAgIGVbNF0gPSAwOwogICAgICBlWzVdID0gMDsKICAgICAgZVs2XSA9IDA7CiAgICAgIGVbN10gPSAwOwogICAgICBlWzhdID0gMDsKICAgIH0KICAgIC8qKgogICAgICogU2V0cyB0aGUgbWF0cml4IGRpYWdvbmFsIGVsZW1lbnRzIGZyb20gYSBWZWMzCiAgICAgKi8KCgogICAgc2V0VHJhY2UodmVjdG9yKSB7CiAgICAgIGNvbnN0IGUgPSB0aGlzLmVsZW1lbnRzOwogICAgICBlWzBdID0gdmVjdG9yLng7CiAgICAgIGVbNF0gPSB2ZWN0b3IueTsKICAgICAgZVs4XSA9IHZlY3Rvci56OwogICAgfQogICAgLyoqCiAgICAgKiBHZXRzIHRoZSBtYXRyaXggZGlhZ29uYWwgZWxlbWVudHMKICAgICAqLwoKCiAgICBnZXRUcmFjZSh0YXJnZXQpIHsKICAgICAgaWYgKHRhcmdldCA9PT0gdm9pZCAwKSB7CiAgICAgICAgdGFyZ2V0ID0gbmV3IFZlYzMoKTsKICAgICAgfQoKICAgICAgY29uc3QgZSA9IHRoaXMuZWxlbWVudHM7CiAgICAgIHRhcmdldC54ID0gZVswXTsKICAgICAgdGFyZ2V0LnkgPSBlWzRdOwogICAgICB0YXJnZXQueiA9IGVbOF07CiAgICAgIHJldHVybiB0YXJnZXQ7CiAgICB9CiAgICAvKioKICAgICAqIE1hdHJpeC1WZWN0b3IgbXVsdGlwbGljYXRpb24KICAgICAqIEBwYXJhbSB2IFRoZSB2ZWN0b3IgdG8gbXVsdGlwbHkgd2l0aAogICAgICogQHBhcmFtIHRhcmdldCBPcHRpb25hbCwgdGFyZ2V0IHRvIHNhdmUgdGhlIHJlc3VsdCBpbi4KICAgICAqLwoKCiAgICB2bXVsdCh2LCB0YXJnZXQpIHsKICAgICAgaWYgKHRhcmdldCA9PT0gdm9pZCAwKSB7CiAgICAgICAgdGFyZ2V0ID0gbmV3IFZlYzMoKTsKICAgICAgfQoKICAgICAgY29uc3QgZSA9IHRoaXMuZWxlbWVudHM7CiAgICAgIGNvbnN0IHggPSB2Lng7CiAgICAgIGNvbnN0IHkgPSB2Lnk7CiAgICAgIGNvbnN0IHogPSB2Lno7CiAgICAgIHRhcmdldC54ID0gZVswXSAqIHggKyBlWzFdICogeSArIGVbMl0gKiB6OwogICAgICB0YXJnZXQueSA9IGVbM10gKiB4ICsgZVs0XSAqIHkgKyBlWzVdICogejsKICAgICAgdGFyZ2V0LnogPSBlWzZdICogeCArIGVbN10gKiB5ICsgZVs4XSAqIHo7CiAgICAgIHJldHVybiB0YXJnZXQ7CiAgICB9CiAgICAvKioKICAgICAqIE1hdHJpeC1zY2FsYXIgbXVsdGlwbGljYXRpb24KICAgICAqLwoKCiAgICBzbXVsdChzKSB7CiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5lbGVtZW50cy5sZW5ndGg7IGkrKykgewogICAgICAgIHRoaXMuZWxlbWVudHNbaV0gKj0gczsKICAgICAgfQogICAgfQogICAgLyoqCiAgICAgKiBNYXRyaXggbXVsdGlwbGljYXRpb24KICAgICAqIEBwYXJhbSBtYXRyaXggTWF0cml4IHRvIG11bHRpcGx5IHdpdGggZnJvbSBsZWZ0IHNpZGUuCiAgICAgKi8KCgogICAgbW11bHQobWF0cml4LCB0YXJnZXQpIHsKICAgICAgaWYgKHRhcmdldCA9PT0gdm9pZCAwKSB7CiAgICAgICAgdGFyZ2V0ID0gbmV3IE1hdDMoKTsKICAgICAgfQoKICAgICAgY29uc3QgQSA9IHRoaXMuZWxlbWVudHM7CiAgICAgIGNvbnN0IEIgPSBtYXRyaXguZWxlbWVudHM7CiAgICAgIGNvbnN0IFQgPSB0YXJnZXQuZWxlbWVudHM7CiAgICAgIGNvbnN0IGExMSA9IEFbMF0sCiAgICAgICAgICAgIGExMiA9IEFbMV0sCiAgICAgICAgICAgIGExMyA9IEFbMl0sCiAgICAgICAgICAgIGEyMSA9IEFbM10sCiAgICAgICAgICAgIGEyMiA9IEFbNF0sCiAgICAgICAgICAgIGEyMyA9IEFbNV0sCiAgICAgICAgICAgIGEzMSA9IEFbNl0sCiAgICAgICAgICAgIGEzMiA9IEFbN10sCiAgICAgICAgICAgIGEzMyA9IEFbOF07CiAgICAgIGNvbnN0IGIxMSA9IEJbMF0sCiAgICAgICAgICAgIGIxMiA9IEJbMV0sCiAgICAgICAgICAgIGIxMyA9IEJbMl0sCiAgICAgICAgICAgIGIyMSA9IEJbM10sCiAgICAgICAgICAgIGIyMiA9IEJbNF0sCiAgICAgICAgICAgIGIyMyA9IEJbNV0sCiAgICAgICAgICAgIGIzMSA9IEJbNl0sCiAgICAgICAgICAgIGIzMiA9IEJbN10sCiAgICAgICAgICAgIGIzMyA9IEJbOF07CiAgICAgIFRbMF0gPSBhMTEgKiBiMTEgKyBhMTIgKiBiMjEgKyBhMTMgKiBiMzE7CiAgICAgIFRbMV0gPSBhMTEgKiBiMTIgKyBhMTIgKiBiMjIgKyBhMTMgKiBiMzI7CiAgICAgIFRbMl0gPSBhMTEgKiBiMTMgKyBhMTIgKiBiMjMgKyBhMTMgKiBiMzM7CiAgICAgIFRbM10gPSBhMjEgKiBiMTEgKyBhMjIgKiBiMjEgKyBhMjMgKiBiMzE7CiAgICAgIFRbNF0gPSBhMjEgKiBiMTIgKyBhMjIgKiBiMjIgKyBhMjMgKiBiMzI7CiAgICAgIFRbNV0gPSBhMjEgKiBiMTMgKyBhMjIgKiBiMjMgKyBhMjMgKiBiMzM7CiAgICAgIFRbNl0gPSBhMzEgKiBiMTEgKyBhMzIgKiBiMjEgKyBhMzMgKiBiMzE7CiAgICAgIFRbN10gPSBhMzEgKiBiMTIgKyBhMzIgKiBiMjIgKyBhMzMgKiBiMzI7CiAgICAgIFRbOF0gPSBhMzEgKiBiMTMgKyBhMzIgKiBiMjMgKyBhMzMgKiBiMzM7CiAgICAgIHJldHVybiB0YXJnZXQ7CiAgICB9CiAgICAvKioKICAgICAqIFNjYWxlIGVhY2ggY29sdW1uIG9mIHRoZSBtYXRyaXgKICAgICAqLwoKCiAgICBzY2FsZSh2ZWN0b3IsIHRhcmdldCkgewogICAgICBpZiAodGFyZ2V0ID09PSB2b2lkIDApIHsKICAgICAgICB0YXJnZXQgPSBuZXcgTWF0MygpOwogICAgICB9CgogICAgICBjb25zdCBlID0gdGhpcy5lbGVtZW50czsKICAgICAgY29uc3QgdCA9IHRhcmdldC5lbGVtZW50czsKCiAgICAgIGZvciAobGV0IGkgPSAwOyBpICE9PSAzOyBpKyspIHsKICAgICAgICB0WzMgKiBpICsgMF0gPSB2ZWN0b3IueCAqIGVbMyAqIGkgKyAwXTsKICAgICAgICB0WzMgKiBpICsgMV0gPSB2ZWN0b3IueSAqIGVbMyAqIGkgKyAxXTsKICAgICAgICB0WzMgKiBpICsgMl0gPSB2ZWN0b3IueiAqIGVbMyAqIGkgKyAyXTsKICAgICAgfQoKICAgICAgcmV0dXJuIHRhcmdldDsKICAgIH0KICAgIC8qKgogICAgICogU29sdmUgQXg9YgogICAgICogQHBhcmFtIGIgVGhlIHJpZ2h0IGhhbmQgc2lkZQogICAgICogQHBhcmFtIHRhcmdldCBPcHRpb25hbC4gVGFyZ2V0IHZlY3RvciB0byBzYXZlIGluLgogICAgICogQHJldHVybiBUaGUgc29sdXRpb24geAogICAgICogQHRvZG8gc2hvdWxkIHJldXNlIGFycmF5cwogICAgICovCgoKICAgIHNvbHZlKGIsIHRhcmdldCkgewogICAgICBpZiAodGFyZ2V0ID09PSB2b2lkIDApIHsKICAgICAgICB0YXJnZXQgPSBuZXcgVmVjMygpOwogICAgICB9CgogICAgICAvLyBDb25zdHJ1Y3QgZXF1YXRpb25zCiAgICAgIGNvbnN0IG5yID0gMzsgLy8gbnVtIHJvd3MKCiAgICAgIGNvbnN0IG5jID0gNDsgLy8gbnVtIGNvbHMKCiAgICAgIGNvbnN0IGVxbnMgPSBbXTsKICAgICAgbGV0IGk7CiAgICAgIGxldCBqOwoKICAgICAgZm9yIChpID0gMDsgaSA8IG5yICogbmM7IGkrKykgewogICAgICAgIGVxbnMucHVzaCgwKTsKICAgICAgfQoKICAgICAgZm9yIChpID0gMDsgaSA8IDM7IGkrKykgewogICAgICAgIGZvciAoaiA9IDA7IGogPCAzOyBqKyspIHsKICAgICAgICAgIGVxbnNbaSArIG5jICogal0gPSB0aGlzLmVsZW1lbnRzW2kgKyAzICogal07CiAgICAgICAgfQogICAgICB9CgogICAgICBlcW5zWzMgKyA0ICogMF0gPSBiLng7CiAgICAgIGVxbnNbMyArIDQgKiAxXSA9IGIueTsKICAgICAgZXFuc1szICsgNCAqIDJdID0gYi56OyAvLyBDb21wdXRlIHJpZ2h0IHVwcGVyIHRyaWFuZ3VsYXIgdmVyc2lvbiBvZiB0aGUgbWF0cml4IC0gR2F1c3MgZWxpbWluYXRpb24KCiAgICAgIGxldCBuID0gMzsKICAgICAgY29uc3QgayA9IG47CiAgICAgIGxldCBucDsKICAgICAgY29uc3Qga3AgPSA0OyAvLyBudW0gcm93cwoKICAgICAgbGV0IHA7CgogICAgICBkbyB7CiAgICAgICAgaSA9IGsgLSBuOwoKICAgICAgICBpZiAoZXFuc1tpICsgbmMgKiBpXSA9PT0gMCkgewogICAgICAgICAgLy8gdGhlIHBpdm90IGlzIG51bGwsIHN3YXAgbGluZXMKICAgICAgICAgIGZvciAoaiA9IGkgKyAxOyBqIDwgazsgaisrKSB7CiAgICAgICAgICAgIGlmIChlcW5zW2kgKyBuYyAqIGpdICE9PSAwKSB7CiAgICAgICAgICAgICAgbnAgPSBrcDsKCiAgICAgICAgICAgICAgZG8gewogICAgICAgICAgICAgICAgLy8gZG8gbGlnbmUoIGkgKSA9IGxpZ25lKCBpICkgKyBsaWduZSggayApCiAgICAgICAgICAgICAgICBwID0ga3AgLSBucDsKICAgICAgICAgICAgICAgIGVxbnNbcCArIG5jICogaV0gKz0gZXFuc1twICsgbmMgKiBqXTsKICAgICAgICAgICAgICB9IHdoaWxlICgtLW5wKTsKCiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGlmIChlcW5zW2kgKyBuYyAqIGldICE9PSAwKSB7CiAgICAgICAgICBmb3IgKGogPSBpICsgMTsgaiA8IGs7IGorKykgewogICAgICAgICAgICBjb25zdCBtdWx0aXBsaWVyID0gZXFuc1tpICsgbmMgKiBqXSAvIGVxbnNbaSArIG5jICogaV07CiAgICAgICAgICAgIG5wID0ga3A7CgogICAgICAgICAgICBkbyB7CiAgICAgICAgICAgICAgLy8gZG8gbGlnbmUoIGsgKSA9IGxpZ25lKCBrICkgLSBtdWx0aXBsaWVyICogbGlnbmUoIGkgKQogICAgICAgICAgICAgIHAgPSBrcCAtIG5wOwogICAgICAgICAgICAgIGVxbnNbcCArIG5jICogal0gPSBwIDw9IGkgPyAwIDogZXFuc1twICsgbmMgKiBqXSAtIGVxbnNbcCArIG5jICogaV0gKiBtdWx0aXBsaWVyOwogICAgICAgICAgICB9IHdoaWxlICgtLW5wKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0gd2hpbGUgKC0tbik7IC8vIEdldCB0aGUgc29sdXRpb24KCgogICAgICB0YXJnZXQueiA9IGVxbnNbMiAqIG5jICsgM10gLyBlcW5zWzIgKiBuYyArIDJdOwogICAgICB0YXJnZXQueSA9IChlcW5zWzEgKiBuYyArIDNdIC0gZXFuc1sxICogbmMgKyAyXSAqIHRhcmdldC56KSAvIGVxbnNbMSAqIG5jICsgMV07CiAgICAgIHRhcmdldC54ID0gKGVxbnNbMCAqIG5jICsgM10gLSBlcW5zWzAgKiBuYyArIDJdICogdGFyZ2V0LnogLSBlcW5zWzAgKiBuYyArIDFdICogdGFyZ2V0LnkpIC8gZXFuc1swICogbmMgKyAwXTsKCiAgICAgIGlmIChpc05hTih0YXJnZXQueCkgfHwgaXNOYU4odGFyZ2V0LnkpIHx8IGlzTmFOKHRhcmdldC56KSB8fCB0YXJnZXQueCA9PT0gSW5maW5pdHkgfHwgdGFyZ2V0LnkgPT09IEluZmluaXR5IHx8IHRhcmdldC56ID09PSBJbmZpbml0eSkgewogICAgICAgIHRocm93ICJDb3VsZCBub3Qgc29sdmUgZXF1YXRpb24hIEdvdCB4PVsiICsgdGFyZ2V0LnRvU3RyaW5nKCkgKyAiXSwgYj1bIiArIGIudG9TdHJpbmcoKSArICJdLCBBPVsiICsgdGhpcy50b1N0cmluZygpICsgIl0iOwogICAgICB9CgogICAgICByZXR1cm4gdGFyZ2V0OwogICAgfQogICAgLyoqCiAgICAgKiBHZXQgYW4gZWxlbWVudCBpbiB0aGUgbWF0cml4IGJ5IGluZGV4LiBJbmRleCBzdGFydHMgYXQgMCwgbm90IDEhISEKICAgICAqIEBwYXJhbSB2YWx1ZSBJZiBwcm92aWRlZCwgdGhlIG1hdHJpeCBlbGVtZW50IHdpbGwgYmUgc2V0IHRvIHRoaXMgdmFsdWUuCiAgICAgKi8KCgogICAgZShyb3csIGNvbHVtbiwgdmFsdWUpIHsKICAgICAgaWYgKHZhbHVlID09PSB1bmRlZmluZWQpIHsKICAgICAgICByZXR1cm4gdGhpcy5lbGVtZW50c1tjb2x1bW4gKyAzICogcm93XTsKICAgICAgfSBlbHNlIHsKICAgICAgICAvLyBTZXQgdmFsdWUKICAgICAgICB0aGlzLmVsZW1lbnRzW2NvbHVtbiArIDMgKiByb3ddID0gdmFsdWU7CiAgICAgIH0KICAgIH0KICAgIC8qKgogICAgICogQ29weSBhbm90aGVyIG1hdHJpeCBpbnRvIHRoaXMgbWF0cml4IG9iamVjdC4KICAgICAqLwoKCiAgICBjb3B5KG1hdHJpeCkgewogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG1hdHJpeC5lbGVtZW50cy5sZW5ndGg7IGkrKykgewogICAgICAgIHRoaXMuZWxlbWVudHNbaV0gPSBtYXRyaXguZWxlbWVudHNbaV07CiAgICAgIH0KCiAgICAgIHJldHVybiB0aGlzOwogICAgfQogICAgLyoqCiAgICAgKiBSZXR1cm5zIGEgc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIHRoZSBtYXRyaXguCiAgICAgKi8KCgogICAgdG9TdHJpbmcoKSB7CiAgICAgIGxldCByID0gJyc7CiAgICAgIGNvbnN0IHNlcCA9ICcsJzsKCiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgOTsgaSsrKSB7CiAgICAgICAgciArPSB0aGlzLmVsZW1lbnRzW2ldICsgc2VwOwogICAgICB9CgogICAgICByZXR1cm4gcjsKICAgIH0KICAgIC8qKgogICAgICogcmV2ZXJzZSB0aGUgbWF0cml4CiAgICAgKiBAcGFyYW0gdGFyZ2V0IFRhcmdldCBtYXRyaXggdG8gc2F2ZSBpbi4KICAgICAqIEByZXR1cm4gVGhlIHNvbHV0aW9uIHgKICAgICAqLwoKCiAgICByZXZlcnNlKHRhcmdldCkgewogICAgICBpZiAodGFyZ2V0ID09PSB2b2lkIDApIHsKICAgICAgICB0YXJnZXQgPSBuZXcgTWF0MygpOwogICAgICB9CgogICAgICAvLyBDb25zdHJ1Y3QgZXF1YXRpb25zCiAgICAgIGNvbnN0IG5yID0gMzsgLy8gbnVtIHJvd3MKCiAgICAgIGNvbnN0IG5jID0gNjsgLy8gbnVtIGNvbHMKCiAgICAgIGNvbnN0IGVxbnMgPSByZXZlcnNlX2VxbnM7CiAgICAgIGxldCBpOwogICAgICBsZXQgajsKCiAgICAgIGZvciAoaSA9IDA7IGkgPCAzOyBpKyspIHsKICAgICAgICBmb3IgKGogPSAwOyBqIDwgMzsgaisrKSB7CiAgICAgICAgICBlcW5zW2kgKyBuYyAqIGpdID0gdGhpcy5lbGVtZW50c1tpICsgMyAqIGpdOwogICAgICAgIH0KICAgICAgfQoKICAgICAgZXFuc1szICsgNiAqIDBdID0gMTsKICAgICAgZXFuc1szICsgNiAqIDFdID0gMDsKICAgICAgZXFuc1szICsgNiAqIDJdID0gMDsKICAgICAgZXFuc1s0ICsgNiAqIDBdID0gMDsKICAgICAgZXFuc1s0ICsgNiAqIDFdID0gMTsKICAgICAgZXFuc1s0ICsgNiAqIDJdID0gMDsKICAgICAgZXFuc1s1ICsgNiAqIDBdID0gMDsKICAgICAgZXFuc1s1ICsgNiAqIDFdID0gMDsKICAgICAgZXFuc1s1ICsgNiAqIDJdID0gMTsgLy8gQ29tcHV0ZSByaWdodCB1cHBlciB0cmlhbmd1bGFyIHZlcnNpb24gb2YgdGhlIG1hdHJpeCAtIEdhdXNzIGVsaW1pbmF0aW9uCgogICAgICBsZXQgbiA9IDM7CiAgICAgIGNvbnN0IGsgPSBuOwogICAgICBsZXQgbnA7CiAgICAgIGNvbnN0IGtwID0gbmM7IC8vIG51bSByb3dzCgogICAgICBsZXQgcDsKCiAgICAgIGRvIHsKICAgICAgICBpID0gayAtIG47CgogICAgICAgIGlmIChlcW5zW2kgKyBuYyAqIGldID09PSAwKSB7CiAgICAgICAgICAvLyB0aGUgcGl2b3QgaXMgbnVsbCwgc3dhcCBsaW5lcwogICAgICAgICAgZm9yIChqID0gaSArIDE7IGogPCBrOyBqKyspIHsKICAgICAgICAgICAgaWYgKGVxbnNbaSArIG5jICogal0gIT09IDApIHsKICAgICAgICAgICAgICBucCA9IGtwOwoKICAgICAgICAgICAgICBkbyB7CiAgICAgICAgICAgICAgICAvLyBkbyBsaW5lKCBpICkgPSBsaW5lKCBpICkgKyBsaW5lKCBrICkKICAgICAgICAgICAgICAgIHAgPSBrcCAtIG5wOwogICAgICAgICAgICAgICAgZXFuc1twICsgbmMgKiBpXSArPSBlcW5zW3AgKyBuYyAqIGpdOwogICAgICAgICAgICAgIH0gd2hpbGUgKC0tbnApOwoKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgaWYgKGVxbnNbaSArIG5jICogaV0gIT09IDApIHsKICAgICAgICAgIGZvciAoaiA9IGkgKyAxOyBqIDwgazsgaisrKSB7CiAgICAgICAgICAgIGNvbnN0IG11bHRpcGxpZXIgPSBlcW5zW2kgKyBuYyAqIGpdIC8gZXFuc1tpICsgbmMgKiBpXTsKICAgICAgICAgICAgbnAgPSBrcDsKCiAgICAgICAgICAgIGRvIHsKICAgICAgICAgICAgICAvLyBkbyBsaW5lKCBrICkgPSBsaW5lKCBrICkgLSBtdWx0aXBsaWVyICogbGluZSggaSApCiAgICAgICAgICAgICAgcCA9IGtwIC0gbnA7CiAgICAgICAgICAgICAgZXFuc1twICsgbmMgKiBqXSA9IHAgPD0gaSA/IDAgOiBlcW5zW3AgKyBuYyAqIGpdIC0gZXFuc1twICsgbmMgKiBpXSAqIG11bHRpcGxpZXI7CiAgICAgICAgICAgIH0gd2hpbGUgKC0tbnApOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSB3aGlsZSAoLS1uKTsgLy8gZWxpbWluYXRlIHRoZSB1cHBlciBsZWZ0IHRyaWFuZ2xlIG9mIHRoZSBtYXRyaXgKCgogICAgICBpID0gMjsKCiAgICAgIGRvIHsKICAgICAgICBqID0gaSAtIDE7CgogICAgICAgIGRvIHsKICAgICAgICAgIGNvbnN0IG11bHRpcGxpZXIgPSBlcW5zW2kgKyBuYyAqIGpdIC8gZXFuc1tpICsgbmMgKiBpXTsKICAgICAgICAgIG5wID0gbmM7CgogICAgICAgICAgZG8gewogICAgICAgICAgICBwID0gbmMgLSBucDsKICAgICAgICAgICAgZXFuc1twICsgbmMgKiBqXSA9IGVxbnNbcCArIG5jICogal0gLSBlcW5zW3AgKyBuYyAqIGldICogbXVsdGlwbGllcjsKICAgICAgICAgIH0gd2hpbGUgKC0tbnApOwogICAgICAgIH0gd2hpbGUgKGotLSk7CiAgICAgIH0gd2hpbGUgKC0taSk7IC8vIG9wZXJhdGlvbnMgb24gdGhlIGRpYWdvbmFsCgoKICAgICAgaSA9IDI7CgogICAgICBkbyB7CiAgICAgICAgY29uc3QgbXVsdGlwbGllciA9IDEgLyBlcW5zW2kgKyBuYyAqIGldOwogICAgICAgIG5wID0gbmM7CgogICAgICAgIGRvIHsKICAgICAgICAgIHAgPSBuYyAtIG5wOwogICAgICAgICAgZXFuc1twICsgbmMgKiBpXSA9IGVxbnNbcCArIG5jICogaV0gKiBtdWx0aXBsaWVyOwogICAgICAgIH0gd2hpbGUgKC0tbnApOwogICAgICB9IHdoaWxlIChpLS0pOwoKICAgICAgaSA9IDI7CgogICAgICBkbyB7CiAgICAgICAgaiA9IDI7CgogICAgICAgIGRvIHsKICAgICAgICAgIHAgPSBlcW5zW25yICsgaiArIG5jICogaV07CgogICAgICAgICAgaWYgKGlzTmFOKHApIHx8IHAgPT09IEluZmluaXR5KSB7CiAgICAgICAgICAgIHRocm93ICJDb3VsZCBub3QgcmV2ZXJzZSEgQT1bIiArIHRoaXMudG9TdHJpbmcoKSArICJdIjsKICAgICAgICAgIH0KCiAgICAgICAgICB0YXJnZXQuZShpLCBqLCBwKTsKICAgICAgICB9IHdoaWxlIChqLS0pOwogICAgICB9IHdoaWxlIChpLS0pOwoKICAgICAgcmV0dXJuIHRhcmdldDsKICAgIH0KICAgIC8qKgogICAgICogU2V0IHRoZSBtYXRyaXggZnJvbSBhIHF1YXRlcmlvbgogICAgICovCgoKICAgIHNldFJvdGF0aW9uRnJvbVF1YXRlcm5pb24ocSkgewogICAgICBjb25zdCB4ID0gcS54OwogICAgICBjb25zdCB5ID0gcS55OwogICAgICBjb25zdCB6ID0gcS56OwogICAgICBjb25zdCB3ID0gcS53OwogICAgICBjb25zdCB4MiA9IHggKyB4OwogICAgICBjb25zdCB5MiA9IHkgKyB5OwogICAgICBjb25zdCB6MiA9IHogKyB6OwogICAgICBjb25zdCB4eCA9IHggKiB4MjsKICAgICAgY29uc3QgeHkgPSB4ICogeTI7CiAgICAgIGNvbnN0IHh6ID0geCAqIHoyOwogICAgICBjb25zdCB5eSA9IHkgKiB5MjsKICAgICAgY29uc3QgeXogPSB5ICogejI7CiAgICAgIGNvbnN0IHp6ID0geiAqIHoyOwogICAgICBjb25zdCB3eCA9IHcgKiB4MjsKICAgICAgY29uc3Qgd3kgPSB3ICogeTI7CiAgICAgIGNvbnN0IHd6ID0gdyAqIHoyOwogICAgICBjb25zdCBlID0gdGhpcy5lbGVtZW50czsKICAgICAgZVszICogMCArIDBdID0gMSAtICh5eSArIHp6KTsKICAgICAgZVszICogMCArIDFdID0geHkgLSB3ejsKICAgICAgZVszICogMCArIDJdID0geHogKyB3eTsKICAgICAgZVszICogMSArIDBdID0geHkgKyB3ejsKICAgICAgZVszICogMSArIDFdID0gMSAtICh4eCArIHp6KTsKICAgICAgZVszICogMSArIDJdID0geXogLSB3eDsKICAgICAgZVszICogMiArIDBdID0geHogLSB3eTsKICAgICAgZVszICogMiArIDFdID0geXogKyB3eDsKICAgICAgZVszICogMiArIDJdID0gMSAtICh4eCArIHl5KTsKICAgICAgcmV0dXJuIHRoaXM7CiAgICB9CiAgICAvKioKICAgICAqIFRyYW5zcG9zZSB0aGUgbWF0cml4CiAgICAgKiBAcGFyYW0gdGFyZ2V0IE9wdGlvbmFsLiBXaGVyZSB0byBzdG9yZSB0aGUgcmVzdWx0LgogICAgICogQHJldHVybiBUaGUgdGFyZ2V0IE1hdDMsIG9yIGEgbmV3IE1hdDMgaWYgdGFyZ2V0IHdhcyBvbWl0dGVkLgogICAgICovCgoKICAgIHRyYW5zcG9zZSh0YXJnZXQpIHsKICAgICAgaWYgKHRhcmdldCA9PT0gdm9pZCAwKSB7CiAgICAgICAgdGFyZ2V0ID0gbmV3IE1hdDMoKTsKICAgICAgfQoKICAgICAgY29uc3QgTSA9IHRoaXMuZWxlbWVudHM7CiAgICAgIGNvbnN0IFQgPSB0YXJnZXQuZWxlbWVudHM7CiAgICAgIGxldCB0bXA7IC8vU2V0IGRpYWdvbmFscwoKICAgICAgVFswXSA9IE1bMF07CiAgICAgIFRbNF0gPSBNWzRdOwogICAgICBUWzhdID0gTVs4XTsKICAgICAgdG1wID0gTVsxXTsKICAgICAgVFsxXSA9IE1bM107CiAgICAgIFRbM10gPSB0bXA7CiAgICAgIHRtcCA9IE1bMl07CiAgICAgIFRbMl0gPSBNWzZdOwogICAgICBUWzZdID0gdG1wOwogICAgICB0bXAgPSBNWzVdOwogICAgICBUWzVdID0gTVs3XTsKICAgICAgVFs3XSA9IHRtcDsKICAgICAgcmV0dXJuIHRhcmdldDsKICAgIH0KCiAgfQoKICBjb25zdCByZXZlcnNlX2VxbnMgPSBbMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMF07CiAgLyoqCiAgICogMy1kaW1lbnNpb25hbCB2ZWN0b3IKICAgKiBAZXhhbXBsZQogICAqICAgICBjb25zdCB2ID0gbmV3IFZlYzMoMSwgMiwgMykKICAgKiAgICAgY29uc29sZS5sb2coJ3g9JyArIHYueCkgLy8geD0xCiAgICovCgogIGNsYXNzIFZlYzMgewogICAgY29uc3RydWN0b3IoeCwgeSwgeikgewogICAgICBpZiAoeCA9PT0gdm9pZCAwKSB7CiAgICAgICAgeCA9IDAuMDsKICAgICAgfQoKICAgICAgaWYgKHkgPT09IHZvaWQgMCkgewogICAgICAgIHkgPSAwLjA7CiAgICAgIH0KCiAgICAgIGlmICh6ID09PSB2b2lkIDApIHsKICAgICAgICB6ID0gMC4wOwogICAgICB9CgogICAgICB0aGlzLnggPSB2b2lkIDA7CiAgICAgIHRoaXMueSA9IHZvaWQgMDsKICAgICAgdGhpcy56ID0gdm9pZCAwOwogICAgICB0aGlzLnggPSB4OwogICAgICB0aGlzLnkgPSB5OwogICAgICB0aGlzLnogPSB6OwogICAgfQogICAgLyoqCiAgICAgKiBWZWN0b3IgY3Jvc3MgcHJvZHVjdAogICAgICogQHBhcmFtIHRhcmdldCBPcHRpb25hbCB0YXJnZXQgdG8gc2F2ZSBpbi4KICAgICAqLwoKCiAgICBjcm9zcyh2ZWN0b3IsIHRhcmdldCkgewogICAgICBpZiAodGFyZ2V0ID09PSB2b2lkIDApIHsKICAgICAgICB0YXJnZXQgPSBuZXcgVmVjMygpOwogICAgICB9CgogICAgICBjb25zdCB2eCA9IHZlY3Rvci54OwogICAgICBjb25zdCB2eSA9IHZlY3Rvci55OwogICAgICBjb25zdCB2eiA9IHZlY3Rvci56OwogICAgICBjb25zdCB4ID0gdGhpcy54OwogICAgICBjb25zdCB5ID0gdGhpcy55OwogICAgICBjb25zdCB6ID0gdGhpcy56OwogICAgICB0YXJnZXQueCA9IHkgKiB2eiAtIHogKiB2eTsKICAgICAgdGFyZ2V0LnkgPSB6ICogdnggLSB4ICogdno7CiAgICAgIHRhcmdldC56ID0geCAqIHZ5IC0geSAqIHZ4OwogICAgICByZXR1cm4gdGFyZ2V0OwogICAgfQogICAgLyoqCiAgICAgKiBTZXQgdGhlIHZlY3RvcnMnIDMgZWxlbWVudHMKICAgICAqLwoKCiAgICBzZXQoeCwgeSwgeikgewogICAgICB0aGlzLnggPSB4OwogICAgICB0aGlzLnkgPSB5OwogICAgICB0aGlzLnogPSB6OwogICAgICByZXR1cm4gdGhpczsKICAgIH0KICAgIC8qKgogICAgICogU2V0IGFsbCBjb21wb25lbnRzIG9mIHRoZSB2ZWN0b3IgdG8gemVyby4KICAgICAqLwoKCiAgICBzZXRaZXJvKCkgewogICAgICB0aGlzLnggPSB0aGlzLnkgPSB0aGlzLnogPSAwOwogICAgfQogICAgLyoqCiAgICAgKiBWZWN0b3IgYWRkaXRpb24KICAgICAqLwoKCiAgICB2YWRkKHZlY3RvciwgdGFyZ2V0KSB7CiAgICAgIGlmICh0YXJnZXQpIHsKICAgICAgICB0YXJnZXQueCA9IHZlY3Rvci54ICsgdGhpcy54OwogICAgICAgIHRhcmdldC55ID0gdmVjdG9yLnkgKyB0aGlzLnk7CiAgICAgICAgdGFyZ2V0LnogPSB2ZWN0b3IueiArIHRoaXMuejsKICAgICAgfSBlbHNlIHsKICAgICAgICByZXR1cm4gbmV3IFZlYzModGhpcy54ICsgdmVjdG9yLngsIHRoaXMueSArIHZlY3Rvci55LCB0aGlzLnogKyB2ZWN0b3Iueik7CiAgICAgIH0KICAgIH0KICAgIC8qKgogICAgICogVmVjdG9yIHN1YnRyYWN0aW9uCiAgICAgKiBAcGFyYW0gdGFyZ2V0IE9wdGlvbmFsIHRhcmdldCB0byBzYXZlIGluLgogICAgICovCgoKICAgIHZzdWIodmVjdG9yLCB0YXJnZXQpIHsKICAgICAgaWYgKHRhcmdldCkgewogICAgICAgIHRhcmdldC54ID0gdGhpcy54IC0gdmVjdG9yLng7CiAgICAgICAgdGFyZ2V0LnkgPSB0aGlzLnkgLSB2ZWN0b3IueTsKICAgICAgICB0YXJnZXQueiA9IHRoaXMueiAtIHZlY3Rvci56OwogICAgICB9IGVsc2UgewogICAgICAgIHJldHVybiBuZXcgVmVjMyh0aGlzLnggLSB2ZWN0b3IueCwgdGhpcy55IC0gdmVjdG9yLnksIHRoaXMueiAtIHZlY3Rvci56KTsKICAgICAgfQogICAgfQogICAgLyoqCiAgICAgKiBHZXQgdGhlIGNyb3NzIHByb2R1Y3QgbWF0cml4IGFfY3Jvc3MgZnJvbSBhIHZlY3Rvciwgc3VjaCB0aGF0IGEgeCBiID0gYV9jcm9zcyAqIGIgPSBjCiAgICAgKgogICAgICogU2VlIHtAbGluayBodHRwczovL3d3dzguY3MudW11LnNlL2t1cnNlci9UREJEMjQvVlQwNi9sZWN0dXJlcy9MZWN0dXJlNi5wZGYgVW1lw6UgVW5pdmVyc2l0eSBMZWN0dXJlfQogICAgICovCgoKICAgIGNyb3NzbWF0KCkgewogICAgICByZXR1cm4gbmV3IE1hdDMoWzAsIC10aGlzLnosIHRoaXMueSwgdGhpcy56LCAwLCAtdGhpcy54LCAtdGhpcy55LCB0aGlzLngsIDBdKTsKICAgIH0KICAgIC8qKgogICAgICogTm9ybWFsaXplIHRoZSB2ZWN0b3IuIE5vdGUgdGhhdCB0aGlzIGNoYW5nZXMgdGhlIHZhbHVlcyBpbiB0aGUgdmVjdG9yLgogICAgICAqIEByZXR1cm4gUmV0dXJucyB0aGUgbm9ybSBvZiB0aGUgdmVjdG9yCiAgICAgKi8KCgogICAgbm9ybWFsaXplKCkgewogICAgICBjb25zdCB4ID0gdGhpcy54OwogICAgICBjb25zdCB5ID0gdGhpcy55OwogICAgICBjb25zdCB6ID0gdGhpcy56OwogICAgICBjb25zdCBuID0gTWF0aC5zcXJ0KHggKiB4ICsgeSAqIHkgKyB6ICogeik7CgogICAgICBpZiAobiA+IDAuMCkgewogICAgICAgIGNvbnN0IGludk4gPSAxIC8gbjsKICAgICAgICB0aGlzLnggKj0gaW52TjsKICAgICAgICB0aGlzLnkgKj0gaW52TjsKICAgICAgICB0aGlzLnogKj0gaW52TjsKICAgICAgfSBlbHNlIHsKICAgICAgICAvLyBNYWtlIHNvbWV0aGluZyB1cAogICAgICAgIHRoaXMueCA9IDA7CiAgICAgICAgdGhpcy55ID0gMDsKICAgICAgICB0aGlzLnogPSAwOwogICAgICB9CgogICAgICByZXR1cm4gbjsKICAgIH0KICAgIC8qKgogICAgICogR2V0IHRoZSB2ZXJzaW9uIG9mIHRoaXMgdmVjdG9yIHRoYXQgaXMgb2YgbGVuZ3RoIDEuCiAgICAgKiBAcGFyYW0gdGFyZ2V0IE9wdGlvbmFsIHRhcmdldCB0byBzYXZlIGluCiAgICAgKiBAcmV0dXJuIFJldHVybnMgdGhlIHVuaXQgdmVjdG9yCiAgICAgKi8KCgogICAgdW5pdCh0YXJnZXQpIHsKICAgICAgaWYgKHRhcmdldCA9PT0gdm9pZCAwKSB7CiAgICAgICAgdGFyZ2V0ID0gbmV3IFZlYzMoKTsKICAgICAgfQoKICAgICAgY29uc3QgeCA9IHRoaXMueDsKICAgICAgY29uc3QgeSA9IHRoaXMueTsKICAgICAgY29uc3QgeiA9IHRoaXMuejsKICAgICAgbGV0IG5pbnYgPSBNYXRoLnNxcnQoeCAqIHggKyB5ICogeSArIHogKiB6KTsKCiAgICAgIGlmIChuaW52ID4gMC4wKSB7CiAgICAgICAgbmludiA9IDEuMCAvIG5pbnY7CiAgICAgICAgdGFyZ2V0LnggPSB4ICogbmludjsKICAgICAgICB0YXJnZXQueSA9IHkgKiBuaW52OwogICAgICAgIHRhcmdldC56ID0geiAqIG5pbnY7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGFyZ2V0LnggPSAxOwogICAgICAgIHRhcmdldC55ID0gMDsKICAgICAgICB0YXJnZXQueiA9IDA7CiAgICAgIH0KCiAgICAgIHJldHVybiB0YXJnZXQ7CiAgICB9CiAgICAvKioKICAgICAqIEdldCB0aGUgbGVuZ3RoIG9mIHRoZSB2ZWN0b3IKICAgICAqLwoKCiAgICBsZW5ndGgoKSB7CiAgICAgIGNvbnN0IHggPSB0aGlzLng7CiAgICAgIGNvbnN0IHkgPSB0aGlzLnk7CiAgICAgIGNvbnN0IHogPSB0aGlzLno7CiAgICAgIHJldHVybiBNYXRoLnNxcnQoeCAqIHggKyB5ICogeSArIHogKiB6KTsKICAgIH0KICAgIC8qKgogICAgICogR2V0IHRoZSBzcXVhcmVkIGxlbmd0aCBvZiB0aGUgdmVjdG9yLgogICAgICovCgoKICAgIGxlbmd0aFNxdWFyZWQoKSB7CiAgICAgIHJldHVybiB0aGlzLmRvdCh0aGlzKTsKICAgIH0KICAgIC8qKgogICAgICogR2V0IGRpc3RhbmNlIGZyb20gdGhpcyBwb2ludCB0byBhbm90aGVyIHBvaW50CiAgICAgKi8KCgogICAgZGlzdGFuY2VUbyhwKSB7CiAgICAgIGNvbnN0IHggPSB0aGlzLng7CiAgICAgIGNvbnN0IHkgPSB0aGlzLnk7CiAgICAgIGNvbnN0IHogPSB0aGlzLno7CiAgICAgIGNvbnN0IHB4ID0gcC54OwogICAgICBjb25zdCBweSA9IHAueTsKICAgICAgY29uc3QgcHogPSBwLno7CiAgICAgIHJldHVybiBNYXRoLnNxcnQoKHB4IC0geCkgKiAocHggLSB4KSArIChweSAtIHkpICogKHB5IC0geSkgKyAocHogLSB6KSAqIChweiAtIHopKTsKICAgIH0KICAgIC8qKgogICAgICogR2V0IHNxdWFyZWQgZGlzdGFuY2UgZnJvbSB0aGlzIHBvaW50IHRvIGFub3RoZXIgcG9pbnQKICAgICAqLwoKCiAgICBkaXN0YW5jZVNxdWFyZWQocCkgewogICAgICBjb25zdCB4ID0gdGhpcy54OwogICAgICBjb25zdCB5ID0gdGhpcy55OwogICAgICBjb25zdCB6ID0gdGhpcy56OwogICAgICBjb25zdCBweCA9IHAueDsKICAgICAgY29uc3QgcHkgPSBwLnk7CiAgICAgIGNvbnN0IHB6ID0gcC56OwogICAgICByZXR1cm4gKHB4IC0geCkgKiAocHggLSB4KSArIChweSAtIHkpICogKHB5IC0geSkgKyAocHogLSB6KSAqIChweiAtIHopOwogICAgfQogICAgLyoqCiAgICAgKiBNdWx0aXBseSBhbGwgdGhlIGNvbXBvbmVudHMgb2YgdGhlIHZlY3RvciB3aXRoIGEgc2NhbGFyLgogICAgICogQHBhcmFtIHRhcmdldCBUaGUgdmVjdG9yIHRvIHNhdmUgdGhlIHJlc3VsdCBpbi4KICAgICAqLwoKCiAgICBzY2FsZShzY2FsYXIsIHRhcmdldCkgewogICAgICBpZiAodGFyZ2V0ID09PSB2b2lkIDApIHsKICAgICAgICB0YXJnZXQgPSBuZXcgVmVjMygpOwogICAgICB9CgogICAgICBjb25zdCB4ID0gdGhpcy54OwogICAgICBjb25zdCB5ID0gdGhpcy55OwogICAgICBjb25zdCB6ID0gdGhpcy56OwogICAgICB0YXJnZXQueCA9IHNjYWxhciAqIHg7CiAgICAgIHRhcmdldC55ID0gc2NhbGFyICogeTsKICAgICAgdGFyZ2V0LnogPSBzY2FsYXIgKiB6OwogICAgICByZXR1cm4gdGFyZ2V0OwogICAgfQogICAgLyoqCiAgICAgKiBNdWx0aXBseSB0aGUgdmVjdG9yIHdpdGggYW4gb3RoZXIgdmVjdG9yLCBjb21wb25lbnQtd2lzZS4KICAgICAqIEBwYXJhbSB0YXJnZXQgVGhlIHZlY3RvciB0byBzYXZlIHRoZSByZXN1bHQgaW4uCiAgICAgKi8KCgogICAgdm11bCh2ZWN0b3IsIHRhcmdldCkgewogICAgICBpZiAodGFyZ2V0ID09PSB2b2lkIDApIHsKICAgICAgICB0YXJnZXQgPSBuZXcgVmVjMygpOwogICAgICB9CgogICAgICB0YXJnZXQueCA9IHZlY3Rvci54ICogdGhpcy54OwogICAgICB0YXJnZXQueSA9IHZlY3Rvci55ICogdGhpcy55OwogICAgICB0YXJnZXQueiA9IHZlY3Rvci56ICogdGhpcy56OwogICAgICByZXR1cm4gdGFyZ2V0OwogICAgfQogICAgLyoqCiAgICAgKiBTY2FsZSBhIHZlY3RvciBhbmQgYWRkIGl0IHRvIHRoaXMgdmVjdG9yLiBTYXZlIHRoZSByZXN1bHQgaW4gInRhcmdldCIuICh0YXJnZXQgPSB0aGlzICsgdmVjdG9yICogc2NhbGFyKQogICAgICogQHBhcmFtIHRhcmdldCBUaGUgdmVjdG9yIHRvIHNhdmUgdGhlIHJlc3VsdCBpbi4KICAgICAqLwoKCiAgICBhZGRTY2FsZWRWZWN0b3Ioc2NhbGFyLCB2ZWN0b3IsIHRhcmdldCkgewogICAgICBpZiAodGFyZ2V0ID09PSB2b2lkIDApIHsKICAgICAgICB0YXJnZXQgPSBuZXcgVmVjMygpOwogICAgICB9CgogICAgICB0YXJnZXQueCA9IHRoaXMueCArIHNjYWxhciAqIHZlY3Rvci54OwogICAgICB0YXJnZXQueSA9IHRoaXMueSArIHNjYWxhciAqIHZlY3Rvci55OwogICAgICB0YXJnZXQueiA9IHRoaXMueiArIHNjYWxhciAqIHZlY3Rvci56OwogICAgICByZXR1cm4gdGFyZ2V0OwogICAgfQogICAgLyoqCiAgICAgKiBDYWxjdWxhdGUgZG90IHByb2R1Y3QKICAgICAqIEBwYXJhbSB2ZWN0b3IKICAgICAqLwoKCiAgICBkb3QodmVjdG9yKSB7CiAgICAgIHJldHVybiB0aGlzLnggKiB2ZWN0b3IueCArIHRoaXMueSAqIHZlY3Rvci55ICsgdGhpcy56ICogdmVjdG9yLno7CiAgICB9CgogICAgaXNaZXJvKCkgewogICAgICByZXR1cm4gdGhpcy54ID09PSAwICYmIHRoaXMueSA9PT0gMCAmJiB0aGlzLnogPT09IDA7CiAgICB9CiAgICAvKioKICAgICAqIE1ha2UgdGhlIHZlY3RvciBwb2ludCBpbiB0aGUgb3Bwb3NpdGUgZGlyZWN0aW9uLgogICAgICogQHBhcmFtIHRhcmdldCBPcHRpb25hbCB0YXJnZXQgdG8gc2F2ZSBpbgogICAgICovCgoKICAgIG5lZ2F0ZSh0YXJnZXQpIHsKICAgICAgaWYgKHRhcmdldCA9PT0gdm9pZCAwKSB7CiAgICAgICAgdGFyZ2V0ID0gbmV3IFZlYzMoKTsKICAgICAgfQoKICAgICAgdGFyZ2V0LnggPSAtdGhpcy54OwogICAgICB0YXJnZXQueSA9IC10aGlzLnk7CiAgICAgIHRhcmdldC56ID0gLXRoaXMuejsKICAgICAgcmV0dXJuIHRhcmdldDsKICAgIH0KICAgIC8qKgogICAgICogQ29tcHV0ZSB0d28gYXJ0aWZpY2lhbCB0YW5nZW50cyB0byB0aGUgdmVjdG9yCiAgICAgKiBAcGFyYW0gdDEgVmVjdG9yIG9iamVjdCB0byBzYXZlIHRoZSBmaXJzdCB0YW5nZW50IGluCiAgICAgKiBAcGFyYW0gdDIgVmVjdG9yIG9iamVjdCB0byBzYXZlIHRoZSBzZWNvbmQgdGFuZ2VudCBpbgogICAgICovCgoKICAgIHRhbmdlbnRzKHQxLCB0MikgewogICAgICBjb25zdCBub3JtID0gdGhpcy5sZW5ndGgoKTsKCiAgICAgIGlmIChub3JtID4gMC4wKSB7CiAgICAgICAgY29uc3QgbiA9IFZlYzNfdGFuZ2VudHNfbjsKICAgICAgICBjb25zdCBpbm9ybSA9IDEgLyBub3JtOwogICAgICAgIG4uc2V0KHRoaXMueCAqIGlub3JtLCB0aGlzLnkgKiBpbm9ybSwgdGhpcy56ICogaW5vcm0pOwogICAgICAgIGNvbnN0IHJhbmRWZWMgPSBWZWMzX3RhbmdlbnRzX3JhbmRWZWM7CgogICAgICAgIGlmIChNYXRoLmFicyhuLngpIDwgMC45KSB7CiAgICAgICAgICByYW5kVmVjLnNldCgxLCAwLCAwKTsKICAgICAgICAgIG4uY3Jvc3MocmFuZFZlYywgdDEpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICByYW5kVmVjLnNldCgwLCAxLCAwKTsKICAgICAgICAgIG4uY3Jvc3MocmFuZFZlYywgdDEpOwogICAgICAgIH0KCiAgICAgICAgbi5jcm9zcyh0MSwgdDIpOwogICAgICB9IGVsc2UgewogICAgICAgIC8vIFRoZSBub3JtYWwgbGVuZ3RoIGlzIHplcm8sIG1ha2Ugc29tZXRoaW5nIHVwCiAgICAgICAgdDEuc2V0KDEsIDAsIDApOwogICAgICAgIHQyLnNldCgwLCAxLCAwKTsKICAgICAgfQogICAgfQogICAgLyoqCiAgICAgKiBDb252ZXJ0cyB0byBhIG1vcmUgcmVhZGFibGUgZm9ybWF0CiAgICAgKi8KCgogICAgdG9TdHJpbmcoKSB7CiAgICAgIHJldHVybiB0aGlzLnggKyAiLCIgKyB0aGlzLnkgKyAiLCIgKyB0aGlzLno7CiAgICB9CiAgICAvKioKICAgICAqIENvbnZlcnRzIHRvIGFuIGFycmF5CiAgICAgKi8KCgogICAgdG9BcnJheSgpIHsKICAgICAgcmV0dXJuIFt0aGlzLngsIHRoaXMueSwgdGhpcy56XTsKICAgIH0KICAgIC8qKgogICAgICogQ29waWVzIHZhbHVlIG9mIHNvdXJjZSB0byB0aGlzIHZlY3Rvci4KICAgICAqLwoKCiAgICBjb3B5KHZlY3RvcikgewogICAgICB0aGlzLnggPSB2ZWN0b3IueDsKICAgICAgdGhpcy55ID0gdmVjdG9yLnk7CiAgICAgIHRoaXMueiA9IHZlY3Rvci56OwogICAgICByZXR1cm4gdGhpczsKICAgIH0KICAgIC8qKgogICAgICogRG8gYSBsaW5lYXIgaW50ZXJwb2xhdGlvbiBiZXR3ZWVuIHR3byB2ZWN0b3JzCiAgICAgKiBAcGFyYW0gdCBBIG51bWJlciBiZXR3ZWVuIDAgYW5kIDEuIDAgd2lsbCBtYWtlIHRoaXMgZnVuY3Rpb24gcmV0dXJuIHUsIGFuZCAxIHdpbGwgbWFrZSBpdCByZXR1cm4gdi4gTnVtYmVycyBpbiBiZXR3ZWVuIHdpbGwgZ2VuZXJhdGUgYSB2ZWN0b3IgaW4gYmV0d2VlbiB0aGVtLgogICAgICovCgoKICAgIGxlcnAodmVjdG9yLCB0LCB0YXJnZXQpIHsKICAgICAgY29uc3QgeCA9IHRoaXMueDsKICAgICAgY29uc3QgeSA9IHRoaXMueTsKICAgICAgY29uc3QgeiA9IHRoaXMuejsKICAgICAgdGFyZ2V0LnggPSB4ICsgKHZlY3Rvci54IC0geCkgKiB0OwogICAgICB0YXJnZXQueSA9IHkgKyAodmVjdG9yLnkgLSB5KSAqIHQ7CiAgICAgIHRhcmdldC56ID0geiArICh2ZWN0b3IueiAtIHopICogdDsKICAgIH0KICAgIC8qKgogICAgICogQ2hlY2sgaWYgYSB2ZWN0b3IgZXF1YWxzIGlzIGFsbW9zdCBlcXVhbCB0byBhbm90aGVyIG9uZS4KICAgICAqLwoKCiAgICBhbG1vc3RFcXVhbHModmVjdG9yLCBwcmVjaXNpb24pIHsKICAgICAgaWYgKHByZWNpc2lvbiA9PT0gdm9pZCAwKSB7CiAgICAgICAgcHJlY2lzaW9uID0gMWUtNjsKICAgICAgfQoKICAgICAgaWYgKE1hdGguYWJzKHRoaXMueCAtIHZlY3Rvci54KSA+IHByZWNpc2lvbiB8fCBNYXRoLmFicyh0aGlzLnkgLSB2ZWN0b3IueSkgPiBwcmVjaXNpb24gfHwgTWF0aC5hYnModGhpcy56IC0gdmVjdG9yLnopID4gcHJlY2lzaW9uKSB7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9CgogICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KICAgIC8qKgogICAgICogQ2hlY2sgaWYgYSB2ZWN0b3IgaXMgYWxtb3N0IHplcm8KICAgICAqLwoKCiAgICBhbG1vc3RaZXJvKHByZWNpc2lvbikgewogICAgICBpZiAocHJlY2lzaW9uID09PSB2b2lkIDApIHsKICAgICAgICBwcmVjaXNpb24gPSAxZS02OwogICAgICB9CgogICAgICBpZiAoTWF0aC5hYnModGhpcy54KSA+IHByZWNpc2lvbiB8fCBNYXRoLmFicyh0aGlzLnkpID4gcHJlY2lzaW9uIHx8IE1hdGguYWJzKHRoaXMueikgPiBwcmVjaXNpb24pIHsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0KCiAgICAgIHJldHVybiB0cnVlOwogICAgfQogICAgLyoqCiAgICAgKiBDaGVjayBpZiB0aGUgdmVjdG9yIGlzIGFudGktcGFyYWxsZWwgdG8gYW5vdGhlciB2ZWN0b3IuCiAgICAgKiBAcGFyYW0gcHJlY2lzaW9uIFNldCB0byB6ZXJvIGZvciBleGFjdCBjb21wYXJpc29ucwogICAgICovCgoKICAgIGlzQW50aXBhcmFsbGVsVG8odmVjdG9yLCBwcmVjaXNpb24pIHsKICAgICAgdGhpcy5uZWdhdGUoYW50aXBfbmVnKTsKICAgICAgcmV0dXJuIGFudGlwX25lZy5hbG1vc3RFcXVhbHModmVjdG9yLCBwcmVjaXNpb24pOwogICAgfQogICAgLyoqCiAgICAgKiBDbG9uZSB0aGUgdmVjdG9yCiAgICAgKi8KCgogICAgY2xvbmUoKSB7CiAgICAgIHJldHVybiBuZXcgVmVjMyh0aGlzLngsIHRoaXMueSwgdGhpcy56KTsKICAgIH0KCiAgfQoKICBWZWMzLlpFUk8gPSB2b2lkIDA7CiAgVmVjMy5VTklUX1ggPSB2b2lkIDA7CiAgVmVjMy5VTklUX1kgPSB2b2lkIDA7CiAgVmVjMy5VTklUX1ogPSB2b2lkIDA7CiAgVmVjMy5aRVJPID0gbmV3IFZlYzMoMCwgMCwgMCk7CiAgVmVjMy5VTklUX1ggPSBuZXcgVmVjMygxLCAwLCAwKTsKICBWZWMzLlVOSVRfWSA9IG5ldyBWZWMzKDAsIDEsIDApOwogIFZlYzMuVU5JVF9aID0gbmV3IFZlYzMoMCwgMCwgMSk7CiAgY29uc3QgVmVjM190YW5nZW50c19uID0gbmV3IFZlYzMoKTsKICBjb25zdCBWZWMzX3RhbmdlbnRzX3JhbmRWZWMgPSBuZXcgVmVjMygpOwogIGNvbnN0IGFudGlwX25lZyA9IG5ldyBWZWMzKCk7CiAgLyoqCiAgICogQXhpcyBhbGlnbmVkIGJvdW5kaW5nIGJveCBjbGFzcy4KICAgKi8KCiAgY2xhc3MgQUFCQiB7CiAgICAvKioKICAgICAqIFRoZSBsb3dlciBib3VuZCBvZiB0aGUgYm91bmRpbmcgYm94CiAgICAgKi8KCiAgICAvKioKICAgICAqIFRoZSB1cHBlciBib3VuZCBvZiB0aGUgYm91bmRpbmcgYm94CiAgICAgKi8KICAgIGNvbnN0cnVjdG9yKG9wdGlvbnMpIHsKICAgICAgaWYgKG9wdGlvbnMgPT09IHZvaWQgMCkgewogICAgICAgIG9wdGlvbnMgPSB7fTsKICAgICAgfQoKICAgICAgdGhpcy5sb3dlckJvdW5kID0gdm9pZCAwOwogICAgICB0aGlzLnVwcGVyQm91bmQgPSB2b2lkIDA7CiAgICAgIHRoaXMubG93ZXJCb3VuZCA9IG5ldyBWZWMzKCk7CiAgICAgIHRoaXMudXBwZXJCb3VuZCA9IG5ldyBWZWMzKCk7CgogICAgICBpZiAob3B0aW9ucy5sb3dlckJvdW5kKSB7CiAgICAgICAgdGhpcy5sb3dlckJvdW5kLmNvcHkob3B0aW9ucy5sb3dlckJvdW5kKTsKICAgICAgfQoKICAgICAgaWYgKG9wdGlvbnMudXBwZXJCb3VuZCkgewogICAgICAgIHRoaXMudXBwZXJCb3VuZC5jb3B5KG9wdGlvbnMudXBwZXJCb3VuZCk7CiAgICAgIH0KICAgIH0KICAgIC8qKgogICAgICogU2V0IHRoZSBBQUJCIGJvdW5kcyBmcm9tIGEgc2V0IG9mIHBvaW50cy4KICAgICAqIEBwYXJhbSBwb2ludHMgQW4gYXJyYXkgb2YgVmVjMydzLgogICAgICogQHJldHVybiBUaGUgc2VsZiBvYmplY3QKICAgICAqLwoKCiAgICBzZXRGcm9tUG9pbnRzKHBvaW50cywgcG9zaXRpb24sIHF1YXRlcm5pb24sIHNraW5TaXplKSB7CiAgICAgIGNvbnN0IGwgPSB0aGlzLmxvd2VyQm91bmQ7CiAgICAgIGNvbnN0IHUgPSB0aGlzLnVwcGVyQm91bmQ7CiAgICAgIGNvbnN0IHEgPSBxdWF0ZXJuaW9uOyAvLyBTZXQgdG8gdGhlIGZpcnN0IHBvaW50CgogICAgICBsLmNvcHkocG9pbnRzWzBdKTsKCiAgICAgIGlmIChxKSB7CiAgICAgICAgcS52bXVsdChsLCBsKTsKICAgICAgfQoKICAgICAgdS5jb3B5KGwpOwoKICAgICAgZm9yIChsZXQgaSA9IDE7IGkgPCBwb2ludHMubGVuZ3RoOyBpKyspIHsKICAgICAgICBsZXQgcCA9IHBvaW50c1tpXTsKCiAgICAgICAgaWYgKHEpIHsKICAgICAgICAgIHEudm11bHQocCwgdG1wJDEpOwogICAgICAgICAgcCA9IHRtcCQxOwogICAgICAgIH0KCiAgICAgICAgaWYgKHAueCA+IHUueCkgewogICAgICAgICAgdS54ID0gcC54OwogICAgICAgIH0KCiAgICAgICAgaWYgKHAueCA8IGwueCkgewogICAgICAgICAgbC54ID0gcC54OwogICAgICAgIH0KCiAgICAgICAgaWYgKHAueSA+IHUueSkgewogICAgICAgICAgdS55ID0gcC55OwogICAgICAgIH0KCiAgICAgICAgaWYgKHAueSA8IGwueSkgewogICAgICAgICAgbC55ID0gcC55OwogICAgICAgIH0KCiAgICAgICAgaWYgKHAueiA+IHUueikgewogICAgICAgICAgdS56ID0gcC56OwogICAgICAgIH0KCiAgICAgICAgaWYgKHAueiA8IGwueikgewogICAgICAgICAgbC56ID0gcC56OwogICAgICAgIH0KICAgICAgfSAvLyBBZGQgb2Zmc2V0CgoKICAgICAgaWYgKHBvc2l0aW9uKSB7CiAgICAgICAgcG9zaXRpb24udmFkZChsLCBsKTsKICAgICAgICBwb3NpdGlvbi52YWRkKHUsIHUpOwogICAgICB9CgogICAgICBpZiAoc2tpblNpemUpIHsKICAgICAgICBsLnggLT0gc2tpblNpemU7CiAgICAgICAgbC55IC09IHNraW5TaXplOwogICAgICAgIGwueiAtPSBza2luU2l6ZTsKICAgICAgICB1LnggKz0gc2tpblNpemU7CiAgICAgICAgdS55ICs9IHNraW5TaXplOwogICAgICAgIHUueiArPSBza2luU2l6ZTsKICAgICAgfQoKICAgICAgcmV0dXJuIHRoaXM7CiAgICB9CiAgICAvKioKICAgICAqIENvcHkgYm91bmRzIGZyb20gYW4gQUFCQiB0byB0aGlzIEFBQkIKICAgICAqIEBwYXJhbSBhYWJiIFNvdXJjZSB0byBjb3B5IGZyb20KICAgICAqIEByZXR1cm4gVGhlIHRoaXMgb2JqZWN0LCBmb3IgY2hhaW5hYmlsaXR5CiAgICAgKi8KCgogICAgY29weShhYWJiKSB7CiAgICAgIHRoaXMubG93ZXJCb3VuZC5jb3B5KGFhYmIubG93ZXJCb3VuZCk7CiAgICAgIHRoaXMudXBwZXJCb3VuZC5jb3B5KGFhYmIudXBwZXJCb3VuZCk7CiAgICAgIHJldHVybiB0aGlzOwogICAgfQogICAgLyoqCiAgICAgKiBDbG9uZSBhbiBBQUJCCiAgICAgKi8KCgogICAgY2xvbmUoKSB7CiAgICAgIHJldHVybiBuZXcgQUFCQigpLmNvcHkodGhpcyk7CiAgICB9CiAgICAvKioKICAgICAqIEV4dGVuZCB0aGlzIEFBQkIgc28gdGhhdCBpdCBjb3ZlcnMgdGhlIGdpdmVuIEFBQkIgdG9vLgogICAgICovCgoKICAgIGV4dGVuZChhYWJiKSB7CiAgICAgIHRoaXMubG93ZXJCb3VuZC54ID0gTWF0aC5taW4odGhpcy5sb3dlckJvdW5kLngsIGFhYmIubG93ZXJCb3VuZC54KTsKICAgICAgdGhpcy51cHBlckJvdW5kLnggPSBNYXRoLm1heCh0aGlzLnVwcGVyQm91bmQueCwgYWFiYi51cHBlckJvdW5kLngpOwogICAgICB0aGlzLmxvd2VyQm91bmQueSA9IE1hdGgubWluKHRoaXMubG93ZXJCb3VuZC55LCBhYWJiLmxvd2VyQm91bmQueSk7CiAgICAgIHRoaXMudXBwZXJCb3VuZC55ID0gTWF0aC5tYXgodGhpcy51cHBlckJvdW5kLnksIGFhYmIudXBwZXJCb3VuZC55KTsKICAgICAgdGhpcy5sb3dlckJvdW5kLnogPSBNYXRoLm1pbih0aGlzLmxvd2VyQm91bmQueiwgYWFiYi5sb3dlckJvdW5kLnopOwogICAgICB0aGlzLnVwcGVyQm91bmQueiA9IE1hdGgubWF4KHRoaXMudXBwZXJCb3VuZC56LCBhYWJiLnVwcGVyQm91bmQueik7CiAgICB9CiAgICAvKioKICAgICAqIFJldHVybnMgdHJ1ZSBpZiB0aGUgZ2l2ZW4gQUFCQiBvdmVybGFwcyB0aGlzIEFBQkIuCiAgICAgKi8KCgogICAgb3ZlcmxhcHMoYWFiYikgewogICAgICBjb25zdCBsMSA9IHRoaXMubG93ZXJCb3VuZDsKICAgICAgY29uc3QgdTEgPSB0aGlzLnVwcGVyQm91bmQ7CiAgICAgIGNvbnN0IGwyID0gYWFiYi5sb3dlckJvdW5kOwogICAgICBjb25zdCB1MiA9IGFhYmIudXBwZXJCb3VuZDsgLy8gICAgICBsMiAgICAgICAgdTIKICAgICAgLy8gICAgICB8LS0tLS0tLS0tfAogICAgICAvLyB8LS0tLS0tLS18CiAgICAgIC8vIGwxICAgICAgIHUxCgogICAgICBjb25zdCBvdmVybGFwc1ggPSBsMi54IDw9IHUxLnggJiYgdTEueCA8PSB1Mi54IHx8IGwxLnggPD0gdTIueCAmJiB1Mi54IDw9IHUxLng7CiAgICAgIGNvbnN0IG92ZXJsYXBzWSA9IGwyLnkgPD0gdTEueSAmJiB1MS55IDw9IHUyLnkgfHwgbDEueSA8PSB1Mi55ICYmIHUyLnkgPD0gdTEueTsKICAgICAgY29uc3Qgb3ZlcmxhcHNaID0gbDIueiA8PSB1MS56ICYmIHUxLnogPD0gdTIueiB8fCBsMS56IDw9IHUyLnogJiYgdTIueiA8PSB1MS56OwogICAgICByZXR1cm4gb3ZlcmxhcHNYICYmIG92ZXJsYXBzWSAmJiBvdmVybGFwc1o7CiAgICB9IC8vIE1vc3RseSBmb3IgZGVidWdnaW5nCgoKICAgIHZvbHVtZSgpIHsKICAgICAgY29uc3QgbCA9IHRoaXMubG93ZXJCb3VuZDsKICAgICAgY29uc3QgdSA9IHRoaXMudXBwZXJCb3VuZDsKICAgICAgcmV0dXJuICh1LnggLSBsLngpICogKHUueSAtIGwueSkgKiAodS56IC0gbC56KTsKICAgIH0KICAgIC8qKgogICAgICogUmV0dXJucyB0cnVlIGlmIHRoZSBnaXZlbiBBQUJCIGlzIGZ1bGx5IGNvbnRhaW5lZCBpbiB0aGlzIEFBQkIuCiAgICAgKi8KCgogICAgY29udGFpbnMoYWFiYikgewogICAgICBjb25zdCBsMSA9IHRoaXMubG93ZXJCb3VuZDsKICAgICAgY29uc3QgdTEgPSB0aGlzLnVwcGVyQm91bmQ7CiAgICAgIGNvbnN0IGwyID0gYWFiYi5sb3dlckJvdW5kOwogICAgICBjb25zdCB1MiA9IGFhYmIudXBwZXJCb3VuZDsgLy8gICAgICBsMiAgICAgICAgdTIKICAgICAgLy8gICAgICB8LS0tLS0tLS0tfAogICAgICAvLyB8LS0tLS0tLS0tLS0tLS0tfAogICAgICAvLyBsMSAgICAgICAgICAgICAgdTEKCiAgICAgIHJldHVybiBsMS54IDw9IGwyLnggJiYgdTEueCA+PSB1Mi54ICYmIGwxLnkgPD0gbDIueSAmJiB1MS55ID49IHUyLnkgJiYgbDEueiA8PSBsMi56ICYmIHUxLnogPj0gdTIuejsKICAgIH0KCiAgICBnZXRDb3JuZXJzKGEsIGIsIGMsIGQsIGUsIGYsIGcsIGgpIHsKICAgICAgY29uc3QgbCA9IHRoaXMubG93ZXJCb3VuZDsKICAgICAgY29uc3QgdSA9IHRoaXMudXBwZXJCb3VuZDsKICAgICAgYS5jb3B5KGwpOwogICAgICBiLnNldCh1LngsIGwueSwgbC56KTsKICAgICAgYy5zZXQodS54LCB1LnksIGwueik7CiAgICAgIGQuc2V0KGwueCwgdS55LCB1LnopOwogICAgICBlLnNldCh1LngsIGwueSwgdS56KTsKICAgICAgZi5zZXQobC54LCB1LnksIGwueik7CiAgICAgIGcuc2V0KGwueCwgbC55LCB1LnopOwogICAgICBoLmNvcHkodSk7CiAgICB9CiAgICAvKioKICAgICAqIEdldCB0aGUgcmVwcmVzZW50YXRpb24gb2YgYW4gQUFCQiBpbiBhbm90aGVyIGZyYW1lLgogICAgICogQHJldHVybiBUaGUgInRhcmdldCIgQUFCQiBvYmplY3QuCiAgICAgKi8KCgogICAgdG9Mb2NhbEZyYW1lKGZyYW1lLCB0YXJnZXQpIHsKICAgICAgY29uc3QgY29ybmVycyA9IHRyYW5zZm9ybUludG9GcmFtZV9jb3JuZXJzOwogICAgICBjb25zdCBhID0gY29ybmVyc1swXTsKICAgICAgY29uc3QgYiA9IGNvcm5lcnNbMV07CiAgICAgIGNvbnN0IGMgPSBjb3JuZXJzWzJdOwogICAgICBjb25zdCBkID0gY29ybmVyc1szXTsKICAgICAgY29uc3QgZSA9IGNvcm5lcnNbNF07CiAgICAgIGNvbnN0IGYgPSBjb3JuZXJzWzVdOwogICAgICBjb25zdCBnID0gY29ybmVyc1s2XTsKICAgICAgY29uc3QgaCA9IGNvcm5lcnNbN107IC8vIEdldCBjb3JuZXJzIGluIGN1cnJlbnQgZnJhbWUKCiAgICAgIHRoaXMuZ2V0Q29ybmVycyhhLCBiLCBjLCBkLCBlLCBmLCBnLCBoKTsgLy8gVHJhbnNmb3JtIHRoZW0gdG8gbmV3IGxvY2FsIGZyYW1lCgogICAgICBmb3IgKGxldCBpID0gMDsgaSAhPT0gODsgaSsrKSB7CiAgICAgICAgY29uc3QgY29ybmVyID0gY29ybmVyc1tpXTsKICAgICAgICBmcmFtZS5wb2ludFRvTG9jYWwoY29ybmVyLCBjb3JuZXIpOwogICAgICB9CgogICAgICByZXR1cm4gdGFyZ2V0LnNldEZyb21Qb2ludHMoY29ybmVycyk7CiAgICB9CiAgICAvKioKICAgICAqIEdldCB0aGUgcmVwcmVzZW50YXRpb24gb2YgYW4gQUFCQiBpbiB0aGUgZ2xvYmFsIGZyYW1lLgogICAgICogQHJldHVybiBUaGUgInRhcmdldCIgQUFCQiBvYmplY3QuCiAgICAgKi8KCgogICAgdG9Xb3JsZEZyYW1lKGZyYW1lLCB0YXJnZXQpIHsKICAgICAgY29uc3QgY29ybmVycyA9IHRyYW5zZm9ybUludG9GcmFtZV9jb3JuZXJzOwogICAgICBjb25zdCBhID0gY29ybmVyc1swXTsKICAgICAgY29uc3QgYiA9IGNvcm5lcnNbMV07CiAgICAgIGNvbnN0IGMgPSBjb3JuZXJzWzJdOwogICAgICBjb25zdCBkID0gY29ybmVyc1szXTsKICAgICAgY29uc3QgZSA9IGNvcm5lcnNbNF07CiAgICAgIGNvbnN0IGYgPSBjb3JuZXJzWzVdOwogICAgICBjb25zdCBnID0gY29ybmVyc1s2XTsKICAgICAgY29uc3QgaCA9IGNvcm5lcnNbN107IC8vIEdldCBjb3JuZXJzIGluIGN1cnJlbnQgZnJhbWUKCiAgICAgIHRoaXMuZ2V0Q29ybmVycyhhLCBiLCBjLCBkLCBlLCBmLCBnLCBoKTsgLy8gVHJhbnNmb3JtIHRoZW0gdG8gbmV3IGxvY2FsIGZyYW1lCgogICAgICBmb3IgKGxldCBpID0gMDsgaSAhPT0gODsgaSsrKSB7CiAgICAgICAgY29uc3QgY29ybmVyID0gY29ybmVyc1tpXTsKICAgICAgICBmcmFtZS5wb2ludFRvV29ybGQoY29ybmVyLCBjb3JuZXIpOwogICAgICB9CgogICAgICByZXR1cm4gdGFyZ2V0LnNldEZyb21Qb2ludHMoY29ybmVycyk7CiAgICB9CiAgICAvKioKICAgICAqIENoZWNrIGlmIHRoZSBBQUJCIGlzIGhpdCBieSBhIHJheS4KICAgICAqLwoKCiAgICBvdmVybGFwc1JheShyYXkpIHsKICAgICAgY29uc3QgewogICAgICAgIGRpcmVjdGlvbiwKICAgICAgICBmcm9tCiAgICAgIH0gPSByYXk7IC8vIGNvbnN0IHQgPSAwCiAgICAgIC8vIHJheS5kaXJlY3Rpb24gaXMgdW5pdCBkaXJlY3Rpb24gdmVjdG9yIG9mIHJheQoKICAgICAgY29uc3QgZGlyRnJhY1ggPSAxIC8gZGlyZWN0aW9uLng7CiAgICAgIGNvbnN0IGRpckZyYWNZID0gMSAvIGRpcmVjdGlvbi55OwogICAgICBjb25zdCBkaXJGcmFjWiA9IDEgLyBkaXJlY3Rpb24uejsgLy8gdGhpcy5sb3dlckJvdW5kIGlzIHRoZSBjb3JuZXIgb2YgQUFCQiB3aXRoIG1pbmltYWwgY29vcmRpbmF0ZXMgLSBsZWZ0IGJvdHRvbSwgcnQgaXMgbWF4aW1hbCBjb3JuZXIKCiAgICAgIGNvbnN0IHQxID0gKHRoaXMubG93ZXJCb3VuZC54IC0gZnJvbS54KSAqIGRpckZyYWNYOwogICAgICBjb25zdCB0MiA9ICh0aGlzLnVwcGVyQm91bmQueCAtIGZyb20ueCkgKiBkaXJGcmFjWDsKICAgICAgY29uc3QgdDMgPSAodGhpcy5sb3dlckJvdW5kLnkgLSBmcm9tLnkpICogZGlyRnJhY1k7CiAgICAgIGNvbnN0IHQ0ID0gKHRoaXMudXBwZXJCb3VuZC55IC0gZnJvbS55KSAqIGRpckZyYWNZOwogICAgICBjb25zdCB0NSA9ICh0aGlzLmxvd2VyQm91bmQueiAtIGZyb20ueikgKiBkaXJGcmFjWjsKICAgICAgY29uc3QgdDYgPSAodGhpcy51cHBlckJvdW5kLnogLSBmcm9tLnopICogZGlyRnJhY1o7IC8vIGNvbnN0IHRtaW4gPSBNYXRoLm1heChNYXRoLm1heChNYXRoLm1pbih0MSwgdDIpLCBNYXRoLm1pbih0MywgdDQpKSk7CiAgICAgIC8vIGNvbnN0IHRtYXggPSBNYXRoLm1pbihNYXRoLm1pbihNYXRoLm1heCh0MSwgdDIpLCBNYXRoLm1heCh0MywgdDQpKSk7CgogICAgICBjb25zdCB0bWluID0gTWF0aC5tYXgoTWF0aC5tYXgoTWF0aC5taW4odDEsIHQyKSwgTWF0aC5taW4odDMsIHQ0KSksIE1hdGgubWluKHQ1LCB0NikpOwogICAgICBjb25zdCB0bWF4ID0gTWF0aC5taW4oTWF0aC5taW4oTWF0aC5tYXgodDEsIHQyKSwgTWF0aC5tYXgodDMsIHQ0KSksIE1hdGgubWF4KHQ1LCB0NikpOyAvLyBpZiB0bWF4IDwgMCwgcmF5IChsaW5lKSBpcyBpbnRlcnNlY3RpbmcgQUFCQiwgYnV0IHdob2xlIEFBQkIgaXMgYmVoaW5nIHVzCgogICAgICBpZiAodG1heCA8IDApIHsKICAgICAgICAvL3QgPSB0bWF4OwogICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfSAvLyBpZiB0bWluID4gdG1heCwgcmF5IGRvZXNuJ3QgaW50ZXJzZWN0IEFBQkIKCgogICAgICBpZiAodG1pbiA+IHRtYXgpIHsKICAgICAgICAvL3QgPSB0bWF4OwogICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfQoKICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgogIH0KCiAgY29uc3QgdG1wJDEgPSBuZXcgVmVjMygpOwogIGNvbnN0IHRyYW5zZm9ybUludG9GcmFtZV9jb3JuZXJzID0gW25ldyBWZWMzKCksIG5ldyBWZWMzKCksIG5ldyBWZWMzKCksIG5ldyBWZWMzKCksIG5ldyBWZWMzKCksIG5ldyBWZWMzKCksIG5ldyBWZWMzKCksIG5ldyBWZWMzKCldOwogIC8qKgogICAqIENvbGxpc2lvbiAibWF0cml4Ii4KICAgKiBJdCdzIGFjdHVhbGx5IGEgdHJpYW5ndWxhci1zaGFwZWQgYXJyYXkgb2Ygd2hldGhlciB0d28gYm9kaWVzIGFyZSB0b3VjaGluZyB0aGlzIHN0ZXAsIGZvciByZWZlcmVuY2UgbmV4dCBzdGVwCiAgICovCgogIGNsYXNzIEFycmF5Q29sbGlzaW9uTWF0cml4IHsKICAgIC8qKgogICAgICogVGhlIG1hdHJpeCBzdG9yYWdlLgogICAgICovCiAgICBjb25zdHJ1Y3RvcigpIHsKICAgICAgdGhpcy5tYXRyaXggPSB2b2lkIDA7CiAgICAgIHRoaXMubWF0cml4ID0gW107CiAgICB9CiAgICAvKioKICAgICAqIEdldCBhbiBlbGVtZW50CiAgICAgKi8KCgogICAgZ2V0KGJpLCBiaikgewogICAgICBsZXQgewogICAgICAgIGluZGV4OiBpCiAgICAgIH0gPSBiaTsKICAgICAgbGV0IHsKICAgICAgICBpbmRleDogagogICAgICB9ID0gYmo7CgogICAgICBpZiAoaiA+IGkpIHsKICAgICAgICBjb25zdCB0ZW1wID0gajsKICAgICAgICBqID0gaTsKICAgICAgICBpID0gdGVtcDsKICAgICAgfQoKICAgICAgcmV0dXJuIHRoaXMubWF0cml4WyhpICogKGkgKyAxKSA+PiAxKSArIGogLSAxXTsKICAgIH0KICAgIC8qKgogICAgICogU2V0IGFuIGVsZW1lbnQKICAgICAqLwoKCiAgICBzZXQoYmksIGJqLCB2YWx1ZSkgewogICAgICBsZXQgewogICAgICAgIGluZGV4OiBpCiAgICAgIH0gPSBiaTsKICAgICAgbGV0IHsKICAgICAgICBpbmRleDogagogICAgICB9ID0gYmo7CgogICAgICBpZiAoaiA+IGkpIHsKICAgICAgICBjb25zdCB0ZW1wID0gajsKICAgICAgICBqID0gaTsKICAgICAgICBpID0gdGVtcDsKICAgICAgfQoKICAgICAgdGhpcy5tYXRyaXhbKGkgKiAoaSArIDEpID4+IDEpICsgaiAtIDFdID0gdmFsdWUgPyAxIDogMDsKICAgIH0KICAgIC8qKgogICAgICogU2V0cyBhbGwgZWxlbWVudHMgdG8gemVybwogICAgICovCgoKICAgIHJlc2V0KCkgewogICAgICBmb3IgKGxldCBpID0gMCwgbCA9IHRoaXMubWF0cml4Lmxlbmd0aDsgaSAhPT0gbDsgaSsrKSB7CiAgICAgICAgdGhpcy5tYXRyaXhbaV0gPSAwOwogICAgICB9CiAgICB9CiAgICAvKioKICAgICAqIFNldHMgdGhlIG1heCBudW1iZXIgb2Ygb2JqZWN0cwogICAgICovCgoKICAgIHNldE51bU9iamVjdHMobikgewogICAgICB0aGlzLm1hdHJpeC5sZW5ndGggPSBuICogKG4gLSAxKSA+PiAxOwogICAgfQoKICB9CiAgLyoqCiAgICogQmFzZSBjbGFzcyBmb3Igb2JqZWN0cyB0aGF0IGRpc3BhdGNoZXMgZXZlbnRzLgogICAqLwoKCiAgY2xhc3MgRXZlbnRUYXJnZXQgewogICAgY29uc3RydWN0b3IoKSB7CiAgICAgIHRoaXMuX2xpc3RlbmVycyA9IHZvaWQgMDsKICAgIH0KICAgIC8qKgogICAgICogQWRkIGFuIGV2ZW50IGxpc3RlbmVyCiAgICAgKiBAcmV0dXJuIFRoZSBzZWxmIG9iamVjdCwgZm9yIGNoYWluYWJpbGl0eS4KICAgICAqLwoKCiAgICBhZGRFdmVudExpc3RlbmVyKHR5cGUsIGxpc3RlbmVyKSB7CiAgICAgIGlmICh0aGlzLl9saXN0ZW5lcnMgPT09IHVuZGVmaW5lZCkgewogICAgICAgIHRoaXMuX2xpc3RlbmVycyA9IHt9OwogICAgICB9CgogICAgICBjb25zdCBsaXN0ZW5lcnMgPSB0aGlzLl9saXN0ZW5lcnM7CgogICAgICBpZiAobGlzdGVuZXJzW3R5cGVdID09PSB1bmRlZmluZWQpIHsKICAgICAgICBsaXN0ZW5lcnNbdHlwZV0gPSBbXTsKICAgICAgfQoKICAgICAgaWYgKCFsaXN0ZW5lcnNbdHlwZV0uaW5jbHVkZXMobGlzdGVuZXIpKSB7CiAgICAgICAgbGlzdGVuZXJzW3R5cGVdLnB1c2gobGlzdGVuZXIpOwogICAgICB9CgogICAgICByZXR1cm4gdGhpczsKICAgIH0KICAgIC8qKgogICAgICogQ2hlY2sgaWYgYW4gZXZlbnQgbGlzdGVuZXIgaXMgYWRkZWQKICAgICAqLwoKCiAgICBoYXNFdmVudExpc3RlbmVyKHR5cGUsIGxpc3RlbmVyKSB7CiAgICAgIGlmICh0aGlzLl9saXN0ZW5lcnMgPT09IHVuZGVmaW5lZCkgewogICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfQoKICAgICAgY29uc3QgbGlzdGVuZXJzID0gdGhpcy5fbGlzdGVuZXJzOwoKICAgICAgaWYgKGxpc3RlbmVyc1t0eXBlXSAhPT0gdW5kZWZpbmVkICYmIGxpc3RlbmVyc1t0eXBlXS5pbmNsdWRlcyhsaXN0ZW5lcikpIHsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgfQoKICAgICAgcmV0dXJuIGZhbHNlOwogICAgfQogICAgLyoqCiAgICAgKiBDaGVjayBpZiBhbnkgZXZlbnQgbGlzdGVuZXIgb2YgdGhlIGdpdmVuIHR5cGUgaXMgYWRkZWQKICAgICAqLwoKCiAgICBoYXNBbnlFdmVudExpc3RlbmVyKHR5cGUpIHsKICAgICAgaWYgKHRoaXMuX2xpc3RlbmVycyA9PT0gdW5kZWZpbmVkKSB7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9CgogICAgICBjb25zdCBsaXN0ZW5lcnMgPSB0aGlzLl9saXN0ZW5lcnM7CiAgICAgIHJldHVybiBsaXN0ZW5lcnNbdHlwZV0gIT09IHVuZGVmaW5lZDsKICAgIH0KICAgIC8qKgogICAgICogUmVtb3ZlIGFuIGV2ZW50IGxpc3RlbmVyCiAgICAgKiBAcmV0dXJuIFRoZSBzZWxmIG9iamVjdCwgZm9yIGNoYWluYWJpbGl0eS4KICAgICAqLwoKCiAgICByZW1vdmVFdmVudExpc3RlbmVyKHR5cGUsIGxpc3RlbmVyKSB7CiAgICAgIGlmICh0aGlzLl9saXN0ZW5lcnMgPT09IHVuZGVmaW5lZCkgewogICAgICAgIHJldHVybiB0aGlzOwogICAgICB9CgogICAgICBjb25zdCBsaXN0ZW5lcnMgPSB0aGlzLl9saXN0ZW5lcnM7CgogICAgICBpZiAobGlzdGVuZXJzW3R5cGVdID09PSB1bmRlZmluZWQpIHsKICAgICAgICByZXR1cm4gdGhpczsKICAgICAgfQoKICAgICAgY29uc3QgaW5kZXggPSBsaXN0ZW5lcnNbdHlwZV0uaW5kZXhPZihsaXN0ZW5lcik7CgogICAgICBpZiAoaW5kZXggIT09IC0xKSB7CiAgICAgICAgbGlzdGVuZXJzW3R5cGVdLnNwbGljZShpbmRleCwgMSk7CiAgICAgIH0KCiAgICAgIHJldHVybiB0aGlzOwogICAgfQogICAgLyoqCiAgICAgKiBFbWl0IGFuIGV2ZW50LgogICAgICogQHJldHVybiBUaGUgc2VsZiBvYmplY3QsIGZvciBjaGFpbmFiaWxpdHkuCiAgICAgKi8KCgogICAgZGlzcGF0Y2hFdmVudChldmVudCkgewogICAgICBpZiAodGhpcy5fbGlzdGVuZXJzID09PSB1bmRlZmluZWQpIHsKICAgICAgICByZXR1cm4gdGhpczsKICAgICAgfQoKICAgICAgY29uc3QgbGlzdGVuZXJzID0gdGhpcy5fbGlzdGVuZXJzOwogICAgICBjb25zdCBsaXN0ZW5lckFycmF5ID0gbGlzdGVuZXJzW2V2ZW50LnR5cGVdOwoKICAgICAgaWYgKGxpc3RlbmVyQXJyYXkgIT09IHVuZGVmaW5lZCkgewogICAgICAgIGV2ZW50LnRhcmdldCA9IHRoaXM7CgogICAgICAgIGZvciAobGV0IGkgPSAwLCBsID0gbGlzdGVuZXJBcnJheS5sZW5ndGg7IGkgPCBsOyBpKyspIHsKICAgICAgICAgIGxpc3RlbmVyQXJyYXlbaV0uY2FsbCh0aGlzLCBldmVudCk7CiAgICAgICAgfQogICAgICB9CgogICAgICByZXR1cm4gdGhpczsKICAgIH0KCiAgfQogIC8qKgogICAqIEEgUXVhdGVybmlvbiBkZXNjcmliZXMgYSByb3RhdGlvbiBpbiAzRCBzcGFjZS4gVGhlIFF1YXRlcm5pb24gaXMgbWF0aGVtYXRpY2FsbHkgZGVmaW5lZCBhcyBRID0geCppICsgeSpqICsgeiprICsgdywgd2hlcmUgKGksaixrKSBhcmUgaW1hZ2luYXJ5IGJhc2lzIHZlY3RvcnMuICh4LHkseikgY2FuIGJlIHNlZW4gYXMgYSB2ZWN0b3IgcmVsYXRlZCB0byB0aGUgYXhpcyBvZiByb3RhdGlvbiwgd2hpbGUgdGhlIHJlYWwgbXVsdGlwbGllciwgdywgaXMgcmVsYXRlZCB0byB0aGUgYW1vdW50IG9mIHJvdGF0aW9uLgogICAqIEBwYXJhbSB4IE11bHRpcGxpZXIgb2YgdGhlIGltYWdpbmFyeSBiYXNpcyB2ZWN0b3IgaS4KICAgKiBAcGFyYW0geSBNdWx0aXBsaWVyIG9mIHRoZSBpbWFnaW5hcnkgYmFzaXMgdmVjdG9yIGouCiAgICogQHBhcmFtIHogTXVsdGlwbGllciBvZiB0aGUgaW1hZ2luYXJ5IGJhc2lzIHZlY3RvciBrLgogICAqIEBwYXJhbSB3IE11bHRpcGxpZXIgb2YgdGhlIHJlYWwgcGFydC4KICAgKiBAc2VlIGh0dHA6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvUXVhdGVybmlvbgogICAqLwoKCiAgY2xhc3MgUXVhdGVybmlvbiB7CiAgICBjb25zdHJ1Y3Rvcih4LCB5LCB6LCB3KSB7CiAgICAgIGlmICh4ID09PSB2b2lkIDApIHsKICAgICAgICB4ID0gMDsKICAgICAgfQoKICAgICAgaWYgKHkgPT09IHZvaWQgMCkgewogICAgICAgIHkgPSAwOwogICAgICB9CgogICAgICBpZiAoeiA9PT0gdm9pZCAwKSB7CiAgICAgICAgeiA9IDA7CiAgICAgIH0KCiAgICAgIGlmICh3ID09PSB2b2lkIDApIHsKICAgICAgICB3ID0gMTsKICAgICAgfQoKICAgICAgdGhpcy54ID0gdm9pZCAwOwogICAgICB0aGlzLnkgPSB2b2lkIDA7CiAgICAgIHRoaXMueiA9IHZvaWQgMDsKICAgICAgdGhpcy53ID0gdm9pZCAwOwogICAgICB0aGlzLnggPSB4OwogICAgICB0aGlzLnkgPSB5OwogICAgICB0aGlzLnogPSB6OwogICAgICB0aGlzLncgPSB3OwogICAgfQogICAgLyoqCiAgICAgKiBTZXQgdGhlIHZhbHVlIG9mIHRoZSBxdWF0ZXJuaW9uLgogICAgICovCgoKICAgIHNldCh4LCB5LCB6LCB3KSB7CiAgICAgIHRoaXMueCA9IHg7CiAgICAgIHRoaXMueSA9IHk7CiAgICAgIHRoaXMueiA9IHo7CiAgICAgIHRoaXMudyA9IHc7CiAgICAgIHJldHVybiB0aGlzOwogICAgfQogICAgLyoqCiAgICAgKiBDb252ZXJ0IHRvIGEgcmVhZGFibGUgZm9ybWF0CiAgICAgKiBAcmV0dXJuICJ4LHkseix3IgogICAgICovCgoKICAgIHRvU3RyaW5nKCkgewogICAgICByZXR1cm4gdGhpcy54ICsgIiwiICsgdGhpcy55ICsgIiwiICsgdGhpcy56ICsgIiwiICsgdGhpcy53OwogICAgfQogICAgLyoqCiAgICAgKiBDb252ZXJ0IHRvIGFuIEFycmF5CiAgICAgKiBAcmV0dXJuIFt4LCB5LCB6LCB3XQogICAgICovCgoKICAgIHRvQXJyYXkoKSB7CiAgICAgIHJldHVybiBbdGhpcy54LCB0aGlzLnksIHRoaXMueiwgdGhpcy53XTsKICAgIH0KICAgIC8qKgogICAgICogU2V0IHRoZSBxdWF0ZXJuaW9uIGNvbXBvbmVudHMgZ2l2ZW4gYW4gYXhpcyBhbmQgYW4gYW5nbGUgaW4gcmFkaWFucy4KICAgICAqLwoKCiAgICBzZXRGcm9tQXhpc0FuZ2xlKHZlY3RvciwgYW5nbGUpIHsKICAgICAgY29uc3QgcyA9IE1hdGguc2luKGFuZ2xlICogMC41KTsKICAgICAgdGhpcy54ID0gdmVjdG9yLnggKiBzOwogICAgICB0aGlzLnkgPSB2ZWN0b3IueSAqIHM7CiAgICAgIHRoaXMueiA9IHZlY3Rvci56ICogczsKICAgICAgdGhpcy53ID0gTWF0aC5jb3MoYW5nbGUgKiAwLjUpOwogICAgICByZXR1cm4gdGhpczsKICAgIH0KICAgIC8qKgogICAgICogQ29udmVydHMgdGhlIHF1YXRlcm5pb24gdG8gWyBheGlzLCBhbmdsZSBdIHJlcHJlc2VudGF0aW9uLgogICAgICogQHBhcmFtIHRhcmdldEF4aXMgQSB2ZWN0b3Igb2JqZWN0IHRvIHJldXNlIGZvciBzdG9yaW5nIHRoZSBheGlzLgogICAgICogQHJldHVybiBBbiBhcnJheSwgZmlyc3QgZWxlbWVudCBpcyB0aGUgYXhpcyBhbmQgdGhlIHNlY29uZCBpcyB0aGUgYW5nbGUgaW4gcmFkaWFucy4KICAgICAqLwoKCiAgICB0b0F4aXNBbmdsZSh0YXJnZXRBeGlzKSB7CiAgICAgIGlmICh0YXJnZXRBeGlzID09PSB2b2lkIDApIHsKICAgICAgICB0YXJnZXRBeGlzID0gbmV3IFZlYzMoKTsKICAgICAgfQoKICAgICAgdGhpcy5ub3JtYWxpemUoKTsgLy8gaWYgdz4xIGFjb3MgYW5kIHNxcnQgd2lsbCBwcm9kdWNlIGVycm9ycywgdGhpcyBjYW50IGhhcHBlbiBpZiBxdWF0ZXJuaW9uIGlzIG5vcm1hbGlzZWQKCiAgICAgIGNvbnN0IGFuZ2xlID0gMiAqIE1hdGguYWNvcyh0aGlzLncpOwogICAgICBjb25zdCBzID0gTWF0aC5zcXJ0KDEgLSB0aGlzLncgKiB0aGlzLncpOyAvLyBhc3N1bWluZyBxdWF0ZXJuaW9uIG5vcm1hbGlzZWQgdGhlbiB3IGlzIGxlc3MgdGhhbiAxLCBzbyB0ZXJtIGFsd2F5cyBwb3NpdGl2ZS4KCiAgICAgIGlmIChzIDwgMC4wMDEpIHsKICAgICAgICAvLyB0ZXN0IHRvIGF2b2lkIGRpdmlkZSBieSB6ZXJvLCBzIGlzIGFsd2F5cyBwb3NpdGl2ZSBkdWUgdG8gc3FydAogICAgICAgIC8vIGlmIHMgY2xvc2UgdG8gemVybyB0aGVuIGRpcmVjdGlvbiBvZiBheGlzIG5vdCBpbXBvcnRhbnQKICAgICAgICB0YXJnZXRBeGlzLnggPSB0aGlzLng7IC8vIGlmIGl0IGlzIGltcG9ydGFudCB0aGF0IGF4aXMgaXMgbm9ybWFsaXNlZCB0aGVuIHJlcGxhY2Ugd2l0aCB4PTE7IHk9ej0wOwoKICAgICAgICB0YXJnZXRBeGlzLnkgPSB0aGlzLnk7CiAgICAgICAgdGFyZ2V0QXhpcy56ID0gdGhpcy56OwogICAgICB9IGVsc2UgewogICAgICAgIHRhcmdldEF4aXMueCA9IHRoaXMueCAvIHM7IC8vIG5vcm1hbGlzZSBheGlzCgogICAgICAgIHRhcmdldEF4aXMueSA9IHRoaXMueSAvIHM7CiAgICAgICAgdGFyZ2V0QXhpcy56ID0gdGhpcy56IC8gczsKICAgICAgfQoKICAgICAgcmV0dXJuIFt0YXJnZXRBeGlzLCBhbmdsZV07CiAgICB9CiAgICAvKioKICAgICAqIFNldCB0aGUgcXVhdGVybmlvbiB2YWx1ZSBnaXZlbiB0d28gdmVjdG9ycy4gVGhlIHJlc3VsdGluZyByb3RhdGlvbiB3aWxsIGJlIHRoZSBuZWVkZWQgcm90YXRpb24gdG8gcm90YXRlIHUgdG8gdi4KICAgICAqLwoKCiAgICBzZXRGcm9tVmVjdG9ycyh1LCB2KSB7CiAgICAgIGlmICh1LmlzQW50aXBhcmFsbGVsVG8odikpIHsKICAgICAgICBjb25zdCB0MSA9IHNmdl90MTsKICAgICAgICBjb25zdCB0MiA9IHNmdl90MjsKICAgICAgICB1LnRhbmdlbnRzKHQxLCB0Mik7CiAgICAgICAgdGhpcy5zZXRGcm9tQXhpc0FuZ2xlKHQxLCBNYXRoLlBJKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBjb25zdCBhID0gdS5jcm9zcyh2KTsKICAgICAgICB0aGlzLnggPSBhLng7CiAgICAgICAgdGhpcy55ID0gYS55OwogICAgICAgIHRoaXMueiA9IGEuejsKICAgICAgICB0aGlzLncgPSBNYXRoLnNxcnQodS5sZW5ndGgoKSAqKiAyICogdi5sZW5ndGgoKSAqKiAyKSArIHUuZG90KHYpOwogICAgICAgIHRoaXMubm9ybWFsaXplKCk7CiAgICAgIH0KCiAgICAgIHJldHVybiB0aGlzOwogICAgfQogICAgLyoqCiAgICAgKiBNdWx0aXBseSB0aGUgcXVhdGVybmlvbiB3aXRoIGFuIG90aGVyIHF1YXRlcm5pb24uCiAgICAgKi8KCgogICAgbXVsdChxdWF0LCB0YXJnZXQpIHsKICAgICAgaWYgKHRhcmdldCA9PT0gdm9pZCAwKSB7CiAgICAgICAgdGFyZ2V0ID0gbmV3IFF1YXRlcm5pb24oKTsKICAgICAgfQoKICAgICAgY29uc3QgYXggPSB0aGlzLng7CiAgICAgIGNvbnN0IGF5ID0gdGhpcy55OwogICAgICBjb25zdCBheiA9IHRoaXMuejsKICAgICAgY29uc3QgYXcgPSB0aGlzLnc7CiAgICAgIGNvbnN0IGJ4ID0gcXVhdC54OwogICAgICBjb25zdCBieSA9IHF1YXQueTsKICAgICAgY29uc3QgYnogPSBxdWF0Lno7CiAgICAgIGNvbnN0IGJ3ID0gcXVhdC53OwogICAgICB0YXJnZXQueCA9IGF4ICogYncgKyBhdyAqIGJ4ICsgYXkgKiBieiAtIGF6ICogYnk7CiAgICAgIHRhcmdldC55ID0gYXkgKiBidyArIGF3ICogYnkgKyBheiAqIGJ4IC0gYXggKiBiejsKICAgICAgdGFyZ2V0LnogPSBheiAqIGJ3ICsgYXcgKiBieiArIGF4ICogYnkgLSBheSAqIGJ4OwogICAgICB0YXJnZXQudyA9IGF3ICogYncgLSBheCAqIGJ4IC0gYXkgKiBieSAtIGF6ICogYno7CiAgICAgIHJldHVybiB0YXJnZXQ7CiAgICB9CiAgICAvKioKICAgICAqIEdldCB0aGUgaW52ZXJzZSBxdWF0ZXJuaW9uIHJvdGF0aW9uLgogICAgICovCgoKICAgIGludmVyc2UodGFyZ2V0KSB7CiAgICAgIGlmICh0YXJnZXQgPT09IHZvaWQgMCkgewogICAgICAgIHRhcmdldCA9IG5ldyBRdWF0ZXJuaW9uKCk7CiAgICAgIH0KCiAgICAgIGNvbnN0IHggPSB0aGlzLng7CiAgICAgIGNvbnN0IHkgPSB0aGlzLnk7CiAgICAgIGNvbnN0IHogPSB0aGlzLno7CiAgICAgIGNvbnN0IHcgPSB0aGlzLnc7CiAgICAgIHRoaXMuY29uanVnYXRlKHRhcmdldCk7CiAgICAgIGNvbnN0IGlub3JtMiA9IDEgLyAoeCAqIHggKyB5ICogeSArIHogKiB6ICsgdyAqIHcpOwogICAgICB0YXJnZXQueCAqPSBpbm9ybTI7CiAgICAgIHRhcmdldC55ICo9IGlub3JtMjsKICAgICAgdGFyZ2V0LnogKj0gaW5vcm0yOwogICAgICB0YXJnZXQudyAqPSBpbm9ybTI7CiAgICAgIHJldHVybiB0YXJnZXQ7CiAgICB9CiAgICAvKioKICAgICAqIEdldCB0aGUgcXVhdGVybmlvbiBjb25qdWdhdGUKICAgICAqLwoKCiAgICBjb25qdWdhdGUodGFyZ2V0KSB7CiAgICAgIGlmICh0YXJnZXQgPT09IHZvaWQgMCkgewogICAgICAgIHRhcmdldCA9IG5ldyBRdWF0ZXJuaW9uKCk7CiAgICAgIH0KCiAgICAgIHRhcmdldC54ID0gLXRoaXMueDsKICAgICAgdGFyZ2V0LnkgPSAtdGhpcy55OwogICAgICB0YXJnZXQueiA9IC10aGlzLno7CiAgICAgIHRhcmdldC53ID0gdGhpcy53OwogICAgICByZXR1cm4gdGFyZ2V0OwogICAgfQogICAgLyoqCiAgICAgKiBOb3JtYWxpemUgdGhlIHF1YXRlcm5pb24uIE5vdGUgdGhhdCB0aGlzIGNoYW5nZXMgdGhlIHZhbHVlcyBvZiB0aGUgcXVhdGVybmlvbi4KICAgICAqLwoKCiAgICBub3JtYWxpemUoKSB7CiAgICAgIGxldCBsID0gTWF0aC5zcXJ0KHRoaXMueCAqIHRoaXMueCArIHRoaXMueSAqIHRoaXMueSArIHRoaXMueiAqIHRoaXMueiArIHRoaXMudyAqIHRoaXMudyk7CgogICAgICBpZiAobCA9PT0gMCkgewogICAgICAgIHRoaXMueCA9IDA7CiAgICAgICAgdGhpcy55ID0gMDsKICAgICAgICB0aGlzLnogPSAwOwogICAgICAgIHRoaXMudyA9IDA7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgbCA9IDEgLyBsOwogICAgICAgIHRoaXMueCAqPSBsOwogICAgICAgIHRoaXMueSAqPSBsOwogICAgICAgIHRoaXMueiAqPSBsOwogICAgICAgIHRoaXMudyAqPSBsOwogICAgICB9CgogICAgICByZXR1cm4gdGhpczsKICAgIH0KICAgIC8qKgogICAgICogQXBwcm94aW1hdGlvbiBvZiBxdWF0ZXJuaW9uIG5vcm1hbGl6YXRpb24uIFdvcmtzIGJlc3Qgd2hlbiBxdWF0IGlzIGFscmVhZHkgYWxtb3N0LW5vcm1hbGl6ZWQuCiAgICAgKiBAYXV0aG9yIHVucGhhc2VkLCBodHRwczovL2dpdGh1Yi5jb20vdW5waGFzZWQKICAgICAqLwoKCiAgICBub3JtYWxpemVGYXN0KCkgewogICAgICBjb25zdCBmID0gKDMuMCAtICh0aGlzLnggKiB0aGlzLnggKyB0aGlzLnkgKiB0aGlzLnkgKyB0aGlzLnogKiB0aGlzLnogKyB0aGlzLncgKiB0aGlzLncpKSAvIDIuMDsKCiAgICAgIGlmIChmID09PSAwKSB7CiAgICAgICAgdGhpcy54ID0gMDsKICAgICAgICB0aGlzLnkgPSAwOwogICAgICAgIHRoaXMueiA9IDA7CiAgICAgICAgdGhpcy53ID0gMDsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLnggKj0gZjsKICAgICAgICB0aGlzLnkgKj0gZjsKICAgICAgICB0aGlzLnogKj0gZjsKICAgICAgICB0aGlzLncgKj0gZjsKICAgICAgfQoKICAgICAgcmV0dXJuIHRoaXM7CiAgICB9CiAgICAvKioKICAgICAqIE11bHRpcGx5IHRoZSBxdWF0ZXJuaW9uIGJ5IGEgdmVjdG9yCiAgICAgKi8KCgogICAgdm11bHQodiwgdGFyZ2V0KSB7CiAgICAgIGlmICh0YXJnZXQgPT09IHZvaWQgMCkgewogICAgICAgIHRhcmdldCA9IG5ldyBWZWMzKCk7CiAgICAgIH0KCiAgICAgIGNvbnN0IHggPSB2Lng7CiAgICAgIGNvbnN0IHkgPSB2Lnk7CiAgICAgIGNvbnN0IHogPSB2Lno7CiAgICAgIGNvbnN0IHF4ID0gdGhpcy54OwogICAgICBjb25zdCBxeSA9IHRoaXMueTsKICAgICAgY29uc3QgcXogPSB0aGlzLno7CiAgICAgIGNvbnN0IHF3ID0gdGhpcy53OyAvLyBxKnYKCiAgICAgIGNvbnN0IGl4ID0gcXcgKiB4ICsgcXkgKiB6IC0gcXogKiB5OwogICAgICBjb25zdCBpeSA9IHF3ICogeSArIHF6ICogeCAtIHF4ICogejsKICAgICAgY29uc3QgaXogPSBxdyAqIHogKyBxeCAqIHkgLSBxeSAqIHg7CiAgICAgIGNvbnN0IGl3ID0gLXF4ICogeCAtIHF5ICogeSAtIHF6ICogejsKICAgICAgdGFyZ2V0LnggPSBpeCAqIHF3ICsgaXcgKiAtcXggKyBpeSAqIC1xeiAtIGl6ICogLXF5OwogICAgICB0YXJnZXQueSA9IGl5ICogcXcgKyBpdyAqIC1xeSArIGl6ICogLXF4IC0gaXggKiAtcXo7CiAgICAgIHRhcmdldC56ID0gaXogKiBxdyArIGl3ICogLXF6ICsgaXggKiAtcXkgLSBpeSAqIC1xeDsKICAgICAgcmV0dXJuIHRhcmdldDsKICAgIH0KICAgIC8qKgogICAgICogQ29waWVzIHZhbHVlIG9mIHNvdXJjZSB0byB0aGlzIHF1YXRlcm5pb24uCiAgICAgKiBAcmV0dXJuIHRoaXMKICAgICAqLwoKCiAgICBjb3B5KHF1YXQpIHsKICAgICAgdGhpcy54ID0gcXVhdC54OwogICAgICB0aGlzLnkgPSBxdWF0Lnk7CiAgICAgIHRoaXMueiA9IHF1YXQuejsKICAgICAgdGhpcy53ID0gcXVhdC53OwogICAgICByZXR1cm4gdGhpczsKICAgIH0KICAgIC8qKgogICAgICogQ29udmVydCB0aGUgcXVhdGVybmlvbiB0byBldWxlciBhbmdsZSByZXByZXNlbnRhdGlvbi4gT3JkZXI6IFlaWCwgYXMgdGhpcyBwYWdlIGRlc2NyaWJlczogaHR0cHM6Ly93d3cuZXVjbGlkZWFuc3BhY2UuY29tL21hdGhzL3N0YW5kYXJkcy9pbmRleC5odG0KICAgICAqIEBwYXJhbSBvcmRlciBUaHJlZS1jaGFyYWN0ZXIgc3RyaW5nLCBkZWZhdWx0cyB0byAiWVpYIgogICAgICovCgoKICAgIHRvRXVsZXIodGFyZ2V0LCBvcmRlcikgewogICAgICBpZiAob3JkZXIgPT09IHZvaWQgMCkgewogICAgICAgIG9yZGVyID0gJ1laWCc7CiAgICAgIH0KCiAgICAgIGxldCBoZWFkaW5nOwogICAgICBsZXQgYXR0aXR1ZGU7CiAgICAgIGxldCBiYW5rOwogICAgICBjb25zdCB4ID0gdGhpcy54OwogICAgICBjb25zdCB5ID0gdGhpcy55OwogICAgICBjb25zdCB6ID0gdGhpcy56OwogICAgICBjb25zdCB3ID0gdGhpcy53OwoKICAgICAgc3dpdGNoIChvcmRlcikgewogICAgICAgIGNhc2UgJ1laWCc6CiAgICAgICAgICBjb25zdCB0ZXN0ID0geCAqIHkgKyB6ICogdzsKCiAgICAgICAgICBpZiAodGVzdCA+IDAuNDk5KSB7CiAgICAgICAgICAgIC8vIHNpbmd1bGFyaXR5IGF0IG5vcnRoIHBvbGUKICAgICAgICAgICAgaGVhZGluZyA9IDIgKiBNYXRoLmF0YW4yKHgsIHcpOwogICAgICAgICAgICBhdHRpdHVkZSA9IE1hdGguUEkgLyAyOwogICAgICAgICAgICBiYW5rID0gMDsKICAgICAgICAgIH0KCiAgICAgICAgICBpZiAodGVzdCA8IC0wLjQ5OSkgewogICAgICAgICAgICAvLyBzaW5ndWxhcml0eSBhdCBzb3V0aCBwb2xlCiAgICAgICAgICAgIGhlYWRpbmcgPSAtMiAqIE1hdGguYXRhbjIoeCwgdyk7CiAgICAgICAgICAgIGF0dGl0dWRlID0gLU1hdGguUEkgLyAyOwogICAgICAgICAgICBiYW5rID0gMDsKICAgICAgICAgIH0KCiAgICAgICAgICBpZiAoaGVhZGluZyA9PT0gdW5kZWZpbmVkKSB7CiAgICAgICAgICAgIGNvbnN0IHNxeCA9IHggKiB4OwogICAgICAgICAgICBjb25zdCBzcXkgPSB5ICogeTsKICAgICAgICAgICAgY29uc3Qgc3F6ID0geiAqIHo7CiAgICAgICAgICAgIGhlYWRpbmcgPSBNYXRoLmF0YW4yKDIgKiB5ICogdyAtIDIgKiB4ICogeiwgMSAtIDIgKiBzcXkgLSAyICogc3F6KTsgLy8gSGVhZGluZwoKICAgICAgICAgICAgYXR0aXR1ZGUgPSBNYXRoLmFzaW4oMiAqIHRlc3QpOyAvLyBhdHRpdHVkZQoKICAgICAgICAgICAgYmFuayA9IE1hdGguYXRhbjIoMiAqIHggKiB3IC0gMiAqIHkgKiB6LCAxIC0gMiAqIHNxeCAtIDIgKiBzcXopOyAvLyBiYW5rCiAgICAgICAgICB9CgogICAgICAgICAgYnJlYWs7CgogICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoIkV1bGVyIG9yZGVyICIgKyBvcmRlciArICIgbm90IHN1cHBvcnRlZCB5ZXQuIik7CiAgICAgIH0KCiAgICAgIHRhcmdldC55ID0gaGVhZGluZzsKICAgICAgdGFyZ2V0LnogPSBhdHRpdHVkZTsKICAgICAgdGFyZ2V0LnggPSBiYW5rOwogICAgfQogICAgLyoqCiAgICAgKiBAcGFyYW0gb3JkZXIgVGhlIG9yZGVyIHRvIGFwcGx5IGFuZ2xlczogJ1hZWicgb3IgJ1lYWicgb3IgYW55IG90aGVyIGNvbWJpbmF0aW9uLgogICAgICoKICAgICAqIFNlZSB7QGxpbmsgaHR0cHM6Ly93d3cubWF0aHdvcmtzLmNvbS9tYXRsYWJjZW50cmFsL2ZpbGVleGNoYW5nZS8yMDY5Ni1mdW5jdGlvbi10by1jb252ZXJ0LWJldHdlZW4tZGNtLWV1bGVyLWFuZ2xlcy1xdWF0ZXJuaW9ucy1hbmQtZXVsZXItdmVjdG9ycyBNYXRoV29ya3N9IHJlZmVyZW5jZQogICAgICovCgoKICAgIHNldEZyb21FdWxlcih4LCB5LCB6LCBvcmRlcikgewogICAgICBpZiAob3JkZXIgPT09IHZvaWQgMCkgewogICAgICAgIG9yZGVyID0gJ1hZWic7CiAgICAgIH0KCiAgICAgIGNvbnN0IGMxID0gTWF0aC5jb3MoeCAvIDIpOwogICAgICBjb25zdCBjMiA9IE1hdGguY29zKHkgLyAyKTsKICAgICAgY29uc3QgYzMgPSBNYXRoLmNvcyh6IC8gMik7CiAgICAgIGNvbnN0IHMxID0gTWF0aC5zaW4oeCAvIDIpOwogICAgICBjb25zdCBzMiA9IE1hdGguc2luKHkgLyAyKTsKICAgICAgY29uc3QgczMgPSBNYXRoLnNpbih6IC8gMik7CgogICAgICBpZiAob3JkZXIgPT09ICdYWVonKSB7CiAgICAgICAgdGhpcy54ID0gczEgKiBjMiAqIGMzICsgYzEgKiBzMiAqIHMzOwogICAgICAgIHRoaXMueSA9IGMxICogczIgKiBjMyAtIHMxICogYzIgKiBzMzsKICAgICAgICB0aGlzLnogPSBjMSAqIGMyICogczMgKyBzMSAqIHMyICogYzM7CiAgICAgICAgdGhpcy53ID0gYzEgKiBjMiAqIGMzIC0gczEgKiBzMiAqIHMzOwogICAgICB9IGVsc2UgaWYgKG9yZGVyID09PSAnWVhaJykgewogICAgICAgIHRoaXMueCA9IHMxICogYzIgKiBjMyArIGMxICogczIgKiBzMzsKICAgICAgICB0aGlzLnkgPSBjMSAqIHMyICogYzMgLSBzMSAqIGMyICogczM7CiAgICAgICAgdGhpcy56ID0gYzEgKiBjMiAqIHMzIC0gczEgKiBzMiAqIGMzOwogICAgICAgIHRoaXMudyA9IGMxICogYzIgKiBjMyArIHMxICogczIgKiBzMzsKICAgICAgfSBlbHNlIGlmIChvcmRlciA9PT0gJ1pYWScpIHsKICAgICAgICB0aGlzLnggPSBzMSAqIGMyICogYzMgLSBjMSAqIHMyICogczM7CiAgICAgICAgdGhpcy55ID0gYzEgKiBzMiAqIGMzICsgczEgKiBjMiAqIHMzOwogICAgICAgIHRoaXMueiA9IGMxICogYzIgKiBzMyArIHMxICogczIgKiBjMzsKICAgICAgICB0aGlzLncgPSBjMSAqIGMyICogYzMgLSBzMSAqIHMyICogczM7CiAgICAgIH0gZWxzZSBpZiAob3JkZXIgPT09ICdaWVgnKSB7CiAgICAgICAgdGhpcy54ID0gczEgKiBjMiAqIGMzIC0gYzEgKiBzMiAqIHMzOwogICAgICAgIHRoaXMueSA9IGMxICogczIgKiBjMyArIHMxICogYzIgKiBzMzsKICAgICAgICB0aGlzLnogPSBjMSAqIGMyICogczMgLSBzMSAqIHMyICogYzM7CiAgICAgICAgdGhpcy53ID0gYzEgKiBjMiAqIGMzICsgczEgKiBzMiAqIHMzOwogICAgICB9IGVsc2UgaWYgKG9yZGVyID09PSAnWVpYJykgewogICAgICAgIHRoaXMueCA9IHMxICogYzIgKiBjMyArIGMxICogczIgKiBzMzsKICAgICAgICB0aGlzLnkgPSBjMSAqIHMyICogYzMgKyBzMSAqIGMyICogczM7CiAgICAgICAgdGhpcy56ID0gYzEgKiBjMiAqIHMzIC0gczEgKiBzMiAqIGMzOwogICAgICAgIHRoaXMudyA9IGMxICogYzIgKiBjMyAtIHMxICogczIgKiBzMzsKICAgICAgfSBlbHNlIGlmIChvcmRlciA9PT0gJ1haWScpIHsKICAgICAgICB0aGlzLnggPSBzMSAqIGMyICogYzMgLSBjMSAqIHMyICogczM7CiAgICAgICAgdGhpcy55ID0gYzEgKiBzMiAqIGMzIC0gczEgKiBjMiAqIHMzOwogICAgICAgIHRoaXMueiA9IGMxICogYzIgKiBzMyArIHMxICogczIgKiBjMzsKICAgICAgICB0aGlzLncgPSBjMSAqIGMyICogYzMgKyBzMSAqIHMyICogczM7CiAgICAgIH0KCiAgICAgIHJldHVybiB0aGlzOwogICAgfQoKICAgIGNsb25lKCkgewogICAgICByZXR1cm4gbmV3IFF1YXRlcm5pb24odGhpcy54LCB0aGlzLnksIHRoaXMueiwgdGhpcy53KTsKICAgIH0KICAgIC8qKgogICAgICogUGVyZm9ybXMgYSBzcGhlcmljYWwgbGluZWFyIGludGVycG9sYXRpb24gYmV0d2VlbiB0d28gcXVhdAogICAgICoKICAgICAqIEBwYXJhbSB0b1F1YXQgc2Vjb25kIG9wZXJhbmQKICAgICAqIEBwYXJhbSB0IGludGVycG9sYXRpb24gYW1vdW50IGJldHdlZW4gdGhlIHNlbGYgcXVhdGVybmlvbiBhbmQgdG9RdWF0CiAgICAgKiBAcGFyYW0gdGFyZ2V0IEEgcXVhdGVybmlvbiB0byBzdG9yZSB0aGUgcmVzdWx0IGluLiBJZiBub3QgcHJvdmlkZWQsIGEgbmV3IG9uZSB3aWxsIGJlIGNyZWF0ZWQuCiAgICAgKiBAcmV0dXJucyB7UXVhdGVybmlvbn0gVGhlICJ0YXJnZXQiIG9iamVjdAogICAgICovCgoKICAgIHNsZXJwKHRvUXVhdCwgdCwgdGFyZ2V0KSB7CiAgICAgIGlmICh0YXJnZXQgPT09IHZvaWQgMCkgewogICAgICAgIHRhcmdldCA9IG5ldyBRdWF0ZXJuaW9uKCk7CiAgICAgIH0KCiAgICAgIGNvbnN0IGF4ID0gdGhpcy54OwogICAgICBjb25zdCBheSA9IHRoaXMueTsKICAgICAgY29uc3QgYXogPSB0aGlzLno7CiAgICAgIGNvbnN0IGF3ID0gdGhpcy53OwogICAgICBsZXQgYnggPSB0b1F1YXQueDsKICAgICAgbGV0IGJ5ID0gdG9RdWF0Lnk7CiAgICAgIGxldCBieiA9IHRvUXVhdC56OwogICAgICBsZXQgYncgPSB0b1F1YXQudzsKICAgICAgbGV0IG9tZWdhOwogICAgICBsZXQgY29zb207CiAgICAgIGxldCBzaW5vbTsKICAgICAgbGV0IHNjYWxlMDsKICAgICAgbGV0IHNjYWxlMTsgLy8gY2FsYyBjb3NpbmUKCiAgICAgIGNvc29tID0gYXggKiBieCArIGF5ICogYnkgKyBheiAqIGJ6ICsgYXcgKiBidzsgLy8gYWRqdXN0IHNpZ25zIChpZiBuZWNlc3NhcnkpCgogICAgICBpZiAoY29zb20gPCAwLjApIHsKICAgICAgICBjb3NvbSA9IC1jb3NvbTsKICAgICAgICBieCA9IC1ieDsKICAgICAgICBieSA9IC1ieTsKICAgICAgICBieiA9IC1iejsKICAgICAgICBidyA9IC1idzsKICAgICAgfSAvLyBjYWxjdWxhdGUgY29lZmZpY2llbnRzCgoKICAgICAgaWYgKDEuMCAtIGNvc29tID4gMC4wMDAwMDEpIHsKICAgICAgICAvLyBzdGFuZGFyZCBjYXNlIChzbGVycCkKICAgICAgICBvbWVnYSA9IE1hdGguYWNvcyhjb3NvbSk7CiAgICAgICAgc2lub20gPSBNYXRoLnNpbihvbWVnYSk7CiAgICAgICAgc2NhbGUwID0gTWF0aC5zaW4oKDEuMCAtIHQpICogb21lZ2EpIC8gc2lub207CiAgICAgICAgc2NhbGUxID0gTWF0aC5zaW4odCAqIG9tZWdhKSAvIHNpbm9tOwogICAgICB9IGVsc2UgewogICAgICAgIC8vICJmcm9tIiBhbmQgInRvIiBxdWF0ZXJuaW9ucyBhcmUgdmVyeSBjbG9zZQogICAgICAgIC8vICAuLi4gc28gd2UgY2FuIGRvIGEgbGluZWFyIGludGVycG9sYXRpb24KICAgICAgICBzY2FsZTAgPSAxLjAgLSB0OwogICAgICAgIHNjYWxlMSA9IHQ7CiAgICAgIH0gLy8gY2FsY3VsYXRlIGZpbmFsIHZhbHVlcwoKCiAgICAgIHRhcmdldC54ID0gc2NhbGUwICogYXggKyBzY2FsZTEgKiBieDsKICAgICAgdGFyZ2V0LnkgPSBzY2FsZTAgKiBheSArIHNjYWxlMSAqIGJ5OwogICAgICB0YXJnZXQueiA9IHNjYWxlMCAqIGF6ICsgc2NhbGUxICogYno7CiAgICAgIHRhcmdldC53ID0gc2NhbGUwICogYXcgKyBzY2FsZTEgKiBidzsKICAgICAgcmV0dXJuIHRhcmdldDsKICAgIH0KICAgIC8qKgogICAgICogUm90YXRlIGFuIGFic29sdXRlIG9yaWVudGF0aW9uIHF1YXRlcm5pb24gZ2l2ZW4gYW4gYW5ndWxhciB2ZWxvY2l0eSBhbmQgYSB0aW1lIHN0ZXAuCiAgICAgKi8KCgogICAgaW50ZWdyYXRlKGFuZ3VsYXJWZWxvY2l0eSwgZHQsIGFuZ3VsYXJGYWN0b3IsIHRhcmdldCkgewogICAgICBpZiAodGFyZ2V0ID09PSB2b2lkIDApIHsKICAgICAgICB0YXJnZXQgPSBuZXcgUXVhdGVybmlvbigpOwogICAgICB9CgogICAgICBjb25zdCBheCA9IGFuZ3VsYXJWZWxvY2l0eS54ICogYW5ndWxhckZhY3Rvci54LAogICAgICAgICAgICBheSA9IGFuZ3VsYXJWZWxvY2l0eS55ICogYW5ndWxhckZhY3Rvci55LAogICAgICAgICAgICBheiA9IGFuZ3VsYXJWZWxvY2l0eS56ICogYW5ndWxhckZhY3Rvci56LAogICAgICAgICAgICBieCA9IHRoaXMueCwKICAgICAgICAgICAgYnkgPSB0aGlzLnksCiAgICAgICAgICAgIGJ6ID0gdGhpcy56LAogICAgICAgICAgICBidyA9IHRoaXMudzsKICAgICAgY29uc3QgaGFsZl9kdCA9IGR0ICogMC41OwogICAgICB0YXJnZXQueCArPSBoYWxmX2R0ICogKGF4ICogYncgKyBheSAqIGJ6IC0gYXogKiBieSk7CiAgICAgIHRhcmdldC55ICs9IGhhbGZfZHQgKiAoYXkgKiBidyArIGF6ICogYnggLSBheCAqIGJ6KTsKICAgICAgdGFyZ2V0LnogKz0gaGFsZl9kdCAqIChheiAqIGJ3ICsgYXggKiBieSAtIGF5ICogYngpOwogICAgICB0YXJnZXQudyArPSBoYWxmX2R0ICogKC1heCAqIGJ4IC0gYXkgKiBieSAtIGF6ICogYnopOwogICAgICByZXR1cm4gdGFyZ2V0OwogICAgfQoKICB9CgogIGNvbnN0IHNmdl90MSA9IG5ldyBWZWMzKCk7CiAgY29uc3Qgc2Z2X3QyID0gbmV3IFZlYzMoKTsKICAvKioKICAgKiBUaGUgYXZhaWxhYmxlIHNoYXBlIHR5cGVzLgogICAqLwoKICBjb25zdCBTSEFQRV9UWVBFUyA9IHsKICAgIC8qKiBTUEhFUkUgKi8KICAgIFNQSEVSRTogMSwKCiAgICAvKiogUExBTkUgKi8KICAgIFBMQU5FOiAyLAoKICAgIC8qKiBCT1ggKi8KICAgIEJPWDogNCwKCiAgICAvKiogQ09NUE9VTkQgKi8KICAgIENPTVBPVU5EOiA4LAoKICAgIC8qKiBDT05WRVhQT0xZSEVEUk9OICovCiAgICBDT05WRVhQT0xZSEVEUk9OOiAxNiwKCiAgICAvKiogSEVJR0hURklFTEQgKi8KICAgIEhFSUdIVEZJRUxEOiAzMiwKCiAgICAvKiogUEFSVElDTEUgKi8KICAgIFBBUlRJQ0xFOiA2NCwKCiAgICAvKiogQ1lMSU5ERVIgKi8KICAgIENZTElOREVSOiAxMjgsCgogICAgLyoqIFRSSU1FU0ggKi8KICAgIFRSSU1FU0g6IDI1NgogIH07CiAgLyoqCiAgICogU2hhcGVUeXBlCiAgICovCgogIC8qKgogICAqIEJhc2UgY2xhc3MgZm9yIHNoYXBlcwogICAqLwoKICBjbGFzcyBTaGFwZSB7CiAgICAvKioKICAgICAqIElkZW50aWZpZXIgb2YgdGhlIFNoYXBlLgogICAgICovCgogICAgLyoqCiAgICAgKiBUaGUgdHlwZSBvZiB0aGlzIHNoYXBlLiBNdXN0IGJlIHNldCB0byBhbiBpbnQgPiAwIGJ5IHN1YmNsYXNzZXMuCiAgICAgKi8KCiAgICAvKioKICAgICAqIFRoZSBsb2NhbCBib3VuZGluZyBzcGhlcmUgcmFkaXVzIG9mIHRoaXMgc2hhcGUuCiAgICAgKi8KCiAgICAvKioKICAgICAqIFdoZXRoZXIgdG8gcHJvZHVjZSBjb250YWN0IGZvcmNlcyB3aGVuIGluIGNvbnRhY3Qgd2l0aCBvdGhlciBib2RpZXMuIE5vdGUgdGhhdCBjb250YWN0cyB3aWxsIGJlIGdlbmVyYXRlZCwgYnV0IHRoZXkgd2lsbCBiZSBkaXNhYmxlZC4KICAgICAqIEBkZWZhdWx0IHRydWUKICAgICAqLwoKICAgIC8qKgogICAgICogQGRlZmF1bHQgMQogICAgICovCgogICAgLyoqCiAgICAgKiBAZGVmYXVsdCAtMQogICAgICovCgogICAgLyoqCiAgICAgKiBPcHRpb25hbCBtYXRlcmlhbCBvZiB0aGUgc2hhcGUgdGhhdCByZWd1bGF0ZXMgY29udGFjdCBwcm9wZXJ0aWVzLgogICAgICovCgogICAgLyoqCiAgICAgKiBUaGUgYm9keSB0byB3aGljaCB0aGUgc2hhcGUgaXMgYWRkZWQgdG8uCiAgICAgKi8KCiAgICAvKioKICAgICAqIEFsbCB0aGUgU2hhcGUgdHlwZXMuCiAgICAgKi8KICAgIGNvbnN0cnVjdG9yKG9wdGlvbnMpIHsKICAgICAgaWYgKG9wdGlvbnMgPT09IHZvaWQgMCkgewogICAgICAgIG9wdGlvbnMgPSB7fTsKICAgICAgfQoKICAgICAgdGhpcy5pZCA9IHZvaWQgMDsKICAgICAgdGhpcy50eXBlID0gdm9pZCAwOwogICAgICB0aGlzLmJvdW5kaW5nU3BoZXJlUmFkaXVzID0gdm9pZCAwOwogICAgICB0aGlzLmNvbGxpc2lvblJlc3BvbnNlID0gdm9pZCAwOwogICAgICB0aGlzLmNvbGxpc2lvbkZpbHRlckdyb3VwID0gdm9pZCAwOwogICAgICB0aGlzLmNvbGxpc2lvbkZpbHRlck1hc2sgPSB2b2lkIDA7CiAgICAgIHRoaXMubWF0ZXJpYWwgPSB2b2lkIDA7CiAgICAgIHRoaXMuYm9keSA9IHZvaWQgMDsKICAgICAgdGhpcy5pZCA9IFNoYXBlLmlkQ291bnRlcisrOwogICAgICB0aGlzLnR5cGUgPSBvcHRpb25zLnR5cGUgfHwgMDsKICAgICAgdGhpcy5ib3VuZGluZ1NwaGVyZVJhZGl1cyA9IDA7CiAgICAgIHRoaXMuY29sbGlzaW9uUmVzcG9uc2UgPSBvcHRpb25zLmNvbGxpc2lvblJlc3BvbnNlID8gb3B0aW9ucy5jb2xsaXNpb25SZXNwb25zZSA6IHRydWU7CiAgICAgIHRoaXMuY29sbGlzaW9uRmlsdGVyR3JvdXAgPSBvcHRpb25zLmNvbGxpc2lvbkZpbHRlckdyb3VwICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLmNvbGxpc2lvbkZpbHRlckdyb3VwIDogMTsKICAgICAgdGhpcy5jb2xsaXNpb25GaWx0ZXJNYXNrID0gb3B0aW9ucy5jb2xsaXNpb25GaWx0ZXJNYXNrICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLmNvbGxpc2lvbkZpbHRlck1hc2sgOiAtMTsKICAgICAgdGhpcy5tYXRlcmlhbCA9IG9wdGlvbnMubWF0ZXJpYWwgPyBvcHRpb25zLm1hdGVyaWFsIDogbnVsbDsKICAgICAgdGhpcy5ib2R5ID0gbnVsbDsKICAgIH0KICAgIC8qKgogICAgICogQ29tcHV0ZXMgdGhlIGJvdW5kaW5nIHNwaGVyZSByYWRpdXMuCiAgICAgKiBUaGUgcmVzdWx0IGlzIHN0b3JlZCBpbiB0aGUgcHJvcGVydHkgYC5ib3VuZGluZ1NwaGVyZVJhZGl1c2AKICAgICAqLwoKCiAgICB1cGRhdGVCb3VuZGluZ1NwaGVyZVJhZGl1cygpIHsKICAgICAgdGhyb3cgImNvbXB1dGVCb3VuZGluZ1NwaGVyZVJhZGl1cygpIG5vdCBpbXBsZW1lbnRlZCBmb3Igc2hhcGUgdHlwZSAiICsgdGhpcy50eXBlOwogICAgfQogICAgLyoqCiAgICAgKiBHZXQgdGhlIHZvbHVtZSBvZiB0aGlzIHNoYXBlCiAgICAgKi8KCgogICAgdm9sdW1lKCkgewogICAgICB0aHJvdyAidm9sdW1lKCkgbm90IGltcGxlbWVudGVkIGZvciBzaGFwZSB0eXBlICIgKyB0aGlzLnR5cGU7CiAgICB9CiAgICAvKioKICAgICAqIENhbGN1bGF0ZXMgdGhlIGluZXJ0aWEgaW4gdGhlIGxvY2FsIGZyYW1lIGZvciB0aGlzIHNoYXBlLgogICAgICogQHNlZSBodHRwOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0xpc3Rfb2ZfbW9tZW50c19vZl9pbmVydGlhCiAgICAgKi8KCgogICAgY2FsY3VsYXRlTG9jYWxJbmVydGlhKG1hc3MsIHRhcmdldCkgewogICAgICB0aHJvdyAiY2FsY3VsYXRlTG9jYWxJbmVydGlhKCkgbm90IGltcGxlbWVudGVkIGZvciBzaGFwZSB0eXBlICIgKyB0aGlzLnR5cGU7CiAgICB9CiAgICAvKioKICAgICAqIEB0b2RvIHVzZSBhYnN0cmFjdCBmb3IgdGhlc2Uga2luZCBvZiBtZXRob2RzCiAgICAgKi8KCgogICAgY2FsY3VsYXRlV29ybGRBQUJCKHBvcywgcXVhdCwgbWluLCBtYXgpIHsKICAgICAgdGhyb3cgImNhbGN1bGF0ZVdvcmxkQUFCQigpIG5vdCBpbXBsZW1lbnRlZCBmb3Igc2hhcGUgdHlwZSAiICsgdGhpcy50eXBlOwogICAgfQoKICB9CgogIFNoYXBlLmlkQ291bnRlciA9IDA7CiAgU2hhcGUudHlwZXMgPSBTSEFQRV9UWVBFUzsKICAvKioKICAgKiBUcmFuc2Zvcm1hdGlvbiB1dGlsaXRpZXMuCiAgICovCgogIGNsYXNzIFRyYW5zZm9ybSB7CiAgICAvKioKICAgICAqIHBvc2l0aW9uCiAgICAgKi8KCiAgICAvKioKICAgICAqIHF1YXRlcm5pb24KICAgICAqLwogICAgY29uc3RydWN0b3Iob3B0aW9ucykgewogICAgICBpZiAob3B0aW9ucyA9PT0gdm9pZCAwKSB7CiAgICAgICAgb3B0aW9ucyA9IHt9OwogICAgICB9CgogICAgICB0aGlzLnBvc2l0aW9uID0gdm9pZCAwOwogICAgICB0aGlzLnF1YXRlcm5pb24gPSB2b2lkIDA7CiAgICAgIHRoaXMucG9zaXRpb24gPSBuZXcgVmVjMygpOwogICAgICB0aGlzLnF1YXRlcm5pb24gPSBuZXcgUXVhdGVybmlvbigpOwoKICAgICAgaWYgKG9wdGlvbnMucG9zaXRpb24pIHsKICAgICAgICB0aGlzLnBvc2l0aW9uLmNvcHkob3B0aW9ucy5wb3NpdGlvbik7CiAgICAgIH0KCiAgICAgIGlmIChvcHRpb25zLnF1YXRlcm5pb24pIHsKICAgICAgICB0aGlzLnF1YXRlcm5pb24uY29weShvcHRpb25zLnF1YXRlcm5pb24pOwogICAgICB9CiAgICB9CiAgICAvKioKICAgICAqIEdldCBhIGdsb2JhbCBwb2ludCBpbiBsb2NhbCB0cmFuc2Zvcm0gY29vcmRpbmF0ZXMuCiAgICAgKi8KCgogICAgcG9pbnRUb0xvY2FsKHdvcmxkUG9pbnQsIHJlc3VsdCkgewogICAgICByZXR1cm4gVHJhbnNmb3JtLnBvaW50VG9Mb2NhbEZyYW1lKHRoaXMucG9zaXRpb24sIHRoaXMucXVhdGVybmlvbiwgd29ybGRQb2ludCwgcmVzdWx0KTsKICAgIH0KICAgIC8qKgogICAgICogR2V0IGEgbG9jYWwgcG9pbnQgaW4gZ2xvYmFsIHRyYW5zZm9ybSBjb29yZGluYXRlcy4KICAgICAqLwoKCiAgICBwb2ludFRvV29ybGQobG9jYWxQb2ludCwgcmVzdWx0KSB7CiAgICAgIHJldHVybiBUcmFuc2Zvcm0ucG9pbnRUb1dvcmxkRnJhbWUodGhpcy5wb3NpdGlvbiwgdGhpcy5xdWF0ZXJuaW9uLCBsb2NhbFBvaW50LCByZXN1bHQpOwogICAgfQogICAgLyoqCiAgICAgKiB2ZWN0b3JUb1dvcmxkRnJhbWUKICAgICAqLwoKCiAgICB2ZWN0b3JUb1dvcmxkRnJhbWUobG9jYWxWZWN0b3IsIHJlc3VsdCkgewogICAgICBpZiAocmVzdWx0ID09PSB2b2lkIDApIHsKICAgICAgICByZXN1bHQgPSBuZXcgVmVjMygpOwogICAgICB9CgogICAgICB0aGlzLnF1YXRlcm5pb24udm11bHQobG9jYWxWZWN0b3IsIHJlc3VsdCk7CiAgICAgIHJldHVybiByZXN1bHQ7CiAgICB9CiAgICAvKioKICAgICAqIHBvaW50VG9Mb2NhbEZyYW1lCiAgICAgKi8KCgogICAgc3RhdGljIHBvaW50VG9Mb2NhbEZyYW1lKHBvc2l0aW9uLCBxdWF0ZXJuaW9uLCB3b3JsZFBvaW50LCByZXN1bHQpIHsKICAgICAgaWYgKHJlc3VsdCA9PT0gdm9pZCAwKSB7CiAgICAgICAgcmVzdWx0ID0gbmV3IFZlYzMoKTsKICAgICAgfQoKICAgICAgd29ybGRQb2ludC52c3ViKHBvc2l0aW9uLCByZXN1bHQpOwogICAgICBxdWF0ZXJuaW9uLmNvbmp1Z2F0ZSh0bXBRdWF0JDEpOwogICAgICB0bXBRdWF0JDEudm11bHQocmVzdWx0LCByZXN1bHQpOwogICAgICByZXR1cm4gcmVzdWx0OwogICAgfQogICAgLyoqCiAgICAgKiBwb2ludFRvV29ybGRGcmFtZQogICAgICovCgoKICAgIHN0YXRpYyBwb2ludFRvV29ybGRGcmFtZShwb3NpdGlvbiwgcXVhdGVybmlvbiwgbG9jYWxQb2ludCwgcmVzdWx0KSB7CiAgICAgIGlmIChyZXN1bHQgPT09IHZvaWQgMCkgewogICAgICAgIHJlc3VsdCA9IG5ldyBWZWMzKCk7CiAgICAgIH0KCiAgICAgIHF1YXRlcm5pb24udm11bHQobG9jYWxQb2ludCwgcmVzdWx0KTsKICAgICAgcmVzdWx0LnZhZGQocG9zaXRpb24sIHJlc3VsdCk7CiAgICAgIHJldHVybiByZXN1bHQ7CiAgICB9CiAgICAvKioKICAgICAqIHZlY3RvclRvV29ybGRGcmFtZQogICAgICovCgoKICAgIHN0YXRpYyB2ZWN0b3JUb1dvcmxkRnJhbWUocXVhdGVybmlvbiwgbG9jYWxWZWN0b3IsIHJlc3VsdCkgewogICAgICBpZiAocmVzdWx0ID09PSB2b2lkIDApIHsKICAgICAgICByZXN1bHQgPSBuZXcgVmVjMygpOwogICAgICB9CgogICAgICBxdWF0ZXJuaW9uLnZtdWx0KGxvY2FsVmVjdG9yLCByZXN1bHQpOwogICAgICByZXR1cm4gcmVzdWx0OwogICAgfQogICAgLyoqCiAgICAgKiB2ZWN0b3JUb0xvY2FsRnJhbWUKICAgICAqLwoKCiAgICBzdGF0aWMgdmVjdG9yVG9Mb2NhbEZyYW1lKHBvc2l0aW9uLCBxdWF0ZXJuaW9uLCB3b3JsZFZlY3RvciwgcmVzdWx0KSB7CiAgICAgIGlmIChyZXN1bHQgPT09IHZvaWQgMCkgewogICAgICAgIHJlc3VsdCA9IG5ldyBWZWMzKCk7CiAgICAgIH0KCiAgICAgIHF1YXRlcm5pb24udyAqPSAtMTsKICAgICAgcXVhdGVybmlvbi52bXVsdCh3b3JsZFZlY3RvciwgcmVzdWx0KTsKICAgICAgcXVhdGVybmlvbi53ICo9IC0xOwogICAgICByZXR1cm4gcmVzdWx0OwogICAgfQoKICB9CgogIGNvbnN0IHRtcFF1YXQkMSA9IG5ldyBRdWF0ZXJuaW9uKCk7CiAgLyoqCiAgICogQSBzZXQgb2YgcG9seWdvbnMgZGVzY3JpYmluZyBhIGNvbnZleCBzaGFwZS4KICAgKgogICAqIFRoZSBzaGFwZSBNVVNUIGJlIGNvbnZleCBmb3IgdGhlIGNvZGUgdG8gd29yayBwcm9wZXJseS4gTm8gcG9seWdvbnMgbWF5IGJlIGNvcGxhbmFyIChjb250YWluZWQKICAgKiBpbiB0aGUgc2FtZSAzRCBwbGFuZSksIGluc3RlYWQgdGhlc2Ugc2hvdWxkIGJlIG1lcmdlZCBpbnRvIG9uZSBwb2x5Z29uLgogICAqCiAgICogQGF1dGhvciBxaWFvIC8gaHR0cHM6Ly9naXRodWIuY29tL3FpYW8gKG9yaWdpbmFsIGF1dGhvciwgc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9xaWFvL3RocmVlLmpzL2NvbW1pdC84NTAyNmYwYzc2OWU0MDAwMTQ4YTY3ZDQ1YTllOWI5YzUxMDg4MzZmKQogICAqIEBhdXRob3Igc2NodGVwcGUgLyBodHRwczovL2dpdGh1Yi5jb20vc2NodGVwcGUKICAgKiBAc2VlIGh0dHBzOi8vd3d3LmFsdGRldmJsb2dhZGF5LmNvbS8yMDExLzA1LzEzL2NvbnRhY3QtZ2VuZXJhdGlvbi1iZXR3ZWVuLTNkLWNvbnZleC1tZXNoZXMvCiAgICoKICAgKiBAdG9kbyBNb3ZlIHRoZSBjbGlwcGluZyBmdW5jdGlvbnMgdG8gQ29udGFjdEdlbmVyYXRvcj8KICAgKiBAdG9kbyBBdXRvbWF0aWNhbGx5IG1lcmdlIGNvcGxhbmFyIHBvbHlnb25zIGluIGNvbnN0cnVjdG9yLgogICAqIEBleGFtcGxlCiAgICogICAgIGNvbnN0IGNvbnZleFNoYXBlID0gbmV3IENBTk5PTi5Db252ZXhQb2x5aGVkcm9uKHsgdmVydGljZXMsIGZhY2VzIH0pCiAgICogICAgIGNvbnN0IGNvbnZleEJvZHkgPSBuZXcgQ0FOTk9OLkJvZHkoeyBtYXNzOiAxLCBzaGFwZTogY29udmV4U2hhcGUgfSkKICAgKiAgICAgd29ybGQuYWRkQm9keShjb252ZXhCb2R5KQogICAqLwoKICBjbGFzcyBDb252ZXhQb2x5aGVkcm9uIGV4dGVuZHMgU2hhcGUgewogICAgLyoqIHZlcnRpY2VzICovCgogICAgLyoqCiAgICAgKiBBcnJheSBvZiBpbnRlZ2VyIGFycmF5cywgaW5kaWNhdGluZyB3aGljaCB2ZXJ0aWNlcyBlYWNoIGZhY2UgY29uc2lzdHMgb2YKICAgICAqLwoKICAgIC8qKiBmYWNlTm9ybWFscyAqLwoKICAgIC8qKiB3b3JsZFZlcnRpY2VzICovCgogICAgLyoqIHdvcmxkVmVydGljZXNOZWVkc1VwZGF0ZSAqLwoKICAgIC8qKiB3b3JsZEZhY2VOb3JtYWxzICovCgogICAgLyoqIHdvcmxkRmFjZU5vcm1hbHNOZWVkc1VwZGF0ZSAqLwoKICAgIC8qKgogICAgICogSWYgZ2l2ZW4sIHRoZXNlIGxvY2FsbHkgZGVmaW5lZCwgbm9ybWFsaXplZCBheGVzIGFyZSB0aGUgb25seSBvbmVzIGJlaW5nIGNoZWNrZWQgd2hlbiBkb2luZyBzZXBhcmF0aW5nIGF4aXMgY2hlY2suCiAgICAgKi8KCiAgICAvKiogdW5pcXVlRWRnZXMgKi8KCiAgICAvKioKICAgICAqIEBwYXJhbSB2ZXJ0aWNlcyBBbiBhcnJheSBvZiBWZWMzJ3MKICAgICAqIEBwYXJhbSBmYWNlcyBBcnJheSBvZiBpbnRlZ2VyIGFycmF5cywgZGVzY3JpYmluZyB3aGljaCB2ZXJ0aWNlcyB0aGF0IGlzIGluY2x1ZGVkIGluIGVhY2ggZmFjZS4KICAgICAqLwogICAgY29uc3RydWN0b3IocHJvcHMpIHsKICAgICAgaWYgKHByb3BzID09PSB2b2lkIDApIHsKICAgICAgICBwcm9wcyA9IHt9OwogICAgICB9CgogICAgICBjb25zdCB7CiAgICAgICAgdmVydGljZXMgPSBbXSwKICAgICAgICBmYWNlcyA9IFtdLAogICAgICAgIG5vcm1hbHMgPSBbXSwKICAgICAgICBheGVzLAogICAgICAgIGJvdW5kaW5nU3BoZXJlUmFkaXVzCiAgICAgIH0gPSBwcm9wczsKICAgICAgc3VwZXIoewogICAgICAgIHR5cGU6IFNoYXBlLnR5cGVzLkNPTlZFWFBPTFlIRURST04KICAgICAgfSk7CiAgICAgIHRoaXMudmVydGljZXMgPSB2b2lkIDA7CiAgICAgIHRoaXMuZmFjZXMgPSB2b2lkIDA7CiAgICAgIHRoaXMuZmFjZU5vcm1hbHMgPSB2b2lkIDA7CiAgICAgIHRoaXMud29ybGRWZXJ0aWNlcyA9IHZvaWQgMDsKICAgICAgdGhpcy53b3JsZFZlcnRpY2VzTmVlZHNVcGRhdGUgPSB2b2lkIDA7CiAgICAgIHRoaXMud29ybGRGYWNlTm9ybWFscyA9IHZvaWQgMDsKICAgICAgdGhpcy53b3JsZEZhY2VOb3JtYWxzTmVlZHNVcGRhdGUgPSB2b2lkIDA7CiAgICAgIHRoaXMudW5pcXVlQXhlcyA9IHZvaWQgMDsKICAgICAgdGhpcy51bmlxdWVFZGdlcyA9IHZvaWQgMDsKICAgICAgdGhpcy52ZXJ0aWNlcyA9IHZlcnRpY2VzOwogICAgICB0aGlzLmZhY2VzID0gZmFjZXM7CiAgICAgIHRoaXMuZmFjZU5vcm1hbHMgPSBub3JtYWxzOwoKICAgICAgaWYgKHRoaXMuZmFjZU5vcm1hbHMubGVuZ3RoID09PSAwKSB7CiAgICAgICAgdGhpcy5jb21wdXRlTm9ybWFscygpOwogICAgICB9CgogICAgICBpZiAoIWJvdW5kaW5nU3BoZXJlUmFkaXVzKSB7CiAgICAgICAgdGhpcy51cGRhdGVCb3VuZGluZ1NwaGVyZVJhZGl1cygpOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuYm91bmRpbmdTcGhlcmVSYWRpdXMgPSBib3VuZGluZ1NwaGVyZVJhZGl1czsKICAgICAgfQoKICAgICAgdGhpcy53b3JsZFZlcnRpY2VzID0gW107IC8vIFdvcmxkIHRyYW5zZm9ybWVkIHZlcnNpb24gb2YgLnZlcnRpY2VzCgogICAgICB0aGlzLndvcmxkVmVydGljZXNOZWVkc1VwZGF0ZSA9IHRydWU7CiAgICAgIHRoaXMud29ybGRGYWNlTm9ybWFscyA9IFtdOyAvLyBXb3JsZCB0cmFuc2Zvcm1lZCB2ZXJzaW9uIG9mIC5mYWNlTm9ybWFscwoKICAgICAgdGhpcy53b3JsZEZhY2VOb3JtYWxzTmVlZHNVcGRhdGUgPSB0cnVlOwogICAgICB0aGlzLnVuaXF1ZUF4ZXMgPSBheGVzID8gYXhlcy5zbGljZSgpIDogbnVsbDsKICAgICAgdGhpcy51bmlxdWVFZGdlcyA9IFtdOwogICAgICB0aGlzLmNvbXB1dGVFZGdlcygpOwogICAgfQogICAgLyoqCiAgICAgKiBDb21wdXRlcyB1bmlxdWVFZGdlcwogICAgICovCgoKICAgIGNvbXB1dGVFZGdlcygpIHsKICAgICAgY29uc3QgZmFjZXMgPSB0aGlzLmZhY2VzOwogICAgICBjb25zdCB2ZXJ0aWNlcyA9IHRoaXMudmVydGljZXM7CiAgICAgIGNvbnN0IGVkZ2VzID0gdGhpcy51bmlxdWVFZGdlczsKICAgICAgZWRnZXMubGVuZ3RoID0gMDsKICAgICAgY29uc3QgZWRnZSA9IG5ldyBWZWMzKCk7CgogICAgICBmb3IgKGxldCBpID0gMDsgaSAhPT0gZmFjZXMubGVuZ3RoOyBpKyspIHsKICAgICAgICBjb25zdCBmYWNlID0gZmFjZXNbaV07CiAgICAgICAgY29uc3QgbnVtVmVydGljZXMgPSBmYWNlLmxlbmd0aDsKCiAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogIT09IG51bVZlcnRpY2VzOyBqKyspIHsKICAgICAgICAgIGNvbnN0IGsgPSAoaiArIDEpICUgbnVtVmVydGljZXM7CiAgICAgICAgICB2ZXJ0aWNlc1tmYWNlW2pdXS52c3ViKHZlcnRpY2VzW2ZhY2Vba11dLCBlZGdlKTsKICAgICAgICAgIGVkZ2Uubm9ybWFsaXplKCk7CiAgICAgICAgICBsZXQgZm91bmQgPSBmYWxzZTsKCiAgICAgICAgICBmb3IgKGxldCBwID0gMDsgcCAhPT0gZWRnZXMubGVuZ3RoOyBwKyspIHsKICAgICAgICAgICAgaWYgKGVkZ2VzW3BdLmFsbW9zdEVxdWFscyhlZGdlKSB8fCBlZGdlc1twXS5hbG1vc3RFcXVhbHMoZWRnZSkpIHsKICAgICAgICAgICAgICBmb3VuZCA9IHRydWU7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KCiAgICAgICAgICBpZiAoIWZvdW5kKSB7CiAgICAgICAgICAgIGVkZ2VzLnB1c2goZWRnZS5jbG9uZSgpKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KICAgIH0KICAgIC8qKgogICAgICogQ29tcHV0ZSB0aGUgbm9ybWFscyBvZiB0aGUgZmFjZXMuCiAgICAgKiBXaWxsIHJldXNlIGV4aXN0aW5nIFZlYzMgb2JqZWN0cyBpbiB0aGUgYGZhY2VOb3JtYWxzYCBhcnJheSBpZiB0aGV5IGV4aXN0LgogICAgICovCgoKICAgIGNvbXB1dGVOb3JtYWxzKCkgewogICAgICB0aGlzLmZhY2VOb3JtYWxzLmxlbmd0aCA9IHRoaXMuZmFjZXMubGVuZ3RoOyAvLyBHZW5lcmF0ZSBub3JtYWxzCgogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuZmFjZXMubGVuZ3RoOyBpKyspIHsKICAgICAgICAvLyBDaGVjayBzbyBhbGwgdmVydGljZXMgZXhpc3RzIGZvciB0aGlzIGZhY2UKICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IHRoaXMuZmFjZXNbaV0ubGVuZ3RoOyBqKyspIHsKICAgICAgICAgIGlmICghdGhpcy52ZXJ0aWNlc1t0aGlzLmZhY2VzW2ldW2pdXSkgewogICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoIlZlcnRleCAiICsgdGhpcy5mYWNlc1tpXVtqXSArICIgbm90IGZvdW5kISIpOwogICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgY29uc3QgbiA9IHRoaXMuZmFjZU5vcm1hbHNbaV0gfHwgbmV3IFZlYzMoKTsKICAgICAgICB0aGlzLmdldEZhY2VOb3JtYWwoaSwgbik7CiAgICAgICAgbi5uZWdhdGUobik7CiAgICAgICAgdGhpcy5mYWNlTm9ybWFsc1tpXSA9IG47CiAgICAgICAgY29uc3QgdmVydGV4ID0gdGhpcy52ZXJ0aWNlc1t0aGlzLmZhY2VzW2ldWzBdXTsKCiAgICAgICAgaWYgKG4uZG90KHZlcnRleCkgPCAwKSB7CiAgICAgICAgICBjb25zb2xlLmVycm9yKCIuZmFjZU5vcm1hbHNbIiArIGkgKyAiXSA9IFZlYzMoIiArIG4udG9TdHJpbmcoKSArICIpIGxvb2tzIGxpa2UgaXQgcG9pbnRzIGludG8gdGhlIHNoYXBlPyBUaGUgdmVydGljZXMgZm9sbG93LiBNYWtlIHN1cmUgdGhleSBhcmUgb3JkZXJlZCBDQ1cgYXJvdW5kIHRoZSBub3JtYWwsIHVzaW5nIHRoZSByaWdodCBoYW5kIHJ1bGUuIik7CgogICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCB0aGlzLmZhY2VzW2ldLmxlbmd0aDsgaisrKSB7CiAgICAgICAgICAgIGNvbnNvbGUud2FybigiLnZlcnRpY2VzWyIgKyB0aGlzLmZhY2VzW2ldW2pdICsgIl0gPSBWZWMzKCIgKyB0aGlzLnZlcnRpY2VzW3RoaXMuZmFjZXNbaV1bal1dLnRvU3RyaW5nKCkgKyAiKSIpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQogICAgfQogICAgLyoqCiAgICAgKiBDb21wdXRlIHRoZSBub3JtYWwgb2YgYSBmYWNlIGZyb20gaXRzIHZlcnRpY2VzCiAgICAgKi8KCgogICAgZ2V0RmFjZU5vcm1hbChpLCB0YXJnZXQpIHsKICAgICAgY29uc3QgZiA9IHRoaXMuZmFjZXNbaV07CiAgICAgIGNvbnN0IHZhID0gdGhpcy52ZXJ0aWNlc1tmWzBdXTsKICAgICAgY29uc3QgdmIgPSB0aGlzLnZlcnRpY2VzW2ZbMV1dOwogICAgICBjb25zdCB2YyA9IHRoaXMudmVydGljZXNbZlsyXV07CiAgICAgIENvbnZleFBvbHloZWRyb24uY29tcHV0ZU5vcm1hbCh2YSwgdmIsIHZjLCB0YXJnZXQpOwogICAgfQogICAgLyoqCiAgICAgKiBHZXQgZmFjZSBub3JtYWwgZ2l2ZW4gMyB2ZXJ0aWNlcwogICAgICovCgoKICAgIHN0YXRpYyBjb21wdXRlTm9ybWFsKHZhLCB2YiwgdmMsIHRhcmdldCkgewogICAgICBjb25zdCBjYiA9IG5ldyBWZWMzKCk7CiAgICAgIGNvbnN0IGFiID0gbmV3IFZlYzMoKTsKICAgICAgdmIudnN1Yih2YSwgYWIpOwogICAgICB2Yy52c3ViKHZiLCBjYik7CiAgICAgIGNiLmNyb3NzKGFiLCB0YXJnZXQpOwoKICAgICAgaWYgKCF0YXJnZXQuaXNaZXJvKCkpIHsKICAgICAgICB0YXJnZXQubm9ybWFsaXplKCk7CiAgICAgIH0KICAgIH0KICAgIC8qKgogICAgICogQHBhcmFtIG1pbkRpc3QgQ2xhbXAgZGlzdGFuY2UKICAgICAqIEBwYXJhbSByZXN1bHQgVGhlIGFuIGFycmF5IG9mIGNvbnRhY3QgcG9pbnQgb2JqZWN0cywgc2VlIGNsaXBGYWNlQWdhaW5zdEh1bGwKICAgICAqLwoKCiAgICBjbGlwQWdhaW5zdEh1bGwocG9zQSwgcXVhdEEsIGh1bGxCLCBwb3NCLCBxdWF0Qiwgc2VwYXJhdGluZ05vcm1hbCwgbWluRGlzdCwgbWF4RGlzdCwgcmVzdWx0KSB7CiAgICAgIGNvbnN0IFdvcmxkTm9ybWFsID0gbmV3IFZlYzMoKTsKICAgICAgbGV0IGNsb3Nlc3RGYWNlQiA9IC0xOwogICAgICBsZXQgZG1heCA9IC1OdW1iZXIuTUFYX1ZBTFVFOwoKICAgICAgZm9yIChsZXQgZmFjZSA9IDA7IGZhY2UgPCBodWxsQi5mYWNlcy5sZW5ndGg7IGZhY2UrKykgewogICAgICAgIFdvcmxkTm9ybWFsLmNvcHkoaHVsbEIuZmFjZU5vcm1hbHNbZmFjZV0pOwogICAgICAgIHF1YXRCLnZtdWx0KFdvcmxkTm9ybWFsLCBXb3JsZE5vcm1hbCk7CiAgICAgICAgY29uc3QgZCA9IFdvcmxkTm9ybWFsLmRvdChzZXBhcmF0aW5nTm9ybWFsKTsKCiAgICAgICAgaWYgKGQgPiBkbWF4KSB7CiAgICAgICAgICBkbWF4ID0gZDsKICAgICAgICAgIGNsb3Nlc3RGYWNlQiA9IGZhY2U7CiAgICAgICAgfQogICAgICB9CgogICAgICBjb25zdCB3b3JsZFZlcnRzQjEgPSBbXTsKCiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgaHVsbEIuZmFjZXNbY2xvc2VzdEZhY2VCXS5sZW5ndGg7IGkrKykgewogICAgICAgIGNvbnN0IGIgPSBodWxsQi52ZXJ0aWNlc1todWxsQi5mYWNlc1tjbG9zZXN0RmFjZUJdW2ldXTsKICAgICAgICBjb25zdCB3b3JsZGIgPSBuZXcgVmVjMygpOwogICAgICAgIHdvcmxkYi5jb3B5KGIpOwogICAgICAgIHF1YXRCLnZtdWx0KHdvcmxkYiwgd29ybGRiKTsKICAgICAgICBwb3NCLnZhZGQod29ybGRiLCB3b3JsZGIpOwogICAgICAgIHdvcmxkVmVydHNCMS5wdXNoKHdvcmxkYik7CiAgICAgIH0KCiAgICAgIGlmIChjbG9zZXN0RmFjZUIgPj0gMCkgewogICAgICAgIHRoaXMuY2xpcEZhY2VBZ2FpbnN0SHVsbChzZXBhcmF0aW5nTm9ybWFsLCBwb3NBLCBxdWF0QSwgd29ybGRWZXJ0c0IxLCBtaW5EaXN0LCBtYXhEaXN0LCByZXN1bHQpOwogICAgICB9CiAgICB9CiAgICAvKioKICAgICAqIEZpbmQgdGhlIHNlcGFyYXRpbmcgYXhpcyBiZXR3ZWVuIHRoaXMgaHVsbCBhbmQgYW5vdGhlcgogICAgICogQHBhcmFtIHRhcmdldCBUaGUgdGFyZ2V0IHZlY3RvciB0byBzYXZlIHRoZSBheGlzIGluCiAgICAgKiBAcmV0dXJuIFJldHVybnMgZmFsc2UgaWYgYSBzZXBhcmF0aW9uIGlzIGZvdW5kLCBlbHNlIHRydWUKICAgICAqLwoKCiAgICBmaW5kU2VwYXJhdGluZ0F4aXMoaHVsbEIsIHBvc0EsIHF1YXRBLCBwb3NCLCBxdWF0QiwgdGFyZ2V0LCBmYWNlTGlzdEEsIGZhY2VMaXN0QikgewogICAgICBjb25zdCBmYWNlQU5vcm1hbFdTMyA9IG5ldyBWZWMzKCk7CiAgICAgIGNvbnN0IFdvcmxkbm9ybWFsMSA9IG5ldyBWZWMzKCk7CiAgICAgIGNvbnN0IGRlbHRhQyA9IG5ldyBWZWMzKCk7CiAgICAgIGNvbnN0IHdvcmxkRWRnZTAgPSBuZXcgVmVjMygpOwogICAgICBjb25zdCB3b3JsZEVkZ2UxID0gbmV3IFZlYzMoKTsKICAgICAgY29uc3QgQ3Jvc3MgPSBuZXcgVmVjMygpOwogICAgICBsZXQgZG1pbiA9IE51bWJlci5NQVhfVkFMVUU7CiAgICAgIGNvbnN0IGh1bGxBID0gdGhpczsKCiAgICAgIGlmICghaHVsbEEudW5pcXVlQXhlcykgewogICAgICAgIGNvbnN0IG51bUZhY2VzQSA9IGZhY2VMaXN0QSA/IGZhY2VMaXN0QS5sZW5ndGggOiBodWxsQS5mYWNlcy5sZW5ndGg7IC8vIFRlc3QgZmFjZSBub3JtYWxzIGZyb20gaHVsbEEKCiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBudW1GYWNlc0E7IGkrKykgewogICAgICAgICAgY29uc3QgZmkgPSBmYWNlTGlzdEEgPyBmYWNlTGlzdEFbaV0gOiBpOyAvLyBHZXQgd29ybGQgZmFjZSBub3JtYWwKCiAgICAgICAgICBmYWNlQU5vcm1hbFdTMy5jb3B5KGh1bGxBLmZhY2VOb3JtYWxzW2ZpXSk7CiAgICAgICAgICBxdWF0QS52bXVsdChmYWNlQU5vcm1hbFdTMywgZmFjZUFOb3JtYWxXUzMpOwogICAgICAgICAgY29uc3QgZCA9IGh1bGxBLnRlc3RTZXBBeGlzKGZhY2VBTm9ybWFsV1MzLCBodWxsQiwgcG9zQSwgcXVhdEEsIHBvc0IsIHF1YXRCKTsKCiAgICAgICAgICBpZiAoZCA9PT0gZmFsc2UpIHsKICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgICAgfQoKICAgICAgICAgIGlmIChkIDwgZG1pbikgewogICAgICAgICAgICBkbWluID0gZDsKICAgICAgICAgICAgdGFyZ2V0LmNvcHkoZmFjZUFOb3JtYWxXUzMpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSBlbHNlIHsKICAgICAgICAvLyBUZXN0IHVuaXF1ZSBheGVzCiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgIT09IGh1bGxBLnVuaXF1ZUF4ZXMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgIC8vIEdldCB3b3JsZCBheGlzCiAgICAgICAgICBxdWF0QS52bXVsdChodWxsQS51bmlxdWVBeGVzW2ldLCBmYWNlQU5vcm1hbFdTMyk7CiAgICAgICAgICBjb25zdCBkID0gaHVsbEEudGVzdFNlcEF4aXMoZmFjZUFOb3JtYWxXUzMsIGh1bGxCLCBwb3NBLCBxdWF0QSwgcG9zQiwgcXVhdEIpOwoKICAgICAgICAgIGlmIChkID09PSBmYWxzZSkgewogICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICB9CgogICAgICAgICAgaWYgKGQgPCBkbWluKSB7CiAgICAgICAgICAgIGRtaW4gPSBkOwogICAgICAgICAgICB0YXJnZXQuY29weShmYWNlQU5vcm1hbFdTMyk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CgogICAgICBpZiAoIWh1bGxCLnVuaXF1ZUF4ZXMpIHsKICAgICAgICAvLyBUZXN0IGZhY2Ugbm9ybWFscyBmcm9tIGh1bGxCCiAgICAgICAgY29uc3QgbnVtRmFjZXNCID0gZmFjZUxpc3RCID8gZmFjZUxpc3RCLmxlbmd0aCA6IGh1bGxCLmZhY2VzLmxlbmd0aDsKCiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBudW1GYWNlc0I7IGkrKykgewogICAgICAgICAgY29uc3QgZmkgPSBmYWNlTGlzdEIgPyBmYWNlTGlzdEJbaV0gOiBpOwogICAgICAgICAgV29ybGRub3JtYWwxLmNvcHkoaHVsbEIuZmFjZU5vcm1hbHNbZmldKTsKICAgICAgICAgIHF1YXRCLnZtdWx0KFdvcmxkbm9ybWFsMSwgV29ybGRub3JtYWwxKTsKICAgICAgICAgIGNvbnN0IGQgPSBodWxsQS50ZXN0U2VwQXhpcyhXb3JsZG5vcm1hbDEsIGh1bGxCLCBwb3NBLCBxdWF0QSwgcG9zQiwgcXVhdEIpOwoKICAgICAgICAgIGlmIChkID09PSBmYWxzZSkgewogICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICB9CgogICAgICAgICAgaWYgKGQgPCBkbWluKSB7CiAgICAgICAgICAgIGRtaW4gPSBkOwogICAgICAgICAgICB0YXJnZXQuY29weShXb3JsZG5vcm1hbDEpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSBlbHNlIHsKICAgICAgICAvLyBUZXN0IHVuaXF1ZSBheGVzIGluIEIKICAgICAgICBmb3IgKGxldCBpID0gMDsgaSAhPT0gaHVsbEIudW5pcXVlQXhlcy5sZW5ndGg7IGkrKykgewogICAgICAgICAgcXVhdEIudm11bHQoaHVsbEIudW5pcXVlQXhlc1tpXSwgV29ybGRub3JtYWwxKTsKICAgICAgICAgIGNvbnN0IGQgPSBodWxsQS50ZXN0U2VwQXhpcyhXb3JsZG5vcm1hbDEsIGh1bGxCLCBwb3NBLCBxdWF0QSwgcG9zQiwgcXVhdEIpOwoKICAgICAgICAgIGlmIChkID09PSBmYWxzZSkgewogICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICB9CgogICAgICAgICAgaWYgKGQgPCBkbWluKSB7CiAgICAgICAgICAgIGRtaW4gPSBkOwogICAgICAgICAgICB0YXJnZXQuY29weShXb3JsZG5vcm1hbDEpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSAvLyBUZXN0IGVkZ2VzCgoKICAgICAgZm9yIChsZXQgZTAgPSAwOyBlMCAhPT0gaHVsbEEudW5pcXVlRWRnZXMubGVuZ3RoOyBlMCsrKSB7CiAgICAgICAgLy8gR2V0IHdvcmxkIGVkZ2UKICAgICAgICBxdWF0QS52bXVsdChodWxsQS51bmlxdWVFZGdlc1tlMF0sIHdvcmxkRWRnZTApOwoKICAgICAgICBmb3IgKGxldCBlMSA9IDA7IGUxICE9PSBodWxsQi51bmlxdWVFZGdlcy5sZW5ndGg7IGUxKyspIHsKICAgICAgICAgIC8vIEdldCB3b3JsZCBlZGdlIDIKICAgICAgICAgIHF1YXRCLnZtdWx0KGh1bGxCLnVuaXF1ZUVkZ2VzW2UxXSwgd29ybGRFZGdlMSk7CiAgICAgICAgICB3b3JsZEVkZ2UwLmNyb3NzKHdvcmxkRWRnZTEsIENyb3NzKTsKCiAgICAgICAgICBpZiAoIUNyb3NzLmFsbW9zdFplcm8oKSkgewogICAgICAgICAgICBDcm9zcy5ub3JtYWxpemUoKTsKICAgICAgICAgICAgY29uc3QgZGlzdCA9IGh1bGxBLnRlc3RTZXBBeGlzKENyb3NzLCBodWxsQiwgcG9zQSwgcXVhdEEsIHBvc0IsIHF1YXRCKTsKCiAgICAgICAgICAgIGlmIChkaXN0ID09PSBmYWxzZSkgewogICAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgaWYgKGRpc3QgPCBkbWluKSB7CiAgICAgICAgICAgICAgZG1pbiA9IGRpc3Q7CiAgICAgICAgICAgICAgdGFyZ2V0LmNvcHkoQ3Jvc3MpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CgogICAgICBwb3NCLnZzdWIocG9zQSwgZGVsdGFDKTsKCiAgICAgIGlmIChkZWx0YUMuZG90KHRhcmdldCkgPiAwLjApIHsKICAgICAgICB0YXJnZXQubmVnYXRlKHRhcmdldCk7CiAgICAgIH0KCiAgICAgIHJldHVybiB0cnVlOwogICAgfQogICAgLyoqCiAgICAgKiBUZXN0IHNlcGFyYXRpbmcgYXhpcyBhZ2FpbnN0IHR3byBodWxscy4gQm90aCBodWxscyBhcmUgcHJvamVjdGVkIG9udG8gdGhlIGF4aXMgYW5kIHRoZSBvdmVybGFwIHNpemUgaXMgcmV0dXJuZWQgaWYgdGhlcmUgaXMgb25lLgogICAgICogQHJldHVybiBUaGUgb3ZlcmxhcCBkZXB0aCwgb3IgRkFMU0UgaWYgbm8gcGVuZXRyYXRpb24uCiAgICAgKi8KCgogICAgdGVzdFNlcEF4aXMoYXhpcywgaHVsbEIsIHBvc0EsIHF1YXRBLCBwb3NCLCBxdWF0QikgewogICAgICBjb25zdCBodWxsQSA9IHRoaXM7CiAgICAgIENvbnZleFBvbHloZWRyb24ucHJvamVjdChodWxsQSwgYXhpcywgcG9zQSwgcXVhdEEsIG1heG1pbkEpOwogICAgICBDb252ZXhQb2x5aGVkcm9uLnByb2plY3QoaHVsbEIsIGF4aXMsIHBvc0IsIHF1YXRCLCBtYXhtaW5CKTsKICAgICAgY29uc3QgbWF4QSA9IG1heG1pbkFbMF07CiAgICAgIGNvbnN0IG1pbkEgPSBtYXhtaW5BWzFdOwogICAgICBjb25zdCBtYXhCID0gbWF4bWluQlswXTsKICAgICAgY29uc3QgbWluQiA9IG1heG1pbkJbMV07CgogICAgICBpZiAobWF4QSA8IG1pbkIgfHwgbWF4QiA8IG1pbkEpIHsKICAgICAgICByZXR1cm4gZmFsc2U7IC8vIFNlcGFyYXRlZAogICAgICB9CgogICAgICBjb25zdCBkMCA9IG1heEEgLSBtaW5COwogICAgICBjb25zdCBkMSA9IG1heEIgLSBtaW5BOwogICAgICBjb25zdCBkZXB0aCA9IGQwIDwgZDEgPyBkMCA6IGQxOwogICAgICByZXR1cm4gZGVwdGg7CiAgICB9CiAgICAvKioKICAgICAqIGNhbGN1bGF0ZUxvY2FsSW5lcnRpYQogICAgICovCgoKICAgIGNhbGN1bGF0ZUxvY2FsSW5lcnRpYShtYXNzLCB0YXJnZXQpIHsKICAgICAgLy8gQXBwcm94aW1hdGUgd2l0aCBib3ggaW5lcnRpYQogICAgICAvLyBFeGFjdCBpbmVydGlhIGNhbGN1bGF0aW9uIGlzIG92ZXJraWxsLCBidXQgc2VlIGh0dHA6Ly9nZW9tZXRyaWN0b29scy5jb20vRG9jdW1lbnRhdGlvbi9Qb2x5aGVkcmFsTWFzc1Byb3BlcnRpZXMucGRmIGZvciB0aGUgY29ycmVjdCB3YXkgdG8gZG8gaXQKICAgICAgY29uc3QgYWFiYm1heCA9IG5ldyBWZWMzKCk7CiAgICAgIGNvbnN0IGFhYmJtaW4gPSBuZXcgVmVjMygpOwogICAgICB0aGlzLmNvbXB1dGVMb2NhbEFBQkIoYWFiYm1pbiwgYWFiYm1heCk7CiAgICAgIGNvbnN0IHggPSBhYWJibWF4LnggLSBhYWJibWluLng7CiAgICAgIGNvbnN0IHkgPSBhYWJibWF4LnkgLSBhYWJibWluLnk7CiAgICAgIGNvbnN0IHogPSBhYWJibWF4LnogLSBhYWJibWluLno7CiAgICAgIHRhcmdldC54ID0gMS4wIC8gMTIuMCAqIG1hc3MgKiAoMiAqIHkgKiAyICogeSArIDIgKiB6ICogMiAqIHopOwogICAgICB0YXJnZXQueSA9IDEuMCAvIDEyLjAgKiBtYXNzICogKDIgKiB4ICogMiAqIHggKyAyICogeiAqIDIgKiB6KTsKICAgICAgdGFyZ2V0LnogPSAxLjAgLyAxMi4wICogbWFzcyAqICgyICogeSAqIDIgKiB5ICsgMiAqIHggKiAyICogeCk7CiAgICB9CiAgICAvKioKICAgICAqIEBwYXJhbSBmYWNlX2kgSW5kZXggb2YgdGhlIGZhY2UKICAgICAqLwoKCiAgICBnZXRQbGFuZUNvbnN0YW50T2ZGYWNlKGZhY2VfaSkgewogICAgICBjb25zdCBmID0gdGhpcy5mYWNlc1tmYWNlX2ldOwogICAgICBjb25zdCBuID0gdGhpcy5mYWNlTm9ybWFsc1tmYWNlX2ldOwogICAgICBjb25zdCB2ID0gdGhpcy52ZXJ0aWNlc1tmWzBdXTsKICAgICAgY29uc3QgYyA9IC1uLmRvdCh2KTsKICAgICAgcmV0dXJuIGM7CiAgICB9CiAgICAvKioKICAgICAqIENsaXAgYSBmYWNlIGFnYWluc3QgYSBodWxsLgogICAgICogQHBhcmFtIHdvcmxkVmVydHNCMSBBbiBhcnJheSBvZiBWZWMzIHdpdGggdmVydGljZXMgaW4gdGhlIHdvcmxkIGZyYW1lLgogICAgICogQHBhcmFtIG1pbkRpc3QgRGlzdGFuY2UgY2xhbXBpbmcKICAgICAqIEBwYXJhbSBBcnJheSByZXN1bHQgQXJyYXkgdG8gc3RvcmUgcmVzdWx0aW5nIGNvbnRhY3QgcG9pbnRzIGluLiBXaWxsIGJlIG9iamVjdHMgd2l0aCBwcm9wZXJ0aWVzOiBwb2ludCwgZGVwdGgsIG5vcm1hbC4gVGhlc2UgYXJlIHJlcHJlc2VudGVkIGluIHdvcmxkIGNvb3JkaW5hdGVzLgogICAgICovCgoKICAgIGNsaXBGYWNlQWdhaW5zdEh1bGwoc2VwYXJhdGluZ05vcm1hbCwgcG9zQSwgcXVhdEEsIHdvcmxkVmVydHNCMSwgbWluRGlzdCwgbWF4RGlzdCwgcmVzdWx0KSB7CiAgICAgIGNvbnN0IGZhY2VBTm9ybWFsV1MgPSBuZXcgVmVjMygpOwogICAgICBjb25zdCBlZGdlMCA9IG5ldyBWZWMzKCk7CiAgICAgIGNvbnN0IFdvcmxkRWRnZTAgPSBuZXcgVmVjMygpOwogICAgICBjb25zdCB3b3JsZFBsYW5lQW5vcm1hbDEgPSBuZXcgVmVjMygpOwogICAgICBjb25zdCBwbGFuZU5vcm1hbFdTMSA9IG5ldyBWZWMzKCk7CiAgICAgIGNvbnN0IHdvcmxkQTEgPSBuZXcgVmVjMygpOwogICAgICBjb25zdCBsb2NhbFBsYW5lTm9ybWFsID0gbmV3IFZlYzMoKTsKICAgICAgY29uc3QgcGxhbmVOb3JtYWxXUyA9IG5ldyBWZWMzKCk7CiAgICAgIGNvbnN0IGh1bGxBID0gdGhpczsKICAgICAgY29uc3Qgd29ybGRWZXJ0c0IyID0gW107CiAgICAgIGNvbnN0IHBWdHhJbiA9IHdvcmxkVmVydHNCMTsKICAgICAgY29uc3QgcFZ0eE91dCA9IHdvcmxkVmVydHNCMjsKICAgICAgbGV0IGNsb3Nlc3RGYWNlQSA9IC0xOwogICAgICBsZXQgZG1pbiA9IE51bWJlci5NQVhfVkFMVUU7IC8vIEZpbmQgdGhlIGZhY2Ugd2l0aCBub3JtYWwgY2xvc2VzdCB0byB0aGUgc2VwYXJhdGluZyBheGlzCgogICAgICBmb3IgKGxldCBmYWNlID0gMDsgZmFjZSA8IGh1bGxBLmZhY2VzLmxlbmd0aDsgZmFjZSsrKSB7CiAgICAgICAgZmFjZUFOb3JtYWxXUy5jb3B5KGh1bGxBLmZhY2VOb3JtYWxzW2ZhY2VdKTsKICAgICAgICBxdWF0QS52bXVsdChmYWNlQU5vcm1hbFdTLCBmYWNlQU5vcm1hbFdTKTsKICAgICAgICBjb25zdCBkID0gZmFjZUFOb3JtYWxXUy5kb3Qoc2VwYXJhdGluZ05vcm1hbCk7CgogICAgICAgIGlmIChkIDwgZG1pbikgewogICAgICAgICAgZG1pbiA9IGQ7CiAgICAgICAgICBjbG9zZXN0RmFjZUEgPSBmYWNlOwogICAgICAgIH0KICAgICAgfQoKICAgICAgaWYgKGNsb3Nlc3RGYWNlQSA8IDApIHsKICAgICAgICByZXR1cm47CiAgICAgIH0gLy8gR2V0IHRoZSBmYWNlIGFuZCBjb25zdHJ1Y3QgY29ubmVjdGVkIGZhY2VzCgoKICAgICAgY29uc3QgcG9seUEgPSBodWxsQS5mYWNlc1tjbG9zZXN0RmFjZUFdOwogICAgICBwb2x5QS5jb25uZWN0ZWRGYWNlcyA9IFtdOwoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBodWxsQS5mYWNlcy5sZW5ndGg7IGkrKykgewogICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgaHVsbEEuZmFjZXNbaV0ubGVuZ3RoOyBqKyspIHsKICAgICAgICAgIGlmICgKICAgICAgICAgIC8qIFNoYXJpbmcgYSB2ZXJ0ZXgqLwogICAgICAgICAgcG9seUEuaW5kZXhPZihodWxsQS5mYWNlc1tpXVtqXSkgIT09IC0xICYmCiAgICAgICAgICAvKiBOb3QgdGhlIG9uZSB3ZSBhcmUgbG9va2luZyBmb3IgY29ubmVjdGlvbnMgZnJvbSAqLwogICAgICAgICAgaSAhPT0gY2xvc2VzdEZhY2VBICYmCiAgICAgICAgICAvKiBOb3QgYWxyZWFkeSBhZGRlZCAqLwogICAgICAgICAgcG9seUEuY29ubmVjdGVkRmFjZXMuaW5kZXhPZihpKSA9PT0gLTEpIHsKICAgICAgICAgICAgcG9seUEuY29ubmVjdGVkRmFjZXMucHVzaChpKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0gLy8gQ2xpcCB0aGUgcG9seWdvbiB0byB0aGUgYmFjayBvZiB0aGUgcGxhbmVzIG9mIGFsbCBmYWNlcyBvZiBodWxsIEEsCiAgICAgIC8vIHRoYXQgYXJlIGFkamFjZW50IHRvIHRoZSB3aXRuZXNzIGZhY2UKCgogICAgICBjb25zdCBudW1WZXJ0aWNlc0EgPSBwb2x5QS5sZW5ndGg7CgogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG51bVZlcnRpY2VzQTsgaSsrKSB7CiAgICAgICAgY29uc3QgYSA9IGh1bGxBLnZlcnRpY2VzW3BvbHlBW2ldXTsKICAgICAgICBjb25zdCBiID0gaHVsbEEudmVydGljZXNbcG9seUFbKGkgKyAxKSAlIG51bVZlcnRpY2VzQV1dOwogICAgICAgIGEudnN1YihiLCBlZGdlMCk7CiAgICAgICAgV29ybGRFZGdlMC5jb3B5KGVkZ2UwKTsKICAgICAgICBxdWF0QS52bXVsdChXb3JsZEVkZ2UwLCBXb3JsZEVkZ2UwKTsKICAgICAgICBwb3NBLnZhZGQoV29ybGRFZGdlMCwgV29ybGRFZGdlMCk7CiAgICAgICAgd29ybGRQbGFuZUFub3JtYWwxLmNvcHkodGhpcy5mYWNlTm9ybWFsc1tjbG9zZXN0RmFjZUFdKTsKICAgICAgICBxdWF0QS52bXVsdCh3b3JsZFBsYW5lQW5vcm1hbDEsIHdvcmxkUGxhbmVBbm9ybWFsMSk7CiAgICAgICAgcG9zQS52YWRkKHdvcmxkUGxhbmVBbm9ybWFsMSwgd29ybGRQbGFuZUFub3JtYWwxKTsKICAgICAgICBXb3JsZEVkZ2UwLmNyb3NzKHdvcmxkUGxhbmVBbm9ybWFsMSwgcGxhbmVOb3JtYWxXUzEpOwogICAgICAgIHBsYW5lTm9ybWFsV1MxLm5lZ2F0ZShwbGFuZU5vcm1hbFdTMSk7CiAgICAgICAgd29ybGRBMS5jb3B5KGEpOwogICAgICAgIHF1YXRBLnZtdWx0KHdvcmxkQTEsIHdvcmxkQTEpOwogICAgICAgIHBvc0EudmFkZCh3b3JsZEExLCB3b3JsZEExKTsKICAgICAgICBjb25zdCBvdGhlckZhY2UgPSBwb2x5QS5jb25uZWN0ZWRGYWNlc1tpXTsKICAgICAgICBsb2NhbFBsYW5lTm9ybWFsLmNvcHkodGhpcy5mYWNlTm9ybWFsc1tvdGhlckZhY2VdKTsKICAgICAgICBjb25zdCBsb2NhbFBsYW5lRXEgPSB0aGlzLmdldFBsYW5lQ29uc3RhbnRPZkZhY2Uob3RoZXJGYWNlKTsKICAgICAgICBwbGFuZU5vcm1hbFdTLmNvcHkobG9jYWxQbGFuZU5vcm1hbCk7CiAgICAgICAgcXVhdEEudm11bHQocGxhbmVOb3JtYWxXUywgcGxhbmVOb3JtYWxXUyk7CiAgICAgICAgY29uc3QgcGxhbmVFcVdTID0gbG9jYWxQbGFuZUVxIC0gcGxhbmVOb3JtYWxXUy5kb3QocG9zQSk7IC8vIENsaXAgZmFjZSBhZ2FpbnN0IG91ciBjb25zdHJ1Y3RlZCBwbGFuZQoKICAgICAgICB0aGlzLmNsaXBGYWNlQWdhaW5zdFBsYW5lKHBWdHhJbiwgcFZ0eE91dCwgcGxhbmVOb3JtYWxXUywgcGxhbmVFcVdTKTsgLy8gVGhyb3cgYXdheSBhbGwgY2xpcHBlZCBwb2ludHMsIGJ1dCBzYXZlIHRoZSByZW1haW5pbmcgdW50aWwgbmV4dCBjbGlwCgogICAgICAgIHdoaWxlIChwVnR4SW4ubGVuZ3RoKSB7CiAgICAgICAgICBwVnR4SW4uc2hpZnQoKTsKICAgICAgICB9CgogICAgICAgIHdoaWxlIChwVnR4T3V0Lmxlbmd0aCkgewogICAgICAgICAgcFZ0eEluLnB1c2gocFZ0eE91dC5zaGlmdCgpKTsKICAgICAgICB9CiAgICAgIH0gLy8gb25seSBrZWVwIGNvbnRhY3QgcG9pbnRzIHRoYXQgYXJlIGJlaGluZCB0aGUgd2l0bmVzcyBmYWNlCgoKICAgICAgbG9jYWxQbGFuZU5vcm1hbC5jb3B5KHRoaXMuZmFjZU5vcm1hbHNbY2xvc2VzdEZhY2VBXSk7CiAgICAgIGNvbnN0IGxvY2FsUGxhbmVFcSA9IHRoaXMuZ2V0UGxhbmVDb25zdGFudE9mRmFjZShjbG9zZXN0RmFjZUEpOwogICAgICBwbGFuZU5vcm1hbFdTLmNvcHkobG9jYWxQbGFuZU5vcm1hbCk7CiAgICAgIHF1YXRBLnZtdWx0KHBsYW5lTm9ybWFsV1MsIHBsYW5lTm9ybWFsV1MpOwogICAgICBjb25zdCBwbGFuZUVxV1MgPSBsb2NhbFBsYW5lRXEgLSBwbGFuZU5vcm1hbFdTLmRvdChwb3NBKTsKCiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcFZ0eEluLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgbGV0IGRlcHRoID0gcGxhbmVOb3JtYWxXUy5kb3QocFZ0eEluW2ldKSArIHBsYW5lRXFXUzsgLy8gPz8/CgogICAgICAgIGlmIChkZXB0aCA8PSBtaW5EaXN0KSB7CiAgICAgICAgICBjb25zb2xlLmxvZygiY2xhbXBlZDogZGVwdGg9IiArIGRlcHRoICsgIiB0byBtaW5EaXN0PSIgKyBtaW5EaXN0KTsKICAgICAgICAgIGRlcHRoID0gbWluRGlzdDsKICAgICAgICB9CgogICAgICAgIGlmIChkZXB0aCA8PSBtYXhEaXN0KSB7CiAgICAgICAgICBjb25zdCBwb2ludCA9IHBWdHhJbltpXTsKCiAgICAgICAgICBpZiAoZGVwdGggPD0gMWUtNikgewogICAgICAgICAgICBjb25zdCBwID0gewogICAgICAgICAgICAgIHBvaW50LAogICAgICAgICAgICAgIG5vcm1hbDogcGxhbmVOb3JtYWxXUywKICAgICAgICAgICAgICBkZXB0aAogICAgICAgICAgICB9OwogICAgICAgICAgICByZXN1bHQucHVzaChwKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KICAgIH0KICAgIC8qKgogICAgICogQ2xpcCBhIGZhY2UgaW4gYSBodWxsIGFnYWluc3QgdGhlIGJhY2sgb2YgYSBwbGFuZS4KICAgICAqIEBwYXJhbSBwbGFuZUNvbnN0YW50IFRoZSBjb25zdGFudCBpbiB0aGUgbWF0aGVtYXRpY2FsIHBsYW5lIGVxdWF0aW9uCiAgICAgKi8KCgogICAgY2xpcEZhY2VBZ2FpbnN0UGxhbmUoaW5WZXJ0aWNlcywgb3V0VmVydGljZXMsIHBsYW5lTm9ybWFsLCBwbGFuZUNvbnN0YW50KSB7CiAgICAgIGxldCBuX2RvdF9maXJzdDsKICAgICAgbGV0IG5fZG90X2xhc3Q7CiAgICAgIGNvbnN0IG51bVZlcnRzID0gaW5WZXJ0aWNlcy5sZW5ndGg7CgogICAgICBpZiAobnVtVmVydHMgPCAyKSB7CiAgICAgICAgcmV0dXJuIG91dFZlcnRpY2VzOwogICAgICB9CgogICAgICBsZXQgZmlyc3RWZXJ0ZXggPSBpblZlcnRpY2VzW2luVmVydGljZXMubGVuZ3RoIC0gMV07CiAgICAgIGxldCBsYXN0VmVydGV4ID0gaW5WZXJ0aWNlc1swXTsKICAgICAgbl9kb3RfZmlyc3QgPSBwbGFuZU5vcm1hbC5kb3QoZmlyc3RWZXJ0ZXgpICsgcGxhbmVDb25zdGFudDsKCiAgICAgIGZvciAobGV0IHZpID0gMDsgdmkgPCBudW1WZXJ0czsgdmkrKykgewogICAgICAgIGxhc3RWZXJ0ZXggPSBpblZlcnRpY2VzW3ZpXTsKICAgICAgICBuX2RvdF9sYXN0ID0gcGxhbmVOb3JtYWwuZG90KGxhc3RWZXJ0ZXgpICsgcGxhbmVDb25zdGFudDsKCiAgICAgICAgaWYgKG5fZG90X2ZpcnN0IDwgMCkgewogICAgICAgICAgaWYgKG5fZG90X2xhc3QgPCAwKSB7CiAgICAgICAgICAgIC8vIFN0YXJ0IDwgMCwgZW5kIDwgMCwgc28gb3V0cHV0IGxhc3RWZXJ0ZXgKICAgICAgICAgICAgY29uc3QgbmV3diA9IG5ldyBWZWMzKCk7CiAgICAgICAgICAgIG5ld3YuY29weShsYXN0VmVydGV4KTsKICAgICAgICAgICAgb3V0VmVydGljZXMucHVzaChuZXd2KTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIC8vIFN0YXJ0IDwgMCwgZW5kID49IDAsIHNvIG91dHB1dCBpbnRlcnNlY3Rpb24KICAgICAgICAgICAgY29uc3QgbmV3diA9IG5ldyBWZWMzKCk7CiAgICAgICAgICAgIGZpcnN0VmVydGV4LmxlcnAobGFzdFZlcnRleCwgbl9kb3RfZmlyc3QgLyAobl9kb3RfZmlyc3QgLSBuX2RvdF9sYXN0KSwgbmV3dik7CiAgICAgICAgICAgIG91dFZlcnRpY2VzLnB1c2gobmV3dik7CiAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGlmIChuX2RvdF9sYXN0IDwgMCkgewogICAgICAgICAgICAvLyBTdGFydCA+PSAwLCBlbmQgPCAwIHNvIG91dHB1dCBpbnRlcnNlY3Rpb24gYW5kIGVuZAogICAgICAgICAgICBjb25zdCBuZXd2ID0gbmV3IFZlYzMoKTsKICAgICAgICAgICAgZmlyc3RWZXJ0ZXgubGVycChsYXN0VmVydGV4LCBuX2RvdF9maXJzdCAvIChuX2RvdF9maXJzdCAtIG5fZG90X2xhc3QpLCBuZXd2KTsKICAgICAgICAgICAgb3V0VmVydGljZXMucHVzaChuZXd2KTsKICAgICAgICAgICAgb3V0VmVydGljZXMucHVzaChsYXN0VmVydGV4KTsKICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGZpcnN0VmVydGV4ID0gbGFzdFZlcnRleDsKICAgICAgICBuX2RvdF9maXJzdCA9IG5fZG90X2xhc3Q7CiAgICAgIH0KCiAgICAgIHJldHVybiBvdXRWZXJ0aWNlczsKICAgIH0KICAgIC8qKgogICAgICogVXBkYXRlcyBgLndvcmxkVmVydGljZXNgIGFuZCBzZXRzIGAud29ybGRWZXJ0aWNlc05lZWRzVXBkYXRlYCB0byBmYWxzZS4KICAgICAqLwoKCiAgICBjb21wdXRlV29ybGRWZXJ0aWNlcyhwb3NpdGlvbiwgcXVhdCkgewogICAgICB3aGlsZSAodGhpcy53b3JsZFZlcnRpY2VzLmxlbmd0aCA8IHRoaXMudmVydGljZXMubGVuZ3RoKSB7CiAgICAgICAgdGhpcy53b3JsZFZlcnRpY2VzLnB1c2gobmV3IFZlYzMoKSk7CiAgICAgIH0KCiAgICAgIGNvbnN0IHZlcnRzID0gdGhpcy52ZXJ0aWNlczsKICAgICAgY29uc3Qgd29ybGRWZXJ0cyA9IHRoaXMud29ybGRWZXJ0aWNlczsKCiAgICAgIGZvciAobGV0IGkgPSAwOyBpICE9PSB0aGlzLnZlcnRpY2VzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgcXVhdC52bXVsdCh2ZXJ0c1tpXSwgd29ybGRWZXJ0c1tpXSk7CiAgICAgICAgcG9zaXRpb24udmFkZCh3b3JsZFZlcnRzW2ldLCB3b3JsZFZlcnRzW2ldKTsKICAgICAgfQoKICAgICAgdGhpcy53b3JsZFZlcnRpY2VzTmVlZHNVcGRhdGUgPSBmYWxzZTsKICAgIH0KCiAgICBjb21wdXRlTG9jYWxBQUJCKGFhYmJtaW4sIGFhYmJtYXgpIHsKICAgICAgY29uc3QgdmVydGljZXMgPSB0aGlzLnZlcnRpY2VzOwogICAgICBhYWJibWluLnNldChOdW1iZXIuTUFYX1ZBTFVFLCBOdW1iZXIuTUFYX1ZBTFVFLCBOdW1iZXIuTUFYX1ZBTFVFKTsKICAgICAgYWFiYm1heC5zZXQoLU51bWJlci5NQVhfVkFMVUUsIC1OdW1iZXIuTUFYX1ZBTFVFLCAtTnVtYmVyLk1BWF9WQUxVRSk7CgogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMudmVydGljZXMubGVuZ3RoOyBpKyspIHsKICAgICAgICBjb25zdCB2ID0gdmVydGljZXNbaV07CgogICAgICAgIGlmICh2LnggPCBhYWJibWluLngpIHsKICAgICAgICAgIGFhYmJtaW4ueCA9IHYueDsKICAgICAgICB9IGVsc2UgaWYgKHYueCA+IGFhYmJtYXgueCkgewogICAgICAgICAgYWFiYm1heC54ID0gdi54OwogICAgICAgIH0KCiAgICAgICAgaWYgKHYueSA8IGFhYmJtaW4ueSkgewogICAgICAgICAgYWFiYm1pbi55ID0gdi55OwogICAgICAgIH0gZWxzZSBpZiAodi55ID4gYWFiYm1heC55KSB7CiAgICAgICAgICBhYWJibWF4LnkgPSB2Lnk7CiAgICAgICAgfQoKICAgICAgICBpZiAodi56IDwgYWFiYm1pbi56KSB7CiAgICAgICAgICBhYWJibWluLnogPSB2Lno7CiAgICAgICAgfSBlbHNlIGlmICh2LnogPiBhYWJibWF4LnopIHsKICAgICAgICAgIGFhYmJtYXgueiA9IHYuejsKICAgICAgICB9CiAgICAgIH0KICAgIH0KICAgIC8qKgogICAgICogVXBkYXRlcyBgd29ybGRWZXJ0aWNlc2AgYW5kIHNldHMgYHdvcmxkVmVydGljZXNOZWVkc1VwZGF0ZWAgdG8gZmFsc2UuCiAgICAgKi8KCgogICAgY29tcHV0ZVdvcmxkRmFjZU5vcm1hbHMocXVhdCkgewogICAgICBjb25zdCBOID0gdGhpcy5mYWNlTm9ybWFscy5sZW5ndGg7CgogICAgICB3aGlsZSAodGhpcy53b3JsZEZhY2VOb3JtYWxzLmxlbmd0aCA8IE4pIHsKICAgICAgICB0aGlzLndvcmxkRmFjZU5vcm1hbHMucHVzaChuZXcgVmVjMygpKTsKICAgICAgfQoKICAgICAgY29uc3Qgbm9ybWFscyA9IHRoaXMuZmFjZU5vcm1hbHM7CiAgICAgIGNvbnN0IHdvcmxkTm9ybWFscyA9IHRoaXMud29ybGRGYWNlTm9ybWFsczsKCiAgICAgIGZvciAobGV0IGkgPSAwOyBpICE9PSBOOyBpKyspIHsKICAgICAgICBxdWF0LnZtdWx0KG5vcm1hbHNbaV0sIHdvcmxkTm9ybWFsc1tpXSk7CiAgICAgIH0KCiAgICAgIHRoaXMud29ybGRGYWNlTm9ybWFsc05lZWRzVXBkYXRlID0gZmFsc2U7CiAgICB9CiAgICAvKioKICAgICAqIHVwZGF0ZUJvdW5kaW5nU3BoZXJlUmFkaXVzCiAgICAgKi8KCgogICAgdXBkYXRlQm91bmRpbmdTcGhlcmVSYWRpdXMoKSB7CiAgICAgIC8vIEFzc3VtZSBwb2ludHMgYXJlIGRpc3RyaWJ1dGVkIHdpdGggbG9jYWwgKDAsMCwwKSBhcyBjZW50ZXIKICAgICAgbGV0IG1heDIgPSAwOwogICAgICBjb25zdCB2ZXJ0cyA9IHRoaXMudmVydGljZXM7CgogICAgICBmb3IgKGxldCBpID0gMDsgaSAhPT0gdmVydHMubGVuZ3RoOyBpKyspIHsKICAgICAgICBjb25zdCBub3JtMiA9IHZlcnRzW2ldLmxlbmd0aFNxdWFyZWQoKTsKCiAgICAgICAgaWYgKG5vcm0yID4gbWF4MikgewogICAgICAgICAgbWF4MiA9IG5vcm0yOwogICAgICAgIH0KICAgICAgfQoKICAgICAgdGhpcy5ib3VuZGluZ1NwaGVyZVJhZGl1cyA9IE1hdGguc3FydChtYXgyKTsKICAgIH0KICAgIC8qKgogICAgICogY2FsY3VsYXRlV29ybGRBQUJCCiAgICAgKi8KCgogICAgY2FsY3VsYXRlV29ybGRBQUJCKHBvcywgcXVhdCwgbWluLCBtYXgpIHsKICAgICAgY29uc3QgdmVydHMgPSB0aGlzLnZlcnRpY2VzOwogICAgICBsZXQgbWlueDsKICAgICAgbGV0IG1pbnk7CiAgICAgIGxldCBtaW56OwogICAgICBsZXQgbWF4eDsKICAgICAgbGV0IG1heHk7CiAgICAgIGxldCBtYXh6OwogICAgICBsZXQgdGVtcFdvcmxkVmVydGV4ID0gbmV3IFZlYzMoKTsKCiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdmVydHMubGVuZ3RoOyBpKyspIHsKICAgICAgICB0ZW1wV29ybGRWZXJ0ZXguY29weSh2ZXJ0c1tpXSk7CiAgICAgICAgcXVhdC52bXVsdCh0ZW1wV29ybGRWZXJ0ZXgsIHRlbXBXb3JsZFZlcnRleCk7CiAgICAgICAgcG9zLnZhZGQodGVtcFdvcmxkVmVydGV4LCB0ZW1wV29ybGRWZXJ0ZXgpOwogICAgICAgIGNvbnN0IHYgPSB0ZW1wV29ybGRWZXJ0ZXg7CgogICAgICAgIGlmIChtaW54ID09PSB1bmRlZmluZWQgfHwgdi54IDwgbWlueCkgewogICAgICAgICAgbWlueCA9IHYueDsKICAgICAgICB9CgogICAgICAgIGlmIChtYXh4ID09PSB1bmRlZmluZWQgfHwgdi54ID4gbWF4eCkgewogICAgICAgICAgbWF4eCA9IHYueDsKICAgICAgICB9CgogICAgICAgIGlmIChtaW55ID09PSB1bmRlZmluZWQgfHwgdi55IDwgbWlueSkgewogICAgICAgICAgbWlueSA9IHYueTsKICAgICAgICB9CgogICAgICAgIGlmIChtYXh5ID09PSB1bmRlZmluZWQgfHwgdi55ID4gbWF4eSkgewogICAgICAgICAgbWF4eSA9IHYueTsKICAgICAgICB9CgogICAgICAgIGlmIChtaW56ID09PSB1bmRlZmluZWQgfHwgdi56IDwgbWlueikgewogICAgICAgICAgbWlueiA9IHYuejsKICAgICAgICB9CgogICAgICAgIGlmIChtYXh6ID09PSB1bmRlZmluZWQgfHwgdi56ID4gbWF4eikgewogICAgICAgICAgbWF4eiA9IHYuejsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIG1pbi5zZXQobWlueCwgbWlueSwgbWlueik7CiAgICAgIG1heC5zZXQobWF4eCwgbWF4eSwgbWF4eik7CiAgICB9CiAgICAvKioKICAgICAqIEdldCBhcHByb3hpbWF0ZSBjb252ZXggdm9sdW1lCiAgICAgKi8KCgogICAgdm9sdW1lKCkgewogICAgICByZXR1cm4gNC4wICogTWF0aC5QSSAqIHRoaXMuYm91bmRpbmdTcGhlcmVSYWRpdXMgLyAzLjA7CiAgICB9CiAgICAvKioKICAgICAqIEdldCBhbiBhdmVyYWdlIG9mIGFsbCB0aGUgdmVydGljZXMgcG9zaXRpb25zCiAgICAgKi8KCgogICAgZ2V0QXZlcmFnZVBvaW50TG9jYWwodGFyZ2V0KSB7CiAgICAgIGlmICh0YXJnZXQgPT09IHZvaWQgMCkgewogICAgICAgIHRhcmdldCA9IG5ldyBWZWMzKCk7CiAgICAgIH0KCiAgICAgIGNvbnN0IHZlcnRzID0gdGhpcy52ZXJ0aWNlczsKCiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdmVydHMubGVuZ3RoOyBpKyspIHsKICAgICAgICB0YXJnZXQudmFkZCh2ZXJ0c1tpXSwgdGFyZ2V0KTsKICAgICAgfQoKICAgICAgdGFyZ2V0LnNjYWxlKDEgLyB2ZXJ0cy5sZW5ndGgsIHRhcmdldCk7CiAgICAgIHJldHVybiB0YXJnZXQ7CiAgICB9CiAgICAvKioKICAgICAqIFRyYW5zZm9ybSBhbGwgbG9jYWwgcG9pbnRzLiBXaWxsIGNoYW5nZSB0aGUgLnZlcnRpY2VzCiAgICAgKi8KCgogICAgdHJhbnNmb3JtQWxsUG9pbnRzKG9mZnNldCwgcXVhdCkgewogICAgICBjb25zdCBuID0gdGhpcy52ZXJ0aWNlcy5sZW5ndGg7CiAgICAgIGNvbnN0IHZlcnRzID0gdGhpcy52ZXJ0aWNlczsgLy8gQXBwbHkgcm90YXRpb24KCiAgICAgIGlmIChxdWF0KSB7CiAgICAgICAgLy8gUm90YXRlIHZlcnRpY2VzCiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBuOyBpKyspIHsKICAgICAgICAgIGNvbnN0IHYgPSB2ZXJ0c1tpXTsKICAgICAgICAgIHF1YXQudm11bHQodiwgdik7CiAgICAgICAgfSAvLyBSb3RhdGUgZmFjZSBub3JtYWxzCgoKICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuZmFjZU5vcm1hbHMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgIGNvbnN0IHYgPSB0aGlzLmZhY2VOb3JtYWxzW2ldOwogICAgICAgICAgcXVhdC52bXVsdCh2LCB2KTsKICAgICAgICB9CiAgICAgICAgLyoKICAgICAgICAgICAgICAvLyBSb3RhdGUgZWRnZXMKICAgICAgICAgICAgICBmb3IobGV0IGk9MDsgaTx0aGlzLnVuaXF1ZUVkZ2VzLmxlbmd0aDsgaSsrKXsKICAgICAgICAgICAgICAgICAgY29uc3QgdiA9IHRoaXMudW5pcXVlRWRnZXNbaV07CiAgICAgICAgICAgICAgICAgIHF1YXQudm11bHQodix2KTsKICAgICAgICAgICAgICB9Ki8KCiAgICAgIH0gLy8gQXBwbHkgb2Zmc2V0CgoKICAgICAgaWYgKG9mZnNldCkgewogICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbjsgaSsrKSB7CiAgICAgICAgICBjb25zdCB2ID0gdmVydHNbaV07CiAgICAgICAgICB2LnZhZGQob2Zmc2V0LCB2KTsKICAgICAgICB9CiAgICAgIH0KICAgIH0KICAgIC8qKgogICAgICogQ2hlY2tzIHdoZXRoZXIgcCBpcyBpbnNpZGUgdGhlIHBvbHloZWRyYS4gTXVzdCBiZSBpbiBsb2NhbCBjb29yZHMuCiAgICAgKiBUaGUgcG9pbnQgbGllcyBvdXRzaWRlIG9mIHRoZSBjb252ZXggaHVsbCBvZiB0aGUgb3RoZXIgcG9pbnRzIGlmIGFuZCBvbmx5IGlmIHRoZSBkaXJlY3Rpb24KICAgICAqIG9mIGFsbCB0aGUgdmVjdG9ycyBmcm9tIGl0IHRvIHRob3NlIG90aGVyIHBvaW50cyBhcmUgb24gbGVzcyB0aGFuIG9uZSBoYWxmIG9mIGEgc3BoZXJlIGFyb3VuZCBpdC4KICAgICAqIEBwYXJhbSBwIEEgcG9pbnQgZ2l2ZW4gaW4gbG9jYWwgY29vcmRpbmF0ZXMKICAgICAqLwoKCiAgICBwb2ludElzSW5zaWRlKHApIHsKICAgICAgY29uc3QgdmVydHMgPSB0aGlzLnZlcnRpY2VzOwogICAgICBjb25zdCBmYWNlcyA9IHRoaXMuZmFjZXM7CiAgICAgIGNvbnN0IG5vcm1hbHMgPSB0aGlzLmZhY2VOb3JtYWxzOwogICAgICBjb25zdCBwb2ludEluc2lkZSA9IG5ldyBWZWMzKCk7CiAgICAgIHRoaXMuZ2V0QXZlcmFnZVBvaW50TG9jYWwocG9pbnRJbnNpZGUpOwoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmZhY2VzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgbGV0IG4gPSBub3JtYWxzW2ldOwogICAgICAgIGNvbnN0IHYgPSB2ZXJ0c1tmYWNlc1tpXVswXV07IC8vIFdlIG9ubHkgbmVlZCBvbmUgcG9pbnQgaW4gdGhlIGZhY2UKICAgICAgICAvLyBUaGlzIGRvdCBwcm9kdWN0IGRldGVybWluZXMgd2hpY2ggc2lkZSBvZiB0aGUgZWRnZSB0aGUgcG9pbnQgaXMKCiAgICAgICAgY29uc3QgdlRvUCA9IG5ldyBWZWMzKCk7CiAgICAgICAgcC52c3ViKHYsIHZUb1ApOwogICAgICAgIGNvbnN0IHIxID0gbi5kb3QodlRvUCk7CiAgICAgICAgY29uc3QgdlRvUG9pbnRJbnNpZGUgPSBuZXcgVmVjMygpOwogICAgICAgIHBvaW50SW5zaWRlLnZzdWIodiwgdlRvUG9pbnRJbnNpZGUpOwogICAgICAgIGNvbnN0IHIyID0gbi5kb3QodlRvUG9pbnRJbnNpZGUpOwoKICAgICAgICBpZiAocjEgPCAwICYmIHIyID4gMCB8fCByMSA+IDAgJiYgcjIgPCAwKSB7CiAgICAgICAgICByZXR1cm4gZmFsc2U7IC8vIEVuY291bnRlcmVkIHNvbWUgb3RoZXIgc2lnbi4gRXhpdC4KICAgICAgICB9CiAgICAgIH0gLy8gSWYgd2UgZ290IGhlcmUsIGFsbCBkb3QgcHJvZHVjdHMgd2VyZSBvZiB0aGUgc2FtZSBzaWduLgoKCiAgICAgIHJldHVybiAtMTsKICAgIH0KICAgIC8qKgogICAgICogR2V0IG1heCBhbmQgbWluIGRvdCBwcm9kdWN0IG9mIGEgY29udmV4IGh1bGwgYXQgcG9zaXRpb24gKHBvcyxxdWF0KSBwcm9qZWN0ZWQgb250byBhbiBheGlzLgogICAgICogUmVzdWx0cyBhcmUgc2F2ZWQgaW4gdGhlIGFycmF5IG1heG1pbi4KICAgICAqIEBwYXJhbSByZXN1bHQgcmVzdWx0WzBdIGFuZCByZXN1bHRbMV0gd2lsbCBiZSBzZXQgdG8gbWF4aW11bSBhbmQgbWluaW11bSwgcmVzcGVjdGl2ZWx5LgogICAgICovCgoKICAgIHN0YXRpYyBwcm9qZWN0KHNoYXBlLCBheGlzLCBwb3MsIHF1YXQsIHJlc3VsdCkgewogICAgICBjb25zdCBuID0gc2hhcGUudmVydGljZXMubGVuZ3RoOwogICAgICBjb25zdCBsb2NhbEF4aXMgPSBwcm9qZWN0X2xvY2FsQXhpczsKICAgICAgbGV0IG1heCA9IDA7CiAgICAgIGxldCBtaW4gPSAwOwogICAgICBjb25zdCBsb2NhbE9yaWdpbiA9IHByb2plY3RfbG9jYWxPcmlnaW47CiAgICAgIGNvbnN0IHZzID0gc2hhcGUudmVydGljZXM7CiAgICAgIGxvY2FsT3JpZ2luLnNldFplcm8oKTsgLy8gVHJhbnNmb3JtIHRoZSBheGlzIHRvIGxvY2FsCgogICAgICBUcmFuc2Zvcm0udmVjdG9yVG9Mb2NhbEZyYW1lKHBvcywgcXVhdCwgYXhpcywgbG9jYWxBeGlzKTsKICAgICAgVHJhbnNmb3JtLnBvaW50VG9Mb2NhbEZyYW1lKHBvcywgcXVhdCwgbG9jYWxPcmlnaW4sIGxvY2FsT3JpZ2luKTsKICAgICAgY29uc3QgYWRkID0gbG9jYWxPcmlnaW4uZG90KGxvY2FsQXhpcyk7CiAgICAgIG1pbiA9IG1heCA9IHZzWzBdLmRvdChsb2NhbEF4aXMpOwoKICAgICAgZm9yIChsZXQgaSA9IDE7IGkgPCBuOyBpKyspIHsKICAgICAgICBjb25zdCB2YWwgPSB2c1tpXS5kb3QobG9jYWxBeGlzKTsKCiAgICAgICAgaWYgKHZhbCA+IG1heCkgewogICAgICAgICAgbWF4ID0gdmFsOwogICAgICAgIH0KCiAgICAgICAgaWYgKHZhbCA8IG1pbikgewogICAgICAgICAgbWluID0gdmFsOwogICAgICAgIH0KICAgICAgfQoKICAgICAgbWluIC09IGFkZDsKICAgICAgbWF4IC09IGFkZDsKCiAgICAgIGlmIChtaW4gPiBtYXgpIHsKICAgICAgICAvLyBJbmNvbnNpc3RlbnQgLSBzd2FwCiAgICAgICAgY29uc3QgdGVtcCA9IG1pbjsKICAgICAgICBtaW4gPSBtYXg7CiAgICAgICAgbWF4ID0gdGVtcDsKICAgICAgfSAvLyBPdXRwdXQKCgogICAgICByZXN1bHRbMF0gPSBtYXg7CiAgICAgIHJlc3VsdFsxXSA9IG1pbjsKICAgIH0KCiAgfQoKICBjb25zdCBtYXhtaW5BID0gW107CiAgY29uc3QgbWF4bWluQiA9IFtdOwogIGNvbnN0IHByb2plY3RfbG9jYWxBeGlzID0gbmV3IFZlYzMoKTsKICBjb25zdCBwcm9qZWN0X2xvY2FsT3JpZ2luID0gbmV3IFZlYzMoKTsKICAvKioKICAgKiBBIDNkIGJveCBzaGFwZS4KICAgKiBAZXhhbXBsZQogICAqICAgICBjb25zdCBzaXplID0gMQogICAqICAgICBjb25zdCBoYWxmRXh0ZW50cyA9IG5ldyBDQU5OT04uVmVjMyhzaXplLCBzaXplLCBzaXplKQogICAqICAgICBjb25zdCBib3hTaGFwZSA9IG5ldyBDQU5OT04uQm94KGhhbGZFeHRlbnRzKQogICAqICAgICBjb25zdCBib3hCb2R5ID0gbmV3IENBTk5PTi5Cb2R5KHsgbWFzczogMSwgc2hhcGU6IGJveFNoYXBlIH0pCiAgICogICAgIHdvcmxkLmFkZEJvZHkoYm94Qm9keSkKICAgKi8KCiAgY2xhc3MgQm94IGV4dGVuZHMgU2hhcGUgewogICAgLyoqCiAgICAgKiBUaGUgaGFsZiBleHRlbnRzIG9mIHRoZSBib3guCiAgICAgKi8KCiAgICAvKioKICAgICAqIFVzZWQgYnkgdGhlIGNvbnRhY3QgZ2VuZXJhdG9yIHRvIG1ha2UgY29udGFjdHMgd2l0aCBvdGhlciBjb252ZXggcG9seWhlZHJhIGZvciBleGFtcGxlLgogICAgICovCiAgICBjb25zdHJ1Y3RvcihoYWxmRXh0ZW50cykgewogICAgICBzdXBlcih7CiAgICAgICAgdHlwZTogU2hhcGUudHlwZXMuQk9YCiAgICAgIH0pOwogICAgICB0aGlzLmhhbGZFeHRlbnRzID0gdm9pZCAwOwogICAgICB0aGlzLmNvbnZleFBvbHloZWRyb25SZXByZXNlbnRhdGlvbiA9IHZvaWQgMDsKICAgICAgdGhpcy5oYWxmRXh0ZW50cyA9IGhhbGZFeHRlbnRzOwogICAgICB0aGlzLmNvbnZleFBvbHloZWRyb25SZXByZXNlbnRhdGlvbiA9IG51bGw7CiAgICAgIHRoaXMudXBkYXRlQ29udmV4UG9seWhlZHJvblJlcHJlc2VudGF0aW9uKCk7CiAgICAgIHRoaXMudXBkYXRlQm91bmRpbmdTcGhlcmVSYWRpdXMoKTsKICAgIH0KICAgIC8qKgogICAgICogVXBkYXRlcyB0aGUgbG9jYWwgY29udmV4IHBvbHloZWRyb24gcmVwcmVzZW50YXRpb24gdXNlZCBmb3Igc29tZSBjb2xsaXNpb25zLgogICAgICovCgoKICAgIHVwZGF0ZUNvbnZleFBvbHloZWRyb25SZXByZXNlbnRhdGlvbigpIHsKICAgICAgY29uc3Qgc3ggPSB0aGlzLmhhbGZFeHRlbnRzLng7CiAgICAgIGNvbnN0IHN5ID0gdGhpcy5oYWxmRXh0ZW50cy55OwogICAgICBjb25zdCBzeiA9IHRoaXMuaGFsZkV4dGVudHMuejsKICAgICAgY29uc3QgViA9IFZlYzM7CiAgICAgIGNvbnN0IHZlcnRpY2VzID0gW25ldyBWKC1zeCwgLXN5LCAtc3opLCBuZXcgVihzeCwgLXN5LCAtc3opLCBuZXcgVihzeCwgc3ksIC1zeiksIG5ldyBWKC1zeCwgc3ksIC1zeiksIG5ldyBWKC1zeCwgLXN5LCBzeiksIG5ldyBWKHN4LCAtc3ksIHN6KSwgbmV3IFYoc3gsIHN5LCBzeiksIG5ldyBWKC1zeCwgc3ksIHN6KV07CiAgICAgIGNvbnN0IGZhY2VzID0gW1szLCAyLCAxLCAwXSwgLy8gLXoKICAgICAgWzQsIDUsIDYsIDddLCAvLyAregogICAgICBbNSwgNCwgMCwgMV0sIC8vIC15CiAgICAgIFsyLCAzLCA3LCA2XSwgLy8gK3kKICAgICAgWzAsIDQsIDcsIDNdLCAvLyAteAogICAgICBbMSwgMiwgNiwgNV0gLy8gK3gKICAgICAgXTsKICAgICAgY29uc3QgYXhlcyA9IFtuZXcgVigwLCAwLCAxKSwgbmV3IFYoMCwgMSwgMCksIG5ldyBWKDEsIDAsIDApXTsKICAgICAgY29uc3QgaCA9IG5ldyBDb252ZXhQb2x5aGVkcm9uKHsKICAgICAgICB2ZXJ0aWNlcywKICAgICAgICBmYWNlcywKICAgICAgICBheGVzCiAgICAgIH0pOwogICAgICB0aGlzLmNvbnZleFBvbHloZWRyb25SZXByZXNlbnRhdGlvbiA9IGg7CiAgICAgIGgubWF0ZXJpYWwgPSB0aGlzLm1hdGVyaWFsOwogICAgfQogICAgLyoqCiAgICAgKiBDYWxjdWxhdGUgdGhlIGluZXJ0aWEgb2YgdGhlIGJveC4KICAgICAqLwoKCiAgICBjYWxjdWxhdGVMb2NhbEluZXJ0aWEobWFzcywgdGFyZ2V0KSB7CiAgICAgIGlmICh0YXJnZXQgPT09IHZvaWQgMCkgewogICAgICAgIHRhcmdldCA9IG5ldyBWZWMzKCk7CiAgICAgIH0KCiAgICAgIEJveC5jYWxjdWxhdGVJbmVydGlhKHRoaXMuaGFsZkV4dGVudHMsIG1hc3MsIHRhcmdldCk7CiAgICAgIHJldHVybiB0YXJnZXQ7CiAgICB9CgogICAgc3RhdGljIGNhbGN1bGF0ZUluZXJ0aWEoaGFsZkV4dGVudHMsIG1hc3MsIHRhcmdldCkgewogICAgICBjb25zdCBlID0gaGFsZkV4dGVudHM7CiAgICAgIHRhcmdldC54ID0gMS4wIC8gMTIuMCAqIG1hc3MgKiAoMiAqIGUueSAqIDIgKiBlLnkgKyAyICogZS56ICogMiAqIGUueik7CiAgICAgIHRhcmdldC55ID0gMS4wIC8gMTIuMCAqIG1hc3MgKiAoMiAqIGUueCAqIDIgKiBlLnggKyAyICogZS56ICogMiAqIGUueik7CiAgICAgIHRhcmdldC56ID0gMS4wIC8gMTIuMCAqIG1hc3MgKiAoMiAqIGUueSAqIDIgKiBlLnkgKyAyICogZS54ICogMiAqIGUueCk7CiAgICB9CiAgICAvKioKICAgICAqIEdldCB0aGUgYm94IDYgc2lkZSBub3JtYWxzCiAgICAgKiBAcGFyYW0gc2l4VGFyZ2V0VmVjdG9ycyBBbiBhcnJheSBvZiA2IHZlY3RvcnMsIHRvIHN0b3JlIHRoZSByZXN1bHRpbmcgc2lkZSBub3JtYWxzIGluLgogICAgICogQHBhcmFtIHF1YXQgT3JpZW50YXRpb24gdG8gYXBwbHkgdG8gdGhlIG5vcm1hbCB2ZWN0b3JzLiBJZiBub3QgcHJvdmlkZWQsIHRoZSB2ZWN0b3JzIHdpbGwgYmUgaW4gcmVzcGVjdCB0byB0aGUgbG9jYWwgZnJhbWUuCiAgICAgKi8KCgogICAgZ2V0U2lkZU5vcm1hbHMoc2l4VGFyZ2V0VmVjdG9ycywgcXVhdCkgewogICAgICBjb25zdCBzaWRlcyA9IHNpeFRhcmdldFZlY3RvcnM7CiAgICAgIGNvbnN0IGV4ID0gdGhpcy5oYWxmRXh0ZW50czsKICAgICAgc2lkZXNbMF0uc2V0KGV4LngsIDAsIDApOwogICAgICBzaWRlc1sxXS5zZXQoMCwgZXgueSwgMCk7CiAgICAgIHNpZGVzWzJdLnNldCgwLCAwLCBleC56KTsKICAgICAgc2lkZXNbM10uc2V0KC1leC54LCAwLCAwKTsKICAgICAgc2lkZXNbNF0uc2V0KDAsIC1leC55LCAwKTsKICAgICAgc2lkZXNbNV0uc2V0KDAsIDAsIC1leC56KTsKCiAgICAgIGlmIChxdWF0ICE9PSB1bmRlZmluZWQpIHsKICAgICAgICBmb3IgKGxldCBpID0gMDsgaSAhPT0gc2lkZXMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgIHF1YXQudm11bHQoc2lkZXNbaV0sIHNpZGVzW2ldKTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIHJldHVybiBzaWRlczsKICAgIH0KICAgIC8qKgogICAgICogUmV0dXJucyB0aGUgdm9sdW1lIG9mIHRoZSBib3guCiAgICAgKi8KCgogICAgdm9sdW1lKCkgewogICAgICByZXR1cm4gOC4wICogdGhpcy5oYWxmRXh0ZW50cy54ICogdGhpcy5oYWxmRXh0ZW50cy55ICogdGhpcy5oYWxmRXh0ZW50cy56OwogICAgfQogICAgLyoqCiAgICAgKiB1cGRhdGVCb3VuZGluZ1NwaGVyZVJhZGl1cwogICAgICovCgoKICAgIHVwZGF0ZUJvdW5kaW5nU3BoZXJlUmFkaXVzKCkgewogICAgICB0aGlzLmJvdW5kaW5nU3BoZXJlUmFkaXVzID0gdGhpcy5oYWxmRXh0ZW50cy5sZW5ndGgoKTsKICAgIH0KICAgIC8qKgogICAgICogZm9yRWFjaFdvcmxkQ29ybmVyCiAgICAgKi8KCgogICAgZm9yRWFjaFdvcmxkQ29ybmVyKHBvcywgcXVhdCwgY2FsbGJhY2spIHsKICAgICAgY29uc3QgZSA9IHRoaXMuaGFsZkV4dGVudHM7CiAgICAgIGNvbnN0IGNvcm5lcnMgPSBbW2UueCwgZS55LCBlLnpdLCBbLWUueCwgZS55LCBlLnpdLCBbLWUueCwgLWUueSwgZS56XSwgWy1lLngsIC1lLnksIC1lLnpdLCBbZS54LCAtZS55LCAtZS56XSwgW2UueCwgZS55LCAtZS56XSwgWy1lLngsIGUueSwgLWUuel0sIFtlLngsIC1lLnksIGUuel1dOwoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjb3JuZXJzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgd29ybGRDb3JuZXJUZW1wUG9zLnNldChjb3JuZXJzW2ldWzBdLCBjb3JuZXJzW2ldWzFdLCBjb3JuZXJzW2ldWzJdKTsKICAgICAgICBxdWF0LnZtdWx0KHdvcmxkQ29ybmVyVGVtcFBvcywgd29ybGRDb3JuZXJUZW1wUG9zKTsKICAgICAgICBwb3MudmFkZCh3b3JsZENvcm5lclRlbXBQb3MsIHdvcmxkQ29ybmVyVGVtcFBvcyk7CiAgICAgICAgY2FsbGJhY2sod29ybGRDb3JuZXJUZW1wUG9zLngsIHdvcmxkQ29ybmVyVGVtcFBvcy55LCB3b3JsZENvcm5lclRlbXBQb3Mueik7CiAgICAgIH0KICAgIH0KICAgIC8qKgogICAgICogY2FsY3VsYXRlV29ybGRBQUJCCiAgICAgKi8KCgogICAgY2FsY3VsYXRlV29ybGRBQUJCKHBvcywgcXVhdCwgbWluLCBtYXgpIHsKICAgICAgY29uc3QgZSA9IHRoaXMuaGFsZkV4dGVudHM7CiAgICAgIHdvcmxkQ29ybmVyc1RlbXBbMF0uc2V0KGUueCwgZS55LCBlLnopOwogICAgICB3b3JsZENvcm5lcnNUZW1wWzFdLnNldCgtZS54LCBlLnksIGUueik7CiAgICAgIHdvcmxkQ29ybmVyc1RlbXBbMl0uc2V0KC1lLngsIC1lLnksIGUueik7CiAgICAgIHdvcmxkQ29ybmVyc1RlbXBbM10uc2V0KC1lLngsIC1lLnksIC1lLnopOwogICAgICB3b3JsZENvcm5lcnNUZW1wWzRdLnNldChlLngsIC1lLnksIC1lLnopOwogICAgICB3b3JsZENvcm5lcnNUZW1wWzVdLnNldChlLngsIGUueSwgLWUueik7CiAgICAgIHdvcmxkQ29ybmVyc1RlbXBbNl0uc2V0KC1lLngsIGUueSwgLWUueik7CiAgICAgIHdvcmxkQ29ybmVyc1RlbXBbN10uc2V0KGUueCwgLWUueSwgZS56KTsKICAgICAgY29uc3Qgd2MgPSB3b3JsZENvcm5lcnNUZW1wWzBdOwogICAgICBxdWF0LnZtdWx0KHdjLCB3Yyk7CiAgICAgIHBvcy52YWRkKHdjLCB3Yyk7CiAgICAgIG1heC5jb3B5KHdjKTsKICAgICAgbWluLmNvcHkod2MpOwoKICAgICAgZm9yIChsZXQgaSA9IDE7IGkgPCA4OyBpKyspIHsKICAgICAgICBjb25zdCB3YyA9IHdvcmxkQ29ybmVyc1RlbXBbaV07CiAgICAgICAgcXVhdC52bXVsdCh3Yywgd2MpOwogICAgICAgIHBvcy52YWRkKHdjLCB3Yyk7CiAgICAgICAgY29uc3QgeCA9IHdjLng7CiAgICAgICAgY29uc3QgeSA9IHdjLnk7CiAgICAgICAgY29uc3QgeiA9IHdjLno7CgogICAgICAgIGlmICh4ID4gbWF4LngpIHsKICAgICAgICAgIG1heC54ID0geDsKICAgICAgICB9CgogICAgICAgIGlmICh5ID4gbWF4LnkpIHsKICAgICAgICAgIG1heC55ID0geTsKICAgICAgICB9CgogICAgICAgIGlmICh6ID4gbWF4LnopIHsKICAgICAgICAgIG1heC56ID0gejsKICAgICAgICB9CgogICAgICAgIGlmICh4IDwgbWluLngpIHsKICAgICAgICAgIG1pbi54ID0geDsKICAgICAgICB9CgogICAgICAgIGlmICh5IDwgbWluLnkpIHsKICAgICAgICAgIG1pbi55ID0geTsKICAgICAgICB9CgogICAgICAgIGlmICh6IDwgbWluLnopIHsKICAgICAgICAgIG1pbi56ID0gejsKICAgICAgICB9CiAgICAgIH0gLy8gR2V0IGVhY2ggYXhpcyBtYXgKICAgICAgLy8gbWluLnNldChJbmZpbml0eSxJbmZpbml0eSxJbmZpbml0eSk7CiAgICAgIC8vIG1heC5zZXQoLUluZmluaXR5LC1JbmZpbml0eSwtSW5maW5pdHkpOwogICAgICAvLyB0aGlzLmZvckVhY2hXb3JsZENvcm5lcihwb3MscXVhdCxmdW5jdGlvbih4LHkseil7CiAgICAgIC8vICAgICBpZih4ID4gbWF4LngpewogICAgICAvLyAgICAgICAgIG1heC54ID0geDsKICAgICAgLy8gICAgIH0KICAgICAgLy8gICAgIGlmKHkgPiBtYXgueSl7CiAgICAgIC8vICAgICAgICAgbWF4LnkgPSB5OwogICAgICAvLyAgICAgfQogICAgICAvLyAgICAgaWYoeiA+IG1heC56KXsKICAgICAgLy8gICAgICAgICBtYXgueiA9IHo7CiAgICAgIC8vICAgICB9CiAgICAgIC8vICAgICBpZih4IDwgbWluLngpewogICAgICAvLyAgICAgICAgIG1pbi54ID0geDsKICAgICAgLy8gICAgIH0KICAgICAgLy8gICAgIGlmKHkgPCBtaW4ueSl7CiAgICAgIC8vICAgICAgICAgbWluLnkgPSB5OwogICAgICAvLyAgICAgfQogICAgICAvLyAgICAgaWYoeiA8IG1pbi56KXsKICAgICAgLy8gICAgICAgICBtaW4ueiA9IHo7CiAgICAgIC8vICAgICB9CiAgICAgIC8vIH0pOwoKICAgIH0KCiAgfQoKICBjb25zdCB3b3JsZENvcm5lclRlbXBQb3MgPSBuZXcgVmVjMygpOwogIGNvbnN0IHdvcmxkQ29ybmVyc1RlbXAgPSBbbmV3IFZlYzMoKSwgbmV3IFZlYzMoKSwgbmV3IFZlYzMoKSwgbmV3IFZlYzMoKSwgbmV3IFZlYzMoKSwgbmV3IFZlYzMoKSwgbmV3IFZlYzMoKSwgbmV3IFZlYzMoKV07CiAgLyoqCiAgICogQk9EWV9UWVBFUwogICAqLwoKICBjb25zdCBCT0RZX1RZUEVTID0gewogICAgLyoqIERZTkFNSUMgKi8KICAgIERZTkFNSUM6IDEsCgogICAgLyoqIFNUQVRJQyAqLwogICAgU1RBVElDOiAyLAoKICAgIC8qKiBLSU5FTUFUSUMgKi8KICAgIEtJTkVNQVRJQzogNAogIH07CiAgLyoqCiAgICogQm9keVR5cGUKICAgKi8KCiAgLyoqCiAgICogQk9EWV9TTEVFUF9TVEFURVMKICAgKi8KCiAgY29uc3QgQk9EWV9TTEVFUF9TVEFURVMgPSB7CiAgICAvKiogQVdBS0UgKi8KICAgIEFXQUtFOiAwLAoKICAgIC8qKiBTTEVFUFkgKi8KICAgIFNMRUVQWTogMSwKCiAgICAvKiogU0xFRVBJTkcgKi8KICAgIFNMRUVQSU5HOiAyCiAgfTsKICAvKioKICAgKiBCb2R5U2xlZXBTdGF0ZQogICAqLwoKICAvKioKICAgKiBCYXNlIGNsYXNzIGZvciBhbGwgYm9keSB0eXBlcy4KICAgKiBAZXhhbXBsZQogICAqICAgICBjb25zdCBzaGFwZSA9IG5ldyBDQU5OT04uU3BoZXJlKDEpCiAgICogICAgIGNvbnN0IGJvZHkgPSBuZXcgQ0FOTk9OLkJvZHkoewogICAqICAgICAgIG1hc3M6IDEsCiAgICogICAgICAgc2hhcGUsCiAgICogICAgIH0pCiAgICogICAgIHdvcmxkLmFkZEJvZHkoYm9keSkKICAgKi8KCiAgY2xhc3MgQm9keSBleHRlbmRzIEV2ZW50VGFyZ2V0IHsKICAgIC8qKgogICAgICogRGlzcGF0Y2hlZCBhZnRlciB0d28gYm9kaWVzIGNvbGxpZGUuIFRoaXMgZXZlbnQgaXMgZGlzcGF0Y2hlZCBvbiBlYWNoCiAgICAgKiBvZiB0aGUgdHdvIGJvZGllcyBpbnZvbHZlZCBpbiB0aGUgY29sbGlzaW9uLgogICAgICogQGV2ZW50IGNvbGxpZGUKICAgICAqIEBwYXJhbSBib2R5IFRoZSBib2R5IHRoYXQgd2FzIGludm9sdmVkIGluIHRoZSBjb2xsaXNpb24uCiAgICAgKiBAcGFyYW0gY29udGFjdCBUaGUgZGV0YWlscyBvZiB0aGUgY29sbGlzaW9uLgogICAgICovCgogICAgLyoqCiAgICAgKiBBIGR5bmFtaWMgYm9keSBpcyBmdWxseSBzaW11bGF0ZWQuIENhbiBiZSBtb3ZlZCBtYW51YWxseSBieSB0aGUgdXNlciwgYnV0IG5vcm1hbGx5IHRoZXkgbW92ZSBhY2NvcmRpbmcgdG8gZm9yY2VzLiBBIGR5bmFtaWMgYm9keSBjYW4gY29sbGlkZSB3aXRoIGFsbCBib2R5IHR5cGVzLiBBIGR5bmFtaWMgYm9keSBhbHdheXMgaGFzIGZpbml0ZSwgbm9uLXplcm8gbWFzcy4KICAgICAqLwoKICAgIC8qKgogICAgICogQSBzdGF0aWMgYm9keSBkb2VzIG5vdCBtb3ZlIGR1cmluZyBzaW11bGF0aW9uIGFuZCBiZWhhdmVzIGFzIGlmIGl0IGhhcyBpbmZpbml0ZSBtYXNzLiBTdGF0aWMgYm9kaWVzIGNhbiBiZSBtb3ZlZCBtYW51YWxseSBieSBzZXR0aW5nIHRoZSBwb3NpdGlvbiBvZiB0aGUgYm9keS4gVGhlIHZlbG9jaXR5IG9mIGEgc3RhdGljIGJvZHkgaXMgYWx3YXlzIHplcm8uIFN0YXRpYyBib2RpZXMgZG8gbm90IGNvbGxpZGUgd2l0aCBvdGhlciBzdGF0aWMgb3Iga2luZW1hdGljIGJvZGllcy4KICAgICAqLwoKICAgIC8qKgogICAgICogQSBraW5lbWF0aWMgYm9keSBtb3ZlcyB1bmRlciBzaW11bGF0aW9uIGFjY29yZGluZyB0byBpdHMgdmVsb2NpdHkuIFRoZXkgZG8gbm90IHJlc3BvbmQgdG8gZm9yY2VzLiBUaGV5IGNhbiBiZSBtb3ZlZCBtYW51YWxseSwgYnV0IG5vcm1hbGx5IGEga2luZW1hdGljIGJvZHkgaXMgbW92ZWQgYnkgc2V0dGluZyBpdHMgdmVsb2NpdHkuIEEga2luZW1hdGljIGJvZHkgYmVoYXZlcyBhcyBpZiBpdCBoYXMgaW5maW5pdGUgbWFzcy4gS2luZW1hdGljIGJvZGllcyBkbyBub3QgY29sbGlkZSB3aXRoIG90aGVyIHN0YXRpYyBvciBraW5lbWF0aWMgYm9kaWVzLgogICAgICovCgogICAgLyoqCiAgICAgKiBBV0FLRQogICAgICovCgogICAgLyoqCiAgICAgKiBTTEVFUFkKICAgICAqLwoKICAgIC8qKgogICAgICogU0xFRVBJTkcKICAgICAqLwoKICAgIC8qKgogICAgICogRGlzcGF0Y2hlZCBhZnRlciBhIHNsZWVwaW5nIGJvZHkgaGFzIHdva2VuIHVwLgogICAgICogQGV2ZW50IHdha2V1cAogICAgICovCgogICAgLyoqCiAgICAgKiBEaXNwYXRjaGVkIGFmdGVyIGEgYm9keSBoYXMgZ29uZSBpbiB0byB0aGUgc2xlZXB5IHN0YXRlLgogICAgICogQGV2ZW50IHNsZWVweQogICAgICovCgogICAgLyoqCiAgICAgKiBEaXNwYXRjaGVkIGFmdGVyIGEgYm9keSBoYXMgZmFsbGVuIGFzbGVlcC4KICAgICAqIEBldmVudCBzbGVlcAogICAgICovCgogICAgLyoqCiAgICAgKiBJZGVudGlmaWVyIG9mIHRoZSBib2R5LgogICAgICovCgogICAgLyoqCiAgICAgKiBQb3NpdGlvbiBvZiBib2R5IGluIFdvcmxkLmJvZGllcy4gVXBkYXRlZCBieSBXb3JsZCBhbmQgdXNlZCBpbiBBcnJheUNvbGxpc2lvbk1hdHJpeC4KICAgICAqLwoKICAgIC8qKgogICAgICogUmVmZXJlbmNlIHRvIHRoZSB3b3JsZCB0aGUgYm9keSBpcyBsaXZpbmcgaW4uCiAgICAgKi8KCiAgICAvKioKICAgICAqIENhbGxiYWNrIGZ1bmN0aW9uIHRoYXQgaXMgdXNlZCBCRUZPUkUgc3RlcHBpbmcgdGhlIHN5c3RlbS4gVXNlIGl0IHRvIGFwcGx5IGZvcmNlcywgZm9yIGV4YW1wbGUuIEluc2lkZSB0aGUgZnVuY3Rpb24sICJ0aGlzIiB3aWxsIHJlZmVyIHRvIHRoaXMgQm9keSBvYmplY3QuIERlcHJlY2F0ZWQgLSB1c2UgV29ybGQgZXZlbnRzIGluc3RlYWQuCiAgICAgKiBAZGVwcmVjYXRlZCBVc2UgV29ybGQgZXZlbnRzIGluc3RlYWQKICAgICAqLwoKICAgIC8qKgogICAgICogQ2FsbGJhY2sgZnVuY3Rpb24gdGhhdCBpcyB1c2VkIEFGVEVSIHN0ZXBwaW5nIHRoZSBzeXN0ZW0uIEluc2lkZSB0aGUgZnVuY3Rpb24sICJ0aGlzIiB3aWxsIHJlZmVyIHRvIHRoaXMgQm9keSBvYmplY3QuIERlcHJlY2F0ZWQgLSB1c2UgV29ybGQgZXZlbnRzIGluc3RlYWQuCiAgICAgKiBAZGVwcmVjYXRlZCBVc2UgV29ybGQgZXZlbnRzIGluc3RlYWQKICAgICAqLwoKICAgIC8qKgogICAgICogVGhlIGNvbGxpc2lvbiBncm91cCB0aGUgYm9keSBiZWxvbmdzIHRvLgogICAgICogQGRlZmF1bHQgMQogICAgICovCgogICAgLyoqCiAgICAgKiBUaGUgY29sbGlzaW9uIGdyb3VwIHRoZSBib2R5IGNhbiBjb2xsaWRlIHdpdGguCiAgICAgKiBAZGVmYXVsdCAtMQogICAgICovCgogICAgLyoqCiAgICAgKiBXaGV0aGVyIHRvIHByb2R1Y2UgY29udGFjdCBmb3JjZXMgd2hlbiBpbiBjb250YWN0IHdpdGggb3RoZXIgYm9kaWVzLiBOb3RlIHRoYXQgY29udGFjdHMgd2lsbCBiZSBnZW5lcmF0ZWQsIGJ1dCB0aGV5IHdpbGwgYmUgZGlzYWJsZWQgLSBpLmUuICJjb2xsaWRlIiBldmVudHMgd2lsbCBiZSByYWlzZWQsIGJ1dCBmb3JjZXMgd2lsbCBub3QgYmUgYWx0ZXJlZC4KICAgICAqLwoKICAgIC8qKgogICAgICogV29ybGQgc3BhY2UgcG9zaXRpb24gb2YgdGhlIGJvZHkuCiAgICAgKi8KCiAgICAvKioKICAgICAqIEludGVycG9sYXRlZCBwb3NpdGlvbiBvZiB0aGUgYm9keS4KICAgICAqLwoKICAgIC8qKgogICAgICogSW5pdGlhbCBwb3NpdGlvbiBvZiB0aGUgYm9keS4KICAgICAqLwoKICAgIC8qKgogICAgICogV29ybGQgc3BhY2UgdmVsb2NpdHkgb2YgdGhlIGJvZHkuCiAgICAgKi8KCiAgICAvKioKICAgICAqIEluaXRpYWwgdmVsb2NpdHkgb2YgdGhlIGJvZHkuCiAgICAgKi8KCiAgICAvKioKICAgICAqIExpbmVhciBmb3JjZSBvbiB0aGUgYm9keSBpbiB3b3JsZCBzcGFjZS4KICAgICAqLwoKICAgIC8qKgogICAgICogVGhlIG1hc3Mgb2YgdGhlIGJvZHkuCiAgICAgKiBAZGVmYXVsdCAwCiAgICAgKi8KCiAgICAvKioKICAgICAqIFRoZSBwaHlzaWNzIG1hdGVyaWFsIG9mIHRoZSBib2R5LiBJdCBkZWZpbmVzIHRoZSBib2R5IGludGVyYWN0aW9uIHdpdGggb3RoZXIgYm9kaWVzLgogICAgICovCgogICAgLyoqCiAgICAgKiBIb3cgbXVjaCB0byBkYW1wIHRoZSBib2R5IHZlbG9jaXR5IGVhY2ggc3RlcC4gSXQgY2FuIGdvIGZyb20gMCB0byAxLgogICAgICogQGRlZmF1bHQgMC4wMQogICAgICovCgogICAgLyoqCiAgICAgKiBPbmUgb2Y6IGBCb2R5LkRZTkFNSUNgLCBgQm9keS5TVEFUSUNgIGFuZCBgQm9keS5LSU5FTUFUSUNgLgogICAgICovCgogICAgLyoqCiAgICAgKiBJZiB0cnVlLCB0aGUgYm9keSB3aWxsIGF1dG9tYXRpY2FsbHkgZmFsbCB0byBzbGVlcC4KICAgICAqIEBkZWZhdWx0IHRydWUKICAgICAqLwoKICAgIC8qKgogICAgICogQ3VycmVudCBzbGVlcCBzdGF0ZS4KICAgICAqLwoKICAgIC8qKgogICAgICogSWYgdGhlIHNwZWVkICh0aGUgbm9ybSBvZiB0aGUgdmVsb2NpdHkpIGlzIHNtYWxsZXIgdGhhbiB0aGlzIHZhbHVlLCB0aGUgYm9keSBpcyBjb25zaWRlcmVkIHNsZWVweS4KICAgICAqIEBkZWZhdWx0IDAuMQogICAgICovCgogICAgLyoqCiAgICAgKiBJZiB0aGUgYm9keSBoYXMgYmVlbiBzbGVlcHkgZm9yIHRoaXMgc2xlZXBUaW1lTGltaXQgc2Vjb25kcywgaXQgaXMgY29uc2lkZXJlZCBzbGVlcGluZy4KICAgICAqIEBkZWZhdWx0IDEKICAgICAqLwoKICAgIC8qKgogICAgICogV29ybGQgc3BhY2Ugcm90YXRpb25hbCBmb3JjZSBvbiB0aGUgYm9keSwgYXJvdW5kIGNlbnRlciBvZiBtYXNzLgogICAgICovCgogICAgLyoqCiAgICAgKiBXb3JsZCBzcGFjZSBvcmllbnRhdGlvbiBvZiB0aGUgYm9keS4KICAgICAqLwoKICAgIC8qKgogICAgICogSW5pdGlhbCBxdWF0ZXJuaW9uIG9mIHRoZSBib2R5LgogICAgICovCgogICAgLyoqCiAgICAgKiBJbnRlcnBvbGF0ZWQgb3JpZW50YXRpb24gb2YgdGhlIGJvZHkuCiAgICAgKi8KCiAgICAvKioKICAgICAqIEFuZ3VsYXIgdmVsb2NpdHkgb2YgdGhlIGJvZHksIGluIHdvcmxkIHNwYWNlLiBUaGluayBvZiB0aGUgYW5ndWxhciB2ZWxvY2l0eSBhcyBhIHZlY3Rvciwgd2hpY2ggdGhlIGJvZHkgcm90YXRlcyBhcm91bmQuIFRoZSBsZW5ndGggb2YgdGhpcyB2ZWN0b3IgZGV0ZXJtaW5lcyBob3cgZmFzdCAoaW4gcmFkaWFucyBwZXIgc2Vjb25kKSB0aGUgYm9keSByb3RhdGVzLgogICAgICovCgogICAgLyoqCiAgICAgKiBJbml0aWFsIGFuZ3VsYXIgdmVsb2NpdHkgb2YgdGhlIGJvZHkuCiAgICAgKi8KCiAgICAvKioKICAgICAqIExpc3Qgb2YgU2hhcGVzIHRoYXQgaGF2ZSBiZWVuIGFkZGVkIHRvIHRoZSBib2R5LgogICAgICovCgogICAgLyoqCiAgICAgKiBQb3NpdGlvbiBvZiBlYWNoIFNoYXBlIGluIHRoZSBib2R5LCBnaXZlbiBpbiBsb2NhbCBCb2R5IHNwYWNlLgogICAgICovCgogICAgLyoqCiAgICAgKiBPcmllbnRhdGlvbiBvZiBlYWNoIFNoYXBlLCBnaXZlbiBpbiBsb2NhbCBCb2R5IHNwYWNlLgogICAgICovCgogICAgLyoqCiAgICAgKiBUaGUgaW5lcnRpYSBvZiB0aGUgYm9keS4KICAgICAqLwoKICAgIC8qKgogICAgICogU2V0IHRvIHRydWUgaWYgeW91IGRvbid0IHdhbnQgdGhlIGJvZHkgdG8gcm90YXRlLiBNYWtlIHN1cmUgdG8gcnVuIC51cGRhdGVNYXNzUHJvcGVydGllcygpIGlmIHlvdSBjaGFuZ2UgdGhpcyBhZnRlciB0aGUgYm9keSBjcmVhdGlvbi4KICAgICAqIEBkZWZhdWx0IGZhbHNlCiAgICAgKi8KCiAgICAvKioKICAgICAqIEhvdyBtdWNoIHRvIGRhbXAgdGhlIGJvZHkgYW5ndWxhciB2ZWxvY2l0eSBlYWNoIHN0ZXAuIEl0IGNhbiBnbyBmcm9tIDAgdG8gMS4KICAgICAqIEBkZWZhdWx0IDAuMDEKICAgICAqLwoKICAgIC8qKgogICAgICogVXNlIHRoaXMgcHJvcGVydHkgdG8gbGltaXQgdGhlIG1vdGlvbiBhbG9uZyBhbnkgd29ybGQgYXhpcy4gKDEsMSwxKSB3aWxsIGFsbG93IG1vdGlvbiBhbG9uZyBhbGwgYXhlcyB3aGlsZSAoMCwwLDApIGFsbG93cyBub25lLgogICAgICovCgogICAgLyoqCiAgICAgKiBVc2UgdGhpcyBwcm9wZXJ0eSB0byBsaW1pdCB0aGUgcm90YXRpb25hbCBtb3Rpb24gYWxvbmcgYW55IHdvcmxkIGF4aXMuICgxLDEsMSkgd2lsbCBhbGxvdyByb3RhdGlvbiBhbG9uZyBhbGwgYXhlcyB3aGlsZSAoMCwwLDApIGFsbG93cyBub25lLgogICAgICovCgogICAgLyoqCiAgICAgKiBXb3JsZCBzcGFjZSBib3VuZGluZyBib3ggb2YgdGhlIGJvZHkgYW5kIGl0cyBzaGFwZXMuCiAgICAgKi8KCiAgICAvKioKICAgICAqIEluZGljYXRlcyBpZiB0aGUgQUFCQiBuZWVkcyB0byBiZSB1cGRhdGVkIGJlZm9yZSB1c2UuCiAgICAgKi8KCiAgICAvKioKICAgICAqIFRvdGFsIGJvdW5kaW5nIHJhZGl1cyBvZiB0aGUgQm9keSBpbmNsdWRpbmcgaXRzIHNoYXBlcywgcmVsYXRpdmUgdG8gYm9keS5wb3NpdGlvbi4KICAgICAqLwoKICAgIC8qKgogICAgICogV2hlbiB0cnVlIHRoZSBib2R5IGJlaGF2ZXMgbGlrZSBhIHRyaWdnZXIuIEl0IGRvZXMgbm90IGNvbGxpZGUKICAgICAqIHdpdGggb3RoZXIgYm9kaWVzIGJ1dCBjb2xsaXNpb24gZXZlbnRzIGFyZSBzdGlsbCB0cmlnZ2VyZWQuCiAgICAgKiBAZGVmYXVsdCBmYWxzZQogICAgICovCiAgICBjb25zdHJ1Y3RvcihvcHRpb25zKSB7CiAgICAgIGlmIChvcHRpb25zID09PSB2b2lkIDApIHsKICAgICAgICBvcHRpb25zID0ge307CiAgICAgIH0KCiAgICAgIHN1cGVyKCk7CiAgICAgIHRoaXMuaWQgPSB2b2lkIDA7CiAgICAgIHRoaXMuaW5kZXggPSB2b2lkIDA7CiAgICAgIHRoaXMud29ybGQgPSB2b2lkIDA7CiAgICAgIHRoaXMucHJlU3RlcCA9IHZvaWQgMDsKICAgICAgdGhpcy5wb3N0U3RlcCA9IHZvaWQgMDsKICAgICAgdGhpcy52bGFtYmRhID0gdm9pZCAwOwogICAgICB0aGlzLmNvbGxpc2lvbkZpbHRlckdyb3VwID0gdm9pZCAwOwogICAgICB0aGlzLmNvbGxpc2lvbkZpbHRlck1hc2sgPSB2b2lkIDA7CiAgICAgIHRoaXMuY29sbGlzaW9uUmVzcG9uc2UgPSB2b2lkIDA7CiAgICAgIHRoaXMucG9zaXRpb24gPSB2b2lkIDA7CiAgICAgIHRoaXMucHJldmlvdXNQb3NpdGlvbiA9IHZvaWQgMDsKICAgICAgdGhpcy5pbnRlcnBvbGF0ZWRQb3NpdGlvbiA9IHZvaWQgMDsKICAgICAgdGhpcy5pbml0UG9zaXRpb24gPSB2b2lkIDA7CiAgICAgIHRoaXMudmVsb2NpdHkgPSB2b2lkIDA7CiAgICAgIHRoaXMuaW5pdFZlbG9jaXR5ID0gdm9pZCAwOwogICAgICB0aGlzLmZvcmNlID0gdm9pZCAwOwogICAgICB0aGlzLm1hc3MgPSB2b2lkIDA7CiAgICAgIHRoaXMuaW52TWFzcyA9IHZvaWQgMDsKICAgICAgdGhpcy5tYXRlcmlhbCA9IHZvaWQgMDsKICAgICAgdGhpcy5saW5lYXJEYW1waW5nID0gdm9pZCAwOwogICAgICB0aGlzLnR5cGUgPSB2b2lkIDA7CiAgICAgIHRoaXMuYWxsb3dTbGVlcCA9IHZvaWQgMDsKICAgICAgdGhpcy5zbGVlcFN0YXRlID0gdm9pZCAwOwogICAgICB0aGlzLnNsZWVwU3BlZWRMaW1pdCA9IHZvaWQgMDsKICAgICAgdGhpcy5zbGVlcFRpbWVMaW1pdCA9IHZvaWQgMDsKICAgICAgdGhpcy50aW1lTGFzdFNsZWVweSA9IHZvaWQgMDsKICAgICAgdGhpcy53YWtlVXBBZnRlck5hcnJvd3BoYXNlID0gdm9pZCAwOwogICAgICB0aGlzLnRvcnF1ZSA9IHZvaWQgMDsKICAgICAgdGhpcy5xdWF0ZXJuaW9uID0gdm9pZCAwOwogICAgICB0aGlzLmluaXRRdWF0ZXJuaW9uID0gdm9pZCAwOwogICAgICB0aGlzLnByZXZpb3VzUXVhdGVybmlvbiA9IHZvaWQgMDsKICAgICAgdGhpcy5pbnRlcnBvbGF0ZWRRdWF0ZXJuaW9uID0gdm9pZCAwOwogICAgICB0aGlzLmFuZ3VsYXJWZWxvY2l0eSA9IHZvaWQgMDsKICAgICAgdGhpcy5pbml0QW5ndWxhclZlbG9jaXR5ID0gdm9pZCAwOwogICAgICB0aGlzLnNoYXBlcyA9IHZvaWQgMDsKICAgICAgdGhpcy5zaGFwZU9mZnNldHMgPSB2b2lkIDA7CiAgICAgIHRoaXMuc2hhcGVPcmllbnRhdGlvbnMgPSB2b2lkIDA7CiAgICAgIHRoaXMuaW5lcnRpYSA9IHZvaWQgMDsKICAgICAgdGhpcy5pbnZJbmVydGlhID0gdm9pZCAwOwogICAgICB0aGlzLmludkluZXJ0aWFXb3JsZCA9IHZvaWQgMDsKICAgICAgdGhpcy5pbnZNYXNzU29sdmUgPSB2b2lkIDA7CiAgICAgIHRoaXMuaW52SW5lcnRpYVNvbHZlID0gdm9pZCAwOwogICAgICB0aGlzLmludkluZXJ0aWFXb3JsZFNvbHZlID0gdm9pZCAwOwogICAgICB0aGlzLmZpeGVkUm90YXRpb24gPSB2b2lkIDA7CiAgICAgIHRoaXMuYW5ndWxhckRhbXBpbmcgPSB2b2lkIDA7CiAgICAgIHRoaXMubGluZWFyRmFjdG9yID0gdm9pZCAwOwogICAgICB0aGlzLmFuZ3VsYXJGYWN0b3IgPSB2b2lkIDA7CiAgICAgIHRoaXMuYWFiYiA9IHZvaWQgMDsKICAgICAgdGhpcy5hYWJiTmVlZHNVcGRhdGUgPSB2b2lkIDA7CiAgICAgIHRoaXMuYm91bmRpbmdSYWRpdXMgPSB2b2lkIDA7CiAgICAgIHRoaXMud2xhbWJkYSA9IHZvaWQgMDsKICAgICAgdGhpcy5pc1RyaWdnZXIgPSB2b2lkIDA7CiAgICAgIHRoaXMuaWQgPSBCb2R5LmlkQ291bnRlcisrOwogICAgICB0aGlzLmluZGV4ID0gLTE7CiAgICAgIHRoaXMud29ybGQgPSBudWxsOwogICAgICB0aGlzLnByZVN0ZXAgPSBudWxsOwogICAgICB0aGlzLnBvc3RTdGVwID0gbnVsbDsKICAgICAgdGhpcy52bGFtYmRhID0gbmV3IFZlYzMoKTsKICAgICAgdGhpcy5jb2xsaXNpb25GaWx0ZXJHcm91cCA9IHR5cGVvZiBvcHRpb25zLmNvbGxpc2lvbkZpbHRlckdyb3VwID09PSAnbnVtYmVyJyA/IG9wdGlvbnMuY29sbGlzaW9uRmlsdGVyR3JvdXAgOiAxOwogICAgICB0aGlzLmNvbGxpc2lvbkZpbHRlck1hc2sgPSB0eXBlb2Ygb3B0aW9ucy5jb2xsaXNpb25GaWx0ZXJNYXNrID09PSAnbnVtYmVyJyA/IG9wdGlvbnMuY29sbGlzaW9uRmlsdGVyTWFzayA6IC0xOwogICAgICB0aGlzLmNvbGxpc2lvblJlc3BvbnNlID0gdHlwZW9mIG9wdGlvbnMuY29sbGlzaW9uUmVzcG9uc2UgPT09ICdib29sZWFuJyA/IG9wdGlvbnMuY29sbGlzaW9uUmVzcG9uc2UgOiB0cnVlOwogICAgICB0aGlzLnBvc2l0aW9uID0gbmV3IFZlYzMoKTsKICAgICAgdGhpcy5wcmV2aW91c1Bvc2l0aW9uID0gbmV3IFZlYzMoKTsKICAgICAgdGhpcy5pbnRlcnBvbGF0ZWRQb3NpdGlvbiA9IG5ldyBWZWMzKCk7CiAgICAgIHRoaXMuaW5pdFBvc2l0aW9uID0gbmV3IFZlYzMoKTsKCiAgICAgIGlmIChvcHRpb25zLnBvc2l0aW9uKSB7CiAgICAgICAgdGhpcy5wb3NpdGlvbi5jb3B5KG9wdGlvbnMucG9zaXRpb24pOwogICAgICAgIHRoaXMucHJldmlvdXNQb3NpdGlvbi5jb3B5KG9wdGlvbnMucG9zaXRpb24pOwogICAgICAgIHRoaXMuaW50ZXJwb2xhdGVkUG9zaXRpb24uY29weShvcHRpb25zLnBvc2l0aW9uKTsKICAgICAgICB0aGlzLmluaXRQb3NpdGlvbi5jb3B5KG9wdGlvbnMucG9zaXRpb24pOwogICAgICB9CgogICAgICB0aGlzLnZlbG9jaXR5ID0gbmV3IFZlYzMoKTsKCiAgICAgIGlmIChvcHRpb25zLnZlbG9jaXR5KSB7CiAgICAgICAgdGhpcy52ZWxvY2l0eS5jb3B5KG9wdGlvbnMudmVsb2NpdHkpOwogICAgICB9CgogICAgICB0aGlzLmluaXRWZWxvY2l0eSA9IG5ldyBWZWMzKCk7CiAgICAgIHRoaXMuZm9yY2UgPSBuZXcgVmVjMygpOwogICAgICBjb25zdCBtYXNzID0gdHlwZW9mIG9wdGlvbnMubWFzcyA9PT0gJ251bWJlcicgPyBvcHRpb25zLm1hc3MgOiAwOwogICAgICB0aGlzLm1hc3MgPSBtYXNzOwogICAgICB0aGlzLmludk1hc3MgPSBtYXNzID4gMCA/IDEuMCAvIG1hc3MgOiAwOwogICAgICB0aGlzLm1hdGVyaWFsID0gb3B0aW9ucy5tYXRlcmlhbCB8fCBudWxsOwogICAgICB0aGlzLmxpbmVhckRhbXBpbmcgPSB0eXBlb2Ygb3B0aW9ucy5saW5lYXJEYW1waW5nID09PSAnbnVtYmVyJyA/IG9wdGlvbnMubGluZWFyRGFtcGluZyA6IDAuMDE7CiAgICAgIHRoaXMudHlwZSA9IG1hc3MgPD0gMC4wID8gQm9keS5TVEFUSUMgOiBCb2R5LkRZTkFNSUM7CgogICAgICBpZiAodHlwZW9mIG9wdGlvbnMudHlwZSA9PT0gdHlwZW9mIEJvZHkuU1RBVElDKSB7CiAgICAgICAgdGhpcy50eXBlID0gb3B0aW9ucy50eXBlOwogICAgICB9CgogICAgICB0aGlzLmFsbG93U2xlZXAgPSB0eXBlb2Ygb3B0aW9ucy5hbGxvd1NsZWVwICE9PSAndW5kZWZpbmVkJyA/IG9wdGlvbnMuYWxsb3dTbGVlcCA6IHRydWU7CiAgICAgIHRoaXMuc2xlZXBTdGF0ZSA9IEJvZHkuQVdBS0U7CiAgICAgIHRoaXMuc2xlZXBTcGVlZExpbWl0ID0gdHlwZW9mIG9wdGlvbnMuc2xlZXBTcGVlZExpbWl0ICE9PSAndW5kZWZpbmVkJyA/IG9wdGlvbnMuc2xlZXBTcGVlZExpbWl0IDogMC4xOwogICAgICB0aGlzLnNsZWVwVGltZUxpbWl0ID0gdHlwZW9mIG9wdGlvbnMuc2xlZXBUaW1lTGltaXQgIT09ICd1bmRlZmluZWQnID8gb3B0aW9ucy5zbGVlcFRpbWVMaW1pdCA6IDE7CiAgICAgIHRoaXMudGltZUxhc3RTbGVlcHkgPSAwOwogICAgICB0aGlzLndha2VVcEFmdGVyTmFycm93cGhhc2UgPSBmYWxzZTsKICAgICAgdGhpcy50b3JxdWUgPSBuZXcgVmVjMygpOwogICAgICB0aGlzLnF1YXRlcm5pb24gPSBuZXcgUXVhdGVybmlvbigpOwogICAgICB0aGlzLmluaXRRdWF0ZXJuaW9uID0gbmV3IFF1YXRlcm5pb24oKTsKICAgICAgdGhpcy5wcmV2aW91c1F1YXRlcm5pb24gPSBuZXcgUXVhdGVybmlvbigpOwogICAgICB0aGlzLmludGVycG9sYXRlZFF1YXRlcm5pb24gPSBuZXcgUXVhdGVybmlvbigpOwoKICAgICAgaWYgKG9wdGlvbnMucXVhdGVybmlvbikgewogICAgICAgIHRoaXMucXVhdGVybmlvbi5jb3B5KG9wdGlvbnMucXVhdGVybmlvbik7CiAgICAgICAgdGhpcy5pbml0UXVhdGVybmlvbi5jb3B5KG9wdGlvbnMucXVhdGVybmlvbik7CiAgICAgICAgdGhpcy5wcmV2aW91c1F1YXRlcm5pb24uY29weShvcHRpb25zLnF1YXRlcm5pb24pOwogICAgICAgIHRoaXMuaW50ZXJwb2xhdGVkUXVhdGVybmlvbi5jb3B5KG9wdGlvbnMucXVhdGVybmlvbik7CiAgICAgIH0KCiAgICAgIHRoaXMuYW5ndWxhclZlbG9jaXR5ID0gbmV3IFZlYzMoKTsKCiAgICAgIGlmIChvcHRpb25zLmFuZ3VsYXJWZWxvY2l0eSkgewogICAgICAgIHRoaXMuYW5ndWxhclZlbG9jaXR5LmNvcHkob3B0aW9ucy5hbmd1bGFyVmVsb2NpdHkpOwogICAgICB9CgogICAgICB0aGlzLmluaXRBbmd1bGFyVmVsb2NpdHkgPSBuZXcgVmVjMygpOwogICAgICB0aGlzLnNoYXBlcyA9IFtdOwogICAgICB0aGlzLnNoYXBlT2Zmc2V0cyA9IFtdOwogICAgICB0aGlzLnNoYXBlT3JpZW50YXRpb25zID0gW107CiAgICAgIHRoaXMuaW5lcnRpYSA9IG5ldyBWZWMzKCk7CiAgICAgIHRoaXMuaW52SW5lcnRpYSA9IG5ldyBWZWMzKCk7CiAgICAgIHRoaXMuaW52SW5lcnRpYVdvcmxkID0gbmV3IE1hdDMoKTsKICAgICAgdGhpcy5pbnZNYXNzU29sdmUgPSAwOwogICAgICB0aGlzLmludkluZXJ0aWFTb2x2ZSA9IG5ldyBWZWMzKCk7CiAgICAgIHRoaXMuaW52SW5lcnRpYVdvcmxkU29sdmUgPSBuZXcgTWF0MygpOwogICAgICB0aGlzLmZpeGVkUm90YXRpb24gPSB0eXBlb2Ygb3B0aW9ucy5maXhlZFJvdGF0aW9uICE9PSAndW5kZWZpbmVkJyA/IG9wdGlvbnMuZml4ZWRSb3RhdGlvbiA6IGZhbHNlOwogICAgICB0aGlzLmFuZ3VsYXJEYW1waW5nID0gdHlwZW9mIG9wdGlvbnMuYW5ndWxhckRhbXBpbmcgIT09ICd1bmRlZmluZWQnID8gb3B0aW9ucy5hbmd1bGFyRGFtcGluZyA6IDAuMDE7CiAgICAgIHRoaXMubGluZWFyRmFjdG9yID0gbmV3IFZlYzMoMSwgMSwgMSk7CgogICAgICBpZiAob3B0aW9ucy5saW5lYXJGYWN0b3IpIHsKICAgICAgICB0aGlzLmxpbmVhckZhY3Rvci5jb3B5KG9wdGlvbnMubGluZWFyRmFjdG9yKTsKICAgICAgfQoKICAgICAgdGhpcy5hbmd1bGFyRmFjdG9yID0gbmV3IFZlYzMoMSwgMSwgMSk7CgogICAgICBpZiAob3B0aW9ucy5hbmd1bGFyRmFjdG9yKSB7CiAgICAgICAgdGhpcy5hbmd1bGFyRmFjdG9yLmNvcHkob3B0aW9ucy5hbmd1bGFyRmFjdG9yKTsKICAgICAgfQoKICAgICAgdGhpcy5hYWJiID0gbmV3IEFBQkIoKTsKICAgICAgdGhpcy5hYWJiTmVlZHNVcGRhdGUgPSB0cnVlOwogICAgICB0aGlzLmJvdW5kaW5nUmFkaXVzID0gMDsKICAgICAgdGhpcy53bGFtYmRhID0gbmV3IFZlYzMoKTsKICAgICAgdGhpcy5pc1RyaWdnZXIgPSBCb29sZWFuKG9wdGlvbnMuaXNUcmlnZ2VyKTsKCiAgICAgIGlmIChvcHRpb25zLnNoYXBlKSB7CiAgICAgICAgdGhpcy5hZGRTaGFwZShvcHRpb25zLnNoYXBlKTsKICAgICAgfQoKICAgICAgdGhpcy51cGRhdGVNYXNzUHJvcGVydGllcygpOwogICAgfQogICAgLyoqCiAgICAgKiBXYWtlIHRoZSBib2R5IHVwLgogICAgICovCgoKICAgIHdha2VVcCgpIHsKICAgICAgY29uc3QgcHJldlN0YXRlID0gdGhpcy5zbGVlcFN0YXRlOwogICAgICB0aGlzLnNsZWVwU3RhdGUgPSBCb2R5LkFXQUtFOwogICAgICB0aGlzLndha2VVcEFmdGVyTmFycm93cGhhc2UgPSBmYWxzZTsKCiAgICAgIGlmIChwcmV2U3RhdGUgPT09IEJvZHkuU0xFRVBJTkcpIHsKICAgICAgICB0aGlzLmRpc3BhdGNoRXZlbnQoQm9keS53YWtldXBFdmVudCk7CiAgICAgIH0KICAgIH0KICAgIC8qKgogICAgICogRm9yY2UgYm9keSBzbGVlcAogICAgICovCgoKICAgIHNsZWVwKCkgewogICAgICB0aGlzLnNsZWVwU3RhdGUgPSBCb2R5LlNMRUVQSU5HOwogICAgICB0aGlzLnZlbG9jaXR5LnNldCgwLCAwLCAwKTsKICAgICAgdGhpcy5hbmd1bGFyVmVsb2NpdHkuc2V0KDAsIDAsIDApOwogICAgICB0aGlzLndha2VVcEFmdGVyTmFycm93cGhhc2UgPSBmYWxzZTsKICAgIH0KICAgIC8qKgogICAgICogQ2FsbGVkIGV2ZXJ5IHRpbWVzdGVwIHRvIHVwZGF0ZSBpbnRlcm5hbCBzbGVlcCB0aW1lciBhbmQgY2hhbmdlIHNsZWVwIHN0YXRlIGlmIG5lZWRlZC4KICAgICAqIEBwYXJhbSB0aW1lIFRoZSB3b3JsZCB0aW1lIGluIHNlY29uZHMKICAgICAqLwoKCiAgICBzbGVlcFRpY2sodGltZSkgewogICAgICBpZiAodGhpcy5hbGxvd1NsZWVwKSB7CiAgICAgICAgY29uc3Qgc2xlZXBTdGF0ZSA9IHRoaXMuc2xlZXBTdGF0ZTsKICAgICAgICBjb25zdCBzcGVlZFNxdWFyZWQgPSB0aGlzLnZlbG9jaXR5Lmxlbmd0aFNxdWFyZWQoKSArIHRoaXMuYW5ndWxhclZlbG9jaXR5Lmxlbmd0aFNxdWFyZWQoKTsKICAgICAgICBjb25zdCBzcGVlZExpbWl0U3F1YXJlZCA9IHRoaXMuc2xlZXBTcGVlZExpbWl0ICoqIDI7CgogICAgICAgIGlmIChzbGVlcFN0YXRlID09PSBCb2R5LkFXQUtFICYmIHNwZWVkU3F1YXJlZCA8IHNwZWVkTGltaXRTcXVhcmVkKSB7CiAgICAgICAgICB0aGlzLnNsZWVwU3RhdGUgPSBCb2R5LlNMRUVQWTsgLy8gU2xlZXB5CgogICAgICAgICAgdGhpcy50aW1lTGFzdFNsZWVweSA9IHRpbWU7CiAgICAgICAgICB0aGlzLmRpc3BhdGNoRXZlbnQoQm9keS5zbGVlcHlFdmVudCk7CiAgICAgICAgfSBlbHNlIGlmIChzbGVlcFN0YXRlID09PSBCb2R5LlNMRUVQWSAmJiBzcGVlZFNxdWFyZWQgPiBzcGVlZExpbWl0U3F1YXJlZCkgewogICAgICAgICAgdGhpcy53YWtlVXAoKTsgLy8gV2FrZSB1cAogICAgICAgIH0gZWxzZSBpZiAoc2xlZXBTdGF0ZSA9PT0gQm9keS5TTEVFUFkgJiYgdGltZSAtIHRoaXMudGltZUxhc3RTbGVlcHkgPiB0aGlzLnNsZWVwVGltZUxpbWl0KSB7CiAgICAgICAgICB0aGlzLnNsZWVwKCk7IC8vIFNsZWVwaW5nCgogICAgICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KEJvZHkuc2xlZXBFdmVudCk7CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgICAvKioKICAgICAqIElmIHRoZSBib2R5IGlzIHNsZWVwaW5nLCBpdCBzaG91bGQgYmUgaW1tb3ZhYmxlIC8gaGF2ZSBpbmZpbml0ZSBtYXNzIGR1cmluZyBzb2x2ZS4gV2Ugc29sdmUgaXQgYnkgaGF2aW5nIGEgc2VwYXJhdGUgInNvbHZlIG1hc3MiLgogICAgICovCgoKICAgIHVwZGF0ZVNvbHZlTWFzc1Byb3BlcnRpZXMoKSB7CiAgICAgIGlmICh0aGlzLnNsZWVwU3RhdGUgPT09IEJvZHkuU0xFRVBJTkcgfHwgdGhpcy50eXBlID09PSBCb2R5LktJTkVNQVRJQykgewogICAgICAgIHRoaXMuaW52TWFzc1NvbHZlID0gMDsKICAgICAgICB0aGlzLmludkluZXJ0aWFTb2x2ZS5zZXRaZXJvKCk7CiAgICAgICAgdGhpcy5pbnZJbmVydGlhV29ybGRTb2x2ZS5zZXRaZXJvKCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5pbnZNYXNzU29sdmUgPSB0aGlzLmludk1hc3M7CiAgICAgICAgdGhpcy5pbnZJbmVydGlhU29sdmUuY29weSh0aGlzLmludkluZXJ0aWEpOwogICAgICAgIHRoaXMuaW52SW5lcnRpYVdvcmxkU29sdmUuY29weSh0aGlzLmludkluZXJ0aWFXb3JsZCk7CiAgICAgIH0KICAgIH0KICAgIC8qKgogICAgICogQ29udmVydCBhIHdvcmxkIHBvaW50IHRvIGxvY2FsIGJvZHkgZnJhbWUuCiAgICAgKi8KCgogICAgcG9pbnRUb0xvY2FsRnJhbWUod29ybGRQb2ludCwgcmVzdWx0KSB7CiAgICAgIGlmIChyZXN1bHQgPT09IHZvaWQgMCkgewogICAgICAgIHJlc3VsdCA9IG5ldyBWZWMzKCk7CiAgICAgIH0KCiAgICAgIHdvcmxkUG9pbnQudnN1Yih0aGlzLnBvc2l0aW9uLCByZXN1bHQpOwogICAgICB0aGlzLnF1YXRlcm5pb24uY29uanVnYXRlKCkudm11bHQocmVzdWx0LCByZXN1bHQpOwogICAgICByZXR1cm4gcmVzdWx0OwogICAgfQogICAgLyoqCiAgICAgKiBDb252ZXJ0IGEgd29ybGQgdmVjdG9yIHRvIGxvY2FsIGJvZHkgZnJhbWUuCiAgICAgKi8KCgogICAgdmVjdG9yVG9Mb2NhbEZyYW1lKHdvcmxkVmVjdG9yLCByZXN1bHQpIHsKICAgICAgaWYgKHJlc3VsdCA9PT0gdm9pZCAwKSB7CiAgICAgICAgcmVzdWx0ID0gbmV3IFZlYzMoKTsKICAgICAgfQoKICAgICAgdGhpcy5xdWF0ZXJuaW9uLmNvbmp1Z2F0ZSgpLnZtdWx0KHdvcmxkVmVjdG9yLCByZXN1bHQpOwogICAgICByZXR1cm4gcmVzdWx0OwogICAgfQogICAgLyoqCiAgICAgKiBDb252ZXJ0IGEgbG9jYWwgYm9keSBwb2ludCB0byB3b3JsZCBmcmFtZS4KICAgICAqLwoKCiAgICBwb2ludFRvV29ybGRGcmFtZShsb2NhbFBvaW50LCByZXN1bHQpIHsKICAgICAgaWYgKHJlc3VsdCA9PT0gdm9pZCAwKSB7CiAgICAgICAgcmVzdWx0ID0gbmV3IFZlYzMoKTsKICAgICAgfQoKICAgICAgdGhpcy5xdWF0ZXJuaW9uLnZtdWx0KGxvY2FsUG9pbnQsIHJlc3VsdCk7CiAgICAgIHJlc3VsdC52YWRkKHRoaXMucG9zaXRpb24sIHJlc3VsdCk7CiAgICAgIHJldHVybiByZXN1bHQ7CiAgICB9CiAgICAvKioKICAgICAqIENvbnZlcnQgYSBsb2NhbCBib2R5IHBvaW50IHRvIHdvcmxkIGZyYW1lLgogICAgICovCgoKICAgIHZlY3RvclRvV29ybGRGcmFtZShsb2NhbFZlY3RvciwgcmVzdWx0KSB7CiAgICAgIGlmIChyZXN1bHQgPT09IHZvaWQgMCkgewogICAgICAgIHJlc3VsdCA9IG5ldyBWZWMzKCk7CiAgICAgIH0KCiAgICAgIHRoaXMucXVhdGVybmlvbi52bXVsdChsb2NhbFZlY3RvciwgcmVzdWx0KTsKICAgICAgcmV0dXJuIHJlc3VsdDsKICAgIH0KICAgIC8qKgogICAgICogQWRkIGEgc2hhcGUgdG8gdGhlIGJvZHkgd2l0aCBhIGxvY2FsIG9mZnNldCBhbmQgb3JpZW50YXRpb24uCiAgICAgKiBAcmV0dXJuIFRoZSBib2R5IG9iamVjdCwgZm9yIGNoYWluYWJpbGl0eS4KICAgICAqLwoKCiAgICBhZGRTaGFwZShzaGFwZSwgX29mZnNldCwgX29yaWVudGF0aW9uKSB7CiAgICAgIGNvbnN0IG9mZnNldCA9IG5ldyBWZWMzKCk7CiAgICAgIGNvbnN0IG9yaWVudGF0aW9uID0gbmV3IFF1YXRlcm5pb24oKTsKCiAgICAgIGlmIChfb2Zmc2V0KSB7CiAgICAgICAgb2Zmc2V0LmNvcHkoX29mZnNldCk7CiAgICAgIH0KCiAgICAgIGlmIChfb3JpZW50YXRpb24pIHsKICAgICAgICBvcmllbnRhdGlvbi5jb3B5KF9vcmllbnRhdGlvbik7CiAgICAgIH0KCiAgICAgIHRoaXMuc2hhcGVzLnB1c2goc2hhcGUpOwogICAgICB0aGlzLnNoYXBlT2Zmc2V0cy5wdXNoKG9mZnNldCk7CiAgICAgIHRoaXMuc2hhcGVPcmllbnRhdGlvbnMucHVzaChvcmllbnRhdGlvbik7CiAgICAgIHRoaXMudXBkYXRlTWFzc1Byb3BlcnRpZXMoKTsKICAgICAgdGhpcy51cGRhdGVCb3VuZGluZ1JhZGl1cygpOwogICAgICB0aGlzLmFhYmJOZWVkc1VwZGF0ZSA9IHRydWU7CiAgICAgIHNoYXBlLmJvZHkgPSB0aGlzOwogICAgICByZXR1cm4gdGhpczsKICAgIH0KICAgIC8qKgogICAgICogUmVtb3ZlIGEgc2hhcGUgZnJvbSB0aGUgYm9keS4KICAgICAqIEByZXR1cm4gVGhlIGJvZHkgb2JqZWN0LCBmb3IgY2hhaW5hYmlsaXR5LgogICAgICovCgoKICAgIHJlbW92ZVNoYXBlKHNoYXBlKSB7CiAgICAgIGNvbnN0IGluZGV4ID0gdGhpcy5zaGFwZXMuaW5kZXhPZihzaGFwZSk7CgogICAgICBpZiAoaW5kZXggPT09IC0xKSB7CiAgICAgICAgY29uc29sZS53YXJuKCdTaGFwZSBkb2VzIG5vdCBiZWxvbmcgdG8gdGhlIGJvZHknKTsKICAgICAgICByZXR1cm4gdGhpczsKICAgICAgfQoKICAgICAgdGhpcy5zaGFwZXMuc3BsaWNlKGluZGV4LCAxKTsKICAgICAgdGhpcy5zaGFwZU9mZnNldHMuc3BsaWNlKGluZGV4LCAxKTsKICAgICAgdGhpcy5zaGFwZU9yaWVudGF0aW9ucy5zcGxpY2UoaW5kZXgsIDEpOwogICAgICB0aGlzLnVwZGF0ZU1hc3NQcm9wZXJ0aWVzKCk7CiAgICAgIHRoaXMudXBkYXRlQm91bmRpbmdSYWRpdXMoKTsKICAgICAgdGhpcy5hYWJiTmVlZHNVcGRhdGUgPSB0cnVlOwogICAgICBzaGFwZS5ib2R5ID0gbnVsbDsKICAgICAgcmV0dXJuIHRoaXM7CiAgICB9CiAgICAvKioKICAgICAqIFVwZGF0ZSB0aGUgYm91bmRpbmcgcmFkaXVzIG9mIHRoZSBib2R5LiBTaG91bGQgYmUgZG9uZSBpZiBhbnkgb2YgdGhlIHNoYXBlcyBhcmUgY2hhbmdlZC4KICAgICAqLwoKCiAgICB1cGRhdGVCb3VuZGluZ1JhZGl1cygpIHsKICAgICAgY29uc3Qgc2hhcGVzID0gdGhpcy5zaGFwZXM7CiAgICAgIGNvbnN0IHNoYXBlT2Zmc2V0cyA9IHRoaXMuc2hhcGVPZmZzZXRzOwogICAgICBjb25zdCBOID0gc2hhcGVzLmxlbmd0aDsKICAgICAgbGV0IHJhZGl1cyA9IDA7CgogICAgICBmb3IgKGxldCBpID0gMDsgaSAhPT0gTjsgaSsrKSB7CiAgICAgICAgY29uc3Qgc2hhcGUgPSBzaGFwZXNbaV07CiAgICAgICAgc2hhcGUudXBkYXRlQm91bmRpbmdTcGhlcmVSYWRpdXMoKTsKICAgICAgICBjb25zdCBvZmZzZXQgPSBzaGFwZU9mZnNldHNbaV0ubGVuZ3RoKCk7CiAgICAgICAgY29uc3QgciA9IHNoYXBlLmJvdW5kaW5nU3BoZXJlUmFkaXVzOwoKICAgICAgICBpZiAob2Zmc2V0ICsgciA+IHJhZGl1cykgewogICAgICAgICAgcmFkaXVzID0gb2Zmc2V0ICsgcjsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIHRoaXMuYm91bmRpbmdSYWRpdXMgPSByYWRpdXM7CiAgICB9CiAgICAvKioKICAgICAqIFVwZGF0ZXMgdGhlIC5hYWJiCiAgICAgKi8KCgogICAgdXBkYXRlQUFCQigpIHsKICAgICAgY29uc3Qgc2hhcGVzID0gdGhpcy5zaGFwZXM7CiAgICAgIGNvbnN0IHNoYXBlT2Zmc2V0cyA9IHRoaXMuc2hhcGVPZmZzZXRzOwogICAgICBjb25zdCBzaGFwZU9yaWVudGF0aW9ucyA9IHRoaXMuc2hhcGVPcmllbnRhdGlvbnM7CiAgICAgIGNvbnN0IE4gPSBzaGFwZXMubGVuZ3RoOwogICAgICBjb25zdCBvZmZzZXQgPSB0bXBWZWM7CiAgICAgIGNvbnN0IG9yaWVudGF0aW9uID0gdG1wUXVhdDsKICAgICAgY29uc3QgYm9keVF1YXQgPSB0aGlzLnF1YXRlcm5pb247CiAgICAgIGNvbnN0IGFhYmIgPSB0aGlzLmFhYmI7CiAgICAgIGNvbnN0IHNoYXBlQUFCQiA9IHVwZGF0ZUFBQkJfc2hhcGVBQUJCOwoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgIT09IE47IGkrKykgewogICAgICAgIGNvbnN0IHNoYXBlID0gc2hhcGVzW2ldOyAvLyBHZXQgc2hhcGUgd29ybGQgcG9zaXRpb24KCiAgICAgICAgYm9keVF1YXQudm11bHQoc2hhcGVPZmZzZXRzW2ldLCBvZmZzZXQpOwogICAgICAgIG9mZnNldC52YWRkKHRoaXMucG9zaXRpb24sIG9mZnNldCk7IC8vIEdldCBzaGFwZSB3b3JsZCBxdWF0ZXJuaW9uCgogICAgICAgIGJvZHlRdWF0Lm11bHQoc2hhcGVPcmllbnRhdGlvbnNbaV0sIG9yaWVudGF0aW9uKTsgLy8gR2V0IHNoYXBlIEFBQkIKCiAgICAgICAgc2hhcGUuY2FsY3VsYXRlV29ybGRBQUJCKG9mZnNldCwgb3JpZW50YXRpb24sIHNoYXBlQUFCQi5sb3dlckJvdW5kLCBzaGFwZUFBQkIudXBwZXJCb3VuZCk7CgogICAgICAgIGlmIChpID09PSAwKSB7CiAgICAgICAgICBhYWJiLmNvcHkoc2hhcGVBQUJCKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgYWFiYi5leHRlbmQoc2hhcGVBQUJCKTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIHRoaXMuYWFiYk5lZWRzVXBkYXRlID0gZmFsc2U7CiAgICB9CiAgICAvKioKICAgICAqIFVwZGF0ZSBgLmluZXJ0aWFXb3JsZGAgYW5kIGAuaW52SW5lcnRpYVdvcmxkYAogICAgICovCgoKICAgIHVwZGF0ZUluZXJ0aWFXb3JsZChmb3JjZSkgewogICAgICBjb25zdCBJID0gdGhpcy5pbnZJbmVydGlhOwogICAgICBpZiAoSS54ID09PSBJLnkgJiYgSS55ID09PSBJLnogJiYgIWZvcmNlKSA7ZWxzZSB7CiAgICAgICAgY29uc3QgbTEgPSB1aXdfbTE7CiAgICAgICAgY29uc3QgbTIgPSB1aXdfbTI7CiAgICAgICAgbTEuc2V0Um90YXRpb25Gcm9tUXVhdGVybmlvbih0aGlzLnF1YXRlcm5pb24pOwogICAgICAgIG0xLnRyYW5zcG9zZShtMik7CiAgICAgICAgbTEuc2NhbGUoSSwgbTEpOwogICAgICAgIG0xLm1tdWx0KG0yLCB0aGlzLmludkluZXJ0aWFXb3JsZCk7CiAgICAgIH0KICAgIH0KICAgIC8qKgogICAgICogQXBwbHkgZm9yY2UgdG8gYSBwb2ludCBvZiB0aGUgYm9keS4gVGhpcyBjb3VsZCBmb3IgZXhhbXBsZSBiZSBhIHBvaW50IG9uIHRoZSBCb2R5IHN1cmZhY2UuCiAgICAgKiBBcHBseWluZyBmb3JjZSB0aGlzIHdheSB3aWxsIGFkZCB0byBCb2R5LmZvcmNlIGFuZCBCb2R5LnRvcnF1ZS4KICAgICAqIEBwYXJhbSBmb3JjZSBUaGUgYW1vdW50IG9mIGZvcmNlIHRvIGFkZC4KICAgICAqIEBwYXJhbSByZWxhdGl2ZVBvaW50IEEgcG9pbnQgcmVsYXRpdmUgdG8gdGhlIGNlbnRlciBvZiBtYXNzIHRvIGFwcGx5IHRoZSBmb3JjZSBvbi4KICAgICAqLwoKCiAgICBhcHBseUZvcmNlKGZvcmNlLCByZWxhdGl2ZVBvaW50KSB7CiAgICAgIGlmIChyZWxhdGl2ZVBvaW50ID09PSB2b2lkIDApIHsKICAgICAgICByZWxhdGl2ZVBvaW50ID0gbmV3IFZlYzMoKTsKICAgICAgfQoKICAgICAgLy8gTmVlZGVkPwogICAgICBpZiAodGhpcy50eXBlICE9PSBCb2R5LkRZTkFNSUMpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIGlmICh0aGlzLnNsZWVwU3RhdGUgPT09IEJvZHkuU0xFRVBJTkcpIHsKICAgICAgICB0aGlzLndha2VVcCgpOwogICAgICB9IC8vIENvbXB1dGUgcHJvZHVjZWQgcm90YXRpb25hbCBmb3JjZQoKCiAgICAgIGNvbnN0IHJvdEZvcmNlID0gQm9keV9hcHBseUZvcmNlX3JvdEZvcmNlOwogICAgICByZWxhdGl2ZVBvaW50LmNyb3NzKGZvcmNlLCByb3RGb3JjZSk7IC8vIEFkZCBsaW5lYXIgZm9yY2UKCiAgICAgIHRoaXMuZm9yY2UudmFkZChmb3JjZSwgdGhpcy5mb3JjZSk7IC8vIEFkZCByb3RhdGlvbmFsIGZvcmNlCgogICAgICB0aGlzLnRvcnF1ZS52YWRkKHJvdEZvcmNlLCB0aGlzLnRvcnF1ZSk7CiAgICB9CiAgICAvKioKICAgICAqIEFwcGx5IGZvcmNlIHRvIGEgbG9jYWwgcG9pbnQgaW4gdGhlIGJvZHkuCiAgICAgKiBAcGFyYW0gZm9yY2UgVGhlIGZvcmNlIHZlY3RvciB0byBhcHBseSwgZGVmaW5lZCBsb2NhbGx5IGluIHRoZSBib2R5IGZyYW1lLgogICAgICogQHBhcmFtIGxvY2FsUG9pbnQgQSBsb2NhbCBwb2ludCBpbiB0aGUgYm9keSB0byBhcHBseSB0aGUgZm9yY2Ugb24uCiAgICAgKi8KCgogICAgYXBwbHlMb2NhbEZvcmNlKGxvY2FsRm9yY2UsIGxvY2FsUG9pbnQpIHsKICAgICAgaWYgKGxvY2FsUG9pbnQgPT09IHZvaWQgMCkgewogICAgICAgIGxvY2FsUG9pbnQgPSBuZXcgVmVjMygpOwogICAgICB9CgogICAgICBpZiAodGhpcy50eXBlICE9PSBCb2R5LkRZTkFNSUMpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIGNvbnN0IHdvcmxkRm9yY2UgPSBCb2R5X2FwcGx5TG9jYWxGb3JjZV93b3JsZEZvcmNlOwogICAgICBjb25zdCByZWxhdGl2ZVBvaW50V29ybGQgPSBCb2R5X2FwcGx5TG9jYWxGb3JjZV9yZWxhdGl2ZVBvaW50V29ybGQ7IC8vIFRyYW5zZm9ybSB0aGUgZm9yY2UgdmVjdG9yIHRvIHdvcmxkIHNwYWNlCgogICAgICB0aGlzLnZlY3RvclRvV29ybGRGcmFtZShsb2NhbEZvcmNlLCB3b3JsZEZvcmNlKTsKICAgICAgdGhpcy52ZWN0b3JUb1dvcmxkRnJhbWUobG9jYWxQb2ludCwgcmVsYXRpdmVQb2ludFdvcmxkKTsKICAgICAgdGhpcy5hcHBseUZvcmNlKHdvcmxkRm9yY2UsIHJlbGF0aXZlUG9pbnRXb3JsZCk7CiAgICB9CiAgICAvKioKICAgICAqIEFwcGx5IHRvcnF1ZSB0byB0aGUgYm9keS4KICAgICAqIEBwYXJhbSB0b3JxdWUgVGhlIGFtb3VudCBvZiB0b3JxdWUgdG8gYWRkLgogICAgICovCgoKICAgIGFwcGx5VG9ycXVlKHRvcnF1ZSkgewogICAgICBpZiAodGhpcy50eXBlICE9PSBCb2R5LkRZTkFNSUMpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIGlmICh0aGlzLnNsZWVwU3RhdGUgPT09IEJvZHkuU0xFRVBJTkcpIHsKICAgICAgICB0aGlzLndha2VVcCgpOwogICAgICB9IC8vIEFkZCByb3RhdGlvbmFsIGZvcmNlCgoKICAgICAgdGhpcy50b3JxdWUudmFkZCh0b3JxdWUsIHRoaXMudG9ycXVlKTsKICAgIH0KICAgIC8qKgogICAgICogQXBwbHkgaW1wdWxzZSB0byBhIHBvaW50IG9mIHRoZSBib2R5LiBUaGlzIGNvdWxkIGZvciBleGFtcGxlIGJlIGEgcG9pbnQgb24gdGhlIEJvZHkgc3VyZmFjZS4KICAgICAqIEFuIGltcHVsc2UgaXMgYSBmb3JjZSBhZGRlZCB0byBhIGJvZHkgZHVyaW5nIGEgc2hvcnQgcGVyaW9kIG9mIHRpbWUgKGltcHVsc2UgPSBmb3JjZSAqIHRpbWUpLgogICAgICogSW1wdWxzZXMgd2lsbCBiZSBhZGRlZCB0byBCb2R5LnZlbG9jaXR5IGFuZCBCb2R5LmFuZ3VsYXJWZWxvY2l0eS4KICAgICAqIEBwYXJhbSBpbXB1bHNlIFRoZSBhbW91bnQgb2YgaW1wdWxzZSB0byBhZGQuCiAgICAgKiBAcGFyYW0gcmVsYXRpdmVQb2ludCBBIHBvaW50IHJlbGF0aXZlIHRvIHRoZSBjZW50ZXIgb2YgbWFzcyB0byBhcHBseSB0aGUgZm9yY2Ugb24uCiAgICAgKi8KCgogICAgYXBwbHlJbXB1bHNlKGltcHVsc2UsIHJlbGF0aXZlUG9pbnQpIHsKICAgICAgaWYgKHJlbGF0aXZlUG9pbnQgPT09IHZvaWQgMCkgewogICAgICAgIHJlbGF0aXZlUG9pbnQgPSBuZXcgVmVjMygpOwogICAgICB9CgogICAgICBpZiAodGhpcy50eXBlICE9PSBCb2R5LkRZTkFNSUMpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIGlmICh0aGlzLnNsZWVwU3RhdGUgPT09IEJvZHkuU0xFRVBJTkcpIHsKICAgICAgICB0aGlzLndha2VVcCgpOwogICAgICB9IC8vIENvbXB1dGUgcG9pbnQgcG9zaXRpb24gcmVsYXRpdmUgdG8gdGhlIGJvZHkgY2VudGVyCgoKICAgICAgY29uc3QgciA9IHJlbGF0aXZlUG9pbnQ7IC8vIENvbXB1dGUgcHJvZHVjZWQgY2VudHJhbCBpbXB1bHNlIHZlbG9jaXR5CgogICAgICBjb25zdCB2ZWxvID0gQm9keV9hcHBseUltcHVsc2VfdmVsbzsKICAgICAgdmVsby5jb3B5KGltcHVsc2UpOwogICAgICB2ZWxvLnNjYWxlKHRoaXMuaW52TWFzcywgdmVsbyk7IC8vIEFkZCBsaW5lYXIgaW1wdWxzZQoKICAgICAgdGhpcy52ZWxvY2l0eS52YWRkKHZlbG8sIHRoaXMudmVsb2NpdHkpOyAvLyBDb21wdXRlIHByb2R1Y2VkIHJvdGF0aW9uYWwgaW1wdWxzZSB2ZWxvY2l0eQoKICAgICAgY29uc3Qgcm90VmVsbyA9IEJvZHlfYXBwbHlJbXB1bHNlX3JvdFZlbG87CiAgICAgIHIuY3Jvc3MoaW1wdWxzZSwgcm90VmVsbyk7CiAgICAgIC8qCiAgICAgICByb3RWZWxvLnggKj0gdGhpcy5pbnZJbmVydGlhLng7CiAgICAgICByb3RWZWxvLnkgKj0gdGhpcy5pbnZJbmVydGlhLnk7CiAgICAgICByb3RWZWxvLnogKj0gdGhpcy5pbnZJbmVydGlhLno7CiAgICAgICAqLwoKICAgICAgdGhpcy5pbnZJbmVydGlhV29ybGQudm11bHQocm90VmVsbywgcm90VmVsbyk7IC8vIEFkZCByb3RhdGlvbmFsIEltcHVsc2UKCiAgICAgIHRoaXMuYW5ndWxhclZlbG9jaXR5LnZhZGQocm90VmVsbywgdGhpcy5hbmd1bGFyVmVsb2NpdHkpOwogICAgfQogICAgLyoqCiAgICAgKiBBcHBseSBsb2NhbGx5LWRlZmluZWQgaW1wdWxzZSB0byBhIGxvY2FsIHBvaW50IGluIHRoZSBib2R5LgogICAgICogQHBhcmFtIGZvcmNlIFRoZSBmb3JjZSB2ZWN0b3IgdG8gYXBwbHksIGRlZmluZWQgbG9jYWxseSBpbiB0aGUgYm9keSBmcmFtZS4KICAgICAqIEBwYXJhbSBsb2NhbFBvaW50IEEgbG9jYWwgcG9pbnQgaW4gdGhlIGJvZHkgdG8gYXBwbHkgdGhlIGZvcmNlIG9uLgogICAgICovCgoKICAgIGFwcGx5TG9jYWxJbXB1bHNlKGxvY2FsSW1wdWxzZSwgbG9jYWxQb2ludCkgewogICAgICBpZiAobG9jYWxQb2ludCA9PT0gdm9pZCAwKSB7CiAgICAgICAgbG9jYWxQb2ludCA9IG5ldyBWZWMzKCk7CiAgICAgIH0KCiAgICAgIGlmICh0aGlzLnR5cGUgIT09IEJvZHkuRFlOQU1JQykgewogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgY29uc3Qgd29ybGRJbXB1bHNlID0gQm9keV9hcHBseUxvY2FsSW1wdWxzZV93b3JsZEltcHVsc2U7CiAgICAgIGNvbnN0IHJlbGF0aXZlUG9pbnRXb3JsZCA9IEJvZHlfYXBwbHlMb2NhbEltcHVsc2VfcmVsYXRpdmVQb2ludDsgLy8gVHJhbnNmb3JtIHRoZSBmb3JjZSB2ZWN0b3IgdG8gd29ybGQgc3BhY2UKCiAgICAgIHRoaXMudmVjdG9yVG9Xb3JsZEZyYW1lKGxvY2FsSW1wdWxzZSwgd29ybGRJbXB1bHNlKTsKICAgICAgdGhpcy52ZWN0b3JUb1dvcmxkRnJhbWUobG9jYWxQb2ludCwgcmVsYXRpdmVQb2ludFdvcmxkKTsKICAgICAgdGhpcy5hcHBseUltcHVsc2Uod29ybGRJbXB1bHNlLCByZWxhdGl2ZVBvaW50V29ybGQpOwogICAgfQogICAgLyoqCiAgICAgKiBTaG91bGQgYmUgY2FsbGVkIHdoZW5ldmVyIHlvdSBjaGFuZ2UgdGhlIGJvZHkgc2hhcGUgb3IgbWFzcy4KICAgICAqLwoKCiAgICB1cGRhdGVNYXNzUHJvcGVydGllcygpIHsKICAgICAgY29uc3QgaGFsZkV4dGVudHMgPSBCb2R5X3VwZGF0ZU1hc3NQcm9wZXJ0aWVzX2hhbGZFeHRlbnRzOwogICAgICB0aGlzLmludk1hc3MgPSB0aGlzLm1hc3MgPiAwID8gMS4wIC8gdGhpcy5tYXNzIDogMDsKICAgICAgY29uc3QgSSA9IHRoaXMuaW5lcnRpYTsKICAgICAgY29uc3QgZml4ZWQgPSB0aGlzLmZpeGVkUm90YXRpb247IC8vIEFwcHJveGltYXRlIHdpdGggQUFCQiBib3gKCiAgICAgIHRoaXMudXBkYXRlQUFCQigpOwogICAgICBoYWxmRXh0ZW50cy5zZXQoKHRoaXMuYWFiYi51cHBlckJvdW5kLnggLSB0aGlzLmFhYmIubG93ZXJCb3VuZC54KSAvIDIsICh0aGlzLmFhYmIudXBwZXJCb3VuZC55IC0gdGhpcy5hYWJiLmxvd2VyQm91bmQueSkgLyAyLCAodGhpcy5hYWJiLnVwcGVyQm91bmQueiAtIHRoaXMuYWFiYi5sb3dlckJvdW5kLnopIC8gMik7CiAgICAgIEJveC5jYWxjdWxhdGVJbmVydGlhKGhhbGZFeHRlbnRzLCB0aGlzLm1hc3MsIEkpOwogICAgICB0aGlzLmludkluZXJ0aWEuc2V0KEkueCA+IDAgJiYgIWZpeGVkID8gMS4wIC8gSS54IDogMCwgSS55ID4gMCAmJiAhZml4ZWQgPyAxLjAgLyBJLnkgOiAwLCBJLnogPiAwICYmICFmaXhlZCA/IDEuMCAvIEkueiA6IDApOwogICAgICB0aGlzLnVwZGF0ZUluZXJ0aWFXb3JsZCh0cnVlKTsKICAgIH0KICAgIC8qKgogICAgICogR2V0IHdvcmxkIHZlbG9jaXR5IG9mIGEgcG9pbnQgaW4gdGhlIGJvZHkuCiAgICAgKiBAcGFyYW0gd29ybGRQb2ludAogICAgICogQHBhcmFtIHJlc3VsdAogICAgICogQHJldHVybiBUaGUgcmVzdWx0IHZlY3Rvci4KICAgICAqLwoKCiAgICBnZXRWZWxvY2l0eUF0V29ybGRQb2ludCh3b3JsZFBvaW50LCByZXN1bHQpIHsKICAgICAgY29uc3QgciA9IG5ldyBWZWMzKCk7CiAgICAgIHdvcmxkUG9pbnQudnN1Yih0aGlzLnBvc2l0aW9uLCByKTsKICAgICAgdGhpcy5hbmd1bGFyVmVsb2NpdHkuY3Jvc3MociwgcmVzdWx0KTsKICAgICAgdGhpcy52ZWxvY2l0eS52YWRkKHJlc3VsdCwgcmVzdWx0KTsKICAgICAgcmV0dXJuIHJlc3VsdDsKICAgIH0KICAgIC8qKgogICAgICogTW92ZSB0aGUgYm9keSBmb3J3YXJkIGluIHRpbWUuCiAgICAgKiBAcGFyYW0gZHQgVGltZSBzdGVwCiAgICAgKiBAcGFyYW0gcXVhdE5vcm1hbGl6ZSBTZXQgdG8gdHJ1ZSB0byBub3JtYWxpemUgdGhlIGJvZHkgcXVhdGVybmlvbgogICAgICogQHBhcmFtIHF1YXROb3JtYWxpemVGYXN0IElmIHRoZSBxdWF0ZXJuaW9uIHNob3VsZCBiZSBub3JtYWxpemVkIHVzaW5nICJmYXN0IiBxdWF0ZXJuaW9uIG5vcm1hbGl6YXRpb24KICAgICAqLwoKCiAgICBpbnRlZ3JhdGUoZHQsIHF1YXROb3JtYWxpemUsIHF1YXROb3JtYWxpemVGYXN0KSB7CiAgICAgIC8vIFNhdmUgcHJldmlvdXMgcG9zaXRpb24KICAgICAgdGhpcy5wcmV2aW91c1Bvc2l0aW9uLmNvcHkodGhpcy5wb3NpdGlvbik7CiAgICAgIHRoaXMucHJldmlvdXNRdWF0ZXJuaW9uLmNvcHkodGhpcy5xdWF0ZXJuaW9uKTsKCiAgICAgIGlmICghKHRoaXMudHlwZSA9PT0gQm9keS5EWU5BTUlDIHx8IHRoaXMudHlwZSA9PT0gQm9keS5LSU5FTUFUSUMpIHx8IHRoaXMuc2xlZXBTdGF0ZSA9PT0gQm9keS5TTEVFUElORykgewogICAgICAgIC8vIE9ubHkgZm9yIGR5bmFtaWMKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIGNvbnN0IHZlbG8gPSB0aGlzLnZlbG9jaXR5OwogICAgICBjb25zdCBhbmd1bGFyVmVsbyA9IHRoaXMuYW5ndWxhclZlbG9jaXR5OwogICAgICBjb25zdCBwb3MgPSB0aGlzLnBvc2l0aW9uOwogICAgICBjb25zdCBmb3JjZSA9IHRoaXMuZm9yY2U7CiAgICAgIGNvbnN0IHRvcnF1ZSA9IHRoaXMudG9ycXVlOwogICAgICBjb25zdCBxdWF0ID0gdGhpcy5xdWF0ZXJuaW9uOwogICAgICBjb25zdCBpbnZNYXNzID0gdGhpcy5pbnZNYXNzOwogICAgICBjb25zdCBpbnZJbmVydGlhID0gdGhpcy5pbnZJbmVydGlhV29ybGQ7CiAgICAgIGNvbnN0IGxpbmVhckZhY3RvciA9IHRoaXMubGluZWFyRmFjdG9yOwogICAgICBjb25zdCBpTWR0ID0gaW52TWFzcyAqIGR0OwogICAgICB2ZWxvLnggKz0gZm9yY2UueCAqIGlNZHQgKiBsaW5lYXJGYWN0b3IueDsKICAgICAgdmVsby55ICs9IGZvcmNlLnkgKiBpTWR0ICogbGluZWFyRmFjdG9yLnk7CiAgICAgIHZlbG8ueiArPSBmb3JjZS56ICogaU1kdCAqIGxpbmVhckZhY3Rvci56OwogICAgICBjb25zdCBlID0gaW52SW5lcnRpYS5lbGVtZW50czsKICAgICAgY29uc3QgYW5ndWxhckZhY3RvciA9IHRoaXMuYW5ndWxhckZhY3RvcjsKICAgICAgY29uc3QgdHggPSB0b3JxdWUueCAqIGFuZ3VsYXJGYWN0b3IueDsKICAgICAgY29uc3QgdHkgPSB0b3JxdWUueSAqIGFuZ3VsYXJGYWN0b3IueTsKICAgICAgY29uc3QgdHogPSB0b3JxdWUueiAqIGFuZ3VsYXJGYWN0b3IuejsKICAgICAgYW5ndWxhclZlbG8ueCArPSBkdCAqIChlWzBdICogdHggKyBlWzFdICogdHkgKyBlWzJdICogdHopOwogICAgICBhbmd1bGFyVmVsby55ICs9IGR0ICogKGVbM10gKiB0eCArIGVbNF0gKiB0eSArIGVbNV0gKiB0eik7CiAgICAgIGFuZ3VsYXJWZWxvLnogKz0gZHQgKiAoZVs2XSAqIHR4ICsgZVs3XSAqIHR5ICsgZVs4XSAqIHR6KTsgLy8gVXNlIG5ldyB2ZWxvY2l0eSAgLSBsZWFwIGZyb2cKCiAgICAgIHBvcy54ICs9IHZlbG8ueCAqIGR0OwogICAgICBwb3MueSArPSB2ZWxvLnkgKiBkdDsKICAgICAgcG9zLnogKz0gdmVsby56ICogZHQ7CiAgICAgIHF1YXQuaW50ZWdyYXRlKHRoaXMuYW5ndWxhclZlbG9jaXR5LCBkdCwgdGhpcy5hbmd1bGFyRmFjdG9yLCBxdWF0KTsKCiAgICAgIGlmIChxdWF0Tm9ybWFsaXplKSB7CiAgICAgICAgaWYgKHF1YXROb3JtYWxpemVGYXN0KSB7CiAgICAgICAgICBxdWF0Lm5vcm1hbGl6ZUZhc3QoKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgcXVhdC5ub3JtYWxpemUoKTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIHRoaXMuYWFiYk5lZWRzVXBkYXRlID0gdHJ1ZTsgLy8gVXBkYXRlIHdvcmxkIGluZXJ0aWEKCiAgICAgIHRoaXMudXBkYXRlSW5lcnRpYVdvcmxkKCk7CiAgICB9CgogIH0KCiAgQm9keS5pZENvdW50ZXIgPSAwOwogIEJvZHkuQ09MTElERV9FVkVOVF9OQU1FID0gJ2NvbGxpZGUnOwogIEJvZHkuRFlOQU1JQyA9IEJPRFlfVFlQRVMuRFlOQU1JQzsKICBCb2R5LlNUQVRJQyA9IEJPRFlfVFlQRVMuU1RBVElDOwogIEJvZHkuS0lORU1BVElDID0gQk9EWV9UWVBFUy5LSU5FTUFUSUM7CiAgQm9keS5BV0FLRSA9IEJPRFlfU0xFRVBfU1RBVEVTLkFXQUtFOwogIEJvZHkuU0xFRVBZID0gQk9EWV9TTEVFUF9TVEFURVMuU0xFRVBZOwogIEJvZHkuU0xFRVBJTkcgPSBCT0RZX1NMRUVQX1NUQVRFUy5TTEVFUElORzsKICBCb2R5Lndha2V1cEV2ZW50ID0gewogICAgdHlwZTogJ3dha2V1cCcKICB9OwogIEJvZHkuc2xlZXB5RXZlbnQgPSB7CiAgICB0eXBlOiAnc2xlZXB5JwogIH07CiAgQm9keS5zbGVlcEV2ZW50ID0gewogICAgdHlwZTogJ3NsZWVwJwogIH07CiAgY29uc3QgdG1wVmVjID0gbmV3IFZlYzMoKTsKICBjb25zdCB0bXBRdWF0ID0gbmV3IFF1YXRlcm5pb24oKTsKICBjb25zdCB1cGRhdGVBQUJCX3NoYXBlQUFCQiA9IG5ldyBBQUJCKCk7CiAgY29uc3QgdWl3X20xID0gbmV3IE1hdDMoKTsKICBjb25zdCB1aXdfbTIgPSBuZXcgTWF0MygpOwogIGNvbnN0IEJvZHlfYXBwbHlGb3JjZV9yb3RGb3JjZSA9IG5ldyBWZWMzKCk7CiAgY29uc3QgQm9keV9hcHBseUxvY2FsRm9yY2Vfd29ybGRGb3JjZSA9IG5ldyBWZWMzKCk7CiAgY29uc3QgQm9keV9hcHBseUxvY2FsRm9yY2VfcmVsYXRpdmVQb2ludFdvcmxkID0gbmV3IFZlYzMoKTsKICBjb25zdCBCb2R5X2FwcGx5SW1wdWxzZV92ZWxvID0gbmV3IFZlYzMoKTsKICBjb25zdCBCb2R5X2FwcGx5SW1wdWxzZV9yb3RWZWxvID0gbmV3IFZlYzMoKTsKICBjb25zdCBCb2R5X2FwcGx5TG9jYWxJbXB1bHNlX3dvcmxkSW1wdWxzZSA9IG5ldyBWZWMzKCk7CiAgY29uc3QgQm9keV9hcHBseUxvY2FsSW1wdWxzZV9yZWxhdGl2ZVBvaW50ID0gbmV3IFZlYzMoKTsKICBjb25zdCBCb2R5X3VwZGF0ZU1hc3NQcm9wZXJ0aWVzX2hhbGZFeHRlbnRzID0gbmV3IFZlYzMoKTsKICAvKioKICAgKiBCYXNlIGNsYXNzIGZvciBicm9hZHBoYXNlIGltcGxlbWVudGF0aW9ucwogICAqIEBhdXRob3Igc2NodGVwcGUKICAgKi8KCiAgY2xhc3MgQnJvYWRwaGFzZSB7CiAgICAvKioKICAgICAqIFRoZSB3b3JsZCB0byBzZWFyY2ggZm9yIGNvbGxpc2lvbnMgaW4uCiAgICAgKi8KCiAgICAvKioKICAgICAqIElmIHNldCB0byB0cnVlLCB0aGUgYnJvYWRwaGFzZSB1c2VzIGJvdW5kaW5nIGJveGVzIGZvciBpbnRlcnNlY3Rpb24gdGVzdHMsIGVsc2UgaXQgdXNlcyBib3VuZGluZyBzcGhlcmVzLgogICAgICovCgogICAgLyoqCiAgICAgKiBTZXQgdG8gdHJ1ZSBpZiB0aGUgb2JqZWN0cyBpbiB0aGUgd29ybGQgbW92ZWQuCiAgICAgKi8KICAgIGNvbnN0cnVjdG9yKCkgewogICAgICB0aGlzLndvcmxkID0gdm9pZCAwOwogICAgICB0aGlzLnVzZUJvdW5kaW5nQm94ZXMgPSB2b2lkIDA7CiAgICAgIHRoaXMuZGlydHkgPSB2b2lkIDA7CiAgICAgIHRoaXMud29ybGQgPSBudWxsOwogICAgICB0aGlzLnVzZUJvdW5kaW5nQm94ZXMgPSBmYWxzZTsKICAgICAgdGhpcy5kaXJ0eSA9IHRydWU7CiAgICB9CiAgICAvKioKICAgICAqIEdldCB0aGUgY29sbGlzaW9uIHBhaXJzIGZyb20gdGhlIHdvcmxkCiAgICAgKiBAcGFyYW0gd29ybGQgVGhlIHdvcmxkIHRvIHNlYXJjaCBpbgogICAgICogQHBhcmFtIHAxIEVtcHR5IGFycmF5IHRvIGJlIGZpbGxlZCB3aXRoIGJvZHkgb2JqZWN0cwogICAgICogQHBhcmFtIHAyIEVtcHR5IGFycmF5IHRvIGJlIGZpbGxlZCB3aXRoIGJvZHkgb2JqZWN0cwogICAgICovCgoKICAgIGNvbGxpc2lvblBhaXJzKHdvcmxkLCBwMSwgcDIpIHsKICAgICAgdGhyb3cgbmV3IEVycm9yKCdjb2xsaXNpb25QYWlycyBub3QgaW1wbGVtZW50ZWQgZm9yIHRoaXMgQnJvYWRQaGFzZSBjbGFzcyEnKTsKICAgIH0KICAgIC8qKgogICAgICogQ2hlY2sgaWYgYSBib2R5IHBhaXIgbmVlZHMgdG8gYmUgaW50ZXJzZWN0aW9uIHRlc3RlZCBhdCBhbGwuCiAgICAgKi8KCgogICAgbmVlZEJyb2FkcGhhc2VDb2xsaXNpb24oYm9keUEsIGJvZHlCKSB7CiAgICAgIC8vIENoZWNrIGNvbGxpc2lvbiBmaWx0ZXIgbWFza3MKICAgICAgaWYgKChib2R5QS5jb2xsaXNpb25GaWx0ZXJHcm91cCAmIGJvZHlCLmNvbGxpc2lvbkZpbHRlck1hc2spID09PSAwIHx8IChib2R5Qi5jb2xsaXNpb25GaWx0ZXJHcm91cCAmIGJvZHlBLmNvbGxpc2lvbkZpbHRlck1hc2spID09PSAwKSB7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9IC8vIENoZWNrIHR5cGVzCgoKICAgICAgaWYgKCgoYm9keUEudHlwZSAmIEJvZHkuU1RBVElDKSAhPT0gMCB8fCBib2R5QS5zbGVlcFN0YXRlID09PSBCb2R5LlNMRUVQSU5HKSAmJiAoKGJvZHlCLnR5cGUgJiBCb2R5LlNUQVRJQykgIT09IDAgfHwgYm9keUIuc2xlZXBTdGF0ZSA9PT0gQm9keS5TTEVFUElORykpIHsKICAgICAgICAvLyBCb3RoIGJvZGllcyBhcmUgc3RhdGljIG9yIHNsZWVwaW5nLiBTa2lwLgogICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfQoKICAgICAgcmV0dXJuIHRydWU7CiAgICB9CiAgICAvKioKICAgICAqIENoZWNrIGlmIHRoZSBib3VuZGluZyB2b2x1bWVzIG9mIHR3byBib2RpZXMgaW50ZXJzZWN0LgogICAgICovCgoKICAgIGludGVyc2VjdGlvblRlc3QoYm9keUEsIGJvZHlCLCBwYWlyczEsIHBhaXJzMikgewogICAgICBpZiAodGhpcy51c2VCb3VuZGluZ0JveGVzKSB7CiAgICAgICAgdGhpcy5kb0JvdW5kaW5nQm94QnJvYWRwaGFzZShib2R5QSwgYm9keUIsIHBhaXJzMSwgcGFpcnMyKTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLmRvQm91bmRpbmdTcGhlcmVCcm9hZHBoYXNlKGJvZHlBLCBib2R5QiwgcGFpcnMxLCBwYWlyczIpOwogICAgICB9CiAgICB9CiAgICAvKioKICAgICAqIENoZWNrIGlmIHRoZSBib3VuZGluZyBzcGhlcmVzIG9mIHR3byBib2RpZXMgYXJlIGludGVyc2VjdGluZy4KICAgICAqIEBwYXJhbSBwYWlyczEgYm9keUEgaXMgYXBwZW5kZWQgdG8gdGhpcyBhcnJheSBpZiBpbnRlcnNlY3Rpb24KICAgICAqIEBwYXJhbSBwYWlyczIgYm9keUIgaXMgYXBwZW5kZWQgdG8gdGhpcyBhcnJheSBpZiBpbnRlcnNlY3Rpb24KICAgICAqLwoKCiAgICBkb0JvdW5kaW5nU3BoZXJlQnJvYWRwaGFzZShib2R5QSwgYm9keUIsIHBhaXJzMSwgcGFpcnMyKSB7CiAgICAgIGNvbnN0IHIgPSBCcm9hZHBoYXNlX2NvbGxpc2lvblBhaXJzX3I7CiAgICAgIGJvZHlCLnBvc2l0aW9uLnZzdWIoYm9keUEucG9zaXRpb24sIHIpOwogICAgICBjb25zdCBib3VuZGluZ1JhZGl1c1N1bTIgPSAoYm9keUEuYm91bmRpbmdSYWRpdXMgKyBib2R5Qi5ib3VuZGluZ1JhZGl1cykgKiogMjsKICAgICAgY29uc3Qgbm9ybTIgPSByLmxlbmd0aFNxdWFyZWQoKTsKCiAgICAgIGlmIChub3JtMiA8IGJvdW5kaW5nUmFkaXVzU3VtMikgewogICAgICAgIHBhaXJzMS5wdXNoKGJvZHlBKTsKICAgICAgICBwYWlyczIucHVzaChib2R5Qik7CiAgICAgIH0KICAgIH0KICAgIC8qKgogICAgICogQ2hlY2sgaWYgdGhlIGJvdW5kaW5nIGJveGVzIG9mIHR3byBib2RpZXMgYXJlIGludGVyc2VjdGluZy4KICAgICAqLwoKCiAgICBkb0JvdW5kaW5nQm94QnJvYWRwaGFzZShib2R5QSwgYm9keUIsIHBhaXJzMSwgcGFpcnMyKSB7CiAgICAgIGlmIChib2R5QS5hYWJiTmVlZHNVcGRhdGUpIHsKICAgICAgICBib2R5QS51cGRhdGVBQUJCKCk7CiAgICAgIH0KCiAgICAgIGlmIChib2R5Qi5hYWJiTmVlZHNVcGRhdGUpIHsKICAgICAgICBib2R5Qi51cGRhdGVBQUJCKCk7CiAgICAgIH0gLy8gQ2hlY2sgQUFCQiAvIEFBQkIKCgogICAgICBpZiAoYm9keUEuYWFiYi5vdmVybGFwcyhib2R5Qi5hYWJiKSkgewogICAgICAgIHBhaXJzMS5wdXNoKGJvZHlBKTsKICAgICAgICBwYWlyczIucHVzaChib2R5Qik7CiAgICAgIH0KICAgIH0KICAgIC8qKgogICAgICogUmVtb3ZlcyBkdXBsaWNhdGUgcGFpcnMgZnJvbSB0aGUgcGFpciBhcnJheXMuCiAgICAgKi8KCgogICAgbWFrZVBhaXJzVW5pcXVlKHBhaXJzMSwgcGFpcnMyKSB7CiAgICAgIGNvbnN0IHQgPSBCcm9hZHBoYXNlX21ha2VQYWlyc1VuaXF1ZV90ZW1wOwogICAgICBjb25zdCBwMSA9IEJyb2FkcGhhc2VfbWFrZVBhaXJzVW5pcXVlX3AxOwogICAgICBjb25zdCBwMiA9IEJyb2FkcGhhc2VfbWFrZVBhaXJzVW5pcXVlX3AyOwogICAgICBjb25zdCBOID0gcGFpcnMxLmxlbmd0aDsKCiAgICAgIGZvciAobGV0IGkgPSAwOyBpICE9PSBOOyBpKyspIHsKICAgICAgICBwMVtpXSA9IHBhaXJzMVtpXTsKICAgICAgICBwMltpXSA9IHBhaXJzMltpXTsKICAgICAgfQoKICAgICAgcGFpcnMxLmxlbmd0aCA9IDA7CiAgICAgIHBhaXJzMi5sZW5ndGggPSAwOwoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgIT09IE47IGkrKykgewogICAgICAgIGNvbnN0IGlkMSA9IHAxW2ldLmlkOwogICAgICAgIGNvbnN0IGlkMiA9IHAyW2ldLmlkOwogICAgICAgIGNvbnN0IGtleSA9IGlkMSA8IGlkMiA/IGlkMSArICIsIiArIGlkMiA6IGlkMiArICIsIiArIGlkMTsKICAgICAgICB0W2tleV0gPSBpOwogICAgICAgIHQua2V5cy5wdXNoKGtleSk7CiAgICAgIH0KCiAgICAgIGZvciAobGV0IGkgPSAwOyBpICE9PSB0LmtleXMubGVuZ3RoOyBpKyspIHsKICAgICAgICBjb25zdCBrZXkgPSB0LmtleXMucG9wKCk7CiAgICAgICAgY29uc3QgcGFpckluZGV4ID0gdFtrZXldOwogICAgICAgIHBhaXJzMS5wdXNoKHAxW3BhaXJJbmRleF0pOwogICAgICAgIHBhaXJzMi5wdXNoKHAyW3BhaXJJbmRleF0pOwogICAgICAgIGRlbGV0ZSB0W2tleV07CiAgICAgIH0KICAgIH0KICAgIC8qKgogICAgICogVG8gYmUgaW1wbGVtZW50ZWQgYnkgc3ViY2Fzc2VzCiAgICAgKi8KCgogICAgc2V0V29ybGQod29ybGQpIHt9CiAgICAvKioKICAgICAqIENoZWNrIGlmIHRoZSBib3VuZGluZyBzcGhlcmVzIG9mIHR3byBib2RpZXMgb3ZlcmxhcC4KICAgICAqLwoKCiAgICBzdGF0aWMgYm91bmRpbmdTcGhlcmVDaGVjayhib2R5QSwgYm9keUIpIHsKICAgICAgY29uc3QgZGlzdCA9IG5ldyBWZWMzKCk7IC8vIGJzY19kaXN0OwoKICAgICAgYm9keUEucG9zaXRpb24udnN1Yihib2R5Qi5wb3NpdGlvbiwgZGlzdCk7CiAgICAgIGNvbnN0IHNhID0gYm9keUEuc2hhcGVzWzBdOwogICAgICBjb25zdCBzYiA9IGJvZHlCLnNoYXBlc1swXTsKICAgICAgcmV0dXJuIE1hdGgucG93KHNhLmJvdW5kaW5nU3BoZXJlUmFkaXVzICsgc2IuYm91bmRpbmdTcGhlcmVSYWRpdXMsIDIpID4gZGlzdC5sZW5ndGhTcXVhcmVkKCk7CiAgICB9CiAgICAvKioKICAgICAqIFJldHVybnMgYWxsIHRoZSBib2RpZXMgd2l0aGluIHRoZSBBQUJCLgogICAgICovCgoKICAgIGFhYmJRdWVyeSh3b3JsZCwgYWFiYiwgcmVzdWx0KSB7CiAgICAgIGNvbnNvbGUud2FybignLmFhYmJRdWVyeSBpcyBub3QgaW1wbGVtZW50ZWQgaW4gdGhpcyBCcm9hZHBoYXNlIHN1YmNsYXNzLicpOwogICAgICByZXR1cm4gW107CiAgICB9CgogIH0gLy8gVGVtcCBvYmplY3RzCgoKICBjb25zdCBCcm9hZHBoYXNlX2NvbGxpc2lvblBhaXJzX3IgPSBuZXcgVmVjMygpOwogIGNvbnN0IEJyb2FkcGhhc2VfbWFrZVBhaXJzVW5pcXVlX3RlbXAgPSB7CiAgICBrZXlzOiBbXQogIH07CiAgY29uc3QgQnJvYWRwaGFzZV9tYWtlUGFpcnNVbmlxdWVfcDEgPSBbXTsKICBjb25zdCBCcm9hZHBoYXNlX21ha2VQYWlyc1VuaXF1ZV9wMiA9IFtdOwoKICBuZXcgVmVjMygpOwogIC8qKgogICAqIE5haXZlIGJyb2FkcGhhc2UgaW1wbGVtZW50YXRpb24sIHVzZWQgaW4gbGFjayBvZiBiZXR0ZXIgb25lcy4KICAgKgogICAqIFRoZSBuYWl2ZSBicm9hZHBoYXNlIGxvb2tzIGF0IGFsbCBwb3NzaWJsZSBwYWlycyB3aXRob3V0IHJlc3RyaWN0aW9uLCB0aGVyZWZvcmUgaXQgaGFzIGNvbXBsZXhpdHkgTl4yIF8od2hpY2ggaXMgYmFkKV8KICAgKi8KCiAgY2xhc3MgTmFpdmVCcm9hZHBoYXNlIGV4dGVuZHMgQnJvYWRwaGFzZSB7CiAgICAvKioKICAgICAqIEB0b2RvIFJlbW92ZSB1c2VsZXNzIGNvbnN0cnVjdG9yCiAgICAgKi8KICAgIGNvbnN0cnVjdG9yKCkgewogICAgICBzdXBlcigpOwogICAgfQogICAgLyoqCiAgICAgKiBHZXQgYWxsIHRoZSBjb2xsaXNpb24gcGFpcnMgaW4gdGhlIHBoeXNpY3Mgd29ybGQKICAgICAqLwoKCiAgICBjb2xsaXNpb25QYWlycyh3b3JsZCwgcGFpcnMxLCBwYWlyczIpIHsKICAgICAgY29uc3QgYm9kaWVzID0gd29ybGQuYm9kaWVzOwogICAgICBjb25zdCBuID0gYm9kaWVzLmxlbmd0aDsKICAgICAgbGV0IGJpOwogICAgICBsZXQgYmo7IC8vIE5haXZlIE5eMiBmdHchCgogICAgICBmb3IgKGxldCBpID0gMDsgaSAhPT0gbjsgaSsrKSB7CiAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogIT09IGk7IGorKykgewogICAgICAgICAgYmkgPSBib2RpZXNbaV07CiAgICAgICAgICBiaiA9IGJvZGllc1tqXTsKCiAgICAgICAgICBpZiAoIXRoaXMubmVlZEJyb2FkcGhhc2VDb2xsaXNpb24oYmksIGJqKSkgewogICAgICAgICAgICBjb250aW51ZTsKICAgICAgICAgIH0KCiAgICAgICAgICB0aGlzLmludGVyc2VjdGlvblRlc3QoYmksIGJqLCBwYWlyczEsIHBhaXJzMik7CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgICAvKioKICAgICAqIFJldHVybnMgYWxsIHRoZSBib2RpZXMgd2l0aGluIGFuIEFBQkIuCiAgICAgKiBAcGFyYW0gcmVzdWx0IEFuIGFycmF5IHRvIHN0b3JlIHJlc3VsdGluZyBib2RpZXMgaW4uCiAgICAgKi8KCgogICAgYWFiYlF1ZXJ5KHdvcmxkLCBhYWJiLCByZXN1bHQpIHsKICAgICAgaWYgKHJlc3VsdCA9PT0gdm9pZCAwKSB7CiAgICAgICAgcmVzdWx0ID0gW107CiAgICAgIH0KCiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgd29ybGQuYm9kaWVzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgY29uc3QgYiA9IHdvcmxkLmJvZGllc1tpXTsKCiAgICAgICAgaWYgKGIuYWFiYk5lZWRzVXBkYXRlKSB7CiAgICAgICAgICBiLnVwZGF0ZUFBQkIoKTsKICAgICAgICB9IC8vIFVnbHkgaGFjayB1bnRpbCBCb2R5IGdldHMgYWFiYgoKCiAgICAgICAgaWYgKGIuYWFiYi5vdmVybGFwcyhhYWJiKSkgewogICAgICAgICAgcmVzdWx0LnB1c2goYik7CiAgICAgICAgfQogICAgICB9CgogICAgICByZXR1cm4gcmVzdWx0OwogICAgfQoKICB9CiAgLyoqCiAgICogU3RvcmFnZSBmb3IgUmF5IGNhc3RpbmcgZGF0YQogICAqLwoKCiAgY2xhc3MgUmF5Y2FzdFJlc3VsdCB7CiAgICAvKioKICAgICAqIHJheUZyb21Xb3JsZAogICAgICovCgogICAgLyoqCiAgICAgKiByYXlUb1dvcmxkCiAgICAgKi8KCiAgICAvKioKICAgICAqIGhpdE5vcm1hbFdvcmxkCiAgICAgKi8KCiAgICAvKioKICAgICAqIGhpdFBvaW50V29ybGQKICAgICAqLwoKICAgIC8qKgogICAgICogaGFzSGl0CiAgICAgKi8KCiAgICAvKioKICAgICAqIHNoYXBlCiAgICAgKi8KCiAgICAvKioKICAgICAqIGJvZHkKICAgICAqLwoKICAgIC8qKgogICAgICogVGhlIGluZGV4IG9mIHRoZSBoaXQgdHJpYW5nbGUsIGlmIHRoZSBoaXQgc2hhcGUgd2FzIGEgdHJpbWVzaAogICAgICovCgogICAgLyoqCiAgICAgKiBEaXN0YW5jZSB0byB0aGUgaGl0LiBXaWxsIGJlIHNldCB0byAtMSBpZiB0aGVyZSB3YXMgbm8gaGl0CiAgICAgKi8KCiAgICAvKioKICAgICAqIElmIHRoZSByYXkgc2hvdWxkIHN0b3AgdHJhdmVyc2luZyB0aGUgYm9kaWVzCiAgICAgKi8KICAgIGNvbnN0cnVjdG9yKCkgewogICAgICB0aGlzLnJheUZyb21Xb3JsZCA9IHZvaWQgMDsKICAgICAgdGhpcy5yYXlUb1dvcmxkID0gdm9pZCAwOwogICAgICB0aGlzLmhpdE5vcm1hbFdvcmxkID0gdm9pZCAwOwogICAgICB0aGlzLmhpdFBvaW50V29ybGQgPSB2b2lkIDA7CiAgICAgIHRoaXMuaGFzSGl0ID0gdm9pZCAwOwogICAgICB0aGlzLnNoYXBlID0gdm9pZCAwOwogICAgICB0aGlzLmJvZHkgPSB2b2lkIDA7CiAgICAgIHRoaXMuaGl0RmFjZUluZGV4ID0gdm9pZCAwOwogICAgICB0aGlzLmRpc3RhbmNlID0gdm9pZCAwOwogICAgICB0aGlzLnNob3VsZFN0b3AgPSB2b2lkIDA7CiAgICAgIHRoaXMucmF5RnJvbVdvcmxkID0gbmV3IFZlYzMoKTsKICAgICAgdGhpcy5yYXlUb1dvcmxkID0gbmV3IFZlYzMoKTsKICAgICAgdGhpcy5oaXROb3JtYWxXb3JsZCA9IG5ldyBWZWMzKCk7CiAgICAgIHRoaXMuaGl0UG9pbnRXb3JsZCA9IG5ldyBWZWMzKCk7CiAgICAgIHRoaXMuaGFzSGl0ID0gZmFsc2U7CiAgICAgIHRoaXMuc2hhcGUgPSBudWxsOwogICAgICB0aGlzLmJvZHkgPSBudWxsOwogICAgICB0aGlzLmhpdEZhY2VJbmRleCA9IC0xOwogICAgICB0aGlzLmRpc3RhbmNlID0gLTE7CiAgICAgIHRoaXMuc2hvdWxkU3RvcCA9IGZhbHNlOwogICAgfQogICAgLyoqCiAgICAgKiBSZXNldCBhbGwgcmVzdWx0IGRhdGEuCiAgICAgKi8KCgogICAgcmVzZXQoKSB7CiAgICAgIHRoaXMucmF5RnJvbVdvcmxkLnNldFplcm8oKTsKICAgICAgdGhpcy5yYXlUb1dvcmxkLnNldFplcm8oKTsKICAgICAgdGhpcy5oaXROb3JtYWxXb3JsZC5zZXRaZXJvKCk7CiAgICAgIHRoaXMuaGl0UG9pbnRXb3JsZC5zZXRaZXJvKCk7CiAgICAgIHRoaXMuaGFzSGl0ID0gZmFsc2U7CiAgICAgIHRoaXMuc2hhcGUgPSBudWxsOwogICAgICB0aGlzLmJvZHkgPSBudWxsOwogICAgICB0aGlzLmhpdEZhY2VJbmRleCA9IC0xOwogICAgICB0aGlzLmRpc3RhbmNlID0gLTE7CiAgICAgIHRoaXMuc2hvdWxkU3RvcCA9IGZhbHNlOwogICAgfQogICAgLyoqCiAgICAgKiBhYm9ydAogICAgICovCgoKICAgIGFib3J0KCkgewogICAgICB0aGlzLnNob3VsZFN0b3AgPSB0cnVlOwogICAgfQogICAgLyoqCiAgICAgKiBTZXQgcmVzdWx0IGRhdGEuCiAgICAgKi8KCgogICAgc2V0KHJheUZyb21Xb3JsZCwgcmF5VG9Xb3JsZCwgaGl0Tm9ybWFsV29ybGQsIGhpdFBvaW50V29ybGQsIHNoYXBlLCBib2R5LCBkaXN0YW5jZSkgewogICAgICB0aGlzLnJheUZyb21Xb3JsZC5jb3B5KHJheUZyb21Xb3JsZCk7CiAgICAgIHRoaXMucmF5VG9Xb3JsZC5jb3B5KHJheVRvV29ybGQpOwogICAgICB0aGlzLmhpdE5vcm1hbFdvcmxkLmNvcHkoaGl0Tm9ybWFsV29ybGQpOwogICAgICB0aGlzLmhpdFBvaW50V29ybGQuY29weShoaXRQb2ludFdvcmxkKTsKICAgICAgdGhpcy5zaGFwZSA9IHNoYXBlOwogICAgICB0aGlzLmJvZHkgPSBib2R5OwogICAgICB0aGlzLmRpc3RhbmNlID0gZGlzdGFuY2U7CiAgICB9CgogIH0KCiAgbGV0IF9TaGFwZSR0eXBlcyRTUEhFUkUsIF9TaGFwZSR0eXBlcyRQTEFORSwgX1NoYXBlJHR5cGVzJEJPWCwgX1NoYXBlJHR5cGVzJENZTElOREVSLCBfU2hhcGUkdHlwZXMkQ09OVkVYUE8sIF9TaGFwZSR0eXBlcyRIRUlHSFRGSSwgX1NoYXBlJHR5cGVzJFRSSU1FU0g7CiAgLyoqCiAgICogUkFZX01PREVTCiAgICovCgoKICBjb25zdCBSQVlfTU9ERVMgPSB7CiAgICAvKiogQ0xPU0VTVCAqLwogICAgQ0xPU0VTVDogMSwKCiAgICAvKiogQU5ZICovCiAgICBBTlk6IDIsCgogICAgLyoqIEFMTCAqLwogICAgQUxMOiA0CiAgfTsKICAvKioKICAgKiBSYXlNb2RlCiAgICovCgogIF9TaGFwZSR0eXBlcyRTUEhFUkUgPSBTaGFwZS50eXBlcy5TUEhFUkU7CiAgX1NoYXBlJHR5cGVzJFBMQU5FID0gU2hhcGUudHlwZXMuUExBTkU7CiAgX1NoYXBlJHR5cGVzJEJPWCA9IFNoYXBlLnR5cGVzLkJPWDsKICBfU2hhcGUkdHlwZXMkQ1lMSU5ERVIgPSBTaGFwZS50eXBlcy5DWUxJTkRFUjsKICBfU2hhcGUkdHlwZXMkQ09OVkVYUE8gPSBTaGFwZS50eXBlcy5DT05WRVhQT0xZSEVEUk9OOwogIF9TaGFwZSR0eXBlcyRIRUlHSFRGSSA9IFNoYXBlLnR5cGVzLkhFSUdIVEZJRUxEOwogIF9TaGFwZSR0eXBlcyRUUklNRVNIID0gU2hhcGUudHlwZXMuVFJJTUVTSDsKICAvKioKICAgKiBBIGxpbmUgaW4gM0Qgc3BhY2UgdGhhdCBpbnRlcnNlY3RzIGJvZGllcyBhbmQgcmV0dXJuIHBvaW50cy4KICAgKi8KCiAgY2xhc3MgUmF5IHsKICAgIC8qKgogICAgICogZnJvbQogICAgICovCgogICAgLyoqCiAgICAgKiB0bwogICAgICovCgogICAgLyoqCiAgICAgKiBkaXJlY3Rpb24KICAgICAqLwoKICAgIC8qKgogICAgICogVGhlIHByZWNpc2lvbiBvZiB0aGUgcmF5LiBVc2VkIHdoZW4gY2hlY2tpbmcgcGFyYWxsZWxpdHkgZXRjLgogICAgICogQGRlZmF1bHQgMC4wMDAxCiAgICAgKi8KCiAgICAvKioKICAgICAqIFNldCB0byBgZmFsc2VgIGlmIHlvdSBkb24ndCB3YW50IHRoZSBSYXkgdG8gdGFrZSBgY29sbGlzaW9uUmVzcG9uc2VgIGZsYWdzIGludG8gYWNjb3VudCBvbiBib2RpZXMgYW5kIHNoYXBlcy4KICAgICAqIEBkZWZhdWx0IHRydWUKICAgICAqLwoKICAgIC8qKgogICAgICogSWYgc2V0IHRvIGB0cnVlYCwgdGhlIHJheSBza2lwcyBhbnkgaGl0cyB3aXRoIG5vcm1hbC5kb3QocmF5RGlyZWN0aW9uKSA8IDAuCiAgICAgKiBAZGVmYXVsdCBmYWxzZQogICAgICovCgogICAgLyoqCiAgICAgKiBjb2xsaXNpb25GaWx0ZXJNYXNrCiAgICAgKiBAZGVmYXVsdCAtMQogICAgICovCgogICAgLyoqCiAgICAgKiBjb2xsaXNpb25GaWx0ZXJHcm91cAogICAgICogQGRlZmF1bHQgLTEKICAgICAqLwoKICAgIC8qKgogICAgICogVGhlIGludGVyc2VjdGlvbiBtb2RlLiBTaG91bGQgYmUgUmF5LkFOWSwgUmF5LkFMTCBvciBSYXkuQ0xPU0VTVC4KICAgICAqIEBkZWZhdWx0IFJBWS5BTlkKICAgICAqLwoKICAgIC8qKgogICAgICogQ3VycmVudCByZXN1bHQgb2JqZWN0LgogICAgICovCgogICAgLyoqCiAgICAgKiBXaWxsIGJlIHNldCB0byBgdHJ1ZWAgZHVyaW5nIGludGVyc2VjdFdvcmxkKCkgaWYgdGhlIHJheSBoaXQgYW55dGhpbmcuCiAgICAgKi8KCiAgICAvKioKICAgICAqIFVzZXItcHJvdmlkZWQgcmVzdWx0IGNhbGxiYWNrLiBXaWxsIGJlIHVzZWQgaWYgbW9kZSBpcyBSYXkuQUxMLgogICAgICovCgogICAgLyoqCiAgICAgKiBDTE9TRVNUCiAgICAgKi8KCiAgICAvKioKICAgICAqIEFOWQogICAgICovCgogICAgLyoqCiAgICAgKiBBTEwKICAgICAqLwogICAgZ2V0IFtfU2hhcGUkdHlwZXMkU1BIRVJFXSgpIHsKICAgICAgcmV0dXJuIHRoaXMuX2ludGVyc2VjdFNwaGVyZTsKICAgIH0KCiAgICBnZXQgW19TaGFwZSR0eXBlcyRQTEFORV0oKSB7CiAgICAgIHJldHVybiB0aGlzLl9pbnRlcnNlY3RQbGFuZTsKICAgIH0KCiAgICBnZXQgW19TaGFwZSR0eXBlcyRCT1hdKCkgewogICAgICByZXR1cm4gdGhpcy5faW50ZXJzZWN0Qm94OwogICAgfQoKICAgIGdldCBbX1NoYXBlJHR5cGVzJENZTElOREVSXSgpIHsKICAgICAgcmV0dXJuIHRoaXMuX2ludGVyc2VjdENvbnZleDsKICAgIH0KCiAgICBnZXQgW19TaGFwZSR0eXBlcyRDT05WRVhQT10oKSB7CiAgICAgIHJldHVybiB0aGlzLl9pbnRlcnNlY3RDb252ZXg7CiAgICB9CgogICAgZ2V0IFtfU2hhcGUkdHlwZXMkSEVJR0hURkldKCkgewogICAgICByZXR1cm4gdGhpcy5faW50ZXJzZWN0SGVpZ2h0ZmllbGQ7CiAgICB9CgogICAgZ2V0IFtfU2hhcGUkdHlwZXMkVFJJTUVTSF0oKSB7CiAgICAgIHJldHVybiB0aGlzLl9pbnRlcnNlY3RUcmltZXNoOwogICAgfQoKICAgIGNvbnN0cnVjdG9yKGZyb20sIHRvKSB7CiAgICAgIGlmIChmcm9tID09PSB2b2lkIDApIHsKICAgICAgICBmcm9tID0gbmV3IFZlYzMoKTsKICAgICAgfQoKICAgICAgaWYgKHRvID09PSB2b2lkIDApIHsKICAgICAgICB0byA9IG5ldyBWZWMzKCk7CiAgICAgIH0KCiAgICAgIHRoaXMuZnJvbSA9IHZvaWQgMDsKICAgICAgdGhpcy50byA9IHZvaWQgMDsKICAgICAgdGhpcy5kaXJlY3Rpb24gPSB2b2lkIDA7CiAgICAgIHRoaXMucHJlY2lzaW9uID0gdm9pZCAwOwogICAgICB0aGlzLmNoZWNrQ29sbGlzaW9uUmVzcG9uc2UgPSB2b2lkIDA7CiAgICAgIHRoaXMuc2tpcEJhY2tmYWNlcyA9IHZvaWQgMDsKICAgICAgdGhpcy5jb2xsaXNpb25GaWx0ZXJNYXNrID0gdm9pZCAwOwogICAgICB0aGlzLmNvbGxpc2lvbkZpbHRlckdyb3VwID0gdm9pZCAwOwogICAgICB0aGlzLm1vZGUgPSB2b2lkIDA7CiAgICAgIHRoaXMucmVzdWx0ID0gdm9pZCAwOwogICAgICB0aGlzLmhhc0hpdCA9IHZvaWQgMDsKICAgICAgdGhpcy5jYWxsYmFjayA9IHZvaWQgMDsKICAgICAgdGhpcy5mcm9tID0gZnJvbS5jbG9uZSgpOwogICAgICB0aGlzLnRvID0gdG8uY2xvbmUoKTsKICAgICAgdGhpcy5kaXJlY3Rpb24gPSBuZXcgVmVjMygpOwogICAgICB0aGlzLnByZWNpc2lvbiA9IDAuMDAwMTsKICAgICAgdGhpcy5jaGVja0NvbGxpc2lvblJlc3BvbnNlID0gdHJ1ZTsKICAgICAgdGhpcy5za2lwQmFja2ZhY2VzID0gZmFsc2U7CiAgICAgIHRoaXMuY29sbGlzaW9uRmlsdGVyTWFzayA9IC0xOwogICAgICB0aGlzLmNvbGxpc2lvbkZpbHRlckdyb3VwID0gLTE7CiAgICAgIHRoaXMubW9kZSA9IFJheS5BTlk7CiAgICAgIHRoaXMucmVzdWx0ID0gbmV3IFJheWNhc3RSZXN1bHQoKTsKICAgICAgdGhpcy5oYXNIaXQgPSBmYWxzZTsKCiAgICAgIHRoaXMuY2FsbGJhY2sgPSByZXN1bHQgPT4ge307CiAgICB9CiAgICAvKioKICAgICAqIERvIGl0ZXJzZWN0aW9uIGFnYWluc3QgYWxsIGJvZGllcyBpbiB0aGUgZ2l2ZW4gV29ybGQuCiAgICAgKiBAcmV0dXJuIFRydWUgaWYgdGhlIHJheSBoaXQgYW55dGhpbmcsIG90aGVyd2lzZSBmYWxzZS4KICAgICAqLwoKCiAgICBpbnRlcnNlY3RXb3JsZCh3b3JsZCwgb3B0aW9ucykgewogICAgICB0aGlzLm1vZGUgPSBvcHRpb25zLm1vZGUgfHwgUmF5LkFOWTsKICAgICAgdGhpcy5yZXN1bHQgPSBvcHRpb25zLnJlc3VsdCB8fCBuZXcgUmF5Y2FzdFJlc3VsdCgpOwogICAgICB0aGlzLnNraXBCYWNrZmFjZXMgPSAhIW9wdGlvbnMuc2tpcEJhY2tmYWNlczsKICAgICAgdGhpcy5jb2xsaXNpb25GaWx0ZXJNYXNrID0gdHlwZW9mIG9wdGlvbnMuY29sbGlzaW9uRmlsdGVyTWFzayAhPT0gJ3VuZGVmaW5lZCcgPyBvcHRpb25zLmNvbGxpc2lvbkZpbHRlck1hc2sgOiAtMTsKICAgICAgdGhpcy5jb2xsaXNpb25GaWx0ZXJHcm91cCA9IHR5cGVvZiBvcHRpb25zLmNvbGxpc2lvbkZpbHRlckdyb3VwICE9PSAndW5kZWZpbmVkJyA/IG9wdGlvbnMuY29sbGlzaW9uRmlsdGVyR3JvdXAgOiAtMTsKICAgICAgdGhpcy5jaGVja0NvbGxpc2lvblJlc3BvbnNlID0gdHlwZW9mIG9wdGlvbnMuY2hlY2tDb2xsaXNpb25SZXNwb25zZSAhPT0gJ3VuZGVmaW5lZCcgPyBvcHRpb25zLmNoZWNrQ29sbGlzaW9uUmVzcG9uc2UgOiB0cnVlOwoKICAgICAgaWYgKG9wdGlvbnMuZnJvbSkgewogICAgICAgIHRoaXMuZnJvbS5jb3B5KG9wdGlvbnMuZnJvbSk7CiAgICAgIH0KCiAgICAgIGlmIChvcHRpb25zLnRvKSB7CiAgICAgICAgdGhpcy50by5jb3B5KG9wdGlvbnMudG8pOwogICAgICB9CgogICAgICB0aGlzLmNhbGxiYWNrID0gb3B0aW9ucy5jYWxsYmFjayB8fCAoKCkgPT4ge30pOwoKICAgICAgdGhpcy5oYXNIaXQgPSBmYWxzZTsKICAgICAgdGhpcy5yZXN1bHQucmVzZXQoKTsKICAgICAgdGhpcy51cGRhdGVEaXJlY3Rpb24oKTsKICAgICAgdGhpcy5nZXRBQUJCKHRtcEFBQkIkMSk7CiAgICAgIHRtcEFycmF5Lmxlbmd0aCA9IDA7CiAgICAgIHdvcmxkLmJyb2FkcGhhc2UuYWFiYlF1ZXJ5KHdvcmxkLCB0bXBBQUJCJDEsIHRtcEFycmF5KTsKICAgICAgdGhpcy5pbnRlcnNlY3RCb2RpZXModG1wQXJyYXkpOwogICAgICByZXR1cm4gdGhpcy5oYXNIaXQ7CiAgICB9CiAgICAvKioKICAgICAqIFNob290IGEgcmF5IGF0IGEgYm9keSwgZ2V0IGJhY2sgaW5mb3JtYXRpb24gYWJvdXQgdGhlIGhpdC4KICAgICAqIEBkZXByZWNhdGVkIEBwYXJhbSByZXN1bHQgc2V0IHRoZSByZXN1bHQgcHJvcGVydHkgb2YgdGhlIFJheSBpbnN0ZWFkLgogICAgICovCgoKICAgIGludGVyc2VjdEJvZHkoYm9keSwgcmVzdWx0KSB7CiAgICAgIGlmIChyZXN1bHQpIHsKICAgICAgICB0aGlzLnJlc3VsdCA9IHJlc3VsdDsKICAgICAgICB0aGlzLnVwZGF0ZURpcmVjdGlvbigpOwogICAgICB9CgogICAgICBjb25zdCBjaGVja0NvbGxpc2lvblJlc3BvbnNlID0gdGhpcy5jaGVja0NvbGxpc2lvblJlc3BvbnNlOwoKICAgICAgaWYgKGNoZWNrQ29sbGlzaW9uUmVzcG9uc2UgJiYgIWJvZHkuY29sbGlzaW9uUmVzcG9uc2UpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIGlmICgodGhpcy5jb2xsaXNpb25GaWx0ZXJHcm91cCAmIGJvZHkuY29sbGlzaW9uRmlsdGVyTWFzaykgPT09IDAgfHwgKGJvZHkuY29sbGlzaW9uRmlsdGVyR3JvdXAgJiB0aGlzLmNvbGxpc2lvbkZpbHRlck1hc2spID09PSAwKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICBjb25zdCB4aSA9IGludGVyc2VjdEJvZHlfeGk7CiAgICAgIGNvbnN0IHFpID0gaW50ZXJzZWN0Qm9keV9xaTsKCiAgICAgIGZvciAobGV0IGkgPSAwLCBOID0gYm9keS5zaGFwZXMubGVuZ3RoOyBpIDwgTjsgaSsrKSB7CiAgICAgICAgY29uc3Qgc2hhcGUgPSBib2R5LnNoYXBlc1tpXTsKCiAgICAgICAgaWYgKGNoZWNrQ29sbGlzaW9uUmVzcG9uc2UgJiYgIXNoYXBlLmNvbGxpc2lvblJlc3BvbnNlKSB7CiAgICAgICAgICBjb250aW51ZTsgLy8gU2tpcAogICAgICAgIH0KCiAgICAgICAgYm9keS5xdWF0ZXJuaW9uLm11bHQoYm9keS5zaGFwZU9yaWVudGF0aW9uc1tpXSwgcWkpOwogICAgICAgIGJvZHkucXVhdGVybmlvbi52bXVsdChib2R5LnNoYXBlT2Zmc2V0c1tpXSwgeGkpOwogICAgICAgIHhpLnZhZGQoYm9keS5wb3NpdGlvbiwgeGkpOwogICAgICAgIHRoaXMuaW50ZXJzZWN0U2hhcGUoc2hhcGUsIHFpLCB4aSwgYm9keSk7CgogICAgICAgIGlmICh0aGlzLnJlc3VsdC5zaG91bGRTdG9wKSB7CiAgICAgICAgICBicmVhazsKICAgICAgICB9CiAgICAgIH0KICAgIH0KICAgIC8qKgogICAgICogU2hvb3QgYSByYXkgYXQgYW4gYXJyYXkgYm9kaWVzLCBnZXQgYmFjayBpbmZvcm1hdGlvbiBhYm91dCB0aGUgaGl0LgogICAgICogQHBhcmFtIGJvZGllcyBBbiBhcnJheSBvZiBCb2R5IG9iamVjdHMuCiAgICAgKiBAZGVwcmVjYXRlZCBAcGFyYW0gcmVzdWx0IHNldCB0aGUgcmVzdWx0IHByb3BlcnR5IG9mIHRoZSBSYXkgaW5zdGVhZC4KICAgICAqCiAgICAgKi8KCgogICAgaW50ZXJzZWN0Qm9kaWVzKGJvZGllcywgcmVzdWx0KSB7CiAgICAgIGlmIChyZXN1bHQpIHsKICAgICAgICB0aGlzLnJlc3VsdCA9IHJlc3VsdDsKICAgICAgICB0aGlzLnVwZGF0ZURpcmVjdGlvbigpOwogICAgICB9CgogICAgICBmb3IgKGxldCBpID0gMCwgbCA9IGJvZGllcy5sZW5ndGg7ICF0aGlzLnJlc3VsdC5zaG91bGRTdG9wICYmIGkgPCBsOyBpKyspIHsKICAgICAgICB0aGlzLmludGVyc2VjdEJvZHkoYm9kaWVzW2ldKTsKICAgICAgfQogICAgfQogICAgLyoqCiAgICAgKiBVcGRhdGVzIHRoZSBkaXJlY3Rpb24gdmVjdG9yLgogICAgICovCgoKICAgIHVwZGF0ZURpcmVjdGlvbigpIHsKICAgICAgdGhpcy50by52c3ViKHRoaXMuZnJvbSwgdGhpcy5kaXJlY3Rpb24pOwogICAgICB0aGlzLmRpcmVjdGlvbi5ub3JtYWxpemUoKTsKICAgIH0KCiAgICBpbnRlcnNlY3RTaGFwZShzaGFwZSwgcXVhdCwgcG9zaXRpb24sIGJvZHkpIHsKICAgICAgY29uc3QgZnJvbSA9IHRoaXMuZnJvbTsgLy8gQ2hlY2tpbmcgYm91bmRpbmdTcGhlcmUKCiAgICAgIGNvbnN0IGRpc3RhbmNlID0gZGlzdGFuY2VGcm9tSW50ZXJzZWN0aW9uKGZyb20sIHRoaXMuZGlyZWN0aW9uLCBwb3NpdGlvbik7CgogICAgICBpZiAoZGlzdGFuY2UgPiBzaGFwZS5ib3VuZGluZ1NwaGVyZVJhZGl1cykgewogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgY29uc3QgaW50ZXJzZWN0TWV0aG9kID0gdGhpc1tzaGFwZS50eXBlXTsKCiAgICAgIGlmIChpbnRlcnNlY3RNZXRob2QpIHsKICAgICAgICBpbnRlcnNlY3RNZXRob2QuY2FsbCh0aGlzLCBzaGFwZSwgcXVhdCwgcG9zaXRpb24sIGJvZHksIHNoYXBlKTsKICAgICAgfQogICAgfQoKICAgIF9pbnRlcnNlY3RCb3goYm94LCBxdWF0LCBwb3NpdGlvbiwgYm9keSwgcmVwb3J0ZWRTaGFwZSkgewogICAgICByZXR1cm4gdGhpcy5faW50ZXJzZWN0Q29udmV4KGJveC5jb252ZXhQb2x5aGVkcm9uUmVwcmVzZW50YXRpb24sIHF1YXQsIHBvc2l0aW9uLCBib2R5LCByZXBvcnRlZFNoYXBlKTsKICAgIH0KCiAgICBfaW50ZXJzZWN0UGxhbmUoc2hhcGUsIHF1YXQsIHBvc2l0aW9uLCBib2R5LCByZXBvcnRlZFNoYXBlKSB7CiAgICAgIGNvbnN0IGZyb20gPSB0aGlzLmZyb207CiAgICAgIGNvbnN0IHRvID0gdGhpcy50bzsKICAgICAgY29uc3QgZGlyZWN0aW9uID0gdGhpcy5kaXJlY3Rpb247IC8vIEdldCBwbGFuZSBub3JtYWwKCiAgICAgIGNvbnN0IHdvcmxkTm9ybWFsID0gbmV3IFZlYzMoMCwgMCwgMSk7CiAgICAgIHF1YXQudm11bHQod29ybGROb3JtYWwsIHdvcmxkTm9ybWFsKTsKICAgICAgY29uc3QgbGVuID0gbmV3IFZlYzMoKTsKICAgICAgZnJvbS52c3ViKHBvc2l0aW9uLCBsZW4pOwogICAgICBjb25zdCBwbGFuZVRvRnJvbSA9IGxlbi5kb3Qod29ybGROb3JtYWwpOwogICAgICB0by52c3ViKHBvc2l0aW9uLCBsZW4pOwogICAgICBjb25zdCBwbGFuZVRvVG8gPSBsZW4uZG90KHdvcmxkTm9ybWFsKTsKCiAgICAgIGlmIChwbGFuZVRvRnJvbSAqIHBsYW5lVG9UbyA+IDApIHsKICAgICAgICAvLyAiZnJvbSIgYW5kICJ0byIgYXJlIG9uIHRoZSBzYW1lIHNpZGUgb2YgdGhlIHBsYW5lLi4uIGJhaWwgb3V0CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICBpZiAoZnJvbS5kaXN0YW5jZVRvKHRvKSA8IHBsYW5lVG9Gcm9tKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICBjb25zdCBuX2RvdF9kaXIgPSB3b3JsZE5vcm1hbC5kb3QoZGlyZWN0aW9uKTsKCiAgICAgIGlmIChNYXRoLmFicyhuX2RvdF9kaXIpIDwgdGhpcy5wcmVjaXNpb24pIHsKICAgICAgICAvLyBObyBpbnRlcnNlY3Rpb24KICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIGNvbnN0IHBsYW5lUG9pbnRUb0Zyb20gPSBuZXcgVmVjMygpOwogICAgICBjb25zdCBkaXJfc2NhbGVkX3dpdGhfdCA9IG5ldyBWZWMzKCk7CiAgICAgIGNvbnN0IGhpdFBvaW50V29ybGQgPSBuZXcgVmVjMygpOwogICAgICBmcm9tLnZzdWIocG9zaXRpb24sIHBsYW5lUG9pbnRUb0Zyb20pOwogICAgICBjb25zdCB0ID0gLXdvcmxkTm9ybWFsLmRvdChwbGFuZVBvaW50VG9Gcm9tKSAvIG5fZG90X2RpcjsKICAgICAgZGlyZWN0aW9uLnNjYWxlKHQsIGRpcl9zY2FsZWRfd2l0aF90KTsKICAgICAgZnJvbS52YWRkKGRpcl9zY2FsZWRfd2l0aF90LCBoaXRQb2ludFdvcmxkKTsKICAgICAgdGhpcy5yZXBvcnRJbnRlcnNlY3Rpb24od29ybGROb3JtYWwsIGhpdFBvaW50V29ybGQsIHJlcG9ydGVkU2hhcGUsIGJvZHksIC0xKTsKICAgIH0KICAgIC8qKgogICAgICogR2V0IHRoZSB3b3JsZCBBQUJCIG9mIHRoZSByYXkuCiAgICAgKi8KCgogICAgZ2V0QUFCQihhYWJiKSB7CiAgICAgIGNvbnN0IHsKICAgICAgICBsb3dlckJvdW5kLAogICAgICAgIHVwcGVyQm91bmQKICAgICAgfSA9IGFhYmI7CiAgICAgIGNvbnN0IHRvID0gdGhpcy50bzsKICAgICAgY29uc3QgZnJvbSA9IHRoaXMuZnJvbTsKICAgICAgbG93ZXJCb3VuZC54ID0gTWF0aC5taW4odG8ueCwgZnJvbS54KTsKICAgICAgbG93ZXJCb3VuZC55ID0gTWF0aC5taW4odG8ueSwgZnJvbS55KTsKICAgICAgbG93ZXJCb3VuZC56ID0gTWF0aC5taW4odG8ueiwgZnJvbS56KTsKICAgICAgdXBwZXJCb3VuZC54ID0gTWF0aC5tYXgodG8ueCwgZnJvbS54KTsKICAgICAgdXBwZXJCb3VuZC55ID0gTWF0aC5tYXgodG8ueSwgZnJvbS55KTsKICAgICAgdXBwZXJCb3VuZC56ID0gTWF0aC5tYXgodG8ueiwgZnJvbS56KTsKICAgIH0KCiAgICBfaW50ZXJzZWN0SGVpZ2h0ZmllbGQoc2hhcGUsIHF1YXQsIHBvc2l0aW9uLCBib2R5LCByZXBvcnRlZFNoYXBlKSB7CiAgICAgIHNoYXBlLmRhdGE7CiAgICAgIHNoYXBlLmVsZW1lbnRTaXplOyAvLyBDb252ZXJ0IHRoZSByYXkgdG8gbG9jYWwgaGVpZ2h0ZmllbGQgY29vcmRpbmF0ZXMKCiAgICAgIGNvbnN0IGxvY2FsUmF5ID0gaW50ZXJzZWN0SGVpZ2h0ZmllbGRfbG9jYWxSYXk7IC8vbmV3IFJheSh0aGlzLmZyb20sIHRoaXMudG8pOwoKICAgICAgbG9jYWxSYXkuZnJvbS5jb3B5KHRoaXMuZnJvbSk7CiAgICAgIGxvY2FsUmF5LnRvLmNvcHkodGhpcy50byk7CiAgICAgIFRyYW5zZm9ybS5wb2ludFRvTG9jYWxGcmFtZShwb3NpdGlvbiwgcXVhdCwgbG9jYWxSYXkuZnJvbSwgbG9jYWxSYXkuZnJvbSk7CiAgICAgIFRyYW5zZm9ybS5wb2ludFRvTG9jYWxGcmFtZShwb3NpdGlvbiwgcXVhdCwgbG9jYWxSYXkudG8sIGxvY2FsUmF5LnRvKTsKICAgICAgbG9jYWxSYXkudXBkYXRlRGlyZWN0aW9uKCk7IC8vIEdldCB0aGUgaW5kZXggb2YgdGhlIGRhdGEgcG9pbnRzIHRvIHRlc3QgYWdhaW5zdAoKICAgICAgY29uc3QgaW5kZXggPSBpbnRlcnNlY3RIZWlnaHRmaWVsZF9pbmRleDsKICAgICAgbGV0IGlNaW5YOwogICAgICBsZXQgaU1pblk7CiAgICAgIGxldCBpTWF4WDsKICAgICAgbGV0IGlNYXhZOyAvLyBTZXQgdG8gbWF4CgogICAgICBpTWluWCA9IGlNaW5ZID0gMDsKICAgICAgaU1heFggPSBpTWF4WSA9IHNoYXBlLmRhdGEubGVuZ3RoIC0gMTsKICAgICAgY29uc3QgYWFiYiA9IG5ldyBBQUJCKCk7CiAgICAgIGxvY2FsUmF5LmdldEFBQkIoYWFiYik7CiAgICAgIHNoYXBlLmdldEluZGV4T2ZQb3NpdGlvbihhYWJiLmxvd2VyQm91bmQueCwgYWFiYi5sb3dlckJvdW5kLnksIGluZGV4LCB0cnVlKTsKICAgICAgaU1pblggPSBNYXRoLm1heChpTWluWCwgaW5kZXhbMF0pOwogICAgICBpTWluWSA9IE1hdGgubWF4KGlNaW5ZLCBpbmRleFsxXSk7CiAgICAgIHNoYXBlLmdldEluZGV4T2ZQb3NpdGlvbihhYWJiLnVwcGVyQm91bmQueCwgYWFiYi51cHBlckJvdW5kLnksIGluZGV4LCB0cnVlKTsKICAgICAgaU1heFggPSBNYXRoLm1pbihpTWF4WCwgaW5kZXhbMF0gKyAxKTsKICAgICAgaU1heFkgPSBNYXRoLm1pbihpTWF4WSwgaW5kZXhbMV0gKyAxKTsKCiAgICAgIGZvciAobGV0IGkgPSBpTWluWDsgaSA8IGlNYXhYOyBpKyspIHsKICAgICAgICBmb3IgKGxldCBqID0gaU1pblk7IGogPCBpTWF4WTsgaisrKSB7CiAgICAgICAgICBpZiAodGhpcy5yZXN1bHQuc2hvdWxkU3RvcCkgewogICAgICAgICAgICByZXR1cm47CiAgICAgICAgICB9CgogICAgICAgICAgc2hhcGUuZ2V0QWFiYkF0SW5kZXgoaSwgaiwgYWFiYik7CgogICAgICAgICAgaWYgKCFhYWJiLm92ZXJsYXBzUmF5KGxvY2FsUmF5KSkgewogICAgICAgICAgICBjb250aW51ZTsKICAgICAgICAgIH0gLy8gTG93ZXIgdHJpYW5nbGUKCgogICAgICAgICAgc2hhcGUuZ2V0Q29udmV4VHJpYW5nbGVQaWxsYXIoaSwgaiwgZmFsc2UpOwogICAgICAgICAgVHJhbnNmb3JtLnBvaW50VG9Xb3JsZEZyYW1lKHBvc2l0aW9uLCBxdWF0LCBzaGFwZS5waWxsYXJPZmZzZXQsIHdvcmxkUGlsbGFyT2Zmc2V0KTsKCiAgICAgICAgICB0aGlzLl9pbnRlcnNlY3RDb252ZXgoc2hhcGUucGlsbGFyQ29udmV4LCBxdWF0LCB3b3JsZFBpbGxhck9mZnNldCwgYm9keSwgcmVwb3J0ZWRTaGFwZSwgaW50ZXJzZWN0Q29udmV4T3B0aW9ucyk7CgogICAgICAgICAgaWYgKHRoaXMucmVzdWx0LnNob3VsZFN0b3ApIHsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgfSAvLyBVcHBlciB0cmlhbmdsZQoKCiAgICAgICAgICBzaGFwZS5nZXRDb252ZXhUcmlhbmdsZVBpbGxhcihpLCBqLCB0cnVlKTsKICAgICAgICAgIFRyYW5zZm9ybS5wb2ludFRvV29ybGRGcmFtZShwb3NpdGlvbiwgcXVhdCwgc2hhcGUucGlsbGFyT2Zmc2V0LCB3b3JsZFBpbGxhck9mZnNldCk7CgogICAgICAgICAgdGhpcy5faW50ZXJzZWN0Q29udmV4KHNoYXBlLnBpbGxhckNvbnZleCwgcXVhdCwgd29ybGRQaWxsYXJPZmZzZXQsIGJvZHksIHJlcG9ydGVkU2hhcGUsIGludGVyc2VjdENvbnZleE9wdGlvbnMpOwogICAgICAgIH0KICAgICAgfQogICAgfQoKICAgIF9pbnRlcnNlY3RTcGhlcmUoc3BoZXJlLCBxdWF0LCBwb3NpdGlvbiwgYm9keSwgcmVwb3J0ZWRTaGFwZSkgewogICAgICBjb25zdCBmcm9tID0gdGhpcy5mcm9tOwogICAgICBjb25zdCB0byA9IHRoaXMudG87CiAgICAgIGNvbnN0IHIgPSBzcGhlcmUucmFkaXVzOwogICAgICBjb25zdCBhID0gKHRvLnggLSBmcm9tLngpICoqIDIgKyAodG8ueSAtIGZyb20ueSkgKiogMiArICh0by56IC0gZnJvbS56KSAqKiAyOwogICAgICBjb25zdCBiID0gMiAqICgodG8ueCAtIGZyb20ueCkgKiAoZnJvbS54IC0gcG9zaXRpb24ueCkgKyAodG8ueSAtIGZyb20ueSkgKiAoZnJvbS55IC0gcG9zaXRpb24ueSkgKyAodG8ueiAtIGZyb20ueikgKiAoZnJvbS56IC0gcG9zaXRpb24ueikpOwogICAgICBjb25zdCBjID0gKGZyb20ueCAtIHBvc2l0aW9uLngpICoqIDIgKyAoZnJvbS55IC0gcG9zaXRpb24ueSkgKiogMiArIChmcm9tLnogLSBwb3NpdGlvbi56KSAqKiAyIC0gciAqKiAyOwogICAgICBjb25zdCBkZWx0YSA9IGIgKiogMiAtIDQgKiBhICogYzsKICAgICAgY29uc3QgaW50ZXJzZWN0aW9uUG9pbnQgPSBSYXlfaW50ZXJzZWN0U3BoZXJlX2ludGVyc2VjdGlvblBvaW50OwogICAgICBjb25zdCBub3JtYWwgPSBSYXlfaW50ZXJzZWN0U3BoZXJlX25vcm1hbDsKCiAgICAgIGlmIChkZWx0YSA8IDApIHsKICAgICAgICAvLyBObyBpbnRlcnNlY3Rpb24KICAgICAgICByZXR1cm47CiAgICAgIH0gZWxzZSBpZiAoZGVsdGEgPT09IDApIHsKICAgICAgICAvLyBzaW5nbGUgaW50ZXJzZWN0aW9uIHBvaW50CiAgICAgICAgZnJvbS5sZXJwKHRvLCBkZWx0YSwgaW50ZXJzZWN0aW9uUG9pbnQpOwogICAgICAgIGludGVyc2VjdGlvblBvaW50LnZzdWIocG9zaXRpb24sIG5vcm1hbCk7CiAgICAgICAgbm9ybWFsLm5vcm1hbGl6ZSgpOwogICAgICAgIHRoaXMucmVwb3J0SW50ZXJzZWN0aW9uKG5vcm1hbCwgaW50ZXJzZWN0aW9uUG9pbnQsIHJlcG9ydGVkU2hhcGUsIGJvZHksIC0xKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBjb25zdCBkMSA9ICgtYiAtIE1hdGguc3FydChkZWx0YSkpIC8gKDIgKiBhKTsKICAgICAgICBjb25zdCBkMiA9ICgtYiArIE1hdGguc3FydChkZWx0YSkpIC8gKDIgKiBhKTsKCiAgICAgICAgaWYgKGQxID49IDAgJiYgZDEgPD0gMSkgewogICAgICAgICAgZnJvbS5sZXJwKHRvLCBkMSwgaW50ZXJzZWN0aW9uUG9pbnQpOwogICAgICAgICAgaW50ZXJzZWN0aW9uUG9pbnQudnN1Yihwb3NpdGlvbiwgbm9ybWFsKTsKICAgICAgICAgIG5vcm1hbC5ub3JtYWxpemUoKTsKICAgICAgICAgIHRoaXMucmVwb3J0SW50ZXJzZWN0aW9uKG5vcm1hbCwgaW50ZXJzZWN0aW9uUG9pbnQsIHJlcG9ydGVkU2hhcGUsIGJvZHksIC0xKTsKICAgICAgICB9CgogICAgICAgIGlmICh0aGlzLnJlc3VsdC5zaG91bGRTdG9wKSB7CiAgICAgICAgICByZXR1cm47CiAgICAgICAgfQoKICAgICAgICBpZiAoZDIgPj0gMCAmJiBkMiA8PSAxKSB7CiAgICAgICAgICBmcm9tLmxlcnAodG8sIGQyLCBpbnRlcnNlY3Rpb25Qb2ludCk7CiAgICAgICAgICBpbnRlcnNlY3Rpb25Qb2ludC52c3ViKHBvc2l0aW9uLCBub3JtYWwpOwogICAgICAgICAgbm9ybWFsLm5vcm1hbGl6ZSgpOwogICAgICAgICAgdGhpcy5yZXBvcnRJbnRlcnNlY3Rpb24obm9ybWFsLCBpbnRlcnNlY3Rpb25Qb2ludCwgcmVwb3J0ZWRTaGFwZSwgYm9keSwgLTEpOwogICAgICAgIH0KICAgICAgfQogICAgfQoKICAgIF9pbnRlcnNlY3RDb252ZXgoc2hhcGUsIHF1YXQsIHBvc2l0aW9uLCBib2R5LCByZXBvcnRlZFNoYXBlLCBvcHRpb25zKSB7CiAgICAgIGNvbnN0IG5vcm1hbCA9IGludGVyc2VjdENvbnZleF9ub3JtYWw7CiAgICAgIGNvbnN0IHZlY3RvciA9IGludGVyc2VjdENvbnZleF92ZWN0b3I7CiAgICAgIGNvbnN0IGZhY2VMaXN0ID0gb3B0aW9ucyAmJiBvcHRpb25zLmZhY2VMaXN0IHx8IG51bGw7IC8vIENoZWNraW5nIGZhY2VzCgogICAgICBjb25zdCBmYWNlcyA9IHNoYXBlLmZhY2VzOwogICAgICBjb25zdCB2ZXJ0aWNlcyA9IHNoYXBlLnZlcnRpY2VzOwogICAgICBjb25zdCBub3JtYWxzID0gc2hhcGUuZmFjZU5vcm1hbHM7CiAgICAgIGNvbnN0IGRpcmVjdGlvbiA9IHRoaXMuZGlyZWN0aW9uOwogICAgICBjb25zdCBmcm9tID0gdGhpcy5mcm9tOwogICAgICBjb25zdCB0byA9IHRoaXMudG87CiAgICAgIGNvbnN0IGZyb21Ub0Rpc3RhbmNlID0gZnJvbS5kaXN0YW5jZVRvKHRvKTsKICAgICAgY29uc3QgTmZhY2VzID0gZmFjZUxpc3QgPyBmYWNlTGlzdC5sZW5ndGggOiBmYWNlcy5sZW5ndGg7CiAgICAgIGNvbnN0IHJlc3VsdCA9IHRoaXMucmVzdWx0OwoKICAgICAgZm9yIChsZXQgaiA9IDA7ICFyZXN1bHQuc2hvdWxkU3RvcCAmJiBqIDwgTmZhY2VzOyBqKyspIHsKICAgICAgICBjb25zdCBmaSA9IGZhY2VMaXN0ID8gZmFjZUxpc3Rbal0gOiBqOwogICAgICAgIGNvbnN0IGZhY2UgPSBmYWNlc1tmaV07CiAgICAgICAgY29uc3QgZmFjZU5vcm1hbCA9IG5vcm1hbHNbZmldOwogICAgICAgIGNvbnN0IHEgPSBxdWF0OwogICAgICAgIGNvbnN0IHggPSBwb3NpdGlvbjsgLy8gZGV0ZXJtaW5lIGlmIHJheSBpbnRlcnNlY3RzIHRoZSBwbGFuZSBvZiB0aGUgZmFjZQogICAgICAgIC8vIG5vdGU6IHRoaXMgd29ya3MgcmVnYXJkbGVzcyBvZiB0aGUgZGlyZWN0aW9uIG9mIHRoZSBmYWNlIG5vcm1hbAogICAgICAgIC8vIEdldCBwbGFuZSBwb2ludCBpbiB3b3JsZCBjb29yZGluYXRlcy4uLgoKICAgICAgICB2ZWN0b3IuY29weSh2ZXJ0aWNlc1tmYWNlWzBdXSk7CiAgICAgICAgcS52bXVsdCh2ZWN0b3IsIHZlY3Rvcik7CiAgICAgICAgdmVjdG9yLnZhZGQoeCwgdmVjdG9yKTsgLy8gLi4uYnV0IG1ha2UgaXQgcmVsYXRpdmUgdG8gdGhlIHJheSBmcm9tLiBXZSdsbCBmaXggdGhpcyBsYXRlci4KCiAgICAgICAgdmVjdG9yLnZzdWIoZnJvbSwgdmVjdG9yKTsgLy8gR2V0IHBsYW5lIG5vcm1hbAoKICAgICAgICBxLnZtdWx0KGZhY2VOb3JtYWwsIG5vcm1hbCk7IC8vIElmIHRoaXMgZG90IHByb2R1Y3QgaXMgbmVnYXRpdmUsIHdlIGhhdmUgc29tZXRoaW5nIGludGVyZXN0aW5nCgogICAgICAgIGNvbnN0IGRvdCA9IGRpcmVjdGlvbi5kb3Qobm9ybWFsKTsgLy8gQmFpbCBvdXQgaWYgcmF5IGFuZCBwbGFuZSBhcmUgcGFyYWxsZWwKCiAgICAgICAgaWYgKE1hdGguYWJzKGRvdCkgPCB0aGlzLnByZWNpc2lvbikgewogICAgICAgICAgY29udGludWU7CiAgICAgICAgfSAvLyBjYWxjIGRpc3RhbmNlIHRvIHBsYW5lCgoKICAgICAgICBjb25zdCBzY2FsYXIgPSBub3JtYWwuZG90KHZlY3RvcikgLyBkb3Q7IC8vIGlmIG5lZ2F0aXZlIGRpc3RhbmNlLCB0aGVuIHBsYW5lIGlzIGJlaGluZCByYXkKCiAgICAgICAgaWYgKHNjYWxhciA8IDApIHsKICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgIH0gLy8gaWYgKGRvdCA8IDApIHsKICAgICAgICAvLyBJbnRlcnNlY3Rpb24gcG9pbnQgaXMgZnJvbSArIGRpcmVjdGlvbiAqIHNjYWxhcgoKCiAgICAgICAgZGlyZWN0aW9uLnNjYWxlKHNjYWxhciwgaW50ZXJzZWN0UG9pbnQpOwogICAgICAgIGludGVyc2VjdFBvaW50LnZhZGQoZnJvbSwgaW50ZXJzZWN0UG9pbnQpOyAvLyBhIGlzIHRoZSBwb2ludCB3ZSBjb21wYXJlIHBvaW50cyBiIGFuZCBjIHdpdGguCgogICAgICAgIGEuY29weSh2ZXJ0aWNlc1tmYWNlWzBdXSk7CiAgICAgICAgcS52bXVsdChhLCBhKTsKICAgICAgICB4LnZhZGQoYSwgYSk7CgogICAgICAgIGZvciAobGV0IGkgPSAxOyAhcmVzdWx0LnNob3VsZFN0b3AgJiYgaSA8IGZhY2UubGVuZ3RoIC0gMTsgaSsrKSB7CiAgICAgICAgICAvLyBUcmFuc2Zvcm0gMyB2ZXJ0aWNlcyB0byB3b3JsZCBjb29yZHMKICAgICAgICAgIGIuY29weSh2ZXJ0aWNlc1tmYWNlW2ldXSk7CiAgICAgICAgICBjLmNvcHkodmVydGljZXNbZmFjZVtpICsgMV1dKTsKICAgICAgICAgIHEudm11bHQoYiwgYik7CiAgICAgICAgICBxLnZtdWx0KGMsIGMpOwogICAgICAgICAgeC52YWRkKGIsIGIpOwogICAgICAgICAgeC52YWRkKGMsIGMpOwogICAgICAgICAgY29uc3QgZGlzdGFuY2UgPSBpbnRlcnNlY3RQb2ludC5kaXN0YW5jZVRvKGZyb20pOwoKICAgICAgICAgIGlmICghKFJheS5wb2ludEluVHJpYW5nbGUoaW50ZXJzZWN0UG9pbnQsIGEsIGIsIGMpIHx8IFJheS5wb2ludEluVHJpYW5nbGUoaW50ZXJzZWN0UG9pbnQsIGIsIGEsIGMpKSB8fCBkaXN0YW5jZSA+IGZyb21Ub0Rpc3RhbmNlKSB7CiAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgfQoKICAgICAgICAgIHRoaXMucmVwb3J0SW50ZXJzZWN0aW9uKG5vcm1hbCwgaW50ZXJzZWN0UG9pbnQsIHJlcG9ydGVkU2hhcGUsIGJvZHksIGZpKTsKICAgICAgICB9IC8vIH0KCiAgICAgIH0KICAgIH0KICAgIC8qKgogICAgICogQHRvZG8gT3B0aW1pemUgYnkgdHJhbnNmb3JtaW5nIHRoZSB3b3JsZCB0byBsb2NhbCBzcGFjZSBmaXJzdC4KICAgICAqIEB0b2RvIFVzZSBPY3RyZWUgbG9va3VwCiAgICAgKi8KCgogICAgX2ludGVyc2VjdFRyaW1lc2gobWVzaCwgcXVhdCwgcG9zaXRpb24sIGJvZHksIHJlcG9ydGVkU2hhcGUsIG9wdGlvbnMpIHsKICAgICAgY29uc3Qgbm9ybWFsID0gaW50ZXJzZWN0VHJpbWVzaF9ub3JtYWw7CiAgICAgIGNvbnN0IHRyaWFuZ2xlcyA9IGludGVyc2VjdFRyaW1lc2hfdHJpYW5nbGVzOwogICAgICBjb25zdCB0cmVlVHJhbnNmb3JtID0gaW50ZXJzZWN0VHJpbWVzaF90cmVlVHJhbnNmb3JtOwogICAgICBjb25zdCB2ZWN0b3IgPSBpbnRlcnNlY3RDb252ZXhfdmVjdG9yOwogICAgICBjb25zdCBsb2NhbERpcmVjdGlvbiA9IGludGVyc2VjdFRyaW1lc2hfbG9jYWxEaXJlY3Rpb247CiAgICAgIGNvbnN0IGxvY2FsRnJvbSA9IGludGVyc2VjdFRyaW1lc2hfbG9jYWxGcm9tOwogICAgICBjb25zdCBsb2NhbFRvID0gaW50ZXJzZWN0VHJpbWVzaF9sb2NhbFRvOwogICAgICBjb25zdCB3b3JsZEludGVyc2VjdFBvaW50ID0gaW50ZXJzZWN0VHJpbWVzaF93b3JsZEludGVyc2VjdFBvaW50OwogICAgICBjb25zdCB3b3JsZE5vcm1hbCA9IGludGVyc2VjdFRyaW1lc2hfd29ybGROb3JtYWw7IC8vIENoZWNraW5nIGZhY2VzCgogICAgICBjb25zdCBpbmRpY2VzID0gbWVzaC5pbmRpY2VzOwogICAgICBtZXNoLnZlcnRpY2VzOyAvLyBjb25zdCBub3JtYWxzID0gbWVzaC5mYWNlTm9ybWFscwoKICAgICAgY29uc3QgZnJvbSA9IHRoaXMuZnJvbTsKICAgICAgY29uc3QgdG8gPSB0aGlzLnRvOwogICAgICBjb25zdCBkaXJlY3Rpb24gPSB0aGlzLmRpcmVjdGlvbjsKICAgICAgdHJlZVRyYW5zZm9ybS5wb3NpdGlvbi5jb3B5KHBvc2l0aW9uKTsKICAgICAgdHJlZVRyYW5zZm9ybS5xdWF0ZXJuaW9uLmNvcHkocXVhdCk7IC8vIFRyYW5zZm9ybSByYXkgdG8gbG9jYWwgc3BhY2UhCgogICAgICBUcmFuc2Zvcm0udmVjdG9yVG9Mb2NhbEZyYW1lKHBvc2l0aW9uLCBxdWF0LCBkaXJlY3Rpb24sIGxvY2FsRGlyZWN0aW9uKTsKICAgICAgVHJhbnNmb3JtLnBvaW50VG9Mb2NhbEZyYW1lKHBvc2l0aW9uLCBxdWF0LCBmcm9tLCBsb2NhbEZyb20pOwogICAgICBUcmFuc2Zvcm0ucG9pbnRUb0xvY2FsRnJhbWUocG9zaXRpb24sIHF1YXQsIHRvLCBsb2NhbFRvKTsKICAgICAgbG9jYWxUby54ICo9IG1lc2guc2NhbGUueDsKICAgICAgbG9jYWxUby55ICo9IG1lc2guc2NhbGUueTsKICAgICAgbG9jYWxUby56ICo9IG1lc2guc2NhbGUuejsKICAgICAgbG9jYWxGcm9tLnggKj0gbWVzaC5zY2FsZS54OwogICAgICBsb2NhbEZyb20ueSAqPSBtZXNoLnNjYWxlLnk7CiAgICAgIGxvY2FsRnJvbS56ICo9IG1lc2guc2NhbGUuejsKICAgICAgbG9jYWxUby52c3ViKGxvY2FsRnJvbSwgbG9jYWxEaXJlY3Rpb24pOwogICAgICBsb2NhbERpcmVjdGlvbi5ub3JtYWxpemUoKTsKICAgICAgY29uc3QgZnJvbVRvRGlzdGFuY2VTcXVhcmVkID0gbG9jYWxGcm9tLmRpc3RhbmNlU3F1YXJlZChsb2NhbFRvKTsKICAgICAgbWVzaC50cmVlLnJheVF1ZXJ5KHRoaXMsIHRyZWVUcmFuc2Zvcm0sIHRyaWFuZ2xlcyk7CgogICAgICBmb3IgKGxldCBpID0gMCwgTiA9IHRyaWFuZ2xlcy5sZW5ndGg7ICF0aGlzLnJlc3VsdC5zaG91bGRTdG9wICYmIGkgIT09IE47IGkrKykgewogICAgICAgIGNvbnN0IHRyaWFuZ2xlc0luZGV4ID0gdHJpYW5nbGVzW2ldOwogICAgICAgIG1lc2guZ2V0Tm9ybWFsKHRyaWFuZ2xlc0luZGV4LCBub3JtYWwpOyAvLyBkZXRlcm1pbmUgaWYgcmF5IGludGVyc2VjdHMgdGhlIHBsYW5lIG9mIHRoZSBmYWNlCiAgICAgICAgLy8gbm90ZTogdGhpcyB3b3JrcyByZWdhcmRsZXNzIG9mIHRoZSBkaXJlY3Rpb24gb2YgdGhlIGZhY2Ugbm9ybWFsCiAgICAgICAgLy8gR2V0IHBsYW5lIHBvaW50IGluIHdvcmxkIGNvb3JkaW5hdGVzLi4uCgogICAgICAgIG1lc2guZ2V0VmVydGV4KGluZGljZXNbdHJpYW5nbGVzSW5kZXggKiAzXSwgYSk7IC8vIC4uLmJ1dCBtYWtlIGl0IHJlbGF0aXZlIHRvIHRoZSByYXkgZnJvbS4gV2UnbGwgZml4IHRoaXMgbGF0ZXIuCgogICAgICAgIGEudnN1Yihsb2NhbEZyb20sIHZlY3Rvcik7IC8vIElmIHRoaXMgZG90IHByb2R1Y3QgaXMgbmVnYXRpdmUsIHdlIGhhdmUgc29tZXRoaW5nIGludGVyZXN0aW5nCgogICAgICAgIGNvbnN0IGRvdCA9IGxvY2FsRGlyZWN0aW9uLmRvdChub3JtYWwpOyAvLyBCYWlsIG91dCBpZiByYXkgYW5kIHBsYW5lIGFyZSBwYXJhbGxlbAogICAgICAgIC8vIGlmIChNYXRoLmFicyggZG90ICkgPCB0aGlzLnByZWNpc2lvbil7CiAgICAgICAgLy8gICAgIGNvbnRpbnVlOwogICAgICAgIC8vIH0KICAgICAgICAvLyBjYWxjIGRpc3RhbmNlIHRvIHBsYW5lCgogICAgICAgIGNvbnN0IHNjYWxhciA9IG5vcm1hbC5kb3QodmVjdG9yKSAvIGRvdDsgLy8gaWYgbmVnYXRpdmUgZGlzdGFuY2UsIHRoZW4gcGxhbmUgaXMgYmVoaW5kIHJheQoKICAgICAgICBpZiAoc2NhbGFyIDwgMCkgewogICAgICAgICAgY29udGludWU7CiAgICAgICAgfSAvLyBJbnRlcnNlY3Rpb24gcG9pbnQgaXMgZnJvbSArIGRpcmVjdGlvbiAqIHNjYWxhcgoKCiAgICAgICAgbG9jYWxEaXJlY3Rpb24uc2NhbGUoc2NhbGFyLCBpbnRlcnNlY3RQb2ludCk7CiAgICAgICAgaW50ZXJzZWN0UG9pbnQudmFkZChsb2NhbEZyb20sIGludGVyc2VjdFBvaW50KTsgLy8gR2V0IHRyaWFuZ2xlIHZlcnRpY2VzCgogICAgICAgIG1lc2guZ2V0VmVydGV4KGluZGljZXNbdHJpYW5nbGVzSW5kZXggKiAzICsgMV0sIGIpOwogICAgICAgIG1lc2guZ2V0VmVydGV4KGluZGljZXNbdHJpYW5nbGVzSW5kZXggKiAzICsgMl0sIGMpOwogICAgICAgIGNvbnN0IHNxdWFyZWREaXN0YW5jZSA9IGludGVyc2VjdFBvaW50LmRpc3RhbmNlU3F1YXJlZChsb2NhbEZyb20pOwoKICAgICAgICBpZiAoIShSYXkucG9pbnRJblRyaWFuZ2xlKGludGVyc2VjdFBvaW50LCBiLCBhLCBjKSB8fCBSYXkucG9pbnRJblRyaWFuZ2xlKGludGVyc2VjdFBvaW50LCBhLCBiLCBjKSkgfHwgc3F1YXJlZERpc3RhbmNlID4gZnJvbVRvRGlzdGFuY2VTcXVhcmVkKSB7CiAgICAgICAgICBjb250aW51ZTsKICAgICAgICB9IC8vIHRyYW5zZm9ybSBpbnRlcnNlY3Rwb2ludCBhbmQgbm9ybWFsIHRvIHdvcmxkCgoKICAgICAgICBUcmFuc2Zvcm0udmVjdG9yVG9Xb3JsZEZyYW1lKHF1YXQsIG5vcm1hbCwgd29ybGROb3JtYWwpOwogICAgICAgIFRyYW5zZm9ybS5wb2ludFRvV29ybGRGcmFtZShwb3NpdGlvbiwgcXVhdCwgaW50ZXJzZWN0UG9pbnQsIHdvcmxkSW50ZXJzZWN0UG9pbnQpOwogICAgICAgIHRoaXMucmVwb3J0SW50ZXJzZWN0aW9uKHdvcmxkTm9ybWFsLCB3b3JsZEludGVyc2VjdFBvaW50LCByZXBvcnRlZFNoYXBlLCBib2R5LCB0cmlhbmdsZXNJbmRleCk7CiAgICAgIH0KCiAgICAgIHRyaWFuZ2xlcy5sZW5ndGggPSAwOwogICAgfQogICAgLyoqCiAgICAgKiBAcmV0dXJuIFRydWUgaWYgdGhlIGludGVyc2VjdGlvbnMgc2hvdWxkIGNvbnRpbnVlCiAgICAgKi8KCgogICAgcmVwb3J0SW50ZXJzZWN0aW9uKG5vcm1hbCwgaGl0UG9pbnRXb3JsZCwgc2hhcGUsIGJvZHksIGhpdEZhY2VJbmRleCkgewogICAgICBjb25zdCBmcm9tID0gdGhpcy5mcm9tOwogICAgICBjb25zdCB0byA9IHRoaXMudG87CiAgICAgIGNvbnN0IGRpc3RhbmNlID0gZnJvbS5kaXN0YW5jZVRvKGhpdFBvaW50V29ybGQpOwogICAgICBjb25zdCByZXN1bHQgPSB0aGlzLnJlc3VsdDsgLy8gU2tpcCBiYWNrIGZhY2VzPwoKICAgICAgaWYgKHRoaXMuc2tpcEJhY2tmYWNlcyAmJiBub3JtYWwuZG90KHRoaXMuZGlyZWN0aW9uKSA+IDApIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIHJlc3VsdC5oaXRGYWNlSW5kZXggPSB0eXBlb2YgaGl0RmFjZUluZGV4ICE9PSAndW5kZWZpbmVkJyA/IGhpdEZhY2VJbmRleCA6IC0xOwoKICAgICAgc3dpdGNoICh0aGlzLm1vZGUpIHsKICAgICAgICBjYXNlIFJheS5BTEw6CiAgICAgICAgICB0aGlzLmhhc0hpdCA9IHRydWU7CiAgICAgICAgICByZXN1bHQuc2V0KGZyb20sIHRvLCBub3JtYWwsIGhpdFBvaW50V29ybGQsIHNoYXBlLCBib2R5LCBkaXN0YW5jZSk7CiAgICAgICAgICByZXN1bHQuaGFzSGl0ID0gdHJ1ZTsKICAgICAgICAgIHRoaXMuY2FsbGJhY2socmVzdWx0KTsKICAgICAgICAgIGJyZWFrOwoKICAgICAgICBjYXNlIFJheS5DTE9TRVNUOgogICAgICAgICAgLy8gU3RvcmUgaWYgY2xvc2VyIHRoYW4gY3VycmVudCBjbG9zZXN0CiAgICAgICAgICBpZiAoZGlzdGFuY2UgPCByZXN1bHQuZGlzdGFuY2UgfHwgIXJlc3VsdC5oYXNIaXQpIHsKICAgICAgICAgICAgdGhpcy5oYXNIaXQgPSB0cnVlOwogICAgICAgICAgICByZXN1bHQuaGFzSGl0ID0gdHJ1ZTsKICAgICAgICAgICAgcmVzdWx0LnNldChmcm9tLCB0bywgbm9ybWFsLCBoaXRQb2ludFdvcmxkLCBzaGFwZSwgYm9keSwgZGlzdGFuY2UpOwogICAgICAgICAgfQoKICAgICAgICAgIGJyZWFrOwoKICAgICAgICBjYXNlIFJheS5BTlk6CiAgICAgICAgICAvLyBSZXBvcnQgYW5kIHN0b3AuCiAgICAgICAgICB0aGlzLmhhc0hpdCA9IHRydWU7CiAgICAgICAgICByZXN1bHQuaGFzSGl0ID0gdHJ1ZTsKICAgICAgICAgIHJlc3VsdC5zZXQoZnJvbSwgdG8sIG5vcm1hbCwgaGl0UG9pbnRXb3JsZCwgc2hhcGUsIGJvZHksIGRpc3RhbmNlKTsKICAgICAgICAgIHJlc3VsdC5zaG91bGRTdG9wID0gdHJ1ZTsKICAgICAgICAgIGJyZWFrOwogICAgICB9CiAgICB9CiAgICAvKioKICAgICAqIEFzIHBlciAiQmFyeWNlbnRyaWMgVGVjaG5pcXVlIiBhcyBuYW1lZAogICAgICoge0BsaW5rIGh0dHBzOi8vd3d3LmJsYWNrcGF3bi5jb20vdGV4dHMvcG9pbnRpbnBvbHkvZGVmYXVsdC5odG1sIGhlcmV9IGJ1dCB3aXRob3V0IHRoZSBkaXZpc2lvbgogICAgICovCgoKICAgIHN0YXRpYyBwb2ludEluVHJpYW5nbGUocCwgYSwgYiwgYykgewogICAgICBjLnZzdWIoYSwgdjApOwogICAgICBiLnZzdWIoYSwgdjEpOwogICAgICBwLnZzdWIoYSwgdjIpOwogICAgICBjb25zdCBkb3QwMCA9IHYwLmRvdCh2MCk7CiAgICAgIGNvbnN0IGRvdDAxID0gdjAuZG90KHYxKTsKICAgICAgY29uc3QgZG90MDIgPSB2MC5kb3QodjIpOwogICAgICBjb25zdCBkb3QxMSA9IHYxLmRvdCh2MSk7CiAgICAgIGNvbnN0IGRvdDEyID0gdjEuZG90KHYyKTsKICAgICAgbGV0IHU7CiAgICAgIGxldCB2OwogICAgICByZXR1cm4gKHUgPSBkb3QxMSAqIGRvdDAyIC0gZG90MDEgKiBkb3QxMikgPj0gMCAmJiAodiA9IGRvdDAwICogZG90MTIgLSBkb3QwMSAqIGRvdDAyKSA+PSAwICYmIHUgKyB2IDwgZG90MDAgKiBkb3QxMSAtIGRvdDAxICogZG90MDE7CiAgICB9CgogIH0KCiAgUmF5LkNMT1NFU1QgPSBSQVlfTU9ERVMuQ0xPU0VTVDsKICBSYXkuQU5ZID0gUkFZX01PREVTLkFOWTsKICBSYXkuQUxMID0gUkFZX01PREVTLkFMTDsKICBjb25zdCB0bXBBQUJCJDEgPSBuZXcgQUFCQigpOwogIGNvbnN0IHRtcEFycmF5ID0gW107CiAgY29uc3QgdjEgPSBuZXcgVmVjMygpOwogIGNvbnN0IHYyID0gbmV3IFZlYzMoKTsKICBjb25zdCBpbnRlcnNlY3RCb2R5X3hpID0gbmV3IFZlYzMoKTsKICBjb25zdCBpbnRlcnNlY3RCb2R5X3FpID0gbmV3IFF1YXRlcm5pb24oKTsKICBjb25zdCBpbnRlcnNlY3RQb2ludCA9IG5ldyBWZWMzKCk7CiAgY29uc3QgYSA9IG5ldyBWZWMzKCk7CiAgY29uc3QgYiA9IG5ldyBWZWMzKCk7CiAgY29uc3QgYyA9IG5ldyBWZWMzKCk7CiAgY29uc3QgaW50ZXJzZWN0Q29udmV4T3B0aW9ucyA9IHsKICAgIGZhY2VMaXN0OiBbMF0KICB9OwogIGNvbnN0IHdvcmxkUGlsbGFyT2Zmc2V0ID0gbmV3IFZlYzMoKTsKICBjb25zdCBpbnRlcnNlY3RIZWlnaHRmaWVsZF9sb2NhbFJheSA9IG5ldyBSYXkoKTsKICBjb25zdCBpbnRlcnNlY3RIZWlnaHRmaWVsZF9pbmRleCA9IFtdOwogIGNvbnN0IFJheV9pbnRlcnNlY3RTcGhlcmVfaW50ZXJzZWN0aW9uUG9pbnQgPSBuZXcgVmVjMygpOwogIGNvbnN0IFJheV9pbnRlcnNlY3RTcGhlcmVfbm9ybWFsID0gbmV3IFZlYzMoKTsKICBjb25zdCBpbnRlcnNlY3RDb252ZXhfbm9ybWFsID0gbmV3IFZlYzMoKTsKICBjb25zdCBpbnRlcnNlY3RDb252ZXhfdmVjdG9yID0gbmV3IFZlYzMoKTsKICBjb25zdCBpbnRlcnNlY3RUcmltZXNoX25vcm1hbCA9IG5ldyBWZWMzKCk7CiAgY29uc3QgaW50ZXJzZWN0VHJpbWVzaF9sb2NhbERpcmVjdGlvbiA9IG5ldyBWZWMzKCk7CiAgY29uc3QgaW50ZXJzZWN0VHJpbWVzaF9sb2NhbEZyb20gPSBuZXcgVmVjMygpOwogIGNvbnN0IGludGVyc2VjdFRyaW1lc2hfbG9jYWxUbyA9IG5ldyBWZWMzKCk7CiAgY29uc3QgaW50ZXJzZWN0VHJpbWVzaF93b3JsZE5vcm1hbCA9IG5ldyBWZWMzKCk7CiAgY29uc3QgaW50ZXJzZWN0VHJpbWVzaF93b3JsZEludGVyc2VjdFBvaW50ID0gbmV3IFZlYzMoKTsKICBuZXcgQUFCQigpOwogIGNvbnN0IGludGVyc2VjdFRyaW1lc2hfdHJpYW5nbGVzID0gW107CiAgY29uc3QgaW50ZXJzZWN0VHJpbWVzaF90cmVlVHJhbnNmb3JtID0gbmV3IFRyYW5zZm9ybSgpOwogIGNvbnN0IHYwID0gbmV3IFZlYzMoKTsKICBjb25zdCBpbnRlcnNlY3QgPSBuZXcgVmVjMygpOwoKICBmdW5jdGlvbiBkaXN0YW5jZUZyb21JbnRlcnNlY3Rpb24oZnJvbSwgZGlyZWN0aW9uLCBwb3NpdGlvbikgewogICAgLy8gdjAgaXMgdmVjdG9yIGZyb20gZnJvbSB0byBwb3NpdGlvbgogICAgcG9zaXRpb24udnN1Yihmcm9tLCB2MCk7CiAgICBjb25zdCBkb3QgPSB2MC5kb3QoZGlyZWN0aW9uKTsgLy8gaW50ZXJzZWN0ID0gZGlyZWN0aW9uKmRvdCArIGZyb20KCiAgICBkaXJlY3Rpb24uc2NhbGUoZG90LCBpbnRlcnNlY3QpOwogICAgaW50ZXJzZWN0LnZhZGQoZnJvbSwgaW50ZXJzZWN0KTsKICAgIGNvbnN0IGRpc3RhbmNlID0gcG9zaXRpb24uZGlzdGFuY2VUbyhpbnRlcnNlY3QpOwogICAgcmV0dXJuIGRpc3RhbmNlOwogIH0KICAvKioKICAgKiBTd2VlcCBhbmQgcHJ1bmUgYnJvYWRwaGFzZSBhbG9uZyBvbmUgYXhpcy4KICAgKi8KCgogIGNsYXNzIFNBUEJyb2FkcGhhc2UgZXh0ZW5kcyBCcm9hZHBoYXNlIHsKICAgIC8qKgogICAgICogTGlzdCBvZiBib2RpZXMgY3VycmVudGx5IGluIHRoZSBicm9hZHBoYXNlLgogICAgICovCgogICAgLyoqCiAgICAgKiBUaGUgd29ybGQgdG8gc2VhcmNoIGluLgogICAgICovCgogICAgLyoqCiAgICAgKiBBeGlzIHRvIHNvcnQgdGhlIGJvZGllcyBhbG9uZy4KICAgICAqIFNldCB0byAwIGZvciB4IGF4aXMsIGFuZCAxIGZvciB5IGF4aXMuCiAgICAgKiBGb3IgYmVzdCBwZXJmb3JtYW5jZSwgcGljayB0aGUgYXhpcyB3aGVyZSBib2RpZXMgYXJlIG1vc3QgZGlzdHJpYnV0ZWQuCiAgICAgKi8KCiAgICAvKioKICAgICAqIENoZWNrIGlmIHRoZSBib3VuZHMgb2YgdHdvIGJvZGllcyBvdmVybGFwLCBhbG9uZyB0aGUgZ2l2ZW4gU0FQIGF4aXMuCiAgICAgKi8KICAgIHN0YXRpYyBjaGVja0JvdW5kcyhiaSwgYmosIGF4aXNJbmRleCkgewogICAgICBsZXQgYmlQb3M7CiAgICAgIGxldCBialBvczsKCiAgICAgIGlmIChheGlzSW5kZXggPT09IDApIHsKICAgICAgICBiaVBvcyA9IGJpLnBvc2l0aW9uLng7CiAgICAgICAgYmpQb3MgPSBiai5wb3NpdGlvbi54OwogICAgICB9IGVsc2UgaWYgKGF4aXNJbmRleCA9PT0gMSkgewogICAgICAgIGJpUG9zID0gYmkucG9zaXRpb24ueTsKICAgICAgICBialBvcyA9IGJqLnBvc2l0aW9uLnk7CiAgICAgIH0gZWxzZSBpZiAoYXhpc0luZGV4ID09PSAyKSB7CiAgICAgICAgYmlQb3MgPSBiaS5wb3NpdGlvbi56OwogICAgICAgIGJqUG9zID0gYmoucG9zaXRpb24uejsKICAgICAgfQoKICAgICAgY29uc3QgcmkgPSBiaS5ib3VuZGluZ1JhZGl1cywKICAgICAgICAgICAgcmogPSBiai5ib3VuZGluZ1JhZGl1cywKICAgICAgICAgICAgYm91bmRBMiA9IGJpUG9zICsgcmksCiAgICAgICAgICAgIGJvdW5kQjEgPSBialBvcyAtIHJqOwogICAgICByZXR1cm4gYm91bmRCMSA8IGJvdW5kQTI7CiAgICB9IC8vIE5vdGU6IHRoZXNlIGFyZSBpZGVudGljYWwsIHNhdmUgZm9yIHgveS96IGxvd2VyYm91bmQKCiAgICAvKioKICAgICAqIGluc2VydGlvblNvcnRYCiAgICAgKi8KCgogICAgc3RhdGljIGluc2VydGlvblNvcnRYKGEpIHsKICAgICAgZm9yIChsZXQgaSA9IDEsIGwgPSBhLmxlbmd0aDsgaSA8IGw7IGkrKykgewogICAgICAgIGNvbnN0IHYgPSBhW2ldOwogICAgICAgIGxldCBqOwoKICAgICAgICBmb3IgKGogPSBpIC0gMTsgaiA+PSAwOyBqLS0pIHsKICAgICAgICAgIGlmIChhW2pdLmFhYmIubG93ZXJCb3VuZC54IDw9IHYuYWFiYi5sb3dlckJvdW5kLngpIHsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICB9CgogICAgICAgICAgYVtqICsgMV0gPSBhW2pdOwogICAgICAgIH0KCiAgICAgICAgYVtqICsgMV0gPSB2OwogICAgICB9CgogICAgICByZXR1cm4gYTsKICAgIH0KICAgIC8qKgogICAgICogaW5zZXJ0aW9uU29ydFkKICAgICAqLwoKCiAgICBzdGF0aWMgaW5zZXJ0aW9uU29ydFkoYSkgewogICAgICBmb3IgKGxldCBpID0gMSwgbCA9IGEubGVuZ3RoOyBpIDwgbDsgaSsrKSB7CiAgICAgICAgY29uc3QgdiA9IGFbaV07CiAgICAgICAgbGV0IGo7CgogICAgICAgIGZvciAoaiA9IGkgLSAxOyBqID49IDA7IGotLSkgewogICAgICAgICAgaWYgKGFbal0uYWFiYi5sb3dlckJvdW5kLnkgPD0gdi5hYWJiLmxvd2VyQm91bmQueSkgewogICAgICAgICAgICBicmVhazsKICAgICAgICAgIH0KCiAgICAgICAgICBhW2ogKyAxXSA9IGFbal07CiAgICAgICAgfQoKICAgICAgICBhW2ogKyAxXSA9IHY7CiAgICAgIH0KCiAgICAgIHJldHVybiBhOwogICAgfQogICAgLyoqCiAgICAgKiBpbnNlcnRpb25Tb3J0WgogICAgICovCgoKICAgIHN0YXRpYyBpbnNlcnRpb25Tb3J0WihhKSB7CiAgICAgIGZvciAobGV0IGkgPSAxLCBsID0gYS5sZW5ndGg7IGkgPCBsOyBpKyspIHsKICAgICAgICBjb25zdCB2ID0gYVtpXTsKICAgICAgICBsZXQgajsKCiAgICAgICAgZm9yIChqID0gaSAtIDE7IGogPj0gMDsgai0tKSB7CiAgICAgICAgICBpZiAoYVtqXS5hYWJiLmxvd2VyQm91bmQueiA8PSB2LmFhYmIubG93ZXJCb3VuZC56KSB7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgfQoKICAgICAgICAgIGFbaiArIDFdID0gYVtqXTsKICAgICAgICB9CgogICAgICAgIGFbaiArIDFdID0gdjsKICAgICAgfQoKICAgICAgcmV0dXJuIGE7CiAgICB9CgogICAgY29uc3RydWN0b3Iod29ybGQpIHsKICAgICAgc3VwZXIoKTsKICAgICAgdGhpcy5heGlzTGlzdCA9IHZvaWQgMDsKICAgICAgdGhpcy53b3JsZCA9IHZvaWQgMDsKICAgICAgdGhpcy5heGlzSW5kZXggPSB2b2lkIDA7CiAgICAgIHRoaXMuX2FkZEJvZHlIYW5kbGVyID0gdm9pZCAwOwogICAgICB0aGlzLl9yZW1vdmVCb2R5SGFuZGxlciA9IHZvaWQgMDsKICAgICAgdGhpcy5heGlzTGlzdCA9IFtdOwogICAgICB0aGlzLndvcmxkID0gbnVsbDsKICAgICAgdGhpcy5heGlzSW5kZXggPSAwOwogICAgICBjb25zdCBheGlzTGlzdCA9IHRoaXMuYXhpc0xpc3Q7CgogICAgICB0aGlzLl9hZGRCb2R5SGFuZGxlciA9IGV2ZW50ID0+IHsKICAgICAgICBheGlzTGlzdC5wdXNoKGV2ZW50LmJvZHkpOwogICAgICB9OwoKICAgICAgdGhpcy5fcmVtb3ZlQm9keUhhbmRsZXIgPSBldmVudCA9PiB7CiAgICAgICAgY29uc3QgaWR4ID0gYXhpc0xpc3QuaW5kZXhPZihldmVudC5ib2R5KTsKCiAgICAgICAgaWYgKGlkeCAhPT0gLTEpIHsKICAgICAgICAgIGF4aXNMaXN0LnNwbGljZShpZHgsIDEpOwogICAgICAgIH0KICAgICAgfTsKCiAgICAgIGlmICh3b3JsZCkgewogICAgICAgIHRoaXMuc2V0V29ybGQod29ybGQpOwogICAgICB9CiAgICB9CiAgICAvKioKICAgICAqIENoYW5nZSB0aGUgd29ybGQKICAgICAqLwoKCiAgICBzZXRXb3JsZCh3b3JsZCkgewogICAgICAvLyBDbGVhciB0aGUgb2xkIGF4aXMgYXJyYXkKICAgICAgdGhpcy5heGlzTGlzdC5sZW5ndGggPSAwOyAvLyBBZGQgYWxsIGJvZGllcyBmcm9tIHRoZSBuZXcgd29ybGQKCiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgd29ybGQuYm9kaWVzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgdGhpcy5heGlzTGlzdC5wdXNoKHdvcmxkLmJvZGllc1tpXSk7CiAgICAgIH0gLy8gUmVtb3ZlIG9sZCBoYW5kbGVycywgaWYgYW55CgoKICAgICAgd29ybGQucmVtb3ZlRXZlbnRMaXN0ZW5lcignYWRkQm9keScsIHRoaXMuX2FkZEJvZHlIYW5kbGVyKTsKICAgICAgd29ybGQucmVtb3ZlRXZlbnRMaXN0ZW5lcigncmVtb3ZlQm9keScsIHRoaXMuX3JlbW92ZUJvZHlIYW5kbGVyKTsgLy8gQWRkIGhhbmRsZXJzIHRvIHVwZGF0ZSB0aGUgbGlzdCBvZiBib2RpZXMuCgogICAgICB3b3JsZC5hZGRFdmVudExpc3RlbmVyKCdhZGRCb2R5JywgdGhpcy5fYWRkQm9keUhhbmRsZXIpOwogICAgICB3b3JsZC5hZGRFdmVudExpc3RlbmVyKCdyZW1vdmVCb2R5JywgdGhpcy5fcmVtb3ZlQm9keUhhbmRsZXIpOwogICAgICB0aGlzLndvcmxkID0gd29ybGQ7CiAgICAgIHRoaXMuZGlydHkgPSB0cnVlOwogICAgfQogICAgLyoqCiAgICAgKiBDb2xsZWN0IGFsbCBjb2xsaXNpb24gcGFpcnMKICAgICAqLwoKCiAgICBjb2xsaXNpb25QYWlycyh3b3JsZCwgcDEsIHAyKSB7CiAgICAgIGNvbnN0IGJvZGllcyA9IHRoaXMuYXhpc0xpc3Q7CiAgICAgIGNvbnN0IE4gPSBib2RpZXMubGVuZ3RoOwogICAgICBjb25zdCBheGlzSW5kZXggPSB0aGlzLmF4aXNJbmRleDsKICAgICAgbGV0IGk7CiAgICAgIGxldCBqOwoKICAgICAgaWYgKHRoaXMuZGlydHkpIHsKICAgICAgICB0aGlzLnNvcnRMaXN0KCk7CiAgICAgICAgdGhpcy5kaXJ0eSA9IGZhbHNlOwogICAgICB9IC8vIExvb2sgdGhyb3VnaCB0aGUgbGlzdAoKCiAgICAgIGZvciAoaSA9IDA7IGkgIT09IE47IGkrKykgewogICAgICAgIGNvbnN0IGJpID0gYm9kaWVzW2ldOwoKICAgICAgICBmb3IgKGogPSBpICsgMTsgaiA8IE47IGorKykgewogICAgICAgICAgY29uc3QgYmogPSBib2RpZXNbal07CgogICAgICAgICAgaWYgKCF0aGlzLm5lZWRCcm9hZHBoYXNlQ29sbGlzaW9uKGJpLCBiaikpIHsKICAgICAgICAgICAgY29udGludWU7CiAgICAgICAgICB9CgogICAgICAgICAgaWYgKCFTQVBCcm9hZHBoYXNlLmNoZWNrQm91bmRzKGJpLCBiaiwgYXhpc0luZGV4KSkgewogICAgICAgICAgICBicmVhazsKICAgICAgICAgIH0KCiAgICAgICAgICB0aGlzLmludGVyc2VjdGlvblRlc3QoYmksIGJqLCBwMSwgcDIpOwogICAgICAgIH0KICAgICAgfQogICAgfQoKICAgIHNvcnRMaXN0KCkgewogICAgICBjb25zdCBheGlzTGlzdCA9IHRoaXMuYXhpc0xpc3Q7CiAgICAgIGNvbnN0IGF4aXNJbmRleCA9IHRoaXMuYXhpc0luZGV4OwogICAgICBjb25zdCBOID0gYXhpc0xpc3QubGVuZ3RoOyAvLyBVcGRhdGUgQUFCQnMKCiAgICAgIGZvciAobGV0IGkgPSAwOyBpICE9PSBOOyBpKyspIHsKICAgICAgICBjb25zdCBiaSA9IGF4aXNMaXN0W2ldOwoKICAgICAgICBpZiAoYmkuYWFiYk5lZWRzVXBkYXRlKSB7CiAgICAgICAgICBiaS51cGRhdGVBQUJCKCk7CiAgICAgICAgfQogICAgICB9IC8vIFNvcnQgdGhlIGxpc3QKCgogICAgICBpZiAoYXhpc0luZGV4ID09PSAwKSB7CiAgICAgICAgU0FQQnJvYWRwaGFzZS5pbnNlcnRpb25Tb3J0WChheGlzTGlzdCk7CiAgICAgIH0gZWxzZSBpZiAoYXhpc0luZGV4ID09PSAxKSB7CiAgICAgICAgU0FQQnJvYWRwaGFzZS5pbnNlcnRpb25Tb3J0WShheGlzTGlzdCk7CiAgICAgIH0gZWxzZSBpZiAoYXhpc0luZGV4ID09PSAyKSB7CiAgICAgICAgU0FQQnJvYWRwaGFzZS5pbnNlcnRpb25Tb3J0WihheGlzTGlzdCk7CiAgICAgIH0KICAgIH0KICAgIC8qKgogICAgICogQ29tcHV0ZXMgdGhlIHZhcmlhbmNlIG9mIHRoZSBib2R5IHBvc2l0aW9ucyBhbmQgZXN0aW1hdGVzIHRoZSBiZXN0IGF4aXMgdG8gdXNlLgogICAgICogV2lsbCBhdXRvbWF0aWNhbGx5IHNldCBwcm9wZXJ0eSBgYXhpc0luZGV4YC4KICAgICAqLwoKCiAgICBhdXRvRGV0ZWN0QXhpcygpIHsKICAgICAgbGV0IHN1bVggPSAwOwogICAgICBsZXQgc3VtWDIgPSAwOwogICAgICBsZXQgc3VtWSA9IDA7CiAgICAgIGxldCBzdW1ZMiA9IDA7CiAgICAgIGxldCBzdW1aID0gMDsKICAgICAgbGV0IHN1bVoyID0gMDsKICAgICAgY29uc3QgYm9kaWVzID0gdGhpcy5heGlzTGlzdDsKICAgICAgY29uc3QgTiA9IGJvZGllcy5sZW5ndGg7CiAgICAgIGNvbnN0IGludk4gPSAxIC8gTjsKCiAgICAgIGZvciAobGV0IGkgPSAwOyBpICE9PSBOOyBpKyspIHsKICAgICAgICBjb25zdCBiID0gYm9kaWVzW2ldOwogICAgICAgIGNvbnN0IGNlbnRlclggPSBiLnBvc2l0aW9uLng7CiAgICAgICAgc3VtWCArPSBjZW50ZXJYOwogICAgICAgIHN1bVgyICs9IGNlbnRlclggKiBjZW50ZXJYOwogICAgICAgIGNvbnN0IGNlbnRlclkgPSBiLnBvc2l0aW9uLnk7CiAgICAgICAgc3VtWSArPSBjZW50ZXJZOwogICAgICAgIHN1bVkyICs9IGNlbnRlclkgKiBjZW50ZXJZOwogICAgICAgIGNvbnN0IGNlbnRlclogPSBiLnBvc2l0aW9uLno7CiAgICAgICAgc3VtWiArPSBjZW50ZXJaOwogICAgICAgIHN1bVoyICs9IGNlbnRlclogKiBjZW50ZXJaOwogICAgICB9CgogICAgICBjb25zdCB2YXJpYW5jZVggPSBzdW1YMiAtIHN1bVggKiBzdW1YICogaW52TjsKICAgICAgY29uc3QgdmFyaWFuY2VZID0gc3VtWTIgLSBzdW1ZICogc3VtWSAqIGludk47CiAgICAgIGNvbnN0IHZhcmlhbmNlWiA9IHN1bVoyIC0gc3VtWiAqIHN1bVogKiBpbnZOOwoKICAgICAgaWYgKHZhcmlhbmNlWCA+IHZhcmlhbmNlWSkgewogICAgICAgIGlmICh2YXJpYW5jZVggPiB2YXJpYW5jZVopIHsKICAgICAgICAgIHRoaXMuYXhpc0luZGV4ID0gMDsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhpcy5heGlzSW5kZXggPSAyOwogICAgICAgIH0KICAgICAgfSBlbHNlIGlmICh2YXJpYW5jZVkgPiB2YXJpYW5jZVopIHsKICAgICAgICB0aGlzLmF4aXNJbmRleCA9IDE7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5heGlzSW5kZXggPSAyOwogICAgICB9CiAgICB9CiAgICAvKioKICAgICAqIFJldHVybnMgYWxsIHRoZSBib2RpZXMgd2l0aGluIGFuIEFBQkIuCiAgICAgKiBAcGFyYW0gcmVzdWx0IEFuIGFycmF5IHRvIHN0b3JlIHJlc3VsdGluZyBib2RpZXMgaW4uCiAgICAgKi8KCgogICAgYWFiYlF1ZXJ5KHdvcmxkLCBhYWJiLCByZXN1bHQpIHsKICAgICAgaWYgKHJlc3VsdCA9PT0gdm9pZCAwKSB7CiAgICAgICAgcmVzdWx0ID0gW107CiAgICAgIH0KCiAgICAgIGlmICh0aGlzLmRpcnR5KSB7CiAgICAgICAgdGhpcy5zb3J0TGlzdCgpOwogICAgICAgIHRoaXMuZGlydHkgPSBmYWxzZTsKICAgICAgfQoKICAgICAgY29uc3QgYXhpc0luZGV4ID0gdGhpcy5heGlzSW5kZXg7CiAgICAgIGxldCBheGlzID0gJ3gnOwoKICAgICAgaWYgKGF4aXNJbmRleCA9PT0gMSkgewogICAgICAgIGF4aXMgPSAneSc7CiAgICAgIH0KCiAgICAgIGlmIChheGlzSW5kZXggPT09IDIpIHsKICAgICAgICBheGlzID0gJ3onOwogICAgICB9CgogICAgICBjb25zdCBheGlzTGlzdCA9IHRoaXMuYXhpc0xpc3Q7CiAgICAgIGFhYmIubG93ZXJCb3VuZFtheGlzXTsKICAgICAgYWFiYi51cHBlckJvdW5kW2F4aXNdOwoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBheGlzTGlzdC5sZW5ndGg7IGkrKykgewogICAgICAgIGNvbnN0IGIgPSBheGlzTGlzdFtpXTsKCiAgICAgICAgaWYgKGIuYWFiYk5lZWRzVXBkYXRlKSB7CiAgICAgICAgICBiLnVwZGF0ZUFBQkIoKTsKICAgICAgICB9CgogICAgICAgIGlmIChiLmFhYmIub3ZlcmxhcHMoYWFiYikpIHsKICAgICAgICAgIHJlc3VsdC5wdXNoKGIpOwogICAgICAgIH0KICAgICAgfQoKICAgICAgcmV0dXJuIHJlc3VsdDsKICAgIH0KCiAgfQoKICBjbGFzcyBVdGlscyB7CiAgICAvKioKICAgICAqIEV4dGVuZCBhbiBvcHRpb25zIG9iamVjdCB3aXRoIGRlZmF1bHQgdmFsdWVzLgogICAgICogQHBhcmFtIG9wdGlvbnMgVGhlIG9wdGlvbnMgb2JqZWN0LiBNYXkgYmUgZmFsc3k6IGluIHRoaXMgY2FzZSwgYSBuZXcgb2JqZWN0IGlzIGNyZWF0ZWQgYW5kIHJldHVybmVkLgogICAgICogQHBhcmFtIGRlZmF1bHRzIEFuIG9iamVjdCBjb250YWluaW5nIGRlZmF1bHQgdmFsdWVzLgogICAgICogQHJldHVybiBUaGUgbW9kaWZpZWQgb3B0aW9ucyBvYmplY3QuCiAgICAgKi8KICAgIHN0YXRpYyBkZWZhdWx0cyhvcHRpb25zLCBkZWZhdWx0cykgewogICAgICBpZiAob3B0aW9ucyA9PT0gdm9pZCAwKSB7CiAgICAgICAgb3B0aW9ucyA9IHt9OwogICAgICB9CgogICAgICBmb3IgKGxldCBrZXkgaW4gZGVmYXVsdHMpIHsKICAgICAgICBpZiAoIShrZXkgaW4gb3B0aW9ucykpIHsKICAgICAgICAgIG9wdGlvbnNba2V5XSA9IGRlZmF1bHRzW2tleV07CiAgICAgICAgfQogICAgICB9CgogICAgICByZXR1cm4gb3B0aW9uczsKICAgIH0KCiAgfQogIC8qKgogICAqIENvbnN0cmFpbnQgYmFzZSBjbGFzcwogICAqLwoKCiAgY2xhc3MgQ29uc3RyYWludCB7CiAgICAvKioKICAgICAqIEVxdWF0aW9ucyB0byBiZSBzb2x2ZWQgaW4gdGhpcyBjb25zdHJhaW50LgogICAgICovCgogICAgLyoqCiAgICAgKiBCb2R5IEEuCiAgICAgKi8KCiAgICAvKioKICAgICAqIEJvZHkgQi4KICAgICAqLwoKICAgIC8qKgogICAgICogU2V0IHRvIGZhbHNlIGlmIHlvdSBkb24ndCB3YW50IHRoZSBib2RpZXMgdG8gY29sbGlkZSB3aGVuIHRoZXkgYXJlIGNvbm5lY3RlZC4KICAgICAqLwogICAgY29uc3RydWN0b3IoYm9keUEsIGJvZHlCLCBvcHRpb25zKSB7CiAgICAgIGlmIChvcHRpb25zID09PSB2b2lkIDApIHsKICAgICAgICBvcHRpb25zID0ge307CiAgICAgIH0KCiAgICAgIHRoaXMuZXF1YXRpb25zID0gdm9pZCAwOwogICAgICB0aGlzLmJvZHlBID0gdm9pZCAwOwogICAgICB0aGlzLmJvZHlCID0gdm9pZCAwOwogICAgICB0aGlzLmlkID0gdm9pZCAwOwogICAgICB0aGlzLmNvbGxpZGVDb25uZWN0ZWQgPSB2b2lkIDA7CiAgICAgIG9wdGlvbnMgPSBVdGlscy5kZWZhdWx0cyhvcHRpb25zLCB7CiAgICAgICAgY29sbGlkZUNvbm5lY3RlZDogdHJ1ZSwKICAgICAgICB3YWtlVXBCb2RpZXM6IHRydWUKICAgICAgfSk7CiAgICAgIHRoaXMuZXF1YXRpb25zID0gW107CiAgICAgIHRoaXMuYm9keUEgPSBib2R5QTsKICAgICAgdGhpcy5ib2R5QiA9IGJvZHlCOwogICAgICB0aGlzLmlkID0gQ29uc3RyYWludC5pZENvdW50ZXIrKzsKICAgICAgdGhpcy5jb2xsaWRlQ29ubmVjdGVkID0gb3B0aW9ucy5jb2xsaWRlQ29ubmVjdGVkOwoKICAgICAgaWYgKG9wdGlvbnMud2FrZVVwQm9kaWVzKSB7CiAgICAgICAgaWYgKGJvZHlBKSB7CiAgICAgICAgICBib2R5QS53YWtlVXAoKTsKICAgICAgICB9CgogICAgICAgIGlmIChib2R5QikgewogICAgICAgICAgYm9keUIud2FrZVVwKCk7CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgICAvKioKICAgICAqIFVwZGF0ZSBhbGwgdGhlIGVxdWF0aW9ucyB3aXRoIGRhdGEuCiAgICAgKi8KCgogICAgdXBkYXRlKCkgewogICAgICB0aHJvdyBuZXcgRXJyb3IoJ21ldGhvZCB1cGRhdGUoKSBub3QgaW1wbG1lbWVudGVkIGluIHRoaXMgQ29uc3RyYWludCBzdWJjbGFzcyEnKTsKICAgIH0KICAgIC8qKgogICAgICogRW5hYmxlcyBhbGwgZXF1YXRpb25zIGluIHRoZSBjb25zdHJhaW50LgogICAgICovCgoKICAgIGVuYWJsZSgpIHsKICAgICAgY29uc3QgZXFzID0gdGhpcy5lcXVhdGlvbnM7CgogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGVxcy5sZW5ndGg7IGkrKykgewogICAgICAgIGVxc1tpXS5lbmFibGVkID0gdHJ1ZTsKICAgICAgfQogICAgfQogICAgLyoqCiAgICAgKiBEaXNhYmxlcyBhbGwgZXF1YXRpb25zIGluIHRoZSBjb25zdHJhaW50LgogICAgICovCgoKICAgIGRpc2FibGUoKSB7CiAgICAgIGNvbnN0IGVxcyA9IHRoaXMuZXF1YXRpb25zOwoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBlcXMubGVuZ3RoOyBpKyspIHsKICAgICAgICBlcXNbaV0uZW5hYmxlZCA9IGZhbHNlOwogICAgICB9CiAgICB9CgogIH0KCiAgQ29uc3RyYWludC5pZENvdW50ZXIgPSAwOwogIC8qKgogICAqIEFuIGVsZW1lbnQgY29udGFpbmluZyA2IGVudHJpZXMsIDMgc3BhdGlhbCBhbmQgMyByb3RhdGlvbmFsIGRlZ3JlZXMgb2YgZnJlZWRvbS4KICAgKi8KCiAgY2xhc3MgSmFjb2JpYW5FbGVtZW50IHsKICAgIC8qKgogICAgICogc3BhdGlhbAogICAgICovCgogICAgLyoqCiAgICAgKiByb3RhdGlvbmFsCiAgICAgKi8KICAgIGNvbnN0cnVjdG9yKCkgewogICAgICB0aGlzLnNwYXRpYWwgPSB2b2lkIDA7CiAgICAgIHRoaXMucm90YXRpb25hbCA9IHZvaWQgMDsKICAgICAgdGhpcy5zcGF0aWFsID0gbmV3IFZlYzMoKTsKICAgICAgdGhpcy5yb3RhdGlvbmFsID0gbmV3IFZlYzMoKTsKICAgIH0KICAgIC8qKgogICAgICogTXVsdGlwbHkgd2l0aCBvdGhlciBKYWNvYmlhbkVsZW1lbnQKICAgICAqLwoKCiAgICBtdWx0aXBseUVsZW1lbnQoZWxlbWVudCkgewogICAgICByZXR1cm4gZWxlbWVudC5zcGF0aWFsLmRvdCh0aGlzLnNwYXRpYWwpICsgZWxlbWVudC5yb3RhdGlvbmFsLmRvdCh0aGlzLnJvdGF0aW9uYWwpOwogICAgfQogICAgLyoqCiAgICAgKiBNdWx0aXBseSB3aXRoIHR3byB2ZWN0b3JzCiAgICAgKi8KCgogICAgbXVsdGlwbHlWZWN0b3JzKHNwYXRpYWwsIHJvdGF0aW9uYWwpIHsKICAgICAgcmV0dXJuIHNwYXRpYWwuZG90KHRoaXMuc3BhdGlhbCkgKyByb3RhdGlvbmFsLmRvdCh0aGlzLnJvdGF0aW9uYWwpOwogICAgfQoKICB9CiAgLyoqCiAgICogRXF1YXRpb24gYmFzZSBjbGFzcy4KICAgKgogICAqIGBhYCwgYGJgIGFuZCBgZXBzYCBhcmUge0BsaW5rIGh0dHBzOi8vd3d3OC5jcy51bXUuc2Uva3Vyc2VyLzVEVjA1OC9WVDE1L2xlY3R1cmVzL1NQT09LbGFibm90ZXMucGRmIFNQT09LfSBwYXJhbWV0ZXJzIHRoYXQgZGVmYXVsdCB0byBgMC4wYC4gU2VlIHtAbGluayBodHRwczovL2dpdGh1Yi5jb20vc2NodGVwcGUvY2Fubm9uLmpzL2lzc3Vlcy8yMzgjaXNzdWVjb21tZW50LTE0NzE3MjMyNyB0aGlzIGV4Y2hhbmdlfSBmb3IgbW9yZSBkZXRhaWxzIG9uIENhbm5vbidzIHBoeXNpY3MgaW1wbGVtZW50YXRpb24uCiAgICovCgoKICBjbGFzcyBFcXVhdGlvbiB7CiAgICAvKioKICAgICAqIE1pbmltdW0gKHJlYWQ6IG5lZ2F0aXZlIG1heCkgZm9yY2UgdG8gYmUgYXBwbGllZCBieSB0aGUgY29uc3RyYWludC4KICAgICAqLwoKICAgIC8qKgogICAgICogTWF4aW11bSAocmVhZDogcG9zaXRpdmUgbWF4KSBmb3JjZSB0byBiZSBhcHBsaWVkIGJ5IHRoZSBjb25zdHJhaW50LgogICAgICovCgogICAgLyoqCiAgICAgKiBTUE9PSyBwYXJhbWV0ZXIKICAgICAqLwoKICAgIC8qKgogICAgICogU1BPT0sgcGFyYW1ldGVyCiAgICAgKi8KCiAgICAvKioKICAgICAqIFNQT09LIHBhcmFtZXRlcgogICAgICovCgogICAgLyoqCiAgICAgKiBBIG51bWJlciwgcHJvcG9ydGlvbmFsIHRvIHRoZSBmb3JjZSBhZGRlZCB0byB0aGUgYm9kaWVzLgogICAgICovCiAgICBjb25zdHJ1Y3RvcihiaSwgYmosIG1pbkZvcmNlLCBtYXhGb3JjZSkgewogICAgICBpZiAobWluRm9yY2UgPT09IHZvaWQgMCkgewogICAgICAgIG1pbkZvcmNlID0gLTFlNjsKICAgICAgfQoKICAgICAgaWYgKG1heEZvcmNlID09PSB2b2lkIDApIHsKICAgICAgICBtYXhGb3JjZSA9IDFlNjsKICAgICAgfQoKICAgICAgdGhpcy5pZCA9IHZvaWQgMDsKICAgICAgdGhpcy5taW5Gb3JjZSA9IHZvaWQgMDsKICAgICAgdGhpcy5tYXhGb3JjZSA9IHZvaWQgMDsKICAgICAgdGhpcy5iaSA9IHZvaWQgMDsKICAgICAgdGhpcy5iaiA9IHZvaWQgMDsKICAgICAgdGhpcy5zaSA9IHZvaWQgMDsKICAgICAgdGhpcy5zaiA9IHZvaWQgMDsKICAgICAgdGhpcy5hID0gdm9pZCAwOwogICAgICB0aGlzLmIgPSB2b2lkIDA7CiAgICAgIHRoaXMuZXBzID0gdm9pZCAwOwogICAgICB0aGlzLmphY29iaWFuRWxlbWVudEEgPSB2b2lkIDA7CiAgICAgIHRoaXMuamFjb2JpYW5FbGVtZW50QiA9IHZvaWQgMDsKICAgICAgdGhpcy5lbmFibGVkID0gdm9pZCAwOwogICAgICB0aGlzLm11bHRpcGxpZXIgPSB2b2lkIDA7CiAgICAgIHRoaXMuaWQgPSBFcXVhdGlvbi5pZENvdW50ZXIrKzsKICAgICAgdGhpcy5taW5Gb3JjZSA9IG1pbkZvcmNlOwogICAgICB0aGlzLm1heEZvcmNlID0gbWF4Rm9yY2U7CiAgICAgIHRoaXMuYmkgPSBiaTsKICAgICAgdGhpcy5iaiA9IGJqOwogICAgICB0aGlzLmEgPSAwLjA7IC8vIFNQT09LIHBhcmFtZXRlcgoKICAgICAgdGhpcy5iID0gMC4wOyAvLyBTUE9PSyBwYXJhbWV0ZXIKCiAgICAgIHRoaXMuZXBzID0gMC4wOyAvLyBTUE9PSyBwYXJhbWV0ZXIKCiAgICAgIHRoaXMuamFjb2JpYW5FbGVtZW50QSA9IG5ldyBKYWNvYmlhbkVsZW1lbnQoKTsKICAgICAgdGhpcy5qYWNvYmlhbkVsZW1lbnRCID0gbmV3IEphY29iaWFuRWxlbWVudCgpOwogICAgICB0aGlzLmVuYWJsZWQgPSB0cnVlOwogICAgICB0aGlzLm11bHRpcGxpZXIgPSAwOwogICAgICB0aGlzLnNldFNwb29rUGFyYW1zKDFlNywgNCwgMSAvIDYwKTsgLy8gU2V0IHR5cGljYWwgc3Bvb2sgcGFyYW1zCiAgICB9CiAgICAvKioKICAgICAqIFJlY2FsY3VsYXRlcyBhLCBiLCBhbmQgZXBzLgogICAgICoKICAgICAqIFRoZSBFcXVhdGlvbiBjb25zdHJ1Y3RvciBzZXRzIHR5cGljYWwgU1BPT0sgcGFyYW1ldGVycyBhcyBzdWNoOgogICAgICogKiBgc3RpZmZuZXNzYCA9IDFlNwogICAgICogKiBgcmVsYXhhdGlvbmAgPSA0CiAgICAgKiAqIGB0aW1lU3RlcGA9IDEgLyA2MCwgX25vdGUgdGhlIGhhcmRjb2RlZCByZWZyZXNoIHJhdGUuXwogICAgICovCgoKICAgIHNldFNwb29rUGFyYW1zKHN0aWZmbmVzcywgcmVsYXhhdGlvbiwgdGltZVN0ZXApIHsKICAgICAgY29uc3QgZCA9IHJlbGF4YXRpb247CiAgICAgIGNvbnN0IGsgPSBzdGlmZm5lc3M7CiAgICAgIGNvbnN0IGggPSB0aW1lU3RlcDsKICAgICAgdGhpcy5hID0gNC4wIC8gKGggKiAoMSArIDQgKiBkKSk7CiAgICAgIHRoaXMuYiA9IDQuMCAqIGQgLyAoMSArIDQgKiBkKTsKICAgICAgdGhpcy5lcHMgPSA0LjAgLyAoaCAqIGggKiBrICogKDEgKyA0ICogZCkpOwogICAgfQogICAgLyoqCiAgICAgKiBDb21wdXRlcyB0aGUgcmlnaHQgaGFuZCBzaWRlIG9mIHRoZSBTUE9PSyBlcXVhdGlvbgogICAgICovCgoKICAgIGNvbXB1dGVCKGEsIGIsIGgpIHsKICAgICAgY29uc3QgR1cgPSB0aGlzLmNvbXB1dGVHVygpOwogICAgICBjb25zdCBHcSA9IHRoaXMuY29tcHV0ZUdxKCk7CiAgICAgIGNvbnN0IEdpTWYgPSB0aGlzLmNvbXB1dGVHaU1mKCk7CiAgICAgIHJldHVybiAtR3EgKiBhIC0gR1cgKiBiIC0gR2lNZiAqIGg7CiAgICB9CiAgICAvKioKICAgICAqIENvbXB1dGVzIEcqcSwgd2hlcmUgcSBhcmUgdGhlIGdlbmVyYWxpemVkIGJvZHkgY29vcmRpbmF0ZXMKICAgICAqLwoKCiAgICBjb21wdXRlR3EoKSB7CiAgICAgIGNvbnN0IEdBID0gdGhpcy5qYWNvYmlhbkVsZW1lbnRBOwogICAgICBjb25zdCBHQiA9IHRoaXMuamFjb2JpYW5FbGVtZW50QjsKICAgICAgY29uc3QgYmkgPSB0aGlzLmJpOwogICAgICBjb25zdCBiaiA9IHRoaXMuYmo7CiAgICAgIGNvbnN0IHhpID0gYmkucG9zaXRpb247CiAgICAgIGNvbnN0IHhqID0gYmoucG9zaXRpb247CiAgICAgIHJldHVybiBHQS5zcGF0aWFsLmRvdCh4aSkgKyBHQi5zcGF0aWFsLmRvdCh4aik7CiAgICB9CiAgICAvKioKICAgICAqIENvbXB1dGVzIEcqVywgd2hlcmUgVyBhcmUgdGhlIGJvZHkgdmVsb2NpdGllcwogICAgICovCgoKICAgIGNvbXB1dGVHVygpIHsKICAgICAgY29uc3QgR0EgPSB0aGlzLmphY29iaWFuRWxlbWVudEE7CiAgICAgIGNvbnN0IEdCID0gdGhpcy5qYWNvYmlhbkVsZW1lbnRCOwogICAgICBjb25zdCBiaSA9IHRoaXMuYmk7CiAgICAgIGNvbnN0IGJqID0gdGhpcy5iajsKICAgICAgY29uc3QgdmkgPSBiaS52ZWxvY2l0eTsKICAgICAgY29uc3QgdmogPSBiai52ZWxvY2l0eTsKICAgICAgY29uc3Qgd2kgPSBiaS5hbmd1bGFyVmVsb2NpdHk7CiAgICAgIGNvbnN0IHdqID0gYmouYW5ndWxhclZlbG9jaXR5OwogICAgICByZXR1cm4gR0EubXVsdGlwbHlWZWN0b3JzKHZpLCB3aSkgKyBHQi5tdWx0aXBseVZlY3RvcnModmosIHdqKTsKICAgIH0KICAgIC8qKgogICAgICogQ29tcHV0ZXMgRypXbGFtYmRhLCB3aGVyZSBXIGFyZSB0aGUgYm9keSB2ZWxvY2l0aWVzCiAgICAgKi8KCgogICAgY29tcHV0ZUdXbGFtYmRhKCkgewogICAgICBjb25zdCBHQSA9IHRoaXMuamFjb2JpYW5FbGVtZW50QTsKICAgICAgY29uc3QgR0IgPSB0aGlzLmphY29iaWFuRWxlbWVudEI7CiAgICAgIGNvbnN0IGJpID0gdGhpcy5iaTsKICAgICAgY29uc3QgYmogPSB0aGlzLmJqOwogICAgICBjb25zdCB2aSA9IGJpLnZsYW1iZGE7CiAgICAgIGNvbnN0IHZqID0gYmoudmxhbWJkYTsKICAgICAgY29uc3Qgd2kgPSBiaS53bGFtYmRhOwogICAgICBjb25zdCB3aiA9IGJqLndsYW1iZGE7CiAgICAgIHJldHVybiBHQS5tdWx0aXBseVZlY3RvcnModmksIHdpKSArIEdCLm11bHRpcGx5VmVjdG9ycyh2aiwgd2opOwogICAgfQogICAgLyoqCiAgICAgKiBDb21wdXRlcyBHKmludihNKSpmLCB3aGVyZSBNIGlzIHRoZSBtYXNzIG1hdHJpeCB3aXRoIGRpYWdvbmFsIGJsb2NrcyBmb3IgZWFjaCBib2R5LCBhbmQgZiBhcmUgdGhlIGZvcmNlcyBvbiB0aGUgYm9kaWVzLgogICAgICovCgoKICAgIGNvbXB1dGVHaU1mKCkgewogICAgICBjb25zdCBHQSA9IHRoaXMuamFjb2JpYW5FbGVtZW50QTsKICAgICAgY29uc3QgR0IgPSB0aGlzLmphY29iaWFuRWxlbWVudEI7CiAgICAgIGNvbnN0IGJpID0gdGhpcy5iaTsKICAgICAgY29uc3QgYmogPSB0aGlzLmJqOwogICAgICBjb25zdCBmaSA9IGJpLmZvcmNlOwogICAgICBjb25zdCB0aSA9IGJpLnRvcnF1ZTsKICAgICAgY29uc3QgZmogPSBiai5mb3JjZTsKICAgICAgY29uc3QgdGogPSBiai50b3JxdWU7CiAgICAgIGNvbnN0IGludk1hc3NpID0gYmkuaW52TWFzc1NvbHZlOwogICAgICBjb25zdCBpbnZNYXNzaiA9IGJqLmludk1hc3NTb2x2ZTsKICAgICAgZmkuc2NhbGUoaW52TWFzc2ksIGlNZmkpOwogICAgICBmai5zY2FsZShpbnZNYXNzaiwgaU1maik7CiAgICAgIGJpLmludkluZXJ0aWFXb3JsZFNvbHZlLnZtdWx0KHRpLCBpbnZJaV92bXVsdF90YXVpKTsKICAgICAgYmouaW52SW5lcnRpYVdvcmxkU29sdmUudm11bHQodGosIGludklqX3ZtdWx0X3RhdWopOwogICAgICByZXR1cm4gR0EubXVsdGlwbHlWZWN0b3JzKGlNZmksIGludklpX3ZtdWx0X3RhdWkpICsgR0IubXVsdGlwbHlWZWN0b3JzKGlNZmosIGludklqX3ZtdWx0X3RhdWopOwogICAgfQogICAgLyoqCiAgICAgKiBDb21wdXRlcyBHKmludihNKSpHJwogICAgICovCgoKICAgIGNvbXB1dGVHaU1HdCgpIHsKICAgICAgY29uc3QgR0EgPSB0aGlzLmphY29iaWFuRWxlbWVudEE7CiAgICAgIGNvbnN0IEdCID0gdGhpcy5qYWNvYmlhbkVsZW1lbnRCOwogICAgICBjb25zdCBiaSA9IHRoaXMuYmk7CiAgICAgIGNvbnN0IGJqID0gdGhpcy5iajsKICAgICAgY29uc3QgaW52TWFzc2kgPSBiaS5pbnZNYXNzU29sdmU7CiAgICAgIGNvbnN0IGludk1hc3NqID0gYmouaW52TWFzc1NvbHZlOwogICAgICBjb25zdCBpbnZJaSA9IGJpLmludkluZXJ0aWFXb3JsZFNvbHZlOwogICAgICBjb25zdCBpbnZJaiA9IGJqLmludkluZXJ0aWFXb3JsZFNvbHZlOwogICAgICBsZXQgcmVzdWx0ID0gaW52TWFzc2kgKyBpbnZNYXNzajsKICAgICAgaW52SWkudm11bHQoR0Eucm90YXRpb25hbCwgdG1wKTsKICAgICAgcmVzdWx0ICs9IHRtcC5kb3QoR0Eucm90YXRpb25hbCk7CiAgICAgIGludklqLnZtdWx0KEdCLnJvdGF0aW9uYWwsIHRtcCk7CiAgICAgIHJlc3VsdCArPSB0bXAuZG90KEdCLnJvdGF0aW9uYWwpOwogICAgICByZXR1cm4gcmVzdWx0OwogICAgfQogICAgLyoqCiAgICAgKiBBZGQgY29uc3RyYWludCB2ZWxvY2l0eSB0byB0aGUgYm9kaWVzLgogICAgICovCgoKICAgIGFkZFRvV2xhbWJkYShkZWx0YWxhbWJkYSkgewogICAgICBjb25zdCBHQSA9IHRoaXMuamFjb2JpYW5FbGVtZW50QTsKICAgICAgY29uc3QgR0IgPSB0aGlzLmphY29iaWFuRWxlbWVudEI7CiAgICAgIGNvbnN0IGJpID0gdGhpcy5iaTsKICAgICAgY29uc3QgYmogPSB0aGlzLmJqOwogICAgICBjb25zdCB0ZW1wID0gYWRkVG9XbGFtYmRhX3RlbXA7IC8vIEFkZCB0byBsaW5lYXIgdmVsb2NpdHkKICAgICAgLy8gdl9sYW1iZGEgKz0gaW52KE0pICogZGVsdGFfbGFtYmEgKiBHCgogICAgICBiaS52bGFtYmRhLmFkZFNjYWxlZFZlY3RvcihiaS5pbnZNYXNzU29sdmUgKiBkZWx0YWxhbWJkYSwgR0Euc3BhdGlhbCwgYmkudmxhbWJkYSk7CiAgICAgIGJqLnZsYW1iZGEuYWRkU2NhbGVkVmVjdG9yKGJqLmludk1hc3NTb2x2ZSAqIGRlbHRhbGFtYmRhLCBHQi5zcGF0aWFsLCBiai52bGFtYmRhKTsgLy8gQWRkIHRvIGFuZ3VsYXIgdmVsb2NpdHkKCiAgICAgIGJpLmludkluZXJ0aWFXb3JsZFNvbHZlLnZtdWx0KEdBLnJvdGF0aW9uYWwsIHRlbXApOwogICAgICBiaS53bGFtYmRhLmFkZFNjYWxlZFZlY3RvcihkZWx0YWxhbWJkYSwgdGVtcCwgYmkud2xhbWJkYSk7CiAgICAgIGJqLmludkluZXJ0aWFXb3JsZFNvbHZlLnZtdWx0KEdCLnJvdGF0aW9uYWwsIHRlbXApOwogICAgICBiai53bGFtYmRhLmFkZFNjYWxlZFZlY3RvcihkZWx0YWxhbWJkYSwgdGVtcCwgYmoud2xhbWJkYSk7CiAgICB9CiAgICAvKioKICAgICAqIENvbXB1dGUgdGhlIGRlbm9taW5hdG9yIHBhcnQgb2YgdGhlIFNQT09LIGVxdWF0aW9uOiBDID0gRyppbnYoTSkqRycgKyBlcHMKICAgICAqLwoKCiAgICBjb21wdXRlQygpIHsKICAgICAgcmV0dXJuIHRoaXMuY29tcHV0ZUdpTUd0KCkgKyB0aGlzLmVwczsKICAgIH0KCiAgfQoKICBFcXVhdGlvbi5pZENvdW50ZXIgPSAwOwogIGNvbnN0IGlNZmkgPSBuZXcgVmVjMygpOwogIGNvbnN0IGlNZmogPSBuZXcgVmVjMygpOwogIGNvbnN0IGludklpX3ZtdWx0X3RhdWkgPSBuZXcgVmVjMygpOwogIGNvbnN0IGludklqX3ZtdWx0X3RhdWogPSBuZXcgVmVjMygpOwogIGNvbnN0IHRtcCA9IG5ldyBWZWMzKCk7CiAgY29uc3QgYWRkVG9XbGFtYmRhX3RlbXAgPSBuZXcgVmVjMygpOwogIC8qKgogICAqIENvbnRhY3Qvbm9uLXBlbmV0cmF0aW9uIGNvbnN0cmFpbnQgZXF1YXRpb24KICAgKi8KCiAgY2xhc3MgQ29udGFjdEVxdWF0aW9uIGV4dGVuZHMgRXF1YXRpb24gewogICAgLyoqCiAgICAgKiAiYm91bmNpbmVzcyI6IHUxID0gLWUqdTAKICAgICAqLwoKICAgIC8qKgogICAgICogV29ybGQtb3JpZW50ZWQgdmVjdG9yIHRoYXQgZ29lcyBmcm9tIHRoZSBjZW50ZXIgb2YgYmkgdG8gdGhlIGNvbnRhY3QgcG9pbnQuCiAgICAgKi8KCiAgICAvKioKICAgICAqIFdvcmxkLW9yaWVudGVkIHZlY3RvciB0aGF0IHN0YXJ0cyBpbiBib2R5IGogcG9zaXRpb24gYW5kIGdvZXMgdG8gdGhlIGNvbnRhY3QgcG9pbnQuCiAgICAgKi8KCiAgICAvKioKICAgICAqIENvbnRhY3Qgbm9ybWFsLCBwb2ludGluZyBvdXQgb2YgYm9keSBpLgogICAgICovCiAgICBjb25zdHJ1Y3Rvcihib2R5QSwgYm9keUIsIG1heEZvcmNlKSB7CiAgICAgIGlmIChtYXhGb3JjZSA9PT0gdm9pZCAwKSB7CiAgICAgICAgbWF4Rm9yY2UgPSAxZTY7CiAgICAgIH0KCiAgICAgIHN1cGVyKGJvZHlBLCBib2R5QiwgMCwgbWF4Rm9yY2UpOwogICAgICB0aGlzLnJlc3RpdHV0aW9uID0gdm9pZCAwOwogICAgICB0aGlzLnJpID0gdm9pZCAwOwogICAgICB0aGlzLnJqID0gdm9pZCAwOwogICAgICB0aGlzLm5pID0gdm9pZCAwOwogICAgICB0aGlzLnJlc3RpdHV0aW9uID0gMC4wOwogICAgICB0aGlzLnJpID0gbmV3IFZlYzMoKTsKICAgICAgdGhpcy5yaiA9IG5ldyBWZWMzKCk7CiAgICAgIHRoaXMubmkgPSBuZXcgVmVjMygpOwogICAgfQoKICAgIGNvbXB1dGVCKGgpIHsKICAgICAgY29uc3QgYSA9IHRoaXMuYTsKICAgICAgY29uc3QgYiA9IHRoaXMuYjsKICAgICAgY29uc3QgYmkgPSB0aGlzLmJpOwogICAgICBjb25zdCBiaiA9IHRoaXMuYmo7CiAgICAgIGNvbnN0IHJpID0gdGhpcy5yaTsKICAgICAgY29uc3QgcmogPSB0aGlzLnJqOwogICAgICBjb25zdCByaXhuID0gQ29udGFjdEVxdWF0aW9uX2NvbXB1dGVCX3RlbXAxOwogICAgICBjb25zdCByanhuID0gQ29udGFjdEVxdWF0aW9uX2NvbXB1dGVCX3RlbXAyOwogICAgICBjb25zdCB2aSA9IGJpLnZlbG9jaXR5OwogICAgICBjb25zdCB3aSA9IGJpLmFuZ3VsYXJWZWxvY2l0eTsKICAgICAgYmkuZm9yY2U7CiAgICAgIGJpLnRvcnF1ZTsKICAgICAgY29uc3QgdmogPSBiai52ZWxvY2l0eTsKICAgICAgY29uc3Qgd2ogPSBiai5hbmd1bGFyVmVsb2NpdHk7CiAgICAgIGJqLmZvcmNlOwogICAgICBiai50b3JxdWU7CiAgICAgIGNvbnN0IHBlbmV0cmF0aW9uVmVjID0gQ29udGFjdEVxdWF0aW9uX2NvbXB1dGVCX3RlbXAzOwogICAgICBjb25zdCBHQSA9IHRoaXMuamFjb2JpYW5FbGVtZW50QTsKICAgICAgY29uc3QgR0IgPSB0aGlzLmphY29iaWFuRWxlbWVudEI7CiAgICAgIGNvbnN0IG4gPSB0aGlzLm5pOyAvLyBDYWx1Y2xhdGUgY3Jvc3MgcHJvZHVjdHMKCiAgICAgIHJpLmNyb3NzKG4sIHJpeG4pOwogICAgICByai5jcm9zcyhuLCByanhuKTsgLy8gZyA9IHhqK3JqIC0oeGkrcmkpCiAgICAgIC8vIEcgPSBbIC1uaSAgLXJpeG4gIG5pICByanhuIF0KCiAgICAgIG4ubmVnYXRlKEdBLnNwYXRpYWwpOwogICAgICByaXhuLm5lZ2F0ZShHQS5yb3RhdGlvbmFsKTsKICAgICAgR0Iuc3BhdGlhbC5jb3B5KG4pOwogICAgICBHQi5yb3RhdGlvbmFsLmNvcHkocmp4bik7IC8vIENhbGN1bGF0ZSB0aGUgcGVuZXRyYXRpb24gdmVjdG9yCgogICAgICBwZW5ldHJhdGlvblZlYy5jb3B5KGJqLnBvc2l0aW9uKTsKICAgICAgcGVuZXRyYXRpb25WZWMudmFkZChyaiwgcGVuZXRyYXRpb25WZWMpOwogICAgICBwZW5ldHJhdGlvblZlYy52c3ViKGJpLnBvc2l0aW9uLCBwZW5ldHJhdGlvblZlYyk7CiAgICAgIHBlbmV0cmF0aW9uVmVjLnZzdWIocmksIHBlbmV0cmF0aW9uVmVjKTsKICAgICAgY29uc3QgZyA9IG4uZG90KHBlbmV0cmF0aW9uVmVjKTsgLy8gQ29tcHV0ZSBpdGVyYXRpb24KCiAgICAgIGNvbnN0IGVQbHVzT25lID0gdGhpcy5yZXN0aXR1dGlvbiArIDE7CiAgICAgIGNvbnN0IEdXID0gZVBsdXNPbmUgKiB2ai5kb3QobikgLSBlUGx1c09uZSAqIHZpLmRvdChuKSArIHdqLmRvdChyanhuKSAtIHdpLmRvdChyaXhuKTsKICAgICAgY29uc3QgR2lNZiA9IHRoaXMuY29tcHV0ZUdpTWYoKTsKICAgICAgY29uc3QgQiA9IC1nICogYSAtIEdXICogYiAtIGggKiBHaU1mOwogICAgICByZXR1cm4gQjsKICAgIH0KICAgIC8qKgogICAgICogR2V0IHRoZSBjdXJyZW50IHJlbGF0aXZlIHZlbG9jaXR5IGluIHRoZSBjb250YWN0IHBvaW50LgogICAgICovCgoKICAgIGdldEltcGFjdFZlbG9jaXR5QWxvbmdOb3JtYWwoKSB7CiAgICAgIGNvbnN0IHZpID0gQ29udGFjdEVxdWF0aW9uX2dldEltcGFjdFZlbG9jaXR5QWxvbmdOb3JtYWxfdmk7CiAgICAgIGNvbnN0IHZqID0gQ29udGFjdEVxdWF0aW9uX2dldEltcGFjdFZlbG9jaXR5QWxvbmdOb3JtYWxfdmo7CiAgICAgIGNvbnN0IHhpID0gQ29udGFjdEVxdWF0aW9uX2dldEltcGFjdFZlbG9jaXR5QWxvbmdOb3JtYWxfeGk7CiAgICAgIGNvbnN0IHhqID0gQ29udGFjdEVxdWF0aW9uX2dldEltcGFjdFZlbG9jaXR5QWxvbmdOb3JtYWxfeGo7CiAgICAgIGNvbnN0IHJlbFZlbCA9IENvbnRhY3RFcXVhdGlvbl9nZXRJbXBhY3RWZWxvY2l0eUFsb25nTm9ybWFsX3JlbFZlbDsKICAgICAgdGhpcy5iaS5wb3NpdGlvbi52YWRkKHRoaXMucmksIHhpKTsKICAgICAgdGhpcy5iai5wb3NpdGlvbi52YWRkKHRoaXMucmosIHhqKTsKICAgICAgdGhpcy5iaS5nZXRWZWxvY2l0eUF0V29ybGRQb2ludCh4aSwgdmkpOwogICAgICB0aGlzLmJqLmdldFZlbG9jaXR5QXRXb3JsZFBvaW50KHhqLCB2aik7CiAgICAgIHZpLnZzdWIodmosIHJlbFZlbCk7CiAgICAgIHJldHVybiB0aGlzLm5pLmRvdChyZWxWZWwpOwogICAgfQoKICB9CgogIGNvbnN0IENvbnRhY3RFcXVhdGlvbl9jb21wdXRlQl90ZW1wMSA9IG5ldyBWZWMzKCk7IC8vIFRlbXAgdmVjdG9ycwoKICBjb25zdCBDb250YWN0RXF1YXRpb25fY29tcHV0ZUJfdGVtcDIgPSBuZXcgVmVjMygpOwogIGNvbnN0IENvbnRhY3RFcXVhdGlvbl9jb21wdXRlQl90ZW1wMyA9IG5ldyBWZWMzKCk7CiAgY29uc3QgQ29udGFjdEVxdWF0aW9uX2dldEltcGFjdFZlbG9jaXR5QWxvbmdOb3JtYWxfdmkgPSBuZXcgVmVjMygpOwogIGNvbnN0IENvbnRhY3RFcXVhdGlvbl9nZXRJbXBhY3RWZWxvY2l0eUFsb25nTm9ybWFsX3ZqID0gbmV3IFZlYzMoKTsKICBjb25zdCBDb250YWN0RXF1YXRpb25fZ2V0SW1wYWN0VmVsb2NpdHlBbG9uZ05vcm1hbF94aSA9IG5ldyBWZWMzKCk7CiAgY29uc3QgQ29udGFjdEVxdWF0aW9uX2dldEltcGFjdFZlbG9jaXR5QWxvbmdOb3JtYWxfeGogPSBuZXcgVmVjMygpOwogIGNvbnN0IENvbnRhY3RFcXVhdGlvbl9nZXRJbXBhY3RWZWxvY2l0eUFsb25nTm9ybWFsX3JlbFZlbCA9IG5ldyBWZWMzKCk7CiAgLyoqCiAgICogQ29ubmVjdHMgdHdvIGJvZGllcyBhdCBnaXZlbiBvZmZzZXQgcG9pbnRzLgogICAqIEBleGFtcGxlCiAgICogICAgIGNvbnN0IGJvZHlBID0gbmV3IEJvZHkoeyBtYXNzOiAxIH0pCiAgICogICAgIGNvbnN0IGJvZHlCID0gbmV3IEJvZHkoeyBtYXNzOiAxIH0pCiAgICogICAgIGJvZHlBLnBvc2l0aW9uLnNldCgtMSwgMCwgMCkKICAgKiAgICAgYm9keUIucG9zaXRpb24uc2V0KDEsIDAsIDApCiAgICogICAgIGJvZHlBLmFkZFNoYXBlKHNoYXBlQSkKICAgKiAgICAgYm9keUIuYWRkU2hhcGUoc2hhcGVCKQogICAqICAgICB3b3JsZC5hZGRCb2R5KGJvZHlBKQogICAqICAgICB3b3JsZC5hZGRCb2R5KGJvZHlCKQogICAqICAgICBjb25zdCBsb2NhbFBpdm90QSA9IG5ldyBWZWMzKDEsIDAsIDApCiAgICogICAgIGNvbnN0IGxvY2FsUGl2b3RCID0gbmV3IFZlYzMoLTEsIDAsIDApCiAgICogICAgIGNvbnN0IGNvbnN0cmFpbnQgPSBuZXcgUG9pbnRUb1BvaW50Q29uc3RyYWludChib2R5QSwgbG9jYWxQaXZvdEEsIGJvZHlCLCBsb2NhbFBpdm90QikKICAgKiAgICAgd29ybGQuYWRkQ29uc3RyYWludChjb25zdHJhaW50KQogICAqLwoKICBjbGFzcyBQb2ludFRvUG9pbnRDb25zdHJhaW50IGV4dGVuZHMgQ29uc3RyYWludCB7CiAgICAvKioKICAgICAqIFBpdm90LCBkZWZpbmVkIGxvY2FsbHkgaW4gYm9keUEuCiAgICAgKi8KCiAgICAvKioKICAgICAqIFBpdm90LCBkZWZpbmVkIGxvY2FsbHkgaW4gYm9keUIuCiAgICAgKi8KCiAgICAvKioKICAgICAqIEBwYXJhbSBwaXZvdEEgVGhlIHBvaW50IHJlbGF0aXZlIHRvIHRoZSBjZW50ZXIgb2YgbWFzcyBvZiBib2R5QSB3aGljaCBib2R5QSBpcyBjb25zdHJhaW5lZCB0by4KICAgICAqIEBwYXJhbSBib2R5QiBCb2R5IHRoYXQgd2lsbCBiZSBjb25zdHJhaW5lZCBpbiBhIHNpbWlsYXIgd2F5IHRvIHRoZSBzYW1lIHBvaW50IGFzIGJvZHlBLiBXZSB3aWxsIHRoZXJlZm9yZSBnZXQgYSBsaW5rIGJldHdlZW4gYm9keUEgYW5kIGJvZHlCLiBJZiBub3Qgc3BlY2lmaWVkLCBib2R5QSB3aWxsIGJlIGNvbnN0cmFpbmVkIHRvIGEgc3RhdGljIHBvaW50LgogICAgICogQHBhcmFtIHBpdm90QiBUaGUgcG9pbnQgcmVsYXRpdmUgdG8gdGhlIGNlbnRlciBvZiBtYXNzIG9mIGJvZHlCIHdoaWNoIGJvZHlCIGlzIGNvbnN0cmFpbmVkIHRvLgogICAgICogQHBhcmFtIG1heEZvcmNlIFRoZSBtYXhpbXVtIGZvcmNlIHRoYXQgc2hvdWxkIGJlIGFwcGxpZWQgdG8gY29uc3RyYWluIHRoZSBib2RpZXMuCiAgICAgKi8KICAgIGNvbnN0cnVjdG9yKGJvZHlBLCBwaXZvdEEsIGJvZHlCLCBwaXZvdEIsIG1heEZvcmNlKSB7CiAgICAgIGlmIChwaXZvdEEgPT09IHZvaWQgMCkgewogICAgICAgIHBpdm90QSA9IG5ldyBWZWMzKCk7CiAgICAgIH0KCiAgICAgIGlmIChwaXZvdEIgPT09IHZvaWQgMCkgewogICAgICAgIHBpdm90QiA9IG5ldyBWZWMzKCk7CiAgICAgIH0KCiAgICAgIGlmIChtYXhGb3JjZSA9PT0gdm9pZCAwKSB7CiAgICAgICAgbWF4Rm9yY2UgPSAxZTY7CiAgICAgIH0KCiAgICAgIHN1cGVyKGJvZHlBLCBib2R5Qik7CiAgICAgIHRoaXMucGl2b3RBID0gdm9pZCAwOwogICAgICB0aGlzLnBpdm90QiA9IHZvaWQgMDsKICAgICAgdGhpcy5lcXVhdGlvblggPSB2b2lkIDA7CiAgICAgIHRoaXMuZXF1YXRpb25ZID0gdm9pZCAwOwogICAgICB0aGlzLmVxdWF0aW9uWiA9IHZvaWQgMDsKICAgICAgdGhpcy5waXZvdEEgPSBwaXZvdEEuY2xvbmUoKTsKICAgICAgdGhpcy5waXZvdEIgPSBwaXZvdEIuY2xvbmUoKTsKICAgICAgY29uc3QgeCA9IHRoaXMuZXF1YXRpb25YID0gbmV3IENvbnRhY3RFcXVhdGlvbihib2R5QSwgYm9keUIpOwogICAgICBjb25zdCB5ID0gdGhpcy5lcXVhdGlvblkgPSBuZXcgQ29udGFjdEVxdWF0aW9uKGJvZHlBLCBib2R5Qik7CiAgICAgIGNvbnN0IHogPSB0aGlzLmVxdWF0aW9uWiA9IG5ldyBDb250YWN0RXF1YXRpb24oYm9keUEsIGJvZHlCKTsgLy8gRXF1YXRpb25zIHRvIGJlIGZlZCB0byB0aGUgc29sdmVyCgogICAgICB0aGlzLmVxdWF0aW9ucy5wdXNoKHgsIHksIHopOyAvLyBNYWtlIHRoZSBlcXVhdGlvbnMgYmlkaXJlY3Rpb25hbAoKICAgICAgeC5taW5Gb3JjZSA9IHkubWluRm9yY2UgPSB6Lm1pbkZvcmNlID0gLW1heEZvcmNlOwogICAgICB4Lm1heEZvcmNlID0geS5tYXhGb3JjZSA9IHoubWF4Rm9yY2UgPSBtYXhGb3JjZTsKICAgICAgeC5uaS5zZXQoMSwgMCwgMCk7CiAgICAgIHkubmkuc2V0KDAsIDEsIDApOwogICAgICB6Lm5pLnNldCgwLCAwLCAxKTsKICAgIH0KCiAgICB1cGRhdGUoKSB7CiAgICAgIGNvbnN0IGJvZHlBID0gdGhpcy5ib2R5QTsKICAgICAgY29uc3QgYm9keUIgPSB0aGlzLmJvZHlCOwogICAgICBjb25zdCB4ID0gdGhpcy5lcXVhdGlvblg7CiAgICAgIGNvbnN0IHkgPSB0aGlzLmVxdWF0aW9uWTsKICAgICAgY29uc3QgeiA9IHRoaXMuZXF1YXRpb25aOyAvLyBSb3RhdGUgdGhlIHBpdm90cyB0byB3b3JsZCBzcGFjZQoKICAgICAgYm9keUEucXVhdGVybmlvbi52bXVsdCh0aGlzLnBpdm90QSwgeC5yaSk7CiAgICAgIGJvZHlCLnF1YXRlcm5pb24udm11bHQodGhpcy5waXZvdEIsIHgucmopOwogICAgICB5LnJpLmNvcHkoeC5yaSk7CiAgICAgIHkucmouY29weSh4LnJqKTsKICAgICAgei5yaS5jb3B5KHgucmkpOwogICAgICB6LnJqLmNvcHkoeC5yaik7CiAgICB9CgogIH0KICAvKioKICAgKiBDb25lIGVxdWF0aW9uLiBXb3JrcyB0byBrZWVwIHRoZSBnaXZlbiBib2R5IHdvcmxkIHZlY3RvcnMgYWxpZ25lZCwgb3IgdGlsdGVkIHdpdGhpbiBhIGdpdmVuIGFuZ2xlIGZyb20gZWFjaCBvdGhlci4KICAgKi8KCgogIGNsYXNzIENvbmVFcXVhdGlvbiBleHRlbmRzIEVxdWF0aW9uIHsKICAgIC8qKgogICAgICogTG9jYWwgYXhpcyBpbiBBCiAgICAgKi8KCiAgICAvKioKICAgICAqIExvY2FsIGF4aXMgaW4gQgogICAgICovCgogICAgLyoqCiAgICAgKiBUaGUgImNvbmUgYW5nbGUiIHRvIGtlZXAKICAgICAqLwogICAgY29uc3RydWN0b3IoYm9keUEsIGJvZHlCLCBvcHRpb25zKSB7CiAgICAgIGlmIChvcHRpb25zID09PSB2b2lkIDApIHsKICAgICAgICBvcHRpb25zID0ge307CiAgICAgIH0KCiAgICAgIGNvbnN0IG1heEZvcmNlID0gdHlwZW9mIG9wdGlvbnMubWF4Rm9yY2UgIT09ICd1bmRlZmluZWQnID8gb3B0aW9ucy5tYXhGb3JjZSA6IDFlNjsKICAgICAgc3VwZXIoYm9keUEsIGJvZHlCLCAtbWF4Rm9yY2UsIG1heEZvcmNlKTsKICAgICAgdGhpcy5heGlzQSA9IHZvaWQgMDsKICAgICAgdGhpcy5heGlzQiA9IHZvaWQgMDsKICAgICAgdGhpcy5hbmdsZSA9IHZvaWQgMDsKICAgICAgdGhpcy5heGlzQSA9IG9wdGlvbnMuYXhpc0EgPyBvcHRpb25zLmF4aXNBLmNsb25lKCkgOiBuZXcgVmVjMygxLCAwLCAwKTsKICAgICAgdGhpcy5heGlzQiA9IG9wdGlvbnMuYXhpc0IgPyBvcHRpb25zLmF4aXNCLmNsb25lKCkgOiBuZXcgVmVjMygwLCAxLCAwKTsKICAgICAgdGhpcy5hbmdsZSA9IHR5cGVvZiBvcHRpb25zLmFuZ2xlICE9PSAndW5kZWZpbmVkJyA/IG9wdGlvbnMuYW5nbGUgOiAwOwogICAgfQoKICAgIGNvbXB1dGVCKGgpIHsKICAgICAgY29uc3QgYSA9IHRoaXMuYTsKICAgICAgY29uc3QgYiA9IHRoaXMuYjsKICAgICAgY29uc3QgbmkgPSB0aGlzLmF4aXNBOwogICAgICBjb25zdCBuaiA9IHRoaXMuYXhpc0I7CiAgICAgIGNvbnN0IG5peG5qID0gdG1wVmVjMSQyOwogICAgICBjb25zdCBuanhuaSA9IHRtcFZlYzIkMjsKICAgICAgY29uc3QgR0EgPSB0aGlzLmphY29iaWFuRWxlbWVudEE7CiAgICAgIGNvbnN0IEdCID0gdGhpcy5qYWNvYmlhbkVsZW1lbnRCOyAvLyBDYWx1Y2xhdGUgY3Jvc3MgcHJvZHVjdHMKCiAgICAgIG5pLmNyb3NzKG5qLCBuaXhuaik7CiAgICAgIG5qLmNyb3NzKG5pLCBuanhuaSk7IC8vIFRoZSBhbmdsZSBiZXR3ZWVuIHR3byB2ZWN0b3IgaXM6CiAgICAgIC8vIGNvcyh0aGV0YSkgPSBhICogYiAvIChsZW5ndGgoYSkgKiBsZW5ndGgoYikgPSB7IGxlbihhKSA9IGxlbihiKSA9IDEgfSA9IGEgKiBiCiAgICAgIC8vIGcgPSBhICogYgogICAgICAvLyBnZG90ID0gKGIgeCBhKSAqIHdpICsgKGEgeCBiKSAqIHdqCiAgICAgIC8vIEcgPSBbMCBieGEgMCBheGJdCiAgICAgIC8vIFcgPSBbdmkgd2kgdmogd2pdCgogICAgICBHQS5yb3RhdGlvbmFsLmNvcHkobmp4bmkpOwogICAgICBHQi5yb3RhdGlvbmFsLmNvcHkobml4bmopOwogICAgICBjb25zdCBnID0gTWF0aC5jb3ModGhpcy5hbmdsZSkgLSBuaS5kb3QobmopOwogICAgICBjb25zdCBHVyA9IHRoaXMuY29tcHV0ZUdXKCk7CiAgICAgIGNvbnN0IEdpTWYgPSB0aGlzLmNvbXB1dGVHaU1mKCk7CiAgICAgIGNvbnN0IEIgPSAtZyAqIGEgLSBHVyAqIGIgLSBoICogR2lNZjsKICAgICAgcmV0dXJuIEI7CiAgICB9CgogIH0KCiAgY29uc3QgdG1wVmVjMSQyID0gbmV3IFZlYzMoKTsKICBjb25zdCB0bXBWZWMyJDIgPSBuZXcgVmVjMygpOwogIC8qKgogICAqIFJvdGF0aW9uYWwgY29uc3RyYWludC4gV29ya3MgdG8ga2VlcCB0aGUgbG9jYWwgdmVjdG9ycyBvcnRob2dvbmFsIHRvIGVhY2ggb3RoZXIgaW4gd29ybGQgc3BhY2UuCiAgICovCgogIGNsYXNzIFJvdGF0aW9uYWxFcXVhdGlvbiBleHRlbmRzIEVxdWF0aW9uIHsKICAgIC8qKgogICAgICogV29ybGQgb3JpZW50ZWQgcm90YXRpb25hbCBheGlzLgogICAgICovCgogICAgLyoqCiAgICAgKiBXb3JsZCBvcmllbnRlZCByb3RhdGlvbmFsIGF4aXMuCiAgICAgKi8KCiAgICAvKioKICAgICAqIG1heEFuZ2xlCiAgICAgKi8KICAgIGNvbnN0cnVjdG9yKGJvZHlBLCBib2R5Qiwgb3B0aW9ucykgewogICAgICBpZiAob3B0aW9ucyA9PT0gdm9pZCAwKSB7CiAgICAgICAgb3B0aW9ucyA9IHt9OwogICAgICB9CgogICAgICBjb25zdCBtYXhGb3JjZSA9IHR5cGVvZiBvcHRpb25zLm1heEZvcmNlICE9PSAndW5kZWZpbmVkJyA/IG9wdGlvbnMubWF4Rm9yY2UgOiAxZTY7CiAgICAgIHN1cGVyKGJvZHlBLCBib2R5QiwgLW1heEZvcmNlLCBtYXhGb3JjZSk7CiAgICAgIHRoaXMuYXhpc0EgPSB2b2lkIDA7CiAgICAgIHRoaXMuYXhpc0IgPSB2b2lkIDA7CiAgICAgIHRoaXMubWF4QW5nbGUgPSB2b2lkIDA7CiAgICAgIHRoaXMuYXhpc0EgPSBvcHRpb25zLmF4aXNBID8gb3B0aW9ucy5heGlzQS5jbG9uZSgpIDogbmV3IFZlYzMoMSwgMCwgMCk7CiAgICAgIHRoaXMuYXhpc0IgPSBvcHRpb25zLmF4aXNCID8gb3B0aW9ucy5heGlzQi5jbG9uZSgpIDogbmV3IFZlYzMoMCwgMSwgMCk7CiAgICAgIHRoaXMubWF4QW5nbGUgPSBNYXRoLlBJIC8gMjsKICAgIH0KCiAgICBjb21wdXRlQihoKSB7CiAgICAgIGNvbnN0IGEgPSB0aGlzLmE7CiAgICAgIGNvbnN0IGIgPSB0aGlzLmI7CiAgICAgIGNvbnN0IG5pID0gdGhpcy5heGlzQTsKICAgICAgY29uc3QgbmogPSB0aGlzLmF4aXNCOwogICAgICBjb25zdCBuaXhuaiA9IHRtcFZlYzEkMTsKICAgICAgY29uc3Qgbmp4bmkgPSB0bXBWZWMyJDE7CiAgICAgIGNvbnN0IEdBID0gdGhpcy5qYWNvYmlhbkVsZW1lbnRBOwogICAgICBjb25zdCBHQiA9IHRoaXMuamFjb2JpYW5FbGVtZW50QjsgLy8gQ2FsdWNsYXRlIGNyb3NzIHByb2R1Y3RzCgogICAgICBuaS5jcm9zcyhuaiwgbml4bmopOwogICAgICBuai5jcm9zcyhuaSwgbmp4bmkpOyAvLyBnID0gbmkgKiBuagogICAgICAvLyBnZG90ID0gKG5qIHggbmkpICogd2kgKyAobmkgeCBuaikgKiB3agogICAgICAvLyBHID0gWzAgbmp4bmkgMCBuaXhual0KICAgICAgLy8gVyA9IFt2aSB3aSB2aiB3al0KCiAgICAgIEdBLnJvdGF0aW9uYWwuY29weShuanhuaSk7CiAgICAgIEdCLnJvdGF0aW9uYWwuY29weShuaXhuaik7CiAgICAgIGNvbnN0IGcgPSBNYXRoLmNvcyh0aGlzLm1heEFuZ2xlKSAtIG5pLmRvdChuaik7CiAgICAgIGNvbnN0IEdXID0gdGhpcy5jb21wdXRlR1coKTsKICAgICAgY29uc3QgR2lNZiA9IHRoaXMuY29tcHV0ZUdpTWYoKTsKICAgICAgY29uc3QgQiA9IC1nICogYSAtIEdXICogYiAtIGggKiBHaU1mOwogICAgICByZXR1cm4gQjsKICAgIH0KCiAgfQoKICBjb25zdCB0bXBWZWMxJDEgPSBuZXcgVmVjMygpOwogIGNvbnN0IHRtcFZlYzIkMSA9IG5ldyBWZWMzKCk7CiAgLyoqCiAgICogQSBDb25lIFR3aXN0IGNvbnN0cmFpbnQsIHVzZWZ1bCBmb3IgcmFnZG9sbHMuCiAgICovCgogIGNsYXNzIENvbmVUd2lzdENvbnN0cmFpbnQgZXh0ZW5kcyBQb2ludFRvUG9pbnRDb25zdHJhaW50IHsKICAgIC8qKgogICAgICogVGhlIGF4aXMgZGlyZWN0aW9uIGZvciB0aGUgY29uc3RyYWludCBvZiB0aGUgYm9keSBBLgogICAgICovCgogICAgLyoqCiAgICAgKiBUaGUgYXhpcyBkaXJlY3Rpb24gZm9yIHRoZSBjb25zdHJhaW50IG9mIHRoZSBib2R5IEIuCiAgICAgKi8KCiAgICAvKioKICAgICAqIFRoZSBhcGVydHVyZSBhbmdsZSBvZiB0aGUgY29uZS4KICAgICAqLwoKICAgIC8qKgogICAgICogVGhlIHR3aXN0IGFuZ2xlIG9mIHRoZSBqb2ludC4KICAgICAqLwogICAgY29uc3RydWN0b3IoYm9keUEsIGJvZHlCLCBvcHRpb25zKSB7CiAgICAgIGlmIChvcHRpb25zID09PSB2b2lkIDApIHsKICAgICAgICBvcHRpb25zID0ge307CiAgICAgIH0KCiAgICAgIGNvbnN0IG1heEZvcmNlID0gdHlwZW9mIG9wdGlvbnMubWF4Rm9yY2UgIT09ICd1bmRlZmluZWQnID8gb3B0aW9ucy5tYXhGb3JjZSA6IDFlNjsgLy8gU2V0IHBpdm90IHBvaW50IGluIGJldHdlZW4KCiAgICAgIGNvbnN0IHBpdm90QSA9IG9wdGlvbnMucGl2b3RBID8gb3B0aW9ucy5waXZvdEEuY2xvbmUoKSA6IG5ldyBWZWMzKCk7CiAgICAgIGNvbnN0IHBpdm90QiA9IG9wdGlvbnMucGl2b3RCID8gb3B0aW9ucy5waXZvdEIuY2xvbmUoKSA6IG5ldyBWZWMzKCk7CiAgICAgIHN1cGVyKGJvZHlBLCBwaXZvdEEsIGJvZHlCLCBwaXZvdEIsIG1heEZvcmNlKTsKICAgICAgdGhpcy5heGlzQSA9IHZvaWQgMDsKICAgICAgdGhpcy5heGlzQiA9IHZvaWQgMDsKICAgICAgdGhpcy5hbmdsZSA9IHZvaWQgMDsKICAgICAgdGhpcy50d2lzdEFuZ2xlID0gdm9pZCAwOwogICAgICB0aGlzLmNvbmVFcXVhdGlvbiA9IHZvaWQgMDsKICAgICAgdGhpcy50d2lzdEVxdWF0aW9uID0gdm9pZCAwOwogICAgICB0aGlzLmF4aXNBID0gb3B0aW9ucy5heGlzQSA/IG9wdGlvbnMuYXhpc0EuY2xvbmUoKSA6IG5ldyBWZWMzKCk7CiAgICAgIHRoaXMuYXhpc0IgPSBvcHRpb25zLmF4aXNCID8gb3B0aW9ucy5heGlzQi5jbG9uZSgpIDogbmV3IFZlYzMoKTsKICAgICAgdGhpcy5jb2xsaWRlQ29ubmVjdGVkID0gISFvcHRpb25zLmNvbGxpZGVDb25uZWN0ZWQ7CiAgICAgIHRoaXMuYW5nbGUgPSB0eXBlb2Ygb3B0aW9ucy5hbmdsZSAhPT0gJ3VuZGVmaW5lZCcgPyBvcHRpb25zLmFuZ2xlIDogMDsKICAgICAgY29uc3QgYyA9IHRoaXMuY29uZUVxdWF0aW9uID0gbmV3IENvbmVFcXVhdGlvbihib2R5QSwgYm9keUIsIG9wdGlvbnMpOwogICAgICBjb25zdCB0ID0gdGhpcy50d2lzdEVxdWF0aW9uID0gbmV3IFJvdGF0aW9uYWxFcXVhdGlvbihib2R5QSwgYm9keUIsIG9wdGlvbnMpOwogICAgICB0aGlzLnR3aXN0QW5nbGUgPSB0eXBlb2Ygb3B0aW9ucy50d2lzdEFuZ2xlICE9PSAndW5kZWZpbmVkJyA/IG9wdGlvbnMudHdpc3RBbmdsZSA6IDA7IC8vIE1ha2UgdGhlIGNvbmUgZXF1YXRpb24gcHVzaCB0aGUgYm9kaWVzIHRvd2FyZCB0aGUgY29uZSBheGlzLCBub3Qgb3V0d2FyZAoKICAgICAgYy5tYXhGb3JjZSA9IDA7CiAgICAgIGMubWluRm9yY2UgPSAtbWF4Rm9yY2U7IC8vIE1ha2UgdGhlIHR3aXN0IGVxdWF0aW9uIGFkZCB0b3JxdWUgdG93YXJkIHRoZSBpbml0aWFsIHBvc2l0aW9uCgogICAgICB0Lm1heEZvcmNlID0gMDsKICAgICAgdC5taW5Gb3JjZSA9IC1tYXhGb3JjZTsKICAgICAgdGhpcy5lcXVhdGlvbnMucHVzaChjLCB0KTsKICAgIH0KCiAgICB1cGRhdGUoKSB7CiAgICAgIGNvbnN0IGJvZHlBID0gdGhpcy5ib2R5QTsKICAgICAgY29uc3QgYm9keUIgPSB0aGlzLmJvZHlCOwogICAgICBjb25zdCBjb25lID0gdGhpcy5jb25lRXF1YXRpb247CiAgICAgIGNvbnN0IHR3aXN0ID0gdGhpcy50d2lzdEVxdWF0aW9uOwogICAgICBzdXBlci51cGRhdGUoKTsgLy8gVXBkYXRlIHRoZSBheGVzIHRvIHRoZSBjb25lIGNvbnN0cmFpbnQKCiAgICAgIGJvZHlBLnZlY3RvclRvV29ybGRGcmFtZSh0aGlzLmF4aXNBLCBjb25lLmF4aXNBKTsKICAgICAgYm9keUIudmVjdG9yVG9Xb3JsZEZyYW1lKHRoaXMuYXhpc0IsIGNvbmUuYXhpc0IpOyAvLyBVcGRhdGUgdGhlIHdvcmxkIGF4ZXMgaW4gdGhlIHR3aXN0IGNvbnN0cmFpbnQKCiAgICAgIHRoaXMuYXhpc0EudGFuZ2VudHModHdpc3QuYXhpc0EsIHR3aXN0LmF4aXNBKTsKICAgICAgYm9keUEudmVjdG9yVG9Xb3JsZEZyYW1lKHR3aXN0LmF4aXNBLCB0d2lzdC5heGlzQSk7CiAgICAgIHRoaXMuYXhpc0IudGFuZ2VudHModHdpc3QuYXhpc0IsIHR3aXN0LmF4aXNCKTsKICAgICAgYm9keUIudmVjdG9yVG9Xb3JsZEZyYW1lKHR3aXN0LmF4aXNCLCB0d2lzdC5heGlzQik7CiAgICAgIGNvbmUuYW5nbGUgPSB0aGlzLmFuZ2xlOwogICAgICB0d2lzdC5tYXhBbmdsZSA9IHRoaXMudHdpc3RBbmdsZTsKICAgIH0KCiAgfQogIC8qKgogICAqIENvbnN0cmFpbnMgdHdvIGJvZGllcyB0byBiZSBhdCBhIGNvbnN0YW50IGRpc3RhbmNlIGZyb20gZWFjaCBvdGhlcnMgY2VudGVyIG9mIG1hc3MuCiAgICovCgoKICBjbGFzcyBEaXN0YW5jZUNvbnN0cmFpbnQgZXh0ZW5kcyBDb25zdHJhaW50IHsKICAgIC8qKgogICAgICogVGhlIGRpc3RhbmNlIHRvIGtlZXAuIElmIHVuZGVmaW5lZCwgaXQgd2lsbCBiZSBzZXQgdG8gdGhlIGN1cnJlbnQgZGlzdGFuY2UgYmV0d2VlbiBib2R5QSBhbmQgYm9keUIKICAgICAqLwoKICAgIC8qKgogICAgICogQHBhcmFtIGRpc3RhbmNlIFRoZSBkaXN0YW5jZSB0byBrZWVwLiBJZiB1bmRlZmluZWQsIGl0IHdpbGwgYmUgc2V0IHRvIHRoZSBjdXJyZW50IGRpc3RhbmNlIGJldHdlZW4gYm9keUEgYW5kIGJvZHlCLgogICAgICogQHBhcmFtIG1heEZvcmNlIFRoZSBtYXhpbXVtIGZvcmNlIHRoYXQgc2hvdWxkIGJlIGFwcGxpZWQgdG8gY29uc3RyYWluIHRoZSBib2RpZXMuCiAgICAgKi8KICAgIGNvbnN0cnVjdG9yKGJvZHlBLCBib2R5QiwgZGlzdGFuY2UsIG1heEZvcmNlKSB7CiAgICAgIGlmIChtYXhGb3JjZSA9PT0gdm9pZCAwKSB7CiAgICAgICAgbWF4Rm9yY2UgPSAxZTY7CiAgICAgIH0KCiAgICAgIHN1cGVyKGJvZHlBLCBib2R5Qik7CiAgICAgIHRoaXMuZGlzdGFuY2UgPSB2b2lkIDA7CiAgICAgIHRoaXMuZGlzdGFuY2VFcXVhdGlvbiA9IHZvaWQgMDsKCiAgICAgIGlmICh0eXBlb2YgZGlzdGFuY2UgPT09ICd1bmRlZmluZWQnKSB7CiAgICAgICAgZGlzdGFuY2UgPSBib2R5QS5wb3NpdGlvbi5kaXN0YW5jZVRvKGJvZHlCLnBvc2l0aW9uKTsKICAgICAgfQoKICAgICAgdGhpcy5kaXN0YW5jZSA9IGRpc3RhbmNlOwogICAgICBjb25zdCBlcSA9IHRoaXMuZGlzdGFuY2VFcXVhdGlvbiA9IG5ldyBDb250YWN0RXF1YXRpb24oYm9keUEsIGJvZHlCKTsKICAgICAgdGhpcy5lcXVhdGlvbnMucHVzaChlcSk7IC8vIE1ha2UgaXQgYmlkaXJlY3Rpb25hbAoKICAgICAgZXEubWluRm9yY2UgPSAtbWF4Rm9yY2U7CiAgICAgIGVxLm1heEZvcmNlID0gbWF4Rm9yY2U7CiAgICB9CiAgICAvKioKICAgICAqIHVwZGF0ZQogICAgICovCgoKICAgIHVwZGF0ZSgpIHsKICAgICAgY29uc3QgYm9keUEgPSB0aGlzLmJvZHlBOwogICAgICBjb25zdCBib2R5QiA9IHRoaXMuYm9keUI7CiAgICAgIGNvbnN0IGVxID0gdGhpcy5kaXN0YW5jZUVxdWF0aW9uOwogICAgICBjb25zdCBoYWxmRGlzdCA9IHRoaXMuZGlzdGFuY2UgKiAwLjU7CiAgICAgIGNvbnN0IG5vcm1hbCA9IGVxLm5pOwogICAgICBib2R5Qi5wb3NpdGlvbi52c3ViKGJvZHlBLnBvc2l0aW9uLCBub3JtYWwpOwogICAgICBub3JtYWwubm9ybWFsaXplKCk7CiAgICAgIG5vcm1hbC5zY2FsZShoYWxmRGlzdCwgZXEucmkpOwogICAgICBub3JtYWwuc2NhbGUoLWhhbGZEaXN0LCBlcS5yaik7CiAgICB9CgogIH0KICAvKioKICAgKiBMb2NrIGNvbnN0cmFpbnQuIFdpbGwgcmVtb3ZlIGFsbCBkZWdyZWVzIG9mIGZyZWVkb20gYmV0d2VlbiB0aGUgYm9kaWVzLgogICAqLwoKCiAgY2xhc3MgTG9ja0NvbnN0cmFpbnQgZXh0ZW5kcyBQb2ludFRvUG9pbnRDb25zdHJhaW50IHsKICAgIGNvbnN0cnVjdG9yKGJvZHlBLCBib2R5Qiwgb3B0aW9ucykgewogICAgICBpZiAob3B0aW9ucyA9PT0gdm9pZCAwKSB7CiAgICAgICAgb3B0aW9ucyA9IHt9OwogICAgICB9CgogICAgICBjb25zdCBtYXhGb3JjZSA9IHR5cGVvZiBvcHRpb25zLm1heEZvcmNlICE9PSAndW5kZWZpbmVkJyA/IG9wdGlvbnMubWF4Rm9yY2UgOiAxZTY7IC8vIFNldCBwaXZvdCBwb2ludCBpbiBiZXR3ZWVuCgogICAgICBjb25zdCBwaXZvdEEgPSBuZXcgVmVjMygpOwogICAgICBjb25zdCBwaXZvdEIgPSBuZXcgVmVjMygpOwogICAgICBjb25zdCBoYWxmV2F5ID0gbmV3IFZlYzMoKTsKICAgICAgYm9keUEucG9zaXRpb24udmFkZChib2R5Qi5wb3NpdGlvbiwgaGFsZldheSk7CiAgICAgIGhhbGZXYXkuc2NhbGUoMC41LCBoYWxmV2F5KTsKICAgICAgYm9keUIucG9pbnRUb0xvY2FsRnJhbWUoaGFsZldheSwgcGl2b3RCKTsKICAgICAgYm9keUEucG9pbnRUb0xvY2FsRnJhbWUoaGFsZldheSwgcGl2b3RBKTsgLy8gVGhlIHBvaW50LXRvLXBvaW50IGNvbnN0cmFpbnQgd2lsbCBrZWVwIGEgcG9pbnQgc2hhcmVkIGJldHdlZW4gdGhlIGJvZGllcwoKICAgICAgc3VwZXIoYm9keUEsIHBpdm90QSwgYm9keUIsIHBpdm90QiwgbWF4Rm9yY2UpOyAvLyBTdG9yZSBpbml0aWFsIHJvdGF0aW9uIG9mIHRoZSBib2RpZXMgYXMgdW5pdCB2ZWN0b3JzIGluIHRoZSBsb2NhbCBib2R5IHNwYWNlcwoKICAgICAgdGhpcy54QSA9IHZvaWQgMDsKICAgICAgdGhpcy54QiA9IHZvaWQgMDsKICAgICAgdGhpcy55QSA9IHZvaWQgMDsKICAgICAgdGhpcy55QiA9IHZvaWQgMDsKICAgICAgdGhpcy56QSA9IHZvaWQgMDsKICAgICAgdGhpcy56QiA9IHZvaWQgMDsKICAgICAgdGhpcy5yb3RhdGlvbmFsRXF1YXRpb24xID0gdm9pZCAwOwogICAgICB0aGlzLnJvdGF0aW9uYWxFcXVhdGlvbjIgPSB2b2lkIDA7CiAgICAgIHRoaXMucm90YXRpb25hbEVxdWF0aW9uMyA9IHZvaWQgMDsKICAgICAgdGhpcy5tb3RvckVxdWF0aW9uID0gdm9pZCAwOwogICAgICB0aGlzLnhBID0gYm9keUEudmVjdG9yVG9Mb2NhbEZyYW1lKFZlYzMuVU5JVF9YKTsKICAgICAgdGhpcy54QiA9IGJvZHlCLnZlY3RvclRvTG9jYWxGcmFtZShWZWMzLlVOSVRfWCk7CiAgICAgIHRoaXMueUEgPSBib2R5QS52ZWN0b3JUb0xvY2FsRnJhbWUoVmVjMy5VTklUX1kpOwogICAgICB0aGlzLnlCID0gYm9keUIudmVjdG9yVG9Mb2NhbEZyYW1lKFZlYzMuVU5JVF9ZKTsKICAgICAgdGhpcy56QSA9IGJvZHlBLnZlY3RvclRvTG9jYWxGcmFtZShWZWMzLlVOSVRfWik7CiAgICAgIHRoaXMuekIgPSBib2R5Qi52ZWN0b3JUb0xvY2FsRnJhbWUoVmVjMy5VTklUX1opOyAvLyAuLi5hbmQgdGhlIGZvbGxvd2luZyByb3RhdGlvbmFsIGVxdWF0aW9ucyB3aWxsIGtlZXAgYWxsIHJvdGF0aW9uYWwgRE9GJ3MgaW4gcGxhY2UKCiAgICAgIGNvbnN0IHIxID0gdGhpcy5yb3RhdGlvbmFsRXF1YXRpb24xID0gbmV3IFJvdGF0aW9uYWxFcXVhdGlvbihib2R5QSwgYm9keUIsIG9wdGlvbnMpOwogICAgICBjb25zdCByMiA9IHRoaXMucm90YXRpb25hbEVxdWF0aW9uMiA9IG5ldyBSb3RhdGlvbmFsRXF1YXRpb24oYm9keUEsIGJvZHlCLCBvcHRpb25zKTsKICAgICAgY29uc3QgcjMgPSB0aGlzLnJvdGF0aW9uYWxFcXVhdGlvbjMgPSBuZXcgUm90YXRpb25hbEVxdWF0aW9uKGJvZHlBLCBib2R5Qiwgb3B0aW9ucyk7CiAgICAgIHRoaXMuZXF1YXRpb25zLnB1c2gocjEsIHIyLCByMyk7CiAgICB9CiAgICAvKioKICAgICAqIHVwZGF0ZQogICAgICovCgoKICAgIHVwZGF0ZSgpIHsKICAgICAgY29uc3QgYm9keUEgPSB0aGlzLmJvZHlBOwogICAgICBjb25zdCBib2R5QiA9IHRoaXMuYm9keUI7CiAgICAgIHRoaXMubW90b3JFcXVhdGlvbjsKICAgICAgY29uc3QgcjEgPSB0aGlzLnJvdGF0aW9uYWxFcXVhdGlvbjE7CiAgICAgIGNvbnN0IHIyID0gdGhpcy5yb3RhdGlvbmFsRXF1YXRpb24yOwogICAgICBjb25zdCByMyA9IHRoaXMucm90YXRpb25hbEVxdWF0aW9uMzsKICAgICAgc3VwZXIudXBkYXRlKCk7IC8vIFRoZXNlIHZlY3RvciBwYWlycyBtdXN0IGJlIG9ydGhvZ29uYWwKCiAgICAgIGJvZHlBLnZlY3RvclRvV29ybGRGcmFtZSh0aGlzLnhBLCByMS5heGlzQSk7CiAgICAgIGJvZHlCLnZlY3RvclRvV29ybGRGcmFtZSh0aGlzLnlCLCByMS5heGlzQik7CiAgICAgIGJvZHlBLnZlY3RvclRvV29ybGRGcmFtZSh0aGlzLnlBLCByMi5heGlzQSk7CiAgICAgIGJvZHlCLnZlY3RvclRvV29ybGRGcmFtZSh0aGlzLnpCLCByMi5heGlzQik7CiAgICAgIGJvZHlBLnZlY3RvclRvV29ybGRGcmFtZSh0aGlzLnpBLCByMy5heGlzQSk7CiAgICAgIGJvZHlCLnZlY3RvclRvV29ybGRGcmFtZSh0aGlzLnhCLCByMy5heGlzQik7CiAgICB9CgogIH0KICAvKioKICAgKiBSb3RhdGlvbmFsIG1vdG9yIGNvbnN0cmFpbnQuIFRyaWVzIHRvIGtlZXAgdGhlIHJlbGF0aXZlIGFuZ3VsYXIgdmVsb2NpdHkgb2YgdGhlIGJvZGllcyB0byBhIGdpdmVuIHZhbHVlLgogICAqLwoKCiAgY2xhc3MgUm90YXRpb25hbE1vdG9yRXF1YXRpb24gZXh0ZW5kcyBFcXVhdGlvbiB7CiAgICAvKioKICAgICAqIFdvcmxkIG9yaWVudGVkIHJvdGF0aW9uYWwgYXhpcy4KICAgICAqLwoKICAgIC8qKgogICAgICogV29ybGQgb3JpZW50ZWQgcm90YXRpb25hbCBheGlzLgogICAgICovCgogICAgLyoqCiAgICAgKiBNb3RvciB2ZWxvY2l0eS4KICAgICAqLwogICAgY29uc3RydWN0b3IoYm9keUEsIGJvZHlCLCBtYXhGb3JjZSkgewogICAgICBpZiAobWF4Rm9yY2UgPT09IHZvaWQgMCkgewogICAgICAgIG1heEZvcmNlID0gMWU2OwogICAgICB9CgogICAgICBzdXBlcihib2R5QSwgYm9keUIsIC1tYXhGb3JjZSwgbWF4Rm9yY2UpOwogICAgICB0aGlzLmF4aXNBID0gdm9pZCAwOwogICAgICB0aGlzLmF4aXNCID0gdm9pZCAwOwogICAgICB0aGlzLnRhcmdldFZlbG9jaXR5ID0gdm9pZCAwOwogICAgICB0aGlzLmF4aXNBID0gbmV3IFZlYzMoKTsKICAgICAgdGhpcy5heGlzQiA9IG5ldyBWZWMzKCk7CiAgICAgIHRoaXMudGFyZ2V0VmVsb2NpdHkgPSAwOwogICAgfQoKICAgIGNvbXB1dGVCKGgpIHsKICAgICAgdGhpcy5hOwogICAgICBjb25zdCBiID0gdGhpcy5iOwogICAgICB0aGlzLmJpOwogICAgICB0aGlzLmJqOwogICAgICBjb25zdCBheGlzQSA9IHRoaXMuYXhpc0E7CiAgICAgIGNvbnN0IGF4aXNCID0gdGhpcy5heGlzQjsKICAgICAgY29uc3QgR0EgPSB0aGlzLmphY29iaWFuRWxlbWVudEE7CiAgICAgIGNvbnN0IEdCID0gdGhpcy5qYWNvYmlhbkVsZW1lbnRCOyAvLyBnID0gMAogICAgICAvLyBnZG90ID0gYXhpc0EgKiB3aSAtIGF4aXNCICogd2oKICAgICAgLy8gZ2RvdCA9IEcgKiBXID0gRyAqIFt2aSB3aSB2aiB3al0KICAgICAgLy8gPT4KICAgICAgLy8gRyA9IFswIGF4aXNBIDAgLWF4aXNCXQoKICAgICAgR0Eucm90YXRpb25hbC5jb3B5KGF4aXNBKTsKICAgICAgYXhpc0IubmVnYXRlKEdCLnJvdGF0aW9uYWwpOwogICAgICBjb25zdCBHVyA9IHRoaXMuY29tcHV0ZUdXKCkgLSB0aGlzLnRhcmdldFZlbG9jaXR5OwogICAgICBjb25zdCBHaU1mID0gdGhpcy5jb21wdXRlR2lNZigpOwogICAgICBjb25zdCBCID0gLUdXICogYiAtIGggKiBHaU1mOwogICAgICByZXR1cm4gQjsKICAgIH0KCiAgfQogIC8qKgogICAqIEhpbmdlIGNvbnN0cmFpbnQuIFRoaW5rIG9mIGl0IGFzIGEgZG9vciBoaW5nZS4gSXQgdHJpZXMgdG8ga2VlcCB0aGUgZG9vciBpbiB0aGUgY29ycmVjdCBwbGFjZSBhbmQgd2l0aCB0aGUgY29ycmVjdCBvcmllbnRhdGlvbi4KICAgKi8KCgogIGNsYXNzIEhpbmdlQ29uc3RyYWludCBleHRlbmRzIFBvaW50VG9Qb2ludENvbnN0cmFpbnQgewogICAgLyoqCiAgICAgKiBSb3RhdGlvbiBheGlzLCBkZWZpbmVkIGxvY2FsbHkgaW4gYm9keUEuCiAgICAgKi8KCiAgICAvKioKICAgICAqIFJvdGF0aW9uIGF4aXMsIGRlZmluZWQgbG9jYWxseSBpbiBib2R5Qi4KICAgICAqLwogICAgY29uc3RydWN0b3IoYm9keUEsIGJvZHlCLCBvcHRpb25zKSB7CiAgICAgIGlmIChvcHRpb25zID09PSB2b2lkIDApIHsKICAgICAgICBvcHRpb25zID0ge307CiAgICAgIH0KCiAgICAgIGNvbnN0IG1heEZvcmNlID0gdHlwZW9mIG9wdGlvbnMubWF4Rm9yY2UgIT09ICd1bmRlZmluZWQnID8gb3B0aW9ucy5tYXhGb3JjZSA6IDFlNjsKICAgICAgY29uc3QgcGl2b3RBID0gb3B0aW9ucy5waXZvdEEgPyBvcHRpb25zLnBpdm90QS5jbG9uZSgpIDogbmV3IFZlYzMoKTsKICAgICAgY29uc3QgcGl2b3RCID0gb3B0aW9ucy5waXZvdEIgPyBvcHRpb25zLnBpdm90Qi5jbG9uZSgpIDogbmV3IFZlYzMoKTsKICAgICAgc3VwZXIoYm9keUEsIHBpdm90QSwgYm9keUIsIHBpdm90QiwgbWF4Rm9yY2UpOwogICAgICB0aGlzLmF4aXNBID0gdm9pZCAwOwogICAgICB0aGlzLmF4aXNCID0gdm9pZCAwOwogICAgICB0aGlzLnJvdGF0aW9uYWxFcXVhdGlvbjEgPSB2b2lkIDA7CiAgICAgIHRoaXMucm90YXRpb25hbEVxdWF0aW9uMiA9IHZvaWQgMDsKICAgICAgdGhpcy5tb3RvckVxdWF0aW9uID0gdm9pZCAwOwogICAgICBjb25zdCBheGlzQSA9IHRoaXMuYXhpc0EgPSBvcHRpb25zLmF4aXNBID8gb3B0aW9ucy5heGlzQS5jbG9uZSgpIDogbmV3IFZlYzMoMSwgMCwgMCk7CiAgICAgIGF4aXNBLm5vcm1hbGl6ZSgpOwogICAgICBjb25zdCBheGlzQiA9IHRoaXMuYXhpc0IgPSBvcHRpb25zLmF4aXNCID8gb3B0aW9ucy5heGlzQi5jbG9uZSgpIDogbmV3IFZlYzMoMSwgMCwgMCk7CiAgICAgIGF4aXNCLm5vcm1hbGl6ZSgpOwogICAgICB0aGlzLmNvbGxpZGVDb25uZWN0ZWQgPSAhIW9wdGlvbnMuY29sbGlkZUNvbm5lY3RlZDsKICAgICAgY29uc3Qgcm90YXRpb25hbDEgPSB0aGlzLnJvdGF0aW9uYWxFcXVhdGlvbjEgPSBuZXcgUm90YXRpb25hbEVxdWF0aW9uKGJvZHlBLCBib2R5Qiwgb3B0aW9ucyk7CiAgICAgIGNvbnN0IHJvdGF0aW9uYWwyID0gdGhpcy5yb3RhdGlvbmFsRXF1YXRpb24yID0gbmV3IFJvdGF0aW9uYWxFcXVhdGlvbihib2R5QSwgYm9keUIsIG9wdGlvbnMpOwogICAgICBjb25zdCBtb3RvciA9IHRoaXMubW90b3JFcXVhdGlvbiA9IG5ldyBSb3RhdGlvbmFsTW90b3JFcXVhdGlvbihib2R5QSwgYm9keUIsIG1heEZvcmNlKTsKICAgICAgbW90b3IuZW5hYmxlZCA9IGZhbHNlOyAvLyBOb3QgZW5hYmxlZCBieSBkZWZhdWx0CiAgICAgIC8vIEVxdWF0aW9ucyB0byBiZSBmZWQgdG8gdGhlIHNvbHZlcgoKICAgICAgdGhpcy5lcXVhdGlvbnMucHVzaChyb3RhdGlvbmFsMSwgcm90YXRpb25hbDIsIG1vdG9yKTsKICAgIH0KICAgIC8qKgogICAgICogZW5hYmxlTW90b3IKICAgICAqLwoKCiAgICBlbmFibGVNb3RvcigpIHsKICAgICAgdGhpcy5tb3RvckVxdWF0aW9uLmVuYWJsZWQgPSB0cnVlOwogICAgfQogICAgLyoqCiAgICAgKiBkaXNhYmxlTW90b3IKICAgICAqLwoKCiAgICBkaXNhYmxlTW90b3IoKSB7CiAgICAgIHRoaXMubW90b3JFcXVhdGlvbi5lbmFibGVkID0gZmFsc2U7CiAgICB9CiAgICAvKioKICAgICAqIHNldE1vdG9yU3BlZWQKICAgICAqLwoKCiAgICBzZXRNb3RvclNwZWVkKHNwZWVkKSB7CiAgICAgIHRoaXMubW90b3JFcXVhdGlvbi50YXJnZXRWZWxvY2l0eSA9IHNwZWVkOwogICAgfQogICAgLyoqCiAgICAgKiBzZXRNb3Rvck1heEZvcmNlCiAgICAgKi8KCgogICAgc2V0TW90b3JNYXhGb3JjZShtYXhGb3JjZSkgewogICAgICB0aGlzLm1vdG9yRXF1YXRpb24ubWF4Rm9yY2UgPSBtYXhGb3JjZTsKICAgICAgdGhpcy5tb3RvckVxdWF0aW9uLm1pbkZvcmNlID0gLW1heEZvcmNlOwogICAgfQogICAgLyoqCiAgICAgKiB1cGRhdGUKICAgICAqLwoKCiAgICB1cGRhdGUoKSB7CiAgICAgIGNvbnN0IGJvZHlBID0gdGhpcy5ib2R5QTsKICAgICAgY29uc3QgYm9keUIgPSB0aGlzLmJvZHlCOwogICAgICBjb25zdCBtb3RvciA9IHRoaXMubW90b3JFcXVhdGlvbjsKICAgICAgY29uc3QgcjEgPSB0aGlzLnJvdGF0aW9uYWxFcXVhdGlvbjE7CiAgICAgIGNvbnN0IHIyID0gdGhpcy5yb3RhdGlvbmFsRXF1YXRpb24yOwogICAgICBjb25zdCB3b3JsZEF4aXNBID0gSGluZ2VDb25zdHJhaW50X3VwZGF0ZV90bXBWZWMxOwogICAgICBjb25zdCB3b3JsZEF4aXNCID0gSGluZ2VDb25zdHJhaW50X3VwZGF0ZV90bXBWZWMyOwogICAgICBjb25zdCBheGlzQSA9IHRoaXMuYXhpc0E7CiAgICAgIGNvbnN0IGF4aXNCID0gdGhpcy5heGlzQjsKICAgICAgc3VwZXIudXBkYXRlKCk7IC8vIEdldCB3b3JsZCBheGVzCgogICAgICBib2R5QS5xdWF0ZXJuaW9uLnZtdWx0KGF4aXNBLCB3b3JsZEF4aXNBKTsKICAgICAgYm9keUIucXVhdGVybmlvbi52bXVsdChheGlzQiwgd29ybGRBeGlzQik7CiAgICAgIHdvcmxkQXhpc0EudGFuZ2VudHMocjEuYXhpc0EsIHIyLmF4aXNBKTsKICAgICAgcjEuYXhpc0IuY29weSh3b3JsZEF4aXNCKTsKICAgICAgcjIuYXhpc0IuY29weSh3b3JsZEF4aXNCKTsKCiAgICAgIGlmICh0aGlzLm1vdG9yRXF1YXRpb24uZW5hYmxlZCkgewogICAgICAgIGJvZHlBLnF1YXRlcm5pb24udm11bHQodGhpcy5heGlzQSwgbW90b3IuYXhpc0EpOwogICAgICAgIGJvZHlCLnF1YXRlcm5pb24udm11bHQodGhpcy5heGlzQiwgbW90b3IuYXhpc0IpOwogICAgICB9CiAgICB9CgogIH0KCiAgY29uc3QgSGluZ2VDb25zdHJhaW50X3VwZGF0ZV90bXBWZWMxID0gbmV3IFZlYzMoKTsKICBjb25zdCBIaW5nZUNvbnN0cmFpbnRfdXBkYXRlX3RtcFZlYzIgPSBuZXcgVmVjMygpOwogIC8qKgogICAqIENvbnN0cmFpbnMgdGhlIHNsaXBwaW5nIGluIGEgY29udGFjdCBhbG9uZyBhIHRhbmdlbnQKICAgKi8KCiAgY2xhc3MgRnJpY3Rpb25FcXVhdGlvbiBleHRlbmRzIEVxdWF0aW9uIHsKICAgIC8vIFRhbmdlbnQKCiAgICAvKioKICAgICAqIEBwYXJhbSBzbGlwRm9yY2Ugc2hvdWxkIGJlICstRl9mcmljdGlvbiA9ICstbXUgKiBGX25vcm1hbCA9ICstbXUgKiBtICogZwogICAgICovCiAgICBjb25zdHJ1Y3Rvcihib2R5QSwgYm9keUIsIHNsaXBGb3JjZSkgewogICAgICBzdXBlcihib2R5QSwgYm9keUIsIC1zbGlwRm9yY2UsIHNsaXBGb3JjZSk7CiAgICAgIHRoaXMucmkgPSB2b2lkIDA7CiAgICAgIHRoaXMucmogPSB2b2lkIDA7CiAgICAgIHRoaXMudCA9IHZvaWQgMDsKICAgICAgdGhpcy5yaSA9IG5ldyBWZWMzKCk7CiAgICAgIHRoaXMucmogPSBuZXcgVmVjMygpOwogICAgICB0aGlzLnQgPSBuZXcgVmVjMygpOwogICAgfQoKICAgIGNvbXB1dGVCKGgpIHsKICAgICAgdGhpcy5hOwogICAgICBjb25zdCBiID0gdGhpcy5iOwogICAgICB0aGlzLmJpOwogICAgICB0aGlzLmJqOwogICAgICBjb25zdCByaSA9IHRoaXMucmk7CiAgICAgIGNvbnN0IHJqID0gdGhpcy5yajsKICAgICAgY29uc3Qgcml4dCA9IEZyaWN0aW9uRXF1YXRpb25fY29tcHV0ZUJfdGVtcDE7CiAgICAgIGNvbnN0IHJqeHQgPSBGcmljdGlvbkVxdWF0aW9uX2NvbXB1dGVCX3RlbXAyOwogICAgICBjb25zdCB0ID0gdGhpcy50OyAvLyBDYWx1Y2xhdGUgY3Jvc3MgcHJvZHVjdHMKCiAgICAgIHJpLmNyb3NzKHQsIHJpeHQpOwogICAgICByai5jcm9zcyh0LCByanh0KTsgLy8gRyA9IFstdCAtcml4dCB0IHJqeHRdCiAgICAgIC8vIEFuZCByZW1lbWJlciwgdGhpcyBpcyBhIHB1cmUgdmVsb2NpdHkgY29uc3RyYWludCwgZyBpcyBhbHdheXMgemVybyEKCiAgICAgIGNvbnN0IEdBID0gdGhpcy5qYWNvYmlhbkVsZW1lbnRBOwogICAgICBjb25zdCBHQiA9IHRoaXMuamFjb2JpYW5FbGVtZW50QjsKICAgICAgdC5uZWdhdGUoR0Euc3BhdGlhbCk7CiAgICAgIHJpeHQubmVnYXRlKEdBLnJvdGF0aW9uYWwpOwogICAgICBHQi5zcGF0aWFsLmNvcHkodCk7CiAgICAgIEdCLnJvdGF0aW9uYWwuY29weShyanh0KTsKICAgICAgY29uc3QgR1cgPSB0aGlzLmNvbXB1dGVHVygpOwogICAgICBjb25zdCBHaU1mID0gdGhpcy5jb21wdXRlR2lNZigpOwogICAgICBjb25zdCBCID0gLUdXICogYiAtIGggKiBHaU1mOwogICAgICByZXR1cm4gQjsKICAgIH0KCiAgfQoKICBjb25zdCBGcmljdGlvbkVxdWF0aW9uX2NvbXB1dGVCX3RlbXAxID0gbmV3IFZlYzMoKTsKICBjb25zdCBGcmljdGlvbkVxdWF0aW9uX2NvbXB1dGVCX3RlbXAyID0gbmV3IFZlYzMoKTsKICAvKioKICAgKiBEZWZpbmVzIHdoYXQgaGFwcGVucyB3aGVuIHR3byBtYXRlcmlhbHMgbWVldC4KICAgKiBAdG9kbyBSZWZhY3RvciBtYXRlcmlhbHMgdG8gbWF0ZXJpYWxBIGFuZCBtYXRlcmlhbEIKICAgKi8KCiAgY2xhc3MgQ29udGFjdE1hdGVyaWFsIHsKICAgIC8qKgogICAgICogSWRlbnRpZmllciBvZiB0aGlzIG1hdGVyaWFsLgogICAgICovCgogICAgLyoqCiAgICAgKiBQYXJ0aWNpcGF0aW5nIG1hdGVyaWFscy4KICAgICAqLwoKICAgIC8qKgogICAgICogRnJpY3Rpb24gY29lZmZpY2llbnQuCiAgICAgKiBAZGVmYXVsdCAwLjMKICAgICAqLwoKICAgIC8qKgogICAgICogUmVzdGl0dXRpb24gY29lZmZpY2llbnQuCiAgICAgKiBAZGVmYXVsdCAwLjMKICAgICAqLwoKICAgIC8qKgogICAgICogU3RpZmZuZXNzIG9mIHRoZSBwcm9kdWNlZCBjb250YWN0IGVxdWF0aW9ucy4KICAgICAqIEBkZWZhdWx0IDFlNwogICAgICovCgogICAgLyoqCiAgICAgKiBSZWxheGF0aW9uIHRpbWUgb2YgdGhlIHByb2R1Y2VkIGNvbnRhY3QgZXF1YXRpb25zLgogICAgICogQGRlZmF1bHQgMwogICAgICovCgogICAgLyoqCiAgICAgKiBTdGlmZm5lc3Mgb2YgdGhlIHByb2R1Y2VkIGZyaWN0aW9uIGVxdWF0aW9ucy4KICAgICAqIEBkZWZhdWx0IDFlNwogICAgICovCgogICAgLyoqCiAgICAgKiBSZWxheGF0aW9uIHRpbWUgb2YgdGhlIHByb2R1Y2VkIGZyaWN0aW9uIGVxdWF0aW9ucwogICAgICogQGRlZmF1bHQgMwogICAgICovCiAgICBjb25zdHJ1Y3RvcihtMSwgbTIsIG9wdGlvbnMpIHsKICAgICAgdGhpcy5pZCA9IHZvaWQgMDsKICAgICAgdGhpcy5tYXRlcmlhbHMgPSB2b2lkIDA7CiAgICAgIHRoaXMuZnJpY3Rpb24gPSB2b2lkIDA7CiAgICAgIHRoaXMucmVzdGl0dXRpb24gPSB2b2lkIDA7CiAgICAgIHRoaXMuY29udGFjdEVxdWF0aW9uU3RpZmZuZXNzID0gdm9pZCAwOwogICAgICB0aGlzLmNvbnRhY3RFcXVhdGlvblJlbGF4YXRpb24gPSB2b2lkIDA7CiAgICAgIHRoaXMuZnJpY3Rpb25FcXVhdGlvblN0aWZmbmVzcyA9IHZvaWQgMDsKICAgICAgdGhpcy5mcmljdGlvbkVxdWF0aW9uUmVsYXhhdGlvbiA9IHZvaWQgMDsKICAgICAgb3B0aW9ucyA9IFV0aWxzLmRlZmF1bHRzKG9wdGlvbnMsIHsKICAgICAgICBmcmljdGlvbjogMC4zLAogICAgICAgIHJlc3RpdHV0aW9uOiAwLjMsCiAgICAgICAgY29udGFjdEVxdWF0aW9uU3RpZmZuZXNzOiAxZTcsCiAgICAgICAgY29udGFjdEVxdWF0aW9uUmVsYXhhdGlvbjogMywKICAgICAgICBmcmljdGlvbkVxdWF0aW9uU3RpZmZuZXNzOiAxZTcsCiAgICAgICAgZnJpY3Rpb25FcXVhdGlvblJlbGF4YXRpb246IDMKICAgICAgfSk7CiAgICAgIHRoaXMuaWQgPSBDb250YWN0TWF0ZXJpYWwuaWRDb3VudGVyKys7CiAgICAgIHRoaXMubWF0ZXJpYWxzID0gW20xLCBtMl07CiAgICAgIHRoaXMuZnJpY3Rpb24gPSBvcHRpb25zLmZyaWN0aW9uOwogICAgICB0aGlzLnJlc3RpdHV0aW9uID0gb3B0aW9ucy5yZXN0aXR1dGlvbjsKICAgICAgdGhpcy5jb250YWN0RXF1YXRpb25TdGlmZm5lc3MgPSBvcHRpb25zLmNvbnRhY3RFcXVhdGlvblN0aWZmbmVzczsKICAgICAgdGhpcy5jb250YWN0RXF1YXRpb25SZWxheGF0aW9uID0gb3B0aW9ucy5jb250YWN0RXF1YXRpb25SZWxheGF0aW9uOwogICAgICB0aGlzLmZyaWN0aW9uRXF1YXRpb25TdGlmZm5lc3MgPSBvcHRpb25zLmZyaWN0aW9uRXF1YXRpb25TdGlmZm5lc3M7CiAgICAgIHRoaXMuZnJpY3Rpb25FcXVhdGlvblJlbGF4YXRpb24gPSBvcHRpb25zLmZyaWN0aW9uRXF1YXRpb25SZWxheGF0aW9uOwogICAgfQoKICB9CgogIENvbnRhY3RNYXRlcmlhbC5pZENvdW50ZXIgPSAwOwogIC8qKgogICAqIERlZmluZXMgYSBwaHlzaWNzIG1hdGVyaWFsLgogICAqLwoKICBjbGFzcyBNYXRlcmlhbCB7CiAgICAvKioKICAgICAqIE1hdGVyaWFsIG5hbWUuCiAgICAgKiBJZiBvcHRpb25zIGlzIGEgc3RyaW5nLCBuYW1lIHdpbGwgYmUgc2V0IHRvIHRoYXQgc3RyaW5nLgogICAgICogQHRvZG8gRGVwcmVjYXRlIHRoaXMKICAgICAqLwoKICAgIC8qKiBNYXRlcmlhbCBpZC4gKi8KCiAgICAvKioKICAgICAqIEZyaWN0aW9uIGZvciB0aGlzIG1hdGVyaWFsLgogICAgICogSWYgbm9uLW5lZ2F0aXZlLCBpdCB3aWxsIGJlIHVzZWQgaW5zdGVhZCBvZiB0aGUgZnJpY3Rpb24gZ2l2ZW4gYnkgQ29udGFjdE1hdGVyaWFscy4gSWYgdGhlcmUncyBubyBtYXRjaGluZyBDb250YWN0TWF0ZXJpYWwsIHRoZSB2YWx1ZSBmcm9tIGBkZWZhdWx0Q29udGFjdE1hdGVyaWFsYCBpbiB0aGUgV29ybGQgd2lsbCBiZSB1c2VkLgogICAgICovCgogICAgLyoqCiAgICAgKiBSZXN0aXR1dGlvbiBmb3IgdGhpcyBtYXRlcmlhbC4KICAgICAqIElmIG5vbi1uZWdhdGl2ZSwgaXQgd2lsbCBiZSB1c2VkIGluc3RlYWQgb2YgdGhlIHJlc3RpdHV0aW9uIGdpdmVuIGJ5IENvbnRhY3RNYXRlcmlhbHMuIElmIHRoZXJlJ3Mgbm8gbWF0Y2hpbmcgQ29udGFjdE1hdGVyaWFsLCB0aGUgdmFsdWUgZnJvbSBgZGVmYXVsdENvbnRhY3RNYXRlcmlhbGAgaW4gdGhlIFdvcmxkIHdpbGwgYmUgdXNlZC4KICAgICAqLwogICAgY29uc3RydWN0b3Iob3B0aW9ucykgewogICAgICBpZiAob3B0aW9ucyA9PT0gdm9pZCAwKSB7CiAgICAgICAgb3B0aW9ucyA9IHt9OwogICAgICB9CgogICAgICB0aGlzLm5hbWUgPSB2b2lkIDA7CiAgICAgIHRoaXMuaWQgPSB2b2lkIDA7CiAgICAgIHRoaXMuZnJpY3Rpb24gPSB2b2lkIDA7CiAgICAgIHRoaXMucmVzdGl0dXRpb24gPSB2b2lkIDA7CiAgICAgIGxldCBuYW1lID0gJyc7IC8vIEJhY2t3YXJkcyBjb21wYXRpYmlsaXR5IGZpeAoKICAgICAgaWYgKHR5cGVvZiBvcHRpb25zID09PSAnc3RyaW5nJykgewogICAgICAgIC8vY29uc29sZS53YXJuKGBQYXNzaW5nIGEgc3RyaW5nIHRvIE1hdGVyaWFsT3B0aW9ucyBpcyBkZXByZWNhdGVkLCBhbmQgaGFzIG5vIGVmZmVjdGApCiAgICAgICAgbmFtZSA9IG9wdGlvbnM7CiAgICAgICAgb3B0aW9ucyA9IHt9OwogICAgICB9CgogICAgICB0aGlzLm5hbWUgPSBuYW1lOwogICAgICB0aGlzLmlkID0gTWF0ZXJpYWwuaWRDb3VudGVyKys7CiAgICAgIHRoaXMuZnJpY3Rpb24gPSB0eXBlb2Ygb3B0aW9ucy5mcmljdGlvbiAhPT0gJ3VuZGVmaW5lZCcgPyBvcHRpb25zLmZyaWN0aW9uIDogLTE7CiAgICAgIHRoaXMucmVzdGl0dXRpb24gPSB0eXBlb2Ygb3B0aW9ucy5yZXN0aXR1dGlvbiAhPT0gJ3VuZGVmaW5lZCcgPyBvcHRpb25zLnJlc3RpdHV0aW9uIDogLTE7CiAgICB9CgogIH0KCiAgTWF0ZXJpYWwuaWRDb3VudGVyID0gMDsKICAvKioKICAgKiBBIHNwcmluZywgY29ubmVjdGluZyB0d28gYm9kaWVzLgogICAqIEBleGFtcGxlCiAgICogICAgIGNvbnN0IHNwcmluZyA9IG5ldyBTcHJpbmcoYm94Qm9keSwgc3BoZXJlQm9keSwgewogICAqICAgICAgIHJlc3RMZW5ndGg6IDAsCiAgICogICAgICAgc3RpZmZuZXNzOiA1MCwKICAgKiAgICAgICBkYW1waW5nOiAxLAogICAqICAgICB9KQogICAqCiAgICogICAgIC8vIENvbXB1dGUgdGhlIGZvcmNlIGFmdGVyIGVhY2ggc3RlcAogICAqICAgICB3b3JsZC5hZGRFdmVudExpc3RlbmVyKCdwb3N0U3RlcCcsIChldmVudCkgPT4gewogICAqICAgICAgIHNwcmluZy5hcHBseUZvcmNlKCkKICAgKiAgICAgfSkKICAgKi8KCiAgY2xhc3MgU3ByaW5nIHsKICAgIC8qKgogICAgICogUmVzdCBsZW5ndGggb2YgdGhlIHNwcmluZy4gQSBudW1iZXIgPiAwLgogICAgICogQGRlZmF1bHQgMQogICAgICovCgogICAgLyoqCiAgICAgKiBTdGlmZm5lc3Mgb2YgdGhlIHNwcmluZy4gQSBudW1iZXIgPj0gMC4KICAgICAqIEBkZWZhdWx0IDEwMAogICAgICovCgogICAgLyoqCiAgICAgKiBEYW1waW5nIG9mIHRoZSBzcHJpbmcuIEEgbnVtYmVyID49IDAuCiAgICAgKiBAZGVmYXVsdCAxCiAgICAgKi8KCiAgICAvKioKICAgICAqIEZpcnN0IGNvbm5lY3RlZCBib2R5LgogICAgICovCgogICAgLyoqCiAgICAgKiBTZWNvbmQgY29ubmVjdGVkIGJvZHkuCiAgICAgKi8KCiAgICAvKioKICAgICAqIEFuY2hvciBmb3IgYm9keUEgaW4gbG9jYWwgYm9keUEgY29vcmRpbmF0ZXMuCiAgICAgKiBXaGVyZSB0byBob29rIHRoZSBzcHJpbmcgdG8gYm9keSBBLCBpbiBsb2NhbCBib2R5IGNvb3JkaW5hdGVzLgogICAgICogQGRlZmF1bHQgbmV3IFZlYzMoKQogICAgICovCgogICAgLyoqCiAgICAgKiBBbmNob3IgZm9yIGJvZHlCIGluIGxvY2FsIGJvZHlCIGNvb3JkaW5hdGVzLgogICAgICogV2hlcmUgdG8gaG9vayB0aGUgc3ByaW5nIHRvIGJvZHkgQiwgaW4gbG9jYWwgYm9keSBjb29yZGluYXRlcy4KICAgICAqIEBkZWZhdWx0IG5ldyBWZWMzKCkKICAgICAqLwogICAgY29uc3RydWN0b3IoYm9keUEsIGJvZHlCLCBvcHRpb25zKSB7CiAgICAgIGlmIChvcHRpb25zID09PSB2b2lkIDApIHsKICAgICAgICBvcHRpb25zID0ge307CiAgICAgIH0KCiAgICAgIHRoaXMucmVzdExlbmd0aCA9IHZvaWQgMDsKICAgICAgdGhpcy5zdGlmZm5lc3MgPSB2b2lkIDA7CiAgICAgIHRoaXMuZGFtcGluZyA9IHZvaWQgMDsKICAgICAgdGhpcy5ib2R5QSA9IHZvaWQgMDsKICAgICAgdGhpcy5ib2R5QiA9IHZvaWQgMDsKICAgICAgdGhpcy5sb2NhbEFuY2hvckEgPSB2b2lkIDA7CiAgICAgIHRoaXMubG9jYWxBbmNob3JCID0gdm9pZCAwOwogICAgICB0aGlzLnJlc3RMZW5ndGggPSB0eXBlb2Ygb3B0aW9ucy5yZXN0TGVuZ3RoID09PSAnbnVtYmVyJyA/IG9wdGlvbnMucmVzdExlbmd0aCA6IDE7CiAgICAgIHRoaXMuc3RpZmZuZXNzID0gb3B0aW9ucy5zdGlmZm5lc3MgfHwgMTAwOwogICAgICB0aGlzLmRhbXBpbmcgPSBvcHRpb25zLmRhbXBpbmcgfHwgMTsKICAgICAgdGhpcy5ib2R5QSA9IGJvZHlBOwogICAgICB0aGlzLmJvZHlCID0gYm9keUI7CiAgICAgIHRoaXMubG9jYWxBbmNob3JBID0gbmV3IFZlYzMoKTsKICAgICAgdGhpcy5sb2NhbEFuY2hvckIgPSBuZXcgVmVjMygpOwoKICAgICAgaWYgKG9wdGlvbnMubG9jYWxBbmNob3JBKSB7CiAgICAgICAgdGhpcy5sb2NhbEFuY2hvckEuY29weShvcHRpb25zLmxvY2FsQW5jaG9yQSk7CiAgICAgIH0KCiAgICAgIGlmIChvcHRpb25zLmxvY2FsQW5jaG9yQikgewogICAgICAgIHRoaXMubG9jYWxBbmNob3JCLmNvcHkob3B0aW9ucy5sb2NhbEFuY2hvckIpOwogICAgICB9CgogICAgICBpZiAob3B0aW9ucy53b3JsZEFuY2hvckEpIHsKICAgICAgICB0aGlzLnNldFdvcmxkQW5jaG9yQShvcHRpb25zLndvcmxkQW5jaG9yQSk7CiAgICAgIH0KCiAgICAgIGlmIChvcHRpb25zLndvcmxkQW5jaG9yQikgewogICAgICAgIHRoaXMuc2V0V29ybGRBbmNob3JCKG9wdGlvbnMud29ybGRBbmNob3JCKTsKICAgICAgfQogICAgfQogICAgLyoqCiAgICAgKiBTZXQgdGhlIGFuY2hvciBwb2ludCBvbiBib2R5IEEsIHVzaW5nIHdvcmxkIGNvb3JkaW5hdGVzLgogICAgICovCgoKICAgIHNldFdvcmxkQW5jaG9yQSh3b3JsZEFuY2hvckEpIHsKICAgICAgdGhpcy5ib2R5QS5wb2ludFRvTG9jYWxGcmFtZSh3b3JsZEFuY2hvckEsIHRoaXMubG9jYWxBbmNob3JBKTsKICAgIH0KICAgIC8qKgogICAgICogU2V0IHRoZSBhbmNob3IgcG9pbnQgb24gYm9keSBCLCB1c2luZyB3b3JsZCBjb29yZGluYXRlcy4KICAgICAqLwoKCiAgICBzZXRXb3JsZEFuY2hvckIod29ybGRBbmNob3JCKSB7CiAgICAgIHRoaXMuYm9keUIucG9pbnRUb0xvY2FsRnJhbWUod29ybGRBbmNob3JCLCB0aGlzLmxvY2FsQW5jaG9yQik7CiAgICB9CiAgICAvKioKICAgICAqIEdldCB0aGUgYW5jaG9yIHBvaW50IG9uIGJvZHkgQSwgaW4gd29ybGQgY29vcmRpbmF0ZXMuCiAgICAgKiBAcGFyYW0gcmVzdWx0IFRoZSB2ZWN0b3IgdG8gc3RvcmUgdGhlIHJlc3VsdCBpbi4KICAgICAqLwoKCiAgICBnZXRXb3JsZEFuY2hvckEocmVzdWx0KSB7CiAgICAgIHRoaXMuYm9keUEucG9pbnRUb1dvcmxkRnJhbWUodGhpcy5sb2NhbEFuY2hvckEsIHJlc3VsdCk7CiAgICB9CiAgICAvKioKICAgICAqIEdldCB0aGUgYW5jaG9yIHBvaW50IG9uIGJvZHkgQiwgaW4gd29ybGQgY29vcmRpbmF0ZXMuCiAgICAgKiBAcGFyYW0gcmVzdWx0IFRoZSB2ZWN0b3IgdG8gc3RvcmUgdGhlIHJlc3VsdCBpbi4KICAgICAqLwoKCiAgICBnZXRXb3JsZEFuY2hvckIocmVzdWx0KSB7CiAgICAgIHRoaXMuYm9keUIucG9pbnRUb1dvcmxkRnJhbWUodGhpcy5sb2NhbEFuY2hvckIsIHJlc3VsdCk7CiAgICB9CiAgICAvKioKICAgICAqIEFwcGx5IHRoZSBzcHJpbmcgZm9yY2UgdG8gdGhlIGNvbm5lY3RlZCBib2RpZXMuCiAgICAgKi8KCgogICAgYXBwbHlGb3JjZSgpIHsKICAgICAgY29uc3QgayA9IHRoaXMuc3RpZmZuZXNzOwogICAgICBjb25zdCBkID0gdGhpcy5kYW1waW5nOwogICAgICBjb25zdCBsID0gdGhpcy5yZXN0TGVuZ3RoOwogICAgICBjb25zdCBib2R5QSA9IHRoaXMuYm9keUE7CiAgICAgIGNvbnN0IGJvZHlCID0gdGhpcy5ib2R5QjsKICAgICAgY29uc3QgciA9IGFwcGx5Rm9yY2VfcjsKICAgICAgY29uc3Qgcl91bml0ID0gYXBwbHlGb3JjZV9yX3VuaXQ7CiAgICAgIGNvbnN0IHUgPSBhcHBseUZvcmNlX3U7CiAgICAgIGNvbnN0IGYgPSBhcHBseUZvcmNlX2Y7CiAgICAgIGNvbnN0IHRtcCA9IGFwcGx5Rm9yY2VfdG1wOwogICAgICBjb25zdCB3b3JsZEFuY2hvckEgPSBhcHBseUZvcmNlX3dvcmxkQW5jaG9yQTsKICAgICAgY29uc3Qgd29ybGRBbmNob3JCID0gYXBwbHlGb3JjZV93b3JsZEFuY2hvckI7CiAgICAgIGNvbnN0IHJpID0gYXBwbHlGb3JjZV9yaTsKICAgICAgY29uc3QgcmogPSBhcHBseUZvcmNlX3JqOwogICAgICBjb25zdCByaV94X2YgPSBhcHBseUZvcmNlX3JpX3hfZjsKICAgICAgY29uc3QgcmpfeF9mID0gYXBwbHlGb3JjZV9yal94X2Y7IC8vIEdldCB3b3JsZCBhbmNob3JzCgogICAgICB0aGlzLmdldFdvcmxkQW5jaG9yQSh3b3JsZEFuY2hvckEpOwogICAgICB0aGlzLmdldFdvcmxkQW5jaG9yQih3b3JsZEFuY2hvckIpOyAvLyBHZXQgb2Zmc2V0IHBvaW50cwoKICAgICAgd29ybGRBbmNob3JBLnZzdWIoYm9keUEucG9zaXRpb24sIHJpKTsKICAgICAgd29ybGRBbmNob3JCLnZzdWIoYm9keUIucG9zaXRpb24sIHJqKTsgLy8gQ29tcHV0ZSBkaXN0YW5jZSB2ZWN0b3IgYmV0d2VlbiB3b3JsZCBhbmNob3IgcG9pbnRzCgogICAgICB3b3JsZEFuY2hvckIudnN1Yih3b3JsZEFuY2hvckEsIHIpOwogICAgICBjb25zdCBybGVuID0gci5sZW5ndGgoKTsKICAgICAgcl91bml0LmNvcHkocik7CiAgICAgIHJfdW5pdC5ub3JtYWxpemUoKTsgLy8gQ29tcHV0ZSByZWxhdGl2ZSB2ZWxvY2l0eSBvZiB0aGUgYW5jaG9yIHBvaW50cywgdQoKICAgICAgYm9keUIudmVsb2NpdHkudnN1Yihib2R5QS52ZWxvY2l0eSwgdSk7IC8vIEFkZCByb3RhdGlvbmFsIHZlbG9jaXR5CgogICAgICBib2R5Qi5hbmd1bGFyVmVsb2NpdHkuY3Jvc3MocmosIHRtcCk7CiAgICAgIHUudmFkZCh0bXAsIHUpOwogICAgICBib2R5QS5hbmd1bGFyVmVsb2NpdHkuY3Jvc3MocmksIHRtcCk7CiAgICAgIHUudnN1Yih0bXAsIHUpOyAvLyBGID0gLSBrICogKCB4IC0gTCApIC0gRCAqICggdSApCgogICAgICByX3VuaXQuc2NhbGUoLWsgKiAocmxlbiAtIGwpIC0gZCAqIHUuZG90KHJfdW5pdCksIGYpOyAvLyBBZGQgZm9yY2VzIHRvIGJvZGllcwoKICAgICAgYm9keUEuZm9yY2UudnN1YihmLCBib2R5QS5mb3JjZSk7CiAgICAgIGJvZHlCLmZvcmNlLnZhZGQoZiwgYm9keUIuZm9yY2UpOyAvLyBBbmd1bGFyIGZvcmNlCgogICAgICByaS5jcm9zcyhmLCByaV94X2YpOwogICAgICByai5jcm9zcyhmLCByal94X2YpOwogICAgICBib2R5QS50b3JxdWUudnN1YihyaV94X2YsIGJvZHlBLnRvcnF1ZSk7CiAgICAgIGJvZHlCLnRvcnF1ZS52YWRkKHJqX3hfZiwgYm9keUIudG9ycXVlKTsKICAgIH0KCiAgfQoKICBjb25zdCBhcHBseUZvcmNlX3IgPSBuZXcgVmVjMygpOwogIGNvbnN0IGFwcGx5Rm9yY2Vfcl91bml0ID0gbmV3IFZlYzMoKTsKICBjb25zdCBhcHBseUZvcmNlX3UgPSBuZXcgVmVjMygpOwogIGNvbnN0IGFwcGx5Rm9yY2VfZiA9IG5ldyBWZWMzKCk7CiAgY29uc3QgYXBwbHlGb3JjZV93b3JsZEFuY2hvckEgPSBuZXcgVmVjMygpOwogIGNvbnN0IGFwcGx5Rm9yY2Vfd29ybGRBbmNob3JCID0gbmV3IFZlYzMoKTsKICBjb25zdCBhcHBseUZvcmNlX3JpID0gbmV3IFZlYzMoKTsKICBjb25zdCBhcHBseUZvcmNlX3JqID0gbmV3IFZlYzMoKTsKICBjb25zdCBhcHBseUZvcmNlX3JpX3hfZiA9IG5ldyBWZWMzKCk7CiAgY29uc3QgYXBwbHlGb3JjZV9yal94X2YgPSBuZXcgVmVjMygpOwogIGNvbnN0IGFwcGx5Rm9yY2VfdG1wID0gbmV3IFZlYzMoKTsKICAvKioKICAgKiBXaGVlbEluZm8KICAgKi8KCiAgY2xhc3MgV2hlZWxJbmZvIHsKICAgIC8qKgogICAgICogTWF4IHRyYXZlbCBkaXN0YW5jZSBvZiB0aGUgc3VzcGVuc2lvbiwgaW4gbWV0ZXJzLgogICAgICogQGRlZmF1bHQgMQogICAgICovCgogICAgLyoqCiAgICAgKiBTcGVlZCB0byBhcHBseSB0byB0aGUgd2hlZWwgcm90YXRpb24gd2hlbiB0aGUgd2hlZWwgaXMgc2xpZGluZy4KICAgICAqIEBkZWZhdWx0IC0wLjEKICAgICAqLwoKICAgIC8qKgogICAgICogSWYgdGhlIGN1c3RvbVNsaWRpbmdSb3RhdGlvbmFsU3BlZWQgc2hvdWxkIGJlIHVzZWQuCiAgICAgKiBAZGVmYXVsdCBmYWxzZQogICAgICovCgogICAgLyoqCiAgICAgKiBzbGlkaW5nCiAgICAgKi8KCiAgICAvKioKICAgICAqIENvbm5lY3Rpb24gcG9pbnQsIGRlZmluZWQgbG9jYWxseSBpbiB0aGUgY2hhc3NpcyBib2R5IGZyYW1lLgogICAgICovCgogICAgLyoqCiAgICAgKiBjaGFzc2lzQ29ubmVjdGlvblBvaW50V29ybGQKICAgICAqLwoKICAgIC8qKgogICAgICogZGlyZWN0aW9uTG9jYWwKICAgICAqLwoKICAgIC8qKgogICAgICogZGlyZWN0aW9uV29ybGQKICAgICAqLwoKICAgIC8qKgogICAgICogYXhsZUxvY2FsCiAgICAgKi8KCiAgICAvKioKICAgICAqIGF4bGVXb3JsZAogICAgICovCgogICAgLyoqCiAgICAgKiBzdXNwZW5zaW9uUmVzdExlbmd0aAogICAgICogQGRlZmF1bHQgMQogICAgICovCgogICAgLyoqCiAgICAgKiBzdXNwZW5zaW9uTWF4TGVuZ3RoCiAgICAgKiBAZGVmYXVsdCAyCiAgICAgKi8KCiAgICAvKioKICAgICAqIHJhZGl1cwogICAgICogQGRlZmF1bHQgMQogICAgICovCgogICAgLyoqCiAgICAgKiBzdXNwZW5zaW9uU3RpZmZuZXNzCiAgICAgKiBAZGVmYXVsdCAxMDAKICAgICAqLwoKICAgIC8qKgogICAgICogZGFtcGluZ0NvbXByZXNzaW9uCiAgICAgKiBAZGVmYXVsdCAxMAogICAgICovCgogICAgLyoqCiAgICAgKiBkYW1waW5nUmVsYXhhdGlvbgogICAgICogQGRlZmF1bHQgMTAKICAgICAqLwoKICAgIC8qKgogICAgICogZnJpY3Rpb25TbGlwCiAgICAgKiBAZGVmYXVsdCAxMC41CiAgICAgKi8KCiAgICAvKiogZm9yd2FyZEFjY2VsZXJhdGlvbiAqLwoKICAgIC8qKiBzaWRlQWNjZWxlcmF0aW9uICovCgogICAgLyoqCiAgICAgKiBzdGVlcmluZwogICAgICogQGRlZmF1bHQgMAogICAgICovCgogICAgLyoqCiAgICAgKiBSb3RhdGlvbiB2YWx1ZSwgaW4gcmFkaWFucy4KICAgICAqIEBkZWZhdWx0IDAKICAgICAqLwoKICAgIC8qKgogICAgICogZGVsdGFSb3RhdGlvbgogICAgICogQGRlZmF1bHQgMAogICAgICovCgogICAgLyoqCiAgICAgKiByb2xsSW5mbHVlbmNlCiAgICAgKiBAZGVmYXVsdCAwLjAxCiAgICAgKi8KCiAgICAvKioKICAgICAqIG1heFN1c3BlbnNpb25Gb3JjZQogICAgICovCgogICAgLyoqCiAgICAgKiBlbmdpbmVGb3JjZQogICAgICovCgogICAgLyoqCiAgICAgKiBicmFrZQogICAgICovCgogICAgLyoqCiAgICAgKiBpc0Zyb250V2hlZWwKICAgICAqIEBkZWZhdWx0IHRydWUKICAgICAqLwoKICAgIC8qKgogICAgICogY2xpcHBlZEludkNvbnRhY3REb3RTdXNwZW5zaW9uCiAgICAgKiBAZGVmYXVsdCAxCiAgICAgKi8KCiAgICAvKioKICAgICAqIHN1c3BlbnNpb25SZWxhdGl2ZVZlbG9jaXR5CiAgICAgKiBAZGVmYXVsdCAwCiAgICAgKi8KCiAgICAvKioKICAgICAqIHN1c3BlbnNpb25Gb3JjZQogICAgICogQGRlZmF1bHQgMAogICAgICovCgogICAgLyoqCiAgICAgKiBzbGlwSW5mbwogICAgICovCgogICAgLyoqCiAgICAgKiBza2lkSW5mbwogICAgICogQGRlZmF1bHQgMAogICAgICovCgogICAgLyoqCiAgICAgKiBzdXNwZW5zaW9uTGVuZ3RoCiAgICAgKiBAZGVmYXVsdCAwCiAgICAgKi8KCiAgICAvKioKICAgICAqIHNpZGVJbXB1bHNlCiAgICAgKi8KCiAgICAvKioKICAgICAqIGZvcndhcmRJbXB1bHNlCiAgICAgKi8KCiAgICAvKioKICAgICAqIFRoZSByZXN1bHQgZnJvbSByYXljYXN0aW5nLgogICAgICovCgogICAgLyoqCiAgICAgKiBXaGVlbCB3b3JsZCB0cmFuc2Zvcm0uCiAgICAgKi8KCiAgICAvKioKICAgICAqIGlzSW5Db250YWN0CiAgICAgKi8KICAgIGNvbnN0cnVjdG9yKG9wdGlvbnMpIHsKICAgICAgaWYgKG9wdGlvbnMgPT09IHZvaWQgMCkgewogICAgICAgIG9wdGlvbnMgPSB7fTsKICAgICAgfQoKICAgICAgdGhpcy5tYXhTdXNwZW5zaW9uVHJhdmVsID0gdm9pZCAwOwogICAgICB0aGlzLmN1c3RvbVNsaWRpbmdSb3RhdGlvbmFsU3BlZWQgPSB2b2lkIDA7CiAgICAgIHRoaXMudXNlQ3VzdG9tU2xpZGluZ1JvdGF0aW9uYWxTcGVlZCA9IHZvaWQgMDsKICAgICAgdGhpcy5zbGlkaW5nID0gdm9pZCAwOwogICAgICB0aGlzLmNoYXNzaXNDb25uZWN0aW9uUG9pbnRMb2NhbCA9IHZvaWQgMDsKICAgICAgdGhpcy5jaGFzc2lzQ29ubmVjdGlvblBvaW50V29ybGQgPSB2b2lkIDA7CiAgICAgIHRoaXMuZGlyZWN0aW9uTG9jYWwgPSB2b2lkIDA7CiAgICAgIHRoaXMuZGlyZWN0aW9uV29ybGQgPSB2b2lkIDA7CiAgICAgIHRoaXMuYXhsZUxvY2FsID0gdm9pZCAwOwogICAgICB0aGlzLmF4bGVXb3JsZCA9IHZvaWQgMDsKICAgICAgdGhpcy5zdXNwZW5zaW9uUmVzdExlbmd0aCA9IHZvaWQgMDsKICAgICAgdGhpcy5zdXNwZW5zaW9uTWF4TGVuZ3RoID0gdm9pZCAwOwogICAgICB0aGlzLnJhZGl1cyA9IHZvaWQgMDsKICAgICAgdGhpcy5zdXNwZW5zaW9uU3RpZmZuZXNzID0gdm9pZCAwOwogICAgICB0aGlzLmRhbXBpbmdDb21wcmVzc2lvbiA9IHZvaWQgMDsKICAgICAgdGhpcy5kYW1waW5nUmVsYXhhdGlvbiA9IHZvaWQgMDsKICAgICAgdGhpcy5mcmljdGlvblNsaXAgPSB2b2lkIDA7CiAgICAgIHRoaXMuZm9yd2FyZEFjY2VsZXJhdGlvbiA9IHZvaWQgMDsKICAgICAgdGhpcy5zaWRlQWNjZWxlcmF0aW9uID0gdm9pZCAwOwogICAgICB0aGlzLnN0ZWVyaW5nID0gdm9pZCAwOwogICAgICB0aGlzLnJvdGF0aW9uID0gdm9pZCAwOwogICAgICB0aGlzLmRlbHRhUm90YXRpb24gPSB2b2lkIDA7CiAgICAgIHRoaXMucm9sbEluZmx1ZW5jZSA9IHZvaWQgMDsKICAgICAgdGhpcy5tYXhTdXNwZW5zaW9uRm9yY2UgPSB2b2lkIDA7CiAgICAgIHRoaXMuZW5naW5lRm9yY2UgPSB2b2lkIDA7CiAgICAgIHRoaXMuYnJha2UgPSB2b2lkIDA7CiAgICAgIHRoaXMuaXNGcm9udFdoZWVsID0gdm9pZCAwOwogICAgICB0aGlzLmNsaXBwZWRJbnZDb250YWN0RG90U3VzcGVuc2lvbiA9IHZvaWQgMDsKICAgICAgdGhpcy5zdXNwZW5zaW9uUmVsYXRpdmVWZWxvY2l0eSA9IHZvaWQgMDsKICAgICAgdGhpcy5zdXNwZW5zaW9uRm9yY2UgPSB2b2lkIDA7CiAgICAgIHRoaXMuc2xpcEluZm8gPSB2b2lkIDA7CiAgICAgIHRoaXMuc2tpZEluZm8gPSB2b2lkIDA7CiAgICAgIHRoaXMuc3VzcGVuc2lvbkxlbmd0aCA9IHZvaWQgMDsKICAgICAgdGhpcy5zaWRlSW1wdWxzZSA9IHZvaWQgMDsKICAgICAgdGhpcy5mb3J3YXJkSW1wdWxzZSA9IHZvaWQgMDsKICAgICAgdGhpcy5yYXljYXN0UmVzdWx0ID0gdm9pZCAwOwogICAgICB0aGlzLndvcmxkVHJhbnNmb3JtID0gdm9pZCAwOwogICAgICB0aGlzLmlzSW5Db250YWN0ID0gdm9pZCAwOwogICAgICBvcHRpb25zID0gVXRpbHMuZGVmYXVsdHMob3B0aW9ucywgewogICAgICAgIGNoYXNzaXNDb25uZWN0aW9uUG9pbnRMb2NhbDogbmV3IFZlYzMoKSwKICAgICAgICBjaGFzc2lzQ29ubmVjdGlvblBvaW50V29ybGQ6IG5ldyBWZWMzKCksCiAgICAgICAgZGlyZWN0aW9uTG9jYWw6IG5ldyBWZWMzKCksCiAgICAgICAgZGlyZWN0aW9uV29ybGQ6IG5ldyBWZWMzKCksCiAgICAgICAgYXhsZUxvY2FsOiBuZXcgVmVjMygpLAogICAgICAgIGF4bGVXb3JsZDogbmV3IFZlYzMoKSwKICAgICAgICBzdXNwZW5zaW9uUmVzdExlbmd0aDogMSwKICAgICAgICBzdXNwZW5zaW9uTWF4TGVuZ3RoOiAyLAogICAgICAgIHJhZGl1czogMSwKICAgICAgICBzdXNwZW5zaW9uU3RpZmZuZXNzOiAxMDAsCiAgICAgICAgZGFtcGluZ0NvbXByZXNzaW9uOiAxMCwKICAgICAgICBkYW1waW5nUmVsYXhhdGlvbjogMTAsCiAgICAgICAgZnJpY3Rpb25TbGlwOiAxMC41LAogICAgICAgIGZvcndhcmRBY2NlbGVyYXRpb246IDEsCiAgICAgICAgc2lkZUFjY2VsZXJhdGlvbjogMSwKICAgICAgICBzdGVlcmluZzogMCwKICAgICAgICByb3RhdGlvbjogMCwKICAgICAgICBkZWx0YVJvdGF0aW9uOiAwLAogICAgICAgIHJvbGxJbmZsdWVuY2U6IDAuMDEsCiAgICAgICAgbWF4U3VzcGVuc2lvbkZvcmNlOiBOdW1iZXIuTUFYX1ZBTFVFLAogICAgICAgIGlzRnJvbnRXaGVlbDogdHJ1ZSwKICAgICAgICBjbGlwcGVkSW52Q29udGFjdERvdFN1c3BlbnNpb246IDEsCiAgICAgICAgc3VzcGVuc2lvblJlbGF0aXZlVmVsb2NpdHk6IDAsCiAgICAgICAgc3VzcGVuc2lvbkZvcmNlOiAwLAogICAgICAgIHNsaXBJbmZvOiAwLAogICAgICAgIHNraWRJbmZvOiAwLAogICAgICAgIHN1c3BlbnNpb25MZW5ndGg6IDAsCiAgICAgICAgbWF4U3VzcGVuc2lvblRyYXZlbDogMSwKICAgICAgICB1c2VDdXN0b21TbGlkaW5nUm90YXRpb25hbFNwZWVkOiBmYWxzZSwKICAgICAgICBjdXN0b21TbGlkaW5nUm90YXRpb25hbFNwZWVkOiAtMC4xCiAgICAgIH0pOwogICAgICB0aGlzLm1heFN1c3BlbnNpb25UcmF2ZWwgPSBvcHRpb25zLm1heFN1c3BlbnNpb25UcmF2ZWw7CiAgICAgIHRoaXMuY3VzdG9tU2xpZGluZ1JvdGF0aW9uYWxTcGVlZCA9IG9wdGlvbnMuY3VzdG9tU2xpZGluZ1JvdGF0aW9uYWxTcGVlZDsKICAgICAgdGhpcy51c2VDdXN0b21TbGlkaW5nUm90YXRpb25hbFNwZWVkID0gb3B0aW9ucy51c2VDdXN0b21TbGlkaW5nUm90YXRpb25hbFNwZWVkOwogICAgICB0aGlzLnNsaWRpbmcgPSBmYWxzZTsKICAgICAgdGhpcy5jaGFzc2lzQ29ubmVjdGlvblBvaW50TG9jYWwgPSBvcHRpb25zLmNoYXNzaXNDb25uZWN0aW9uUG9pbnRMb2NhbC5jbG9uZSgpOwogICAgICB0aGlzLmNoYXNzaXNDb25uZWN0aW9uUG9pbnRXb3JsZCA9IG9wdGlvbnMuY2hhc3Npc0Nvbm5lY3Rpb25Qb2ludFdvcmxkLmNsb25lKCk7CiAgICAgIHRoaXMuZGlyZWN0aW9uTG9jYWwgPSBvcHRpb25zLmRpcmVjdGlvbkxvY2FsLmNsb25lKCk7CiAgICAgIHRoaXMuZGlyZWN0aW9uV29ybGQgPSBvcHRpb25zLmRpcmVjdGlvbldvcmxkLmNsb25lKCk7CiAgICAgIHRoaXMuYXhsZUxvY2FsID0gb3B0aW9ucy5heGxlTG9jYWwuY2xvbmUoKTsKICAgICAgdGhpcy5heGxlV29ybGQgPSBvcHRpb25zLmF4bGVXb3JsZC5jbG9uZSgpOwogICAgICB0aGlzLnN1c3BlbnNpb25SZXN0TGVuZ3RoID0gb3B0aW9ucy5zdXNwZW5zaW9uUmVzdExlbmd0aDsKICAgICAgdGhpcy5zdXNwZW5zaW9uTWF4TGVuZ3RoID0gb3B0aW9ucy5zdXNwZW5zaW9uTWF4TGVuZ3RoOwogICAgICB0aGlzLnJhZGl1cyA9IG9wdGlvbnMucmFkaXVzOwogICAgICB0aGlzLnN1c3BlbnNpb25TdGlmZm5lc3MgPSBvcHRpb25zLnN1c3BlbnNpb25TdGlmZm5lc3M7CiAgICAgIHRoaXMuZGFtcGluZ0NvbXByZXNzaW9uID0gb3B0aW9ucy5kYW1waW5nQ29tcHJlc3Npb247CiAgICAgIHRoaXMuZGFtcGluZ1JlbGF4YXRpb24gPSBvcHRpb25zLmRhbXBpbmdSZWxheGF0aW9uOwogICAgICB0aGlzLmZyaWN0aW9uU2xpcCA9IG9wdGlvbnMuZnJpY3Rpb25TbGlwOwogICAgICB0aGlzLmZvcndhcmRBY2NlbGVyYXRpb24gPSBvcHRpb25zLmZvcndhcmRBY2NlbGVyYXRpb247CiAgICAgIHRoaXMuc2lkZUFjY2VsZXJhdGlvbiA9IG9wdGlvbnMuc2lkZUFjY2VsZXJhdGlvbjsKICAgICAgdGhpcy5zdGVlcmluZyA9IDA7CiAgICAgIHRoaXMucm90YXRpb24gPSAwOwogICAgICB0aGlzLmRlbHRhUm90YXRpb24gPSAwOwogICAgICB0aGlzLnJvbGxJbmZsdWVuY2UgPSBvcHRpb25zLnJvbGxJbmZsdWVuY2U7CiAgICAgIHRoaXMubWF4U3VzcGVuc2lvbkZvcmNlID0gb3B0aW9ucy5tYXhTdXNwZW5zaW9uRm9yY2U7CiAgICAgIHRoaXMuZW5naW5lRm9yY2UgPSAwOwogICAgICB0aGlzLmJyYWtlID0gMDsKICAgICAgdGhpcy5pc0Zyb250V2hlZWwgPSBvcHRpb25zLmlzRnJvbnRXaGVlbDsKICAgICAgdGhpcy5jbGlwcGVkSW52Q29udGFjdERvdFN1c3BlbnNpb24gPSAxOwogICAgICB0aGlzLnN1c3BlbnNpb25SZWxhdGl2ZVZlbG9jaXR5ID0gMDsKICAgICAgdGhpcy5zdXNwZW5zaW9uRm9yY2UgPSAwOwogICAgICB0aGlzLnNsaXBJbmZvID0gMDsKICAgICAgdGhpcy5za2lkSW5mbyA9IDA7CiAgICAgIHRoaXMuc3VzcGVuc2lvbkxlbmd0aCA9IDA7CiAgICAgIHRoaXMuc2lkZUltcHVsc2UgPSAwOwogICAgICB0aGlzLmZvcndhcmRJbXB1bHNlID0gMDsKICAgICAgdGhpcy5yYXljYXN0UmVzdWx0ID0gbmV3IFJheWNhc3RSZXN1bHQoKTsKICAgICAgdGhpcy53b3JsZFRyYW5zZm9ybSA9IG5ldyBUcmFuc2Zvcm0oKTsKICAgICAgdGhpcy5pc0luQ29udGFjdCA9IGZhbHNlOwogICAgfQoKICAgIHVwZGF0ZVdoZWVsKGNoYXNzaXMpIHsKICAgICAgY29uc3QgcmF5Y2FzdFJlc3VsdCA9IHRoaXMucmF5Y2FzdFJlc3VsdDsKCiAgICAgIGlmICh0aGlzLmlzSW5Db250YWN0KSB7CiAgICAgICAgY29uc3QgcHJvamVjdCA9IHJheWNhc3RSZXN1bHQuaGl0Tm9ybWFsV29ybGQuZG90KHJheWNhc3RSZXN1bHQuZGlyZWN0aW9uV29ybGQpOwogICAgICAgIHJheWNhc3RSZXN1bHQuaGl0UG9pbnRXb3JsZC52c3ViKGNoYXNzaXMucG9zaXRpb24sIHJlbHBvcyk7CiAgICAgICAgY2hhc3Npcy5nZXRWZWxvY2l0eUF0V29ybGRQb2ludChyZWxwb3MsIGNoYXNzaXNfdmVsb2NpdHlfYXRfY29udGFjdFBvaW50KTsKICAgICAgICBjb25zdCBwcm9qVmVsID0gcmF5Y2FzdFJlc3VsdC5oaXROb3JtYWxXb3JsZC5kb3QoY2hhc3Npc192ZWxvY2l0eV9hdF9jb250YWN0UG9pbnQpOwoKICAgICAgICBpZiAocHJvamVjdCA+PSAtMC4xKSB7CiAgICAgICAgICB0aGlzLnN1c3BlbnNpb25SZWxhdGl2ZVZlbG9jaXR5ID0gMC4wOwogICAgICAgICAgdGhpcy5jbGlwcGVkSW52Q29udGFjdERvdFN1c3BlbnNpb24gPSAxLjAgLyAwLjE7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGNvbnN0IGludiA9IC0xIC8gcHJvamVjdDsKICAgICAgICAgIHRoaXMuc3VzcGVuc2lvblJlbGF0aXZlVmVsb2NpdHkgPSBwcm9qVmVsICogaW52OwogICAgICAgICAgdGhpcy5jbGlwcGVkSW52Q29udGFjdERvdFN1c3BlbnNpb24gPSBpbnY7CiAgICAgICAgfQogICAgICB9IGVsc2UgewogICAgICAgIC8vIE5vdCBpbiBjb250YWN0IDogcG9zaXRpb24gd2hlZWwgaW4gYSBuaWNlIChyZXN0IGxlbmd0aCkgcG9zaXRpb24KICAgICAgICByYXljYXN0UmVzdWx0LnN1c3BlbnNpb25MZW5ndGggPSB0aGlzLnN1c3BlbnNpb25SZXN0TGVuZ3RoOwogICAgICAgIHRoaXMuc3VzcGVuc2lvblJlbGF0aXZlVmVsb2NpdHkgPSAwLjA7CiAgICAgICAgcmF5Y2FzdFJlc3VsdC5kaXJlY3Rpb25Xb3JsZC5zY2FsZSgtMSwgcmF5Y2FzdFJlc3VsdC5oaXROb3JtYWxXb3JsZCk7CiAgICAgICAgdGhpcy5jbGlwcGVkSW52Q29udGFjdERvdFN1c3BlbnNpb24gPSAxLjA7CiAgICAgIH0KICAgIH0KCiAgfQoKICBjb25zdCBjaGFzc2lzX3ZlbG9jaXR5X2F0X2NvbnRhY3RQb2ludCA9IG5ldyBWZWMzKCk7CiAgY29uc3QgcmVscG9zID0gbmV3IFZlYzMoKTsKICAvKioKICAgKiBWZWhpY2xlIGhlbHBlciBjbGFzcyB0aGF0IGNhc3RzIHJheXMgZnJvbSB0aGUgd2hlZWwgcG9zaXRpb25zIHRvd2FyZHMgdGhlIGdyb3VuZCBhbmQgYXBwbGllcyBmb3JjZXMuCiAgICovCgogIGNsYXNzIFJheWNhc3RWZWhpY2xlIHsKICAgIC8qKiBUaGUgY2FyIGNoYXNzaXMgYm9keS4gKi8KCiAgICAvKiogVGhlIHdoZWVscy4gKi8KCiAgICAvKiogV2lsbCBiZSBzZXQgdG8gdHJ1ZSBpZiB0aGUgY2FyIGlzIHNsaWRpbmcuICovCgogICAgLyoqIEluZGV4IG9mIHRoZSByaWdodCBheGlzLiB4PTAsIHk9MSwgej0yICovCgogICAgLyoqIEluZGV4IG9mIHRoZSBmb3J3YXJkIGF4aXMuIHg9MCwgeT0xLCB6PTIgKi8KCiAgICAvKiogSW5kZXggb2YgdGhlIHVwIGF4aXMuIHg9MCwgeT0xLCB6PTIgKi8KCiAgICAvKiogVGhlIGNvbnN0cmFpbnRzLiAqLwoKICAgIC8qKiBPcHRpb25hbCBwcmUtc3RlcCBjYWxsYmFjay4gKi8KCiAgICAvKiogTnVtYmVyIG9mIHdoZWVscyBvbiB0aGUgZ3JvdW5kLiAqLwogICAgY29uc3RydWN0b3Iob3B0aW9ucykgewogICAgICB0aGlzLmNoYXNzaXNCb2R5ID0gdm9pZCAwOwogICAgICB0aGlzLndoZWVsSW5mb3MgPSB2b2lkIDA7CiAgICAgIHRoaXMuc2xpZGluZyA9IHZvaWQgMDsKICAgICAgdGhpcy53b3JsZCA9IHZvaWQgMDsKICAgICAgdGhpcy5pbmRleFJpZ2h0QXhpcyA9IHZvaWQgMDsKICAgICAgdGhpcy5pbmRleEZvcndhcmRBeGlzID0gdm9pZCAwOwogICAgICB0aGlzLmluZGV4VXBBeGlzID0gdm9pZCAwOwogICAgICB0aGlzLmNvbnN0cmFpbnRzID0gdm9pZCAwOwogICAgICB0aGlzLnByZVN0ZXBDYWxsYmFjayA9IHZvaWQgMDsKICAgICAgdGhpcy5jdXJyZW50VmVoaWNsZVNwZWVkS21Ib3VyID0gdm9pZCAwOwogICAgICB0aGlzLm51bVdoZWVsc09uR3JvdW5kID0gdm9pZCAwOwogICAgICB0aGlzLmNoYXNzaXNCb2R5ID0gb3B0aW9ucy5jaGFzc2lzQm9keTsKICAgICAgdGhpcy53aGVlbEluZm9zID0gW107CiAgICAgIHRoaXMuc2xpZGluZyA9IGZhbHNlOwogICAgICB0aGlzLndvcmxkID0gbnVsbDsKICAgICAgdGhpcy5pbmRleFJpZ2h0QXhpcyA9IHR5cGVvZiBvcHRpb25zLmluZGV4UmlnaHRBeGlzICE9PSAndW5kZWZpbmVkJyA/IG9wdGlvbnMuaW5kZXhSaWdodEF4aXMgOiAyOwogICAgICB0aGlzLmluZGV4Rm9yd2FyZEF4aXMgPSB0eXBlb2Ygb3B0aW9ucy5pbmRleEZvcndhcmRBeGlzICE9PSAndW5kZWZpbmVkJyA/IG9wdGlvbnMuaW5kZXhGb3J3YXJkQXhpcyA6IDA7CiAgICAgIHRoaXMuaW5kZXhVcEF4aXMgPSB0eXBlb2Ygb3B0aW9ucy5pbmRleFVwQXhpcyAhPT0gJ3VuZGVmaW5lZCcgPyBvcHRpb25zLmluZGV4VXBBeGlzIDogMTsKICAgICAgdGhpcy5jb25zdHJhaW50cyA9IFtdOwoKICAgICAgdGhpcy5wcmVTdGVwQ2FsbGJhY2sgPSAoKSA9PiB7fTsKCiAgICAgIHRoaXMuY3VycmVudFZlaGljbGVTcGVlZEttSG91ciA9IDA7CiAgICAgIHRoaXMubnVtV2hlZWxzT25Hcm91bmQgPSAwOwogICAgfQogICAgLyoqCiAgICAgKiBBZGQgYSB3aGVlbC4gRm9yIGluZm9ybWF0aW9uIGFib3V0IHRoZSBvcHRpb25zLCBzZWUgYFdoZWVsSW5mb2AuCiAgICAgKi8KCgogICAgYWRkV2hlZWwob3B0aW9ucykgewogICAgICBpZiAob3B0aW9ucyA9PT0gdm9pZCAwKSB7CiAgICAgICAgb3B0aW9ucyA9IHt9OwogICAgICB9CgogICAgICBjb25zdCBpbmZvID0gbmV3IFdoZWVsSW5mbyhvcHRpb25zKTsKICAgICAgY29uc3QgaW5kZXggPSB0aGlzLndoZWVsSW5mb3MubGVuZ3RoOwogICAgICB0aGlzLndoZWVsSW5mb3MucHVzaChpbmZvKTsKICAgICAgcmV0dXJuIGluZGV4OwogICAgfQogICAgLyoqCiAgICAgKiBTZXQgdGhlIHN0ZWVyaW5nIHZhbHVlIG9mIGEgd2hlZWwuCiAgICAgKi8KCgogICAgc2V0U3RlZXJpbmdWYWx1ZSh2YWx1ZSwgd2hlZWxJbmRleCkgewogICAgICBjb25zdCB3aGVlbCA9IHRoaXMud2hlZWxJbmZvc1t3aGVlbEluZGV4XTsKICAgICAgd2hlZWwuc3RlZXJpbmcgPSB2YWx1ZTsKICAgIH0KICAgIC8qKgogICAgICogU2V0IHRoZSB3aGVlbCBmb3JjZSB0byBhcHBseSBvbiBvbmUgb2YgdGhlIHdoZWVscyBlYWNoIHRpbWUgc3RlcAogICAgICovCgoKICAgIGFwcGx5RW5naW5lRm9yY2UodmFsdWUsIHdoZWVsSW5kZXgpIHsKICAgICAgdGhpcy53aGVlbEluZm9zW3doZWVsSW5kZXhdLmVuZ2luZUZvcmNlID0gdmFsdWU7CiAgICB9CiAgICAvKioKICAgICAqIFNldCB0aGUgYnJha2luZyBmb3JjZSBvZiBhIHdoZWVsCiAgICAgKi8KCgogICAgc2V0QnJha2UoYnJha2UsIHdoZWVsSW5kZXgpIHsKICAgICAgdGhpcy53aGVlbEluZm9zW3doZWVsSW5kZXhdLmJyYWtlID0gYnJha2U7CiAgICB9CiAgICAvKioKICAgICAqIEFkZCB0aGUgdmVoaWNsZSBpbmNsdWRpbmcgaXRzIGNvbnN0cmFpbnRzIHRvIHRoZSB3b3JsZC4KICAgICAqLwoKCiAgICBhZGRUb1dvcmxkKHdvcmxkKSB7CiAgICAgIHdvcmxkLmFkZEJvZHkodGhpcy5jaGFzc2lzQm9keSk7CiAgICAgIGNvbnN0IHRoYXQgPSB0aGlzOwoKICAgICAgdGhpcy5wcmVTdGVwQ2FsbGJhY2sgPSAoKSA9PiB7CiAgICAgICAgdGhhdC51cGRhdGVWZWhpY2xlKHdvcmxkLmR0KTsKICAgICAgfTsKCiAgICAgIHdvcmxkLmFkZEV2ZW50TGlzdGVuZXIoJ3ByZVN0ZXAnLCB0aGlzLnByZVN0ZXBDYWxsYmFjayk7CiAgICAgIHRoaXMud29ybGQgPSB3b3JsZDsKICAgIH0KICAgIC8qKgogICAgICogR2V0IG9uZSBvZiB0aGUgd2hlZWwgYXhsZXMsIHdvcmxkLW9yaWVudGVkLgogICAgICovCgoKICAgIGdldFZlaGljbGVBeGlzV29ybGQoYXhpc0luZGV4LCByZXN1bHQpIHsKICAgICAgcmVzdWx0LnNldChheGlzSW5kZXggPT09IDAgPyAxIDogMCwgYXhpc0luZGV4ID09PSAxID8gMSA6IDAsIGF4aXNJbmRleCA9PT0gMiA/IDEgOiAwKTsKICAgICAgdGhpcy5jaGFzc2lzQm9keS52ZWN0b3JUb1dvcmxkRnJhbWUocmVzdWx0LCByZXN1bHQpOwogICAgfQoKICAgIHVwZGF0ZVZlaGljbGUodGltZVN0ZXApIHsKICAgICAgY29uc3Qgd2hlZWxJbmZvcyA9IHRoaXMud2hlZWxJbmZvczsKICAgICAgY29uc3QgbnVtV2hlZWxzID0gd2hlZWxJbmZvcy5sZW5ndGg7CiAgICAgIGNvbnN0IGNoYXNzaXNCb2R5ID0gdGhpcy5jaGFzc2lzQm9keTsKCiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbnVtV2hlZWxzOyBpKyspIHsKICAgICAgICB0aGlzLnVwZGF0ZVdoZWVsVHJhbnNmb3JtKGkpOwogICAgICB9CgogICAgICB0aGlzLmN1cnJlbnRWZWhpY2xlU3BlZWRLbUhvdXIgPSAzLjYgKiBjaGFzc2lzQm9keS52ZWxvY2l0eS5sZW5ndGgoKTsKICAgICAgY29uc3QgZm9yd2FyZFdvcmxkID0gbmV3IFZlYzMoKTsKICAgICAgdGhpcy5nZXRWZWhpY2xlQXhpc1dvcmxkKHRoaXMuaW5kZXhGb3J3YXJkQXhpcywgZm9yd2FyZFdvcmxkKTsKCiAgICAgIGlmIChmb3J3YXJkV29ybGQuZG90KGNoYXNzaXNCb2R5LnZlbG9jaXR5KSA8IDApIHsKICAgICAgICB0aGlzLmN1cnJlbnRWZWhpY2xlU3BlZWRLbUhvdXIgKj0gLTE7CiAgICAgIH0gLy8gc2ltdWxhdGUgc3VzcGVuc2lvbgoKCiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbnVtV2hlZWxzOyBpKyspIHsKICAgICAgICB0aGlzLmNhc3RSYXkod2hlZWxJbmZvc1tpXSk7CiAgICAgIH0KCiAgICAgIHRoaXMudXBkYXRlU3VzcGVuc2lvbih0aW1lU3RlcCk7CiAgICAgIGNvbnN0IGltcHVsc2UgPSBuZXcgVmVjMygpOwogICAgICBjb25zdCByZWxwb3MgPSBuZXcgVmVjMygpOwoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBudW1XaGVlbHM7IGkrKykgewogICAgICAgIC8vYXBwbHkgc3VzcGVuc2lvbiBmb3JjZQogICAgICAgIGNvbnN0IHdoZWVsID0gd2hlZWxJbmZvc1tpXTsKICAgICAgICBsZXQgc3VzcGVuc2lvbkZvcmNlID0gd2hlZWwuc3VzcGVuc2lvbkZvcmNlOwoKICAgICAgICBpZiAoc3VzcGVuc2lvbkZvcmNlID4gd2hlZWwubWF4U3VzcGVuc2lvbkZvcmNlKSB7CiAgICAgICAgICBzdXNwZW5zaW9uRm9yY2UgPSB3aGVlbC5tYXhTdXNwZW5zaW9uRm9yY2U7CiAgICAgICAgfQoKICAgICAgICB3aGVlbC5yYXljYXN0UmVzdWx0LmhpdE5vcm1hbFdvcmxkLnNjYWxlKHN1c3BlbnNpb25Gb3JjZSAqIHRpbWVTdGVwLCBpbXB1bHNlKTsKICAgICAgICB3aGVlbC5yYXljYXN0UmVzdWx0LmhpdFBvaW50V29ybGQudnN1YihjaGFzc2lzQm9keS5wb3NpdGlvbiwgcmVscG9zKTsKICAgICAgICBjaGFzc2lzQm9keS5hcHBseUltcHVsc2UoaW1wdWxzZSwgcmVscG9zKTsKICAgICAgfQoKICAgICAgdGhpcy51cGRhdGVGcmljdGlvbih0aW1lU3RlcCk7CiAgICAgIGNvbnN0IGhpdE5vcm1hbFdvcmxkU2NhbGVkV2l0aFByb2ogPSBuZXcgVmVjMygpOwogICAgICBjb25zdCBmd2QgPSBuZXcgVmVjMygpOwogICAgICBjb25zdCB2ZWwgPSBuZXcgVmVjMygpOwoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBudW1XaGVlbHM7IGkrKykgewogICAgICAgIGNvbnN0IHdoZWVsID0gd2hlZWxJbmZvc1tpXTsgLy9jb25zdCByZWxwb3MgPSBuZXcgVmVjMygpOwogICAgICAgIC8vd2hlZWwuY2hhc3Npc0Nvbm5lY3Rpb25Qb2ludFdvcmxkLnZzdWIoY2hhc3Npc0JvZHkucG9zaXRpb24sIHJlbHBvcyk7CgogICAgICAgIGNoYXNzaXNCb2R5LmdldFZlbG9jaXR5QXRXb3JsZFBvaW50KHdoZWVsLmNoYXNzaXNDb25uZWN0aW9uUG9pbnRXb3JsZCwgdmVsKTsgLy8gSGFjayB0byBnZXQgdGhlIHJvdGF0aW9uIGluIHRoZSBjb3JyZWN0IGRpcmVjdGlvbgoKICAgICAgICBsZXQgbSA9IDE7CgogICAgICAgIHN3aXRjaCAodGhpcy5pbmRleFVwQXhpcykgewogICAgICAgICAgY2FzZSAxOgogICAgICAgICAgICBtID0gLTE7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgIH0KCiAgICAgICAgaWYgKHdoZWVsLmlzSW5Db250YWN0KSB7CiAgICAgICAgICB0aGlzLmdldFZlaGljbGVBeGlzV29ybGQodGhpcy5pbmRleEZvcndhcmRBeGlzLCBmd2QpOwogICAgICAgICAgY29uc3QgcHJvaiA9IGZ3ZC5kb3Qod2hlZWwucmF5Y2FzdFJlc3VsdC5oaXROb3JtYWxXb3JsZCk7CiAgICAgICAgICB3aGVlbC5yYXljYXN0UmVzdWx0LmhpdE5vcm1hbFdvcmxkLnNjYWxlKHByb2osIGhpdE5vcm1hbFdvcmxkU2NhbGVkV2l0aFByb2opOwogICAgICAgICAgZndkLnZzdWIoaGl0Tm9ybWFsV29ybGRTY2FsZWRXaXRoUHJvaiwgZndkKTsKICAgICAgICAgIGNvbnN0IHByb2oyID0gZndkLmRvdCh2ZWwpOwogICAgICAgICAgd2hlZWwuZGVsdGFSb3RhdGlvbiA9IG0gKiBwcm9qMiAqIHRpbWVTdGVwIC8gd2hlZWwucmFkaXVzOwogICAgICAgIH0KCiAgICAgICAgaWYgKCh3aGVlbC5zbGlkaW5nIHx8ICF3aGVlbC5pc0luQ29udGFjdCkgJiYgd2hlZWwuZW5naW5lRm9yY2UgIT09IDAgJiYgd2hlZWwudXNlQ3VzdG9tU2xpZGluZ1JvdGF0aW9uYWxTcGVlZCkgewogICAgICAgICAgLy8gQXBwbHkgY3VzdG9tIHJvdGF0aW9uIHdoZW4gYWNjZWxlcmF0aW5nIGFuZCBzbGlkaW5nCiAgICAgICAgICB3aGVlbC5kZWx0YVJvdGF0aW9uID0gKHdoZWVsLmVuZ2luZUZvcmNlID4gMCA/IDEgOiAtMSkgKiB3aGVlbC5jdXN0b21TbGlkaW5nUm90YXRpb25hbFNwZWVkICogdGltZVN0ZXA7CiAgICAgICAgfSAvLyBMb2NrIHdoZWVscwoKCiAgICAgICAgaWYgKE1hdGguYWJzKHdoZWVsLmJyYWtlKSA+IE1hdGguYWJzKHdoZWVsLmVuZ2luZUZvcmNlKSkgewogICAgICAgICAgd2hlZWwuZGVsdGFSb3RhdGlvbiA9IDA7CiAgICAgICAgfQoKICAgICAgICB3aGVlbC5yb3RhdGlvbiArPSB3aGVlbC5kZWx0YVJvdGF0aW9uOyAvLyBVc2UgdGhlIG9sZCB2YWx1ZQoKICAgICAgICB3aGVlbC5kZWx0YVJvdGF0aW9uICo9IDAuOTk7IC8vIGRhbXBpbmcgb2Ygcm90YXRpb24gd2hlbiBub3QgaW4gY29udGFjdAogICAgICB9CiAgICB9CgogICAgdXBkYXRlU3VzcGVuc2lvbihkZWx0YVRpbWUpIHsKICAgICAgY29uc3QgY2hhc3Npc0JvZHkgPSB0aGlzLmNoYXNzaXNCb2R5OwogICAgICBjb25zdCBjaGFzc2lzTWFzcyA9IGNoYXNzaXNCb2R5Lm1hc3M7CiAgICAgIGNvbnN0IHdoZWVsSW5mb3MgPSB0aGlzLndoZWVsSW5mb3M7CiAgICAgIGNvbnN0IG51bVdoZWVscyA9IHdoZWVsSW5mb3MubGVuZ3RoOwoKICAgICAgZm9yIChsZXQgd19pdCA9IDA7IHdfaXQgPCBudW1XaGVlbHM7IHdfaXQrKykgewogICAgICAgIGNvbnN0IHdoZWVsID0gd2hlZWxJbmZvc1t3X2l0XTsKCiAgICAgICAgaWYgKHdoZWVsLmlzSW5Db250YWN0KSB7CiAgICAgICAgICBsZXQgZm9yY2U7IC8vIFNwcmluZwoKICAgICAgICAgIGNvbnN0IHN1c3BfbGVuZ3RoID0gd2hlZWwuc3VzcGVuc2lvblJlc3RMZW5ndGg7CiAgICAgICAgICBjb25zdCBjdXJyZW50X2xlbmd0aCA9IHdoZWVsLnN1c3BlbnNpb25MZW5ndGg7CiAgICAgICAgICBjb25zdCBsZW5ndGhfZGlmZiA9IHN1c3BfbGVuZ3RoIC0gY3VycmVudF9sZW5ndGg7CiAgICAgICAgICBmb3JjZSA9IHdoZWVsLnN1c3BlbnNpb25TdGlmZm5lc3MgKiBsZW5ndGhfZGlmZiAqIHdoZWVsLmNsaXBwZWRJbnZDb250YWN0RG90U3VzcGVuc2lvbjsgLy8gRGFtcGVyCgogICAgICAgICAgY29uc3QgcHJvamVjdGVkX3JlbF92ZWwgPSB3aGVlbC5zdXNwZW5zaW9uUmVsYXRpdmVWZWxvY2l0eTsKICAgICAgICAgIGxldCBzdXNwX2RhbXBpbmc7CgogICAgICAgICAgaWYgKHByb2plY3RlZF9yZWxfdmVsIDwgMCkgewogICAgICAgICAgICBzdXNwX2RhbXBpbmcgPSB3aGVlbC5kYW1waW5nQ29tcHJlc3Npb247CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBzdXNwX2RhbXBpbmcgPSB3aGVlbC5kYW1waW5nUmVsYXhhdGlvbjsKICAgICAgICAgIH0KCiAgICAgICAgICBmb3JjZSAtPSBzdXNwX2RhbXBpbmcgKiBwcm9qZWN0ZWRfcmVsX3ZlbDsKICAgICAgICAgIHdoZWVsLnN1c3BlbnNpb25Gb3JjZSA9IGZvcmNlICogY2hhc3Npc01hc3M7CgogICAgICAgICAgaWYgKHdoZWVsLnN1c3BlbnNpb25Gb3JjZSA8IDApIHsKICAgICAgICAgICAgd2hlZWwuc3VzcGVuc2lvbkZvcmNlID0gMDsKICAgICAgICAgIH0KICAgICAgICB9IGVsc2UgewogICAgICAgICAgd2hlZWwuc3VzcGVuc2lvbkZvcmNlID0gMDsKICAgICAgICB9CiAgICAgIH0KICAgIH0KICAgIC8qKgogICAgICogUmVtb3ZlIHRoZSB2ZWhpY2xlIGluY2x1ZGluZyBpdHMgY29uc3RyYWludHMgZnJvbSB0aGUgd29ybGQuCiAgICAgKi8KCgogICAgcmVtb3ZlRnJvbVdvcmxkKHdvcmxkKSB7CiAgICAgIHRoaXMuY29uc3RyYWludHM7CiAgICAgIHdvcmxkLnJlbW92ZUJvZHkodGhpcy5jaGFzc2lzQm9keSk7CiAgICAgIHdvcmxkLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3ByZVN0ZXAnLCB0aGlzLnByZVN0ZXBDYWxsYmFjayk7CiAgICAgIHRoaXMud29ybGQgPSBudWxsOwogICAgfQoKICAgIGNhc3RSYXkod2hlZWwpIHsKICAgICAgY29uc3QgcmF5dmVjdG9yID0gY2FzdFJheV9yYXl2ZWN0b3I7CiAgICAgIGNvbnN0IHRhcmdldCA9IGNhc3RSYXlfdGFyZ2V0OwogICAgICB0aGlzLnVwZGF0ZVdoZWVsVHJhbnNmb3JtV29ybGQod2hlZWwpOwogICAgICBjb25zdCBjaGFzc2lzQm9keSA9IHRoaXMuY2hhc3Npc0JvZHk7CiAgICAgIGxldCBkZXB0aCA9IC0xOwogICAgICBjb25zdCByYXlsZW4gPSB3aGVlbC5zdXNwZW5zaW9uUmVzdExlbmd0aCArIHdoZWVsLnJhZGl1czsKICAgICAgd2hlZWwuZGlyZWN0aW9uV29ybGQuc2NhbGUocmF5bGVuLCByYXl2ZWN0b3IpOwogICAgICBjb25zdCBzb3VyY2UgPSB3aGVlbC5jaGFzc2lzQ29ubmVjdGlvblBvaW50V29ybGQ7CiAgICAgIHNvdXJjZS52YWRkKHJheXZlY3RvciwgdGFyZ2V0KTsKICAgICAgY29uc3QgcmF5Y2FzdFJlc3VsdCA9IHdoZWVsLnJheWNhc3RSZXN1bHQ7CiAgICAgIHJheWNhc3RSZXN1bHQucmVzZXQoKTsgLy8gVHVybiBvZmYgcmF5IGNvbGxpc2lvbiB3aXRoIHRoZSBjaGFzc2lzIHRlbXBvcmFyaWx5CgogICAgICBjb25zdCBvbGRTdGF0ZSA9IGNoYXNzaXNCb2R5LmNvbGxpc2lvblJlc3BvbnNlOwogICAgICBjaGFzc2lzQm9keS5jb2xsaXNpb25SZXNwb25zZSA9IGZhbHNlOyAvLyBDYXN0IHJheSBhZ2FpbnN0IHdvcmxkCgogICAgICB0aGlzLndvcmxkLnJheVRlc3Qoc291cmNlLCB0YXJnZXQsIHJheWNhc3RSZXN1bHQpOwogICAgICBjaGFzc2lzQm9keS5jb2xsaXNpb25SZXNwb25zZSA9IG9sZFN0YXRlOwogICAgICBjb25zdCBvYmplY3QgPSByYXljYXN0UmVzdWx0LmJvZHk7CiAgICAgIHdoZWVsLnJheWNhc3RSZXN1bHQuZ3JvdW5kT2JqZWN0ID0gMDsKCiAgICAgIGlmIChvYmplY3QpIHsKICAgICAgICBkZXB0aCA9IHJheWNhc3RSZXN1bHQuZGlzdGFuY2U7CiAgICAgICAgd2hlZWwucmF5Y2FzdFJlc3VsdC5oaXROb3JtYWxXb3JsZCA9IHJheWNhc3RSZXN1bHQuaGl0Tm9ybWFsV29ybGQ7CiAgICAgICAgd2hlZWwuaXNJbkNvbnRhY3QgPSB0cnVlOwogICAgICAgIGNvbnN0IGhpdERpc3RhbmNlID0gcmF5Y2FzdFJlc3VsdC5kaXN0YW5jZTsKICAgICAgICB3aGVlbC5zdXNwZW5zaW9uTGVuZ3RoID0gaGl0RGlzdGFuY2UgLSB3aGVlbC5yYWRpdXM7IC8vIGNsYW1wIG9uIG1heCBzdXNwZW5zaW9uIHRyYXZlbAoKICAgICAgICBjb25zdCBtaW5TdXNwZW5zaW9uTGVuZ3RoID0gd2hlZWwuc3VzcGVuc2lvblJlc3RMZW5ndGggLSB3aGVlbC5tYXhTdXNwZW5zaW9uVHJhdmVsOwogICAgICAgIGNvbnN0IG1heFN1c3BlbnNpb25MZW5ndGggPSB3aGVlbC5zdXNwZW5zaW9uUmVzdExlbmd0aCArIHdoZWVsLm1heFN1c3BlbnNpb25UcmF2ZWw7CgogICAgICAgIGlmICh3aGVlbC5zdXNwZW5zaW9uTGVuZ3RoIDwgbWluU3VzcGVuc2lvbkxlbmd0aCkgewogICAgICAgICAgd2hlZWwuc3VzcGVuc2lvbkxlbmd0aCA9IG1pblN1c3BlbnNpb25MZW5ndGg7CiAgICAgICAgfQoKICAgICAgICBpZiAod2hlZWwuc3VzcGVuc2lvbkxlbmd0aCA+IG1heFN1c3BlbnNpb25MZW5ndGgpIHsKICAgICAgICAgIHdoZWVsLnN1c3BlbnNpb25MZW5ndGggPSBtYXhTdXNwZW5zaW9uTGVuZ3RoOwogICAgICAgICAgd2hlZWwucmF5Y2FzdFJlc3VsdC5yZXNldCgpOwogICAgICAgIH0KCiAgICAgICAgY29uc3QgZGVub21pbmF0b3IgPSB3aGVlbC5yYXljYXN0UmVzdWx0LmhpdE5vcm1hbFdvcmxkLmRvdCh3aGVlbC5kaXJlY3Rpb25Xb3JsZCk7CiAgICAgICAgY29uc3QgY2hhc3Npc192ZWxvY2l0eV9hdF9jb250YWN0UG9pbnQgPSBuZXcgVmVjMygpOwogICAgICAgIGNoYXNzaXNCb2R5LmdldFZlbG9jaXR5QXRXb3JsZFBvaW50KHdoZWVsLnJheWNhc3RSZXN1bHQuaGl0UG9pbnRXb3JsZCwgY2hhc3Npc192ZWxvY2l0eV9hdF9jb250YWN0UG9pbnQpOwogICAgICAgIGNvbnN0IHByb2pWZWwgPSB3aGVlbC5yYXljYXN0UmVzdWx0LmhpdE5vcm1hbFdvcmxkLmRvdChjaGFzc2lzX3ZlbG9jaXR5X2F0X2NvbnRhY3RQb2ludCk7CgogICAgICAgIGlmIChkZW5vbWluYXRvciA+PSAtMC4xKSB7CiAgICAgICAgICB3aGVlbC5zdXNwZW5zaW9uUmVsYXRpdmVWZWxvY2l0eSA9IDA7CiAgICAgICAgICB3aGVlbC5jbGlwcGVkSW52Q29udGFjdERvdFN1c3BlbnNpb24gPSAxIC8gMC4xOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBjb25zdCBpbnYgPSAtMSAvIGRlbm9taW5hdG9yOwogICAgICAgICAgd2hlZWwuc3VzcGVuc2lvblJlbGF0aXZlVmVsb2NpdHkgPSBwcm9qVmVsICogaW52OwogICAgICAgICAgd2hlZWwuY2xpcHBlZEludkNvbnRhY3REb3RTdXNwZW5zaW9uID0gaW52OwogICAgICAgIH0KICAgICAgfSBlbHNlIHsKICAgICAgICAvL3B1dCB3aGVlbCBpbmZvIGFzIGluIHJlc3QgcG9zaXRpb24KICAgICAgICB3aGVlbC5zdXNwZW5zaW9uTGVuZ3RoID0gd2hlZWwuc3VzcGVuc2lvblJlc3RMZW5ndGggKyAwICogd2hlZWwubWF4U3VzcGVuc2lvblRyYXZlbDsKICAgICAgICB3aGVlbC5zdXNwZW5zaW9uUmVsYXRpdmVWZWxvY2l0eSA9IDAuMDsKICAgICAgICB3aGVlbC5kaXJlY3Rpb25Xb3JsZC5zY2FsZSgtMSwgd2hlZWwucmF5Y2FzdFJlc3VsdC5oaXROb3JtYWxXb3JsZCk7CiAgICAgICAgd2hlZWwuY2xpcHBlZEludkNvbnRhY3REb3RTdXNwZW5zaW9uID0gMS4wOwogICAgICB9CgogICAgICByZXR1cm4gZGVwdGg7CiAgICB9CgogICAgdXBkYXRlV2hlZWxUcmFuc2Zvcm1Xb3JsZCh3aGVlbCkgewogICAgICB3aGVlbC5pc0luQ29udGFjdCA9IGZhbHNlOwogICAgICBjb25zdCBjaGFzc2lzQm9keSA9IHRoaXMuY2hhc3Npc0JvZHk7CiAgICAgIGNoYXNzaXNCb2R5LnBvaW50VG9Xb3JsZEZyYW1lKHdoZWVsLmNoYXNzaXNDb25uZWN0aW9uUG9pbnRMb2NhbCwgd2hlZWwuY2hhc3Npc0Nvbm5lY3Rpb25Qb2ludFdvcmxkKTsKICAgICAgY2hhc3Npc0JvZHkudmVjdG9yVG9Xb3JsZEZyYW1lKHdoZWVsLmRpcmVjdGlvbkxvY2FsLCB3aGVlbC5kaXJlY3Rpb25Xb3JsZCk7CiAgICAgIGNoYXNzaXNCb2R5LnZlY3RvclRvV29ybGRGcmFtZSh3aGVlbC5heGxlTG9jYWwsIHdoZWVsLmF4bGVXb3JsZCk7CiAgICB9CiAgICAvKioKICAgICAqIFVwZGF0ZSBvbmUgb2YgdGhlIHdoZWVsIHRyYW5zZm9ybS4KICAgICAqIE5vdGUgd2hlbiByZW5kZXJpbmcgd2hlZWxzOiBkdXJpbmcgZWFjaCBzdGVwLCB3aGVlbCB0cmFuc2Zvcm1zIGFyZSB1cGRhdGVkIEJFRk9SRSB0aGUgY2hhc3NpczsgaWUuIHRoZWlyIHBvc2l0aW9uIGJlY29tZXMgaW52YWxpZCBhZnRlciB0aGUgc3RlcC4gVGh1cyB3aGVuIHlvdSByZW5kZXIgd2hlZWxzLCB5b3UgbXVzdCB1cGRhdGUgd2hlZWwgdHJhbnNmb3JtcyBiZWZvcmUgcmVuZGVyaW5nIHRoZW0uIFNlZSByYXljYXN0VmVoaWNsZSBkZW1vIGZvciBhbiBleGFtcGxlLgogICAgICogQHBhcmFtIHdoZWVsSW5kZXggVGhlIHdoZWVsIGluZGV4IHRvIHVwZGF0ZS4KICAgICAqLwoKCiAgICB1cGRhdGVXaGVlbFRyYW5zZm9ybSh3aGVlbEluZGV4KSB7CiAgICAgIGNvbnN0IHVwID0gdG1wVmVjNDsKICAgICAgY29uc3QgcmlnaHQgPSB0bXBWZWM1OwogICAgICBjb25zdCBmd2QgPSB0bXBWZWM2OwogICAgICBjb25zdCB3aGVlbCA9IHRoaXMud2hlZWxJbmZvc1t3aGVlbEluZGV4XTsKICAgICAgdGhpcy51cGRhdGVXaGVlbFRyYW5zZm9ybVdvcmxkKHdoZWVsKTsKICAgICAgd2hlZWwuZGlyZWN0aW9uTG9jYWwuc2NhbGUoLTEsIHVwKTsKICAgICAgcmlnaHQuY29weSh3aGVlbC5heGxlTG9jYWwpOwogICAgICB1cC5jcm9zcyhyaWdodCwgZndkKTsKICAgICAgZndkLm5vcm1hbGl6ZSgpOwogICAgICByaWdodC5ub3JtYWxpemUoKTsgLy8gUm90YXRlIGFyb3VuZCBzdGVlcmluZyBvdmVyIHRoZSB3aGVlbEF4bGUKCiAgICAgIGNvbnN0IHN0ZWVyaW5nID0gd2hlZWwuc3RlZXJpbmc7CiAgICAgIGNvbnN0IHN0ZWVyaW5nT3JuID0gbmV3IFF1YXRlcm5pb24oKTsKICAgICAgc3RlZXJpbmdPcm4uc2V0RnJvbUF4aXNBbmdsZSh1cCwgc3RlZXJpbmcpOwogICAgICBjb25zdCByb3RhdGluZ09ybiA9IG5ldyBRdWF0ZXJuaW9uKCk7CiAgICAgIHJvdGF0aW5nT3JuLnNldEZyb21BeGlzQW5nbGUocmlnaHQsIHdoZWVsLnJvdGF0aW9uKTsgLy8gV29ybGQgcm90YXRpb24gb2YgdGhlIHdoZWVsCgogICAgICBjb25zdCBxID0gd2hlZWwud29ybGRUcmFuc2Zvcm0ucXVhdGVybmlvbjsKICAgICAgdGhpcy5jaGFzc2lzQm9keS5xdWF0ZXJuaW9uLm11bHQoc3RlZXJpbmdPcm4sIHEpOwogICAgICBxLm11bHQocm90YXRpbmdPcm4sIHEpOwogICAgICBxLm5vcm1hbGl6ZSgpOyAvLyB3b3JsZCBwb3NpdGlvbiBvZiB0aGUgd2hlZWwKCiAgICAgIGNvbnN0IHAgPSB3aGVlbC53b3JsZFRyYW5zZm9ybS5wb3NpdGlvbjsKICAgICAgcC5jb3B5KHdoZWVsLmRpcmVjdGlvbldvcmxkKTsKICAgICAgcC5zY2FsZSh3aGVlbC5zdXNwZW5zaW9uTGVuZ3RoLCBwKTsKICAgICAgcC52YWRkKHdoZWVsLmNoYXNzaXNDb25uZWN0aW9uUG9pbnRXb3JsZCwgcCk7CiAgICB9CiAgICAvKioKICAgICAqIEdldCB0aGUgd29ybGQgdHJhbnNmb3JtIG9mIG9uZSBvZiB0aGUgd2hlZWxzCiAgICAgKi8KCgogICAgZ2V0V2hlZWxUcmFuc2Zvcm1Xb3JsZCh3aGVlbEluZGV4KSB7CiAgICAgIHJldHVybiB0aGlzLndoZWVsSW5mb3Nbd2hlZWxJbmRleF0ud29ybGRUcmFuc2Zvcm07CiAgICB9CgogICAgdXBkYXRlRnJpY3Rpb24odGltZVN0ZXApIHsKICAgICAgY29uc3Qgc3VyZk5vcm1hbFdTX3NjYWxlZF9wcm9qID0gdXBkYXRlRnJpY3Rpb25fc3VyZk5vcm1hbFdTX3NjYWxlZF9wcm9qOyAvL2NhbGN1bGF0ZSB0aGUgaW1wdWxzZSwgc28gdGhhdCB0aGUgd2hlZWxzIGRvbid0IG1vdmUgc2lkZXdhcmRzCgogICAgICBjb25zdCB3aGVlbEluZm9zID0gdGhpcy53aGVlbEluZm9zOwogICAgICBjb25zdCBudW1XaGVlbHMgPSB3aGVlbEluZm9zLmxlbmd0aDsKICAgICAgY29uc3QgY2hhc3Npc0JvZHkgPSB0aGlzLmNoYXNzaXNCb2R5OwogICAgICBjb25zdCBmb3J3YXJkV1MgPSB1cGRhdGVGcmljdGlvbl9mb3J3YXJkV1M7CiAgICAgIGNvbnN0IGF4bGUgPSB1cGRhdGVGcmljdGlvbl9heGxlOwogICAgICB0aGlzLm51bVdoZWVsc09uR3JvdW5kID0gMDsKCiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbnVtV2hlZWxzOyBpKyspIHsKICAgICAgICBjb25zdCB3aGVlbCA9IHdoZWVsSW5mb3NbaV07CiAgICAgICAgY29uc3QgZ3JvdW5kT2JqZWN0ID0gd2hlZWwucmF5Y2FzdFJlc3VsdC5ib2R5OwoKICAgICAgICBpZiAoZ3JvdW5kT2JqZWN0KSB7CiAgICAgICAgICB0aGlzLm51bVdoZWVsc09uR3JvdW5kKys7CiAgICAgICAgfQoKICAgICAgICB3aGVlbC5zaWRlSW1wdWxzZSA9IDA7CiAgICAgICAgd2hlZWwuZm9yd2FyZEltcHVsc2UgPSAwOwoKICAgICAgICBpZiAoIWZvcndhcmRXU1tpXSkgewogICAgICAgICAgZm9yd2FyZFdTW2ldID0gbmV3IFZlYzMoKTsKICAgICAgICB9CgogICAgICAgIGlmICghYXhsZVtpXSkgewogICAgICAgICAgYXhsZVtpXSA9IG5ldyBWZWMzKCk7CiAgICAgICAgfQogICAgICB9CgogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG51bVdoZWVsczsgaSsrKSB7CiAgICAgICAgY29uc3Qgd2hlZWwgPSB3aGVlbEluZm9zW2ldOwogICAgICAgIGNvbnN0IGdyb3VuZE9iamVjdCA9IHdoZWVsLnJheWNhc3RSZXN1bHQuYm9keTsKCiAgICAgICAgaWYgKGdyb3VuZE9iamVjdCkgewogICAgICAgICAgY29uc3QgYXhsZWkgPSBheGxlW2ldOwogICAgICAgICAgY29uc3Qgd2hlZWxUcmFucyA9IHRoaXMuZ2V0V2hlZWxUcmFuc2Zvcm1Xb3JsZChpKTsgLy8gR2V0IHdvcmxkIGF4bGUKCiAgICAgICAgICB3aGVlbFRyYW5zLnZlY3RvclRvV29ybGRGcmFtZShkaXJlY3Rpb25zW3RoaXMuaW5kZXhSaWdodEF4aXNdLCBheGxlaSk7CiAgICAgICAgICBjb25zdCBzdXJmTm9ybWFsV1MgPSB3aGVlbC5yYXljYXN0UmVzdWx0LmhpdE5vcm1hbFdvcmxkOwogICAgICAgICAgY29uc3QgcHJvaiA9IGF4bGVpLmRvdChzdXJmTm9ybWFsV1MpOwogICAgICAgICAgc3VyZk5vcm1hbFdTLnNjYWxlKHByb2osIHN1cmZOb3JtYWxXU19zY2FsZWRfcHJvaik7CiAgICAgICAgICBheGxlaS52c3ViKHN1cmZOb3JtYWxXU19zY2FsZWRfcHJvaiwgYXhsZWkpOwogICAgICAgICAgYXhsZWkubm9ybWFsaXplKCk7CiAgICAgICAgICBzdXJmTm9ybWFsV1MuY3Jvc3MoYXhsZWksIGZvcndhcmRXU1tpXSk7CiAgICAgICAgICBmb3J3YXJkV1NbaV0ubm9ybWFsaXplKCk7CiAgICAgICAgICB3aGVlbC5zaWRlSW1wdWxzZSA9IHJlc29sdmVTaW5nbGVCaWxhdGVyYWwoY2hhc3Npc0JvZHksIHdoZWVsLnJheWNhc3RSZXN1bHQuaGl0UG9pbnRXb3JsZCwgZ3JvdW5kT2JqZWN0LCB3aGVlbC5yYXljYXN0UmVzdWx0LmhpdFBvaW50V29ybGQsIGF4bGVpKTsKICAgICAgICAgIHdoZWVsLnNpZGVJbXB1bHNlICo9IHNpZGVGcmljdGlvblN0aWZmbmVzczI7CiAgICAgICAgfQogICAgICB9CgogICAgICBjb25zdCBzaWRlRmFjdG9yID0gMTsKICAgICAgY29uc3QgZndkRmFjdG9yID0gMC41OwogICAgICB0aGlzLnNsaWRpbmcgPSBmYWxzZTsKCiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbnVtV2hlZWxzOyBpKyspIHsKICAgICAgICBjb25zdCB3aGVlbCA9IHdoZWVsSW5mb3NbaV07CiAgICAgICAgY29uc3QgZ3JvdW5kT2JqZWN0ID0gd2hlZWwucmF5Y2FzdFJlc3VsdC5ib2R5OwogICAgICAgIGxldCByb2xsaW5nRnJpY3Rpb24gPSAwOwogICAgICAgIHdoZWVsLnNsaXBJbmZvID0gMTsKCiAgICAgICAgaWYgKGdyb3VuZE9iamVjdCkgewogICAgICAgICAgY29uc3QgZGVmYXVsdFJvbGxpbmdGcmljdGlvbkltcHVsc2UgPSAwOwogICAgICAgICAgY29uc3QgbWF4SW1wdWxzZSA9IHdoZWVsLmJyYWtlID8gd2hlZWwuYnJha2UgOiBkZWZhdWx0Um9sbGluZ0ZyaWN0aW9uSW1wdWxzZTsgLy8gYnRXaGVlbENvbnRhY3RQb2ludCBjb250YWN0UHQoY2hhc3Npc0JvZHksZ3JvdW5kT2JqZWN0LHdoZWVsSW5mcmF5Y2FzdEluZm8uaGl0UG9pbnRXb3JsZCxmb3J3YXJkV1Nbd2hlZWxdLG1heEltcHVsc2UpOwogICAgICAgICAgLy8gcm9sbGluZ0ZyaWN0aW9uID0gY2FsY1JvbGxpbmdGcmljdGlvbihjb250YWN0UHQpOwoKICAgICAgICAgIHJvbGxpbmdGcmljdGlvbiA9IGNhbGNSb2xsaW5nRnJpY3Rpb24oY2hhc3Npc0JvZHksIGdyb3VuZE9iamVjdCwgd2hlZWwucmF5Y2FzdFJlc3VsdC5oaXRQb2ludFdvcmxkLCBmb3J3YXJkV1NbaV0sIG1heEltcHVsc2UpOwogICAgICAgICAgcm9sbGluZ0ZyaWN0aW9uICs9IHdoZWVsLmVuZ2luZUZvcmNlICogdGltZVN0ZXA7IC8vIHJvbGxpbmdGcmljdGlvbiA9IDA7CgogICAgICAgICAgY29uc3QgZmFjdG9yID0gbWF4SW1wdWxzZSAvIHJvbGxpbmdGcmljdGlvbjsKICAgICAgICAgIHdoZWVsLnNsaXBJbmZvICo9IGZhY3RvcjsKICAgICAgICB9IC8vc3dpdGNoIGJldHdlZW4gYWN0aXZlIHJvbGxpbmcgKHRocm90dGxlKSwgYnJha2luZyBhbmQgbm9uLWFjdGl2ZSByb2xsaW5nIGZyaWN0aW9uIChudGhyb3R0bGUvYnJlYWspCgoKICAgICAgICB3aGVlbC5mb3J3YXJkSW1wdWxzZSA9IDA7CiAgICAgICAgd2hlZWwuc2tpZEluZm8gPSAxOwoKICAgICAgICBpZiAoZ3JvdW5kT2JqZWN0KSB7CiAgICAgICAgICB3aGVlbC5za2lkSW5mbyA9IDE7CiAgICAgICAgICBjb25zdCBtYXhpbXAgPSB3aGVlbC5zdXNwZW5zaW9uRm9yY2UgKiB0aW1lU3RlcCAqIHdoZWVsLmZyaWN0aW9uU2xpcDsKICAgICAgICAgIGNvbnN0IG1heGltcFNpZGUgPSBtYXhpbXA7CiAgICAgICAgICBjb25zdCBtYXhpbXBTcXVhcmVkID0gbWF4aW1wICogbWF4aW1wU2lkZTsKICAgICAgICAgIHdoZWVsLmZvcndhcmRJbXB1bHNlID0gcm9sbGluZ0ZyaWN0aW9uOyAvL3doZWVsSW5mby5lbmdpbmVGb3JjZSogdGltZVN0ZXA7CgogICAgICAgICAgY29uc3QgeCA9IHdoZWVsLmZvcndhcmRJbXB1bHNlICogZndkRmFjdG9yIC8gd2hlZWwuZm9yd2FyZEFjY2VsZXJhdGlvbjsKICAgICAgICAgIGNvbnN0IHkgPSB3aGVlbC5zaWRlSW1wdWxzZSAqIHNpZGVGYWN0b3IgLyB3aGVlbC5zaWRlQWNjZWxlcmF0aW9uOwogICAgICAgICAgY29uc3QgaW1wdWxzZVNxdWFyZWQgPSB4ICogeCArIHkgKiB5OwogICAgICAgICAgd2hlZWwuc2xpZGluZyA9IGZhbHNlOwoKICAgICAgICAgIGlmIChpbXB1bHNlU3F1YXJlZCA+IG1heGltcFNxdWFyZWQpIHsKICAgICAgICAgICAgdGhpcy5zbGlkaW5nID0gdHJ1ZTsKICAgICAgICAgICAgd2hlZWwuc2xpZGluZyA9IHRydWU7CiAgICAgICAgICAgIGNvbnN0IGZhY3RvciA9IG1heGltcCAvIE1hdGguc3FydChpbXB1bHNlU3F1YXJlZCk7CiAgICAgICAgICAgIHdoZWVsLnNraWRJbmZvICo9IGZhY3RvcjsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KCiAgICAgIGlmICh0aGlzLnNsaWRpbmcpIHsKICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG51bVdoZWVsczsgaSsrKSB7CiAgICAgICAgICBjb25zdCB3aGVlbCA9IHdoZWVsSW5mb3NbaV07CgogICAgICAgICAgaWYgKHdoZWVsLnNpZGVJbXB1bHNlICE9PSAwKSB7CiAgICAgICAgICAgIGlmICh3aGVlbC5za2lkSW5mbyA8IDEpIHsKICAgICAgICAgICAgICB3aGVlbC5mb3J3YXJkSW1wdWxzZSAqPSB3aGVlbC5za2lkSW5mbzsKICAgICAgICAgICAgICB3aGVlbC5zaWRlSW1wdWxzZSAqPSB3aGVlbC5za2lkSW5mbzsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSAvLyBhcHBseSB0aGUgaW1wdWxzZXMKCgogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG51bVdoZWVsczsgaSsrKSB7CiAgICAgICAgY29uc3Qgd2hlZWwgPSB3aGVlbEluZm9zW2ldOwogICAgICAgIGNvbnN0IHJlbF9wb3MgPSBuZXcgVmVjMygpOwogICAgICAgIHdoZWVsLnJheWNhc3RSZXN1bHQuaGl0UG9pbnRXb3JsZC52c3ViKGNoYXNzaXNCb2R5LnBvc2l0aW9uLCByZWxfcG9zKTsgLy8gY2Fubm9ucyBhcHBseWltcHVsc2UgaXMgdXNpbmcgd29ybGQgY29vcmQgZm9yIHRoZSBwb3NpdGlvbgogICAgICAgIC8vcmVsX3Bvcy5jb3B5KHdoZWVsLnJheWNhc3RSZXN1bHQuaGl0UG9pbnRXb3JsZCk7CgogICAgICAgIGlmICh3aGVlbC5mb3J3YXJkSW1wdWxzZSAhPT0gMCkgewogICAgICAgICAgY29uc3QgaW1wdWxzZSA9IG5ldyBWZWMzKCk7CiAgICAgICAgICBmb3J3YXJkV1NbaV0uc2NhbGUod2hlZWwuZm9yd2FyZEltcHVsc2UsIGltcHVsc2UpOwogICAgICAgICAgY2hhc3Npc0JvZHkuYXBwbHlJbXB1bHNlKGltcHVsc2UsIHJlbF9wb3MpOwogICAgICAgIH0KCiAgICAgICAgaWYgKHdoZWVsLnNpZGVJbXB1bHNlICE9PSAwKSB7CiAgICAgICAgICBjb25zdCBncm91bmRPYmplY3QgPSB3aGVlbC5yYXljYXN0UmVzdWx0LmJvZHk7CiAgICAgICAgICBjb25zdCByZWxfcG9zMiA9IG5ldyBWZWMzKCk7CiAgICAgICAgICB3aGVlbC5yYXljYXN0UmVzdWx0LmhpdFBvaW50V29ybGQudnN1Yihncm91bmRPYmplY3QucG9zaXRpb24sIHJlbF9wb3MyKTsgLy9yZWxfcG9zMi5jb3B5KHdoZWVsLnJheWNhc3RSZXN1bHQuaGl0UG9pbnRXb3JsZCk7CgogICAgICAgICAgY29uc3Qgc2lkZUltcCA9IG5ldyBWZWMzKCk7CiAgICAgICAgICBheGxlW2ldLnNjYWxlKHdoZWVsLnNpZGVJbXB1bHNlLCBzaWRlSW1wKTsgLy8gU2NhbGUgdGhlIHJlbGF0aXZlIHBvc2l0aW9uIGluIHRoZSB1cCBkaXJlY3Rpb24gd2l0aCByb2xsSW5mbHVlbmNlLgogICAgICAgICAgLy8gSWYgcm9sbEluZmx1ZW5jZSBpcyAxLCB0aGUgaW1wdWxzZSB3aWxsIGJlIGFwcGxpZWQgb24gdGhlIGhpdFBvaW50IChlYXN5IHRvIHJvbGwgb3ZlciksIGlmIGl0IGlzIHplcm8gaXQgd2lsbCBiZSBhcHBsaWVkIGluIHRoZSBzYW1lIHBsYW5lIGFzIHRoZSBjZW50ZXIgb2YgbWFzcyAobm90IGVhc3kgdG8gcm9sbCBvdmVyKS4KCiAgICAgICAgICBjaGFzc2lzQm9keS52ZWN0b3JUb0xvY2FsRnJhbWUocmVsX3BvcywgcmVsX3Bvcyk7CiAgICAgICAgICByZWxfcG9zWyd4eXonW3RoaXMuaW5kZXhVcEF4aXNdXSAqPSB3aGVlbC5yb2xsSW5mbHVlbmNlOwogICAgICAgICAgY2hhc3Npc0JvZHkudmVjdG9yVG9Xb3JsZEZyYW1lKHJlbF9wb3MsIHJlbF9wb3MpOwogICAgICAgICAgY2hhc3Npc0JvZHkuYXBwbHlJbXB1bHNlKHNpZGVJbXAsIHJlbF9wb3MpOyAvL2FwcGx5IGZyaWN0aW9uIGltcHVsc2Ugb24gdGhlIGdyb3VuZAoKICAgICAgICAgIHNpZGVJbXAuc2NhbGUoLTEsIHNpZGVJbXApOwogICAgICAgICAgZ3JvdW5kT2JqZWN0LmFwcGx5SW1wdWxzZShzaWRlSW1wLCByZWxfcG9zMik7CiAgICAgICAgfQogICAgICB9CiAgICB9CgogIH0KCiAgY29uc3QgdG1wVmVjNCA9IG5ldyBWZWMzKCk7CiAgY29uc3QgdG1wVmVjNSA9IG5ldyBWZWMzKCk7CiAgY29uc3QgdG1wVmVjNiA9IG5ldyBWZWMzKCk7CiAgbmV3IFJheSgpOwogIGNvbnN0IGNhc3RSYXlfcmF5dmVjdG9yID0gbmV3IFZlYzMoKTsKICBjb25zdCBjYXN0UmF5X3RhcmdldCA9IG5ldyBWZWMzKCk7CiAgY29uc3QgZGlyZWN0aW9ucyA9IFtuZXcgVmVjMygxLCAwLCAwKSwgbmV3IFZlYzMoMCwgMSwgMCksIG5ldyBWZWMzKDAsIDAsIDEpXTsKICBjb25zdCB1cGRhdGVGcmljdGlvbl9zdXJmTm9ybWFsV1Nfc2NhbGVkX3Byb2ogPSBuZXcgVmVjMygpOwogIGNvbnN0IHVwZGF0ZUZyaWN0aW9uX2F4bGUgPSBbXTsKICBjb25zdCB1cGRhdGVGcmljdGlvbl9mb3J3YXJkV1MgPSBbXTsKICBjb25zdCBzaWRlRnJpY3Rpb25TdGlmZm5lc3MyID0gMTsKICBjb25zdCBjYWxjUm9sbGluZ0ZyaWN0aW9uX3ZlbDEgPSBuZXcgVmVjMygpOwogIGNvbnN0IGNhbGNSb2xsaW5nRnJpY3Rpb25fdmVsMiA9IG5ldyBWZWMzKCk7CiAgY29uc3QgY2FsY1JvbGxpbmdGcmljdGlvbl92ZWwgPSBuZXcgVmVjMygpOwoKICBmdW5jdGlvbiBjYWxjUm9sbGluZ0ZyaWN0aW9uKGJvZHkwLCBib2R5MSwgZnJpY3Rpb25Qb3NXb3JsZCwgZnJpY3Rpb25EaXJlY3Rpb25Xb3JsZCwgbWF4SW1wdWxzZSkgewogICAgbGV0IGoxID0gMDsKICAgIGNvbnN0IGNvbnRhY3RQb3NXb3JsZCA9IGZyaWN0aW9uUG9zV29ybGQ7IC8vIGNvbnN0IHJlbF9wb3MxID0gbmV3IFZlYzMoKTsKICAgIC8vIGNvbnN0IHJlbF9wb3MyID0gbmV3IFZlYzMoKTsKCiAgICBjb25zdCB2ZWwxID0gY2FsY1JvbGxpbmdGcmljdGlvbl92ZWwxOwogICAgY29uc3QgdmVsMiA9IGNhbGNSb2xsaW5nRnJpY3Rpb25fdmVsMjsKICAgIGNvbnN0IHZlbCA9IGNhbGNSb2xsaW5nRnJpY3Rpb25fdmVsOyAvLyBjb250YWN0UG9zV29ybGQudnN1Yihib2R5MC5wb3NpdGlvbiwgcmVsX3BvczEpOwogICAgLy8gY29udGFjdFBvc1dvcmxkLnZzdWIoYm9keTEucG9zaXRpb24sIHJlbF9wb3MyKTsKCiAgICBib2R5MC5nZXRWZWxvY2l0eUF0V29ybGRQb2ludChjb250YWN0UG9zV29ybGQsIHZlbDEpOwogICAgYm9keTEuZ2V0VmVsb2NpdHlBdFdvcmxkUG9pbnQoY29udGFjdFBvc1dvcmxkLCB2ZWwyKTsKICAgIHZlbDEudnN1Yih2ZWwyLCB2ZWwpOwogICAgY29uc3QgdnJlbCA9IGZyaWN0aW9uRGlyZWN0aW9uV29ybGQuZG90KHZlbCk7CiAgICBjb25zdCBkZW5vbTAgPSBjb21wdXRlSW1wdWxzZURlbm9taW5hdG9yKGJvZHkwLCBmcmljdGlvblBvc1dvcmxkLCBmcmljdGlvbkRpcmVjdGlvbldvcmxkKTsKICAgIGNvbnN0IGRlbm9tMSA9IGNvbXB1dGVJbXB1bHNlRGVub21pbmF0b3IoYm9keTEsIGZyaWN0aW9uUG9zV29ybGQsIGZyaWN0aW9uRGlyZWN0aW9uV29ybGQpOwogICAgY29uc3QgcmVsYXhhdGlvbiA9IDE7CiAgICBjb25zdCBqYWNEaWFnQUJJbnYgPSByZWxheGF0aW9uIC8gKGRlbm9tMCArIGRlbm9tMSk7IC8vIGNhbGN1bGF0ZSBqIHRoYXQgbW92ZXMgdXMgdG8gemVybyByZWxhdGl2ZSB2ZWxvY2l0eQoKICAgIGoxID0gLXZyZWwgKiBqYWNEaWFnQUJJbnY7CgogICAgaWYgKG1heEltcHVsc2UgPCBqMSkgewogICAgICBqMSA9IG1heEltcHVsc2U7CiAgICB9CgogICAgaWYgKGoxIDwgLW1heEltcHVsc2UpIHsKICAgICAgajEgPSAtbWF4SW1wdWxzZTsKICAgIH0KCiAgICByZXR1cm4gajE7CiAgfQoKICBjb25zdCBjb21wdXRlSW1wdWxzZURlbm9taW5hdG9yX3IwID0gbmV3IFZlYzMoKTsKICBjb25zdCBjb21wdXRlSW1wdWxzZURlbm9taW5hdG9yX2MwID0gbmV3IFZlYzMoKTsKICBjb25zdCBjb21wdXRlSW1wdWxzZURlbm9taW5hdG9yX3ZlYyA9IG5ldyBWZWMzKCk7CiAgY29uc3QgY29tcHV0ZUltcHVsc2VEZW5vbWluYXRvcl9tID0gbmV3IFZlYzMoKTsKCiAgZnVuY3Rpb24gY29tcHV0ZUltcHVsc2VEZW5vbWluYXRvcihib2R5LCBwb3MsIG5vcm1hbCkgewogICAgY29uc3QgcjAgPSBjb21wdXRlSW1wdWxzZURlbm9taW5hdG9yX3IwOwogICAgY29uc3QgYzAgPSBjb21wdXRlSW1wdWxzZURlbm9taW5hdG9yX2MwOwogICAgY29uc3QgdmVjID0gY29tcHV0ZUltcHVsc2VEZW5vbWluYXRvcl92ZWM7CiAgICBjb25zdCBtID0gY29tcHV0ZUltcHVsc2VEZW5vbWluYXRvcl9tOwogICAgcG9zLnZzdWIoYm9keS5wb3NpdGlvbiwgcjApOwogICAgcjAuY3Jvc3Mobm9ybWFsLCBjMCk7CiAgICBib2R5LmludkluZXJ0aWFXb3JsZC52bXVsdChjMCwgbSk7CiAgICBtLmNyb3NzKHIwLCB2ZWMpOwogICAgcmV0dXJuIGJvZHkuaW52TWFzcyArIG5vcm1hbC5kb3QodmVjKTsKICB9CgogIGNvbnN0IHJlc29sdmVTaW5nbGVCaWxhdGVyYWxfdmVsMSA9IG5ldyBWZWMzKCk7CiAgY29uc3QgcmVzb2x2ZVNpbmdsZUJpbGF0ZXJhbF92ZWwyID0gbmV3IFZlYzMoKTsKICBjb25zdCByZXNvbHZlU2luZ2xlQmlsYXRlcmFsX3ZlbCA9IG5ldyBWZWMzKCk7IC8vIGJpbGF0ZXJhbCBjb25zdHJhaW50IGJldHdlZW4gdHdvIGR5bmFtaWMgb2JqZWN0cwoKICBmdW5jdGlvbiByZXNvbHZlU2luZ2xlQmlsYXRlcmFsKGJvZHkxLCBwb3MxLCBib2R5MiwgcG9zMiwgbm9ybWFsKSB7CiAgICBjb25zdCBub3JtYWxMZW5TcXIgPSBub3JtYWwubGVuZ3RoU3F1YXJlZCgpOwoKICAgIGlmIChub3JtYWxMZW5TcXIgPiAxLjEpIHsKICAgICAgcmV0dXJuIDA7IC8vIG5vIGltcHVsc2UKICAgIH0gLy8gY29uc3QgcmVsX3BvczEgPSBuZXcgVmVjMygpOwogICAgLy8gY29uc3QgcmVsX3BvczIgPSBuZXcgVmVjMygpOwogICAgLy8gcG9zMS52c3ViKGJvZHkxLnBvc2l0aW9uLCByZWxfcG9zMSk7CiAgICAvLyBwb3MyLnZzdWIoYm9keTIucG9zaXRpb24sIHJlbF9wb3MyKTsKCgogICAgY29uc3QgdmVsMSA9IHJlc29sdmVTaW5nbGVCaWxhdGVyYWxfdmVsMTsKICAgIGNvbnN0IHZlbDIgPSByZXNvbHZlU2luZ2xlQmlsYXRlcmFsX3ZlbDI7CiAgICBjb25zdCB2ZWwgPSByZXNvbHZlU2luZ2xlQmlsYXRlcmFsX3ZlbDsKICAgIGJvZHkxLmdldFZlbG9jaXR5QXRXb3JsZFBvaW50KHBvczEsIHZlbDEpOwogICAgYm9keTIuZ2V0VmVsb2NpdHlBdFdvcmxkUG9pbnQocG9zMiwgdmVsMik7CiAgICB2ZWwxLnZzdWIodmVsMiwgdmVsKTsKICAgIGNvbnN0IHJlbF92ZWwgPSBub3JtYWwuZG90KHZlbCk7CiAgICBjb25zdCBjb250YWN0RGFtcGluZyA9IDAuMjsKICAgIGNvbnN0IG1hc3NUZXJtID0gMSAvIChib2R5MS5pbnZNYXNzICsgYm9keTIuaW52TWFzcyk7CiAgICBjb25zdCBpbXB1bHNlID0gLWNvbnRhY3REYW1waW5nICogcmVsX3ZlbCAqIG1hc3NUZXJtOwogICAgcmV0dXJuIGltcHVsc2U7CiAgfQogIC8qKgogICAqIFNwaGVyaWNhbCBzaGFwZQogICAqIEBleGFtcGxlCiAgICogICAgIGNvbnN0IHJhZGl1cyA9IDEKICAgKiAgICAgY29uc3Qgc3BoZXJlU2hhcGUgPSBuZXcgQ0FOTk9OLlNwaGVyZShyYWRpdXMpCiAgICogICAgIGNvbnN0IHNwaGVyZUJvZHkgPSBuZXcgQ0FOTk9OLkJvZHkoeyBtYXNzOiAxLCBzaGFwZTogc3BoZXJlU2hhcGUgfSkKICAgKiAgICAgd29ybGQuYWRkQm9keShzcGhlcmVCb2R5KQogICAqLwoKCiAgY2xhc3MgU3BoZXJlIGV4dGVuZHMgU2hhcGUgewogICAgLyoqCiAgICAgKiBUaGUgcmFkaXVzIG9mIHRoZSBzcGhlcmUuCiAgICAgKi8KCiAgICAvKioKICAgICAqCiAgICAgKiBAcGFyYW0gcmFkaXVzIFRoZSByYWRpdXMgb2YgdGhlIHNwaGVyZSwgYSBub24tbmVnYXRpdmUgbnVtYmVyLgogICAgICovCiAgICBjb25zdHJ1Y3RvcihyYWRpdXMpIHsKICAgICAgc3VwZXIoewogICAgICAgIHR5cGU6IFNoYXBlLnR5cGVzLlNQSEVSRQogICAgICB9KTsKICAgICAgdGhpcy5yYWRpdXMgPSB2b2lkIDA7CiAgICAgIHRoaXMucmFkaXVzID0gcmFkaXVzICE9PSB1bmRlZmluZWQgPyByYWRpdXMgOiAxLjA7CgogICAgICBpZiAodGhpcy5yYWRpdXMgPCAwKSB7CiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdUaGUgc3BoZXJlIHJhZGl1cyBjYW5ub3QgYmUgbmVnYXRpdmUuJyk7CiAgICAgIH0KCiAgICAgIHRoaXMudXBkYXRlQm91bmRpbmdTcGhlcmVSYWRpdXMoKTsKICAgIH0KICAgIC8qKiBjYWxjdWxhdGVMb2NhbEluZXJ0aWEgKi8KCgogICAgY2FsY3VsYXRlTG9jYWxJbmVydGlhKG1hc3MsIHRhcmdldCkgewogICAgICBpZiAodGFyZ2V0ID09PSB2b2lkIDApIHsKICAgICAgICB0YXJnZXQgPSBuZXcgVmVjMygpOwogICAgICB9CgogICAgICBjb25zdCBJID0gMi4wICogbWFzcyAqIHRoaXMucmFkaXVzICogdGhpcy5yYWRpdXMgLyA1LjA7CiAgICAgIHRhcmdldC54ID0gSTsKICAgICAgdGFyZ2V0LnkgPSBJOwogICAgICB0YXJnZXQueiA9IEk7CiAgICAgIHJldHVybiB0YXJnZXQ7CiAgICB9CiAgICAvKiogdm9sdW1lICovCgoKICAgIHZvbHVtZSgpIHsKICAgICAgcmV0dXJuIDQuMCAqIE1hdGguUEkgKiBNYXRoLnBvdyh0aGlzLnJhZGl1cywgMykgLyAzLjA7CiAgICB9CgogICAgdXBkYXRlQm91bmRpbmdTcGhlcmVSYWRpdXMoKSB7CiAgICAgIHRoaXMuYm91bmRpbmdTcGhlcmVSYWRpdXMgPSB0aGlzLnJhZGl1czsKICAgIH0KCiAgICBjYWxjdWxhdGVXb3JsZEFBQkIocG9zLCBxdWF0LCBtaW4sIG1heCkgewogICAgICBjb25zdCByID0gdGhpcy5yYWRpdXM7CiAgICAgIGNvbnN0IGF4ZXMgPSBbJ3gnLCAneScsICd6J107CgogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGF4ZXMubGVuZ3RoOyBpKyspIHsKICAgICAgICBjb25zdCBheCA9IGF4ZXNbaV07CiAgICAgICAgbWluW2F4XSA9IHBvc1theF0gLSByOwogICAgICAgIG1heFtheF0gPSBwb3NbYXhdICsgcjsKICAgICAgfQogICAgfQoKICB9CgogIG5ldyBWZWMzKCk7CiAgbmV3IFZlYzMoKTsKCiAgbmV3IFZlYzMoKTsgLy8gVGVtcCB2ZWN0b3JzIGZvciBjYWxjdWxhdGlvbgoKICBuZXcgVmVjMygpOyAvLyBSZWxhdGl2ZSB2ZWxvY2l0eQoKICBuZXcgVmVjMygpOwogIG5ldyBWZWMzKCk7CiAgbmV3IFZlYzMoKTsKICBuZXcgVmVjMygpOwogIG5ldyBWZWMzKCk7CiAgLyoqCiAgICogQ3lsaW5kZXIgY2xhc3MuCiAgICogQGV4YW1wbGUKICAgKiAgICAgY29uc3QgcmFkaXVzVG9wID0gMC41CiAgICogICAgIGNvbnN0IHJhZGl1c0JvdHRvbSA9IDAuNQogICAqICAgICBjb25zdCBoZWlnaHQgPSAyCiAgICogICAgIGNvbnN0IG51bVNlZ21lbnRzID0gMTIKICAgKiAgICAgY29uc3QgY3lsaW5kZXJTaGFwZSA9IG5ldyBDQU5OT04uQ3lsaW5kZXIocmFkaXVzVG9wLCByYWRpdXNCb3R0b20sIGhlaWdodCwgbnVtU2VnbWVudHMpCiAgICogICAgIGNvbnN0IGN5bGluZGVyQm9keSA9IG5ldyBDQU5OT04uQm9keSh7IG1hc3M6IDEsIHNoYXBlOiBjeWxpbmRlclNoYXBlIH0pCiAgICogICAgIHdvcmxkLmFkZEJvZHkoY3lsaW5kZXJCb2R5KQogICAqLwoKICBjbGFzcyBDeWxpbmRlciBleHRlbmRzIENvbnZleFBvbHloZWRyb24gewogICAgLyoqIFRoZSByYWRpdXMgb2YgdGhlIHRvcCBvZiB0aGUgQ3lsaW5kZXIuICovCgogICAgLyoqIFRoZSByYWRpdXMgb2YgdGhlIGJvdHRvbSBvZiB0aGUgQ3lsaW5kZXIuICovCgogICAgLyoqIFRoZSBoZWlnaHQgb2YgdGhlIEN5bGluZGVyLiAqLwoKICAgIC8qKiBUaGUgbnVtYmVyIG9mIHNlZ21lbnRzIHRvIGJ1aWxkIHRoZSBjeWxpbmRlciBvdXQgb2YuICovCgogICAgLyoqCiAgICAgKiBAcGFyYW0gcmFkaXVzVG9wIFRoZSByYWRpdXMgb2YgdGhlIHRvcCBvZiB0aGUgQ3lsaW5kZXIuCiAgICAgKiBAcGFyYW0gcmFkaXVzQm90dG9tIFRoZSByYWRpdXMgb2YgdGhlIGJvdHRvbSBvZiB0aGUgQ3lsaW5kZXIuCiAgICAgKiBAcGFyYW0gaGVpZ2h0IFRoZSBoZWlnaHQgb2YgdGhlIEN5bGluZGVyLgogICAgICogQHBhcmFtIG51bVNlZ21lbnRzIFRoZSBudW1iZXIgb2Ygc2VnbWVudHMgdG8gYnVpbGQgdGhlIGN5bGluZGVyIG91dCBvZi4KICAgICAqLwogICAgY29uc3RydWN0b3IocmFkaXVzVG9wLCByYWRpdXNCb3R0b20sIGhlaWdodCwgbnVtU2VnbWVudHMpIHsKICAgICAgaWYgKHJhZGl1c1RvcCA9PT0gdm9pZCAwKSB7CiAgICAgICAgcmFkaXVzVG9wID0gMTsKICAgICAgfQoKICAgICAgaWYgKHJhZGl1c0JvdHRvbSA9PT0gdm9pZCAwKSB7CiAgICAgICAgcmFkaXVzQm90dG9tID0gMTsKICAgICAgfQoKICAgICAgaWYgKGhlaWdodCA9PT0gdm9pZCAwKSB7CiAgICAgICAgaGVpZ2h0ID0gMTsKICAgICAgfQoKICAgICAgaWYgKG51bVNlZ21lbnRzID09PSB2b2lkIDApIHsKICAgICAgICBudW1TZWdtZW50cyA9IDg7CiAgICAgIH0KCiAgICAgIGlmIChyYWRpdXNUb3AgPCAwKSB7CiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdUaGUgY3lsaW5kZXIgcmFkaXVzVG9wIGNhbm5vdCBiZSBuZWdhdGl2ZS4nKTsKICAgICAgfQoKICAgICAgaWYgKHJhZGl1c0JvdHRvbSA8IDApIHsKICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1RoZSBjeWxpbmRlciByYWRpdXNCb3R0b20gY2Fubm90IGJlIG5lZ2F0aXZlLicpOwogICAgICB9CgogICAgICBjb25zdCBOID0gbnVtU2VnbWVudHM7CiAgICAgIGNvbnN0IHZlcnRpY2VzID0gW107CiAgICAgIGNvbnN0IGF4ZXMgPSBbXTsKICAgICAgY29uc3QgZmFjZXMgPSBbXTsKICAgICAgY29uc3QgYm90dG9tZmFjZSA9IFtdOwogICAgICBjb25zdCB0b3BmYWNlID0gW107CiAgICAgIGNvbnN0IGNvcyA9IE1hdGguY29zOwogICAgICBjb25zdCBzaW4gPSBNYXRoLnNpbjsgLy8gRmlyc3QgYm90dG9tIHBvaW50CgogICAgICB2ZXJ0aWNlcy5wdXNoKG5ldyBWZWMzKC1yYWRpdXNCb3R0b20gKiBzaW4oMCksIC1oZWlnaHQgKiAwLjUsIHJhZGl1c0JvdHRvbSAqIGNvcygwKSkpOwogICAgICBib3R0b21mYWNlLnB1c2goMCk7IC8vIEZpcnN0IHRvcCBwb2ludAoKICAgICAgdmVydGljZXMucHVzaChuZXcgVmVjMygtcmFkaXVzVG9wICogc2luKDApLCBoZWlnaHQgKiAwLjUsIHJhZGl1c1RvcCAqIGNvcygwKSkpOwogICAgICB0b3BmYWNlLnB1c2goMSk7CgogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IE47IGkrKykgewogICAgICAgIGNvbnN0IHRoZXRhID0gMiAqIE1hdGguUEkgLyBOICogKGkgKyAxKTsKICAgICAgICBjb25zdCB0aGV0YU4gPSAyICogTWF0aC5QSSAvIE4gKiAoaSArIDAuNSk7CgogICAgICAgIGlmIChpIDwgTiAtIDEpIHsKICAgICAgICAgIC8vIEJvdHRvbQogICAgICAgICAgdmVydGljZXMucHVzaChuZXcgVmVjMygtcmFkaXVzQm90dG9tICogc2luKHRoZXRhKSwgLWhlaWdodCAqIDAuNSwgcmFkaXVzQm90dG9tICogY29zKHRoZXRhKSkpOwogICAgICAgICAgYm90dG9tZmFjZS5wdXNoKDIgKiBpICsgMik7IC8vIFRvcAoKICAgICAgICAgIHZlcnRpY2VzLnB1c2gobmV3IFZlYzMoLXJhZGl1c1RvcCAqIHNpbih0aGV0YSksIGhlaWdodCAqIDAuNSwgcmFkaXVzVG9wICogY29zKHRoZXRhKSkpOwogICAgICAgICAgdG9wZmFjZS5wdXNoKDIgKiBpICsgMyk7IC8vIEZhY2UKCiAgICAgICAgICBmYWNlcy5wdXNoKFsyICogaSwgMiAqIGkgKyAxLCAyICogaSArIDMsIDIgKiBpICsgMl0pOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBmYWNlcy5wdXNoKFsyICogaSwgMiAqIGkgKyAxLCAxLCAwXSk7IC8vIENvbm5lY3QKICAgICAgICB9IC8vIEF4aXM6IHdlIGNhbiBjdXQgb2ZmIGhhbGYgb2YgdGhlbSBpZiB3ZSBoYXZlIGV2ZW4gbnVtYmVyIG9mIHNlZ21lbnRzCgoKICAgICAgICBpZiAoTiAlIDIgPT09IDEgfHwgaSA8IE4gLyAyKSB7CiAgICAgICAgICBheGVzLnB1c2gobmV3IFZlYzMoLXNpbih0aGV0YU4pLCAwLCBjb3ModGhldGFOKSkpOwogICAgICAgIH0KICAgICAgfQoKICAgICAgZmFjZXMucHVzaChib3R0b21mYWNlKTsKICAgICAgYXhlcy5wdXNoKG5ldyBWZWMzKDAsIDEsIDApKTsgLy8gUmVvcmRlciB0b3AgZmFjZQoKICAgICAgY29uc3QgdGVtcCA9IFtdOwoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0b3BmYWNlLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgdGVtcC5wdXNoKHRvcGZhY2VbdG9wZmFjZS5sZW5ndGggLSBpIC0gMV0pOwogICAgICB9CgogICAgICBmYWNlcy5wdXNoKHRlbXApOwogICAgICBzdXBlcih7CiAgICAgICAgdmVydGljZXMsCiAgICAgICAgZmFjZXMsCiAgICAgICAgYXhlcwogICAgICB9KTsKICAgICAgdGhpcy5yYWRpdXNUb3AgPSB2b2lkIDA7CiAgICAgIHRoaXMucmFkaXVzQm90dG9tID0gdm9pZCAwOwogICAgICB0aGlzLmhlaWdodCA9IHZvaWQgMDsKICAgICAgdGhpcy5udW1TZWdtZW50cyA9IHZvaWQgMDsKICAgICAgdGhpcy50eXBlID0gU2hhcGUudHlwZXMuQ1lMSU5ERVI7CiAgICAgIHRoaXMucmFkaXVzVG9wID0gcmFkaXVzVG9wOwogICAgICB0aGlzLnJhZGl1c0JvdHRvbSA9IHJhZGl1c0JvdHRvbTsKICAgICAgdGhpcy5oZWlnaHQgPSBoZWlnaHQ7CiAgICAgIHRoaXMubnVtU2VnbWVudHMgPSBudW1TZWdtZW50czsKICAgIH0KCiAgfQogIC8qKgogICAqIFBhcnRpY2xlIHNoYXBlLgogICAqIEBleGFtcGxlCiAgICogICAgIGNvbnN0IHBhcnRpY2xlU2hhcGUgPSBuZXcgQ0FOTk9OLlBhcnRpY2xlKCkKICAgKiAgICAgY29uc3QgcGFydGljbGVCb2R5ID0gbmV3IENBTk5PTi5Cb2R5KHsgbWFzczogMSwgc2hhcGU6IHBhcnRpY2xlU2hhcGUgfSkKICAgKiAgICAgd29ybGQuYWRkQm9keShwYXJ0aWNsZUJvZHkpCiAgICovCgoKICBjbGFzcyBQYXJ0aWNsZSBleHRlbmRzIFNoYXBlIHsKICAgIGNvbnN0cnVjdG9yKCkgewogICAgICBzdXBlcih7CiAgICAgICAgdHlwZTogU2hhcGUudHlwZXMuUEFSVElDTEUKICAgICAgfSk7CiAgICB9CiAgICAvKioKICAgICAqIGNhbGN1bGF0ZUxvY2FsSW5lcnRpYQogICAgICovCgoKICAgIGNhbGN1bGF0ZUxvY2FsSW5lcnRpYShtYXNzLCB0YXJnZXQpIHsKICAgICAgaWYgKHRhcmdldCA9PT0gdm9pZCAwKSB7CiAgICAgICAgdGFyZ2V0ID0gbmV3IFZlYzMoKTsKICAgICAgfQoKICAgICAgdGFyZ2V0LnNldCgwLCAwLCAwKTsKICAgICAgcmV0dXJuIHRhcmdldDsKICAgIH0KCiAgICB2b2x1bWUoKSB7CiAgICAgIHJldHVybiAwOwogICAgfQoKICAgIHVwZGF0ZUJvdW5kaW5nU3BoZXJlUmFkaXVzKCkgewogICAgICB0aGlzLmJvdW5kaW5nU3BoZXJlUmFkaXVzID0gMDsKICAgIH0KCiAgICBjYWxjdWxhdGVXb3JsZEFBQkIocG9zLCBxdWF0LCBtaW4sIG1heCkgewogICAgICAvLyBHZXQgZWFjaCBheGlzIG1heAogICAgICBtaW4uY29weShwb3MpOwogICAgICBtYXguY29weShwb3MpOwogICAgfQoKICB9CiAgLyoqCiAgICogQSBwbGFuZSwgZmFjaW5nIGluIHRoZSBaIGRpcmVjdGlvbi4gVGhlIHBsYW5lIGhhcyBpdHMgc3VyZmFjZSBhdCB6PTAgYW5kIGV2ZXJ5dGhpbmcgYmVsb3cgej0wIGlzIGFzc3VtZWQgdG8gYmUgc29saWQgcGxhbmUuIFRvIG1ha2UgdGhlIHBsYW5lIGZhY2UgaW4gc29tZSBvdGhlciBkaXJlY3Rpb24gdGhhbiB6LCB5b3UgbXVzdCBwdXQgaXQgaW5zaWRlIGEgQm9keSBhbmQgcm90YXRlIHRoYXQgYm9keS4gU2VlIHRoZSBkZW1vcy4KICAgKiBAZXhhbXBsZQogICAqICAgICBjb25zdCBwbGFuZVNoYXBlID0gbmV3IENBTk5PTi5QbGFuZSgpCiAgICogICAgIGNvbnN0IHBsYW5lQm9keSA9IG5ldyBDQU5OT04uQm9keSh7IG1hc3M6IDAsIHNoYXBlOiAgcGxhbmVTaGFwZSB9KQogICAqICAgICBwbGFuZUJvZHkucXVhdGVybmlvbi5zZXRGcm9tRXVsZXIoLU1hdGguUEkgLyAyLCAwLCAwKSAvLyBtYWtlIGl0IGZhY2UgdXAKICAgKiAgICAgd29ybGQuYWRkQm9keShwbGFuZUJvZHkpCiAgICovCgoKICBjbGFzcyBQbGFuZSBleHRlbmRzIFNoYXBlIHsKICAgIC8qKiB3b3JsZE5vcm1hbCAqLwoKICAgIC8qKiB3b3JsZE5vcm1hbE5lZWRzVXBkYXRlICovCiAgICBjb25zdHJ1Y3RvcigpIHsKICAgICAgc3VwZXIoewogICAgICAgIHR5cGU6IFNoYXBlLnR5cGVzLlBMQU5FCiAgICAgIH0pOyAvLyBXb3JsZCBvcmllbnRlZCBub3JtYWwKCiAgICAgIHRoaXMud29ybGROb3JtYWwgPSB2b2lkIDA7CiAgICAgIHRoaXMud29ybGROb3JtYWxOZWVkc1VwZGF0ZSA9IHZvaWQgMDsKICAgICAgdGhpcy5ib3VuZGluZ1NwaGVyZVJhZGl1cyA9IHZvaWQgMDsKICAgICAgdGhpcy53b3JsZE5vcm1hbCA9IG5ldyBWZWMzKCk7CiAgICAgIHRoaXMud29ybGROb3JtYWxOZWVkc1VwZGF0ZSA9IHRydWU7CiAgICAgIHRoaXMuYm91bmRpbmdTcGhlcmVSYWRpdXMgPSBOdW1iZXIuTUFYX1ZBTFVFOwogICAgfQogICAgLyoqIGNvbXB1dGVXb3JsZE5vcm1hbCAqLwoKCiAgICBjb21wdXRlV29ybGROb3JtYWwocXVhdCkgewogICAgICBjb25zdCBuID0gdGhpcy53b3JsZE5vcm1hbDsKICAgICAgbi5zZXQoMCwgMCwgMSk7CiAgICAgIHF1YXQudm11bHQobiwgbik7CiAgICAgIHRoaXMud29ybGROb3JtYWxOZWVkc1VwZGF0ZSA9IGZhbHNlOwogICAgfQoKICAgIGNhbGN1bGF0ZUxvY2FsSW5lcnRpYShtYXNzLCB0YXJnZXQpIHsKICAgICAgaWYgKHRhcmdldCA9PT0gdm9pZCAwKSB7CiAgICAgICAgdGFyZ2V0ID0gbmV3IFZlYzMoKTsKICAgICAgfQoKICAgICAgcmV0dXJuIHRhcmdldDsKICAgIH0KCiAgICB2b2x1bWUoKSB7CiAgICAgIHJldHVybiAoLy8gVGhlIHBsYW5lIGlzIGluZmluaXRlLi4uCiAgICAgICAgTnVtYmVyLk1BWF9WQUxVRQogICAgICApOwogICAgfQoKICAgIGNhbGN1bGF0ZVdvcmxkQUFCQihwb3MsIHF1YXQsIG1pbiwgbWF4KSB7CiAgICAgIC8vIFRoZSBwbGFuZSBBQUJCIGlzIGluZmluaXRlLCBleGNlcHQgaWYgdGhlIG5vcm1hbCBpcyBwb2ludGluZyBhbG9uZyBhbnkgYXhpcwogICAgICB0ZW1wTm9ybWFsLnNldCgwLCAwLCAxKTsgLy8gRGVmYXVsdCBwbGFuZSBub3JtYWwgaXMgegoKICAgICAgcXVhdC52bXVsdCh0ZW1wTm9ybWFsLCB0ZW1wTm9ybWFsKTsKICAgICAgY29uc3QgbWF4VmFsID0gTnVtYmVyLk1BWF9WQUxVRTsKICAgICAgbWluLnNldCgtbWF4VmFsLCAtbWF4VmFsLCAtbWF4VmFsKTsKICAgICAgbWF4LnNldChtYXhWYWwsIG1heFZhbCwgbWF4VmFsKTsKCiAgICAgIGlmICh0ZW1wTm9ybWFsLnggPT09IDEpIHsKICAgICAgICBtYXgueCA9IHBvcy54OwogICAgICB9IGVsc2UgaWYgKHRlbXBOb3JtYWwueCA9PT0gLTEpIHsKICAgICAgICBtaW4ueCA9IHBvcy54OwogICAgICB9CgogICAgICBpZiAodGVtcE5vcm1hbC55ID09PSAxKSB7CiAgICAgICAgbWF4LnkgPSBwb3MueTsKICAgICAgfSBlbHNlIGlmICh0ZW1wTm9ybWFsLnkgPT09IC0xKSB7CiAgICAgICAgbWluLnkgPSBwb3MueTsKICAgICAgfQoKICAgICAgaWYgKHRlbXBOb3JtYWwueiA9PT0gMSkgewogICAgICAgIG1heC56ID0gcG9zLno7CiAgICAgIH0gZWxzZSBpZiAodGVtcE5vcm1hbC56ID09PSAtMSkgewogICAgICAgIG1pbi56ID0gcG9zLno7CiAgICAgIH0KICAgIH0KCiAgICB1cGRhdGVCb3VuZGluZ1NwaGVyZVJhZGl1cygpIHsKICAgICAgdGhpcy5ib3VuZGluZ1NwaGVyZVJhZGl1cyA9IE51bWJlci5NQVhfVkFMVUU7CiAgICB9CgogIH0KCiAgY29uc3QgdGVtcE5vcm1hbCA9IG5ldyBWZWMzKCk7CiAgLyoqCiAgICogSGVpZ2h0ZmllbGQgc2hhcGUgY2xhc3MuIEhlaWdodCBkYXRhIGlzIGdpdmVuIGFzIGFuIGFycmF5LiBUaGVzZSBkYXRhIHBvaW50cyBhcmUgc3ByZWFkIG91dCBldmVubHkgd2l0aCBhIGdpdmVuIGRpc3RhbmNlLgogICAqIEB0b2RvIFNob3VsZCBiZSBwb3NzaWJsZSB0byB1c2UgYWxvbmcgYWxsIGF4ZXMsIG5vdCBqdXN0IHkKICAgKiBAdG9kbyBzaG91bGQgYmUgcG9zc2libGUgdG8gc2NhbGUgYWxvbmcgYWxsIGF4ZXMKICAgKiBAdG9kbyBSZWZhY3RvciBlbGVtZW50U2l6ZSB0byBlbGVtZW50U2l6ZVggYW5kIGVsZW1lbnRTaXplWQogICAqCiAgICogQGV4YW1wbGUKICAgKiAgICAgLy8gR2VuZXJhdGUgc29tZSBoZWlnaHQgZGF0YSAoeS12YWx1ZXMpLgogICAqICAgICBjb25zdCBkYXRhID0gW10KICAgKiAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCAxMDAwOyBpKyspIHsKICAgKiAgICAgICAgIGNvbnN0IHkgPSAwLjUgKiBNYXRoLmNvcygwLjIgKiBpKQogICAqICAgICAgICAgZGF0YS5wdXNoKHkpCiAgICogICAgIH0KICAgKgogICAqICAgICAvLyBDcmVhdGUgdGhlIGhlaWdodGZpZWxkIHNoYXBlCiAgICogICAgIGNvbnN0IGhlaWdodGZpZWxkU2hhcGUgPSBuZXcgQ0FOTk9OLkhlaWdodGZpZWxkKGRhdGEsIHsKICAgKiAgICAgICAgIGVsZW1lbnRTaXplOiAxIC8vIERpc3RhbmNlIGJldHdlZW4gdGhlIGRhdGEgcG9pbnRzIGluIFggYW5kIFkgZGlyZWN0aW9ucwogICAqICAgICB9KQogICAqICAgICBjb25zdCBoZWlnaHRmaWVsZEJvZHkgPSBuZXcgQ0FOTk9OLkJvZHkoeyBzaGFwZTogaGVpZ2h0ZmllbGRTaGFwZSB9KQogICAqICAgICB3b3JsZC5hZGRCb2R5KGhlaWdodGZpZWxkQm9keSkKICAgKi8KCiAgY2xhc3MgSGVpZ2h0ZmllbGQgZXh0ZW5kcyBTaGFwZSB7CiAgICAvKioKICAgICAqIEFuIGFycmF5IG9mIG51bWJlcnMsIG9yIGhlaWdodCB2YWx1ZXMsIHRoYXQgYXJlIHNwcmVhZCBvdXQgYWxvbmcgdGhlIHggYXhpcy4KICAgICAqLwoKICAgIC8qKgogICAgICogTWF4IHZhbHVlIG9mIHRoZSBkYXRhIHBvaW50cyBpbiB0aGUgZGF0YSBhcnJheS4KICAgICAqLwoKICAgIC8qKgogICAgICogTWluaW11bSB2YWx1ZSBvZiB0aGUgZGF0YSBwb2ludHMgaW4gdGhlIGRhdGEgYXJyYXkuCiAgICAgKi8KCiAgICAvKioKICAgICAqIFdvcmxkIHNwYWNpbmcgYmV0d2VlbiB0aGUgZGF0YSBwb2ludHMgaW4gWCBhbmQgWSBkaXJlY3Rpb24uCiAgICAgKiBAdG9kbyBlbGVtZW50U2l6ZVggYW5kIFkKICAgICAqIEBkZWZhdWx0IDEKICAgICAqLwoKICAgIC8qKgogICAgICogQGRlZmF1bHQgdHJ1ZQogICAgICovCgogICAgLyoqCiAgICAgKiBAcGFyYW0gZGF0YSBBbiBhcnJheSBvZiBudW1iZXJzLCBvciBoZWlnaHQgdmFsdWVzLCB0aGF0IGFyZSBzcHJlYWQgb3V0IGFsb25nIHRoZSB4IGF4aXMuCiAgICAgKi8KICAgIGNvbnN0cnVjdG9yKGRhdGEsIG9wdGlvbnMpIHsKICAgICAgaWYgKG9wdGlvbnMgPT09IHZvaWQgMCkgewogICAgICAgIG9wdGlvbnMgPSB7fTsKICAgICAgfQoKICAgICAgb3B0aW9ucyA9IFV0aWxzLmRlZmF1bHRzKG9wdGlvbnMsIHsKICAgICAgICBtYXhWYWx1ZTogbnVsbCwKICAgICAgICBtaW5WYWx1ZTogbnVsbCwKICAgICAgICBlbGVtZW50U2l6ZTogMQogICAgICB9KTsKICAgICAgc3VwZXIoewogICAgICAgIHR5cGU6IFNoYXBlLnR5cGVzLkhFSUdIVEZJRUxECiAgICAgIH0pOwogICAgICB0aGlzLmRhdGEgPSB2b2lkIDA7CiAgICAgIHRoaXMubWF4VmFsdWUgPSB2b2lkIDA7CiAgICAgIHRoaXMubWluVmFsdWUgPSB2b2lkIDA7CiAgICAgIHRoaXMuZWxlbWVudFNpemUgPSB2b2lkIDA7CiAgICAgIHRoaXMuY2FjaGVFbmFibGVkID0gdm9pZCAwOwogICAgICB0aGlzLnBpbGxhckNvbnZleCA9IHZvaWQgMDsKICAgICAgdGhpcy5waWxsYXJPZmZzZXQgPSB2b2lkIDA7CiAgICAgIHRoaXMuX2NhY2hlZFBpbGxhcnMgPSB2b2lkIDA7CiAgICAgIHRoaXMuZGF0YSA9IGRhdGE7CiAgICAgIHRoaXMubWF4VmFsdWUgPSBvcHRpb25zLm1heFZhbHVlOwogICAgICB0aGlzLm1pblZhbHVlID0gb3B0aW9ucy5taW5WYWx1ZTsKICAgICAgdGhpcy5lbGVtZW50U2l6ZSA9IG9wdGlvbnMuZWxlbWVudFNpemU7CgogICAgICBpZiAob3B0aW9ucy5taW5WYWx1ZSA9PT0gbnVsbCkgewogICAgICAgIHRoaXMudXBkYXRlTWluVmFsdWUoKTsKICAgICAgfQoKICAgICAgaWYgKG9wdGlvbnMubWF4VmFsdWUgPT09IG51bGwpIHsKICAgICAgICB0aGlzLnVwZGF0ZU1heFZhbHVlKCk7CiAgICAgIH0KCiAgICAgIHRoaXMuY2FjaGVFbmFibGVkID0gdHJ1ZTsKICAgICAgdGhpcy5waWxsYXJDb252ZXggPSBuZXcgQ29udmV4UG9seWhlZHJvbigpOwogICAgICB0aGlzLnBpbGxhck9mZnNldCA9IG5ldyBWZWMzKCk7CiAgICAgIHRoaXMudXBkYXRlQm91bmRpbmdTcGhlcmVSYWRpdXMoKTsgLy8gImlfal9pc1VwcGVyIiA9PiB7IGNvbnZleDogLi4uLCBvZmZzZXQ6IC4uLiB9CiAgICAgIC8vIGZvciBleGFtcGxlOgogICAgICAvLyBfY2FjaGVkUGlsbGFyc1siMF8yXzEiXQoKICAgICAgdGhpcy5fY2FjaGVkUGlsbGFycyA9IHt9OwogICAgfQogICAgLyoqCiAgICAgKiBDYWxsIHdoZW5ldmVyIHlvdSBjaGFuZ2UgdGhlIGRhdGEgYXJyYXkuCiAgICAgKi8KCgogICAgdXBkYXRlKCkgewogICAgICB0aGlzLl9jYWNoZWRQaWxsYXJzID0ge307CiAgICB9CiAgICAvKioKICAgICAqIFVwZGF0ZSB0aGUgYG1pblZhbHVlYCBwcm9wZXJ0eQogICAgICovCgoKICAgIHVwZGF0ZU1pblZhbHVlKCkgewogICAgICBjb25zdCBkYXRhID0gdGhpcy5kYXRhOwogICAgICBsZXQgbWluVmFsdWUgPSBkYXRhWzBdWzBdOwoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgIT09IGRhdGEubGVuZ3RoOyBpKyspIHsKICAgICAgICBmb3IgKGxldCBqID0gMDsgaiAhPT0gZGF0YVtpXS5sZW5ndGg7IGorKykgewogICAgICAgICAgY29uc3QgdiA9IGRhdGFbaV1bal07CgogICAgICAgICAgaWYgKHYgPCBtaW5WYWx1ZSkgewogICAgICAgICAgICBtaW5WYWx1ZSA9IHY7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CgogICAgICB0aGlzLm1pblZhbHVlID0gbWluVmFsdWU7CiAgICB9CiAgICAvKioKICAgICAqIFVwZGF0ZSB0aGUgYG1heFZhbHVlYCBwcm9wZXJ0eQogICAgICovCgoKICAgIHVwZGF0ZU1heFZhbHVlKCkgewogICAgICBjb25zdCBkYXRhID0gdGhpcy5kYXRhOwogICAgICBsZXQgbWF4VmFsdWUgPSBkYXRhWzBdWzBdOwoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgIT09IGRhdGEubGVuZ3RoOyBpKyspIHsKICAgICAgICBmb3IgKGxldCBqID0gMDsgaiAhPT0gZGF0YVtpXS5sZW5ndGg7IGorKykgewogICAgICAgICAgY29uc3QgdiA9IGRhdGFbaV1bal07CgogICAgICAgICAgaWYgKHYgPiBtYXhWYWx1ZSkgewogICAgICAgICAgICBtYXhWYWx1ZSA9IHY7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CgogICAgICB0aGlzLm1heFZhbHVlID0gbWF4VmFsdWU7CiAgICB9CiAgICAvKioKICAgICAqIFNldCB0aGUgaGVpZ2h0IHZhbHVlIGF0IGFuIGluZGV4LiBEb24ndCBmb3JnZXQgdG8gdXBkYXRlIG1heFZhbHVlIGFuZCBtaW5WYWx1ZSBhZnRlciB5b3UncmUgZG9uZS4KICAgICAqLwoKCiAgICBzZXRIZWlnaHRWYWx1ZUF0SW5kZXgoeGksIHlpLCB2YWx1ZSkgewogICAgICBjb25zdCBkYXRhID0gdGhpcy5kYXRhOwogICAgICBkYXRhW3hpXVt5aV0gPSB2YWx1ZTsgLy8gSW52YWxpZGF0ZSBjYWNoZQoKICAgICAgdGhpcy5jbGVhckNhY2hlZENvbnZleFRyaWFuZ2xlUGlsbGFyKHhpLCB5aSwgZmFsc2UpOwoKICAgICAgaWYgKHhpID4gMCkgewogICAgICAgIHRoaXMuY2xlYXJDYWNoZWRDb252ZXhUcmlhbmdsZVBpbGxhcih4aSAtIDEsIHlpLCB0cnVlKTsKICAgICAgICB0aGlzLmNsZWFyQ2FjaGVkQ29udmV4VHJpYW5nbGVQaWxsYXIoeGkgLSAxLCB5aSwgZmFsc2UpOwogICAgICB9CgogICAgICBpZiAoeWkgPiAwKSB7CiAgICAgICAgdGhpcy5jbGVhckNhY2hlZENvbnZleFRyaWFuZ2xlUGlsbGFyKHhpLCB5aSAtIDEsIHRydWUpOwogICAgICAgIHRoaXMuY2xlYXJDYWNoZWRDb252ZXhUcmlhbmdsZVBpbGxhcih4aSwgeWkgLSAxLCBmYWxzZSk7CiAgICAgIH0KCiAgICAgIGlmICh5aSA+IDAgJiYgeGkgPiAwKSB7CiAgICAgICAgdGhpcy5jbGVhckNhY2hlZENvbnZleFRyaWFuZ2xlUGlsbGFyKHhpIC0gMSwgeWkgLSAxLCB0cnVlKTsKICAgICAgfQogICAgfQogICAgLyoqCiAgICAgKiBHZXQgbWF4L21pbiBpbiBhIHJlY3RhbmdsZSBpbiB0aGUgbWF0cml4IGRhdGEKICAgICAqIEBwYXJhbSByZXN1bHQgQW4gYXJyYXkgdG8gc3RvcmUgdGhlIHJlc3VsdHMgaW4uCiAgICAgKiBAcmV0dXJuIFRoZSByZXN1bHQgYXJyYXksIGlmIGl0IHdhcyBwYXNzZWQgaW4uIE1pbmltdW0gd2lsbCBiZSBhdCBwb3NpdGlvbiAwIGFuZCBtYXggYXQgMS4KICAgICAqLwoKCiAgICBnZXRSZWN0TWluTWF4KGlNaW5YLCBpTWluWSwgaU1heFgsIGlNYXhZLCByZXN1bHQpIHsKICAgICAgaWYgKHJlc3VsdCA9PT0gdm9pZCAwKSB7CiAgICAgICAgcmVzdWx0ID0gW107CiAgICAgIH0KCiAgICAgIC8vIEdldCBtYXggYW5kIG1pbiBvZiB0aGUgZGF0YQogICAgICBjb25zdCBkYXRhID0gdGhpcy5kYXRhOyAvLyBTZXQgZmlyc3QgdmFsdWUKCiAgICAgIGxldCBtYXggPSB0aGlzLm1pblZhbHVlOwoKICAgICAgZm9yIChsZXQgaSA9IGlNaW5YOyBpIDw9IGlNYXhYOyBpKyspIHsKICAgICAgICBmb3IgKGxldCBqID0gaU1pblk7IGogPD0gaU1heFk7IGorKykgewogICAgICAgICAgY29uc3QgaGVpZ2h0ID0gZGF0YVtpXVtqXTsKCiAgICAgICAgICBpZiAoaGVpZ2h0ID4gbWF4KSB7CiAgICAgICAgICAgIG1heCA9IGhlaWdodDsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KCiAgICAgIHJlc3VsdFswXSA9IHRoaXMubWluVmFsdWU7CiAgICAgIHJlc3VsdFsxXSA9IG1heDsKICAgIH0KICAgIC8qKgogICAgICogR2V0IHRoZSBpbmRleCBvZiBhIGxvY2FsIHBvc2l0aW9uIG9uIHRoZSBoZWlnaHRmaWVsZC4gVGhlIGluZGV4ZXMgaW5kaWNhdGUgdGhlIHJlY3RhbmdsZXMsIHNvIGlmIHlvdXIgdGVycmFpbiBpcyBtYWRlIG9mIE4geCBOIGhlaWdodCBkYXRhIHBvaW50cywgeW91IHdpbGwgaGF2ZSByZWN0YW5nbGUgaW5kZXhlcyByYW5naW5nIGZyb20gMCB0byBOLTEuCiAgICAgKiBAcGFyYW0gcmVzdWx0IFR3by1lbGVtZW50IGFycmF5CiAgICAgKiBAcGFyYW0gY2xhbXAgSWYgdGhlIHBvc2l0aW9uIHNob3VsZCBiZSBjbGFtcGVkIHRvIHRoZSBoZWlnaHRmaWVsZCBlZGdlLgogICAgICovCgoKICAgIGdldEluZGV4T2ZQb3NpdGlvbih4LCB5LCByZXN1bHQsIGNsYW1wKSB7CiAgICAgIC8vIEdldCB0aGUgaW5kZXggb2YgdGhlIGRhdGEgcG9pbnRzIHRvIHRlc3QgYWdhaW5zdAogICAgICBjb25zdCB3ID0gdGhpcy5lbGVtZW50U2l6ZTsKICAgICAgY29uc3QgZGF0YSA9IHRoaXMuZGF0YTsKICAgICAgbGV0IHhpID0gTWF0aC5mbG9vcih4IC8gdyk7CiAgICAgIGxldCB5aSA9IE1hdGguZmxvb3IoeSAvIHcpOwogICAgICByZXN1bHRbMF0gPSB4aTsKICAgICAgcmVzdWx0WzFdID0geWk7CgogICAgICBpZiAoY2xhbXApIHsKICAgICAgICAvLyBDbGFtcCBpbmRleCB0byBlZGdlcwogICAgICAgIGlmICh4aSA8IDApIHsKICAgICAgICAgIHhpID0gMDsKICAgICAgICB9CgogICAgICAgIGlmICh5aSA8IDApIHsKICAgICAgICAgIHlpID0gMDsKICAgICAgICB9CgogICAgICAgIGlmICh4aSA+PSBkYXRhLmxlbmd0aCAtIDEpIHsKICAgICAgICAgIHhpID0gZGF0YS5sZW5ndGggLSAxOwogICAgICAgIH0KCiAgICAgICAgaWYgKHlpID49IGRhdGFbMF0ubGVuZ3RoIC0gMSkgewogICAgICAgICAgeWkgPSBkYXRhWzBdLmxlbmd0aCAtIDE7CiAgICAgICAgfQogICAgICB9IC8vIEJhaWwgb3V0IGlmIHdlIGFyZSBvdXQgb2YgdGhlIHRlcnJhaW4KCgogICAgICBpZiAoeGkgPCAwIHx8IHlpIDwgMCB8fCB4aSA+PSBkYXRhLmxlbmd0aCAtIDEgfHwgeWkgPj0gZGF0YVswXS5sZW5ndGggLSAxKSB7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9CgogICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICBnZXRUcmlhbmdsZUF0KHgsIHksIGVkZ2VDbGFtcCwgYSwgYiwgYykgewogICAgICBjb25zdCBpZHggPSBnZXRIZWlnaHRBdF9pZHg7CiAgICAgIHRoaXMuZ2V0SW5kZXhPZlBvc2l0aW9uKHgsIHksIGlkeCwgZWRnZUNsYW1wKTsKICAgICAgbGV0IHhpID0gaWR4WzBdOwogICAgICBsZXQgeWkgPSBpZHhbMV07CiAgICAgIGNvbnN0IGRhdGEgPSB0aGlzLmRhdGE7CgogICAgICBpZiAoZWRnZUNsYW1wKSB7CiAgICAgICAgeGkgPSBNYXRoLm1pbihkYXRhLmxlbmd0aCAtIDIsIE1hdGgubWF4KDAsIHhpKSk7CiAgICAgICAgeWkgPSBNYXRoLm1pbihkYXRhWzBdLmxlbmd0aCAtIDIsIE1hdGgubWF4KDAsIHlpKSk7CiAgICAgIH0KCiAgICAgIGNvbnN0IGVsZW1lbnRTaXplID0gdGhpcy5lbGVtZW50U2l6ZTsKICAgICAgY29uc3QgbG93ZXJEaXN0MiA9ICh4IC8gZWxlbWVudFNpemUgLSB4aSkgKiogMiArICh5IC8gZWxlbWVudFNpemUgLSB5aSkgKiogMjsKICAgICAgY29uc3QgdXBwZXJEaXN0MiA9ICh4IC8gZWxlbWVudFNpemUgLSAoeGkgKyAxKSkgKiogMiArICh5IC8gZWxlbWVudFNpemUgLSAoeWkgKyAxKSkgKiogMjsKICAgICAgY29uc3QgdXBwZXIgPSBsb3dlckRpc3QyID4gdXBwZXJEaXN0MjsKICAgICAgdGhpcy5nZXRUcmlhbmdsZSh4aSwgeWksIHVwcGVyLCBhLCBiLCBjKTsKICAgICAgcmV0dXJuIHVwcGVyOwogICAgfQoKICAgIGdldE5vcm1hbEF0KHgsIHksIGVkZ2VDbGFtcCwgcmVzdWx0KSB7CiAgICAgIGNvbnN0IGEgPSBnZXROb3JtYWxBdF9hOwogICAgICBjb25zdCBiID0gZ2V0Tm9ybWFsQXRfYjsKICAgICAgY29uc3QgYyA9IGdldE5vcm1hbEF0X2M7CiAgICAgIGNvbnN0IGUwID0gZ2V0Tm9ybWFsQXRfZTA7CiAgICAgIGNvbnN0IGUxID0gZ2V0Tm9ybWFsQXRfZTE7CiAgICAgIHRoaXMuZ2V0VHJpYW5nbGVBdCh4LCB5LCBlZGdlQ2xhbXAsIGEsIGIsIGMpOwogICAgICBiLnZzdWIoYSwgZTApOwogICAgICBjLnZzdWIoYSwgZTEpOwogICAgICBlMC5jcm9zcyhlMSwgcmVzdWx0KTsKICAgICAgcmVzdWx0Lm5vcm1hbGl6ZSgpOwogICAgfQogICAgLyoqCiAgICAgKiBHZXQgYW4gQUFCQiBvZiBhIHNxdWFyZSBpbiB0aGUgaGVpZ2h0ZmllbGQKICAgICAqIEBwYXJhbSB4aQogICAgICogQHBhcmFtIHlpCiAgICAgKiBAcGFyYW0gcmVzdWx0CiAgICAgKi8KCgogICAgZ2V0QWFiYkF0SW5kZXgoeGksIHlpLCBfcmVmKSB7CiAgICAgIGxldCB7CiAgICAgICAgbG93ZXJCb3VuZCwKICAgICAgICB1cHBlckJvdW5kCiAgICAgIH0gPSBfcmVmOwogICAgICBjb25zdCBkYXRhID0gdGhpcy5kYXRhOwogICAgICBjb25zdCBlbGVtZW50U2l6ZSA9IHRoaXMuZWxlbWVudFNpemU7CiAgICAgIGxvd2VyQm91bmQuc2V0KHhpICogZWxlbWVudFNpemUsIHlpICogZWxlbWVudFNpemUsIGRhdGFbeGldW3lpXSk7CiAgICAgIHVwcGVyQm91bmQuc2V0KCh4aSArIDEpICogZWxlbWVudFNpemUsICh5aSArIDEpICogZWxlbWVudFNpemUsIGRhdGFbeGkgKyAxXVt5aSArIDFdKTsKICAgIH0KICAgIC8qKgogICAgICogR2V0IHRoZSBoZWlnaHQgaW4gdGhlIGhlaWdodGZpZWxkIGF0IGEgZ2l2ZW4gcG9zaXRpb24KICAgICAqLwoKCiAgICBnZXRIZWlnaHRBdCh4LCB5LCBlZGdlQ2xhbXApIHsKICAgICAgY29uc3QgZGF0YSA9IHRoaXMuZGF0YTsKICAgICAgY29uc3QgYSA9IGdldEhlaWdodEF0X2E7CiAgICAgIGNvbnN0IGIgPSBnZXRIZWlnaHRBdF9iOwogICAgICBjb25zdCBjID0gZ2V0SGVpZ2h0QXRfYzsKICAgICAgY29uc3QgaWR4ID0gZ2V0SGVpZ2h0QXRfaWR4OwogICAgICB0aGlzLmdldEluZGV4T2ZQb3NpdGlvbih4LCB5LCBpZHgsIGVkZ2VDbGFtcCk7CiAgICAgIGxldCB4aSA9IGlkeFswXTsKICAgICAgbGV0IHlpID0gaWR4WzFdOwoKICAgICAgaWYgKGVkZ2VDbGFtcCkgewogICAgICAgIHhpID0gTWF0aC5taW4oZGF0YS5sZW5ndGggLSAyLCBNYXRoLm1heCgwLCB4aSkpOwogICAgICAgIHlpID0gTWF0aC5taW4oZGF0YVswXS5sZW5ndGggLSAyLCBNYXRoLm1heCgwLCB5aSkpOwogICAgICB9CgogICAgICBjb25zdCB1cHBlciA9IHRoaXMuZ2V0VHJpYW5nbGVBdCh4LCB5LCBlZGdlQ2xhbXAsIGEsIGIsIGMpOwogICAgICBiYXJ5Y2VudHJpY1dlaWdodHMoeCwgeSwgYS54LCBhLnksIGIueCwgYi55LCBjLngsIGMueSwgZ2V0SGVpZ2h0QXRfd2VpZ2h0cyk7CiAgICAgIGNvbnN0IHcgPSBnZXRIZWlnaHRBdF93ZWlnaHRzOwoKICAgICAgaWYgKHVwcGVyKSB7CiAgICAgICAgLy8gVG9wIHRyaWFuZ2xlIHZlcnRzCiAgICAgICAgcmV0dXJuIGRhdGFbeGkgKyAxXVt5aSArIDFdICogdy54ICsgZGF0YVt4aV1beWkgKyAxXSAqIHcueSArIGRhdGFbeGkgKyAxXVt5aV0gKiB3Lno7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgLy8gVG9wIHRyaWFuZ2xlIHZlcnRzCiAgICAgICAgcmV0dXJuIGRhdGFbeGldW3lpXSAqIHcueCArIGRhdGFbeGkgKyAxXVt5aV0gKiB3LnkgKyBkYXRhW3hpXVt5aSArIDFdICogdy56OwogICAgICB9CiAgICB9CgogICAgZ2V0Q2FjaGVDb252ZXhUcmlhbmdsZVBpbGxhcktleSh4aSwgeWksIGdldFVwcGVyVHJpYW5nbGUpIHsKICAgICAgcmV0dXJuIHhpICsgIl8iICsgeWkgKyAiXyIgKyAoZ2V0VXBwZXJUcmlhbmdsZSA/IDEgOiAwKTsKICAgIH0KCiAgICBnZXRDYWNoZWRDb252ZXhUcmlhbmdsZVBpbGxhcih4aSwgeWksIGdldFVwcGVyVHJpYW5nbGUpIHsKICAgICAgcmV0dXJuIHRoaXMuX2NhY2hlZFBpbGxhcnNbdGhpcy5nZXRDYWNoZUNvbnZleFRyaWFuZ2xlUGlsbGFyS2V5KHhpLCB5aSwgZ2V0VXBwZXJUcmlhbmdsZSldOwogICAgfQoKICAgIHNldENhY2hlZENvbnZleFRyaWFuZ2xlUGlsbGFyKHhpLCB5aSwgZ2V0VXBwZXJUcmlhbmdsZSwgY29udmV4LCBvZmZzZXQpIHsKICAgICAgdGhpcy5fY2FjaGVkUGlsbGFyc1t0aGlzLmdldENhY2hlQ29udmV4VHJpYW5nbGVQaWxsYXJLZXkoeGksIHlpLCBnZXRVcHBlclRyaWFuZ2xlKV0gPSB7CiAgICAgICAgY29udmV4LAogICAgICAgIG9mZnNldAogICAgICB9OwogICAgfQoKICAgIGNsZWFyQ2FjaGVkQ29udmV4VHJpYW5nbGVQaWxsYXIoeGksIHlpLCBnZXRVcHBlclRyaWFuZ2xlKSB7CiAgICAgIGRlbGV0ZSB0aGlzLl9jYWNoZWRQaWxsYXJzW3RoaXMuZ2V0Q2FjaGVDb252ZXhUcmlhbmdsZVBpbGxhcktleSh4aSwgeWksIGdldFVwcGVyVHJpYW5nbGUpXTsKICAgIH0KICAgIC8qKgogICAgICogR2V0IGEgdHJpYW5nbGUgZnJvbSB0aGUgaGVpZ2h0ZmllbGQKICAgICAqLwoKCiAgICBnZXRUcmlhbmdsZSh4aSwgeWksIHVwcGVyLCBhLCBiLCBjKSB7CiAgICAgIGNvbnN0IGRhdGEgPSB0aGlzLmRhdGE7CiAgICAgIGNvbnN0IGVsZW1lbnRTaXplID0gdGhpcy5lbGVtZW50U2l6ZTsKCiAgICAgIGlmICh1cHBlcikgewogICAgICAgIC8vIFRvcCB0cmlhbmdsZSB2ZXJ0cwogICAgICAgIGEuc2V0KCh4aSArIDEpICogZWxlbWVudFNpemUsICh5aSArIDEpICogZWxlbWVudFNpemUsIGRhdGFbeGkgKyAxXVt5aSArIDFdKTsKICAgICAgICBiLnNldCh4aSAqIGVsZW1lbnRTaXplLCAoeWkgKyAxKSAqIGVsZW1lbnRTaXplLCBkYXRhW3hpXVt5aSArIDFdKTsKICAgICAgICBjLnNldCgoeGkgKyAxKSAqIGVsZW1lbnRTaXplLCB5aSAqIGVsZW1lbnRTaXplLCBkYXRhW3hpICsgMV1beWldKTsKICAgICAgfSBlbHNlIHsKICAgICAgICAvLyBUb3AgdHJpYW5nbGUgdmVydHMKICAgICAgICBhLnNldCh4aSAqIGVsZW1lbnRTaXplLCB5aSAqIGVsZW1lbnRTaXplLCBkYXRhW3hpXVt5aV0pOwogICAgICAgIGIuc2V0KCh4aSArIDEpICogZWxlbWVudFNpemUsIHlpICogZWxlbWVudFNpemUsIGRhdGFbeGkgKyAxXVt5aV0pOwogICAgICAgIGMuc2V0KHhpICogZWxlbWVudFNpemUsICh5aSArIDEpICogZWxlbWVudFNpemUsIGRhdGFbeGldW3lpICsgMV0pOwogICAgICB9CiAgICB9CiAgICAvKioKICAgICAqIEdldCBhIHRyaWFuZ2xlIGluIHRoZSB0ZXJyYWluIGluIHRoZSBmb3JtIG9mIGEgdHJpYW5ndWxhciBjb252ZXggc2hhcGUuCiAgICAgKi8KCgogICAgZ2V0Q29udmV4VHJpYW5nbGVQaWxsYXIoeGksIHlpLCBnZXRVcHBlclRyaWFuZ2xlKSB7CiAgICAgIGxldCByZXN1bHQgPSB0aGlzLnBpbGxhckNvbnZleDsKICAgICAgbGV0IG9mZnNldFJlc3VsdCA9IHRoaXMucGlsbGFyT2Zmc2V0OwoKICAgICAgaWYgKHRoaXMuY2FjaGVFbmFibGVkKSB7CiAgICAgICAgY29uc3QgZGF0YSA9IHRoaXMuZ2V0Q2FjaGVkQ29udmV4VHJpYW5nbGVQaWxsYXIoeGksIHlpLCBnZXRVcHBlclRyaWFuZ2xlKTsKCiAgICAgICAgaWYgKGRhdGEpIHsKICAgICAgICAgIHRoaXMucGlsbGFyQ29udmV4ID0gZGF0YS5jb252ZXg7CiAgICAgICAgICB0aGlzLnBpbGxhck9mZnNldCA9IGRhdGEub2Zmc2V0OwogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KCiAgICAgICAgcmVzdWx0ID0gbmV3IENvbnZleFBvbHloZWRyb24oKTsKICAgICAgICBvZmZzZXRSZXN1bHQgPSBuZXcgVmVjMygpOwogICAgICAgIHRoaXMucGlsbGFyQ29udmV4ID0gcmVzdWx0OwogICAgICAgIHRoaXMucGlsbGFyT2Zmc2V0ID0gb2Zmc2V0UmVzdWx0OwogICAgICB9CgogICAgICBjb25zdCBkYXRhID0gdGhpcy5kYXRhOwogICAgICBjb25zdCBlbGVtZW50U2l6ZSA9IHRoaXMuZWxlbWVudFNpemU7CiAgICAgIGNvbnN0IGZhY2VzID0gcmVzdWx0LmZhY2VzOyAvLyBSZXVzZSB2ZXJ0cyBpZiBwb3NzaWJsZQoKICAgICAgcmVzdWx0LnZlcnRpY2VzLmxlbmd0aCA9IDY7CgogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDY7IGkrKykgewogICAgICAgIGlmICghcmVzdWx0LnZlcnRpY2VzW2ldKSB7CiAgICAgICAgICByZXN1bHQudmVydGljZXNbaV0gPSBuZXcgVmVjMygpOwogICAgICAgIH0KICAgICAgfSAvLyBSZXVzZSBmYWNlcyBpZiBwb3NzaWJsZQoKCiAgICAgIGZhY2VzLmxlbmd0aCA9IDU7CgogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDU7IGkrKykgewogICAgICAgIGlmICghZmFjZXNbaV0pIHsKICAgICAgICAgIGZhY2VzW2ldID0gW107CiAgICAgICAgfQogICAgICB9CgogICAgICBjb25zdCB2ZXJ0cyA9IHJlc3VsdC52ZXJ0aWNlczsKICAgICAgY29uc3QgaCA9IChNYXRoLm1pbihkYXRhW3hpXVt5aV0sIGRhdGFbeGkgKyAxXVt5aV0sIGRhdGFbeGldW3lpICsgMV0sIGRhdGFbeGkgKyAxXVt5aSArIDFdKSAtIHRoaXMubWluVmFsdWUpIC8gMiArIHRoaXMubWluVmFsdWU7CgogICAgICBpZiAoIWdldFVwcGVyVHJpYW5nbGUpIHsKICAgICAgICAvLyBDZW50ZXIgb2YgdGhlIHRyaWFuZ2xlIHBpbGxhciAtIGFsbCBwb2x5Z29ucyBhcmUgZ2l2ZW4gcmVsYXRpdmUgdG8gdGhpcyBvbmUKICAgICAgICBvZmZzZXRSZXN1bHQuc2V0KCh4aSArIDAuMjUpICogZWxlbWVudFNpemUsIC8vIHNvcnQgb2YgY2VudGVyIG9mIGEgdHJpYW5nbGUKICAgICAgICAoeWkgKyAwLjI1KSAqIGVsZW1lbnRTaXplLCBoIC8vIHZlcnRpY2FsIGNlbnRlcgogICAgICAgICk7IC8vIFRvcCB0cmlhbmdsZSB2ZXJ0cwoKICAgICAgICB2ZXJ0c1swXS5zZXQoLTAuMjUgKiBlbGVtZW50U2l6ZSwgLTAuMjUgKiBlbGVtZW50U2l6ZSwgZGF0YVt4aV1beWldIC0gaCk7CiAgICAgICAgdmVydHNbMV0uc2V0KDAuNzUgKiBlbGVtZW50U2l6ZSwgLTAuMjUgKiBlbGVtZW50U2l6ZSwgZGF0YVt4aSArIDFdW3lpXSAtIGgpOwogICAgICAgIHZlcnRzWzJdLnNldCgtMC4yNSAqIGVsZW1lbnRTaXplLCAwLjc1ICogZWxlbWVudFNpemUsIGRhdGFbeGldW3lpICsgMV0gLSBoKTsgLy8gYm90dG9tIHRyaWFuZ2xlIHZlcnRzCgogICAgICAgIHZlcnRzWzNdLnNldCgtMC4yNSAqIGVsZW1lbnRTaXplLCAtMC4yNSAqIGVsZW1lbnRTaXplLCAtTWF0aC5hYnMoaCkgLSAxKTsKICAgICAgICB2ZXJ0c1s0XS5zZXQoMC43NSAqIGVsZW1lbnRTaXplLCAtMC4yNSAqIGVsZW1lbnRTaXplLCAtTWF0aC5hYnMoaCkgLSAxKTsKICAgICAgICB2ZXJ0c1s1XS5zZXQoLTAuMjUgKiBlbGVtZW50U2l6ZSwgMC43NSAqIGVsZW1lbnRTaXplLCAtTWF0aC5hYnMoaCkgLSAxKTsgLy8gdG9wIHRyaWFuZ2xlCgogICAgICAgIGZhY2VzWzBdWzBdID0gMDsKICAgICAgICBmYWNlc1swXVsxXSA9IDE7CiAgICAgICAgZmFjZXNbMF1bMl0gPSAyOyAvLyBib3R0b20gdHJpYW5nbGUKCiAgICAgICAgZmFjZXNbMV1bMF0gPSA1OwogICAgICAgIGZhY2VzWzFdWzFdID0gNDsKICAgICAgICBmYWNlc1sxXVsyXSA9IDM7IC8vIC14IGZhY2luZyBxdWFkCgogICAgICAgIGZhY2VzWzJdWzBdID0gMDsKICAgICAgICBmYWNlc1syXVsxXSA9IDI7CiAgICAgICAgZmFjZXNbMl1bMl0gPSA1OwogICAgICAgIGZhY2VzWzJdWzNdID0gMzsgLy8gLXkgZmFjaW5nIHF1YWQKCiAgICAgICAgZmFjZXNbM11bMF0gPSAxOwogICAgICAgIGZhY2VzWzNdWzFdID0gMDsKICAgICAgICBmYWNlc1szXVsyXSA9IDM7CiAgICAgICAgZmFjZXNbM11bM10gPSA0OyAvLyAreHkgZmFjaW5nIHF1YWQKCiAgICAgICAgZmFjZXNbNF1bMF0gPSA0OwogICAgICAgIGZhY2VzWzRdWzFdID0gNTsKICAgICAgICBmYWNlc1s0XVsyXSA9IDI7CiAgICAgICAgZmFjZXNbNF1bM10gPSAxOwogICAgICB9IGVsc2UgewogICAgICAgIC8vIENlbnRlciBvZiB0aGUgdHJpYW5nbGUgcGlsbGFyIC0gYWxsIHBvbHlnb25zIGFyZSBnaXZlbiByZWxhdGl2ZSB0byB0aGlzIG9uZQogICAgICAgIG9mZnNldFJlc3VsdC5zZXQoKHhpICsgMC43NSkgKiBlbGVtZW50U2l6ZSwgLy8gc29ydCBvZiBjZW50ZXIgb2YgYSB0cmlhbmdsZQogICAgICAgICh5aSArIDAuNzUpICogZWxlbWVudFNpemUsIGggLy8gdmVydGljYWwgY2VudGVyCiAgICAgICAgKTsgLy8gVG9wIHRyaWFuZ2xlIHZlcnRzCgogICAgICAgIHZlcnRzWzBdLnNldCgwLjI1ICogZWxlbWVudFNpemUsIDAuMjUgKiBlbGVtZW50U2l6ZSwgZGF0YVt4aSArIDFdW3lpICsgMV0gLSBoKTsKICAgICAgICB2ZXJ0c1sxXS5zZXQoLTAuNzUgKiBlbGVtZW50U2l6ZSwgMC4yNSAqIGVsZW1lbnRTaXplLCBkYXRhW3hpXVt5aSArIDFdIC0gaCk7CiAgICAgICAgdmVydHNbMl0uc2V0KDAuMjUgKiBlbGVtZW50U2l6ZSwgLTAuNzUgKiBlbGVtZW50U2l6ZSwgZGF0YVt4aSArIDFdW3lpXSAtIGgpOyAvLyBib3R0b20gdHJpYW5nbGUgdmVydHMKCiAgICAgICAgdmVydHNbM10uc2V0KDAuMjUgKiBlbGVtZW50U2l6ZSwgMC4yNSAqIGVsZW1lbnRTaXplLCAtTWF0aC5hYnMoaCkgLSAxKTsKICAgICAgICB2ZXJ0c1s0XS5zZXQoLTAuNzUgKiBlbGVtZW50U2l6ZSwgMC4yNSAqIGVsZW1lbnRTaXplLCAtTWF0aC5hYnMoaCkgLSAxKTsKICAgICAgICB2ZXJ0c1s1XS5zZXQoMC4yNSAqIGVsZW1lbnRTaXplLCAtMC43NSAqIGVsZW1lbnRTaXplLCAtTWF0aC5hYnMoaCkgLSAxKTsgLy8gVG9wIHRyaWFuZ2xlCgogICAgICAgIGZhY2VzWzBdWzBdID0gMDsKICAgICAgICBmYWNlc1swXVsxXSA9IDE7CiAgICAgICAgZmFjZXNbMF1bMl0gPSAyOyAvLyBib3R0b20gdHJpYW5nbGUKCiAgICAgICAgZmFjZXNbMV1bMF0gPSA1OwogICAgICAgIGZhY2VzWzFdWzFdID0gNDsKICAgICAgICBmYWNlc1sxXVsyXSA9IDM7IC8vICt4IGZhY2luZyBxdWFkCgogICAgICAgIGZhY2VzWzJdWzBdID0gMjsKICAgICAgICBmYWNlc1syXVsxXSA9IDU7CiAgICAgICAgZmFjZXNbMl1bMl0gPSAzOwogICAgICAgIGZhY2VzWzJdWzNdID0gMDsgLy8gK3kgZmFjaW5nIHF1YWQKCiAgICAgICAgZmFjZXNbM11bMF0gPSAzOwogICAgICAgIGZhY2VzWzNdWzFdID0gNDsKICAgICAgICBmYWNlc1szXVsyXSA9IDE7CiAgICAgICAgZmFjZXNbM11bM10gPSAwOyAvLyAteHkgZmFjaW5nIHF1YWQKCiAgICAgICAgZmFjZXNbNF1bMF0gPSAxOwogICAgICAgIGZhY2VzWzRdWzFdID0gNDsKICAgICAgICBmYWNlc1s0XVsyXSA9IDU7CiAgICAgICAgZmFjZXNbNF1bM10gPSAyOwogICAgICB9CgogICAgICByZXN1bHQuY29tcHV0ZU5vcm1hbHMoKTsKICAgICAgcmVzdWx0LmNvbXB1dGVFZGdlcygpOwogICAgICByZXN1bHQudXBkYXRlQm91bmRpbmdTcGhlcmVSYWRpdXMoKTsKICAgICAgdGhpcy5zZXRDYWNoZWRDb252ZXhUcmlhbmdsZVBpbGxhcih4aSwgeWksIGdldFVwcGVyVHJpYW5nbGUsIHJlc3VsdCwgb2Zmc2V0UmVzdWx0KTsKICAgIH0KCiAgICBjYWxjdWxhdGVMb2NhbEluZXJ0aWEobWFzcywgdGFyZ2V0KSB7CiAgICAgIGlmICh0YXJnZXQgPT09IHZvaWQgMCkgewogICAgICAgIHRhcmdldCA9IG5ldyBWZWMzKCk7CiAgICAgIH0KCiAgICAgIHRhcmdldC5zZXQoMCwgMCwgMCk7CiAgICAgIHJldHVybiB0YXJnZXQ7CiAgICB9CgogICAgdm9sdW1lKCkgewogICAgICByZXR1cm4gKC8vIFRoZSB0ZXJyYWluIGlzIGluZmluaXRlCiAgICAgICAgTnVtYmVyLk1BWF9WQUxVRQogICAgICApOwogICAgfQoKICAgIGNhbGN1bGF0ZVdvcmxkQUFCQihwb3MsIHF1YXQsIG1pbiwgbWF4KSB7CiAgICAgIC8qKiBAVE9ETyBkbyBpdCBwcm9wZXJseSAqLwogICAgICBtaW4uc2V0KC1OdW1iZXIuTUFYX1ZBTFVFLCAtTnVtYmVyLk1BWF9WQUxVRSwgLU51bWJlci5NQVhfVkFMVUUpOwogICAgICBtYXguc2V0KE51bWJlci5NQVhfVkFMVUUsIE51bWJlci5NQVhfVkFMVUUsIE51bWJlci5NQVhfVkFMVUUpOwogICAgfQoKICAgIHVwZGF0ZUJvdW5kaW5nU3BoZXJlUmFkaXVzKCkgewogICAgICAvLyBVc2UgdGhlIGJvdW5kaW5nIGJveCBvZiB0aGUgbWluL21heCB2YWx1ZXMKICAgICAgY29uc3QgZGF0YSA9IHRoaXMuZGF0YTsKICAgICAgY29uc3QgcyA9IHRoaXMuZWxlbWVudFNpemU7CiAgICAgIHRoaXMuYm91bmRpbmdTcGhlcmVSYWRpdXMgPSBuZXcgVmVjMyhkYXRhLmxlbmd0aCAqIHMsIGRhdGFbMF0ubGVuZ3RoICogcywgTWF0aC5tYXgoTWF0aC5hYnModGhpcy5tYXhWYWx1ZSksIE1hdGguYWJzKHRoaXMubWluVmFsdWUpKSkubGVuZ3RoKCk7CiAgICB9CiAgICAvKioKICAgICAqIFNldHMgdGhlIGhlaWdodCB2YWx1ZXMgZnJvbSBhbiBpbWFnZS4gQ3VycmVudGx5IG9ubHkgc3VwcG9ydGVkIGluIGJyb3dzZXIuCiAgICAgKi8KCgogICAgc2V0SGVpZ2h0c0Zyb21JbWFnZShpbWFnZSwgc2NhbGUpIHsKICAgICAgY29uc3QgewogICAgICAgIHgsCiAgICAgICAgeiwKICAgICAgICB5CiAgICAgIH0gPSBzY2FsZTsKICAgICAgY29uc3QgY2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnY2FudmFzJyk7CiAgICAgIGNhbnZhcy53aWR0aCA9IGltYWdlLndpZHRoOwogICAgICBjYW52YXMuaGVpZ2h0ID0gaW1hZ2UuaGVpZ2h0OwogICAgICBjb25zdCBjb250ZXh0ID0gY2FudmFzLmdldENvbnRleHQoJzJkJyk7CiAgICAgIGNvbnRleHQuZHJhd0ltYWdlKGltYWdlLCAwLCAwKTsKICAgICAgY29uc3QgaW1hZ2VEYXRhID0gY29udGV4dC5nZXRJbWFnZURhdGEoMCwgMCwgaW1hZ2Uud2lkdGgsIGltYWdlLmhlaWdodCk7CiAgICAgIGNvbnN0IG1hdHJpeCA9IHRoaXMuZGF0YTsKICAgICAgbWF0cml4Lmxlbmd0aCA9IDA7CiAgICAgIHRoaXMuZWxlbWVudFNpemUgPSBNYXRoLmFicyh4KSAvIGltYWdlRGF0YS53aWR0aDsKCiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgaW1hZ2VEYXRhLmhlaWdodDsgaSsrKSB7CiAgICAgICAgY29uc3Qgcm93ID0gW107CgogICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgaW1hZ2VEYXRhLndpZHRoOyBqKyspIHsKICAgICAgICAgIGNvbnN0IGEgPSBpbWFnZURhdGEuZGF0YVsoaSAqIGltYWdlRGF0YS5oZWlnaHQgKyBqKSAqIDRdOwogICAgICAgICAgY29uc3QgYiA9IGltYWdlRGF0YS5kYXRhWyhpICogaW1hZ2VEYXRhLmhlaWdodCArIGopICogNCArIDFdOwogICAgICAgICAgY29uc3QgYyA9IGltYWdlRGF0YS5kYXRhWyhpICogaW1hZ2VEYXRhLmhlaWdodCArIGopICogNCArIDJdOwogICAgICAgICAgY29uc3QgaGVpZ2h0ID0gKGEgKyBiICsgYykgLyA0IC8gMjU1ICogejsKCiAgICAgICAgICBpZiAoeCA8IDApIHsKICAgICAgICAgICAgcm93LnB1c2goaGVpZ2h0KTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHJvdy51bnNoaWZ0KGhlaWdodCk7CiAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBpZiAoeSA8IDApIHsKICAgICAgICAgIG1hdHJpeC51bnNoaWZ0KHJvdyk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIG1hdHJpeC5wdXNoKHJvdyk7CiAgICAgICAgfQogICAgICB9CgogICAgICB0aGlzLnVwZGF0ZU1heFZhbHVlKCk7CiAgICAgIHRoaXMudXBkYXRlTWluVmFsdWUoKTsKICAgICAgdGhpcy51cGRhdGUoKTsKICAgIH0KCiAgfQoKICBjb25zdCBnZXRIZWlnaHRBdF9pZHggPSBbXTsKICBjb25zdCBnZXRIZWlnaHRBdF93ZWlnaHRzID0gbmV3IFZlYzMoKTsKICBjb25zdCBnZXRIZWlnaHRBdF9hID0gbmV3IFZlYzMoKTsKICBjb25zdCBnZXRIZWlnaHRBdF9iID0gbmV3IFZlYzMoKTsKICBjb25zdCBnZXRIZWlnaHRBdF9jID0gbmV3IFZlYzMoKTsKICBjb25zdCBnZXROb3JtYWxBdF9hID0gbmV3IFZlYzMoKTsKICBjb25zdCBnZXROb3JtYWxBdF9iID0gbmV3IFZlYzMoKTsKICBjb25zdCBnZXROb3JtYWxBdF9jID0gbmV3IFZlYzMoKTsKICBjb25zdCBnZXROb3JtYWxBdF9lMCA9IG5ldyBWZWMzKCk7CiAgY29uc3QgZ2V0Tm9ybWFsQXRfZTEgPSBuZXcgVmVjMygpOyAvLyBmcm9tIGh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0JhcnljZW50cmljX2Nvb3JkaW5hdGVfc3lzdGVtCgogIGZ1bmN0aW9uIGJhcnljZW50cmljV2VpZ2h0cyh4LCB5LCBheCwgYXksIGJ4LCBieSwgY3gsIGN5LCByZXN1bHQpIHsKICAgIHJlc3VsdC54ID0gKChieSAtIGN5KSAqICh4IC0gY3gpICsgKGN4IC0gYngpICogKHkgLSBjeSkpIC8gKChieSAtIGN5KSAqIChheCAtIGN4KSArIChjeCAtIGJ4KSAqIChheSAtIGN5KSk7CiAgICByZXN1bHQueSA9ICgoY3kgLSBheSkgKiAoeCAtIGN4KSArIChheCAtIGN4KSAqICh5IC0gY3kpKSAvICgoYnkgLSBjeSkgKiAoYXggLSBjeCkgKyAoY3ggLSBieCkgKiAoYXkgLSBjeSkpOwogICAgcmVzdWx0LnogPSAxIC0gcmVzdWx0LnggLSByZXN1bHQueTsKICB9CiAgLyoqCiAgICogT2N0cmVlTm9kZQogICAqLwoKCiAgY2xhc3MgT2N0cmVlTm9kZSB7CiAgICAvKiogVGhlIHJvb3Qgbm9kZSAqLwoKICAgIC8qKiBCb3VuZGFyeSBvZiB0aGlzIG5vZGUgKi8KCiAgICAvKiogQ29udGFpbmVkIGRhdGEgYXQgdGhlIGN1cnJlbnQgbm9kZSBsZXZlbCAqLwoKICAgIC8qKiBDaGlsZHJlbiB0byB0aGlzIG5vZGUgKi8KICAgIGNvbnN0cnVjdG9yKG9wdGlvbnMpIHsKICAgICAgaWYgKG9wdGlvbnMgPT09IHZvaWQgMCkgewogICAgICAgIG9wdGlvbnMgPSB7fTsKICAgICAgfQoKICAgICAgdGhpcy5yb290ID0gdm9pZCAwOwogICAgICB0aGlzLmFhYmIgPSB2b2lkIDA7CiAgICAgIHRoaXMuZGF0YSA9IHZvaWQgMDsKICAgICAgdGhpcy5jaGlsZHJlbiA9IHZvaWQgMDsKICAgICAgdGhpcy5yb290ID0gb3B0aW9ucy5yb290IHx8IG51bGw7CiAgICAgIHRoaXMuYWFiYiA9IG9wdGlvbnMuYWFiYiA/IG9wdGlvbnMuYWFiYi5jbG9uZSgpIDogbmV3IEFBQkIoKTsKICAgICAgdGhpcy5kYXRhID0gW107CiAgICAgIHRoaXMuY2hpbGRyZW4gPSBbXTsKICAgIH0KICAgIC8qKgogICAgICogcmVzZXQKICAgICAqLwoKCiAgICByZXNldCgpIHsKICAgICAgdGhpcy5jaGlsZHJlbi5sZW5ndGggPSB0aGlzLmRhdGEubGVuZ3RoID0gMDsKICAgIH0KICAgIC8qKgogICAgICogSW5zZXJ0IGRhdGEgaW50byB0aGlzIG5vZGUKICAgICAqIEByZXR1cm4gVHJ1ZSBpZiBzdWNjZXNzZnVsLCBvdGhlcndpc2UgZmFsc2UKICAgICAqLwoKCiAgICBpbnNlcnQoYWFiYiwgZWxlbWVudERhdGEsIGxldmVsKSB7CiAgICAgIGlmIChsZXZlbCA9PT0gdm9pZCAwKSB7CiAgICAgICAgbGV2ZWwgPSAwOwogICAgICB9CgogICAgICBjb25zdCBub2RlRGF0YSA9IHRoaXMuZGF0YTsgLy8gSWdub3JlIG9iamVjdHMgdGhhdCBkbyBub3QgYmVsb25nIGluIHRoaXMgbm9kZQoKICAgICAgaWYgKCF0aGlzLmFhYmIuY29udGFpbnMoYWFiYikpIHsKICAgICAgICByZXR1cm4gZmFsc2U7IC8vIG9iamVjdCBjYW5ub3QgYmUgYWRkZWQKICAgICAgfQoKICAgICAgY29uc3QgY2hpbGRyZW4gPSB0aGlzLmNoaWxkcmVuOwogICAgICBjb25zdCBtYXhEZXB0aCA9IHRoaXMubWF4RGVwdGggfHwgdGhpcy5yb290Lm1heERlcHRoOwoKICAgICAgaWYgKGxldmVsIDwgbWF4RGVwdGgpIHsKICAgICAgICAvLyBTdWJkaXZpZGUgaWYgdGhlcmUgYXJlIG5vIGNoaWxkcmVuIHlldAogICAgICAgIGxldCBzdWJkaXZpZGVkID0gZmFsc2U7CgogICAgICAgIGlmICghY2hpbGRyZW4ubGVuZ3RoKSB7CiAgICAgICAgICB0aGlzLnN1YmRpdmlkZSgpOwogICAgICAgICAgc3ViZGl2aWRlZCA9IHRydWU7CiAgICAgICAgfSAvLyBhZGQgdG8gd2hpY2hldmVyIG5vZGUgd2lsbCBhY2NlcHQgaXQKCgogICAgICAgIGZvciAobGV0IGkgPSAwOyBpICE9PSA4OyBpKyspIHsKICAgICAgICAgIGlmIChjaGlsZHJlbltpXS5pbnNlcnQoYWFiYiwgZWxlbWVudERhdGEsIGxldmVsICsgMSkpIHsKICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBpZiAoc3ViZGl2aWRlZCkgewogICAgICAgICAgLy8gTm8gY2hpbGRyZW4gYWNjZXB0ZWQhIE1pZ2h0IGFzIHdlbGwganVzdCByZW1vdmUgZW0gc2luY2UgdGhleSBjb250YWluIG5vbmUKICAgICAgICAgIGNoaWxkcmVuLmxlbmd0aCA9IDA7CiAgICAgICAgfQogICAgICB9IC8vIFRvbyBkZWVwLCBvciBjaGlsZHJlbiBkaWRudCB3YW50IGl0LiBhZGQgaXQgaW4gY3VycmVudCBub2RlCgoKICAgICAgbm9kZURhdGEucHVzaChlbGVtZW50RGF0YSk7CiAgICAgIHJldHVybiB0cnVlOwogICAgfQogICAgLyoqCiAgICAgKiBDcmVhdGUgOCBlcXVhbGx5IHNpemVkIGNoaWxkcmVuIG5vZGVzIGFuZCBwdXQgdGhlbSBpbiB0aGUgYGNoaWxkcmVuYCBhcnJheS4KICAgICAqLwoKCiAgICBzdWJkaXZpZGUoKSB7CiAgICAgIGNvbnN0IGFhYmIgPSB0aGlzLmFhYmI7CiAgICAgIGNvbnN0IGwgPSBhYWJiLmxvd2VyQm91bmQ7CiAgICAgIGNvbnN0IHUgPSBhYWJiLnVwcGVyQm91bmQ7CiAgICAgIGNvbnN0IGNoaWxkcmVuID0gdGhpcy5jaGlsZHJlbjsKICAgICAgY2hpbGRyZW4ucHVzaChuZXcgT2N0cmVlTm9kZSh7CiAgICAgICAgYWFiYjogbmV3IEFBQkIoewogICAgICAgICAgbG93ZXJCb3VuZDogbmV3IFZlYzMoMCwgMCwgMCkKICAgICAgICB9KQogICAgICB9KSwgbmV3IE9jdHJlZU5vZGUoewogICAgICAgIGFhYmI6IG5ldyBBQUJCKHsKICAgICAgICAgIGxvd2VyQm91bmQ6IG5ldyBWZWMzKDEsIDAsIDApCiAgICAgICAgfSkKICAgICAgfSksIG5ldyBPY3RyZWVOb2RlKHsKICAgICAgICBhYWJiOiBuZXcgQUFCQih7CiAgICAgICAgICBsb3dlckJvdW5kOiBuZXcgVmVjMygxLCAxLCAwKQogICAgICAgIH0pCiAgICAgIH0pLCBuZXcgT2N0cmVlTm9kZSh7CiAgICAgICAgYWFiYjogbmV3IEFBQkIoewogICAgICAgICAgbG93ZXJCb3VuZDogbmV3IFZlYzMoMSwgMSwgMSkKICAgICAgICB9KQogICAgICB9KSwgbmV3IE9jdHJlZU5vZGUoewogICAgICAgIGFhYmI6IG5ldyBBQUJCKHsKICAgICAgICAgIGxvd2VyQm91bmQ6IG5ldyBWZWMzKDAsIDEsIDEpCiAgICAgICAgfSkKICAgICAgfSksIG5ldyBPY3RyZWVOb2RlKHsKICAgICAgICBhYWJiOiBuZXcgQUFCQih7CiAgICAgICAgICBsb3dlckJvdW5kOiBuZXcgVmVjMygwLCAwLCAxKQogICAgICAgIH0pCiAgICAgIH0pLCBuZXcgT2N0cmVlTm9kZSh7CiAgICAgICAgYWFiYjogbmV3IEFBQkIoewogICAgICAgICAgbG93ZXJCb3VuZDogbmV3IFZlYzMoMSwgMCwgMSkKICAgICAgICB9KQogICAgICB9KSwgbmV3IE9jdHJlZU5vZGUoewogICAgICAgIGFhYmI6IG5ldyBBQUJCKHsKICAgICAgICAgIGxvd2VyQm91bmQ6IG5ldyBWZWMzKDAsIDEsIDApCiAgICAgICAgfSkKICAgICAgfSkpOwogICAgICB1LnZzdWIobCwgaGFsZkRpYWdvbmFsKTsKICAgICAgaGFsZkRpYWdvbmFsLnNjYWxlKDAuNSwgaGFsZkRpYWdvbmFsKTsKICAgICAgY29uc3Qgcm9vdCA9IHRoaXMucm9vdCB8fCB0aGlzOwoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgIT09IDg7IGkrKykgewogICAgICAgIGNvbnN0IGNoaWxkID0gY2hpbGRyZW5baV07IC8vIFNldCBjdXJyZW50IG5vZGUgYXMgcm9vdAoKICAgICAgICBjaGlsZC5yb290ID0gcm9vdDsgLy8gQ29tcHV0ZSBib3VuZHMKCiAgICAgICAgY29uc3QgbG93ZXJCb3VuZCA9IGNoaWxkLmFhYmIubG93ZXJCb3VuZDsKICAgICAgICBsb3dlckJvdW5kLnggKj0gaGFsZkRpYWdvbmFsLng7CiAgICAgICAgbG93ZXJCb3VuZC55ICo9IGhhbGZEaWFnb25hbC55OwogICAgICAgIGxvd2VyQm91bmQueiAqPSBoYWxmRGlhZ29uYWwuejsKICAgICAgICBsb3dlckJvdW5kLnZhZGQobCwgbG93ZXJCb3VuZCk7IC8vIFVwcGVyIGJvdW5kIGlzIGFsd2F5cyBsb3dlciBib3VuZCArIGhhbGZEaWFnb25hbAoKICAgICAgICBsb3dlckJvdW5kLnZhZGQoaGFsZkRpYWdvbmFsLCBjaGlsZC5hYWJiLnVwcGVyQm91bmQpOwogICAgICB9CiAgICB9CiAgICAvKioKICAgICAqIEdldCBhbGwgZGF0YSwgcG90ZW50aWFsbHkgd2l0aGluIGFuIEFBQkIKICAgICAqIEByZXR1cm4gVGhlICJyZXN1bHQiIG9iamVjdAogICAgICovCgoKICAgIGFhYmJRdWVyeShhYWJiLCByZXN1bHQpIHsKICAgICAgdGhpcy5kYXRhOyAvLyBhYm9ydCBpZiB0aGUgcmFuZ2UgZG9lcyBub3QgaW50ZXJzZWN0IHRoaXMgbm9kZQogICAgICAvLyBpZiAoIXRoaXMuYWFiYi5vdmVybGFwcyhhYWJiKSl7CiAgICAgIC8vICAgICByZXR1cm4gcmVzdWx0OwogICAgICAvLyB9CiAgICAgIC8vIEFkZCBvYmplY3RzIGF0IHRoaXMgbGV2ZWwKICAgICAgLy8gQXJyYXkucHJvdG90eXBlLnB1c2guYXBwbHkocmVzdWx0LCBub2RlRGF0YSk7CiAgICAgIC8vIEFkZCBjaGlsZCBkYXRhCiAgICAgIC8vIEB0b2RvIHVud3JhcCByZWN1cnNpb24gaW50byBhIHF1ZXVlIC8gbG9vcCwgdGhhdCdzIGZhc3RlciBpbiBKUwoKICAgICAgdGhpcy5jaGlsZHJlbjsgLy8gZm9yIChsZXQgaSA9IDAsIE4gPSB0aGlzLmNoaWxkcmVuLmxlbmd0aDsgaSAhPT0gTjsgaSsrKSB7CiAgICAgIC8vICAgICBjaGlsZHJlbltpXS5hYWJiUXVlcnkoYWFiYiwgcmVzdWx0KTsKICAgICAgLy8gfQoKICAgICAgY29uc3QgcXVldWUgPSBbdGhpc107CgogICAgICB3aGlsZSAocXVldWUubGVuZ3RoKSB7CiAgICAgICAgY29uc3Qgbm9kZSA9IHF1ZXVlLnBvcCgpOwoKICAgICAgICBpZiAobm9kZS5hYWJiLm92ZXJsYXBzKGFhYmIpKSB7CiAgICAgICAgICBBcnJheS5wcm90b3R5cGUucHVzaC5hcHBseShyZXN1bHQsIG5vZGUuZGF0YSk7CiAgICAgICAgfQoKICAgICAgICBBcnJheS5wcm90b3R5cGUucHVzaC5hcHBseShxdWV1ZSwgbm9kZS5jaGlsZHJlbik7CiAgICAgIH0KCiAgICAgIHJldHVybiByZXN1bHQ7CiAgICB9CiAgICAvKioKICAgICAqIEdldCBhbGwgZGF0YSwgcG90ZW50aWFsbHkgaW50ZXJzZWN0ZWQgYnkgYSByYXkuCiAgICAgKiBAcmV0dXJuIFRoZSAicmVzdWx0IiBvYmplY3QKICAgICAqLwoKCiAgICByYXlRdWVyeShyYXksIHRyZWVUcmFuc2Zvcm0sIHJlc3VsdCkgewogICAgICAvLyBVc2UgYWFiYiBxdWVyeSBmb3Igbm93LgoKICAgICAgLyoqIEB0b2RvIGltcGxlbWVudCByZWFsIHJheSBxdWVyeSB3aGljaCBuZWVkcyBsZXNzIGxvb2t1cHMgKi8KICAgICAgcmF5LmdldEFBQkIodG1wQUFCQik7CiAgICAgIHRtcEFBQkIudG9Mb2NhbEZyYW1lKHRyZWVUcmFuc2Zvcm0sIHRtcEFBQkIpOwogICAgICB0aGlzLmFhYmJRdWVyeSh0bXBBQUJCLCByZXN1bHQpOwogICAgICByZXR1cm4gcmVzdWx0OwogICAgfQogICAgLyoqCiAgICAgKiByZW1vdmVFbXB0eU5vZGVzCiAgICAgKi8KCgogICAgcmVtb3ZlRW1wdHlOb2RlcygpIHsKICAgICAgZm9yIChsZXQgaSA9IHRoaXMuY2hpbGRyZW4ubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHsKICAgICAgICB0aGlzLmNoaWxkcmVuW2ldLnJlbW92ZUVtcHR5Tm9kZXMoKTsKCiAgICAgICAgaWYgKCF0aGlzLmNoaWxkcmVuW2ldLmNoaWxkcmVuLmxlbmd0aCAmJiAhdGhpcy5jaGlsZHJlbltpXS5kYXRhLmxlbmd0aCkgewogICAgICAgICAgdGhpcy5jaGlsZHJlbi5zcGxpY2UoaSwgMSk7CiAgICAgICAgfQogICAgICB9CiAgICB9CgogIH0KICAvKioKICAgKiBPY3RyZWUKICAgKi8KCgogIGNsYXNzIE9jdHJlZSBleHRlbmRzIE9jdHJlZU5vZGUgewogICAgLyoqCiAgICAgKiBNYXhpbXVtIHN1YmRpdmlzaW9uIGRlcHRoCiAgICAgKiBAZGVmYXVsdCA4CiAgICAgKi8KCiAgICAvKioKICAgICAqIEBwYXJhbSBhYWJiIFRoZSB0b3RhbCBBQUJCIG9mIHRoZSB0cmVlCiAgICAgKi8KICAgIGNvbnN0cnVjdG9yKGFhYmIsIG9wdGlvbnMpIHsKICAgICAgaWYgKG9wdGlvbnMgPT09IHZvaWQgMCkgewogICAgICAgIG9wdGlvbnMgPSB7fTsKICAgICAgfQoKICAgICAgc3VwZXIoewogICAgICAgIHJvb3Q6IG51bGwsCiAgICAgICAgYWFiYgogICAgICB9KTsKICAgICAgdGhpcy5tYXhEZXB0aCA9IHZvaWQgMDsKICAgICAgdGhpcy5tYXhEZXB0aCA9IHR5cGVvZiBvcHRpb25zLm1heERlcHRoICE9PSAndW5kZWZpbmVkJyA/IG9wdGlvbnMubWF4RGVwdGggOiA4OwogICAgfQoKICB9CgogIGNvbnN0IGhhbGZEaWFnb25hbCA9IG5ldyBWZWMzKCk7CiAgY29uc3QgdG1wQUFCQiA9IG5ldyBBQUJCKCk7CiAgLyoqCiAgICogVHJpbWVzaC4KICAgKiBAZXhhbXBsZQogICAqICAgICAvLyBIb3cgdG8gbWFrZSBhIG1lc2ggd2l0aCBhIHNpbmdsZSB0cmlhbmdsZQogICAqICAgICBjb25zdCB2ZXJ0aWNlcyA9IFsKICAgKiAgICAgICAgIDAsIDAsIDAsIC8vIHZlcnRleCAwCiAgICogICAgICAgICAxLCAwLCAwLCAvLyB2ZXJ0ZXggMQogICAqICAgICAgICAgMCwgMSwgMCAgLy8gdmVydGV4IDIKICAgKiAgICAgXQogICAqICAgICBjb25zdCBpbmRpY2VzID0gWwogICAqICAgICAgICAgMCwgMSwgMiAgLy8gdHJpYW5nbGUgMAogICAqICAgICBdCiAgICogICAgIGNvbnN0IHRyaW1lc2hTaGFwZSA9IG5ldyBDQU5OT04uVHJpbWVzaCh2ZXJ0aWNlcywgaW5kaWNlcykKICAgKi8KCiAgY2xhc3MgVHJpbWVzaCBleHRlbmRzIFNoYXBlIHsKICAgIC8qKgogICAgICogdmVydGljZXMKICAgICAqLwoKICAgIC8qKgogICAgICogQXJyYXkgb2YgaW50ZWdlcnMsIGluZGljYXRpbmcgd2hpY2ggdmVydGljZXMgZWFjaCB0cmlhbmdsZSBjb25zaXN0cyBvZi4gVGhlIGxlbmd0aCBvZiB0aGlzIGFycmF5IGlzIHRodXMgMyB0aW1lcyB0aGUgbnVtYmVyIG9mIHRyaWFuZ2xlcy4KICAgICAqLwoKICAgIC8qKgogICAgICogVGhlIG5vcm1hbHMgZGF0YS4KICAgICAqLwoKICAgIC8qKgogICAgICogVGhlIGxvY2FsIEFBQkIgb2YgdGhlIG1lc2guCiAgICAgKi8KCiAgICAvKioKICAgICAqIFJlZmVyZW5jZXMgdG8gdmVydGV4IHBhaXJzLCBtYWtpbmcgdXAgYWxsIHVuaXF1ZSBlZGdlcyBpbiB0aGUgdHJpbWVzaC4KICAgICAqLwoKICAgIC8qKgogICAgICogTG9jYWwgc2NhbGluZyBvZiB0aGUgbWVzaC4gVXNlIC5zZXRTY2FsZSgpIHRvIHNldCBpdC4KICAgICAqLwoKICAgIC8qKgogICAgICogVGhlIGluZGV4ZWQgdHJpYW5nbGVzLiBVc2UgLnVwZGF0ZVRyZWUoKSB0byB1cGRhdGUgaXQuCiAgICAgKi8KICAgIGNvbnN0cnVjdG9yKHZlcnRpY2VzLCBpbmRpY2VzKSB7CiAgICAgIHN1cGVyKHsKICAgICAgICB0eXBlOiBTaGFwZS50eXBlcy5UUklNRVNICiAgICAgIH0pOwogICAgICB0aGlzLnZlcnRpY2VzID0gdm9pZCAwOwogICAgICB0aGlzLmluZGljZXMgPSB2b2lkIDA7CiAgICAgIHRoaXMubm9ybWFscyA9IHZvaWQgMDsKICAgICAgdGhpcy5hYWJiID0gdm9pZCAwOwogICAgICB0aGlzLmVkZ2VzID0gdm9pZCAwOwogICAgICB0aGlzLnNjYWxlID0gdm9pZCAwOwogICAgICB0aGlzLnRyZWUgPSB2b2lkIDA7CiAgICAgIHRoaXMudmVydGljZXMgPSBuZXcgRmxvYXQzMkFycmF5KHZlcnRpY2VzKTsKICAgICAgdGhpcy5pbmRpY2VzID0gbmV3IEludDE2QXJyYXkoaW5kaWNlcyk7CiAgICAgIHRoaXMubm9ybWFscyA9IG5ldyBGbG9hdDMyQXJyYXkoaW5kaWNlcy5sZW5ndGgpOwogICAgICB0aGlzLmFhYmIgPSBuZXcgQUFCQigpOwogICAgICB0aGlzLmVkZ2VzID0gbnVsbDsKICAgICAgdGhpcy5zY2FsZSA9IG5ldyBWZWMzKDEsIDEsIDEpOwogICAgICB0aGlzLnRyZWUgPSBuZXcgT2N0cmVlKCk7CiAgICAgIHRoaXMudXBkYXRlRWRnZXMoKTsKICAgICAgdGhpcy51cGRhdGVOb3JtYWxzKCk7CiAgICAgIHRoaXMudXBkYXRlQUFCQigpOwogICAgICB0aGlzLnVwZGF0ZUJvdW5kaW5nU3BoZXJlUmFkaXVzKCk7CiAgICAgIHRoaXMudXBkYXRlVHJlZSgpOwogICAgfQogICAgLyoqCiAgICAgKiB1cGRhdGVUcmVlCiAgICAgKi8KCgogICAgdXBkYXRlVHJlZSgpIHsKICAgICAgY29uc3QgdHJlZSA9IHRoaXMudHJlZTsKICAgICAgdHJlZS5yZXNldCgpOwogICAgICB0cmVlLmFhYmIuY29weSh0aGlzLmFhYmIpOwogICAgICBjb25zdCBzY2FsZSA9IHRoaXMuc2NhbGU7IC8vIFRoZSBsb2NhbCBtZXNoIEFBQkIgaXMgc2NhbGVkLCBidXQgdGhlIG9jdHJlZSBBQUJCIHNob3VsZCBiZSB1bnNjYWxlZAoKICAgICAgdHJlZS5hYWJiLmxvd2VyQm91bmQueCAqPSAxIC8gc2NhbGUueDsKICAgICAgdHJlZS5hYWJiLmxvd2VyQm91bmQueSAqPSAxIC8gc2NhbGUueTsKICAgICAgdHJlZS5hYWJiLmxvd2VyQm91bmQueiAqPSAxIC8gc2NhbGUuejsKICAgICAgdHJlZS5hYWJiLnVwcGVyQm91bmQueCAqPSAxIC8gc2NhbGUueDsKICAgICAgdHJlZS5hYWJiLnVwcGVyQm91bmQueSAqPSAxIC8gc2NhbGUueTsKICAgICAgdHJlZS5hYWJiLnVwcGVyQm91bmQueiAqPSAxIC8gc2NhbGUuejsgLy8gSW5zZXJ0IGFsbCB0cmlhbmdsZXMKCiAgICAgIGNvbnN0IHRyaWFuZ2xlQUFCQiA9IG5ldyBBQUJCKCk7CiAgICAgIGNvbnN0IGEgPSBuZXcgVmVjMygpOwogICAgICBjb25zdCBiID0gbmV3IFZlYzMoKTsKICAgICAgY29uc3QgYyA9IG5ldyBWZWMzKCk7CiAgICAgIGNvbnN0IHBvaW50cyA9IFthLCBiLCBjXTsKCiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5pbmRpY2VzLmxlbmd0aCAvIDM7IGkrKykgewogICAgICAgIC8vdGhpcy5nZXRUcmlhbmdsZVZlcnRpY2VzKGksIGEsIGIsIGMpOwogICAgICAgIC8vIEdldCB1bnNjYWxlZCB0cmlhbmdsZSB2ZXJ0cwogICAgICAgIGNvbnN0IGkzID0gaSAqIDM7CgogICAgICAgIHRoaXMuX2dldFVuc2NhbGVkVmVydGV4KHRoaXMuaW5kaWNlc1tpM10sIGEpOwoKICAgICAgICB0aGlzLl9nZXRVbnNjYWxlZFZlcnRleCh0aGlzLmluZGljZXNbaTMgKyAxXSwgYik7CgogICAgICAgIHRoaXMuX2dldFVuc2NhbGVkVmVydGV4KHRoaXMuaW5kaWNlc1tpMyArIDJdLCBjKTsKCiAgICAgICAgdHJpYW5nbGVBQUJCLnNldEZyb21Qb2ludHMocG9pbnRzKTsKICAgICAgICB0cmVlLmluc2VydCh0cmlhbmdsZUFBQkIsIGkpOwogICAgICB9CgogICAgICB0cmVlLnJlbW92ZUVtcHR5Tm9kZXMoKTsKICAgIH0KICAgIC8qKgogICAgICogR2V0IHRyaWFuZ2xlcyBpbiBhIGxvY2FsIEFBQkIgZnJvbSB0aGUgdHJpbWVzaC4KICAgICAqIEBwYXJhbSByZXN1bHQgQW4gYXJyYXkgb2YgaW50ZWdlcnMsIHJlZmVyZW5jaW5nIHRoZSBxdWVyaWVkIHRyaWFuZ2xlcy4KICAgICAqLwoKCiAgICBnZXRUcmlhbmdsZXNJbkFBQkIoYWFiYiwgcmVzdWx0KSB7CiAgICAgIHVuc2NhbGVkQUFCQi5jb3B5KGFhYmIpOyAvLyBTY2FsZSBpdCB0byBsb2NhbAoKICAgICAgY29uc3Qgc2NhbGUgPSB0aGlzLnNjYWxlOwogICAgICBjb25zdCBpc3ggPSBzY2FsZS54OwogICAgICBjb25zdCBpc3kgPSBzY2FsZS55OwogICAgICBjb25zdCBpc3ogPSBzY2FsZS56OwogICAgICBjb25zdCBsID0gdW5zY2FsZWRBQUJCLmxvd2VyQm91bmQ7CiAgICAgIGNvbnN0IHUgPSB1bnNjYWxlZEFBQkIudXBwZXJCb3VuZDsKICAgICAgbC54IC89IGlzeDsKICAgICAgbC55IC89IGlzeTsKICAgICAgbC56IC89IGlzejsKICAgICAgdS54IC89IGlzeDsKICAgICAgdS55IC89IGlzeTsKICAgICAgdS56IC89IGlzejsKICAgICAgcmV0dXJuIHRoaXMudHJlZS5hYWJiUXVlcnkodW5zY2FsZWRBQUJCLCByZXN1bHQpOwogICAgfQogICAgLyoqCiAgICAgKiBzZXRTY2FsZQogICAgICovCgoKICAgIHNldFNjYWxlKHNjYWxlKSB7CiAgICAgIGNvbnN0IHdhc1VuaWZvcm0gPSB0aGlzLnNjYWxlLnggPT09IHRoaXMuc2NhbGUueSAmJiB0aGlzLnNjYWxlLnkgPT09IHRoaXMuc2NhbGUuejsKICAgICAgY29uc3QgaXNVbmlmb3JtID0gc2NhbGUueCA9PT0gc2NhbGUueSAmJiBzY2FsZS55ID09PSBzY2FsZS56OwoKICAgICAgaWYgKCEod2FzVW5pZm9ybSAmJiBpc1VuaWZvcm0pKSB7CiAgICAgICAgLy8gTm9uLXVuaWZvcm0gc2NhbGluZy4gTmVlZCB0byB1cGRhdGUgbm9ybWFscy4KICAgICAgICB0aGlzLnVwZGF0ZU5vcm1hbHMoKTsKICAgICAgfQoKICAgICAgdGhpcy5zY2FsZS5jb3B5KHNjYWxlKTsKICAgICAgdGhpcy51cGRhdGVBQUJCKCk7CiAgICAgIHRoaXMudXBkYXRlQm91bmRpbmdTcGhlcmVSYWRpdXMoKTsKICAgIH0KICAgIC8qKgogICAgICogQ29tcHV0ZSB0aGUgbm9ybWFscyBvZiB0aGUgZmFjZXMuIFdpbGwgc2F2ZSBpbiB0aGUgYC5ub3JtYWxzYCBhcnJheS4KICAgICAqLwoKCiAgICB1cGRhdGVOb3JtYWxzKCkgewogICAgICBjb25zdCBuID0gY29tcHV0ZU5vcm1hbHNfbjsgLy8gR2VuZXJhdGUgbm9ybWFscwoKICAgICAgY29uc3Qgbm9ybWFscyA9IHRoaXMubm9ybWFsczsKCiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5pbmRpY2VzLmxlbmd0aCAvIDM7IGkrKykgewogICAgICAgIGNvbnN0IGkzID0gaSAqIDM7CiAgICAgICAgY29uc3QgYSA9IHRoaXMuaW5kaWNlc1tpM107CiAgICAgICAgY29uc3QgYiA9IHRoaXMuaW5kaWNlc1tpMyArIDFdOwogICAgICAgIGNvbnN0IGMgPSB0aGlzLmluZGljZXNbaTMgKyAyXTsKICAgICAgICB0aGlzLmdldFZlcnRleChhLCB2YSk7CiAgICAgICAgdGhpcy5nZXRWZXJ0ZXgoYiwgdmIpOwogICAgICAgIHRoaXMuZ2V0VmVydGV4KGMsIHZjKTsKICAgICAgICBUcmltZXNoLmNvbXB1dGVOb3JtYWwodmIsIHZhLCB2Yywgbik7CiAgICAgICAgbm9ybWFsc1tpM10gPSBuLng7CiAgICAgICAgbm9ybWFsc1tpMyArIDFdID0gbi55OwogICAgICAgIG5vcm1hbHNbaTMgKyAyXSA9IG4uejsKICAgICAgfQogICAgfQogICAgLyoqCiAgICAgKiBVcGRhdGUgdGhlIGAuZWRnZXNgIHByb3BlcnR5CiAgICAgKi8KCgogICAgdXBkYXRlRWRnZXMoKSB7CiAgICAgIGNvbnN0IGVkZ2VzID0ge307CgogICAgICBjb25zdCBhZGQgPSAoYSwgYikgPT4gewogICAgICAgIGNvbnN0IGtleSA9IGEgPCBiID8gYSArICJfIiArIGIgOiBiICsgIl8iICsgYTsKICAgICAgICBlZGdlc1trZXldID0gdHJ1ZTsKICAgICAgfTsKCiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5pbmRpY2VzLmxlbmd0aCAvIDM7IGkrKykgewogICAgICAgIGNvbnN0IGkzID0gaSAqIDM7CiAgICAgICAgY29uc3QgYSA9IHRoaXMuaW5kaWNlc1tpM107CiAgICAgICAgY29uc3QgYiA9IHRoaXMuaW5kaWNlc1tpMyArIDFdOwogICAgICAgIGNvbnN0IGMgPSB0aGlzLmluZGljZXNbaTMgKyAyXTsKICAgICAgICBhZGQoYSwgYik7CiAgICAgICAgYWRkKGIsIGMpOwogICAgICAgIGFkZChjLCBhKTsKICAgICAgfQoKICAgICAgY29uc3Qga2V5cyA9IE9iamVjdC5rZXlzKGVkZ2VzKTsKICAgICAgdGhpcy5lZGdlcyA9IG5ldyBJbnQxNkFycmF5KGtleXMubGVuZ3RoICogMik7CgogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGtleXMubGVuZ3RoOyBpKyspIHsKICAgICAgICBjb25zdCBpbmRpY2VzID0ga2V5c1tpXS5zcGxpdCgnXycpOwogICAgICAgIHRoaXMuZWRnZXNbMiAqIGldID0gcGFyc2VJbnQoaW5kaWNlc1swXSwgMTApOwogICAgICAgIHRoaXMuZWRnZXNbMiAqIGkgKyAxXSA9IHBhcnNlSW50KGluZGljZXNbMV0sIDEwKTsKICAgICAgfQogICAgfQogICAgLyoqCiAgICAgKiBHZXQgYW4gZWRnZSB2ZXJ0ZXgKICAgICAqIEBwYXJhbSBmaXJzdE9yU2Vjb25kIDAgb3IgMSwgZGVwZW5kaW5nIG9uIHdoaWNoIG9uZSBvZiB0aGUgdmVydGljZXMgeW91IG5lZWQuCiAgICAgKiBAcGFyYW0gdmVydGV4U3RvcmUgV2hlcmUgdG8gc3RvcmUgdGhlIHJlc3VsdAogICAgICovCgoKICAgIGdldEVkZ2VWZXJ0ZXgoZWRnZUluZGV4LCBmaXJzdE9yU2Vjb25kLCB2ZXJ0ZXhTdG9yZSkgewogICAgICBjb25zdCB2ZXJ0ZXhJbmRleCA9IHRoaXMuZWRnZXNbZWRnZUluZGV4ICogMiArIChmaXJzdE9yU2Vjb25kID8gMSA6IDApXTsKICAgICAgdGhpcy5nZXRWZXJ0ZXgodmVydGV4SW5kZXgsIHZlcnRleFN0b3JlKTsKICAgIH0KICAgIC8qKgogICAgICogR2V0IGEgdmVjdG9yIGFsb25nIGFuIGVkZ2UuCiAgICAgKi8KCgogICAgZ2V0RWRnZVZlY3RvcihlZGdlSW5kZXgsIHZlY3RvclN0b3JlKSB7CiAgICAgIGNvbnN0IHZhID0gZ2V0RWRnZVZlY3Rvcl92YTsKICAgICAgY29uc3QgdmIgPSBnZXRFZGdlVmVjdG9yX3ZiOwogICAgICB0aGlzLmdldEVkZ2VWZXJ0ZXgoZWRnZUluZGV4LCAwLCB2YSk7CiAgICAgIHRoaXMuZ2V0RWRnZVZlcnRleChlZGdlSW5kZXgsIDEsIHZiKTsKICAgICAgdmIudnN1Yih2YSwgdmVjdG9yU3RvcmUpOwogICAgfQogICAgLyoqCiAgICAgKiBHZXQgZmFjZSBub3JtYWwgZ2l2ZW4gMyB2ZXJ0aWNlcwogICAgICovCgoKICAgIHN0YXRpYyBjb21wdXRlTm9ybWFsKHZhLCB2YiwgdmMsIHRhcmdldCkgewogICAgICB2Yi52c3ViKHZhLCBhYik7CiAgICAgIHZjLnZzdWIodmIsIGNiKTsKICAgICAgY2IuY3Jvc3MoYWIsIHRhcmdldCk7CgogICAgICBpZiAoIXRhcmdldC5pc1plcm8oKSkgewogICAgICAgIHRhcmdldC5ub3JtYWxpemUoKTsKICAgICAgfQogICAgfQogICAgLyoqCiAgICAgKiBHZXQgdmVydGV4IGkuCiAgICAgKiBAcmV0dXJuIFRoZSAib3V0IiB2ZWN0b3Igb2JqZWN0CiAgICAgKi8KCgogICAgZ2V0VmVydGV4KGksIG91dCkgewogICAgICBjb25zdCBzY2FsZSA9IHRoaXMuc2NhbGU7CgogICAgICB0aGlzLl9nZXRVbnNjYWxlZFZlcnRleChpLCBvdXQpOwoKICAgICAgb3V0LnggKj0gc2NhbGUueDsKICAgICAgb3V0LnkgKj0gc2NhbGUueTsKICAgICAgb3V0LnogKj0gc2NhbGUuejsKICAgICAgcmV0dXJuIG91dDsKICAgIH0KICAgIC8qKgogICAgICogR2V0IHJhdyB2ZXJ0ZXggaQogICAgICogQHJldHVybiBUaGUgIm91dCIgdmVjdG9yIG9iamVjdAogICAgICovCgoKICAgIF9nZXRVbnNjYWxlZFZlcnRleChpLCBvdXQpIHsKICAgICAgY29uc3QgaTMgPSBpICogMzsKICAgICAgY29uc3QgdmVydGljZXMgPSB0aGlzLnZlcnRpY2VzOwogICAgICByZXR1cm4gb3V0LnNldCh2ZXJ0aWNlc1tpM10sIHZlcnRpY2VzW2kzICsgMV0sIHZlcnRpY2VzW2kzICsgMl0pOwogICAgfQogICAgLyoqCiAgICAgKiBHZXQgYSB2ZXJ0ZXggZnJvbSB0aGUgdHJpbWVzaCx0cmFuc2Zvcm1lZCBieSB0aGUgZ2l2ZW4gcG9zaXRpb24gYW5kIHF1YXRlcm5pb24uCiAgICAgKiBAcmV0dXJuIFRoZSAib3V0IiB2ZWN0b3Igb2JqZWN0CiAgICAgKi8KCgogICAgZ2V0V29ybGRWZXJ0ZXgoaSwgcG9zLCBxdWF0LCBvdXQpIHsKICAgICAgdGhpcy5nZXRWZXJ0ZXgoaSwgb3V0KTsKICAgICAgVHJhbnNmb3JtLnBvaW50VG9Xb3JsZEZyYW1lKHBvcywgcXVhdCwgb3V0LCBvdXQpOwogICAgICByZXR1cm4gb3V0OwogICAgfQogICAgLyoqCiAgICAgKiBHZXQgdGhlIHRocmVlIHZlcnRpY2VzIGZvciB0cmlhbmdsZSBpLgogICAgICovCgoKICAgIGdldFRyaWFuZ2xlVmVydGljZXMoaSwgYSwgYiwgYykgewogICAgICBjb25zdCBpMyA9IGkgKiAzOwogICAgICB0aGlzLmdldFZlcnRleCh0aGlzLmluZGljZXNbaTNdLCBhKTsKICAgICAgdGhpcy5nZXRWZXJ0ZXgodGhpcy5pbmRpY2VzW2kzICsgMV0sIGIpOwogICAgICB0aGlzLmdldFZlcnRleCh0aGlzLmluZGljZXNbaTMgKyAyXSwgYyk7CiAgICB9CiAgICAvKioKICAgICAqIENvbXB1dGUgdGhlIG5vcm1hbCBvZiB0cmlhbmdsZSBpLgogICAgICogQHJldHVybiBUaGUgInRhcmdldCIgdmVjdG9yIG9iamVjdAogICAgICovCgoKICAgIGdldE5vcm1hbChpLCB0YXJnZXQpIHsKICAgICAgY29uc3QgaTMgPSBpICogMzsKICAgICAgcmV0dXJuIHRhcmdldC5zZXQodGhpcy5ub3JtYWxzW2kzXSwgdGhpcy5ub3JtYWxzW2kzICsgMV0sIHRoaXMubm9ybWFsc1tpMyArIDJdKTsKICAgIH0KICAgIC8qKgogICAgICogQHJldHVybiBUaGUgInRhcmdldCIgdmVjdG9yIG9iamVjdAogICAgICovCgoKICAgIGNhbGN1bGF0ZUxvY2FsSW5lcnRpYShtYXNzLCB0YXJnZXQpIHsKICAgICAgLy8gQXBwcm94aW1hdGUgd2l0aCBib3ggaW5lcnRpYQogICAgICAvLyBFeGFjdCBpbmVydGlhIGNhbGN1bGF0aW9uIGlzIG92ZXJraWxsLCBidXQgc2VlIGh0dHA6Ly9nZW9tZXRyaWN0b29scy5jb20vRG9jdW1lbnRhdGlvbi9Qb2x5aGVkcmFsTWFzc1Byb3BlcnRpZXMucGRmIGZvciB0aGUgY29ycmVjdCB3YXkgdG8gZG8gaXQKICAgICAgdGhpcy5jb21wdXRlTG9jYWxBQUJCKGNsaV9hYWJiKTsKICAgICAgY29uc3QgeCA9IGNsaV9hYWJiLnVwcGVyQm91bmQueCAtIGNsaV9hYWJiLmxvd2VyQm91bmQueDsKICAgICAgY29uc3QgeSA9IGNsaV9hYWJiLnVwcGVyQm91bmQueSAtIGNsaV9hYWJiLmxvd2VyQm91bmQueTsKICAgICAgY29uc3QgeiA9IGNsaV9hYWJiLnVwcGVyQm91bmQueiAtIGNsaV9hYWJiLmxvd2VyQm91bmQuejsKICAgICAgcmV0dXJuIHRhcmdldC5zZXQoMS4wIC8gMTIuMCAqIG1hc3MgKiAoMiAqIHkgKiAyICogeSArIDIgKiB6ICogMiAqIHopLCAxLjAgLyAxMi4wICogbWFzcyAqICgyICogeCAqIDIgKiB4ICsgMiAqIHogKiAyICogeiksIDEuMCAvIDEyLjAgKiBtYXNzICogKDIgKiB5ICogMiAqIHkgKyAyICogeCAqIDIgKiB4KSk7CiAgICB9CiAgICAvKioKICAgICAqIENvbXB1dGUgdGhlIGxvY2FsIEFBQkIgZm9yIHRoZSB0cmltZXNoCiAgICAgKi8KCgogICAgY29tcHV0ZUxvY2FsQUFCQihhYWJiKSB7CiAgICAgIGNvbnN0IGwgPSBhYWJiLmxvd2VyQm91bmQ7CiAgICAgIGNvbnN0IHUgPSBhYWJiLnVwcGVyQm91bmQ7CiAgICAgIGNvbnN0IG4gPSB0aGlzLnZlcnRpY2VzLmxlbmd0aDsKICAgICAgdGhpcy52ZXJ0aWNlczsKICAgICAgY29uc3QgdiA9IGNvbXB1dGVMb2NhbEFBQkJfd29ybGRWZXJ0OwogICAgICB0aGlzLmdldFZlcnRleCgwLCB2KTsKICAgICAgbC5jb3B5KHYpOwogICAgICB1LmNvcHkodik7CgogICAgICBmb3IgKGxldCBpID0gMDsgaSAhPT0gbjsgaSsrKSB7CiAgICAgICAgdGhpcy5nZXRWZXJ0ZXgoaSwgdik7CgogICAgICAgIGlmICh2LnggPCBsLngpIHsKICAgICAgICAgIGwueCA9IHYueDsKICAgICAgICB9IGVsc2UgaWYgKHYueCA+IHUueCkgewogICAgICAgICAgdS54ID0gdi54OwogICAgICAgIH0KCiAgICAgICAgaWYgKHYueSA8IGwueSkgewogICAgICAgICAgbC55ID0gdi55OwogICAgICAgIH0gZWxzZSBpZiAodi55ID4gdS55KSB7CiAgICAgICAgICB1LnkgPSB2Lnk7CiAgICAgICAgfQoKICAgICAgICBpZiAodi56IDwgbC56KSB7CiAgICAgICAgICBsLnogPSB2Lno7CiAgICAgICAgfSBlbHNlIGlmICh2LnogPiB1LnopIHsKICAgICAgICAgIHUueiA9IHYuejsKICAgICAgICB9CiAgICAgIH0KICAgIH0KICAgIC8qKgogICAgICogVXBkYXRlIHRoZSBgLmFhYmJgIHByb3BlcnR5CiAgICAgKi8KCgogICAgdXBkYXRlQUFCQigpIHsKICAgICAgdGhpcy5jb21wdXRlTG9jYWxBQUJCKHRoaXMuYWFiYik7CiAgICB9CiAgICAvKioKICAgICAqIFdpbGwgdXBkYXRlIHRoZSBgLmJvdW5kaW5nU3BoZXJlUmFkaXVzYCBwcm9wZXJ0eQogICAgICovCgoKICAgIHVwZGF0ZUJvdW5kaW5nU3BoZXJlUmFkaXVzKCkgewogICAgICAvLyBBc3N1bWUgcG9pbnRzIGFyZSBkaXN0cmlidXRlZCB3aXRoIGxvY2FsICgwLDAsMCkgYXMgY2VudGVyCiAgICAgIGxldCBtYXgyID0gMDsKICAgICAgY29uc3QgdmVydGljZXMgPSB0aGlzLnZlcnRpY2VzOwogICAgICBjb25zdCB2ID0gbmV3IFZlYzMoKTsKCiAgICAgIGZvciAobGV0IGkgPSAwLCBOID0gdmVydGljZXMubGVuZ3RoIC8gMzsgaSAhPT0gTjsgaSsrKSB7CiAgICAgICAgdGhpcy5nZXRWZXJ0ZXgoaSwgdik7CiAgICAgICAgY29uc3Qgbm9ybTIgPSB2Lmxlbmd0aFNxdWFyZWQoKTsKCiAgICAgICAgaWYgKG5vcm0yID4gbWF4MikgewogICAgICAgICAgbWF4MiA9IG5vcm0yOwogICAgICAgIH0KICAgICAgfQoKICAgICAgdGhpcy5ib3VuZGluZ1NwaGVyZVJhZGl1cyA9IE1hdGguc3FydChtYXgyKTsKICAgIH0KICAgIC8qKgogICAgICogY2FsY3VsYXRlV29ybGRBQUJCCiAgICAgKi8KCgogICAgY2FsY3VsYXRlV29ybGRBQUJCKHBvcywgcXVhdCwgbWluLCBtYXgpIHsKICAgICAgLyoKICAgICAgICAgIGNvbnN0IG4gPSB0aGlzLnZlcnRpY2VzLmxlbmd0aCAvIDMsCiAgICAgICAgICAgICAgdmVydHMgPSB0aGlzLnZlcnRpY2VzOwogICAgICAgICAgY29uc3QgbWlueCxtaW55LG1pbnosbWF4eCxtYXh5LG1heHo7CiAgICAgICAgICAgY29uc3QgdiA9IHRlbXBXb3JsZFZlcnRleDsKICAgICAgICAgIGZvcihsZXQgaT0wOyBpPG47IGkrKyl7CiAgICAgICAgICAgICAgdGhpcy5nZXRWZXJ0ZXgoaSwgdik7CiAgICAgICAgICAgICAgcXVhdC52bXVsdCh2LCB2KTsKICAgICAgICAgICAgICBwb3MudmFkZCh2LCB2KTsKICAgICAgICAgICAgICBpZiAodi54IDwgbWlueCB8fCBtaW54PT09dW5kZWZpbmVkKXsKICAgICAgICAgICAgICAgICAgbWlueCA9IHYueDsKICAgICAgICAgICAgICB9IGVsc2UgaWYodi54ID4gbWF4eCB8fCBtYXh4PT09dW5kZWZpbmVkKXsKICAgICAgICAgICAgICAgICAgbWF4eCA9IHYueDsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgIGlmICh2LnkgPCBtaW55IHx8IG1pbnk9PT11bmRlZmluZWQpewogICAgICAgICAgICAgICAgICBtaW55ID0gdi55OwogICAgICAgICAgICAgIH0gZWxzZSBpZih2LnkgPiBtYXh5IHx8IG1heHk9PT11bmRlZmluZWQpewogICAgICAgICAgICAgICAgICBtYXh5ID0gdi55OwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgaWYgKHYueiA8IG1pbnogfHwgbWluej09PXVuZGVmaW5lZCl7CiAgICAgICAgICAgICAgICAgIG1pbnogPSB2Lno7CiAgICAgICAgICAgICAgfSBlbHNlIGlmKHYueiA+IG1heHogfHwgbWF4ej09PXVuZGVmaW5lZCl7CiAgICAgICAgICAgICAgICAgIG1heHogPSB2Lno7CiAgICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgICAgbWluLnNldChtaW54LG1pbnksbWlueik7CiAgICAgICAgICBtYXguc2V0KG1heHgsbWF4eSxtYXh6KTsKICAgICAgICAgICovCiAgICAgIC8vIEZhc3RlciBhcHByb3hpbWF0aW9uIHVzaW5nIGxvY2FsIEFBQkIKICAgICAgY29uc3QgZnJhbWUgPSBjYWxjdWxhdGVXb3JsZEFBQkJfZnJhbWU7CiAgICAgIGNvbnN0IHJlc3VsdCA9IGNhbGN1bGF0ZVdvcmxkQUFCQl9hYWJiOwogICAgICBmcmFtZS5wb3NpdGlvbiA9IHBvczsKICAgICAgZnJhbWUucXVhdGVybmlvbiA9IHF1YXQ7CiAgICAgIHRoaXMuYWFiYi50b1dvcmxkRnJhbWUoZnJhbWUsIHJlc3VsdCk7CiAgICAgIG1pbi5jb3B5KHJlc3VsdC5sb3dlckJvdW5kKTsKICAgICAgbWF4LmNvcHkocmVzdWx0LnVwcGVyQm91bmQpOwogICAgfQogICAgLyoqCiAgICAgKiBHZXQgYXBwcm94aW1hdGUgdm9sdW1lCiAgICAgKi8KCgogICAgdm9sdW1lKCkgewogICAgICByZXR1cm4gNC4wICogTWF0aC5QSSAqIHRoaXMuYm91bmRpbmdTcGhlcmVSYWRpdXMgLyAzLjA7CiAgICB9CiAgICAvKioKICAgICAqIENyZWF0ZSBhIFRyaW1lc2ggaW5zdGFuY2UsIHNoYXBlZCBhcyBhIHRvcnVzLgogICAgICovCgoKICAgIHN0YXRpYyBjcmVhdGVUb3J1cyhyYWRpdXMsIHR1YmUsIHJhZGlhbFNlZ21lbnRzLCB0dWJ1bGFyU2VnbWVudHMsIGFyYykgewogICAgICBpZiAocmFkaXVzID09PSB2b2lkIDApIHsKICAgICAgICByYWRpdXMgPSAxOwogICAgICB9CgogICAgICBpZiAodHViZSA9PT0gdm9pZCAwKSB7CiAgICAgICAgdHViZSA9IDAuNTsKICAgICAgfQoKICAgICAgaWYgKHJhZGlhbFNlZ21lbnRzID09PSB2b2lkIDApIHsKICAgICAgICByYWRpYWxTZWdtZW50cyA9IDg7CiAgICAgIH0KCiAgICAgIGlmICh0dWJ1bGFyU2VnbWVudHMgPT09IHZvaWQgMCkgewogICAgICAgIHR1YnVsYXJTZWdtZW50cyA9IDY7CiAgICAgIH0KCiAgICAgIGlmIChhcmMgPT09IHZvaWQgMCkgewogICAgICAgIGFyYyA9IE1hdGguUEkgKiAyOwogICAgICB9CgogICAgICBjb25zdCB2ZXJ0aWNlcyA9IFtdOwogICAgICBjb25zdCBpbmRpY2VzID0gW107CgogICAgICBmb3IgKGxldCBqID0gMDsgaiA8PSByYWRpYWxTZWdtZW50czsgaisrKSB7CiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPD0gdHVidWxhclNlZ21lbnRzOyBpKyspIHsKICAgICAgICAgIGNvbnN0IHUgPSBpIC8gdHVidWxhclNlZ21lbnRzICogYXJjOwogICAgICAgICAgY29uc3QgdiA9IGogLyByYWRpYWxTZWdtZW50cyAqIE1hdGguUEkgKiAyOwogICAgICAgICAgY29uc3QgeCA9IChyYWRpdXMgKyB0dWJlICogTWF0aC5jb3ModikpICogTWF0aC5jb3ModSk7CiAgICAgICAgICBjb25zdCB5ID0gKHJhZGl1cyArIHR1YmUgKiBNYXRoLmNvcyh2KSkgKiBNYXRoLnNpbih1KTsKICAgICAgICAgIGNvbnN0IHogPSB0dWJlICogTWF0aC5zaW4odik7CiAgICAgICAgICB2ZXJ0aWNlcy5wdXNoKHgsIHksIHopOwogICAgICAgIH0KICAgICAgfQoKICAgICAgZm9yIChsZXQgaiA9IDE7IGogPD0gcmFkaWFsU2VnbWVudHM7IGorKykgewogICAgICAgIGZvciAobGV0IGkgPSAxOyBpIDw9IHR1YnVsYXJTZWdtZW50czsgaSsrKSB7CiAgICAgICAgICBjb25zdCBhID0gKHR1YnVsYXJTZWdtZW50cyArIDEpICogaiArIGkgLSAxOwogICAgICAgICAgY29uc3QgYiA9ICh0dWJ1bGFyU2VnbWVudHMgKyAxKSAqIChqIC0gMSkgKyBpIC0gMTsKICAgICAgICAgIGNvbnN0IGMgPSAodHVidWxhclNlZ21lbnRzICsgMSkgKiAoaiAtIDEpICsgaTsKICAgICAgICAgIGNvbnN0IGQgPSAodHVidWxhclNlZ21lbnRzICsgMSkgKiBqICsgaTsKICAgICAgICAgIGluZGljZXMucHVzaChhLCBiLCBkKTsKICAgICAgICAgIGluZGljZXMucHVzaChiLCBjLCBkKTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIHJldHVybiBuZXcgVHJpbWVzaCh2ZXJ0aWNlcywgaW5kaWNlcyk7CiAgICB9CgogIH0KCiAgY29uc3QgY29tcHV0ZU5vcm1hbHNfbiA9IG5ldyBWZWMzKCk7CiAgY29uc3QgdW5zY2FsZWRBQUJCID0gbmV3IEFBQkIoKTsKICBjb25zdCBnZXRFZGdlVmVjdG9yX3ZhID0gbmV3IFZlYzMoKTsKICBjb25zdCBnZXRFZGdlVmVjdG9yX3ZiID0gbmV3IFZlYzMoKTsKICBjb25zdCBjYiA9IG5ldyBWZWMzKCk7CiAgY29uc3QgYWIgPSBuZXcgVmVjMygpOwogIGNvbnN0IHZhID0gbmV3IFZlYzMoKTsKICBjb25zdCB2YiA9IG5ldyBWZWMzKCk7CiAgY29uc3QgdmMgPSBuZXcgVmVjMygpOwogIGNvbnN0IGNsaV9hYWJiID0gbmV3IEFBQkIoKTsKICBjb25zdCBjb21wdXRlTG9jYWxBQUJCX3dvcmxkVmVydCA9IG5ldyBWZWMzKCk7CiAgY29uc3QgY2FsY3VsYXRlV29ybGRBQUJCX2ZyYW1lID0gbmV3IFRyYW5zZm9ybSgpOwogIGNvbnN0IGNhbGN1bGF0ZVdvcmxkQUFCQl9hYWJiID0gbmV3IEFBQkIoKTsKICAvKioKICAgKiBDb25zdHJhaW50IGVxdWF0aW9uIHNvbHZlciBiYXNlIGNsYXNzLgogICAqLwoKICBjbGFzcyBTb2x2ZXIgewogICAgLyoqCiAgICAgKiBBbGwgZXF1YXRpb25zIHRvIGJlIHNvbHZlZAogICAgICovCgogICAgLyoqCiAgICAgKiBAdG9kbyByZW1vdmUgdXNlbGVzcyBjb25zdHJ1Y3RvcgogICAgICovCiAgICBjb25zdHJ1Y3RvcigpIHsKICAgICAgdGhpcy5lcXVhdGlvbnMgPSB2b2lkIDA7CiAgICAgIHRoaXMuZXF1YXRpb25zID0gW107CiAgICB9CiAgICAvKioKICAgICAqIFNob3VsZCBiZSBpbXBsZW1lbnRlZCBpbiBzdWJjbGFzc2VzIQogICAgICogQHRvZG8gdXNlIGFic3RyYWN0CiAgICAgKiBAcmV0dXJuIG51bWJlciBvZiBpdGVyYXRpb25zIHBlcmZvcm1lZAogICAgICovCgoKICAgIHNvbHZlKGR0LCB3b3JsZCkgewogICAgICByZXR1cm4gKC8vIFNob3VsZCByZXR1cm4gdGhlIG51bWJlciBvZiBpdGVyYXRpb25zIGRvbmUhCiAgICAgICAgMAogICAgICApOwogICAgfQogICAgLyoqCiAgICAgKiBBZGQgYW4gZXF1YXRpb24KICAgICAqLwoKCiAgICBhZGRFcXVhdGlvbihlcSkgewogICAgICBpZiAoZXEuZW5hYmxlZCAmJiAhZXEuYmkuaXNUcmlnZ2VyICYmICFlcS5iai5pc1RyaWdnZXIpIHsKICAgICAgICB0aGlzLmVxdWF0aW9ucy5wdXNoKGVxKTsKICAgICAgfQogICAgfQogICAgLyoqCiAgICAgKiBSZW1vdmUgYW4gZXF1YXRpb24KICAgICAqLwoKCiAgICByZW1vdmVFcXVhdGlvbihlcSkgewogICAgICBjb25zdCBlcXMgPSB0aGlzLmVxdWF0aW9uczsKICAgICAgY29uc3QgaSA9IGVxcy5pbmRleE9mKGVxKTsKCiAgICAgIGlmIChpICE9PSAtMSkgewogICAgICAgIGVxcy5zcGxpY2UoaSwgMSk7CiAgICAgIH0KICAgIH0KICAgIC8qKgogICAgICogQWRkIGFsbCBlcXVhdGlvbnMKICAgICAqLwoKCiAgICByZW1vdmVBbGxFcXVhdGlvbnMoKSB7CiAgICAgIHRoaXMuZXF1YXRpb25zLmxlbmd0aCA9IDA7CiAgICB9CgogIH0KICAvKioKICAgKiBDb25zdHJhaW50IGVxdWF0aW9uIEdhdXNzLVNlaWRlbCBzb2x2ZXIuCiAgICogQHRvZG8gVGhlIHNwb29rIHBhcmFtZXRlcnMgc2hvdWxkIGJlIHNwZWNpZmllZCBmb3IgZWFjaCBjb25zdHJhaW50LCBub3QgZ2xvYmFsbHkuCiAgICogQHNlZSBodHRwczovL3d3dzguY3MudW11LnNlL2t1cnNlci81RFYwNTgvVlQwOS9sZWN0dXJlcy9zcG9va25vdGVzLnBkZgogICAqLwoKCiAgY2xhc3MgR1NTb2x2ZXIgZXh0ZW5kcyBTb2x2ZXIgewogICAgLyoqCiAgICAgKiBUaGUgbnVtYmVyIG9mIHNvbHZlciBpdGVyYXRpb25zIGRldGVybWluZXMgcXVhbGl0eSBvZiB0aGUgY29uc3RyYWludHMgaW4gdGhlIHdvcmxkLgogICAgICogVGhlIG1vcmUgaXRlcmF0aW9ucywgdGhlIG1vcmUgY29ycmVjdCBzaW11bGF0aW9uLiBNb3JlIGl0ZXJhdGlvbnMgbmVlZCBtb3JlIGNvbXB1dGF0aW9ucyB0aG91Z2guIElmIHlvdSBoYXZlIGEgbGFyZ2UgZ3Jhdml0eSBmb3JjZSBpbiB5b3VyIHdvcmxkLCB5b3Ugd2lsbCBuZWVkIG1vcmUgaXRlcmF0aW9ucy4KICAgICAqLwoKICAgIC8qKgogICAgICogV2hlbiB0b2xlcmFuY2UgaXMgcmVhY2hlZCwgdGhlIHN5c3RlbSBpcyBhc3N1bWVkIHRvIGJlIGNvbnZlcmdlZC4KICAgICAqLwoKICAgIC8qKgogICAgICogQHRvZG8gcmVtb3ZlIHVzZWxlc3MgY29uc3RydWN0b3IKICAgICAqLwogICAgY29uc3RydWN0b3IoKSB7CiAgICAgIHN1cGVyKCk7CiAgICAgIHRoaXMuaXRlcmF0aW9ucyA9IHZvaWQgMDsKICAgICAgdGhpcy50b2xlcmFuY2UgPSB2b2lkIDA7CiAgICAgIHRoaXMuaXRlcmF0aW9ucyA9IDEwOwogICAgICB0aGlzLnRvbGVyYW5jZSA9IDFlLTc7CiAgICB9CiAgICAvKioKICAgICAqIFNvbHZlCiAgICAgKiBAcmV0dXJuIG51bWJlciBvZiBpdGVyYXRpb25zIHBlcmZvcm1lZAogICAgICovCgoKICAgIHNvbHZlKGR0LCB3b3JsZCkgewogICAgICBsZXQgaXRlciA9IDA7CiAgICAgIGNvbnN0IG1heEl0ZXIgPSB0aGlzLml0ZXJhdGlvbnM7CiAgICAgIGNvbnN0IHRvbFNxdWFyZWQgPSB0aGlzLnRvbGVyYW5jZSAqIHRoaXMudG9sZXJhbmNlOwogICAgICBjb25zdCBlcXVhdGlvbnMgPSB0aGlzLmVxdWF0aW9uczsKICAgICAgY29uc3QgTmVxID0gZXF1YXRpb25zLmxlbmd0aDsKICAgICAgY29uc3QgYm9kaWVzID0gd29ybGQuYm9kaWVzOwogICAgICBjb25zdCBOYm9kaWVzID0gYm9kaWVzLmxlbmd0aDsKICAgICAgY29uc3QgaCA9IGR0OwogICAgICBsZXQgQjsKICAgICAgbGV0IGludkM7CiAgICAgIGxldCBkZWx0YWxhbWJkYTsKICAgICAgbGV0IGRlbHRhbGFtYmRhVG90OwogICAgICBsZXQgR1dsYW1iZGE7CiAgICAgIGxldCBsYW1iZGFqOyAvLyBVcGRhdGUgc29sdmUgbWFzcwoKICAgICAgaWYgKE5lcSAhPT0gMCkgewogICAgICAgIGZvciAobGV0IGkgPSAwOyBpICE9PSBOYm9kaWVzOyBpKyspIHsKICAgICAgICAgIGJvZGllc1tpXS51cGRhdGVTb2x2ZU1hc3NQcm9wZXJ0aWVzKCk7CiAgICAgICAgfQogICAgICB9IC8vIFRoaW5ncyB0aGF0IGRvIG5vdCBjaGFuZ2UgZHVyaW5nIGl0ZXJhdGlvbiBjYW4gYmUgY29tcHV0ZWQgb25jZQoKCiAgICAgIGNvbnN0IGludkNzID0gR1NTb2x2ZXJfc29sdmVfaW52Q3M7CiAgICAgIGNvbnN0IEJzID0gR1NTb2x2ZXJfc29sdmVfQnM7CiAgICAgIGNvbnN0IGxhbWJkYSA9IEdTU29sdmVyX3NvbHZlX2xhbWJkYTsKICAgICAgaW52Q3MubGVuZ3RoID0gTmVxOwogICAgICBCcy5sZW5ndGggPSBOZXE7CiAgICAgIGxhbWJkYS5sZW5ndGggPSBOZXE7CgogICAgICBmb3IgKGxldCBpID0gMDsgaSAhPT0gTmVxOyBpKyspIHsKICAgICAgICBjb25zdCBjID0gZXF1YXRpb25zW2ldOwogICAgICAgIGxhbWJkYVtpXSA9IDAuMDsKICAgICAgICBCc1tpXSA9IGMuY29tcHV0ZUIoaCk7CiAgICAgICAgaW52Q3NbaV0gPSAxLjAgLyBjLmNvbXB1dGVDKCk7CiAgICAgIH0KCiAgICAgIGlmIChOZXEgIT09IDApIHsKICAgICAgICAvLyBSZXNldCB2bGFtYmRhCiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgIT09IE5ib2RpZXM7IGkrKykgewogICAgICAgICAgY29uc3QgYiA9IGJvZGllc1tpXTsKICAgICAgICAgIGNvbnN0IHZsYW1iZGEgPSBiLnZsYW1iZGE7CiAgICAgICAgICBjb25zdCB3bGFtYmRhID0gYi53bGFtYmRhOwogICAgICAgICAgdmxhbWJkYS5zZXQoMCwgMCwgMCk7CiAgICAgICAgICB3bGFtYmRhLnNldCgwLCAwLCAwKTsKICAgICAgICB9IC8vIEl0ZXJhdGUgb3ZlciBlcXVhdGlvbnMKCgogICAgICAgIGZvciAoaXRlciA9IDA7IGl0ZXIgIT09IG1heEl0ZXI7IGl0ZXIrKykgewogICAgICAgICAgLy8gQWNjdW11bGF0ZSB0aGUgdG90YWwgZXJyb3IgZm9yIGVhY2ggaXRlcmF0aW9uLgogICAgICAgICAgZGVsdGFsYW1iZGFUb3QgPSAwLjA7CgogICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogIT09IE5lcTsgaisrKSB7CiAgICAgICAgICAgIGNvbnN0IGMgPSBlcXVhdGlvbnNbal07IC8vIENvbXB1dGUgaXRlcmF0aW9uCgogICAgICAgICAgICBCID0gQnNbal07CiAgICAgICAgICAgIGludkMgPSBpbnZDc1tqXTsKICAgICAgICAgICAgbGFtYmRhaiA9IGxhbWJkYVtqXTsKICAgICAgICAgICAgR1dsYW1iZGEgPSBjLmNvbXB1dGVHV2xhbWJkYSgpOwogICAgICAgICAgICBkZWx0YWxhbWJkYSA9IGludkMgKiAoQiAtIEdXbGFtYmRhIC0gYy5lcHMgKiBsYW1iZGFqKTsgLy8gQ2xhbXAgaWYgd2UgYXJlIG5vdCB3aXRoaW4gdGhlIG1pbi9tYXggaW50ZXJ2YWwKCiAgICAgICAgICAgIGlmIChsYW1iZGFqICsgZGVsdGFsYW1iZGEgPCBjLm1pbkZvcmNlKSB7CiAgICAgICAgICAgICAgZGVsdGFsYW1iZGEgPSBjLm1pbkZvcmNlIC0gbGFtYmRhajsKICAgICAgICAgICAgfSBlbHNlIGlmIChsYW1iZGFqICsgZGVsdGFsYW1iZGEgPiBjLm1heEZvcmNlKSB7CiAgICAgICAgICAgICAgZGVsdGFsYW1iZGEgPSBjLm1heEZvcmNlIC0gbGFtYmRhajsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgbGFtYmRhW2pdICs9IGRlbHRhbGFtYmRhOwogICAgICAgICAgICBkZWx0YWxhbWJkYVRvdCArPSBkZWx0YWxhbWJkYSA+IDAuMCA/IGRlbHRhbGFtYmRhIDogLWRlbHRhbGFtYmRhOyAvLyBhYnMoZGVsdGFsYW1iZGEpCgogICAgICAgICAgICBjLmFkZFRvV2xhbWJkYShkZWx0YWxhbWJkYSk7CiAgICAgICAgICB9IC8vIElmIHRoZSB0b3RhbCBlcnJvciBpcyBzbWFsbCBlbm91Z2ggLSBzdG9wIGl0ZXJhdGUKCgogICAgICAgICAgaWYgKGRlbHRhbGFtYmRhVG90ICogZGVsdGFsYW1iZGFUb3QgPCB0b2xTcXVhcmVkKSB7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgfQogICAgICAgIH0gLy8gQWRkIHJlc3VsdCB0byB2ZWxvY2l0eQoKCiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgIT09IE5ib2RpZXM7IGkrKykgewogICAgICAgICAgY29uc3QgYiA9IGJvZGllc1tpXTsKICAgICAgICAgIGNvbnN0IHYgPSBiLnZlbG9jaXR5OwogICAgICAgICAgY29uc3QgdyA9IGIuYW5ndWxhclZlbG9jaXR5OwogICAgICAgICAgYi52bGFtYmRhLnZtdWwoYi5saW5lYXJGYWN0b3IsIGIudmxhbWJkYSk7CiAgICAgICAgICB2LnZhZGQoYi52bGFtYmRhLCB2KTsKICAgICAgICAgIGIud2xhbWJkYS52bXVsKGIuYW5ndWxhckZhY3RvciwgYi53bGFtYmRhKTsKICAgICAgICAgIHcudmFkZChiLndsYW1iZGEsIHcpOwogICAgICAgIH0gLy8gU2V0IHRoZSBgLm11bHRpcGxpZXJgIHByb3BlcnR5IG9mIGVhY2ggZXF1YXRpb24KCgogICAgICAgIGxldCBsID0gZXF1YXRpb25zLmxlbmd0aDsKICAgICAgICBjb25zdCBpbnZEdCA9IDEgLyBoOwoKICAgICAgICB3aGlsZSAobC0tKSB7CiAgICAgICAgICBlcXVhdGlvbnNbbF0ubXVsdGlwbGllciA9IGxhbWJkYVtsXSAqIGludkR0OwogICAgICAgIH0KICAgICAgfQoKICAgICAgcmV0dXJuIGl0ZXI7CiAgICB9CgogIH0gLy8gSnVzdCB0ZW1wb3JhcnkgbnVtYmVyIGhvbGRlcnMgdGhhdCB3ZSB3YW50IHRvIHJldXNlIGVhY2ggaXRlcmF0aW9uLgoKCiAgY29uc3QgR1NTb2x2ZXJfc29sdmVfbGFtYmRhID0gW107CiAgY29uc3QgR1NTb2x2ZXJfc29sdmVfaW52Q3MgPSBbXTsKICBjb25zdCBHU1NvbHZlcl9zb2x2ZV9CcyA9IFtdOwogIC8qKgogICAqIFNwbGl0cyB0aGUgZXF1YXRpb25zIGludG8gaXNsYW5kcyBhbmQgc29sdmVzIHRoZW0gaW5kZXBlbmRlbnRseS4gQ2FuIGltcHJvdmUgcGVyZm9ybWFuY2UuCiAgICovCgogIGNsYXNzIFNwbGl0U29sdmVyIGV4dGVuZHMgU29sdmVyIHsKICAgIC8qKgogICAgICogVGhlIG51bWJlciBvZiBzb2x2ZXIgaXRlcmF0aW9ucyBkZXRlcm1pbmVzIHF1YWxpdHkgb2YgdGhlIGNvbnN0cmFpbnRzIGluIHRoZSB3b3JsZC4gVGhlIG1vcmUgaXRlcmF0aW9ucywgdGhlIG1vcmUgY29ycmVjdCBzaW11bGF0aW9uLiBNb3JlIGl0ZXJhdGlvbnMgbmVlZCBtb3JlIGNvbXB1dGF0aW9ucyB0aG91Z2guIElmIHlvdSBoYXZlIGEgbGFyZ2UgZ3Jhdml0eSBmb3JjZSBpbiB5b3VyIHdvcmxkLCB5b3Ugd2lsbCBuZWVkIG1vcmUgaXRlcmF0aW9ucy4KICAgICAqLwoKICAgIC8qKgogICAgICogV2hlbiB0b2xlcmFuY2UgaXMgcmVhY2hlZCwgdGhlIHN5c3RlbSBpcyBhc3N1bWVkIHRvIGJlIGNvbnZlcmdlZC4KICAgICAqLwoKICAgIC8qKiBzdWJzb2x2ZXIgKi8KICAgIGNvbnN0cnVjdG9yKHN1YnNvbHZlcikgewogICAgICBzdXBlcigpOwogICAgICB0aGlzLml0ZXJhdGlvbnMgPSB2b2lkIDA7CiAgICAgIHRoaXMudG9sZXJhbmNlID0gdm9pZCAwOwogICAgICB0aGlzLnN1YnNvbHZlciA9IHZvaWQgMDsKICAgICAgdGhpcy5ub2RlcyA9IHZvaWQgMDsKICAgICAgdGhpcy5ub2RlUG9vbCA9IHZvaWQgMDsKICAgICAgdGhpcy5pdGVyYXRpb25zID0gMTA7CiAgICAgIHRoaXMudG9sZXJhbmNlID0gMWUtNzsKICAgICAgdGhpcy5zdWJzb2x2ZXIgPSBzdWJzb2x2ZXI7CiAgICAgIHRoaXMubm9kZXMgPSBbXTsKICAgICAgdGhpcy5ub2RlUG9vbCA9IFtdOyAvLyBDcmVhdGUgbmVlZGVkIG5vZGVzLCByZXVzZSBpZiBwb3NzaWJsZQoKICAgICAgd2hpbGUgKHRoaXMubm9kZVBvb2wubGVuZ3RoIDwgMTI4KSB7CiAgICAgICAgdGhpcy5ub2RlUG9vbC5wdXNoKHRoaXMuY3JlYXRlTm9kZSgpKTsKICAgICAgfQogICAgfQogICAgLyoqCiAgICAgKiBjcmVhdGVOb2RlCiAgICAgKi8KCgogICAgY3JlYXRlTm9kZSgpIHsKICAgICAgcmV0dXJuIHsKICAgICAgICBib2R5OiBudWxsLAogICAgICAgIGNoaWxkcmVuOiBbXSwKICAgICAgICBlcXM6IFtdLAogICAgICAgIHZpc2l0ZWQ6IGZhbHNlCiAgICAgIH07CiAgICB9CiAgICAvKioKICAgICAqIFNvbHZlIHRoZSBzdWJzeXN0ZW1zCiAgICAgKiBAcmV0dXJuIG51bWJlciBvZiBpdGVyYXRpb25zIHBlcmZvcm1lZAogICAgICovCgoKICAgIHNvbHZlKGR0LCB3b3JsZCkgewogICAgICBjb25zdCBub2RlcyA9IFNwbGl0U29sdmVyX3NvbHZlX25vZGVzOwogICAgICBjb25zdCBub2RlUG9vbCA9IHRoaXMubm9kZVBvb2w7CiAgICAgIGNvbnN0IGJvZGllcyA9IHdvcmxkLmJvZGllczsKICAgICAgY29uc3QgZXF1YXRpb25zID0gdGhpcy5lcXVhdGlvbnM7CiAgICAgIGNvbnN0IE5lcSA9IGVxdWF0aW9ucy5sZW5ndGg7CiAgICAgIGNvbnN0IE5ib2RpZXMgPSBib2RpZXMubGVuZ3RoOwogICAgICBjb25zdCBzdWJzb2x2ZXIgPSB0aGlzLnN1YnNvbHZlcjsgLy8gQ3JlYXRlIG5lZWRlZCBub2RlcywgcmV1c2UgaWYgcG9zc2libGUKCiAgICAgIHdoaWxlIChub2RlUG9vbC5sZW5ndGggPCBOYm9kaWVzKSB7CiAgICAgICAgbm9kZVBvb2wucHVzaCh0aGlzLmNyZWF0ZU5vZGUoKSk7CiAgICAgIH0KCiAgICAgIG5vZGVzLmxlbmd0aCA9IE5ib2RpZXM7CgogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IE5ib2RpZXM7IGkrKykgewogICAgICAgIG5vZGVzW2ldID0gbm9kZVBvb2xbaV07CiAgICAgIH0gLy8gUmVzZXQgbm9kZSB2YWx1ZXMKCgogICAgICBmb3IgKGxldCBpID0gMDsgaSAhPT0gTmJvZGllczsgaSsrKSB7CiAgICAgICAgY29uc3Qgbm9kZSA9IG5vZGVzW2ldOwogICAgICAgIG5vZGUuYm9keSA9IGJvZGllc1tpXTsKICAgICAgICBub2RlLmNoaWxkcmVuLmxlbmd0aCA9IDA7CiAgICAgICAgbm9kZS5lcXMubGVuZ3RoID0gMDsKICAgICAgICBub2RlLnZpc2l0ZWQgPSBmYWxzZTsKICAgICAgfQoKICAgICAgZm9yIChsZXQgayA9IDA7IGsgIT09IE5lcTsgaysrKSB7CiAgICAgICAgY29uc3QgZXEgPSBlcXVhdGlvbnNba107CiAgICAgICAgY29uc3QgaSA9IGJvZGllcy5pbmRleE9mKGVxLmJpKTsKICAgICAgICBjb25zdCBqID0gYm9kaWVzLmluZGV4T2YoZXEuYmopOwogICAgICAgIGNvbnN0IG5pID0gbm9kZXNbaV07CiAgICAgICAgY29uc3QgbmogPSBub2Rlc1tqXTsKICAgICAgICBuaS5jaGlsZHJlbi5wdXNoKG5qKTsKICAgICAgICBuaS5lcXMucHVzaChlcSk7CiAgICAgICAgbmouY2hpbGRyZW4ucHVzaChuaSk7CiAgICAgICAgbmouZXFzLnB1c2goZXEpOwogICAgICB9CgogICAgICBsZXQgY2hpbGQ7CiAgICAgIGxldCBuID0gMDsKICAgICAgbGV0IGVxcyA9IFNwbGl0U29sdmVyX3NvbHZlX2VxczsKICAgICAgc3Vic29sdmVyLnRvbGVyYW5jZSA9IHRoaXMudG9sZXJhbmNlOwogICAgICBzdWJzb2x2ZXIuaXRlcmF0aW9ucyA9IHRoaXMuaXRlcmF0aW9uczsKICAgICAgY29uc3QgZHVtbXlXb3JsZCA9IFNwbGl0U29sdmVyX3NvbHZlX2R1bW15V29ybGQ7CgogICAgICB3aGlsZSAoY2hpbGQgPSBnZXRVbnZpc2l0ZWROb2RlKG5vZGVzKSkgewogICAgICAgIGVxcy5sZW5ndGggPSAwOwogICAgICAgIGR1bW15V29ybGQuYm9kaWVzLmxlbmd0aCA9IDA7CiAgICAgICAgYmZzKGNoaWxkLCB2aXNpdEZ1bmMsIGR1bW15V29ybGQuYm9kaWVzLCBlcXMpOwogICAgICAgIGNvbnN0IE5lcXMgPSBlcXMubGVuZ3RoOwogICAgICAgIGVxcyA9IGVxcy5zb3J0KHNvcnRCeUlkKTsKCiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgIT09IE5lcXM7IGkrKykgewogICAgICAgICAgc3Vic29sdmVyLmFkZEVxdWF0aW9uKGVxc1tpXSk7CiAgICAgICAgfQoKICAgICAgICBzdWJzb2x2ZXIuc29sdmUoZHQsIGR1bW15V29ybGQpOwogICAgICAgIHN1YnNvbHZlci5yZW1vdmVBbGxFcXVhdGlvbnMoKTsKICAgICAgICBuKys7CiAgICAgIH0KCiAgICAgIHJldHVybiBuOwogICAgfQoKICB9IC8vIFJldHVybnMgdGhlIG51bWJlciBvZiBzdWJzeXN0ZW1zCgoKICBjb25zdCBTcGxpdFNvbHZlcl9zb2x2ZV9ub2RlcyA9IFtdOyAvLyBBbGwgYWxsb2NhdGVkIG5vZGUgb2JqZWN0cwoKICBjb25zdCBTcGxpdFNvbHZlcl9zb2x2ZV9lcXMgPSBbXTsgLy8gVGVtcCBhcnJheQoKICBjb25zdCBTcGxpdFNvbHZlcl9zb2x2ZV9kdW1teVdvcmxkID0gewogICAgYm9kaWVzOiBbXQogIH07IC8vIFRlbXAgb2JqZWN0CgogIGNvbnN0IFNUQVRJQyA9IEJvZHkuU1RBVElDOwoKICBmdW5jdGlvbiBnZXRVbnZpc2l0ZWROb2RlKG5vZGVzKSB7CiAgICBjb25zdCBObm9kZXMgPSBub2Rlcy5sZW5ndGg7CgogICAgZm9yIChsZXQgaSA9IDA7IGkgIT09IE5ub2RlczsgaSsrKSB7CiAgICAgIGNvbnN0IG5vZGUgPSBub2Rlc1tpXTsKCiAgICAgIGlmICghbm9kZS52aXNpdGVkICYmICEobm9kZS5ib2R5LnR5cGUgJiBTVEFUSUMpKSB7CiAgICAgICAgcmV0dXJuIG5vZGU7CiAgICAgIH0KICAgIH0KCiAgICByZXR1cm4gZmFsc2U7CiAgfQoKICBjb25zdCBxdWV1ZSA9IFtdOwoKICBmdW5jdGlvbiBiZnMocm9vdCwgdmlzaXRGdW5jLCBiZHMsIGVxcykgewogICAgcXVldWUucHVzaChyb290KTsKICAgIHJvb3QudmlzaXRlZCA9IHRydWU7CiAgICB2aXNpdEZ1bmMocm9vdCwgYmRzLCBlcXMpOwoKICAgIHdoaWxlIChxdWV1ZS5sZW5ndGgpIHsKICAgICAgY29uc3Qgbm9kZSA9IHF1ZXVlLnBvcCgpOyAvLyBMb29wIG92ZXIgdW52aXNpdGVkIGNoaWxkIG5vZGVzCgogICAgICBsZXQgY2hpbGQ7CgogICAgICB3aGlsZSAoY2hpbGQgPSBnZXRVbnZpc2l0ZWROb2RlKG5vZGUuY2hpbGRyZW4pKSB7CiAgICAgICAgY2hpbGQudmlzaXRlZCA9IHRydWU7CiAgICAgICAgdmlzaXRGdW5jKGNoaWxkLCBiZHMsIGVxcyk7CiAgICAgICAgcXVldWUucHVzaChjaGlsZCk7CiAgICAgIH0KICAgIH0KICB9CgogIGZ1bmN0aW9uIHZpc2l0RnVuYyhub2RlLCBiZHMsIGVxcykgewogICAgYmRzLnB1c2gobm9kZS5ib2R5KTsKICAgIGNvbnN0IE5lcXMgPSBub2RlLmVxcy5sZW5ndGg7CgogICAgZm9yIChsZXQgaSA9IDA7IGkgIT09IE5lcXM7IGkrKykgewogICAgICBjb25zdCBlcSA9IG5vZGUuZXFzW2ldOwoKICAgICAgaWYgKCFlcXMuaW5jbHVkZXMoZXEpKSB7CiAgICAgICAgZXFzLnB1c2goZXEpOwogICAgICB9CiAgICB9CiAgfQoKICBmdW5jdGlvbiBzb3J0QnlJZChhLCBiKSB7CiAgICByZXR1cm4gYi5pZCAtIGEuaWQ7CiAgfQogIC8qKgogICAqIEZvciBwb29saW5nIG9iamVjdHMgdGhhdCBjYW4gYmUgcmV1c2VkLgogICAqLwoKCiAgY2xhc3MgUG9vbCB7CiAgICBjb25zdHJ1Y3RvcigpIHsKICAgICAgdGhpcy5vYmplY3RzID0gW107CiAgICAgIHRoaXMudHlwZSA9IE9iamVjdDsKICAgIH0KICAgIC8qKgogICAgICogUmVsZWFzZSBhbiBvYmplY3QgYWZ0ZXIgdXNlCiAgICAgKi8KCgogICAgcmVsZWFzZSgpIHsKICAgICAgY29uc3QgTmFyZ3MgPSBhcmd1bWVudHMubGVuZ3RoOwoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgIT09IE5hcmdzOyBpKyspIHsKICAgICAgICB0aGlzLm9iamVjdHMucHVzaChpIDwgMCB8fCBhcmd1bWVudHMubGVuZ3RoIDw9IGkgPyB1bmRlZmluZWQgOiBhcmd1bWVudHNbaV0pOwogICAgICB9CgogICAgICByZXR1cm4gdGhpczsKICAgIH0KICAgIC8qKgogICAgICogR2V0IGFuIG9iamVjdAogICAgICovCgoKICAgIGdldCgpIHsKICAgICAgaWYgKHRoaXMub2JqZWN0cy5sZW5ndGggPT09IDApIHsKICAgICAgICByZXR1cm4gdGhpcy5jb25zdHJ1Y3RPYmplY3QoKTsKICAgICAgfSBlbHNlIHsKICAgICAgICByZXR1cm4gdGhpcy5vYmplY3RzLnBvcCgpOwogICAgICB9CiAgICB9CiAgICAvKioKICAgICAqIENvbnN0cnVjdCBhbiBvYmplY3QuIFNob3VsZCBiZSBpbXBsZW1lbnRlZCBpbiBlYWNoIHN1YmNsYXNzLgogICAgICovCgoKICAgIGNvbnN0cnVjdE9iamVjdCgpIHsKICAgICAgdGhyb3cgbmV3IEVycm9yKCdjb25zdHJ1Y3RPYmplY3QoKSBub3QgaW1wbGVtZW50ZWQgaW4gdGhpcyBQb29sIHN1YmNsYXNzIHlldCEnKTsKICAgIH0KICAgIC8qKgogICAgICogQHJldHVybiBTZWxmLCBmb3IgY2hhaW5pbmcKICAgICAqLwoKCiAgICByZXNpemUoc2l6ZSkgewogICAgICBjb25zdCBvYmplY3RzID0gdGhpcy5vYmplY3RzOwoKICAgICAgd2hpbGUgKG9iamVjdHMubGVuZ3RoID4gc2l6ZSkgewogICAgICAgIG9iamVjdHMucG9wKCk7CiAgICAgIH0KCiAgICAgIHdoaWxlIChvYmplY3RzLmxlbmd0aCA8IHNpemUpIHsKICAgICAgICBvYmplY3RzLnB1c2godGhpcy5jb25zdHJ1Y3RPYmplY3QoKSk7CiAgICAgIH0KCiAgICAgIHJldHVybiB0aGlzOwogICAgfQoKICB9CiAgLyoqCiAgICogVmVjM1Bvb2wKICAgKi8KCgogIGNsYXNzIFZlYzNQb29sIGV4dGVuZHMgUG9vbCB7CiAgICBjb25zdHJ1Y3RvcigpIHsKICAgICAgc3VwZXIoLi4uYXJndW1lbnRzKTsKICAgICAgdGhpcy50eXBlID0gVmVjMzsKICAgIH0KICAgIC8qKgogICAgICogQ29uc3RydWN0IGEgdmVjdG9yCiAgICAgKi8KCgogICAgY29uc3RydWN0T2JqZWN0KCkgewogICAgICByZXR1cm4gbmV3IFZlYzMoKTsKICAgIH0KCiAgfQoKICBsZXQgX0NPTExJU0lPTl9UWVBFUyRzcGhlLCBfQ09MTElTSU9OX1RZUEVTJHNwaGUyLCBfQ09MTElTSU9OX1RZUEVTJGJveEIsIF9DT0xMSVNJT05fVFlQRVMkc3BoZTMsIF9DT0xMSVNJT05fVFlQRVMkcGxhbiwgX0NPTExJU0lPTl9UWVBFUyRjb252LCBfQ09MTElTSU9OX1RZUEVTJHNwaGU0LCBfQ09MTElTSU9OX1RZUEVTJHBsYW4yLCBfQ09MTElTSU9OX1RZUEVTJGJveEMsIF9DT0xMSVNJT05fVFlQRVMkc3BoZTUsIF9DT0xMSVNJT05fVFlQRVMkYm94SCwgX0NPTExJU0lPTl9UWVBFUyRjb252MiwgX0NPTExJU0lPTl9UWVBFUyRzcGhlNiwgX0NPTExJU0lPTl9UWVBFUyRwbGFuMywgX0NPTExJU0lPTl9UWVBFUyRib3hQLCBfQ09MTElTSU9OX1RZUEVTJGNvbnYzLCBfQ09MTElTSU9OX1RZUEVTJGN5bGksIF9DT0xMSVNJT05fVFlQRVMkc3BoZTcsIF9DT0xMSVNJT05fVFlQRVMkcGxhbjQsIF9DT0xMSVNJT05fVFlQRVMkYm94QzIsIF9DT0xMSVNJT05fVFlQRVMkY29udjQsIF9DT0xMSVNJT05fVFlQRVMkaGVpZywgX0NPTExJU0lPTl9UWVBFUyRwYXJ0LCBfQ09MTElTSU9OX1RZUEVTJHNwaGU4LCBfQ09MTElTSU9OX1RZUEVTJHBsYW41OyAvLyBOYW1pbmcgcnVsZTogYmFzZWQgb2YgdGhlIG9yZGVyIGluIFNIQVBFX1RZUEVTLAogIC8vIHRoZSBmaXJzdCBwYXJ0IG9mIHRoZSBtZXRob2QgaXMgZm9ybWVkIGJ5IHRoZQogIC8vIHNoYXBlIHR5cGUgdGhhdCBjb21lcyBiZWZvcmUsIGluIHRoZSBzZWNvbmQgcGFydAogIC8vIHRoZXJlIGlzIHRoZSBzaGFwZSB0eXBlIHRoYXQgY29tZXMgYWZ0ZXIgaW4gdGhlIFNIQVBFX1RZUEVTIGxpc3QKCgogIGNvbnN0IENPTExJU0lPTl9UWVBFUyA9IHsKICAgIHNwaGVyZVNwaGVyZTogU2hhcGUudHlwZXMuU1BIRVJFLAogICAgc3BoZXJlUGxhbmU6IFNoYXBlLnR5cGVzLlNQSEVSRSB8IFNoYXBlLnR5cGVzLlBMQU5FLAogICAgYm94Qm94OiBTaGFwZS50eXBlcy5CT1ggfCBTaGFwZS50eXBlcy5CT1gsCiAgICBzcGhlcmVCb3g6IFNoYXBlLnR5cGVzLlNQSEVSRSB8IFNoYXBlLnR5cGVzLkJPWCwKICAgIHBsYW5lQm94OiBTaGFwZS50eXBlcy5QTEFORSB8IFNoYXBlLnR5cGVzLkJPWCwKICAgIGNvbnZleENvbnZleDogU2hhcGUudHlwZXMuQ09OVkVYUE9MWUhFRFJPTiwKICAgIHNwaGVyZUNvbnZleDogU2hhcGUudHlwZXMuU1BIRVJFIHwgU2hhcGUudHlwZXMuQ09OVkVYUE9MWUhFRFJPTiwKICAgIHBsYW5lQ29udmV4OiBTaGFwZS50eXBlcy5QTEFORSB8IFNoYXBlLnR5cGVzLkNPTlZFWFBPTFlIRURST04sCiAgICBib3hDb252ZXg6IFNoYXBlLnR5cGVzLkJPWCB8IFNoYXBlLnR5cGVzLkNPTlZFWFBPTFlIRURST04sCiAgICBzcGhlcmVIZWlnaHRmaWVsZDogU2hhcGUudHlwZXMuU1BIRVJFIHwgU2hhcGUudHlwZXMuSEVJR0hURklFTEQsCiAgICBib3hIZWlnaHRmaWVsZDogU2hhcGUudHlwZXMuQk9YIHwgU2hhcGUudHlwZXMuSEVJR0hURklFTEQsCiAgICBjb252ZXhIZWlnaHRmaWVsZDogU2hhcGUudHlwZXMuQ09OVkVYUE9MWUhFRFJPTiB8IFNoYXBlLnR5cGVzLkhFSUdIVEZJRUxELAogICAgc3BoZXJlUGFydGljbGU6IFNoYXBlLnR5cGVzLlBBUlRJQ0xFIHwgU2hhcGUudHlwZXMuU1BIRVJFLAogICAgcGxhbmVQYXJ0aWNsZTogU2hhcGUudHlwZXMuUExBTkUgfCBTaGFwZS50eXBlcy5QQVJUSUNMRSwKICAgIGJveFBhcnRpY2xlOiBTaGFwZS50eXBlcy5CT1ggfCBTaGFwZS50eXBlcy5QQVJUSUNMRSwKICAgIGNvbnZleFBhcnRpY2xlOiBTaGFwZS50eXBlcy5QQVJUSUNMRSB8IFNoYXBlLnR5cGVzLkNPTlZFWFBPTFlIRURST04sCiAgICBjeWxpbmRlckN5bGluZGVyOiBTaGFwZS50eXBlcy5DWUxJTkRFUiwKICAgIHNwaGVyZUN5bGluZGVyOiBTaGFwZS50eXBlcy5TUEhFUkUgfCBTaGFwZS50eXBlcy5DWUxJTkRFUiwKICAgIHBsYW5lQ3lsaW5kZXI6IFNoYXBlLnR5cGVzLlBMQU5FIHwgU2hhcGUudHlwZXMuQ1lMSU5ERVIsCiAgICBib3hDeWxpbmRlcjogU2hhcGUudHlwZXMuQk9YIHwgU2hhcGUudHlwZXMuQ1lMSU5ERVIsCiAgICBjb252ZXhDeWxpbmRlcjogU2hhcGUudHlwZXMuQ09OVkVYUE9MWUhFRFJPTiB8IFNoYXBlLnR5cGVzLkNZTElOREVSLAogICAgaGVpZ2h0ZmllbGRDeWxpbmRlcjogU2hhcGUudHlwZXMuSEVJR0hURklFTEQgfCBTaGFwZS50eXBlcy5DWUxJTkRFUiwKICAgIHBhcnRpY2xlQ3lsaW5kZXI6IFNoYXBlLnR5cGVzLlBBUlRJQ0xFIHwgU2hhcGUudHlwZXMuQ1lMSU5ERVIsCiAgICBzcGhlcmVUcmltZXNoOiBTaGFwZS50eXBlcy5TUEhFUkUgfCBTaGFwZS50eXBlcy5UUklNRVNILAogICAgcGxhbmVUcmltZXNoOiBTaGFwZS50eXBlcy5QTEFORSB8IFNoYXBlLnR5cGVzLlRSSU1FU0gKICB9OwogIF9DT0xMSVNJT05fVFlQRVMkc3BoZSA9IENPTExJU0lPTl9UWVBFUy5zcGhlcmVTcGhlcmU7CiAgX0NPTExJU0lPTl9UWVBFUyRzcGhlMiA9IENPTExJU0lPTl9UWVBFUy5zcGhlcmVQbGFuZTsKICBfQ09MTElTSU9OX1RZUEVTJGJveEIgPSBDT0xMSVNJT05fVFlQRVMuYm94Qm94OwogIF9DT0xMSVNJT05fVFlQRVMkc3BoZTMgPSBDT0xMSVNJT05fVFlQRVMuc3BoZXJlQm94OwogIF9DT0xMSVNJT05fVFlQRVMkcGxhbiA9IENPTExJU0lPTl9UWVBFUy5wbGFuZUJveDsKICBfQ09MTElTSU9OX1RZUEVTJGNvbnYgPSBDT0xMSVNJT05fVFlQRVMuY29udmV4Q29udmV4OwogIF9DT0xMSVNJT05fVFlQRVMkc3BoZTQgPSBDT0xMSVNJT05fVFlQRVMuc3BoZXJlQ29udmV4OwogIF9DT0xMSVNJT05fVFlQRVMkcGxhbjIgPSBDT0xMSVNJT05fVFlQRVMucGxhbmVDb252ZXg7CiAgX0NPTExJU0lPTl9UWVBFUyRib3hDID0gQ09MTElTSU9OX1RZUEVTLmJveENvbnZleDsKICBfQ09MTElTSU9OX1RZUEVTJHNwaGU1ID0gQ09MTElTSU9OX1RZUEVTLnNwaGVyZUhlaWdodGZpZWxkOwogIF9DT0xMSVNJT05fVFlQRVMkYm94SCA9IENPTExJU0lPTl9UWVBFUy5ib3hIZWlnaHRmaWVsZDsKICBfQ09MTElTSU9OX1RZUEVTJGNvbnYyID0gQ09MTElTSU9OX1RZUEVTLmNvbnZleEhlaWdodGZpZWxkOwogIF9DT0xMSVNJT05fVFlQRVMkc3BoZTYgPSBDT0xMSVNJT05fVFlQRVMuc3BoZXJlUGFydGljbGU7CiAgX0NPTExJU0lPTl9UWVBFUyRwbGFuMyA9IENPTExJU0lPTl9UWVBFUy5wbGFuZVBhcnRpY2xlOwogIF9DT0xMSVNJT05fVFlQRVMkYm94UCA9IENPTExJU0lPTl9UWVBFUy5ib3hQYXJ0aWNsZTsKICBfQ09MTElTSU9OX1RZUEVTJGNvbnYzID0gQ09MTElTSU9OX1RZUEVTLmNvbnZleFBhcnRpY2xlOwogIF9DT0xMSVNJT05fVFlQRVMkY3lsaSA9IENPTExJU0lPTl9UWVBFUy5jeWxpbmRlckN5bGluZGVyOwogIF9DT0xMSVNJT05fVFlQRVMkc3BoZTcgPSBDT0xMSVNJT05fVFlQRVMuc3BoZXJlQ3lsaW5kZXI7CiAgX0NPTExJU0lPTl9UWVBFUyRwbGFuNCA9IENPTExJU0lPTl9UWVBFUy5wbGFuZUN5bGluZGVyOwogIF9DT0xMSVNJT05fVFlQRVMkYm94QzIgPSBDT0xMSVNJT05fVFlQRVMuYm94Q3lsaW5kZXI7CiAgX0NPTExJU0lPTl9UWVBFUyRjb252NCA9IENPTExJU0lPTl9UWVBFUy5jb252ZXhDeWxpbmRlcjsKICBfQ09MTElTSU9OX1RZUEVTJGhlaWcgPSBDT0xMSVNJT05fVFlQRVMuaGVpZ2h0ZmllbGRDeWxpbmRlcjsKICBfQ09MTElTSU9OX1RZUEVTJHBhcnQgPSBDT0xMSVNJT05fVFlQRVMucGFydGljbGVDeWxpbmRlcjsKICBfQ09MTElTSU9OX1RZUEVTJHNwaGU4ID0gQ09MTElTSU9OX1RZUEVTLnNwaGVyZVRyaW1lc2g7CiAgX0NPTExJU0lPTl9UWVBFUyRwbGFuNSA9IENPTExJU0lPTl9UWVBFUy5wbGFuZVRyaW1lc2g7CiAgLyoqCiAgICogSGVscGVyIGNsYXNzIGZvciB0aGUgV29ybGQuIEdlbmVyYXRlcyBDb250YWN0RXF1YXRpb25zLgogICAqIEB0b2RvIFNwaGVyZS1Db252ZXhQb2x5aGVkcm9uIGNvbnRhY3RzCiAgICogQHRvZG8gQ29udGFjdCByZWR1Y3Rpb24KICAgKiBAdG9kbyBzaG91bGQgbW92ZSBtZXRob2RzIHRvIHByb3RvdHlwZQogICAqLwoKICBjbGFzcyBOYXJyb3dwaGFzZSB7CiAgICAvKioKICAgICAqIEludGVybmFsIHN0b3JhZ2Ugb2YgcG9vbGVkIGNvbnRhY3QgcG9pbnRzLgogICAgICovCgogICAgLyoqCiAgICAgKiBQb29sZWQgdmVjdG9ycy4KICAgICAqLwogICAgZ2V0IFtfQ09MTElTSU9OX1RZUEVTJHNwaGVdKCkgewogICAgICByZXR1cm4gdGhpcy5zcGhlcmVTcGhlcmU7CiAgICB9CgogICAgZ2V0IFtfQ09MTElTSU9OX1RZUEVTJHNwaGUyXSgpIHsKICAgICAgcmV0dXJuIHRoaXMuc3BoZXJlUGxhbmU7CiAgICB9CgogICAgZ2V0IFtfQ09MTElTSU9OX1RZUEVTJGJveEJdKCkgewogICAgICByZXR1cm4gdGhpcy5ib3hCb3g7CiAgICB9CgogICAgZ2V0IFtfQ09MTElTSU9OX1RZUEVTJHNwaGUzXSgpIHsKICAgICAgcmV0dXJuIHRoaXMuc3BoZXJlQm94OwogICAgfQoKICAgIGdldCBbX0NPTExJU0lPTl9UWVBFUyRwbGFuXSgpIHsKICAgICAgcmV0dXJuIHRoaXMucGxhbmVCb3g7CiAgICB9CgogICAgZ2V0IFtfQ09MTElTSU9OX1RZUEVTJGNvbnZdKCkgewogICAgICByZXR1cm4gdGhpcy5jb252ZXhDb252ZXg7CiAgICB9CgogICAgZ2V0IFtfQ09MTElTSU9OX1RZUEVTJHNwaGU0XSgpIHsKICAgICAgcmV0dXJuIHRoaXMuc3BoZXJlQ29udmV4OwogICAgfQoKICAgIGdldCBbX0NPTExJU0lPTl9UWVBFUyRwbGFuMl0oKSB7CiAgICAgIHJldHVybiB0aGlzLnBsYW5lQ29udmV4OwogICAgfQoKICAgIGdldCBbX0NPTExJU0lPTl9UWVBFUyRib3hDXSgpIHsKICAgICAgcmV0dXJuIHRoaXMuYm94Q29udmV4OwogICAgfQoKICAgIGdldCBbX0NPTExJU0lPTl9UWVBFUyRzcGhlNV0oKSB7CiAgICAgIHJldHVybiB0aGlzLnNwaGVyZUhlaWdodGZpZWxkOwogICAgfQoKICAgIGdldCBbX0NPTExJU0lPTl9UWVBFUyRib3hIXSgpIHsKICAgICAgcmV0dXJuIHRoaXMuYm94SGVpZ2h0ZmllbGQ7CiAgICB9CgogICAgZ2V0IFtfQ09MTElTSU9OX1RZUEVTJGNvbnYyXSgpIHsKICAgICAgcmV0dXJuIHRoaXMuY29udmV4SGVpZ2h0ZmllbGQ7CiAgICB9CgogICAgZ2V0IFtfQ09MTElTSU9OX1RZUEVTJHNwaGU2XSgpIHsKICAgICAgcmV0dXJuIHRoaXMuc3BoZXJlUGFydGljbGU7CiAgICB9CgogICAgZ2V0IFtfQ09MTElTSU9OX1RZUEVTJHBsYW4zXSgpIHsKICAgICAgcmV0dXJuIHRoaXMucGxhbmVQYXJ0aWNsZTsKICAgIH0KCiAgICBnZXQgW19DT0xMSVNJT05fVFlQRVMkYm94UF0oKSB7CiAgICAgIHJldHVybiB0aGlzLmJveFBhcnRpY2xlOwogICAgfQoKICAgIGdldCBbX0NPTExJU0lPTl9UWVBFUyRjb252M10oKSB7CiAgICAgIHJldHVybiB0aGlzLmNvbnZleFBhcnRpY2xlOwogICAgfQoKICAgIGdldCBbX0NPTExJU0lPTl9UWVBFUyRjeWxpXSgpIHsKICAgICAgcmV0dXJuIHRoaXMuY29udmV4Q29udmV4OwogICAgfQoKICAgIGdldCBbX0NPTExJU0lPTl9UWVBFUyRzcGhlN10oKSB7CiAgICAgIHJldHVybiB0aGlzLnNwaGVyZUNvbnZleDsKICAgIH0KCiAgICBnZXQgW19DT0xMSVNJT05fVFlQRVMkcGxhbjRdKCkgewogICAgICByZXR1cm4gdGhpcy5wbGFuZUNvbnZleDsKICAgIH0KCiAgICBnZXQgW19DT0xMSVNJT05fVFlQRVMkYm94QzJdKCkgewogICAgICByZXR1cm4gdGhpcy5ib3hDb252ZXg7CiAgICB9CgogICAgZ2V0IFtfQ09MTElTSU9OX1RZUEVTJGNvbnY0XSgpIHsKICAgICAgcmV0dXJuIHRoaXMuY29udmV4Q29udmV4OwogICAgfQoKICAgIGdldCBbX0NPTExJU0lPTl9UWVBFUyRoZWlnXSgpIHsKICAgICAgcmV0dXJuIHRoaXMuaGVpZ2h0ZmllbGRDeWxpbmRlcjsKICAgIH0KCiAgICBnZXQgW19DT0xMSVNJT05fVFlQRVMkcGFydF0oKSB7CiAgICAgIHJldHVybiB0aGlzLnBhcnRpY2xlQ3lsaW5kZXI7CiAgICB9CgogICAgZ2V0IFtfQ09MTElTSU9OX1RZUEVTJHNwaGU4XSgpIHsKICAgICAgcmV0dXJuIHRoaXMuc3BoZXJlVHJpbWVzaDsKICAgIH0KCiAgICBnZXQgW19DT0xMSVNJT05fVFlQRVMkcGxhbjVdKCkgewogICAgICByZXR1cm4gdGhpcy5wbGFuZVRyaW1lc2g7CiAgICB9IC8vIGdldCBbQ09MTElTSU9OX1RZUEVTLmNvbnZleFRyaW1lc2hdKCkgewogICAgLy8gICByZXR1cm4gdGhpcy5jb252ZXhUcmltZXNoCiAgICAvLyB9CgoKICAgIGNvbnN0cnVjdG9yKHdvcmxkKSB7CiAgICAgIHRoaXMuY29udGFjdFBvaW50UG9vbCA9IHZvaWQgMDsKICAgICAgdGhpcy5mcmljdGlvbkVxdWF0aW9uUG9vbCA9IHZvaWQgMDsKICAgICAgdGhpcy5yZXN1bHQgPSB2b2lkIDA7CiAgICAgIHRoaXMuZnJpY3Rpb25SZXN1bHQgPSB2b2lkIDA7CiAgICAgIHRoaXMudjNwb29sID0gdm9pZCAwOwogICAgICB0aGlzLndvcmxkID0gdm9pZCAwOwogICAgICB0aGlzLmN1cnJlbnRDb250YWN0TWF0ZXJpYWwgPSB2b2lkIDA7CiAgICAgIHRoaXMuZW5hYmxlRnJpY3Rpb25SZWR1Y3Rpb24gPSB2b2lkIDA7CiAgICAgIHRoaXMuY29udGFjdFBvaW50UG9vbCA9IFtdOwogICAgICB0aGlzLmZyaWN0aW9uRXF1YXRpb25Qb29sID0gW107CiAgICAgIHRoaXMucmVzdWx0ID0gW107CiAgICAgIHRoaXMuZnJpY3Rpb25SZXN1bHQgPSBbXTsKICAgICAgdGhpcy52M3Bvb2wgPSBuZXcgVmVjM1Bvb2woKTsKICAgICAgdGhpcy53b3JsZCA9IHdvcmxkOwogICAgICB0aGlzLmN1cnJlbnRDb250YWN0TWF0ZXJpYWwgPSB3b3JsZC5kZWZhdWx0Q29udGFjdE1hdGVyaWFsOwogICAgICB0aGlzLmVuYWJsZUZyaWN0aW9uUmVkdWN0aW9uID0gZmFsc2U7CiAgICB9CiAgICAvKioKICAgICAqIE1ha2UgYSBjb250YWN0IG9iamVjdCwgYnkgdXNpbmcgdGhlIGludGVybmFsIHBvb2wgb3IgY3JlYXRpbmcgYSBuZXcgb25lLgogICAgICovCgoKICAgIGNyZWF0ZUNvbnRhY3RFcXVhdGlvbihiaSwgYmosIHNpLCBzaiwgb3ZlcnJpZGVTaGFwZUEsIG92ZXJyaWRlU2hhcGVCKSB7CiAgICAgIGxldCBjOwoKICAgICAgaWYgKHRoaXMuY29udGFjdFBvaW50UG9vbC5sZW5ndGgpIHsKICAgICAgICBjID0gdGhpcy5jb250YWN0UG9pbnRQb29sLnBvcCgpOwogICAgICAgIGMuYmkgPSBiaTsKICAgICAgICBjLmJqID0gYmo7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgYyA9IG5ldyBDb250YWN0RXF1YXRpb24oYmksIGJqKTsKICAgICAgfQoKICAgICAgYy5lbmFibGVkID0gYmkuY29sbGlzaW9uUmVzcG9uc2UgJiYgYmouY29sbGlzaW9uUmVzcG9uc2UgJiYgc2kuY29sbGlzaW9uUmVzcG9uc2UgJiYgc2ouY29sbGlzaW9uUmVzcG9uc2U7CiAgICAgIGNvbnN0IGNtID0gdGhpcy5jdXJyZW50Q29udGFjdE1hdGVyaWFsOwogICAgICBjLnJlc3RpdHV0aW9uID0gY20ucmVzdGl0dXRpb247CiAgICAgIGMuc2V0U3Bvb2tQYXJhbXMoY20uY29udGFjdEVxdWF0aW9uU3RpZmZuZXNzLCBjbS5jb250YWN0RXF1YXRpb25SZWxheGF0aW9uLCB0aGlzLndvcmxkLmR0KTsKICAgICAgY29uc3QgbWF0QSA9IHNpLm1hdGVyaWFsIHx8IGJpLm1hdGVyaWFsOwogICAgICBjb25zdCBtYXRCID0gc2oubWF0ZXJpYWwgfHwgYmoubWF0ZXJpYWw7CgogICAgICBpZiAobWF0QSAmJiBtYXRCICYmIG1hdEEucmVzdGl0dXRpb24gPj0gMCAmJiBtYXRCLnJlc3RpdHV0aW9uID49IDApIHsKICAgICAgICBjLnJlc3RpdHV0aW9uID0gbWF0QS5yZXN0aXR1dGlvbiAqIG1hdEIucmVzdGl0dXRpb247CiAgICAgIH0KCiAgICAgIGMuc2kgPSBvdmVycmlkZVNoYXBlQSB8fCBzaTsKICAgICAgYy5zaiA9IG92ZXJyaWRlU2hhcGVCIHx8IHNqOwogICAgICByZXR1cm4gYzsKICAgIH0KCiAgICBjcmVhdGVGcmljdGlvbkVxdWF0aW9uc0Zyb21Db250YWN0KGNvbnRhY3RFcXVhdGlvbiwgb3V0QXJyYXkpIHsKICAgICAgY29uc3QgYm9keUEgPSBjb250YWN0RXF1YXRpb24uYmk7CiAgICAgIGNvbnN0IGJvZHlCID0gY29udGFjdEVxdWF0aW9uLmJqOwogICAgICBjb25zdCBzaGFwZUEgPSBjb250YWN0RXF1YXRpb24uc2k7CiAgICAgIGNvbnN0IHNoYXBlQiA9IGNvbnRhY3RFcXVhdGlvbi5zajsKICAgICAgY29uc3Qgd29ybGQgPSB0aGlzLndvcmxkOwogICAgICBjb25zdCBjbSA9IHRoaXMuY3VycmVudENvbnRhY3RNYXRlcmlhbDsgLy8gSWYgZnJpY3Rpb24gb3IgcmVzdGl0dXRpb24gd2VyZSBzcGVjaWZpZWQgaW4gdGhlIG1hdGVyaWFsLCB1c2UgdGhlbQoKICAgICAgbGV0IGZyaWN0aW9uID0gY20uZnJpY3Rpb247CiAgICAgIGNvbnN0IG1hdEEgPSBzaGFwZUEubWF0ZXJpYWwgfHwgYm9keUEubWF0ZXJpYWw7CiAgICAgIGNvbnN0IG1hdEIgPSBzaGFwZUIubWF0ZXJpYWwgfHwgYm9keUIubWF0ZXJpYWw7CgogICAgICBpZiAobWF0QSAmJiBtYXRCICYmIG1hdEEuZnJpY3Rpb24gPj0gMCAmJiBtYXRCLmZyaWN0aW9uID49IDApIHsKICAgICAgICBmcmljdGlvbiA9IG1hdEEuZnJpY3Rpb24gKiBtYXRCLmZyaWN0aW9uOwogICAgICB9CgogICAgICBpZiAoZnJpY3Rpb24gPiAwKSB7CiAgICAgICAgLy8gQ3JlYXRlIDIgdGFuZ2VudCBlcXVhdGlvbnMKICAgICAgICBjb25zdCBtdWcgPSBmcmljdGlvbiAqIHdvcmxkLmdyYXZpdHkubGVuZ3RoKCk7CiAgICAgICAgbGV0IHJlZHVjZWRNYXNzID0gYm9keUEuaW52TWFzcyArIGJvZHlCLmludk1hc3M7CgogICAgICAgIGlmIChyZWR1Y2VkTWFzcyA+IDApIHsKICAgICAgICAgIHJlZHVjZWRNYXNzID0gMSAvIHJlZHVjZWRNYXNzOwogICAgICAgIH0KCiAgICAgICAgY29uc3QgcG9vbCA9IHRoaXMuZnJpY3Rpb25FcXVhdGlvblBvb2w7CiAgICAgICAgY29uc3QgYzEgPSBwb29sLmxlbmd0aCA/IHBvb2wucG9wKCkgOiBuZXcgRnJpY3Rpb25FcXVhdGlvbihib2R5QSwgYm9keUIsIG11ZyAqIHJlZHVjZWRNYXNzKTsKICAgICAgICBjb25zdCBjMiA9IHBvb2wubGVuZ3RoID8gcG9vbC5wb3AoKSA6IG5ldyBGcmljdGlvbkVxdWF0aW9uKGJvZHlBLCBib2R5QiwgbXVnICogcmVkdWNlZE1hc3MpOwogICAgICAgIGMxLmJpID0gYzIuYmkgPSBib2R5QTsKICAgICAgICBjMS5iaiA9IGMyLmJqID0gYm9keUI7CiAgICAgICAgYzEubWluRm9yY2UgPSBjMi5taW5Gb3JjZSA9IC1tdWcgKiByZWR1Y2VkTWFzczsKICAgICAgICBjMS5tYXhGb3JjZSA9IGMyLm1heEZvcmNlID0gbXVnICogcmVkdWNlZE1hc3M7IC8vIENvcHkgb3ZlciB0aGUgcmVsYXRpdmUgdmVjdG9ycwoKICAgICAgICBjMS5yaS5jb3B5KGNvbnRhY3RFcXVhdGlvbi5yaSk7CiAgICAgICAgYzEucmouY29weShjb250YWN0RXF1YXRpb24ucmopOwogICAgICAgIGMyLnJpLmNvcHkoY29udGFjdEVxdWF0aW9uLnJpKTsKICAgICAgICBjMi5yai5jb3B5KGNvbnRhY3RFcXVhdGlvbi5yaik7IC8vIENvbnN0cnVjdCB0YW5nZW50cwoKICAgICAgICBjb250YWN0RXF1YXRpb24ubmkudGFuZ2VudHMoYzEudCwgYzIudCk7IC8vIFNldCBzcG9vayBwYXJhbXMKCiAgICAgICAgYzEuc2V0U3Bvb2tQYXJhbXMoY20uZnJpY3Rpb25FcXVhdGlvblN0aWZmbmVzcywgY20uZnJpY3Rpb25FcXVhdGlvblJlbGF4YXRpb24sIHdvcmxkLmR0KTsKICAgICAgICBjMi5zZXRTcG9va1BhcmFtcyhjbS5mcmljdGlvbkVxdWF0aW9uU3RpZmZuZXNzLCBjbS5mcmljdGlvbkVxdWF0aW9uUmVsYXhhdGlvbiwgd29ybGQuZHQpOwogICAgICAgIGMxLmVuYWJsZWQgPSBjMi5lbmFibGVkID0gY29udGFjdEVxdWF0aW9uLmVuYWJsZWQ7CiAgICAgICAgb3V0QXJyYXkucHVzaChjMSwgYzIpOwogICAgICAgIHJldHVybiB0cnVlOwogICAgICB9CgogICAgICByZXR1cm4gZmFsc2U7CiAgICB9CiAgICAvKioKICAgICAqIFRha2UgdGhlIGF2ZXJhZ2UgTiBsYXRlc3QgY29udGFjdCBwb2ludCBvbiB0aGUgcGxhbmUuCiAgICAgKi8KCgogICAgY3JlYXRlRnJpY3Rpb25Gcm9tQXZlcmFnZShudW1Db250YWN0cykgewogICAgICAvLyBUaGUgbGFzdCBjb250YWN0RXF1YXRpb24KICAgICAgbGV0IGMgPSB0aGlzLnJlc3VsdFt0aGlzLnJlc3VsdC5sZW5ndGggLSAxXTsgLy8gQ3JlYXRlIHRoZSByZXN1bHQ6IHR3byAiYXZlcmFnZSIgZnJpY3Rpb24gZXF1YXRpb25zCgogICAgICBpZiAoIXRoaXMuY3JlYXRlRnJpY3Rpb25FcXVhdGlvbnNGcm9tQ29udGFjdChjLCB0aGlzLmZyaWN0aW9uUmVzdWx0KSB8fCBudW1Db250YWN0cyA9PT0gMSkgewogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgY29uc3QgZjEgPSB0aGlzLmZyaWN0aW9uUmVzdWx0W3RoaXMuZnJpY3Rpb25SZXN1bHQubGVuZ3RoIC0gMl07CiAgICAgIGNvbnN0IGYyID0gdGhpcy5mcmljdGlvblJlc3VsdFt0aGlzLmZyaWN0aW9uUmVzdWx0Lmxlbmd0aCAtIDFdOwogICAgICBhdmVyYWdlTm9ybWFsLnNldFplcm8oKTsKICAgICAgYXZlcmFnZUNvbnRhY3RQb2ludEEuc2V0WmVybygpOwogICAgICBhdmVyYWdlQ29udGFjdFBvaW50Qi5zZXRaZXJvKCk7CiAgICAgIGNvbnN0IGJvZHlBID0gYy5iaTsKICAgICAgYy5iajsKCiAgICAgIGZvciAobGV0IGkgPSAwOyBpICE9PSBudW1Db250YWN0czsgaSsrKSB7CiAgICAgICAgYyA9IHRoaXMucmVzdWx0W3RoaXMucmVzdWx0Lmxlbmd0aCAtIDEgLSBpXTsKCiAgICAgICAgaWYgKGMuYmkgIT09IGJvZHlBKSB7CiAgICAgICAgICBhdmVyYWdlTm9ybWFsLnZhZGQoYy5uaSwgYXZlcmFnZU5vcm1hbCk7CiAgICAgICAgICBhdmVyYWdlQ29udGFjdFBvaW50QS52YWRkKGMucmksIGF2ZXJhZ2VDb250YWN0UG9pbnRBKTsKICAgICAgICAgIGF2ZXJhZ2VDb250YWN0UG9pbnRCLnZhZGQoYy5yaiwgYXZlcmFnZUNvbnRhY3RQb2ludEIpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBhdmVyYWdlTm9ybWFsLnZzdWIoYy5uaSwgYXZlcmFnZU5vcm1hbCk7CiAgICAgICAgICBhdmVyYWdlQ29udGFjdFBvaW50QS52YWRkKGMucmosIGF2ZXJhZ2VDb250YWN0UG9pbnRBKTsKICAgICAgICAgIGF2ZXJhZ2VDb250YWN0UG9pbnRCLnZhZGQoYy5yaSwgYXZlcmFnZUNvbnRhY3RQb2ludEIpOwogICAgICAgIH0KICAgICAgfQoKICAgICAgY29uc3QgaW52TnVtQ29udGFjdHMgPSAxIC8gbnVtQ29udGFjdHM7CiAgICAgIGF2ZXJhZ2VDb250YWN0UG9pbnRBLnNjYWxlKGludk51bUNvbnRhY3RzLCBmMS5yaSk7CiAgICAgIGF2ZXJhZ2VDb250YWN0UG9pbnRCLnNjYWxlKGludk51bUNvbnRhY3RzLCBmMS5yaik7CiAgICAgIGYyLnJpLmNvcHkoZjEucmkpOyAvLyBTaG91bGQgYmUgdGhlIHNhbWUKCiAgICAgIGYyLnJqLmNvcHkoZjEucmopOwogICAgICBhdmVyYWdlTm9ybWFsLm5vcm1hbGl6ZSgpOwogICAgICBhdmVyYWdlTm9ybWFsLnRhbmdlbnRzKGYxLnQsIGYyLnQpOyAvLyByZXR1cm4gZXE7CiAgICB9CiAgICAvKioKICAgICAqIEdlbmVyYXRlIGFsbCBjb250YWN0cyBiZXR3ZWVuIGEgbGlzdCBvZiBib2R5IHBhaXJzCiAgICAgKiBAcGFyYW0gcDEgQXJyYXkgb2YgYm9keSBpbmRpY2VzCiAgICAgKiBAcGFyYW0gcDIgQXJyYXkgb2YgYm9keSBpbmRpY2VzCiAgICAgKiBAcGFyYW0gcmVzdWx0IEFycmF5IHRvIHN0b3JlIGdlbmVyYXRlZCBjb250YWN0cwogICAgICogQHBhcmFtIG9sZGNvbnRhY3RzIE9wdGlvbmFsLiBBcnJheSBvZiByZXVzYWJsZSBjb250YWN0IG9iamVjdHMKICAgICAqLwoKCiAgICBnZXRDb250YWN0cyhwMSwgcDIsIHdvcmxkLCByZXN1bHQsIG9sZGNvbnRhY3RzLCBmcmljdGlvblJlc3VsdCwgZnJpY3Rpb25Qb29sKSB7CiAgICAgIC8vIFNhdmUgb2xkIGNvbnRhY3Qgb2JqZWN0cwogICAgICB0aGlzLmNvbnRhY3RQb2ludFBvb2wgPSBvbGRjb250YWN0czsKICAgICAgdGhpcy5mcmljdGlvbkVxdWF0aW9uUG9vbCA9IGZyaWN0aW9uUG9vbDsKICAgICAgdGhpcy5yZXN1bHQgPSByZXN1bHQ7CiAgICAgIHRoaXMuZnJpY3Rpb25SZXN1bHQgPSBmcmljdGlvblJlc3VsdDsKICAgICAgY29uc3QgcWkgPSB0bXBRdWF0MTsKICAgICAgY29uc3QgcWogPSB0bXBRdWF0MjsKICAgICAgY29uc3QgeGkgPSB0bXBWZWMxOwogICAgICBjb25zdCB4aiA9IHRtcFZlYzI7CgogICAgICBmb3IgKGxldCBrID0gMCwgTiA9IHAxLmxlbmd0aDsgayAhPT0gTjsgaysrKSB7CiAgICAgICAgLy8gR2V0IGN1cnJlbnQgY29sbGlzaW9uIGJvZGllcwogICAgICAgIGNvbnN0IGJpID0gcDFba107CiAgICAgICAgY29uc3QgYmogPSBwMltrXTsgLy8gR2V0IGNvbnRhY3QgbWF0ZXJpYWwKCiAgICAgICAgbGV0IGJvZHlDb250YWN0TWF0ZXJpYWwgPSBudWxsOwoKICAgICAgICBpZiAoYmkubWF0ZXJpYWwgJiYgYmoubWF0ZXJpYWwpIHsKICAgICAgICAgIGJvZHlDb250YWN0TWF0ZXJpYWwgPSB3b3JsZC5nZXRDb250YWN0TWF0ZXJpYWwoYmkubWF0ZXJpYWwsIGJqLm1hdGVyaWFsKSB8fCBudWxsOwogICAgICAgIH0KCiAgICAgICAgY29uc3QganVzdFRlc3QgPSBiaS50eXBlICYgQm9keS5LSU5FTUFUSUMgJiYgYmoudHlwZSAmIEJvZHkuU1RBVElDIHx8IGJpLnR5cGUgJiBCb2R5LlNUQVRJQyAmJiBiai50eXBlICYgQm9keS5LSU5FTUFUSUMgfHwgYmkudHlwZSAmIEJvZHkuS0lORU1BVElDICYmIGJqLnR5cGUgJiBCb2R5LktJTkVNQVRJQzsKCiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBiaS5zaGFwZXMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgIGJpLnF1YXRlcm5pb24ubXVsdChiaS5zaGFwZU9yaWVudGF0aW9uc1tpXSwgcWkpOwogICAgICAgICAgYmkucXVhdGVybmlvbi52bXVsdChiaS5zaGFwZU9mZnNldHNbaV0sIHhpKTsKICAgICAgICAgIHhpLnZhZGQoYmkucG9zaXRpb24sIHhpKTsKICAgICAgICAgIGNvbnN0IHNpID0gYmkuc2hhcGVzW2ldOwoKICAgICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgYmouc2hhcGVzLmxlbmd0aDsgaisrKSB7CiAgICAgICAgICAgIC8vIENvbXB1dGUgd29ybGQgdHJhbnNmb3JtIG9mIHNoYXBlcwogICAgICAgICAgICBiai5xdWF0ZXJuaW9uLm11bHQoYmouc2hhcGVPcmllbnRhdGlvbnNbal0sIHFqKTsKICAgICAgICAgICAgYmoucXVhdGVybmlvbi52bXVsdChiai5zaGFwZU9mZnNldHNbal0sIHhqKTsKICAgICAgICAgICAgeGoudmFkZChiai5wb3NpdGlvbiwgeGopOwogICAgICAgICAgICBjb25zdCBzaiA9IGJqLnNoYXBlc1tqXTsKCiAgICAgICAgICAgIGlmICghKHNpLmNvbGxpc2lvbkZpbHRlck1hc2sgJiBzai5jb2xsaXNpb25GaWx0ZXJHcm91cCAmJiBzai5jb2xsaXNpb25GaWx0ZXJNYXNrICYgc2kuY29sbGlzaW9uRmlsdGVyR3JvdXApKSB7CiAgICAgICAgICAgICAgY29udGludWU7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGlmICh4aS5kaXN0YW5jZVRvKHhqKSA+IHNpLmJvdW5kaW5nU3BoZXJlUmFkaXVzICsgc2ouYm91bmRpbmdTcGhlcmVSYWRpdXMpIHsKICAgICAgICAgICAgICBjb250aW51ZTsKICAgICAgICAgICAgfSAvLyBHZXQgY29sbGlzaW9uIG1hdGVyaWFsCgoKICAgICAgICAgICAgbGV0IHNoYXBlQ29udGFjdE1hdGVyaWFsID0gbnVsbDsKCiAgICAgICAgICAgIGlmIChzaS5tYXRlcmlhbCAmJiBzai5tYXRlcmlhbCkgewogICAgICAgICAgICAgIHNoYXBlQ29udGFjdE1hdGVyaWFsID0gd29ybGQuZ2V0Q29udGFjdE1hdGVyaWFsKHNpLm1hdGVyaWFsLCBzai5tYXRlcmlhbCkgfHwgbnVsbDsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgdGhpcy5jdXJyZW50Q29udGFjdE1hdGVyaWFsID0gc2hhcGVDb250YWN0TWF0ZXJpYWwgfHwgYm9keUNvbnRhY3RNYXRlcmlhbCB8fCB3b3JsZC5kZWZhdWx0Q29udGFjdE1hdGVyaWFsOyAvLyBHZXQgY29udGFjdHMKCiAgICAgICAgICAgIGNvbnN0IHJlc29sdmVySW5kZXggPSBzaS50eXBlIHwgc2oudHlwZTsKICAgICAgICAgICAgY29uc3QgcmVzb2x2ZXIgPSB0aGlzW3Jlc29sdmVySW5kZXhdOwoKICAgICAgICAgICAgaWYgKHJlc29sdmVyKSB7CiAgICAgICAgICAgICAgbGV0IHJldHZhbCA9IGZhbHNlOyAvLyBUTyBETzogaW52ZXN0aWdhdGUgd2h5IHNwaGVyZVBhcnRpY2xlIGFuZCBjb252ZXhQYXJ0aWNsZQogICAgICAgICAgICAgIC8vIHJlc29sdmVycyBleHBlY3Qgc2kgYW5kIHNqIHNoYXBlcyB0byBiZSBpbiByZXZlcnNlIG9yZGVyCiAgICAgICAgICAgICAgLy8gKGkuZS4gbGFyZ2VyIGludGVnZXIgdmFsdWUgdHlwZSBmaXJzdCBpbnN0ZWFkIG9mIHNtYWxsZXIgZmlyc3QpCgogICAgICAgICAgICAgIGlmIChzaS50eXBlIDwgc2oudHlwZSkgewogICAgICAgICAgICAgICAgcmV0dmFsID0gcmVzb2x2ZXIuY2FsbCh0aGlzLCBzaSwgc2osIHhpLCB4aiwgcWksIHFqLCBiaSwgYmosIHNpLCBzaiwganVzdFRlc3QpOwogICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICByZXR2YWwgPSByZXNvbHZlci5jYWxsKHRoaXMsIHNqLCBzaSwgeGosIHhpLCBxaiwgcWksIGJqLCBiaSwgc2ksIHNqLCBqdXN0VGVzdCk7CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICBpZiAocmV0dmFsICYmIGp1c3RUZXN0KSB7CiAgICAgICAgICAgICAgICAvLyBSZWdpc3RlciBvdmVybGFwCiAgICAgICAgICAgICAgICB3b3JsZC5zaGFwZU92ZXJsYXBLZWVwZXIuc2V0KHNpLmlkLCBzai5pZCk7CiAgICAgICAgICAgICAgICB3b3JsZC5ib2R5T3ZlcmxhcEtlZXBlci5zZXQoYmkuaWQsIGJqLmlkKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KICAgIH0KCiAgICBzcGhlcmVTcGhlcmUoc2ksIHNqLCB4aSwgeGosIHFpLCBxaiwgYmksIGJqLCByc2ksIHJzaiwganVzdFRlc3QpIHsKICAgICAgaWYgKGp1c3RUZXN0KSB7CiAgICAgICAgcmV0dXJuIHhpLmRpc3RhbmNlU3F1YXJlZCh4aikgPCAoc2kucmFkaXVzICsgc2oucmFkaXVzKSAqKiAyOwogICAgICB9IC8vIFdlIHdpbGwgaGF2ZSBvbmx5IG9uZSBjb250YWN0IGluIHRoaXMgY2FzZQoKCiAgICAgIGNvbnN0IGNvbnRhY3RFcSA9IHRoaXMuY3JlYXRlQ29udGFjdEVxdWF0aW9uKGJpLCBiaiwgc2ksIHNqLCByc2ksIHJzaik7IC8vIENvbnRhY3Qgbm9ybWFsCgogICAgICB4ai52c3ViKHhpLCBjb250YWN0RXEubmkpOwogICAgICBjb250YWN0RXEubmkubm9ybWFsaXplKCk7IC8vIENvbnRhY3QgcG9pbnQgbG9jYXRpb25zCgogICAgICBjb250YWN0RXEucmkuY29weShjb250YWN0RXEubmkpOwogICAgICBjb250YWN0RXEucmouY29weShjb250YWN0RXEubmkpOwogICAgICBjb250YWN0RXEucmkuc2NhbGUoc2kucmFkaXVzLCBjb250YWN0RXEucmkpOwogICAgICBjb250YWN0RXEucmouc2NhbGUoLXNqLnJhZGl1cywgY29udGFjdEVxLnJqKTsKICAgICAgY29udGFjdEVxLnJpLnZhZGQoeGksIGNvbnRhY3RFcS5yaSk7CiAgICAgIGNvbnRhY3RFcS5yaS52c3ViKGJpLnBvc2l0aW9uLCBjb250YWN0RXEucmkpOwogICAgICBjb250YWN0RXEucmoudmFkZCh4aiwgY29udGFjdEVxLnJqKTsKICAgICAgY29udGFjdEVxLnJqLnZzdWIoYmoucG9zaXRpb24sIGNvbnRhY3RFcS5yaik7CiAgICAgIHRoaXMucmVzdWx0LnB1c2goY29udGFjdEVxKTsKICAgICAgdGhpcy5jcmVhdGVGcmljdGlvbkVxdWF0aW9uc0Zyb21Db250YWN0KGNvbnRhY3RFcSwgdGhpcy5mcmljdGlvblJlc3VsdCk7CiAgICB9CgogICAgc3BoZXJlUGxhbmUoc2ksIHNqLCB4aSwgeGosIHFpLCBxaiwgYmksIGJqLCByc2ksIHJzaiwganVzdFRlc3QpIHsKICAgICAgLy8gV2Ugd2lsbCBoYXZlIG9uZSBjb250YWN0IGluIHRoaXMgY2FzZQogICAgICBjb25zdCByID0gdGhpcy5jcmVhdGVDb250YWN0RXF1YXRpb24oYmksIGJqLCBzaSwgc2osIHJzaSwgcnNqKTsgLy8gQ29udGFjdCBub3JtYWwKCiAgICAgIHIubmkuc2V0KDAsIDAsIDEpOwogICAgICBxai52bXVsdChyLm5pLCByLm5pKTsKICAgICAgci5uaS5uZWdhdGUoci5uaSk7IC8vIGJvZHkgaSBpcyB0aGUgc3BoZXJlLCBmbGlwIG5vcm1hbAoKICAgICAgci5uaS5ub3JtYWxpemUoKTsgLy8gTmVlZGVkPwogICAgICAvLyBWZWN0b3IgZnJvbSBzcGhlcmUgY2VudGVyIHRvIGNvbnRhY3QgcG9pbnQKCiAgICAgIHIubmkuc2NhbGUoc2kucmFkaXVzLCByLnJpKTsgLy8gUHJvamVjdCBkb3duIHNwaGVyZSBvbiBwbGFuZQoKICAgICAgeGkudnN1Yih4aiwgcG9pbnRfb25fcGxhbmVfdG9fc3BoZXJlKTsKICAgICAgci5uaS5zY2FsZShyLm5pLmRvdChwb2ludF9vbl9wbGFuZV90b19zcGhlcmUpLCBwbGFuZV90b19zcGhlcmVfb3J0aG8pOwogICAgICBwb2ludF9vbl9wbGFuZV90b19zcGhlcmUudnN1YihwbGFuZV90b19zcGhlcmVfb3J0aG8sIHIucmopOyAvLyBUaGUgc3BoZXJlIHBvc2l0aW9uIHByb2plY3RlZCB0byBwbGFuZQoKICAgICAgaWYgKC1wb2ludF9vbl9wbGFuZV90b19zcGhlcmUuZG90KHIubmkpIDw9IHNpLnJhZGl1cykgewogICAgICAgIGlmIChqdXN0VGVzdCkgewogICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgfSAvLyBNYWtlIGl0IHJlbGF0aXZlIHRvIHRoZSBib2R5CgoKICAgICAgICBjb25zdCByaSA9IHIucmk7CiAgICAgICAgY29uc3QgcmogPSByLnJqOwogICAgICAgIHJpLnZhZGQoeGksIHJpKTsKICAgICAgICByaS52c3ViKGJpLnBvc2l0aW9uLCByaSk7CiAgICAgICAgcmoudmFkZCh4aiwgcmopOwogICAgICAgIHJqLnZzdWIoYmoucG9zaXRpb24sIHJqKTsKICAgICAgICB0aGlzLnJlc3VsdC5wdXNoKHIpOwogICAgICAgIHRoaXMuY3JlYXRlRnJpY3Rpb25FcXVhdGlvbnNGcm9tQ29udGFjdChyLCB0aGlzLmZyaWN0aW9uUmVzdWx0KTsKICAgICAgfQogICAgfQoKICAgIGJveEJveChzaSwgc2osIHhpLCB4aiwgcWksIHFqLCBiaSwgYmosIHJzaSwgcnNqLCBqdXN0VGVzdCkgewogICAgICBzaS5jb252ZXhQb2x5aGVkcm9uUmVwcmVzZW50YXRpb24ubWF0ZXJpYWwgPSBzaS5tYXRlcmlhbDsKICAgICAgc2ouY29udmV4UG9seWhlZHJvblJlcHJlc2VudGF0aW9uLm1hdGVyaWFsID0gc2oubWF0ZXJpYWw7CiAgICAgIHNpLmNvbnZleFBvbHloZWRyb25SZXByZXNlbnRhdGlvbi5jb2xsaXNpb25SZXNwb25zZSA9IHNpLmNvbGxpc2lvblJlc3BvbnNlOwogICAgICBzai5jb252ZXhQb2x5aGVkcm9uUmVwcmVzZW50YXRpb24uY29sbGlzaW9uUmVzcG9uc2UgPSBzai5jb2xsaXNpb25SZXNwb25zZTsKICAgICAgcmV0dXJuIHRoaXMuY29udmV4Q29udmV4KHNpLmNvbnZleFBvbHloZWRyb25SZXByZXNlbnRhdGlvbiwgc2ouY29udmV4UG9seWhlZHJvblJlcHJlc2VudGF0aW9uLCB4aSwgeGosIHFpLCBxaiwgYmksIGJqLCBzaSwgc2osIGp1c3RUZXN0KTsKICAgIH0KCiAgICBzcGhlcmVCb3goc2ksIHNqLCB4aSwgeGosIHFpLCBxaiwgYmksIGJqLCByc2ksIHJzaiwganVzdFRlc3QpIHsKICAgICAgY29uc3QgdjNwb29sID0gdGhpcy52M3Bvb2w7IC8vIHdlIHJlZmVyIHRvIHRoZSBib3ggYXMgYm9keSBqCgogICAgICBjb25zdCBzaWRlcyA9IHNwaGVyZUJveF9zaWRlczsKICAgICAgeGkudnN1Yih4aiwgYm94X3RvX3NwaGVyZSk7CiAgICAgIHNqLmdldFNpZGVOb3JtYWxzKHNpZGVzLCBxaik7CiAgICAgIGNvbnN0IFIgPSBzaS5yYWRpdXM7CiAgICAgIGxldCBmb3VuZCA9IGZhbHNlOyAvLyBTdG9yZSB0aGUgcmVzdWx0aW5nIHNpZGUgcGVuZXRyYXRpb24gaW5mbwoKICAgICAgY29uc3Qgc2lkZV9ucyA9IHNwaGVyZUJveF9zaWRlX25zOwogICAgICBjb25zdCBzaWRlX25zMSA9IHNwaGVyZUJveF9zaWRlX25zMTsKICAgICAgY29uc3Qgc2lkZV9uczIgPSBzcGhlcmVCb3hfc2lkZV9uczI7CiAgICAgIGxldCBzaWRlX2ggPSBudWxsOwogICAgICBsZXQgc2lkZV9wZW5ldHJhdGlvbnMgPSAwOwogICAgICBsZXQgc2lkZV9kb3QxID0gMDsKICAgICAgbGV0IHNpZGVfZG90MiA9IDA7CiAgICAgIGxldCBzaWRlX2Rpc3RhbmNlID0gbnVsbDsKCiAgICAgIGZvciAobGV0IGlkeCA9IDAsIG5zaWRlcyA9IHNpZGVzLmxlbmd0aDsgaWR4ICE9PSBuc2lkZXMgJiYgZm91bmQgPT09IGZhbHNlOyBpZHgrKykgewogICAgICAgIC8vIEdldCB0aGUgcGxhbmUgc2lkZSBub3JtYWwgKG5zKQogICAgICAgIGNvbnN0IG5zID0gc3BoZXJlQm94X25zOwogICAgICAgIG5zLmNvcHkoc2lkZXNbaWR4XSk7CiAgICAgICAgY29uc3QgaCA9IG5zLmxlbmd0aCgpOwogICAgICAgIG5zLm5vcm1hbGl6ZSgpOyAvLyBUaGUgbm9ybWFsL2Rpc3RhbmNlIGRvdCBwcm9kdWN0IHRlbGxzIHdoaWNoIHNpZGUgb2YgdGhlIHBsYW5lIHdlIGFyZQoKICAgICAgICBjb25zdCBkb3QgPSBib3hfdG9fc3BoZXJlLmRvdChucyk7CgogICAgICAgIGlmIChkb3QgPCBoICsgUiAmJiBkb3QgPiAwKSB7CiAgICAgICAgICAvLyBJbnRlcnNlY3RzIHBsYW5lLiBOb3cgY2hlY2sgdGhlIG90aGVyIHR3byBkaW1lbnNpb25zCiAgICAgICAgICBjb25zdCBuczEgPSBzcGhlcmVCb3hfbnMxOwogICAgICAgICAgY29uc3QgbnMyID0gc3BoZXJlQm94X25zMjsKICAgICAgICAgIG5zMS5jb3B5KHNpZGVzWyhpZHggKyAxKSAlIDNdKTsKICAgICAgICAgIG5zMi5jb3B5KHNpZGVzWyhpZHggKyAyKSAlIDNdKTsKICAgICAgICAgIGNvbnN0IGgxID0gbnMxLmxlbmd0aCgpOwogICAgICAgICAgY29uc3QgaDIgPSBuczIubGVuZ3RoKCk7CiAgICAgICAgICBuczEubm9ybWFsaXplKCk7CiAgICAgICAgICBuczIubm9ybWFsaXplKCk7CiAgICAgICAgICBjb25zdCBkb3QxID0gYm94X3RvX3NwaGVyZS5kb3QobnMxKTsKICAgICAgICAgIGNvbnN0IGRvdDIgPSBib3hfdG9fc3BoZXJlLmRvdChuczIpOwoKICAgICAgICAgIGlmIChkb3QxIDwgaDEgJiYgZG90MSA+IC1oMSAmJiBkb3QyIDwgaDIgJiYgZG90MiA+IC1oMikgewogICAgICAgICAgICBjb25zdCBkaXN0ID0gTWF0aC5hYnMoZG90IC0gaCAtIFIpOwoKICAgICAgICAgICAgaWYgKHNpZGVfZGlzdGFuY2UgPT09IG51bGwgfHwgZGlzdCA8IHNpZGVfZGlzdGFuY2UpIHsKICAgICAgICAgICAgICBzaWRlX2Rpc3RhbmNlID0gZGlzdDsKICAgICAgICAgICAgICBzaWRlX2RvdDEgPSBkb3QxOwogICAgICAgICAgICAgIHNpZGVfZG90MiA9IGRvdDI7CiAgICAgICAgICAgICAgc2lkZV9oID0gaDsKICAgICAgICAgICAgICBzaWRlX25zLmNvcHkobnMpOwogICAgICAgICAgICAgIHNpZGVfbnMxLmNvcHkobnMxKTsKICAgICAgICAgICAgICBzaWRlX25zMi5jb3B5KG5zMik7CiAgICAgICAgICAgICAgc2lkZV9wZW5ldHJhdGlvbnMrKzsKCiAgICAgICAgICAgICAgaWYgKGp1c3RUZXN0KSB7CiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KCiAgICAgIGlmIChzaWRlX3BlbmV0cmF0aW9ucykgewogICAgICAgIGZvdW5kID0gdHJ1ZTsKICAgICAgICBjb25zdCByID0gdGhpcy5jcmVhdGVDb250YWN0RXF1YXRpb24oYmksIGJqLCBzaSwgc2osIHJzaSwgcnNqKTsKICAgICAgICBzaWRlX25zLnNjYWxlKC1SLCByLnJpKTsgLy8gU3BoZXJlIHIKCiAgICAgICAgci5uaS5jb3B5KHNpZGVfbnMpOwogICAgICAgIHIubmkubmVnYXRlKHIubmkpOyAvLyBOb3JtYWwgc2hvdWxkIGJlIG91dCBvZiBzcGhlcmUKCiAgICAgICAgc2lkZV9ucy5zY2FsZShzaWRlX2gsIHNpZGVfbnMpOwogICAgICAgIHNpZGVfbnMxLnNjYWxlKHNpZGVfZG90MSwgc2lkZV9uczEpOwogICAgICAgIHNpZGVfbnMudmFkZChzaWRlX25zMSwgc2lkZV9ucyk7CiAgICAgICAgc2lkZV9uczIuc2NhbGUoc2lkZV9kb3QyLCBzaWRlX25zMik7CiAgICAgICAgc2lkZV9ucy52YWRkKHNpZGVfbnMyLCByLnJqKTsgLy8gTWFrZSByZWxhdGl2ZSB0byBib2RpZXMKCiAgICAgICAgci5yaS52YWRkKHhpLCByLnJpKTsKICAgICAgICByLnJpLnZzdWIoYmkucG9zaXRpb24sIHIucmkpOwogICAgICAgIHIucmoudmFkZCh4aiwgci5yaik7CiAgICAgICAgci5yai52c3ViKGJqLnBvc2l0aW9uLCByLnJqKTsKICAgICAgICB0aGlzLnJlc3VsdC5wdXNoKHIpOwogICAgICAgIHRoaXMuY3JlYXRlRnJpY3Rpb25FcXVhdGlvbnNGcm9tQ29udGFjdChyLCB0aGlzLmZyaWN0aW9uUmVzdWx0KTsKICAgICAgfSAvLyBDaGVjayBjb3JuZXJzCgoKICAgICAgbGV0IHJqID0gdjNwb29sLmdldCgpOwogICAgICBjb25zdCBzcGhlcmVfdG9fY29ybmVyID0gc3BoZXJlQm94X3NwaGVyZV90b19jb3JuZXI7CgogICAgICBmb3IgKGxldCBqID0gMDsgaiAhPT0gMiAmJiAhZm91bmQ7IGorKykgewogICAgICAgIGZvciAobGV0IGsgPSAwOyBrICE9PSAyICYmICFmb3VuZDsgaysrKSB7CiAgICAgICAgICBmb3IgKGxldCBsID0gMDsgbCAhPT0gMiAmJiAhZm91bmQ7IGwrKykgewogICAgICAgICAgICByai5zZXQoMCwgMCwgMCk7CgogICAgICAgICAgICBpZiAoaikgewogICAgICAgICAgICAgIHJqLnZhZGQoc2lkZXNbMF0sIHJqKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICByai52c3ViKHNpZGVzWzBdLCByaik7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGlmIChrKSB7CiAgICAgICAgICAgICAgcmoudmFkZChzaWRlc1sxXSwgcmopOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIHJqLnZzdWIoc2lkZXNbMV0sIHJqKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgaWYgKGwpIHsKICAgICAgICAgICAgICByai52YWRkKHNpZGVzWzJdLCByaik7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgcmoudnN1YihzaWRlc1syXSwgcmopOwogICAgICAgICAgICB9IC8vIFdvcmxkIHBvc2l0aW9uIG9mIGNvcm5lcgoKCiAgICAgICAgICAgIHhqLnZhZGQocmosIHNwaGVyZV90b19jb3JuZXIpOwogICAgICAgICAgICBzcGhlcmVfdG9fY29ybmVyLnZzdWIoeGksIHNwaGVyZV90b19jb3JuZXIpOwoKICAgICAgICAgICAgaWYgKHNwaGVyZV90b19jb3JuZXIubGVuZ3RoU3F1YXJlZCgpIDwgUiAqIFIpIHsKICAgICAgICAgICAgICBpZiAoanVzdFRlc3QpIHsKICAgICAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgZm91bmQgPSB0cnVlOwogICAgICAgICAgICAgIGNvbnN0IHIgPSB0aGlzLmNyZWF0ZUNvbnRhY3RFcXVhdGlvbihiaSwgYmosIHNpLCBzaiwgcnNpLCByc2opOwogICAgICAgICAgICAgIHIucmkuY29weShzcGhlcmVfdG9fY29ybmVyKTsKICAgICAgICAgICAgICByLnJpLm5vcm1hbGl6ZSgpOwogICAgICAgICAgICAgIHIubmkuY29weShyLnJpKTsKICAgICAgICAgICAgICByLnJpLnNjYWxlKFIsIHIucmkpOwogICAgICAgICAgICAgIHIucmouY29weShyaik7IC8vIE1ha2UgcmVsYXRpdmUgdG8gYm9kaWVzCgogICAgICAgICAgICAgIHIucmkudmFkZCh4aSwgci5yaSk7CiAgICAgICAgICAgICAgci5yaS52c3ViKGJpLnBvc2l0aW9uLCByLnJpKTsKICAgICAgICAgICAgICByLnJqLnZhZGQoeGosIHIucmopOwogICAgICAgICAgICAgIHIucmoudnN1Yihiai5wb3NpdGlvbiwgci5yaik7CiAgICAgICAgICAgICAgdGhpcy5yZXN1bHQucHVzaChyKTsKICAgICAgICAgICAgICB0aGlzLmNyZWF0ZUZyaWN0aW9uRXF1YXRpb25zRnJvbUNvbnRhY3QociwgdGhpcy5mcmljdGlvblJlc3VsdCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KCiAgICAgIHYzcG9vbC5yZWxlYXNlKHJqKTsKICAgICAgcmogPSBudWxsOyAvLyBDaGVjayBlZGdlcwoKICAgICAgY29uc3QgZWRnZVRhbmdlbnQgPSB2M3Bvb2wuZ2V0KCk7CiAgICAgIGNvbnN0IGVkZ2VDZW50ZXIgPSB2M3Bvb2wuZ2V0KCk7CiAgICAgIGNvbnN0IHIgPSB2M3Bvb2wuZ2V0KCk7IC8vIHIgPSBlZGdlIGNlbnRlciB0byBzcGhlcmUgY2VudGVyCgogICAgICBjb25zdCBvcnRob2dvbmFsID0gdjNwb29sLmdldCgpOwogICAgICBjb25zdCBkaXN0ID0gdjNwb29sLmdldCgpOwogICAgICBjb25zdCBOc2lkZXMgPSBzaWRlcy5sZW5ndGg7CgogICAgICBmb3IgKGxldCBqID0gMDsgaiAhPT0gTnNpZGVzICYmICFmb3VuZDsgaisrKSB7CiAgICAgICAgZm9yIChsZXQgayA9IDA7IGsgIT09IE5zaWRlcyAmJiAhZm91bmQ7IGsrKykgewogICAgICAgICAgaWYgKGogJSAzICE9PSBrICUgMykgewogICAgICAgICAgICAvLyBHZXQgZWRnZSB0YW5nZW50CiAgICAgICAgICAgIHNpZGVzW2tdLmNyb3NzKHNpZGVzW2pdLCBlZGdlVGFuZ2VudCk7CiAgICAgICAgICAgIGVkZ2VUYW5nZW50Lm5vcm1hbGl6ZSgpOwogICAgICAgICAgICBzaWRlc1tqXS52YWRkKHNpZGVzW2tdLCBlZGdlQ2VudGVyKTsKICAgICAgICAgICAgci5jb3B5KHhpKTsKICAgICAgICAgICAgci52c3ViKGVkZ2VDZW50ZXIsIHIpOwogICAgICAgICAgICByLnZzdWIoeGosIHIpOwogICAgICAgICAgICBjb25zdCBvcnRob25vcm0gPSByLmRvdChlZGdlVGFuZ2VudCk7IC8vIGRpc3RhbmNlIGZyb20gZWRnZSBjZW50ZXIgdG8gc3BoZXJlIGNlbnRlciBpbiB0aGUgdGFuZ2VudCBkaXJlY3Rpb24KCiAgICAgICAgICAgIGVkZ2VUYW5nZW50LnNjYWxlKG9ydGhvbm9ybSwgb3J0aG9nb25hbCk7IC8vIFZlY3RvciBmcm9tIGVkZ2UgY2VudGVyIHRvIHNwaGVyZSBjZW50ZXIgaW4gdGhlIHRhbmdlbnQgZGlyZWN0aW9uCiAgICAgICAgICAgIC8vIEZpbmQgdGhlIHRoaXJkIHNpZGUgb3J0aG9nb25hbCB0byB0aGlzIG9uZQoKICAgICAgICAgICAgbGV0IGwgPSAwOwoKICAgICAgICAgICAgd2hpbGUgKGwgPT09IGogJSAzIHx8IGwgPT09IGsgJSAzKSB7CiAgICAgICAgICAgICAgbCsrOwogICAgICAgICAgICB9IC8vIHZlYyBmcm9tIGVkZ2UgY2VudGVyIHRvIHNwaGVyZSBwcm9qZWN0ZWQgdG8gdGhlIHBsYW5lIG9ydGhvZ29uYWwgdG8gdGhlIGVkZ2UgdGFuZ2VudAoKCiAgICAgICAgICAgIGRpc3QuY29weSh4aSk7CiAgICAgICAgICAgIGRpc3QudnN1YihvcnRob2dvbmFsLCBkaXN0KTsKICAgICAgICAgICAgZGlzdC52c3ViKGVkZ2VDZW50ZXIsIGRpc3QpOwogICAgICAgICAgICBkaXN0LnZzdWIoeGosIGRpc3QpOyAvLyBEaXN0YW5jZXMgaW4gdGFuZ2VudCBkaXJlY3Rpb24gYW5kIGRpc3RhbmNlIGluIHRoZSBwbGFuZSBvcnRob2dvbmFsIHRvIGl0CgogICAgICAgICAgICBjb25zdCB0ZGlzdCA9IE1hdGguYWJzKG9ydGhvbm9ybSk7CiAgICAgICAgICAgIGNvbnN0IG5kaXN0ID0gZGlzdC5sZW5ndGgoKTsKCiAgICAgICAgICAgIGlmICh0ZGlzdCA8IHNpZGVzW2xdLmxlbmd0aCgpICYmIG5kaXN0IDwgUikgewogICAgICAgICAgICAgIGlmIChqdXN0VGVzdCkgewogICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICBmb3VuZCA9IHRydWU7CiAgICAgICAgICAgICAgY29uc3QgcmVzID0gdGhpcy5jcmVhdGVDb250YWN0RXF1YXRpb24oYmksIGJqLCBzaSwgc2osIHJzaSwgcnNqKTsKICAgICAgICAgICAgICBlZGdlQ2VudGVyLnZhZGQob3J0aG9nb25hbCwgcmVzLnJqKTsgLy8gYm94IHJqCgogICAgICAgICAgICAgIHJlcy5yai5jb3B5KHJlcy5yaik7CiAgICAgICAgICAgICAgZGlzdC5uZWdhdGUocmVzLm5pKTsKICAgICAgICAgICAgICByZXMubmkubm9ybWFsaXplKCk7CiAgICAgICAgICAgICAgcmVzLnJpLmNvcHkocmVzLnJqKTsKICAgICAgICAgICAgICByZXMucmkudmFkZCh4aiwgcmVzLnJpKTsKICAgICAgICAgICAgICByZXMucmkudnN1Yih4aSwgcmVzLnJpKTsKICAgICAgICAgICAgICByZXMucmkubm9ybWFsaXplKCk7CiAgICAgICAgICAgICAgcmVzLnJpLnNjYWxlKFIsIHJlcy5yaSk7IC8vIE1ha2UgcmVsYXRpdmUgdG8gYm9kaWVzCgogICAgICAgICAgICAgIHJlcy5yaS52YWRkKHhpLCByZXMucmkpOwogICAgICAgICAgICAgIHJlcy5yaS52c3ViKGJpLnBvc2l0aW9uLCByZXMucmkpOwogICAgICAgICAgICAgIHJlcy5yai52YWRkKHhqLCByZXMucmopOwogICAgICAgICAgICAgIHJlcy5yai52c3ViKGJqLnBvc2l0aW9uLCByZXMucmopOwogICAgICAgICAgICAgIHRoaXMucmVzdWx0LnB1c2gocmVzKTsKICAgICAgICAgICAgICB0aGlzLmNyZWF0ZUZyaWN0aW9uRXF1YXRpb25zRnJvbUNvbnRhY3QocmVzLCB0aGlzLmZyaWN0aW9uUmVzdWx0KTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQoKICAgICAgdjNwb29sLnJlbGVhc2UoZWRnZVRhbmdlbnQsIGVkZ2VDZW50ZXIsIHIsIG9ydGhvZ29uYWwsIGRpc3QpOwogICAgfQoKICAgIHBsYW5lQm94KHNpLCBzaiwgeGksIHhqLCBxaSwgcWosIGJpLCBiaiwgcnNpLCByc2osIGp1c3RUZXN0KSB7CiAgICAgIHNqLmNvbnZleFBvbHloZWRyb25SZXByZXNlbnRhdGlvbi5tYXRlcmlhbCA9IHNqLm1hdGVyaWFsOwogICAgICBzai5jb252ZXhQb2x5aGVkcm9uUmVwcmVzZW50YXRpb24uY29sbGlzaW9uUmVzcG9uc2UgPSBzai5jb2xsaXNpb25SZXNwb25zZTsKICAgICAgc2ouY29udmV4UG9seWhlZHJvblJlcHJlc2VudGF0aW9uLmlkID0gc2ouaWQ7CiAgICAgIHJldHVybiB0aGlzLnBsYW5lQ29udmV4KHNpLCBzai5jb252ZXhQb2x5aGVkcm9uUmVwcmVzZW50YXRpb24sIHhpLCB4aiwgcWksIHFqLCBiaSwgYmosIHNpLCBzaiwganVzdFRlc3QpOwogICAgfQoKICAgIGNvbnZleENvbnZleChzaSwgc2osIHhpLCB4aiwgcWksIHFqLCBiaSwgYmosIHJzaSwgcnNqLCBqdXN0VGVzdCwgZmFjZUxpc3RBLCBmYWNlTGlzdEIpIHsKICAgICAgY29uc3Qgc2VwQXhpcyA9IGNvbnZleENvbnZleF9zZXBBeGlzOwoKICAgICAgaWYgKHhpLmRpc3RhbmNlVG8oeGopID4gc2kuYm91bmRpbmdTcGhlcmVSYWRpdXMgKyBzai5ib3VuZGluZ1NwaGVyZVJhZGl1cykgewogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgaWYgKHNpLmZpbmRTZXBhcmF0aW5nQXhpcyhzaiwgeGksIHFpLCB4aiwgcWosIHNlcEF4aXMsIGZhY2VMaXN0QSwgZmFjZUxpc3RCKSkgewogICAgICAgIGNvbnN0IHJlcyA9IFtdOwogICAgICAgIGNvbnN0IHEgPSBjb252ZXhDb252ZXhfcTsKICAgICAgICBzaS5jbGlwQWdhaW5zdEh1bGwoeGksIHFpLCBzaiwgeGosIHFqLCBzZXBBeGlzLCAtMTAwLCAxMDAsIHJlcyk7CiAgICAgICAgbGV0IG51bUNvbnRhY3RzID0gMDsKCiAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogIT09IHJlcy5sZW5ndGg7IGorKykgewogICAgICAgICAgaWYgKGp1c3RUZXN0KSB7CiAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAgfQoKICAgICAgICAgIGNvbnN0IHIgPSB0aGlzLmNyZWF0ZUNvbnRhY3RFcXVhdGlvbihiaSwgYmosIHNpLCBzaiwgcnNpLCByc2opOwogICAgICAgICAgY29uc3QgcmkgPSByLnJpOwogICAgICAgICAgY29uc3QgcmogPSByLnJqOwogICAgICAgICAgc2VwQXhpcy5uZWdhdGUoci5uaSk7CiAgICAgICAgICByZXNbal0ubm9ybWFsLm5lZ2F0ZShxKTsKICAgICAgICAgIHEuc2NhbGUocmVzW2pdLmRlcHRoLCBxKTsKICAgICAgICAgIHJlc1tqXS5wb2ludC52YWRkKHEsIHJpKTsKICAgICAgICAgIHJqLmNvcHkocmVzW2pdLnBvaW50KTsgLy8gQ29udGFjdCBwb2ludHMgYXJlIGluIHdvcmxkIGNvb3JkaW5hdGVzLiBUcmFuc2Zvcm0gYmFjayB0byByZWxhdGl2ZQoKICAgICAgICAgIHJpLnZzdWIoeGksIHJpKTsKICAgICAgICAgIHJqLnZzdWIoeGosIHJqKTsgLy8gTWFrZSByZWxhdGl2ZSB0byBib2RpZXMKCiAgICAgICAgICByaS52YWRkKHhpLCByaSk7CiAgICAgICAgICByaS52c3ViKGJpLnBvc2l0aW9uLCByaSk7CiAgICAgICAgICByai52YWRkKHhqLCByaik7CiAgICAgICAgICByai52c3ViKGJqLnBvc2l0aW9uLCByaik7CiAgICAgICAgICB0aGlzLnJlc3VsdC5wdXNoKHIpOwogICAgICAgICAgbnVtQ29udGFjdHMrKzsKCiAgICAgICAgICBpZiAoIXRoaXMuZW5hYmxlRnJpY3Rpb25SZWR1Y3Rpb24pIHsKICAgICAgICAgICAgdGhpcy5jcmVhdGVGcmljdGlvbkVxdWF0aW9uc0Zyb21Db250YWN0KHIsIHRoaXMuZnJpY3Rpb25SZXN1bHQpOwogICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgaWYgKHRoaXMuZW5hYmxlRnJpY3Rpb25SZWR1Y3Rpb24gJiYgbnVtQ29udGFjdHMpIHsKICAgICAgICAgIHRoaXMuY3JlYXRlRnJpY3Rpb25Gcm9tQXZlcmFnZShudW1Db250YWN0cyk7CiAgICAgICAgfQogICAgICB9CiAgICB9CgogICAgc3BoZXJlQ29udmV4KHNpLCBzaiwgeGksIHhqLCBxaSwgcWosIGJpLCBiaiwgcnNpLCByc2osIGp1c3RUZXN0KSB7CiAgICAgIGNvbnN0IHYzcG9vbCA9IHRoaXMudjNwb29sOwogICAgICB4aS52c3ViKHhqLCBjb252ZXhfdG9fc3BoZXJlKTsKICAgICAgY29uc3Qgbm9ybWFscyA9IHNqLmZhY2VOb3JtYWxzOwogICAgICBjb25zdCBmYWNlcyA9IHNqLmZhY2VzOwogICAgICBjb25zdCB2ZXJ0cyA9IHNqLnZlcnRpY2VzOwogICAgICBjb25zdCBSID0gc2kucmFkaXVzOyAvLyAgICAgcmV0dXJuOwogICAgICAvLyB9CgogICAgICBsZXQgZm91bmQgPSBmYWxzZTsgLy8gQ2hlY2sgY29ybmVycwoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgIT09IHZlcnRzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgY29uc3QgdiA9IHZlcnRzW2ldOyAvLyBXb3JsZCBwb3NpdGlvbiBvZiBjb3JuZXIKCiAgICAgICAgY29uc3Qgd29ybGRDb3JuZXIgPSBzcGhlcmVDb252ZXhfd29ybGRDb3JuZXI7CiAgICAgICAgcWoudm11bHQodiwgd29ybGRDb3JuZXIpOwogICAgICAgIHhqLnZhZGQod29ybGRDb3JuZXIsIHdvcmxkQ29ybmVyKTsKICAgICAgICBjb25zdCBzcGhlcmVfdG9fY29ybmVyID0gc3BoZXJlQ29udmV4X3NwaGVyZVRvQ29ybmVyOwogICAgICAgIHdvcmxkQ29ybmVyLnZzdWIoeGksIHNwaGVyZV90b19jb3JuZXIpOwoKICAgICAgICBpZiAoc3BoZXJlX3RvX2Nvcm5lci5sZW5ndGhTcXVhcmVkKCkgPCBSICogUikgewogICAgICAgICAgaWYgKGp1c3RUZXN0KSB7CiAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAgfQoKICAgICAgICAgIGZvdW5kID0gdHJ1ZTsKICAgICAgICAgIGNvbnN0IHIgPSB0aGlzLmNyZWF0ZUNvbnRhY3RFcXVhdGlvbihiaSwgYmosIHNpLCBzaiwgcnNpLCByc2opOwogICAgICAgICAgci5yaS5jb3B5KHNwaGVyZV90b19jb3JuZXIpOwogICAgICAgICAgci5yaS5ub3JtYWxpemUoKTsKICAgICAgICAgIHIubmkuY29weShyLnJpKTsKICAgICAgICAgIHIucmkuc2NhbGUoUiwgci5yaSk7CiAgICAgICAgICB3b3JsZENvcm5lci52c3ViKHhqLCByLnJqKTsgLy8gU2hvdWxkIGJlIHJlbGF0aXZlIHRvIHRoZSBib2R5LgoKICAgICAgICAgIHIucmkudmFkZCh4aSwgci5yaSk7CiAgICAgICAgICByLnJpLnZzdWIoYmkucG9zaXRpb24sIHIucmkpOyAvLyBTaG91bGQgYmUgcmVsYXRpdmUgdG8gdGhlIGJvZHkuCgogICAgICAgICAgci5yai52YWRkKHhqLCByLnJqKTsKICAgICAgICAgIHIucmoudnN1Yihiai5wb3NpdGlvbiwgci5yaik7CiAgICAgICAgICB0aGlzLnJlc3VsdC5wdXNoKHIpOwogICAgICAgICAgdGhpcy5jcmVhdGVGcmljdGlvbkVxdWF0aW9uc0Zyb21Db250YWN0KHIsIHRoaXMuZnJpY3Rpb25SZXN1bHQpOwogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KICAgICAgfSAvLyBDaGVjayBzaWRlIChwbGFuZSkgaW50ZXJzZWN0aW9ucwoKCiAgICAgIGZvciAobGV0IGkgPSAwLCBuZmFjZXMgPSBmYWNlcy5sZW5ndGg7IGkgIT09IG5mYWNlcyAmJiBmb3VuZCA9PT0gZmFsc2U7IGkrKykgewogICAgICAgIGNvbnN0IG5vcm1hbCA9IG5vcm1hbHNbaV07CiAgICAgICAgY29uc3QgZmFjZSA9IGZhY2VzW2ldOyAvLyBHZXQgd29ybGQtdHJhbnNmb3JtZWQgbm9ybWFsIG9mIHRoZSBmYWNlCgogICAgICAgIGNvbnN0IHdvcmxkTm9ybWFsID0gc3BoZXJlQ29udmV4X3dvcmxkTm9ybWFsOwogICAgICAgIHFqLnZtdWx0KG5vcm1hbCwgd29ybGROb3JtYWwpOyAvLyBHZXQgYSB3b3JsZCB2ZXJ0ZXggZnJvbSB0aGUgZmFjZQoKICAgICAgICBjb25zdCB3b3JsZFBvaW50ID0gc3BoZXJlQ29udmV4X3dvcmxkUG9pbnQ7CiAgICAgICAgcWoudm11bHQodmVydHNbZmFjZVswXV0sIHdvcmxkUG9pbnQpOwogICAgICAgIHdvcmxkUG9pbnQudmFkZCh4aiwgd29ybGRQb2ludCk7IC8vIEdldCBhIHBvaW50IG9uIHRoZSBzcGhlcmUsIGNsb3Nlc3QgdG8gdGhlIGZhY2Ugbm9ybWFsCgogICAgICAgIGNvbnN0IHdvcmxkU3BoZXJlUG9pbnRDbG9zZXN0VG9QbGFuZSA9IHNwaGVyZUNvbnZleF93b3JsZFNwaGVyZVBvaW50Q2xvc2VzdFRvUGxhbmU7CiAgICAgICAgd29ybGROb3JtYWwuc2NhbGUoLVIsIHdvcmxkU3BoZXJlUG9pbnRDbG9zZXN0VG9QbGFuZSk7CiAgICAgICAgeGkudmFkZCh3b3JsZFNwaGVyZVBvaW50Q2xvc2VzdFRvUGxhbmUsIHdvcmxkU3BoZXJlUG9pbnRDbG9zZXN0VG9QbGFuZSk7IC8vIFZlY3RvciBmcm9tIGEgZmFjZSBwb2ludCB0byB0aGUgY2xvc2VzdCBwb2ludCBvbiB0aGUgc3BoZXJlCgogICAgICAgIGNvbnN0IHBlbmV0cmF0aW9uVmVjID0gc3BoZXJlQ29udmV4X3BlbmV0cmF0aW9uVmVjOwogICAgICAgIHdvcmxkU3BoZXJlUG9pbnRDbG9zZXN0VG9QbGFuZS52c3ViKHdvcmxkUG9pbnQsIHBlbmV0cmF0aW9uVmVjKTsgLy8gVGhlIHBlbmV0cmF0aW9uLiBOZWdhdGl2ZSB2YWx1ZSBtZWFucyBvdmVybGFwLgoKICAgICAgICBjb25zdCBwZW5ldHJhdGlvbiA9IHBlbmV0cmF0aW9uVmVjLmRvdCh3b3JsZE5vcm1hbCk7CiAgICAgICAgY29uc3Qgd29ybGRQb2ludFRvU3BoZXJlID0gc3BoZXJlQ29udmV4X3NwaGVyZVRvV29ybGRQb2ludDsKICAgICAgICB4aS52c3ViKHdvcmxkUG9pbnQsIHdvcmxkUG9pbnRUb1NwaGVyZSk7CgogICAgICAgIGlmIChwZW5ldHJhdGlvbiA8IDAgJiYgd29ybGRQb2ludFRvU3BoZXJlLmRvdCh3b3JsZE5vcm1hbCkgPiAwKSB7CiAgICAgICAgICAvLyBJbnRlcnNlY3RzIHBsYW5lLiBOb3cgY2hlY2sgaWYgdGhlIHNwaGVyZSBpcyBpbnNpZGUgdGhlIGZhY2UgcG9seWdvbgogICAgICAgICAgY29uc3QgZmFjZVZlcnRzID0gW107IC8vIEZhY2UgdmVydGljZXMsIGluIHdvcmxkIGNvb3JkcwoKICAgICAgICAgIGZvciAobGV0IGogPSAwLCBOdmVydHMgPSBmYWNlLmxlbmd0aDsgaiAhPT0gTnZlcnRzOyBqKyspIHsKICAgICAgICAgICAgY29uc3Qgd29ybGRWZXJ0ZXggPSB2M3Bvb2wuZ2V0KCk7CiAgICAgICAgICAgIHFqLnZtdWx0KHZlcnRzW2ZhY2Vbal1dLCB3b3JsZFZlcnRleCk7CiAgICAgICAgICAgIHhqLnZhZGQod29ybGRWZXJ0ZXgsIHdvcmxkVmVydGV4KTsKICAgICAgICAgICAgZmFjZVZlcnRzLnB1c2god29ybGRWZXJ0ZXgpOwogICAgICAgICAgfQoKICAgICAgICAgIGlmIChwb2ludEluUG9seWdvbihmYWNlVmVydHMsIHdvcmxkTm9ybWFsLCB4aSkpIHsKICAgICAgICAgICAgLy8gSXMgdGhlIHNwaGVyZSBjZW50ZXIgaW4gdGhlIGZhY2UgcG9seWdvbj8KICAgICAgICAgICAgaWYgKGp1c3RUZXN0KSB7CiAgICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGZvdW5kID0gdHJ1ZTsKICAgICAgICAgICAgY29uc3QgciA9IHRoaXMuY3JlYXRlQ29udGFjdEVxdWF0aW9uKGJpLCBiaiwgc2ksIHNqLCByc2ksIHJzaik7CiAgICAgICAgICAgIHdvcmxkTm9ybWFsLnNjYWxlKC1SLCByLnJpKTsgLy8gQ29udGFjdCBvZmZzZXQsIGZyb20gc3BoZXJlIGNlbnRlciB0byBjb250YWN0CgogICAgICAgICAgICB3b3JsZE5vcm1hbC5uZWdhdGUoci5uaSk7IC8vIE5vcm1hbCBwb2ludGluZyBvdXQgb2Ygc3BoZXJlCgogICAgICAgICAgICBjb25zdCBwZW5ldHJhdGlvblZlYzIgPSB2M3Bvb2wuZ2V0KCk7CiAgICAgICAgICAgIHdvcmxkTm9ybWFsLnNjYWxlKC1wZW5ldHJhdGlvbiwgcGVuZXRyYXRpb25WZWMyKTsKICAgICAgICAgICAgY29uc3QgcGVuZXRyYXRpb25TcGhlcmVQb2ludCA9IHYzcG9vbC5nZXQoKTsKICAgICAgICAgICAgd29ybGROb3JtYWwuc2NhbGUoLVIsIHBlbmV0cmF0aW9uU3BoZXJlUG9pbnQpOyAvL3hpLnZzdWIoeGopLnZhZGQocGVuZXRyYXRpb25TcGhlcmVQb2ludCkudmFkZChwZW5ldHJhdGlvblZlYzIgLCByLnJqKTsKCiAgICAgICAgICAgIHhpLnZzdWIoeGosIHIucmopOwogICAgICAgICAgICByLnJqLnZhZGQocGVuZXRyYXRpb25TcGhlcmVQb2ludCwgci5yaik7CiAgICAgICAgICAgIHIucmoudmFkZChwZW5ldHJhdGlvblZlYzIsIHIucmopOyAvLyBTaG91bGQgYmUgcmVsYXRpdmUgdG8gdGhlIGJvZHkuCgogICAgICAgICAgICByLnJqLnZhZGQoeGosIHIucmopOwogICAgICAgICAgICByLnJqLnZzdWIoYmoucG9zaXRpb24sIHIucmopOyAvLyBTaG91bGQgYmUgcmVsYXRpdmUgdG8gdGhlIGJvZHkuCgogICAgICAgICAgICByLnJpLnZhZGQoeGksIHIucmkpOwogICAgICAgICAgICByLnJpLnZzdWIoYmkucG9zaXRpb24sIHIucmkpOwogICAgICAgICAgICB2M3Bvb2wucmVsZWFzZShwZW5ldHJhdGlvblZlYzIpOwogICAgICAgICAgICB2M3Bvb2wucmVsZWFzZShwZW5ldHJhdGlvblNwaGVyZVBvaW50KTsKICAgICAgICAgICAgdGhpcy5yZXN1bHQucHVzaChyKTsKICAgICAgICAgICAgdGhpcy5jcmVhdGVGcmljdGlvbkVxdWF0aW9uc0Zyb21Db250YWN0KHIsIHRoaXMuZnJpY3Rpb25SZXN1bHQpOyAvLyBSZWxlYXNlIHdvcmxkIHZlcnRpY2VzCgogICAgICAgICAgICBmb3IgKGxldCBqID0gMCwgTmZhY2V2ZXJ0cyA9IGZhY2VWZXJ0cy5sZW5ndGg7IGogIT09IE5mYWNldmVydHM7IGorKykgewogICAgICAgICAgICAgIHYzcG9vbC5yZWxlYXNlKGZhY2VWZXJ0c1tqXSk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHJldHVybjsgLy8gV2Ugb25seSBleHBlY3QgKm9uZSogZmFjZSBjb250YWN0CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAvLyBFZGdlPwogICAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiAhPT0gZmFjZS5sZW5ndGg7IGorKykgewogICAgICAgICAgICAgIC8vIEdldCB0d28gd29ybGQgdHJhbnNmb3JtZWQgdmVydGljZXMKICAgICAgICAgICAgICBjb25zdCB2MSA9IHYzcG9vbC5nZXQoKTsKICAgICAgICAgICAgICBjb25zdCB2MiA9IHYzcG9vbC5nZXQoKTsKICAgICAgICAgICAgICBxai52bXVsdCh2ZXJ0c1tmYWNlWyhqICsgMSkgJSBmYWNlLmxlbmd0aF1dLCB2MSk7CiAgICAgICAgICAgICAgcWoudm11bHQodmVydHNbZmFjZVsoaiArIDIpICUgZmFjZS5sZW5ndGhdXSwgdjIpOwogICAgICAgICAgICAgIHhqLnZhZGQodjEsIHYxKTsKICAgICAgICAgICAgICB4ai52YWRkKHYyLCB2Mik7IC8vIENvbnN0cnVjdCBlZGdlIHZlY3RvcgoKICAgICAgICAgICAgICBjb25zdCBlZGdlID0gc3BoZXJlQ29udmV4X2VkZ2U7CiAgICAgICAgICAgICAgdjIudnN1Yih2MSwgZWRnZSk7IC8vIENvbnN0cnVjdCB0aGUgc2FtZSB2ZWN0b3IsIGJ1dCBub3JtYWxpemVkCgogICAgICAgICAgICAgIGNvbnN0IGVkZ2VVbml0ID0gc3BoZXJlQ29udmV4X2VkZ2VVbml0OwogICAgICAgICAgICAgIGVkZ2UudW5pdChlZGdlVW5pdCk7IC8vIHAgaXMgeGkgcHJvamVjdGVkIG9udG8gdGhlIGVkZ2UKCiAgICAgICAgICAgICAgY29uc3QgcCA9IHYzcG9vbC5nZXQoKTsKICAgICAgICAgICAgICBjb25zdCB2MV90b194aSA9IHYzcG9vbC5nZXQoKTsKICAgICAgICAgICAgICB4aS52c3ViKHYxLCB2MV90b194aSk7CiAgICAgICAgICAgICAgY29uc3QgZG90ID0gdjFfdG9feGkuZG90KGVkZ2VVbml0KTsKICAgICAgICAgICAgICBlZGdlVW5pdC5zY2FsZShkb3QsIHApOwogICAgICAgICAgICAgIHAudmFkZCh2MSwgcCk7IC8vIENvbXB1dGUgYSB2ZWN0b3IgZnJvbSBwIHRvIHRoZSBjZW50ZXIgb2YgdGhlIHNwaGVyZQoKICAgICAgICAgICAgICBjb25zdCB4aV90b19wID0gdjNwb29sLmdldCgpOwogICAgICAgICAgICAgIHAudnN1Yih4aSwgeGlfdG9fcCk7IC8vIENvbGxpc2lvbiBpZiB0aGUgZWRnZS1zcGhlcmUgZGlzdGFuY2UgaXMgbGVzcyB0aGFuIHRoZSByYWRpdXMKICAgICAgICAgICAgICAvLyBBTkQgaWYgcCBpcyBpbiBiZXR3ZWVuIHYxIGFuZCB2MgoKICAgICAgICAgICAgICBpZiAoZG90ID4gMCAmJiBkb3QgKiBkb3QgPCBlZGdlLmxlbmd0aFNxdWFyZWQoKSAmJiB4aV90b19wLmxlbmd0aFNxdWFyZWQoKSA8IFIgKiBSKSB7CiAgICAgICAgICAgICAgICAvLyBDb2xsaXNpb24gaWYgdGhlIGVkZ2Utc3BoZXJlIGRpc3RhbmNlIGlzIGxlc3MgdGhhbiB0aGUgcmFkaXVzCiAgICAgICAgICAgICAgICAvLyBFZGdlIGNvbnRhY3QhCiAgICAgICAgICAgICAgICBpZiAoanVzdFRlc3QpIHsKICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgY29uc3QgciA9IHRoaXMuY3JlYXRlQ29udGFjdEVxdWF0aW9uKGJpLCBiaiwgc2ksIHNqLCByc2ksIHJzaik7CiAgICAgICAgICAgICAgICBwLnZzdWIoeGosIHIucmopOwogICAgICAgICAgICAgICAgcC52c3ViKHhpLCByLm5pKTsKICAgICAgICAgICAgICAgIHIubmkubm9ybWFsaXplKCk7CiAgICAgICAgICAgICAgICByLm5pLnNjYWxlKFIsIHIucmkpOyAvLyBTaG91bGQgYmUgcmVsYXRpdmUgdG8gdGhlIGJvZHkuCgogICAgICAgICAgICAgICAgci5yai52YWRkKHhqLCByLnJqKTsKICAgICAgICAgICAgICAgIHIucmoudnN1Yihiai5wb3NpdGlvbiwgci5yaik7IC8vIFNob3VsZCBiZSByZWxhdGl2ZSB0byB0aGUgYm9keS4KCiAgICAgICAgICAgICAgICByLnJpLnZhZGQoeGksIHIucmkpOwogICAgICAgICAgICAgICAgci5yaS52c3ViKGJpLnBvc2l0aW9uLCByLnJpKTsKICAgICAgICAgICAgICAgIHRoaXMucmVzdWx0LnB1c2gocik7CiAgICAgICAgICAgICAgICB0aGlzLmNyZWF0ZUZyaWN0aW9uRXF1YXRpb25zRnJvbUNvbnRhY3QociwgdGhpcy5mcmljdGlvblJlc3VsdCk7IC8vIFJlbGVhc2Ugd29ybGQgdmVydGljZXMKCiAgICAgICAgICAgICAgICBmb3IgKGxldCBqID0gMCwgTmZhY2V2ZXJ0cyA9IGZhY2VWZXJ0cy5sZW5ndGg7IGogIT09IE5mYWNldmVydHM7IGorKykgewogICAgICAgICAgICAgICAgICB2M3Bvb2wucmVsZWFzZShmYWNlVmVydHNbal0pOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHYzcG9vbC5yZWxlYXNlKHYxKTsKICAgICAgICAgICAgICAgIHYzcG9vbC5yZWxlYXNlKHYyKTsKICAgICAgICAgICAgICAgIHYzcG9vbC5yZWxlYXNlKHApOwogICAgICAgICAgICAgICAgdjNwb29sLnJlbGVhc2UoeGlfdG9fcCk7CiAgICAgICAgICAgICAgICB2M3Bvb2wucmVsZWFzZSh2MV90b194aSk7CiAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICB2M3Bvb2wucmVsZWFzZSh2MSk7CiAgICAgICAgICAgICAgdjNwb29sLnJlbGVhc2UodjIpOwogICAgICAgICAgICAgIHYzcG9vbC5yZWxlYXNlKHApOwogICAgICAgICAgICAgIHYzcG9vbC5yZWxlYXNlKHhpX3RvX3ApOwogICAgICAgICAgICAgIHYzcG9vbC5yZWxlYXNlKHYxX3RvX3hpKTsKICAgICAgICAgICAgfQogICAgICAgICAgfSAvLyBSZWxlYXNlIHdvcmxkIHZlcnRpY2VzCgoKICAgICAgICAgIGZvciAobGV0IGogPSAwLCBOZmFjZXZlcnRzID0gZmFjZVZlcnRzLmxlbmd0aDsgaiAhPT0gTmZhY2V2ZXJ0czsgaisrKSB7CiAgICAgICAgICAgIHYzcG9vbC5yZWxlYXNlKGZhY2VWZXJ0c1tqXSk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CiAgICB9CgogICAgcGxhbmVDb252ZXgocGxhbmVTaGFwZSwgY29udmV4U2hhcGUsIHBsYW5lUG9zaXRpb24sIGNvbnZleFBvc2l0aW9uLCBwbGFuZVF1YXQsIGNvbnZleFF1YXQsIHBsYW5lQm9keSwgY29udmV4Qm9keSwgc2ksIHNqLCBqdXN0VGVzdCkgewogICAgICAvLyBTaW1wbHkgcmV0dXJuIHRoZSBwb2ludHMgYmVoaW5kIHRoZSBwbGFuZS4KICAgICAgY29uc3Qgd29ybGRWZXJ0ZXggPSBwbGFuZUNvbnZleF92OwogICAgICBjb25zdCB3b3JsZE5vcm1hbCA9IHBsYW5lQ29udmV4X25vcm1hbDsKICAgICAgd29ybGROb3JtYWwuc2V0KDAsIDAsIDEpOwogICAgICBwbGFuZVF1YXQudm11bHQod29ybGROb3JtYWwsIHdvcmxkTm9ybWFsKTsgLy8gVHVybiBub3JtYWwgYWNjb3JkaW5nIHRvIHBsYW5lIG9yaWVudGF0aW9uCgogICAgICBsZXQgbnVtQ29udGFjdHMgPSAwOwogICAgICBjb25zdCByZWxwb3MgPSBwbGFuZUNvbnZleF9yZWxwb3M7CgogICAgICBmb3IgKGxldCBpID0gMDsgaSAhPT0gY29udmV4U2hhcGUudmVydGljZXMubGVuZ3RoOyBpKyspIHsKICAgICAgICAvLyBHZXQgd29ybGQgY29udmV4IHZlcnRleAogICAgICAgIHdvcmxkVmVydGV4LmNvcHkoY29udmV4U2hhcGUudmVydGljZXNbaV0pOwogICAgICAgIGNvbnZleFF1YXQudm11bHQod29ybGRWZXJ0ZXgsIHdvcmxkVmVydGV4KTsKICAgICAgICBjb252ZXhQb3NpdGlvbi52YWRkKHdvcmxkVmVydGV4LCB3b3JsZFZlcnRleCk7CiAgICAgICAgd29ybGRWZXJ0ZXgudnN1YihwbGFuZVBvc2l0aW9uLCByZWxwb3MpOwogICAgICAgIGNvbnN0IGRvdCA9IHdvcmxkTm9ybWFsLmRvdChyZWxwb3MpOwoKICAgICAgICBpZiAoZG90IDw9IDAuMCkgewogICAgICAgICAgaWYgKGp1c3RUZXN0KSB7CiAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAgfQoKICAgICAgICAgIGNvbnN0IHIgPSB0aGlzLmNyZWF0ZUNvbnRhY3RFcXVhdGlvbihwbGFuZUJvZHksIGNvbnZleEJvZHksIHBsYW5lU2hhcGUsIGNvbnZleFNoYXBlLCBzaSwgc2opOyAvLyBHZXQgdmVydGV4IHBvc2l0aW9uIHByb2plY3RlZCBvbiBwbGFuZQoKICAgICAgICAgIGNvbnN0IHByb2plY3RlZCA9IHBsYW5lQ29udmV4X3Byb2plY3RlZDsKICAgICAgICAgIHdvcmxkTm9ybWFsLnNjYWxlKHdvcmxkTm9ybWFsLmRvdChyZWxwb3MpLCBwcm9qZWN0ZWQpOwogICAgICAgICAgd29ybGRWZXJ0ZXgudnN1Yihwcm9qZWN0ZWQsIHByb2plY3RlZCk7CiAgICAgICAgICBwcm9qZWN0ZWQudnN1YihwbGFuZVBvc2l0aW9uLCByLnJpKTsgLy8gRnJvbSBwbGFuZSB0byB2ZXJ0ZXggcHJvamVjdGVkIG9uIHBsYW5lCgogICAgICAgICAgci5uaS5jb3B5KHdvcmxkTm9ybWFsKTsgLy8gQ29udGFjdCBub3JtYWwgaXMgdGhlIHBsYW5lIG5vcm1hbCBvdXQgZnJvbSBwbGFuZQogICAgICAgICAgLy8gcmogaXMgbm93IGp1c3QgdGhlIHZlY3RvciBmcm9tIHRoZSBjb252ZXggY2VudGVyIHRvIHRoZSB2ZXJ0ZXgKCiAgICAgICAgICB3b3JsZFZlcnRleC52c3ViKGNvbnZleFBvc2l0aW9uLCByLnJqKTsgLy8gTWFrZSBpdCByZWxhdGl2ZSB0byB0aGUgYm9keQoKICAgICAgICAgIHIucmkudmFkZChwbGFuZVBvc2l0aW9uLCByLnJpKTsKICAgICAgICAgIHIucmkudnN1YihwbGFuZUJvZHkucG9zaXRpb24sIHIucmkpOwogICAgICAgICAgci5yai52YWRkKGNvbnZleFBvc2l0aW9uLCByLnJqKTsKICAgICAgICAgIHIucmoudnN1Yihjb252ZXhCb2R5LnBvc2l0aW9uLCByLnJqKTsKICAgICAgICAgIHRoaXMucmVzdWx0LnB1c2gocik7CiAgICAgICAgICBudW1Db250YWN0cysrOwoKICAgICAgICAgIGlmICghdGhpcy5lbmFibGVGcmljdGlvblJlZHVjdGlvbikgewogICAgICAgICAgICB0aGlzLmNyZWF0ZUZyaWN0aW9uRXF1YXRpb25zRnJvbUNvbnRhY3QociwgdGhpcy5mcmljdGlvblJlc3VsdCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CgogICAgICBpZiAodGhpcy5lbmFibGVGcmljdGlvblJlZHVjdGlvbiAmJiBudW1Db250YWN0cykgewogICAgICAgIHRoaXMuY3JlYXRlRnJpY3Rpb25Gcm9tQXZlcmFnZShudW1Db250YWN0cyk7CiAgICAgIH0KICAgIH0KCiAgICBib3hDb252ZXgoc2ksIHNqLCB4aSwgeGosIHFpLCBxaiwgYmksIGJqLCByc2ksIHJzaiwganVzdFRlc3QpIHsKICAgICAgc2kuY29udmV4UG9seWhlZHJvblJlcHJlc2VudGF0aW9uLm1hdGVyaWFsID0gc2kubWF0ZXJpYWw7CiAgICAgIHNpLmNvbnZleFBvbHloZWRyb25SZXByZXNlbnRhdGlvbi5jb2xsaXNpb25SZXNwb25zZSA9IHNpLmNvbGxpc2lvblJlc3BvbnNlOwogICAgICByZXR1cm4gdGhpcy5jb252ZXhDb252ZXgoc2kuY29udmV4UG9seWhlZHJvblJlcHJlc2VudGF0aW9uLCBzaiwgeGksIHhqLCBxaSwgcWosIGJpLCBiaiwgc2ksIHNqLCBqdXN0VGVzdCk7CiAgICB9CgogICAgc3BoZXJlSGVpZ2h0ZmllbGQoc3BoZXJlU2hhcGUsIGhmU2hhcGUsIHNwaGVyZVBvcywgaGZQb3MsIHNwaGVyZVF1YXQsIGhmUXVhdCwgc3BoZXJlQm9keSwgaGZCb2R5LCByc2ksIHJzaiwganVzdFRlc3QpIHsKICAgICAgY29uc3QgZGF0YSA9IGhmU2hhcGUuZGF0YTsKICAgICAgY29uc3QgcmFkaXVzID0gc3BoZXJlU2hhcGUucmFkaXVzOwogICAgICBjb25zdCB3ID0gaGZTaGFwZS5lbGVtZW50U2l6ZTsKICAgICAgY29uc3Qgd29ybGRQaWxsYXJPZmZzZXQgPSBzcGhlcmVIZWlnaHRmaWVsZF90bXAyOyAvLyBHZXQgc3BoZXJlIHBvc2l0aW9uIHRvIGhlaWdodGZpZWxkIGxvY2FsIQoKICAgICAgY29uc3QgbG9jYWxTcGhlcmVQb3MgPSBzcGhlcmVIZWlnaHRmaWVsZF90bXAxOwogICAgICBUcmFuc2Zvcm0ucG9pbnRUb0xvY2FsRnJhbWUoaGZQb3MsIGhmUXVhdCwgc3BoZXJlUG9zLCBsb2NhbFNwaGVyZVBvcyk7IC8vIEdldCB0aGUgaW5kZXggb2YgdGhlIGRhdGEgcG9pbnRzIHRvIHRlc3QgYWdhaW5zdAoKICAgICAgbGV0IGlNaW5YID0gTWF0aC5mbG9vcigobG9jYWxTcGhlcmVQb3MueCAtIHJhZGl1cykgLyB3KSAtIDE7CiAgICAgIGxldCBpTWF4WCA9IE1hdGguY2VpbCgobG9jYWxTcGhlcmVQb3MueCArIHJhZGl1cykgLyB3KSArIDE7CiAgICAgIGxldCBpTWluWSA9IE1hdGguZmxvb3IoKGxvY2FsU3BoZXJlUG9zLnkgLSByYWRpdXMpIC8gdykgLSAxOwogICAgICBsZXQgaU1heFkgPSBNYXRoLmNlaWwoKGxvY2FsU3BoZXJlUG9zLnkgKyByYWRpdXMpIC8gdykgKyAxOyAvLyBCYWlsIG91dCBpZiB3ZSBhcmUgb3V0IG9mIHRoZSB0ZXJyYWluCgogICAgICBpZiAoaU1heFggPCAwIHx8IGlNYXhZIDwgMCB8fCBpTWluWCA+IGRhdGEubGVuZ3RoIHx8IGlNaW5ZID4gZGF0YVswXS5sZW5ndGgpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0gLy8gQ2xhbXAgaW5kZXggdG8gZWRnZXMKCgogICAgICBpZiAoaU1pblggPCAwKSB7CiAgICAgICAgaU1pblggPSAwOwogICAgICB9CgogICAgICBpZiAoaU1heFggPCAwKSB7CiAgICAgICAgaU1heFggPSAwOwogICAgICB9CgogICAgICBpZiAoaU1pblkgPCAwKSB7CiAgICAgICAgaU1pblkgPSAwOwogICAgICB9CgogICAgICBpZiAoaU1heFkgPCAwKSB7CiAgICAgICAgaU1heFkgPSAwOwogICAgICB9CgogICAgICBpZiAoaU1pblggPj0gZGF0YS5sZW5ndGgpIHsKICAgICAgICBpTWluWCA9IGRhdGEubGVuZ3RoIC0gMTsKICAgICAgfQoKICAgICAgaWYgKGlNYXhYID49IGRhdGEubGVuZ3RoKSB7CiAgICAgICAgaU1heFggPSBkYXRhLmxlbmd0aCAtIDE7CiAgICAgIH0KCiAgICAgIGlmIChpTWF4WSA+PSBkYXRhWzBdLmxlbmd0aCkgewogICAgICAgIGlNYXhZID0gZGF0YVswXS5sZW5ndGggLSAxOwogICAgICB9CgogICAgICBpZiAoaU1pblkgPj0gZGF0YVswXS5sZW5ndGgpIHsKICAgICAgICBpTWluWSA9IGRhdGFbMF0ubGVuZ3RoIC0gMTsKICAgICAgfQoKICAgICAgY29uc3QgbWluTWF4ID0gW107CiAgICAgIGhmU2hhcGUuZ2V0UmVjdE1pbk1heChpTWluWCwgaU1pblksIGlNYXhYLCBpTWF4WSwgbWluTWF4KTsKICAgICAgY29uc3QgbWluID0gbWluTWF4WzBdOwogICAgICBjb25zdCBtYXggPSBtaW5NYXhbMV07IC8vIEJhaWwgb3V0IGlmIHdlIGNhbid0IHRvdWNoIHRoZSBib3VuZGluZyBoZWlnaHQgYm94CgogICAgICBpZiAobG9jYWxTcGhlcmVQb3MueiAtIHJhZGl1cyA+IG1heCB8fCBsb2NhbFNwaGVyZVBvcy56ICsgcmFkaXVzIDwgbWluKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICBjb25zdCByZXN1bHQgPSB0aGlzLnJlc3VsdDsKCiAgICAgIGZvciAobGV0IGkgPSBpTWluWDsgaSA8IGlNYXhYOyBpKyspIHsKICAgICAgICBmb3IgKGxldCBqID0gaU1pblk7IGogPCBpTWF4WTsgaisrKSB7CiAgICAgICAgICBjb25zdCBudW1Db250YWN0c0JlZm9yZSA9IHJlc3VsdC5sZW5ndGg7CiAgICAgICAgICBsZXQgaW50ZXJzZWN0aW5nID0gZmFsc2U7IC8vIExvd2VyIHRyaWFuZ2xlCgogICAgICAgICAgaGZTaGFwZS5nZXRDb252ZXhUcmlhbmdsZVBpbGxhcihpLCBqLCBmYWxzZSk7CiAgICAgICAgICBUcmFuc2Zvcm0ucG9pbnRUb1dvcmxkRnJhbWUoaGZQb3MsIGhmUXVhdCwgaGZTaGFwZS5waWxsYXJPZmZzZXQsIHdvcmxkUGlsbGFyT2Zmc2V0KTsKCiAgICAgICAgICBpZiAoc3BoZXJlUG9zLmRpc3RhbmNlVG8od29ybGRQaWxsYXJPZmZzZXQpIDwgaGZTaGFwZS5waWxsYXJDb252ZXguYm91bmRpbmdTcGhlcmVSYWRpdXMgKyBzcGhlcmVTaGFwZS5ib3VuZGluZ1NwaGVyZVJhZGl1cykgewogICAgICAgICAgICBpbnRlcnNlY3RpbmcgPSB0aGlzLnNwaGVyZUNvbnZleChzcGhlcmVTaGFwZSwgaGZTaGFwZS5waWxsYXJDb252ZXgsIHNwaGVyZVBvcywgd29ybGRQaWxsYXJPZmZzZXQsIHNwaGVyZVF1YXQsIGhmUXVhdCwgc3BoZXJlQm9keSwgaGZCb2R5LCBzcGhlcmVTaGFwZSwgaGZTaGFwZSwganVzdFRlc3QpOwogICAgICAgICAgfQoKICAgICAgICAgIGlmIChqdXN0VGVzdCAmJiBpbnRlcnNlY3RpbmcpIHsKICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICB9IC8vIFVwcGVyIHRyaWFuZ2xlCgoKICAgICAgICAgIGhmU2hhcGUuZ2V0Q29udmV4VHJpYW5nbGVQaWxsYXIoaSwgaiwgdHJ1ZSk7CiAgICAgICAgICBUcmFuc2Zvcm0ucG9pbnRUb1dvcmxkRnJhbWUoaGZQb3MsIGhmUXVhdCwgaGZTaGFwZS5waWxsYXJPZmZzZXQsIHdvcmxkUGlsbGFyT2Zmc2V0KTsKCiAgICAgICAgICBpZiAoc3BoZXJlUG9zLmRpc3RhbmNlVG8od29ybGRQaWxsYXJPZmZzZXQpIDwgaGZTaGFwZS5waWxsYXJDb252ZXguYm91bmRpbmdTcGhlcmVSYWRpdXMgKyBzcGhlcmVTaGFwZS5ib3VuZGluZ1NwaGVyZVJhZGl1cykgewogICAgICAgICAgICBpbnRlcnNlY3RpbmcgPSB0aGlzLnNwaGVyZUNvbnZleChzcGhlcmVTaGFwZSwgaGZTaGFwZS5waWxsYXJDb252ZXgsIHNwaGVyZVBvcywgd29ybGRQaWxsYXJPZmZzZXQsIHNwaGVyZVF1YXQsIGhmUXVhdCwgc3BoZXJlQm9keSwgaGZCb2R5LCBzcGhlcmVTaGFwZSwgaGZTaGFwZSwganVzdFRlc3QpOwogICAgICAgICAgfQoKICAgICAgICAgIGlmIChqdXN0VGVzdCAmJiBpbnRlcnNlY3RpbmcpIHsKICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICB9CgogICAgICAgICAgY29uc3QgbnVtQ29udGFjdHMgPSByZXN1bHQubGVuZ3RoIC0gbnVtQ29udGFjdHNCZWZvcmU7CgogICAgICAgICAgaWYgKG51bUNvbnRhY3RzID4gMikgewogICAgICAgICAgICByZXR1cm47CiAgICAgICAgICB9CiAgICAgICAgICAvKgogICAgICAgICAgICAvLyBTa2lwIGFsbCBidXQgMQogICAgICAgICAgICBmb3IgKGxldCBrID0gMDsgayA8IG51bUNvbnRhY3RzIC0gMTsgaysrKSB7CiAgICAgICAgICAgICAgICByZXN1bHQucG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICovCgogICAgICAgIH0KICAgICAgfQogICAgfQoKICAgIGJveEhlaWdodGZpZWxkKHNpLCBzaiwgeGksIHhqLCBxaSwgcWosIGJpLCBiaiwgcnNpLCByc2osIGp1c3RUZXN0KSB7CiAgICAgIHNpLmNvbnZleFBvbHloZWRyb25SZXByZXNlbnRhdGlvbi5tYXRlcmlhbCA9IHNpLm1hdGVyaWFsOwogICAgICBzaS5jb252ZXhQb2x5aGVkcm9uUmVwcmVzZW50YXRpb24uY29sbGlzaW9uUmVzcG9uc2UgPSBzaS5jb2xsaXNpb25SZXNwb25zZTsKICAgICAgcmV0dXJuIHRoaXMuY29udmV4SGVpZ2h0ZmllbGQoc2kuY29udmV4UG9seWhlZHJvblJlcHJlc2VudGF0aW9uLCBzaiwgeGksIHhqLCBxaSwgcWosIGJpLCBiaiwgc2ksIHNqLCBqdXN0VGVzdCk7CiAgICB9CgogICAgY29udmV4SGVpZ2h0ZmllbGQoY29udmV4U2hhcGUsIGhmU2hhcGUsIGNvbnZleFBvcywgaGZQb3MsIGNvbnZleFF1YXQsIGhmUXVhdCwgY29udmV4Qm9keSwgaGZCb2R5LCByc2ksIHJzaiwganVzdFRlc3QpIHsKICAgICAgY29uc3QgZGF0YSA9IGhmU2hhcGUuZGF0YTsKICAgICAgY29uc3QgdyA9IGhmU2hhcGUuZWxlbWVudFNpemU7CiAgICAgIGNvbnN0IHJhZGl1cyA9IGNvbnZleFNoYXBlLmJvdW5kaW5nU3BoZXJlUmFkaXVzOwogICAgICBjb25zdCB3b3JsZFBpbGxhck9mZnNldCA9IGNvbnZleEhlaWdodGZpZWxkX3RtcDI7CiAgICAgIGNvbnN0IGZhY2VMaXN0ID0gY29udmV4SGVpZ2h0ZmllbGRfZmFjZUxpc3Q7IC8vIEdldCBzcGhlcmUgcG9zaXRpb24gdG8gaGVpZ2h0ZmllbGQgbG9jYWwhCgogICAgICBjb25zdCBsb2NhbENvbnZleFBvcyA9IGNvbnZleEhlaWdodGZpZWxkX3RtcDE7CiAgICAgIFRyYW5zZm9ybS5wb2ludFRvTG9jYWxGcmFtZShoZlBvcywgaGZRdWF0LCBjb252ZXhQb3MsIGxvY2FsQ29udmV4UG9zKTsgLy8gR2V0IHRoZSBpbmRleCBvZiB0aGUgZGF0YSBwb2ludHMgdG8gdGVzdCBhZ2FpbnN0CgogICAgICBsZXQgaU1pblggPSBNYXRoLmZsb29yKChsb2NhbENvbnZleFBvcy54IC0gcmFkaXVzKSAvIHcpIC0gMTsKICAgICAgbGV0IGlNYXhYID0gTWF0aC5jZWlsKChsb2NhbENvbnZleFBvcy54ICsgcmFkaXVzKSAvIHcpICsgMTsKICAgICAgbGV0IGlNaW5ZID0gTWF0aC5mbG9vcigobG9jYWxDb252ZXhQb3MueSAtIHJhZGl1cykgLyB3KSAtIDE7CiAgICAgIGxldCBpTWF4WSA9IE1hdGguY2VpbCgobG9jYWxDb252ZXhQb3MueSArIHJhZGl1cykgLyB3KSArIDE7IC8vIEJhaWwgb3V0IGlmIHdlIGFyZSBvdXQgb2YgdGhlIHRlcnJhaW4KCiAgICAgIGlmIChpTWF4WCA8IDAgfHwgaU1heFkgPCAwIHx8IGlNaW5YID4gZGF0YS5sZW5ndGggfHwgaU1pblkgPiBkYXRhWzBdLmxlbmd0aCkgewogICAgICAgIHJldHVybjsKICAgICAgfSAvLyBDbGFtcCBpbmRleCB0byBlZGdlcwoKCiAgICAgIGlmIChpTWluWCA8IDApIHsKICAgICAgICBpTWluWCA9IDA7CiAgICAgIH0KCiAgICAgIGlmIChpTWF4WCA8IDApIHsKICAgICAgICBpTWF4WCA9IDA7CiAgICAgIH0KCiAgICAgIGlmIChpTWluWSA8IDApIHsKICAgICAgICBpTWluWSA9IDA7CiAgICAgIH0KCiAgICAgIGlmIChpTWF4WSA8IDApIHsKICAgICAgICBpTWF4WSA9IDA7CiAgICAgIH0KCiAgICAgIGlmIChpTWluWCA+PSBkYXRhLmxlbmd0aCkgewogICAgICAgIGlNaW5YID0gZGF0YS5sZW5ndGggLSAxOwogICAgICB9CgogICAgICBpZiAoaU1heFggPj0gZGF0YS5sZW5ndGgpIHsKICAgICAgICBpTWF4WCA9IGRhdGEubGVuZ3RoIC0gMTsKICAgICAgfQoKICAgICAgaWYgKGlNYXhZID49IGRhdGFbMF0ubGVuZ3RoKSB7CiAgICAgICAgaU1heFkgPSBkYXRhWzBdLmxlbmd0aCAtIDE7CiAgICAgIH0KCiAgICAgIGlmIChpTWluWSA+PSBkYXRhWzBdLmxlbmd0aCkgewogICAgICAgIGlNaW5ZID0gZGF0YVswXS5sZW5ndGggLSAxOwogICAgICB9CgogICAgICBjb25zdCBtaW5NYXggPSBbXTsKICAgICAgaGZTaGFwZS5nZXRSZWN0TWluTWF4KGlNaW5YLCBpTWluWSwgaU1heFgsIGlNYXhZLCBtaW5NYXgpOwogICAgICBjb25zdCBtaW4gPSBtaW5NYXhbMF07CiAgICAgIGNvbnN0IG1heCA9IG1pbk1heFsxXTsgLy8gQmFpbCBvdXQgaWYgd2UncmUgY2FudCB0b3VjaCB0aGUgYm91bmRpbmcgaGVpZ2h0IGJveAoKICAgICAgaWYgKGxvY2FsQ29udmV4UG9zLnogLSByYWRpdXMgPiBtYXggfHwgbG9jYWxDb252ZXhQb3MueiArIHJhZGl1cyA8IG1pbikgewogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgZm9yIChsZXQgaSA9IGlNaW5YOyBpIDwgaU1heFg7IGkrKykgewogICAgICAgIGZvciAobGV0IGogPSBpTWluWTsgaiA8IGlNYXhZOyBqKyspIHsKICAgICAgICAgIGxldCBpbnRlcnNlY3RpbmcgPSBmYWxzZTsgLy8gTG93ZXIgdHJpYW5nbGUKCiAgICAgICAgICBoZlNoYXBlLmdldENvbnZleFRyaWFuZ2xlUGlsbGFyKGksIGosIGZhbHNlKTsKICAgICAgICAgIFRyYW5zZm9ybS5wb2ludFRvV29ybGRGcmFtZShoZlBvcywgaGZRdWF0LCBoZlNoYXBlLnBpbGxhck9mZnNldCwgd29ybGRQaWxsYXJPZmZzZXQpOwoKICAgICAgICAgIGlmIChjb252ZXhQb3MuZGlzdGFuY2VUbyh3b3JsZFBpbGxhck9mZnNldCkgPCBoZlNoYXBlLnBpbGxhckNvbnZleC5ib3VuZGluZ1NwaGVyZVJhZGl1cyArIGNvbnZleFNoYXBlLmJvdW5kaW5nU3BoZXJlUmFkaXVzKSB7CiAgICAgICAgICAgIGludGVyc2VjdGluZyA9IHRoaXMuY29udmV4Q29udmV4KGNvbnZleFNoYXBlLCBoZlNoYXBlLnBpbGxhckNvbnZleCwgY29udmV4UG9zLCB3b3JsZFBpbGxhck9mZnNldCwgY29udmV4UXVhdCwgaGZRdWF0LCBjb252ZXhCb2R5LCBoZkJvZHksIG51bGwsIG51bGwsIGp1c3RUZXN0LCBmYWNlTGlzdCwgbnVsbCk7CiAgICAgICAgICB9CgogICAgICAgICAgaWYgKGp1c3RUZXN0ICYmIGludGVyc2VjdGluZykgewogICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICAgIH0gLy8gVXBwZXIgdHJpYW5nbGUKCgogICAgICAgICAgaGZTaGFwZS5nZXRDb252ZXhUcmlhbmdsZVBpbGxhcihpLCBqLCB0cnVlKTsKICAgICAgICAgIFRyYW5zZm9ybS5wb2ludFRvV29ybGRGcmFtZShoZlBvcywgaGZRdWF0LCBoZlNoYXBlLnBpbGxhck9mZnNldCwgd29ybGRQaWxsYXJPZmZzZXQpOwoKICAgICAgICAgIGlmIChjb252ZXhQb3MuZGlzdGFuY2VUbyh3b3JsZFBpbGxhck9mZnNldCkgPCBoZlNoYXBlLnBpbGxhckNvbnZleC5ib3VuZGluZ1NwaGVyZVJhZGl1cyArIGNvbnZleFNoYXBlLmJvdW5kaW5nU3BoZXJlUmFkaXVzKSB7CiAgICAgICAgICAgIGludGVyc2VjdGluZyA9IHRoaXMuY29udmV4Q29udmV4KGNvbnZleFNoYXBlLCBoZlNoYXBlLnBpbGxhckNvbnZleCwgY29udmV4UG9zLCB3b3JsZFBpbGxhck9mZnNldCwgY29udmV4UXVhdCwgaGZRdWF0LCBjb252ZXhCb2R5LCBoZkJvZHksIG51bGwsIG51bGwsIGp1c3RUZXN0LCBmYWNlTGlzdCwgbnVsbCk7CiAgICAgICAgICB9CgogICAgICAgICAgaWYgKGp1c3RUZXN0ICYmIGludGVyc2VjdGluZykgewogICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KICAgIH0KCiAgICBzcGhlcmVQYXJ0aWNsZShzaiwgc2ksIHhqLCB4aSwgcWosIHFpLCBiaiwgYmksIHJzaSwgcnNqLCBqdXN0VGVzdCkgewogICAgICAvLyBUaGUgbm9ybWFsIGlzIHRoZSB1bml0IHZlY3RvciBmcm9tIHNwaGVyZSBjZW50ZXIgdG8gcGFydGljbGUgY2VudGVyCiAgICAgIGNvbnN0IG5vcm1hbCA9IHBhcnRpY2xlU3BoZXJlX25vcm1hbDsKICAgICAgbm9ybWFsLnNldCgwLCAwLCAxKTsKICAgICAgeGkudnN1Yih4aiwgbm9ybWFsKTsKICAgICAgY29uc3QgbGVuZ3RoU3F1YXJlZCA9IG5vcm1hbC5sZW5ndGhTcXVhcmVkKCk7CgogICAgICBpZiAobGVuZ3RoU3F1YXJlZCA8PSBzai5yYWRpdXMgKiBzai5yYWRpdXMpIHsKICAgICAgICBpZiAoanVzdFRlc3QpIHsKICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgIH0KCiAgICAgICAgY29uc3QgciA9IHRoaXMuY3JlYXRlQ29udGFjdEVxdWF0aW9uKGJpLCBiaiwgc2ksIHNqLCByc2ksIHJzaik7CiAgICAgICAgbm9ybWFsLm5vcm1hbGl6ZSgpOwogICAgICAgIHIucmouY29weShub3JtYWwpOwogICAgICAgIHIucmouc2NhbGUoc2oucmFkaXVzLCByLnJqKTsKICAgICAgICByLm5pLmNvcHkobm9ybWFsKTsgLy8gQ29udGFjdCBub3JtYWwKCiAgICAgICAgci5uaS5uZWdhdGUoci5uaSk7CiAgICAgICAgci5yaS5zZXQoMCwgMCwgMCk7IC8vIENlbnRlciBvZiBwYXJ0aWNsZQoKICAgICAgICB0aGlzLnJlc3VsdC5wdXNoKHIpOwogICAgICAgIHRoaXMuY3JlYXRlRnJpY3Rpb25FcXVhdGlvbnNGcm9tQ29udGFjdChyLCB0aGlzLmZyaWN0aW9uUmVzdWx0KTsKICAgICAgfQogICAgfQoKICAgIHBsYW5lUGFydGljbGUoc2osIHNpLCB4aiwgeGksIHFqLCBxaSwgYmosIGJpLCByc2ksIHJzaiwganVzdFRlc3QpIHsKICAgICAgY29uc3Qgbm9ybWFsID0gcGFydGljbGVQbGFuZV9ub3JtYWw7CiAgICAgIG5vcm1hbC5zZXQoMCwgMCwgMSk7CiAgICAgIGJqLnF1YXRlcm5pb24udm11bHQobm9ybWFsLCBub3JtYWwpOyAvLyBUdXJuIG5vcm1hbCBhY2NvcmRpbmcgdG8gcGxhbmUgb3JpZW50YXRpb24KCiAgICAgIGNvbnN0IHJlbHBvcyA9IHBhcnRpY2xlUGxhbmVfcmVscG9zOwogICAgICB4aS52c3ViKGJqLnBvc2l0aW9uLCByZWxwb3MpOwogICAgICBjb25zdCBkb3QgPSBub3JtYWwuZG90KHJlbHBvcyk7CgogICAgICBpZiAoZG90IDw9IDAuMCkgewogICAgICAgIGlmIChqdXN0VGVzdCkgewogICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgfQoKICAgICAgICBjb25zdCByID0gdGhpcy5jcmVhdGVDb250YWN0RXF1YXRpb24oYmksIGJqLCBzaSwgc2osIHJzaSwgcnNqKTsKICAgICAgICByLm5pLmNvcHkobm9ybWFsKTsgLy8gQ29udGFjdCBub3JtYWwgaXMgdGhlIHBsYW5lIG5vcm1hbAoKICAgICAgICByLm5pLm5lZ2F0ZShyLm5pKTsKICAgICAgICByLnJpLnNldCgwLCAwLCAwKTsgLy8gQ2VudGVyIG9mIHBhcnRpY2xlCiAgICAgICAgLy8gR2V0IHBhcnRpY2xlIHBvc2l0aW9uIHByb2plY3RlZCBvbiBwbGFuZQoKICAgICAgICBjb25zdCBwcm9qZWN0ZWQgPSBwYXJ0aWNsZVBsYW5lX3Byb2plY3RlZDsKICAgICAgICBub3JtYWwuc2NhbGUobm9ybWFsLmRvdCh4aSksIHByb2plY3RlZCk7CiAgICAgICAgeGkudnN1Yihwcm9qZWN0ZWQsIHByb2plY3RlZCk7IC8vcHJvamVjdGVkLnZhZGQoYmoucG9zaXRpb24scHJvamVjdGVkKTsKICAgICAgICAvLyByaiBpcyBub3cgdGhlIHByb2plY3RlZCB3b3JsZCBwb3NpdGlvbiBtaW51cyBwbGFuZSBwb3NpdGlvbgoKICAgICAgICByLnJqLmNvcHkocHJvamVjdGVkKTsKICAgICAgICB0aGlzLnJlc3VsdC5wdXNoKHIpOwogICAgICAgIHRoaXMuY3JlYXRlRnJpY3Rpb25FcXVhdGlvbnNGcm9tQ29udGFjdChyLCB0aGlzLmZyaWN0aW9uUmVzdWx0KTsKICAgICAgfQogICAgfQoKICAgIGJveFBhcnRpY2xlKHNpLCBzaiwgeGksIHhqLCBxaSwgcWosIGJpLCBiaiwgcnNpLCByc2osIGp1c3RUZXN0KSB7CiAgICAgIHNpLmNvbnZleFBvbHloZWRyb25SZXByZXNlbnRhdGlvbi5tYXRlcmlhbCA9IHNpLm1hdGVyaWFsOwogICAgICBzaS5jb252ZXhQb2x5aGVkcm9uUmVwcmVzZW50YXRpb24uY29sbGlzaW9uUmVzcG9uc2UgPSBzaS5jb2xsaXNpb25SZXNwb25zZTsKICAgICAgcmV0dXJuIHRoaXMuY29udmV4UGFydGljbGUoc2kuY29udmV4UG9seWhlZHJvblJlcHJlc2VudGF0aW9uLCBzaiwgeGksIHhqLCBxaSwgcWosIGJpLCBiaiwgc2ksIHNqLCBqdXN0VGVzdCk7CiAgICB9CgogICAgY29udmV4UGFydGljbGUoc2osIHNpLCB4aiwgeGksIHFqLCBxaSwgYmosIGJpLCByc2ksIHJzaiwganVzdFRlc3QpIHsKICAgICAgbGV0IHBlbmV0cmF0ZWRGYWNlSW5kZXggPSAtMTsKICAgICAgY29uc3QgcGVuZXRyYXRlZEZhY2VOb3JtYWwgPSBjb252ZXhQYXJ0aWNsZV9wZW5ldHJhdGVkRmFjZU5vcm1hbDsKICAgICAgY29uc3Qgd29ybGRQZW5ldHJhdGlvblZlYyA9IGNvbnZleFBhcnRpY2xlX3dvcmxkUGVuZXRyYXRpb25WZWM7CiAgICAgIGxldCBtaW5QZW5ldHJhdGlvbiA9IG51bGw7CiAgICAgIGNvbnN0IGxvY2FsID0gY29udmV4UGFydGljbGVfbG9jYWw7CiAgICAgIGxvY2FsLmNvcHkoeGkpOwogICAgICBsb2NhbC52c3ViKHhqLCBsb2NhbCk7IC8vIENvbnZlcnQgcG9zaXRpb24gdG8gcmVsYXRpdmUgdGhlIGNvbnZleCBvcmlnaW4KCiAgICAgIHFqLmNvbmp1Z2F0ZShjcWopOwogICAgICBjcWoudm11bHQobG9jYWwsIGxvY2FsKTsKCiAgICAgIGlmIChzai5wb2ludElzSW5zaWRlKGxvY2FsKSkgewogICAgICAgIGlmIChzai53b3JsZFZlcnRpY2VzTmVlZHNVcGRhdGUpIHsKICAgICAgICAgIHNqLmNvbXB1dGVXb3JsZFZlcnRpY2VzKHhqLCBxaik7CiAgICAgICAgfQoKICAgICAgICBpZiAoc2oud29ybGRGYWNlTm9ybWFsc05lZWRzVXBkYXRlKSB7CiAgICAgICAgICBzai5jb21wdXRlV29ybGRGYWNlTm9ybWFscyhxaik7CiAgICAgICAgfSAvLyBGb3IgZWFjaCB3b3JsZCBwb2x5Z29uIGluIHRoZSBwb2x5aGVkcmEKCgogICAgICAgIGZvciAobGV0IGkgPSAwLCBuZmFjZXMgPSBzai5mYWNlcy5sZW5ndGg7IGkgIT09IG5mYWNlczsgaSsrKSB7CiAgICAgICAgICAvLyBDb25zdHJ1Y3Qgd29ybGQgZmFjZSB2ZXJ0aWNlcwogICAgICAgICAgY29uc3QgdmVydHMgPSBbc2oud29ybGRWZXJ0aWNlc1tzai5mYWNlc1tpXVswXV1dOwogICAgICAgICAgY29uc3Qgbm9ybWFsID0gc2oud29ybGRGYWNlTm9ybWFsc1tpXTsgLy8gQ2hlY2sgaG93IG11Y2ggdGhlIHBhcnRpY2xlIHBlbmV0cmF0ZXMgdGhlIHBvbHlnb24gcGxhbmUuCgogICAgICAgICAgeGkudnN1Yih2ZXJ0c1swXSwgY29udmV4UGFydGljbGVfdmVydGV4VG9QYXJ0aWNsZSk7CiAgICAgICAgICBjb25zdCBwZW5ldHJhdGlvbiA9IC1ub3JtYWwuZG90KGNvbnZleFBhcnRpY2xlX3ZlcnRleFRvUGFydGljbGUpOwoKICAgICAgICAgIGlmIChtaW5QZW5ldHJhdGlvbiA9PT0gbnVsbCB8fCBNYXRoLmFicyhwZW5ldHJhdGlvbikgPCBNYXRoLmFicyhtaW5QZW5ldHJhdGlvbikpIHsKICAgICAgICAgICAgaWYgKGp1c3RUZXN0KSB7CiAgICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIG1pblBlbmV0cmF0aW9uID0gcGVuZXRyYXRpb247CiAgICAgICAgICAgIHBlbmV0cmF0ZWRGYWNlSW5kZXggPSBpOwogICAgICAgICAgICBwZW5ldHJhdGVkRmFjZU5vcm1hbC5jb3B5KG5vcm1hbCk7CiAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBpZiAocGVuZXRyYXRlZEZhY2VJbmRleCAhPT0gLTEpIHsKICAgICAgICAgIC8vIFNldHVwIGNvbnRhY3QKICAgICAgICAgIGNvbnN0IHIgPSB0aGlzLmNyZWF0ZUNvbnRhY3RFcXVhdGlvbihiaSwgYmosIHNpLCBzaiwgcnNpLCByc2opOwogICAgICAgICAgcGVuZXRyYXRlZEZhY2VOb3JtYWwuc2NhbGUobWluUGVuZXRyYXRpb24sIHdvcmxkUGVuZXRyYXRpb25WZWMpOyAvLyByaiBpcyB0aGUgcGFydGljbGUgcG9zaXRpb24gcHJvamVjdGVkIHRvIHRoZSBmYWNlCgogICAgICAgICAgd29ybGRQZW5ldHJhdGlvblZlYy52YWRkKHhpLCB3b3JsZFBlbmV0cmF0aW9uVmVjKTsKICAgICAgICAgIHdvcmxkUGVuZXRyYXRpb25WZWMudnN1Yih4aiwgd29ybGRQZW5ldHJhdGlvblZlYyk7CiAgICAgICAgICByLnJqLmNvcHkod29ybGRQZW5ldHJhdGlvblZlYyk7IC8vY29uc3QgcHJvamVjdGVkVG9GYWNlID0geGkudnN1Yih4aikudmFkZCh3b3JsZFBlbmV0cmF0aW9uVmVjKTsKICAgICAgICAgIC8vcHJvamVjdGVkVG9GYWNlLmNvcHkoci5yaik7CiAgICAgICAgICAvL3FqLnZtdWx0KHIucmosci5yaik7CgogICAgICAgICAgcGVuZXRyYXRlZEZhY2VOb3JtYWwubmVnYXRlKHIubmkpOyAvLyBDb250YWN0IG5vcm1hbAoKICAgICAgICAgIHIucmkuc2V0KDAsIDAsIDApOyAvLyBDZW50ZXIgb2YgcGFydGljbGUKCiAgICAgICAgICBjb25zdCByaSA9IHIucmk7CiAgICAgICAgICBjb25zdCByaiA9IHIucmo7IC8vIE1ha2UgcmVsYXRpdmUgdG8gYm9kaWVzCgogICAgICAgICAgcmkudmFkZCh4aSwgcmkpOwogICAgICAgICAgcmkudnN1YihiaS5wb3NpdGlvbiwgcmkpOwogICAgICAgICAgcmoudmFkZCh4aiwgcmopOwogICAgICAgICAgcmoudnN1Yihiai5wb3NpdGlvbiwgcmopOwogICAgICAgICAgdGhpcy5yZXN1bHQucHVzaChyKTsKICAgICAgICAgIHRoaXMuY3JlYXRlRnJpY3Rpb25FcXVhdGlvbnNGcm9tQ29udGFjdChyLCB0aGlzLmZyaWN0aW9uUmVzdWx0KTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgY29uc29sZS53YXJuKCdQb2ludCBmb3VuZCBpbnNpZGUgY29udmV4LCBidXQgZGlkIG5vdCBmaW5kIHBlbmV0cmF0aW5nIGZhY2UhJyk7CiAgICAgICAgfQogICAgICB9CiAgICB9CgogICAgaGVpZ2h0ZmllbGRDeWxpbmRlcihoZlNoYXBlLCBjb252ZXhTaGFwZSwgaGZQb3MsIGNvbnZleFBvcywgaGZRdWF0LCBjb252ZXhRdWF0LCBoZkJvZHksIGNvbnZleEJvZHksIHJzaSwgcnNqLCBqdXN0VGVzdCkgewogICAgICByZXR1cm4gdGhpcy5jb252ZXhIZWlnaHRmaWVsZChjb252ZXhTaGFwZSwgaGZTaGFwZSwgY29udmV4UG9zLCBoZlBvcywgY29udmV4UXVhdCwgaGZRdWF0LCBjb252ZXhCb2R5LCBoZkJvZHksIHJzaSwgcnNqLCBqdXN0VGVzdCk7CiAgICB9CgogICAgcGFydGljbGVDeWxpbmRlcihzaSwgc2osIHhpLCB4aiwgcWksIHFqLCBiaSwgYmosIHJzaSwgcnNqLCBqdXN0VGVzdCkgewogICAgICByZXR1cm4gdGhpcy5jb252ZXhQYXJ0aWNsZShzaiwgc2ksIHhqLCB4aSwgcWosIHFpLCBiaiwgYmksIHJzaSwgcnNqLCBqdXN0VGVzdCk7CiAgICB9CgogICAgc3BoZXJlVHJpbWVzaChzcGhlcmVTaGFwZSwgdHJpbWVzaFNoYXBlLCBzcGhlcmVQb3MsIHRyaW1lc2hQb3MsIHNwaGVyZVF1YXQsIHRyaW1lc2hRdWF0LCBzcGhlcmVCb2R5LCB0cmltZXNoQm9keSwgcnNpLCByc2osIGp1c3RUZXN0KSB7CiAgICAgIGNvbnN0IGVkZ2VWZXJ0ZXhBID0gc3BoZXJlVHJpbWVzaF9lZGdlVmVydGV4QTsKICAgICAgY29uc3QgZWRnZVZlcnRleEIgPSBzcGhlcmVUcmltZXNoX2VkZ2VWZXJ0ZXhCOwogICAgICBjb25zdCBlZGdlVmVjdG9yID0gc3BoZXJlVHJpbWVzaF9lZGdlVmVjdG9yOwogICAgICBjb25zdCBlZGdlVmVjdG9yVW5pdCA9IHNwaGVyZVRyaW1lc2hfZWRnZVZlY3RvclVuaXQ7CiAgICAgIGNvbnN0IGxvY2FsU3BoZXJlUG9zID0gc3BoZXJlVHJpbWVzaF9sb2NhbFNwaGVyZVBvczsKICAgICAgY29uc3QgdG1wID0gc3BoZXJlVHJpbWVzaF90bXA7CiAgICAgIGNvbnN0IGxvY2FsU3BoZXJlQUFCQiA9IHNwaGVyZVRyaW1lc2hfbG9jYWxTcGhlcmVBQUJCOwogICAgICBjb25zdCB2MiA9IHNwaGVyZVRyaW1lc2hfdjI7CiAgICAgIGNvbnN0IHJlbHBvcyA9IHNwaGVyZVRyaW1lc2hfcmVscG9zOwogICAgICBjb25zdCB0cmlhbmdsZXMgPSBzcGhlcmVUcmltZXNoX3RyaWFuZ2xlczsgLy8gQ29udmVydCBzcGhlcmUgcG9zaXRpb24gdG8gbG9jYWwgaW4gdGhlIHRyaW1lc2gKCiAgICAgIFRyYW5zZm9ybS5wb2ludFRvTG9jYWxGcmFtZSh0cmltZXNoUG9zLCB0cmltZXNoUXVhdCwgc3BoZXJlUG9zLCBsb2NhbFNwaGVyZVBvcyk7IC8vIEdldCB0aGUgYWFiYiBvZiB0aGUgc3BoZXJlIGxvY2FsbHkgaW4gdGhlIHRyaW1lc2gKCiAgICAgIGNvbnN0IHNwaGVyZVJhZGl1cyA9IHNwaGVyZVNoYXBlLnJhZGl1czsKICAgICAgbG9jYWxTcGhlcmVBQUJCLmxvd2VyQm91bmQuc2V0KGxvY2FsU3BoZXJlUG9zLnggLSBzcGhlcmVSYWRpdXMsIGxvY2FsU3BoZXJlUG9zLnkgLSBzcGhlcmVSYWRpdXMsIGxvY2FsU3BoZXJlUG9zLnogLSBzcGhlcmVSYWRpdXMpOwogICAgICBsb2NhbFNwaGVyZUFBQkIudXBwZXJCb3VuZC5zZXQobG9jYWxTcGhlcmVQb3MueCArIHNwaGVyZVJhZGl1cywgbG9jYWxTcGhlcmVQb3MueSArIHNwaGVyZVJhZGl1cywgbG9jYWxTcGhlcmVQb3MueiArIHNwaGVyZVJhZGl1cyk7CiAgICAgIHRyaW1lc2hTaGFwZS5nZXRUcmlhbmdsZXNJbkFBQkIobG9jYWxTcGhlcmVBQUJCLCB0cmlhbmdsZXMpOyAvL2ZvciAobGV0IGkgPSAwOyBpIDwgdHJpbWVzaFNoYXBlLmluZGljZXMubGVuZ3RoIC8gMzsgaSsrKSB0cmlhbmdsZXMucHVzaChpKTsgLy8gQWxsCiAgICAgIC8vIFZlcnRpY2VzCgogICAgICBjb25zdCB2ID0gc3BoZXJlVHJpbWVzaF92OwogICAgICBjb25zdCByYWRpdXNTcXVhcmVkID0gc3BoZXJlU2hhcGUucmFkaXVzICogc3BoZXJlU2hhcGUucmFkaXVzOwoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0cmlhbmdsZXMubGVuZ3RoOyBpKyspIHsKICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IDM7IGorKykgewogICAgICAgICAgdHJpbWVzaFNoYXBlLmdldFZlcnRleCh0cmltZXNoU2hhcGUuaW5kaWNlc1t0cmlhbmdsZXNbaV0gKiAzICsgal0sIHYpOyAvLyBDaGVjayB2ZXJ0ZXggb3ZlcmxhcCBpbiBzcGhlcmUKCiAgICAgICAgICB2LnZzdWIobG9jYWxTcGhlcmVQb3MsIHJlbHBvcyk7CgogICAgICAgICAgaWYgKHJlbHBvcy5sZW5ndGhTcXVhcmVkKCkgPD0gcmFkaXVzU3F1YXJlZCkgewogICAgICAgICAgICAvLyBTYWZlIHVwCiAgICAgICAgICAgIHYyLmNvcHkodik7CiAgICAgICAgICAgIFRyYW5zZm9ybS5wb2ludFRvV29ybGRGcmFtZSh0cmltZXNoUG9zLCB0cmltZXNoUXVhdCwgdjIsIHYpOwogICAgICAgICAgICB2LnZzdWIoc3BoZXJlUG9zLCByZWxwb3MpOwoKICAgICAgICAgICAgaWYgKGp1c3RUZXN0KSB7CiAgICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGxldCByID0gdGhpcy5jcmVhdGVDb250YWN0RXF1YXRpb24oc3BoZXJlQm9keSwgdHJpbWVzaEJvZHksIHNwaGVyZVNoYXBlLCB0cmltZXNoU2hhcGUsIHJzaSwgcnNqKTsKICAgICAgICAgICAgci5uaS5jb3B5KHJlbHBvcyk7CiAgICAgICAgICAgIHIubmkubm9ybWFsaXplKCk7IC8vIHJpIGlzIHRoZSB2ZWN0b3IgZnJvbSBzcGhlcmUgY2VudGVyIHRvIHRoZSBzcGhlcmUgc3VyZmFjZQoKICAgICAgICAgICAgci5yaS5jb3B5KHIubmkpOwogICAgICAgICAgICByLnJpLnNjYWxlKHNwaGVyZVNoYXBlLnJhZGl1cywgci5yaSk7CiAgICAgICAgICAgIHIucmkudmFkZChzcGhlcmVQb3MsIHIucmkpOwogICAgICAgICAgICByLnJpLnZzdWIoc3BoZXJlQm9keS5wb3NpdGlvbiwgci5yaSk7CiAgICAgICAgICAgIHIucmouY29weSh2KTsKICAgICAgICAgICAgci5yai52c3ViKHRyaW1lc2hCb2R5LnBvc2l0aW9uLCByLnJqKTsgLy8gU3RvcmUgcmVzdWx0CgogICAgICAgICAgICB0aGlzLnJlc3VsdC5wdXNoKHIpOwogICAgICAgICAgICB0aGlzLmNyZWF0ZUZyaWN0aW9uRXF1YXRpb25zRnJvbUNvbnRhY3QociwgdGhpcy5mcmljdGlvblJlc3VsdCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9IC8vIENoZWNrIGFsbCBlZGdlcwoKCiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdHJpYW5nbGVzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCAzOyBqKyspIHsKICAgICAgICAgIHRyaW1lc2hTaGFwZS5nZXRWZXJ0ZXgodHJpbWVzaFNoYXBlLmluZGljZXNbdHJpYW5nbGVzW2ldICogMyArIGpdLCBlZGdlVmVydGV4QSk7CiAgICAgICAgICB0cmltZXNoU2hhcGUuZ2V0VmVydGV4KHRyaW1lc2hTaGFwZS5pbmRpY2VzW3RyaWFuZ2xlc1tpXSAqIDMgKyAoaiArIDEpICUgM10sIGVkZ2VWZXJ0ZXhCKTsKICAgICAgICAgIGVkZ2VWZXJ0ZXhCLnZzdWIoZWRnZVZlcnRleEEsIGVkZ2VWZWN0b3IpOyAvLyBQcm9qZWN0IHNwaGVyZSBwb3NpdGlvbiB0byB0aGUgZWRnZQoKICAgICAgICAgIGxvY2FsU3BoZXJlUG9zLnZzdWIoZWRnZVZlcnRleEIsIHRtcCk7CiAgICAgICAgICBjb25zdCBwb3NpdGlvbkFsb25nRWRnZUIgPSB0bXAuZG90KGVkZ2VWZWN0b3IpOwogICAgICAgICAgbG9jYWxTcGhlcmVQb3MudnN1YihlZGdlVmVydGV4QSwgdG1wKTsKICAgICAgICAgIGxldCBwb3NpdGlvbkFsb25nRWRnZUEgPSB0bXAuZG90KGVkZ2VWZWN0b3IpOwoKICAgICAgICAgIGlmIChwb3NpdGlvbkFsb25nRWRnZUEgPiAwICYmIHBvc2l0aW9uQWxvbmdFZGdlQiA8IDApIHsKICAgICAgICAgICAgLy8gTm93IGNoZWNrIHRoZSBvcnRob2dvbmFsIGRpc3RhbmNlIGZyb20gZWRnZSB0byBzcGhlcmUgY2VudGVyCiAgICAgICAgICAgIGxvY2FsU3BoZXJlUG9zLnZzdWIoZWRnZVZlcnRleEEsIHRtcCk7CiAgICAgICAgICAgIGVkZ2VWZWN0b3JVbml0LmNvcHkoZWRnZVZlY3Rvcik7CiAgICAgICAgICAgIGVkZ2VWZWN0b3JVbml0Lm5vcm1hbGl6ZSgpOwogICAgICAgICAgICBwb3NpdGlvbkFsb25nRWRnZUEgPSB0bXAuZG90KGVkZ2VWZWN0b3JVbml0KTsKICAgICAgICAgICAgZWRnZVZlY3RvclVuaXQuc2NhbGUocG9zaXRpb25BbG9uZ0VkZ2VBLCB0bXApOwogICAgICAgICAgICB0bXAudmFkZChlZGdlVmVydGV4QSwgdG1wKTsgLy8gdG1wIGlzIG5vdyB0aGUgc3BoZXJlIGNlbnRlciBwb3NpdGlvbiBwcm9qZWN0ZWQgdG8gdGhlIGVkZ2UsIGRlZmluZWQgbG9jYWxseSBpbiB0aGUgdHJpbWVzaCBmcmFtZQoKICAgICAgICAgICAgY29uc3QgZGlzdCA9IHRtcC5kaXN0YW5jZVRvKGxvY2FsU3BoZXJlUG9zKTsKCiAgICAgICAgICAgIGlmIChkaXN0IDwgc3BoZXJlU2hhcGUucmFkaXVzKSB7CiAgICAgICAgICAgICAgaWYgKGp1c3RUZXN0KSB7CiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIGNvbnN0IHIgPSB0aGlzLmNyZWF0ZUNvbnRhY3RFcXVhdGlvbihzcGhlcmVCb2R5LCB0cmltZXNoQm9keSwgc3BoZXJlU2hhcGUsIHRyaW1lc2hTaGFwZSwgcnNpLCByc2opOwogICAgICAgICAgICAgIHRtcC52c3ViKGxvY2FsU3BoZXJlUG9zLCByLm5pKTsKICAgICAgICAgICAgICByLm5pLm5vcm1hbGl6ZSgpOwogICAgICAgICAgICAgIHIubmkuc2NhbGUoc3BoZXJlU2hhcGUucmFkaXVzLCByLnJpKTsKICAgICAgICAgICAgICByLnJpLnZhZGQoc3BoZXJlUG9zLCByLnJpKTsKICAgICAgICAgICAgICByLnJpLnZzdWIoc3BoZXJlQm9keS5wb3NpdGlvbiwgci5yaSk7CiAgICAgICAgICAgICAgVHJhbnNmb3JtLnBvaW50VG9Xb3JsZEZyYW1lKHRyaW1lc2hQb3MsIHRyaW1lc2hRdWF0LCB0bXAsIHRtcCk7CiAgICAgICAgICAgICAgdG1wLnZzdWIodHJpbWVzaEJvZHkucG9zaXRpb24sIHIucmopOwogICAgICAgICAgICAgIFRyYW5zZm9ybS52ZWN0b3JUb1dvcmxkRnJhbWUodHJpbWVzaFF1YXQsIHIubmksIHIubmkpOwogICAgICAgICAgICAgIFRyYW5zZm9ybS52ZWN0b3JUb1dvcmxkRnJhbWUodHJpbWVzaFF1YXQsIHIucmksIHIucmkpOwogICAgICAgICAgICAgIHRoaXMucmVzdWx0LnB1c2gocik7CiAgICAgICAgICAgICAgdGhpcy5jcmVhdGVGcmljdGlvbkVxdWF0aW9uc0Zyb21Db250YWN0KHIsIHRoaXMuZnJpY3Rpb25SZXN1bHQpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9IC8vIFRyaWFuZ2xlIGZhY2VzCgoKICAgICAgY29uc3QgdmEgPSBzcGhlcmVUcmltZXNoX3ZhOwogICAgICBjb25zdCB2YiA9IHNwaGVyZVRyaW1lc2hfdmI7CiAgICAgIGNvbnN0IHZjID0gc3BoZXJlVHJpbWVzaF92YzsKICAgICAgY29uc3Qgbm9ybWFsID0gc3BoZXJlVHJpbWVzaF9ub3JtYWw7CgogICAgICBmb3IgKGxldCBpID0gMCwgTiA9IHRyaWFuZ2xlcy5sZW5ndGg7IGkgIT09IE47IGkrKykgewogICAgICAgIHRyaW1lc2hTaGFwZS5nZXRUcmlhbmdsZVZlcnRpY2VzKHRyaWFuZ2xlc1tpXSwgdmEsIHZiLCB2Yyk7CiAgICAgICAgdHJpbWVzaFNoYXBlLmdldE5vcm1hbCh0cmlhbmdsZXNbaV0sIG5vcm1hbCk7CiAgICAgICAgbG9jYWxTcGhlcmVQb3MudnN1Yih2YSwgdG1wKTsKICAgICAgICBsZXQgZGlzdCA9IHRtcC5kb3Qobm9ybWFsKTsKICAgICAgICBub3JtYWwuc2NhbGUoZGlzdCwgdG1wKTsKICAgICAgICBsb2NhbFNwaGVyZVBvcy52c3ViKHRtcCwgdG1wKTsgLy8gdG1wIGlzIG5vdyB0aGUgc3BoZXJlIHBvc2l0aW9uIHByb2plY3RlZCB0byB0aGUgdHJpYW5nbGUgcGxhbmUKCiAgICAgICAgZGlzdCA9IHRtcC5kaXN0YW5jZVRvKGxvY2FsU3BoZXJlUG9zKTsKCiAgICAgICAgaWYgKFJheS5wb2ludEluVHJpYW5nbGUodG1wLCB2YSwgdmIsIHZjKSAmJiBkaXN0IDwgc3BoZXJlU2hhcGUucmFkaXVzKSB7CiAgICAgICAgICBpZiAoanVzdFRlc3QpIHsKICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICB9CgogICAgICAgICAgbGV0IHIgPSB0aGlzLmNyZWF0ZUNvbnRhY3RFcXVhdGlvbihzcGhlcmVCb2R5LCB0cmltZXNoQm9keSwgc3BoZXJlU2hhcGUsIHRyaW1lc2hTaGFwZSwgcnNpLCByc2opOwogICAgICAgICAgdG1wLnZzdWIobG9jYWxTcGhlcmVQb3MsIHIubmkpOwogICAgICAgICAgci5uaS5ub3JtYWxpemUoKTsKICAgICAgICAgIHIubmkuc2NhbGUoc3BoZXJlU2hhcGUucmFkaXVzLCByLnJpKTsKICAgICAgICAgIHIucmkudmFkZChzcGhlcmVQb3MsIHIucmkpOwogICAgICAgICAgci5yaS52c3ViKHNwaGVyZUJvZHkucG9zaXRpb24sIHIucmkpOwogICAgICAgICAgVHJhbnNmb3JtLnBvaW50VG9Xb3JsZEZyYW1lKHRyaW1lc2hQb3MsIHRyaW1lc2hRdWF0LCB0bXAsIHRtcCk7CiAgICAgICAgICB0bXAudnN1Yih0cmltZXNoQm9keS5wb3NpdGlvbiwgci5yaik7CiAgICAgICAgICBUcmFuc2Zvcm0udmVjdG9yVG9Xb3JsZEZyYW1lKHRyaW1lc2hRdWF0LCByLm5pLCByLm5pKTsKICAgICAgICAgIFRyYW5zZm9ybS52ZWN0b3JUb1dvcmxkRnJhbWUodHJpbWVzaFF1YXQsIHIucmksIHIucmkpOwogICAgICAgICAgdGhpcy5yZXN1bHQucHVzaChyKTsKICAgICAgICAgIHRoaXMuY3JlYXRlRnJpY3Rpb25FcXVhdGlvbnNGcm9tQ29udGFjdChyLCB0aGlzLmZyaWN0aW9uUmVzdWx0KTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIHRyaWFuZ2xlcy5sZW5ndGggPSAwOwogICAgfQoKICAgIHBsYW5lVHJpbWVzaChwbGFuZVNoYXBlLCB0cmltZXNoU2hhcGUsIHBsYW5lUG9zLCB0cmltZXNoUG9zLCBwbGFuZVF1YXQsIHRyaW1lc2hRdWF0LCBwbGFuZUJvZHksIHRyaW1lc2hCb2R5LCByc2ksIHJzaiwganVzdFRlc3QpIHsKICAgICAgLy8gTWFrZSBjb250YWN0cyEKICAgICAgY29uc3QgdiA9IG5ldyBWZWMzKCk7CiAgICAgIGNvbnN0IG5vcm1hbCA9IHBsYW5lVHJpbWVzaF9ub3JtYWw7CiAgICAgIG5vcm1hbC5zZXQoMCwgMCwgMSk7CiAgICAgIHBsYW5lUXVhdC52bXVsdChub3JtYWwsIG5vcm1hbCk7IC8vIFR1cm4gbm9ybWFsIGFjY29yZGluZyB0byBwbGFuZQoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0cmltZXNoU2hhcGUudmVydGljZXMubGVuZ3RoIC8gMzsgaSsrKSB7CiAgICAgICAgLy8gR2V0IHdvcmxkIHZlcnRleCBmcm9tIHRyaW1lc2gKICAgICAgICB0cmltZXNoU2hhcGUuZ2V0VmVydGV4KGksIHYpOyAvLyBTYWZlIHVwCgogICAgICAgIGNvbnN0IHYyID0gbmV3IFZlYzMoKTsKICAgICAgICB2Mi5jb3B5KHYpOwogICAgICAgIFRyYW5zZm9ybS5wb2ludFRvV29ybGRGcmFtZSh0cmltZXNoUG9zLCB0cmltZXNoUXVhdCwgdjIsIHYpOyAvLyBDaGVjayBwbGFuZSBzaWRlCgogICAgICAgIGNvbnN0IHJlbHBvcyA9IHBsYW5lVHJpbWVzaF9yZWxwb3M7CiAgICAgICAgdi52c3ViKHBsYW5lUG9zLCByZWxwb3MpOwogICAgICAgIGNvbnN0IGRvdCA9IG5vcm1hbC5kb3QocmVscG9zKTsKCiAgICAgICAgaWYgKGRvdCA8PSAwLjApIHsKICAgICAgICAgIGlmIChqdXN0VGVzdCkgewogICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICAgIH0KCiAgICAgICAgICBjb25zdCByID0gdGhpcy5jcmVhdGVDb250YWN0RXF1YXRpb24ocGxhbmVCb2R5LCB0cmltZXNoQm9keSwgcGxhbmVTaGFwZSwgdHJpbWVzaFNoYXBlLCByc2ksIHJzaik7CiAgICAgICAgICByLm5pLmNvcHkobm9ybWFsKTsgLy8gQ29udGFjdCBub3JtYWwgaXMgdGhlIHBsYW5lIG5vcm1hbAogICAgICAgICAgLy8gR2V0IHZlcnRleCBwb3NpdGlvbiBwcm9qZWN0ZWQgb24gcGxhbmUKCiAgICAgICAgICBjb25zdCBwcm9qZWN0ZWQgPSBwbGFuZVRyaW1lc2hfcHJvamVjdGVkOwogICAgICAgICAgbm9ybWFsLnNjYWxlKHJlbHBvcy5kb3Qobm9ybWFsKSwgcHJvamVjdGVkKTsKICAgICAgICAgIHYudnN1Yihwcm9qZWN0ZWQsIHByb2plY3RlZCk7IC8vIHJpIGlzIHRoZSBwcm9qZWN0ZWQgd29ybGQgcG9zaXRpb24gbWludXMgcGxhbmUgcG9zaXRpb24KCiAgICAgICAgICByLnJpLmNvcHkocHJvamVjdGVkKTsKICAgICAgICAgIHIucmkudnN1YihwbGFuZUJvZHkucG9zaXRpb24sIHIucmkpOwogICAgICAgICAgci5yai5jb3B5KHYpOwogICAgICAgICAgci5yai52c3ViKHRyaW1lc2hCb2R5LnBvc2l0aW9uLCByLnJqKTsgLy8gU3RvcmUgcmVzdWx0CgogICAgICAgICAgdGhpcy5yZXN1bHQucHVzaChyKTsKICAgICAgICAgIHRoaXMuY3JlYXRlRnJpY3Rpb25FcXVhdGlvbnNGcm9tQ29udGFjdChyLCB0aGlzLmZyaWN0aW9uUmVzdWx0KTsKICAgICAgICB9CiAgICAgIH0KICAgIH0gLy8gY29udmV4VHJpbWVzaCgKICAgIC8vICAgc2k6IENvbnZleFBvbHloZWRyb24sIHNqOiBUcmltZXNoLCB4aTogVmVjMywgeGo6IFZlYzMsIHFpOiBRdWF0ZXJuaW9uLCBxajogUXVhdGVybmlvbiwKICAgIC8vICAgYmk6IEJvZHksIGJqOiBCb2R5LCByc2k/OiBTaGFwZSB8IG51bGwsIHJzaj86IFNoYXBlIHwgbnVsbCwKICAgIC8vICAgZmFjZUxpc3RBPzogbnVtYmVyW10gfCBudWxsLCBmYWNlTGlzdEI/OiBudW1iZXJbXSB8IG51bGwsCiAgICAvLyApIHsKICAgIC8vICAgY29uc3Qgc2VwQXhpcyA9IGNvbnZleENvbnZleF9zZXBBeGlzOwogICAgLy8gICBpZih4aS5kaXN0YW5jZVRvKHhqKSA+IHNpLmJvdW5kaW5nU3BoZXJlUmFkaXVzICsgc2ouYm91bmRpbmdTcGhlcmVSYWRpdXMpewogICAgLy8gICAgICAgcmV0dXJuOwogICAgLy8gICB9CiAgICAvLyAgIC8vIENvbnN0cnVjdCBhIHRlbXAgaHVsbCBmb3IgZWFjaCB0cmlhbmdsZQogICAgLy8gICBjb25zdCBodWxsQiA9IG5ldyBDb252ZXhQb2x5aGVkcm9uKCk7CiAgICAvLyAgIGh1bGxCLmZhY2VzID0gW1swLDEsMl1dOwogICAgLy8gICBjb25zdCB2YSA9IG5ldyBWZWMzKCk7CiAgICAvLyAgIGNvbnN0IHZiID0gbmV3IFZlYzMoKTsKICAgIC8vICAgY29uc3QgdmMgPSBuZXcgVmVjMygpOwogICAgLy8gICBodWxsQi52ZXJ0aWNlcyA9IFsKICAgIC8vICAgICAgIHZhLAogICAgLy8gICAgICAgdmIsCiAgICAvLyAgICAgICB2YwogICAgLy8gICBdOwogICAgLy8gICBmb3IgKGxldCBpID0gMDsgaSA8IHNqLmluZGljZXMubGVuZ3RoIC8gMzsgaSsrKSB7CiAgICAvLyAgICAgICBjb25zdCB0cmlhbmdsZU5vcm1hbCA9IG5ldyBWZWMzKCk7CiAgICAvLyAgICAgICBzai5nZXROb3JtYWwoaSwgdHJpYW5nbGVOb3JtYWwpOwogICAgLy8gICAgICAgaHVsbEIuZmFjZU5vcm1hbHMgPSBbdHJpYW5nbGVOb3JtYWxdOwogICAgLy8gICAgICAgc2ouZ2V0VHJpYW5nbGVWZXJ0aWNlcyhpLCB2YSwgdmIsIHZjKTsKICAgIC8vICAgICAgIGxldCBkID0gc2kudGVzdFNlcEF4aXModHJpYW5nbGVOb3JtYWwsIGh1bGxCLCB4aSwgcWksIHhqLCBxaik7CiAgICAvLyAgICAgICBpZighZCl7CiAgICAvLyAgICAgICAgICAgdHJpYW5nbGVOb3JtYWwuc2NhbGUoLTEsIHRyaWFuZ2xlTm9ybWFsKTsKICAgIC8vICAgICAgICAgICBkID0gc2kudGVzdFNlcEF4aXModHJpYW5nbGVOb3JtYWwsIGh1bGxCLCB4aSwgcWksIHhqLCBxaik7CiAgICAvLyAgICAgICAgICAgaWYoIWQpewogICAgLy8gICAgICAgICAgICAgICBjb250aW51ZTsKICAgIC8vICAgICAgICAgICB9CiAgICAvLyAgICAgICB9CiAgICAvLyAgICAgICBjb25zdCByZXM6IENvbnZleFBvbHloZWRyb25Db250YWN0UG9pbnRbXSA9IFtdOwogICAgLy8gICAgICAgY29uc3QgcSA9IGNvbnZleENvbnZleF9xOwogICAgLy8gICAgICAgc2kuY2xpcEFnYWluc3RIdWxsKHhpLHFpLGh1bGxCLHhqLHFqLHRyaWFuZ2xlTm9ybWFsLC0xMDAsMTAwLHJlcyk7CiAgICAvLyAgICAgICBmb3IobGV0IGogPSAwOyBqICE9PSByZXMubGVuZ3RoOyBqKyspewogICAgLy8gICAgICAgICAgIGNvbnN0IHIgPSB0aGlzLmNyZWF0ZUNvbnRhY3RFcXVhdGlvbihiaSxiaixzaSxzaixyc2kscnNqKSwKICAgIC8vICAgICAgICAgICAgICAgcmkgPSByLnJpLAogICAgLy8gICAgICAgICAgICAgICByaiA9IHIucmo7CiAgICAvLyAgICAgICAgICAgci5uaS5jb3B5KHRyaWFuZ2xlTm9ybWFsKTsKICAgIC8vICAgICAgICAgICByLm5pLm5lZ2F0ZShyLm5pKTsKICAgIC8vICAgICAgICAgICByZXNbal0ubm9ybWFsLm5lZ2F0ZShxKTsKICAgIC8vICAgICAgICAgICBxLm11bHQocmVzW2pdLmRlcHRoLCBxKTsKICAgIC8vICAgICAgICAgICByZXNbal0ucG9pbnQudmFkZChxLCByaSk7CiAgICAvLyAgICAgICAgICAgcmouY29weShyZXNbal0ucG9pbnQpOwogICAgLy8gICAgICAgICAgIC8vIENvbnRhY3QgcG9pbnRzIGFyZSBpbiB3b3JsZCBjb29yZGluYXRlcy4gVHJhbnNmb3JtIGJhY2sgdG8gcmVsYXRpdmUKICAgIC8vICAgICAgICAgICByaS52c3ViKHhpLHJpKTsKICAgIC8vICAgICAgICAgICByai52c3ViKHhqLHJqKTsKICAgIC8vICAgICAgICAgICAvLyBNYWtlIHJlbGF0aXZlIHRvIGJvZGllcwogICAgLy8gICAgICAgICAgIHJpLnZhZGQoeGksIHJpKTsKICAgIC8vICAgICAgICAgICByaS52c3ViKGJpLnBvc2l0aW9uLCByaSk7CiAgICAvLyAgICAgICAgICAgcmoudmFkZCh4aiwgcmopOwogICAgLy8gICAgICAgICAgIHJqLnZzdWIoYmoucG9zaXRpb24sIHJqKTsKICAgIC8vICAgICAgICAgICByZXN1bHQucHVzaChyKTsKICAgIC8vICAgICAgIH0KICAgIC8vICAgfQogICAgLy8gfQoKCiAgfQoKICBjb25zdCBhdmVyYWdlTm9ybWFsID0gbmV3IFZlYzMoKTsKICBjb25zdCBhdmVyYWdlQ29udGFjdFBvaW50QSA9IG5ldyBWZWMzKCk7CiAgY29uc3QgYXZlcmFnZUNvbnRhY3RQb2ludEIgPSBuZXcgVmVjMygpOwogIGNvbnN0IHRtcFZlYzEgPSBuZXcgVmVjMygpOwogIGNvbnN0IHRtcFZlYzIgPSBuZXcgVmVjMygpOwogIGNvbnN0IHRtcFF1YXQxID0gbmV3IFF1YXRlcm5pb24oKTsKICBjb25zdCB0bXBRdWF0MiA9IG5ldyBRdWF0ZXJuaW9uKCk7CiAgY29uc3QgcGxhbmVUcmltZXNoX25vcm1hbCA9IG5ldyBWZWMzKCk7CiAgY29uc3QgcGxhbmVUcmltZXNoX3JlbHBvcyA9IG5ldyBWZWMzKCk7CiAgY29uc3QgcGxhbmVUcmltZXNoX3Byb2plY3RlZCA9IG5ldyBWZWMzKCk7CiAgY29uc3Qgc3BoZXJlVHJpbWVzaF9ub3JtYWwgPSBuZXcgVmVjMygpOwogIGNvbnN0IHNwaGVyZVRyaW1lc2hfcmVscG9zID0gbmV3IFZlYzMoKTsKICBjb25zdCBzcGhlcmVUcmltZXNoX3YgPSBuZXcgVmVjMygpOwogIGNvbnN0IHNwaGVyZVRyaW1lc2hfdjIgPSBuZXcgVmVjMygpOwogIGNvbnN0IHNwaGVyZVRyaW1lc2hfZWRnZVZlcnRleEEgPSBuZXcgVmVjMygpOwogIGNvbnN0IHNwaGVyZVRyaW1lc2hfZWRnZVZlcnRleEIgPSBuZXcgVmVjMygpOwogIGNvbnN0IHNwaGVyZVRyaW1lc2hfZWRnZVZlY3RvciA9IG5ldyBWZWMzKCk7CiAgY29uc3Qgc3BoZXJlVHJpbWVzaF9lZGdlVmVjdG9yVW5pdCA9IG5ldyBWZWMzKCk7CiAgY29uc3Qgc3BoZXJlVHJpbWVzaF9sb2NhbFNwaGVyZVBvcyA9IG5ldyBWZWMzKCk7CiAgY29uc3Qgc3BoZXJlVHJpbWVzaF90bXAgPSBuZXcgVmVjMygpOwogIGNvbnN0IHNwaGVyZVRyaW1lc2hfdmEgPSBuZXcgVmVjMygpOwogIGNvbnN0IHNwaGVyZVRyaW1lc2hfdmIgPSBuZXcgVmVjMygpOwogIGNvbnN0IHNwaGVyZVRyaW1lc2hfdmMgPSBuZXcgVmVjMygpOwogIGNvbnN0IHNwaGVyZVRyaW1lc2hfbG9jYWxTcGhlcmVBQUJCID0gbmV3IEFBQkIoKTsKICBjb25zdCBzcGhlcmVUcmltZXNoX3RyaWFuZ2xlcyA9IFtdOwogIGNvbnN0IHBvaW50X29uX3BsYW5lX3RvX3NwaGVyZSA9IG5ldyBWZWMzKCk7CiAgY29uc3QgcGxhbmVfdG9fc3BoZXJlX29ydGhvID0gbmV3IFZlYzMoKTsgLy8gU2VlIGh0dHA6Ly9idWxsZXRwaHlzaWNzLmNvbS9CdWxsZXQvQnVsbGV0RnVsbC9TcGhlcmVUcmlhbmdsZURldGVjdG9yXzhjcHBfc291cmNlLmh0bWwKCiAgY29uc3QgcG9pbnRJblBvbHlnb25fZWRnZSA9IG5ldyBWZWMzKCk7CiAgY29uc3QgcG9pbnRJblBvbHlnb25fZWRnZV94X25vcm1hbCA9IG5ldyBWZWMzKCk7CiAgY29uc3QgcG9pbnRJblBvbHlnb25fdnRwID0gbmV3IFZlYzMoKTsKCiAgZnVuY3Rpb24gcG9pbnRJblBvbHlnb24odmVydHMsIG5vcm1hbCwgcCkgewogICAgbGV0IHBvc2l0aXZlUmVzdWx0ID0gbnVsbDsKICAgIGNvbnN0IE4gPSB2ZXJ0cy5sZW5ndGg7CgogICAgZm9yIChsZXQgaSA9IDA7IGkgIT09IE47IGkrKykgewogICAgICBjb25zdCB2ID0gdmVydHNbaV07IC8vIEdldCBlZGdlIHRvIHRoZSBuZXh0IHZlcnRleAoKICAgICAgY29uc3QgZWRnZSA9IHBvaW50SW5Qb2x5Z29uX2VkZ2U7CiAgICAgIHZlcnRzWyhpICsgMSkgJSBOXS52c3ViKHYsIGVkZ2UpOyAvLyBHZXQgY3Jvc3MgcHJvZHVjdCBiZXR3ZWVuIHBvbHlnb24gbm9ybWFsIGFuZCB0aGUgZWRnZQoKICAgICAgY29uc3QgZWRnZV94X25vcm1hbCA9IHBvaW50SW5Qb2x5Z29uX2VkZ2VfeF9ub3JtYWw7IC8vY29uc3QgZWRnZV94X25vcm1hbCA9IG5ldyBWZWMzKCk7CgogICAgICBlZGdlLmNyb3NzKG5vcm1hbCwgZWRnZV94X25vcm1hbCk7IC8vIEdldCB2ZWN0b3IgYmV0d2VlbiBwb2ludCBhbmQgY3VycmVudCB2ZXJ0ZXgKCiAgICAgIGNvbnN0IHZlcnRleF90b19wID0gcG9pbnRJblBvbHlnb25fdnRwOwogICAgICBwLnZzdWIodiwgdmVydGV4X3RvX3ApOyAvLyBUaGlzIGRvdCBwcm9kdWN0IGRldGVybWluZXMgd2hpY2ggc2lkZSBvZiB0aGUgZWRnZSB0aGUgcG9pbnQgaXMKCiAgICAgIGNvbnN0IHIgPSBlZGdlX3hfbm9ybWFsLmRvdCh2ZXJ0ZXhfdG9fcCk7IC8vIElmIGFsbCBzdWNoIGRvdCBwcm9kdWN0cyBoYXZlIHNhbWUgc2lnbiwgd2UgYXJlIGluc2lkZSB0aGUgcG9seWdvbi4KCiAgICAgIGlmIChwb3NpdGl2ZVJlc3VsdCA9PT0gbnVsbCB8fCByID4gMCAmJiBwb3NpdGl2ZVJlc3VsdCA9PT0gdHJ1ZSB8fCByIDw9IDAgJiYgcG9zaXRpdmVSZXN1bHQgPT09IGZhbHNlKSB7CiAgICAgICAgaWYgKHBvc2l0aXZlUmVzdWx0ID09PSBudWxsKSB7CiAgICAgICAgICBwb3NpdGl2ZVJlc3VsdCA9IHIgPiAwOwogICAgICAgIH0KCiAgICAgICAgY29udGludWU7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJuIGZhbHNlOyAvLyBFbmNvdW50ZXJlZCBzb21lIG90aGVyIHNpZ24uIEV4aXQuCiAgICAgIH0KICAgIH0gLy8gSWYgd2UgZ290IGhlcmUsIGFsbCBkb3QgcHJvZHVjdHMgd2VyZSBvZiB0aGUgc2FtZSBzaWduLgoKCiAgICByZXR1cm4gdHJ1ZTsKICB9CgogIGNvbnN0IGJveF90b19zcGhlcmUgPSBuZXcgVmVjMygpOwogIGNvbnN0IHNwaGVyZUJveF9ucyA9IG5ldyBWZWMzKCk7CiAgY29uc3Qgc3BoZXJlQm94X25zMSA9IG5ldyBWZWMzKCk7CiAgY29uc3Qgc3BoZXJlQm94X25zMiA9IG5ldyBWZWMzKCk7CiAgY29uc3Qgc3BoZXJlQm94X3NpZGVzID0gW25ldyBWZWMzKCksIG5ldyBWZWMzKCksIG5ldyBWZWMzKCksIG5ldyBWZWMzKCksIG5ldyBWZWMzKCksIG5ldyBWZWMzKCldOwogIGNvbnN0IHNwaGVyZUJveF9zcGhlcmVfdG9fY29ybmVyID0gbmV3IFZlYzMoKTsKICBjb25zdCBzcGhlcmVCb3hfc2lkZV9ucyA9IG5ldyBWZWMzKCk7CiAgY29uc3Qgc3BoZXJlQm94X3NpZGVfbnMxID0gbmV3IFZlYzMoKTsKICBjb25zdCBzcGhlcmVCb3hfc2lkZV9uczIgPSBuZXcgVmVjMygpOwogIGNvbnN0IGNvbnZleF90b19zcGhlcmUgPSBuZXcgVmVjMygpOwogIGNvbnN0IHNwaGVyZUNvbnZleF9lZGdlID0gbmV3IFZlYzMoKTsKICBjb25zdCBzcGhlcmVDb252ZXhfZWRnZVVuaXQgPSBuZXcgVmVjMygpOwogIGNvbnN0IHNwaGVyZUNvbnZleF9zcGhlcmVUb0Nvcm5lciA9IG5ldyBWZWMzKCk7CiAgY29uc3Qgc3BoZXJlQ29udmV4X3dvcmxkQ29ybmVyID0gbmV3IFZlYzMoKTsKICBjb25zdCBzcGhlcmVDb252ZXhfd29ybGROb3JtYWwgPSBuZXcgVmVjMygpOwogIGNvbnN0IHNwaGVyZUNvbnZleF93b3JsZFBvaW50ID0gbmV3IFZlYzMoKTsKICBjb25zdCBzcGhlcmVDb252ZXhfd29ybGRTcGhlcmVQb2ludENsb3Nlc3RUb1BsYW5lID0gbmV3IFZlYzMoKTsKICBjb25zdCBzcGhlcmVDb252ZXhfcGVuZXRyYXRpb25WZWMgPSBuZXcgVmVjMygpOwogIGNvbnN0IHNwaGVyZUNvbnZleF9zcGhlcmVUb1dvcmxkUG9pbnQgPSBuZXcgVmVjMygpOwogIGNvbnN0IHBsYW5lQ29udmV4X3YgPSBuZXcgVmVjMygpOwogIGNvbnN0IHBsYW5lQ29udmV4X25vcm1hbCA9IG5ldyBWZWMzKCk7CiAgY29uc3QgcGxhbmVDb252ZXhfcmVscG9zID0gbmV3IFZlYzMoKTsKICBjb25zdCBwbGFuZUNvbnZleF9wcm9qZWN0ZWQgPSBuZXcgVmVjMygpOwogIGNvbnN0IGNvbnZleENvbnZleF9zZXBBeGlzID0gbmV3IFZlYzMoKTsKICBjb25zdCBjb252ZXhDb252ZXhfcSA9IG5ldyBWZWMzKCk7CiAgY29uc3QgcGFydGljbGVQbGFuZV9ub3JtYWwgPSBuZXcgVmVjMygpOwogIGNvbnN0IHBhcnRpY2xlUGxhbmVfcmVscG9zID0gbmV3IFZlYzMoKTsKICBjb25zdCBwYXJ0aWNsZVBsYW5lX3Byb2plY3RlZCA9IG5ldyBWZWMzKCk7CiAgY29uc3QgcGFydGljbGVTcGhlcmVfbm9ybWFsID0gbmV3IFZlYzMoKTsgLy8gV0lQCgogIGNvbnN0IGNxaiA9IG5ldyBRdWF0ZXJuaW9uKCk7CiAgY29uc3QgY29udmV4UGFydGljbGVfbG9jYWwgPSBuZXcgVmVjMygpOwogIGNvbnN0IGNvbnZleFBhcnRpY2xlX3BlbmV0cmF0ZWRGYWNlTm9ybWFsID0gbmV3IFZlYzMoKTsKICBjb25zdCBjb252ZXhQYXJ0aWNsZV92ZXJ0ZXhUb1BhcnRpY2xlID0gbmV3IFZlYzMoKTsKICBjb25zdCBjb252ZXhQYXJ0aWNsZV93b3JsZFBlbmV0cmF0aW9uVmVjID0gbmV3IFZlYzMoKTsKICBjb25zdCBjb252ZXhIZWlnaHRmaWVsZF90bXAxID0gbmV3IFZlYzMoKTsKICBjb25zdCBjb252ZXhIZWlnaHRmaWVsZF90bXAyID0gbmV3IFZlYzMoKTsKICBjb25zdCBjb252ZXhIZWlnaHRmaWVsZF9mYWNlTGlzdCA9IFswXTsKICBjb25zdCBzcGhlcmVIZWlnaHRmaWVsZF90bXAxID0gbmV3IFZlYzMoKTsKICBjb25zdCBzcGhlcmVIZWlnaHRmaWVsZF90bXAyID0gbmV3IFZlYzMoKTsKCiAgY2xhc3MgT3ZlcmxhcEtlZXBlciB7CiAgICAvKioKICAgICAqIEB0b2RvIFJlbW92ZSB1c2VsZXNzIGNvbnN0cnVjdG9yCiAgICAgKi8KICAgIGNvbnN0cnVjdG9yKCkgewogICAgICB0aGlzLmN1cnJlbnQgPSB2b2lkIDA7CiAgICAgIHRoaXMucHJldmlvdXMgPSB2b2lkIDA7CiAgICAgIHRoaXMuY3VycmVudCA9IFtdOwogICAgICB0aGlzLnByZXZpb3VzID0gW107CiAgICB9CiAgICAvKioKICAgICAqIGdldEtleQogICAgICovCgoKICAgIGdldEtleShpLCBqKSB7CiAgICAgIGlmIChqIDwgaSkgewogICAgICAgIGNvbnN0IHRlbXAgPSBqOwogICAgICAgIGogPSBpOwogICAgICAgIGkgPSB0ZW1wOwogICAgICB9CgogICAgICByZXR1cm4gaSA8PCAxNiB8IGo7CiAgICB9CiAgICAvKioKICAgICAqIHNldAogICAgICovCgoKICAgIHNldChpLCBqKSB7CiAgICAgIC8vIEluc2VydGlvbiBzb3J0LiBUaGlzIHdheSB0aGUgZGlmZiB3aWxsIGhhdmUgbGluZWFyIGNvbXBsZXhpdHkuCiAgICAgIGNvbnN0IGtleSA9IHRoaXMuZ2V0S2V5KGksIGopOwogICAgICBjb25zdCBjdXJyZW50ID0gdGhpcy5jdXJyZW50OwogICAgICBsZXQgaW5kZXggPSAwOwoKICAgICAgd2hpbGUgKGtleSA+IGN1cnJlbnRbaW5kZXhdKSB7CiAgICAgICAgaW5kZXgrKzsKICAgICAgfQoKICAgICAgaWYgKGtleSA9PT0gY3VycmVudFtpbmRleF0pIHsKICAgICAgICByZXR1cm47IC8vIFBhaXIgd2FzIGFscmVhZHkgYWRkZWQKICAgICAgfQoKICAgICAgZm9yIChsZXQgaiA9IGN1cnJlbnQubGVuZ3RoIC0gMTsgaiA+PSBpbmRleDsgai0tKSB7CiAgICAgICAgY3VycmVudFtqICsgMV0gPSBjdXJyZW50W2pdOwogICAgICB9CgogICAgICBjdXJyZW50W2luZGV4XSA9IGtleTsKICAgIH0KICAgIC8qKgogICAgICogdGljawogICAgICovCgoKICAgIHRpY2soKSB7CiAgICAgIGNvbnN0IHRtcCA9IHRoaXMuY3VycmVudDsKICAgICAgdGhpcy5jdXJyZW50ID0gdGhpcy5wcmV2aW91czsKICAgICAgdGhpcy5wcmV2aW91cyA9IHRtcDsKICAgICAgdGhpcy5jdXJyZW50Lmxlbmd0aCA9IDA7CiAgICB9CiAgICAvKioKICAgICAqIGdldERpZmYKICAgICAqLwoKCiAgICBnZXREaWZmKGFkZGl0aW9ucywgcmVtb3ZhbHMpIHsKICAgICAgY29uc3QgYSA9IHRoaXMuY3VycmVudDsKICAgICAgY29uc3QgYiA9IHRoaXMucHJldmlvdXM7CiAgICAgIGNvbnN0IGFsID0gYS5sZW5ndGg7CiAgICAgIGNvbnN0IGJsID0gYi5sZW5ndGg7CiAgICAgIGxldCBqID0gMDsKCiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYWw7IGkrKykgewogICAgICAgIGxldCBmb3VuZCA9IGZhbHNlOwogICAgICAgIGNvbnN0IGtleUEgPSBhW2ldOwoKICAgICAgICB3aGlsZSAoa2V5QSA+IGJbal0pIHsKICAgICAgICAgIGorKzsKICAgICAgICB9CgogICAgICAgIGZvdW5kID0ga2V5QSA9PT0gYltqXTsKCiAgICAgICAgaWYgKCFmb3VuZCkgewogICAgICAgICAgdW5wYWNrQW5kUHVzaChhZGRpdGlvbnMsIGtleUEpOwogICAgICAgIH0KICAgICAgfQoKICAgICAgaiA9IDA7CgogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGJsOyBpKyspIHsKICAgICAgICBsZXQgZm91bmQgPSBmYWxzZTsKICAgICAgICBjb25zdCBrZXlCID0gYltpXTsKCiAgICAgICAgd2hpbGUgKGtleUIgPiBhW2pdKSB7CiAgICAgICAgICBqKys7CiAgICAgICAgfQoKICAgICAgICBmb3VuZCA9IGFbal0gPT09IGtleUI7CgogICAgICAgIGlmICghZm91bmQpIHsKICAgICAgICAgIHVucGFja0FuZFB1c2gocmVtb3ZhbHMsIGtleUIpOwogICAgICAgIH0KICAgICAgfQogICAgfQoKICB9CgogIGZ1bmN0aW9uIHVucGFja0FuZFB1c2goYXJyYXksIGtleSkgewogICAgYXJyYXkucHVzaCgoa2V5ICYgMHhmZmZmMDAwMCkgPj4gMTYsIGtleSAmIDB4MDAwMGZmZmYpOwogIH0KICAvKioKICAgKiBUdXBsZURpY3Rpb25hcnkKICAgKi8KCgogIGNsYXNzIFR1cGxlRGljdGlvbmFyeSB7CiAgICBjb25zdHJ1Y3RvcigpIHsKICAgICAgdGhpcy5kYXRhID0gewogICAgICAgIGtleXM6IFtdCiAgICAgIH07CiAgICB9CiAgICAvKiogZ2V0ICovCgoKICAgIGdldChpLCBqKSB7CiAgICAgIGlmIChpID4gaikgewogICAgICAgIC8vIHN3YXAKICAgICAgICBjb25zdCB0ZW1wID0gajsKICAgICAgICBqID0gaTsKICAgICAgICBpID0gdGVtcDsKICAgICAgfQoKICAgICAgcmV0dXJuIHRoaXMuZGF0YVtpICsgIi0iICsgal07CiAgICB9CiAgICAvKiogc2V0ICovCgoKICAgIHNldChpLCBqLCB2YWx1ZSkgewogICAgICBpZiAoaSA+IGopIHsKICAgICAgICBjb25zdCB0ZW1wID0gajsKICAgICAgICBqID0gaTsKICAgICAgICBpID0gdGVtcDsKICAgICAgfQoKICAgICAgY29uc3Qga2V5ID0gaSArICItIiArIGo7IC8vIENoZWNrIGlmIGtleSBhbHJlYWR5IGV4aXN0cwoKICAgICAgaWYgKCF0aGlzLmdldChpLCBqKSkgewogICAgICAgIHRoaXMuZGF0YS5rZXlzLnB1c2goa2V5KTsKICAgICAgfQoKICAgICAgdGhpcy5kYXRhW2tleV0gPSB2YWx1ZTsKICAgIH0KICAgIC8qKiByZXNldCAqLwoKCiAgICByZXNldCgpIHsKICAgICAgY29uc3QgZGF0YSA9IHRoaXMuZGF0YTsKICAgICAgY29uc3Qga2V5cyA9IGRhdGEua2V5czsKCiAgICAgIHdoaWxlIChrZXlzLmxlbmd0aCA+IDApIHsKICAgICAgICBjb25zdCBrZXkgPSBrZXlzLnBvcCgpOwogICAgICAgIGRlbGV0ZSBkYXRhW2tleV07CiAgICAgIH0KICAgIH0KCiAgfQogIC8qKgogICAqIFRoZSBwaHlzaWNzIHdvcmxkCiAgICovCgoKICBjbGFzcyBXb3JsZCBleHRlbmRzIEV2ZW50VGFyZ2V0IHsKICAgIC8qKgogICAgICogQ3VycmVudGx5IC8gbGFzdCB1c2VkIHRpbWVzdGVwLiBJcyBzZXQgdG8gLTEgaWYgbm90IGF2YWlsYWJsZS4gVGhpcyB2YWx1ZSBpcyB1cGRhdGVkIGJlZm9yZSBlYWNoIGludGVybmFsIHN0ZXAsIHdoaWNoIG1lYW5zIHRoYXQgaXQgaXMgImZyZXNoIiBpbnNpZGUgZXZlbnQgY2FsbGJhY2tzLgogICAgICovCgogICAgLyoqCiAgICAgKiBNYWtlcyBib2RpZXMgZ28gdG8gc2xlZXAgd2hlbiB0aGV5J3ZlIGJlZW4gaW5hY3RpdmUuCiAgICAgKiBAZGVmYXVsdCBmYWxzZQogICAgICovCgogICAgLyoqCiAgICAgKiBBbGwgdGhlIGN1cnJlbnQgY29udGFjdHMgKGluc3RhbmNlcyBvZiBDb250YWN0RXF1YXRpb24pIGluIHRoZSB3b3JsZC4KICAgICAqLwoKICAgIC8qKgogICAgICogSG93IG9mdGVuIHRvIG5vcm1hbGl6ZSBxdWF0ZXJuaW9ucy4gU2V0IHRvIDAgZm9yIGV2ZXJ5IHN0ZXAsIDEgZm9yIGV2ZXJ5IHNlY29uZCBldGMuLiBBIGxhcmdlciB2YWx1ZSBpbmNyZWFzZXMgcGVyZm9ybWFuY2UuIElmIGJvZGllcyB0ZW5kIHRvIGV4cGxvZGUsIHNldCB0byBhIHNtYWxsZXIgdmFsdWUgKHplcm8gdG8gYmUgc3VyZSBub3RoaW5nIGNhbiBnbyB3cm9uZykuCiAgICAgKiBAZGVmYXVsdCAwCiAgICAgKi8KCiAgICAvKioKICAgICAqIFNldCB0byB0cnVlIHRvIHVzZSBmYXN0IHF1YXRlcm5pb24gbm9ybWFsaXphdGlvbi4gSXQgaXMgb2Z0ZW4gZW5vdWdoIGFjY3VyYXRlIHRvIHVzZS4KICAgICAqIElmIGJvZGllcyB0ZW5kIHRvIGV4cGxvZGUsIHNldCB0byBmYWxzZS4KICAgICAqIEBkZWZhdWx0IGZhbHNlCiAgICAgKi8KCiAgICAvKioKICAgICAqIFRoZSB3YWxsLWNsb2NrIHRpbWUgc2luY2Ugc2ltdWxhdGlvbiBzdGFydC4KICAgICAqLwoKICAgIC8qKgogICAgICogTnVtYmVyIG9mIHRpbWVzdGVwcyB0YWtlbiBzaW5jZSBzdGFydC4KICAgICAqLwoKICAgIC8qKgogICAgICogRGVmYXVsdCBhbmQgbGFzdCB0aW1lc3RlcCBzaXplcy4KICAgICAqLwoKICAgIC8qKgogICAgICogVGhlIGdyYXZpdHkgb2YgdGhlIHdvcmxkLgogICAgICovCgogICAgLyoqCiAgICAgKiBUaGUgYnJvYWRwaGFzZSBhbGdvcml0aG0gdG8gdXNlLgogICAgICogQGRlZmF1bHQgTmFpdmVCcm9hZHBoYXNlCiAgICAgKi8KCiAgICAvKioKICAgICAqIEFsbCBib2RpZXMgaW4gdGhpcyB3b3JsZAogICAgICovCgogICAgLyoqCiAgICAgKiBUcnVlIGlmIGFueSBib2RpZXMgYXJlIG5vdCBzbGVlcGluZywgZmFsc2UgaWYgZXZlcnkgYm9keSBpcyBzbGVlcGluZy4KICAgICAqLwoKICAgIC8qKgogICAgICogVGhlIHNvbHZlciBhbGdvcml0aG0gdG8gdXNlLgogICAgICogQGRlZmF1bHQgR1NTb2x2ZXIKICAgICAqLwoKICAgIC8qKgogICAgICogY29sbGlzaW9uTWF0cml4CiAgICAgKi8KCiAgICAvKioKICAgICAqIENvbGxpc2lvbk1hdHJpeCBmcm9tIHRoZSBwcmV2aW91cyBzdGVwLgogICAgICovCgogICAgLyoqCiAgICAgKiBBbGwgYWRkZWQgbWF0ZXJpYWxzLgogICAgICogQGRlcHJlY2F0ZWQKICAgICAqIEB0b2RvIFJlbW92ZQogICAgICovCgogICAgLyoqCiAgICAgKiBBbGwgYWRkZWQgY29udGFjdG1hdGVyaWFscy4KICAgICAqLwoKICAgIC8qKgogICAgICogVXNlZCB0byBsb29rIHVwIGEgQ29udGFjdE1hdGVyaWFsIGdpdmVuIHR3byBpbnN0YW5jZXMgb2YgTWF0ZXJpYWwuCiAgICAgKi8KCiAgICAvKioKICAgICAqIFRoZSBkZWZhdWx0IG1hdGVyaWFsIG9mIHRoZSBib2RpZXMuCiAgICAgKi8KCiAgICAvKioKICAgICAqIFRoaXMgY29udGFjdCBtYXRlcmlhbCBpcyB1c2VkIGlmIG5vIHN1aXRhYmxlIGNvbnRhY3RtYXRlcmlhbCBpcyBmb3VuZCBmb3IgYSBjb250YWN0LgogICAgICovCgogICAgLyoqCiAgICAgKiBUaW1lIGFjY3VtdWxhdG9yIGZvciBpbnRlcnBvbGF0aW9uLgogICAgICogQHNlZSBodHRwczovL2dhZmZlcm9uZ2FtZXMuY29tL2dhbWUtcGh5c2ljcy9maXgteW91ci10aW1lc3RlcC8KICAgICAqLwoKICAgIC8qKgogICAgICogRGlzcGF0Y2hlZCBhZnRlciBhIGJvZHkgaGFzIGJlZW4gYWRkZWQgdG8gdGhlIHdvcmxkLgogICAgICovCgogICAgLyoqCiAgICAgKiBEaXNwYXRjaGVkIGFmdGVyIGEgYm9keSBoYXMgYmVlbiByZW1vdmVkIGZyb20gdGhlIHdvcmxkLgogICAgICovCiAgICBjb25zdHJ1Y3RvcihvcHRpb25zKSB7CiAgICAgIGlmIChvcHRpb25zID09PSB2b2lkIDApIHsKICAgICAgICBvcHRpb25zID0ge307CiAgICAgIH0KCiAgICAgIHN1cGVyKCk7CiAgICAgIHRoaXMuZHQgPSB2b2lkIDA7CiAgICAgIHRoaXMuYWxsb3dTbGVlcCA9IHZvaWQgMDsKICAgICAgdGhpcy5jb250YWN0cyA9IHZvaWQgMDsKICAgICAgdGhpcy5mcmljdGlvbkVxdWF0aW9ucyA9IHZvaWQgMDsKICAgICAgdGhpcy5xdWF0Tm9ybWFsaXplU2tpcCA9IHZvaWQgMDsKICAgICAgdGhpcy5xdWF0Tm9ybWFsaXplRmFzdCA9IHZvaWQgMDsKICAgICAgdGhpcy50aW1lID0gdm9pZCAwOwogICAgICB0aGlzLnN0ZXBudW1iZXIgPSB2b2lkIDA7CiAgICAgIHRoaXMuZGVmYXVsdF9kdCA9IHZvaWQgMDsKICAgICAgdGhpcy5uZXh0SWQgPSB2b2lkIDA7CiAgICAgIHRoaXMuZ3Jhdml0eSA9IHZvaWQgMDsKICAgICAgdGhpcy5icm9hZHBoYXNlID0gdm9pZCAwOwogICAgICB0aGlzLmJvZGllcyA9IHZvaWQgMDsKICAgICAgdGhpcy5oYXNBY3RpdmVCb2RpZXMgPSB2b2lkIDA7CiAgICAgIHRoaXMuc29sdmVyID0gdm9pZCAwOwogICAgICB0aGlzLmNvbnN0cmFpbnRzID0gdm9pZCAwOwogICAgICB0aGlzLm5hcnJvd3BoYXNlID0gdm9pZCAwOwogICAgICB0aGlzLmNvbGxpc2lvbk1hdHJpeCA9IHZvaWQgMDsKICAgICAgdGhpcy5jb2xsaXNpb25NYXRyaXhQcmV2aW91cyA9IHZvaWQgMDsKICAgICAgdGhpcy5ib2R5T3ZlcmxhcEtlZXBlciA9IHZvaWQgMDsKICAgICAgdGhpcy5zaGFwZU92ZXJsYXBLZWVwZXIgPSB2b2lkIDA7CiAgICAgIHRoaXMubWF0ZXJpYWxzID0gdm9pZCAwOwogICAgICB0aGlzLmNvbnRhY3RtYXRlcmlhbHMgPSB2b2lkIDA7CiAgICAgIHRoaXMuY29udGFjdE1hdGVyaWFsVGFibGUgPSB2b2lkIDA7CiAgICAgIHRoaXMuZGVmYXVsdE1hdGVyaWFsID0gdm9pZCAwOwogICAgICB0aGlzLmRlZmF1bHRDb250YWN0TWF0ZXJpYWwgPSB2b2lkIDA7CiAgICAgIHRoaXMuZG9Qcm9maWxpbmcgPSB2b2lkIDA7CiAgICAgIHRoaXMucHJvZmlsZSA9IHZvaWQgMDsKICAgICAgdGhpcy5hY2N1bXVsYXRvciA9IHZvaWQgMDsKICAgICAgdGhpcy5zdWJzeXN0ZW1zID0gdm9pZCAwOwogICAgICB0aGlzLmFkZEJvZHlFdmVudCA9IHZvaWQgMDsKICAgICAgdGhpcy5yZW1vdmVCb2R5RXZlbnQgPSB2b2lkIDA7CiAgICAgIHRoaXMuaWRUb0JvZHlNYXAgPSB2b2lkIDA7CiAgICAgIHRoaXMuZHQgPSAtMTsKICAgICAgdGhpcy5hbGxvd1NsZWVwID0gISFvcHRpb25zLmFsbG93U2xlZXA7CiAgICAgIHRoaXMuY29udGFjdHMgPSBbXTsKICAgICAgdGhpcy5mcmljdGlvbkVxdWF0aW9ucyA9IFtdOwogICAgICB0aGlzLnF1YXROb3JtYWxpemVTa2lwID0gb3B0aW9ucy5xdWF0Tm9ybWFsaXplU2tpcCAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5xdWF0Tm9ybWFsaXplU2tpcCA6IDA7CiAgICAgIHRoaXMucXVhdE5vcm1hbGl6ZUZhc3QgPSBvcHRpb25zLnF1YXROb3JtYWxpemVGYXN0ICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLnF1YXROb3JtYWxpemVGYXN0IDogZmFsc2U7CiAgICAgIHRoaXMudGltZSA9IDAuMDsKICAgICAgdGhpcy5zdGVwbnVtYmVyID0gMDsKICAgICAgdGhpcy5kZWZhdWx0X2R0ID0gMSAvIDYwOwogICAgICB0aGlzLm5leHRJZCA9IDA7CiAgICAgIHRoaXMuZ3Jhdml0eSA9IG5ldyBWZWMzKCk7CgogICAgICBpZiAob3B0aW9ucy5ncmF2aXR5KSB7CiAgICAgICAgdGhpcy5ncmF2aXR5LmNvcHkob3B0aW9ucy5ncmF2aXR5KTsKICAgICAgfQoKICAgICAgdGhpcy5icm9hZHBoYXNlID0gb3B0aW9ucy5icm9hZHBoYXNlICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLmJyb2FkcGhhc2UgOiBuZXcgTmFpdmVCcm9hZHBoYXNlKCk7CiAgICAgIHRoaXMuYm9kaWVzID0gW107CiAgICAgIHRoaXMuaGFzQWN0aXZlQm9kaWVzID0gZmFsc2U7CiAgICAgIHRoaXMuc29sdmVyID0gb3B0aW9ucy5zb2x2ZXIgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMuc29sdmVyIDogbmV3IEdTU29sdmVyKCk7CiAgICAgIHRoaXMuY29uc3RyYWludHMgPSBbXTsKICAgICAgdGhpcy5uYXJyb3dwaGFzZSA9IG5ldyBOYXJyb3dwaGFzZSh0aGlzKTsKICAgICAgdGhpcy5jb2xsaXNpb25NYXRyaXggPSBuZXcgQXJyYXlDb2xsaXNpb25NYXRyaXgoKTsKICAgICAgdGhpcy5jb2xsaXNpb25NYXRyaXhQcmV2aW91cyA9IG5ldyBBcnJheUNvbGxpc2lvbk1hdHJpeCgpOwogICAgICB0aGlzLmJvZHlPdmVybGFwS2VlcGVyID0gbmV3IE92ZXJsYXBLZWVwZXIoKTsKICAgICAgdGhpcy5zaGFwZU92ZXJsYXBLZWVwZXIgPSBuZXcgT3ZlcmxhcEtlZXBlcigpOwogICAgICB0aGlzLm1hdGVyaWFscyA9IFtdOwogICAgICB0aGlzLmNvbnRhY3RtYXRlcmlhbHMgPSBbXTsKICAgICAgdGhpcy5jb250YWN0TWF0ZXJpYWxUYWJsZSA9IG5ldyBUdXBsZURpY3Rpb25hcnkoKTsKICAgICAgdGhpcy5kZWZhdWx0TWF0ZXJpYWwgPSBuZXcgTWF0ZXJpYWwoJ2RlZmF1bHQnKTsKICAgICAgdGhpcy5kZWZhdWx0Q29udGFjdE1hdGVyaWFsID0gbmV3IENvbnRhY3RNYXRlcmlhbCh0aGlzLmRlZmF1bHRNYXRlcmlhbCwgdGhpcy5kZWZhdWx0TWF0ZXJpYWwsIHsKICAgICAgICBmcmljdGlvbjogMC4zLAogICAgICAgIHJlc3RpdHV0aW9uOiAwLjAKICAgICAgfSk7CiAgICAgIHRoaXMuZG9Qcm9maWxpbmcgPSBmYWxzZTsKICAgICAgdGhpcy5wcm9maWxlID0gewogICAgICAgIHNvbHZlOiAwLAogICAgICAgIG1ha2VDb250YWN0Q29uc3RyYWludHM6IDAsCiAgICAgICAgYnJvYWRwaGFzZTogMCwKICAgICAgICBpbnRlZ3JhdGU6IDAsCiAgICAgICAgbmFycm93cGhhc2U6IDAKICAgICAgfTsKICAgICAgdGhpcy5hY2N1bXVsYXRvciA9IDA7CiAgICAgIHRoaXMuc3Vic3lzdGVtcyA9IFtdOwogICAgICB0aGlzLmFkZEJvZHlFdmVudCA9IHsKICAgICAgICB0eXBlOiAnYWRkQm9keScsCiAgICAgICAgYm9keTogbnVsbAogICAgICB9OwogICAgICB0aGlzLnJlbW92ZUJvZHlFdmVudCA9IHsKICAgICAgICB0eXBlOiAncmVtb3ZlQm9keScsCiAgICAgICAgYm9keTogbnVsbAogICAgICB9OwogICAgICB0aGlzLmlkVG9Cb2R5TWFwID0ge307CiAgICAgIHRoaXMuYnJvYWRwaGFzZS5zZXRXb3JsZCh0aGlzKTsKICAgIH0KICAgIC8qKgogICAgICogR2V0IHRoZSBjb250YWN0IG1hdGVyaWFsIGJldHdlZW4gbWF0ZXJpYWxzIG0xIGFuZCBtMgogICAgICogQHJldHVybiBUaGUgY29udGFjdCBtYXRlcmlhbCBpZiBpdCB3YXMgZm91bmQuCiAgICAgKi8KCgogICAgZ2V0Q29udGFjdE1hdGVyaWFsKG0xLCBtMikgewogICAgICByZXR1cm4gdGhpcy5jb250YWN0TWF0ZXJpYWxUYWJsZS5nZXQobTEuaWQsIG0yLmlkKTsKICAgIH0KICAgIC8qKgogICAgICogR2V0IG51bWJlciBvZiBvYmplY3RzIGluIHRoZSB3b3JsZC4KICAgICAqIEBkZXByZWNhdGVkCiAgICAgKi8KCgogICAgbnVtT2JqZWN0cygpIHsKICAgICAgcmV0dXJuIHRoaXMuYm9kaWVzLmxlbmd0aDsKICAgIH0KICAgIC8qKgogICAgICogU3RvcmUgb2xkIGNvbGxpc2lvbiBzdGF0ZSBpbmZvCiAgICAgKi8KCgogICAgY29sbGlzaW9uTWF0cml4VGljaygpIHsKICAgICAgY29uc3QgdGVtcCA9IHRoaXMuY29sbGlzaW9uTWF0cml4UHJldmlvdXM7CiAgICAgIHRoaXMuY29sbGlzaW9uTWF0cml4UHJldmlvdXMgPSB0aGlzLmNvbGxpc2lvbk1hdHJpeDsKICAgICAgdGhpcy5jb2xsaXNpb25NYXRyaXggPSB0ZW1wOwogICAgICB0aGlzLmNvbGxpc2lvbk1hdHJpeC5yZXNldCgpOwogICAgICB0aGlzLmJvZHlPdmVybGFwS2VlcGVyLnRpY2soKTsKICAgICAgdGhpcy5zaGFwZU92ZXJsYXBLZWVwZXIudGljaygpOwogICAgfQogICAgLyoqCiAgICAgKiBBZGQgYSBjb25zdHJhaW50IHRvIHRoZSBzaW11bGF0aW9uLgogICAgICovCgoKICAgIGFkZENvbnN0cmFpbnQoYykgewogICAgICB0aGlzLmNvbnN0cmFpbnRzLnB1c2goYyk7CiAgICB9CiAgICAvKioKICAgICAqIFJlbW92ZXMgYSBjb25zdHJhaW50CiAgICAgKi8KCgogICAgcmVtb3ZlQ29uc3RyYWludChjKSB7CiAgICAgIGNvbnN0IGlkeCA9IHRoaXMuY29uc3RyYWludHMuaW5kZXhPZihjKTsKCiAgICAgIGlmIChpZHggIT09IC0xKSB7CiAgICAgICAgdGhpcy5jb25zdHJhaW50cy5zcGxpY2UoaWR4LCAxKTsKICAgICAgfQogICAgfQogICAgLyoqCiAgICAgKiBSYXljYXN0IHRlc3QKICAgICAqIEBkZXByZWNhdGVkIFVzZSAucmF5Y2FzdEFsbCwgLnJheWNhc3RDbG9zZXN0IG9yIC5yYXljYXN0QW55IGluc3RlYWQuCiAgICAgKi8KCgogICAgcmF5VGVzdChmcm9tLCB0bywgcmVzdWx0KSB7CiAgICAgIGlmIChyZXN1bHQgaW5zdGFuY2VvZiBSYXljYXN0UmVzdWx0KSB7CiAgICAgICAgLy8gRG8gcmF5Y2FzdENsb3Nlc3QKICAgICAgICB0aGlzLnJheWNhc3RDbG9zZXN0KGZyb20sIHRvLCB7CiAgICAgICAgICBza2lwQmFja2ZhY2VzOiB0cnVlCiAgICAgICAgfSwgcmVzdWx0KTsKICAgICAgfSBlbHNlIHsKICAgICAgICAvLyBEbyByYXljYXN0QWxsCiAgICAgICAgdGhpcy5yYXljYXN0QWxsKGZyb20sIHRvLCB7CiAgICAgICAgICBza2lwQmFja2ZhY2VzOiB0cnVlCiAgICAgICAgfSwgcmVzdWx0KTsKICAgICAgfQogICAgfQogICAgLyoqCiAgICAgKiBSYXkgY2FzdCBhZ2FpbnN0IGFsbCBib2RpZXMuIFRoZSBwcm92aWRlZCBjYWxsYmFjayB3aWxsIGJlIGV4ZWN1dGVkIGZvciBlYWNoIGhpdCB3aXRoIGEgUmF5Y2FzdFJlc3VsdCBhcyBzaW5nbGUgYXJndW1lbnQuCiAgICAgKiBAcmV0dXJuIFRydWUgaWYgYW55IGJvZHkgd2FzIGhpdC4KICAgICAqLwoKCiAgICByYXljYXN0QWxsKGZyb20sIHRvLCBvcHRpb25zLCBjYWxsYmFjaykgewogICAgICBpZiAob3B0aW9ucyA9PT0gdm9pZCAwKSB7CiAgICAgICAgb3B0aW9ucyA9IHt9OwogICAgICB9CgogICAgICBvcHRpb25zLm1vZGUgPSBSYXkuQUxMOwogICAgICBvcHRpb25zLmZyb20gPSBmcm9tOwogICAgICBvcHRpb25zLnRvID0gdG87CiAgICAgIG9wdGlvbnMuY2FsbGJhY2sgPSBjYWxsYmFjazsKICAgICAgcmV0dXJuIHRtcFJheS5pbnRlcnNlY3RXb3JsZCh0aGlzLCBvcHRpb25zKTsKICAgIH0KICAgIC8qKgogICAgICogUmF5IGNhc3QsIGFuZCBzdG9wIGF0IHRoZSBmaXJzdCByZXN1bHQuIE5vdGUgdGhhdCB0aGUgb3JkZXIgaXMgcmFuZG9tIC0gYnV0IHRoZSBtZXRob2QgaXMgZmFzdC4KICAgICAqIEByZXR1cm4gVHJ1ZSBpZiBhbnkgYm9keSB3YXMgaGl0LgogICAgICovCgoKICAgIHJheWNhc3RBbnkoZnJvbSwgdG8sIG9wdGlvbnMsIHJlc3VsdCkgewogICAgICBpZiAob3B0aW9ucyA9PT0gdm9pZCAwKSB7CiAgICAgICAgb3B0aW9ucyA9IHt9OwogICAgICB9CgogICAgICBvcHRpb25zLm1vZGUgPSBSYXkuQU5ZOwogICAgICBvcHRpb25zLmZyb20gPSBmcm9tOwogICAgICBvcHRpb25zLnRvID0gdG87CiAgICAgIG9wdGlvbnMucmVzdWx0ID0gcmVzdWx0OwogICAgICByZXR1cm4gdG1wUmF5LmludGVyc2VjdFdvcmxkKHRoaXMsIG9wdGlvbnMpOwogICAgfQogICAgLyoqCiAgICAgKiBSYXkgY2FzdCwgYW5kIHJldHVybiBpbmZvcm1hdGlvbiBvZiB0aGUgY2xvc2VzdCBoaXQuCiAgICAgKiBAcmV0dXJuIFRydWUgaWYgYW55IGJvZHkgd2FzIGhpdC4KICAgICAqLwoKCiAgICByYXljYXN0Q2xvc2VzdChmcm9tLCB0bywgb3B0aW9ucywgcmVzdWx0KSB7CiAgICAgIGlmIChvcHRpb25zID09PSB2b2lkIDApIHsKICAgICAgICBvcHRpb25zID0ge307CiAgICAgIH0KCiAgICAgIG9wdGlvbnMubW9kZSA9IFJheS5DTE9TRVNUOwogICAgICBvcHRpb25zLmZyb20gPSBmcm9tOwogICAgICBvcHRpb25zLnRvID0gdG87CiAgICAgIG9wdGlvbnMucmVzdWx0ID0gcmVzdWx0OwogICAgICByZXR1cm4gdG1wUmF5LmludGVyc2VjdFdvcmxkKHRoaXMsIG9wdGlvbnMpOwogICAgfQogICAgLyoqCiAgICAgKiBBZGQgYSByaWdpZCBib2R5IHRvIHRoZSBzaW11bGF0aW9uLgogICAgICogQHRvZG8gSWYgdGhlIHNpbXVsYXRpb24gaGFzIG5vdCB5ZXQgc3RhcnRlZCwgd2h5IHJlY3JldGUgYW5kIGNvcHkgYXJyYXlzIGZvciBlYWNoIGJvZHk/IEFjY3VtdWxhdGUgaW4gZHluYW1pYyBhcnJheXMgaW4gdGhpcyBjYXNlLgogICAgICogQHRvZG8gQWRkaW5nIGFuIGFycmF5IG9mIGJvZGllcyBzaG91bGQgYmUgcG9zc2libGUuIFRoaXMgd291bGQgc2F2ZSBzb21lIGxvb3BzIHRvbwogICAgICovCgoKICAgIGFkZEJvZHkoYm9keSkgewogICAgICBpZiAodGhpcy5ib2RpZXMuaW5jbHVkZXMoYm9keSkpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIGJvZHkuaW5kZXggPSB0aGlzLmJvZGllcy5sZW5ndGg7CiAgICAgIHRoaXMuYm9kaWVzLnB1c2goYm9keSk7CiAgICAgIGJvZHkud29ybGQgPSB0aGlzOwogICAgICBib2R5LmluaXRQb3NpdGlvbi5jb3B5KGJvZHkucG9zaXRpb24pOwogICAgICBib2R5LmluaXRWZWxvY2l0eS5jb3B5KGJvZHkudmVsb2NpdHkpOwogICAgICBib2R5LnRpbWVMYXN0U2xlZXB5ID0gdGhpcy50aW1lOwoKICAgICAgaWYgKGJvZHkgaW5zdGFuY2VvZiBCb2R5KSB7CiAgICAgICAgYm9keS5pbml0QW5ndWxhclZlbG9jaXR5LmNvcHkoYm9keS5hbmd1bGFyVmVsb2NpdHkpOwogICAgICAgIGJvZHkuaW5pdFF1YXRlcm5pb24uY29weShib2R5LnF1YXRlcm5pb24pOwogICAgICB9CgogICAgICB0aGlzLmNvbGxpc2lvbk1hdHJpeC5zZXROdW1PYmplY3RzKHRoaXMuYm9kaWVzLmxlbmd0aCk7CiAgICAgIHRoaXMuYWRkQm9keUV2ZW50LmJvZHkgPSBib2R5OwogICAgICB0aGlzLmlkVG9Cb2R5TWFwW2JvZHkuaWRdID0gYm9keTsKICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KHRoaXMuYWRkQm9keUV2ZW50KTsKICAgIH0KICAgIC8qKgogICAgICogUmVtb3ZlIGEgcmlnaWQgYm9keSBmcm9tIHRoZSBzaW11bGF0aW9uLgogICAgICovCgoKICAgIHJlbW92ZUJvZHkoYm9keSkgewogICAgICBib2R5LndvcmxkID0gbnVsbDsKICAgICAgY29uc3QgbiA9IHRoaXMuYm9kaWVzLmxlbmd0aCAtIDE7CiAgICAgIGNvbnN0IGJvZGllcyA9IHRoaXMuYm9kaWVzOwogICAgICBjb25zdCBpZHggPSBib2RpZXMuaW5kZXhPZihib2R5KTsKCiAgICAgIGlmIChpZHggIT09IC0xKSB7CiAgICAgICAgYm9kaWVzLnNwbGljZShpZHgsIDEpOyAvLyBUb2RvOiBzaG91bGQgdXNlIGEgZ2FyYmFnZSBmcmVlIG1ldGhvZAogICAgICAgIC8vIFJlY29tcHV0ZSBpbmRleAoKICAgICAgICBmb3IgKGxldCBpID0gMDsgaSAhPT0gYm9kaWVzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICBib2RpZXNbaV0uaW5kZXggPSBpOwogICAgICAgIH0KCiAgICAgICAgdGhpcy5jb2xsaXNpb25NYXRyaXguc2V0TnVtT2JqZWN0cyhuKTsKICAgICAgICB0aGlzLnJlbW92ZUJvZHlFdmVudC5ib2R5ID0gYm9keTsKICAgICAgICBkZWxldGUgdGhpcy5pZFRvQm9keU1hcFtib2R5LmlkXTsKICAgICAgICB0aGlzLmRpc3BhdGNoRXZlbnQodGhpcy5yZW1vdmVCb2R5RXZlbnQpOwogICAgICB9CiAgICB9CgogICAgZ2V0Qm9keUJ5SWQoaWQpIHsKICAgICAgcmV0dXJuIHRoaXMuaWRUb0JvZHlNYXBbaWRdOwogICAgfQogICAgLyoqCiAgICAgKiBAdG9kbyBNYWtlIGEgZmFzdGVyIG1hcAogICAgICovCgoKICAgIGdldFNoYXBlQnlJZChpZCkgewogICAgICBjb25zdCBib2RpZXMgPSB0aGlzLmJvZGllczsKCiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYm9kaWVzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgY29uc3Qgc2hhcGVzID0gYm9kaWVzW2ldLnNoYXBlczsKCiAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBzaGFwZXMubGVuZ3RoOyBqKyspIHsKICAgICAgICAgIGNvbnN0IHNoYXBlID0gc2hhcGVzW2pdOwoKICAgICAgICAgIGlmIChzaGFwZS5pZCA9PT0gaWQpIHsKICAgICAgICAgICAgcmV0dXJuIHNoYXBlOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQoKICAgICAgcmV0dXJuIG51bGw7CiAgICB9CiAgICAvKioKICAgICAqIEFkZHMgYSBtYXRlcmlhbCB0byB0aGUgV29ybGQuCiAgICAgKiBAZGVwcmVjYXRlZAogICAgICogQHRvZG8gUmVtb3ZlCiAgICAgKi8KCgogICAgYWRkTWF0ZXJpYWwobSkgewogICAgICB0aGlzLm1hdGVyaWFscy5wdXNoKG0pOwogICAgfQogICAgLyoqCiAgICAgKiBBZGRzIGEgY29udGFjdCBtYXRlcmlhbCB0byB0aGUgV29ybGQKICAgICAqLwoKCiAgICBhZGRDb250YWN0TWF0ZXJpYWwoY21hdCkgewogICAgICAvLyBBZGQgY29udGFjdCBtYXRlcmlhbAogICAgICB0aGlzLmNvbnRhY3RtYXRlcmlhbHMucHVzaChjbWF0KTsgLy8gQWRkIGN1cnJlbnQgY29udGFjdCBtYXRlcmlhbCB0byB0aGUgbWF0ZXJpYWwgdGFibGUKCiAgICAgIHRoaXMuY29udGFjdE1hdGVyaWFsVGFibGUuc2V0KGNtYXQubWF0ZXJpYWxzWzBdLmlkLCBjbWF0Lm1hdGVyaWFsc1sxXS5pZCwgY21hdCk7CiAgICB9CiAgICAvKioKICAgICAqIFN0ZXAgdGhlIHBoeXNpY3Mgd29ybGQgZm9yd2FyZCBpbiB0aW1lLgogICAgICoKICAgICAqIFRoZXJlIGFyZSB0d28gbW9kZXMuIFRoZSBzaW1wbGUgbW9kZSBpcyBmaXhlZCB0aW1lc3RlcHBpbmcgd2l0aG91dCBpbnRlcnBvbGF0aW9uLiBJbiB0aGlzIGNhc2UgeW91IG9ubHkgdXNlIHRoZSBmaXJzdCBhcmd1bWVudC4gVGhlIHNlY29uZCBjYXNlIHVzZXMgaW50ZXJwb2xhdGlvbi4gSW4gdGhhdCB5b3UgYWxzbyBwcm92aWRlIHRoZSB0aW1lIHNpbmNlIHRoZSBmdW5jdGlvbiB3YXMgbGFzdCB1c2VkLCBhcyB3ZWxsIGFzIHRoZSBtYXhpbXVtIGZpeGVkIHRpbWVzdGVwcyB0byB0YWtlLgogICAgICoKICAgICAqIEBwYXJhbSBkdCBUaGUgZml4ZWQgdGltZSBzdGVwIHNpemUgdG8gdXNlLgogICAgICogQHBhcmFtIHRpbWVTaW5jZUxhc3RDYWxsZWQgVGhlIHRpbWUgZWxhcHNlZCBzaW5jZSB0aGUgZnVuY3Rpb24gd2FzIGxhc3QgY2FsbGVkLgogICAgICogQHBhcmFtIG1heFN1YlN0ZXBzIE1heGltdW0gbnVtYmVyIG9mIGZpeGVkIHN0ZXBzIHRvIHRha2UgcGVyIGZ1bmN0aW9uIGNhbGwuCiAgICAgKiBAc2VlIGh0dHBzOi8vd2ViLmFyY2hpdmUub3JnL3dlYi8yMDE4MDQyNjE1NDUzMS9odHRwOi8vYnVsbGV0cGh5c2ljcy5vcmcvbWVkaWF3aWtpLTEuNS44L2luZGV4LnBocC9TdGVwcGluZ19UaGVfV29ybGQjV2hhdF9kb190aGVfcGFyYW1ldGVyc190b19idER5bmFtaWNzV29ybGQ6OnN0ZXBTaW11bGF0aW9uX21lYW4uM0YKICAgICAqIEBleGFtcGxlCiAgICAgKiAgICAgLy8gZml4ZWQgdGltZXN0ZXBwaW5nIHdpdGhvdXQgaW50ZXJwb2xhdGlvbgogICAgICogICAgIHdvcmxkLnN0ZXAoMSAvIDYwKQogICAgICovCgoKICAgIHN0ZXAoZHQsIHRpbWVTaW5jZUxhc3RDYWxsZWQsIG1heFN1YlN0ZXBzKSB7CiAgICAgIGlmIChtYXhTdWJTdGVwcyA9PT0gdm9pZCAwKSB7CiAgICAgICAgbWF4U3ViU3RlcHMgPSAxMDsKICAgICAgfQoKICAgICAgaWYgKHRpbWVTaW5jZUxhc3RDYWxsZWQgPT09IHVuZGVmaW5lZCkgewogICAgICAgIC8vIEZpeGVkLCBzaW1wbGUgc3RlcHBpbmcKICAgICAgICB0aGlzLmludGVybmFsU3RlcChkdCk7IC8vIEluY3JlbWVudCB0aW1lCgogICAgICAgIHRoaXMudGltZSArPSBkdDsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLmFjY3VtdWxhdG9yICs9IHRpbWVTaW5jZUxhc3RDYWxsZWQ7CiAgICAgICAgY29uc3QgdDAgPSBwZXJmb3JtYW5jZSQxLm5vdygpOwogICAgICAgIGxldCBzdWJzdGVwcyA9IDA7CgogICAgICAgIHdoaWxlICh0aGlzLmFjY3VtdWxhdG9yID49IGR0ICYmIHN1YnN0ZXBzIDwgbWF4U3ViU3RlcHMpIHsKICAgICAgICAgIC8vIERvIGZpeGVkIHN0ZXBzIHRvIGNhdGNoIHVwCiAgICAgICAgICB0aGlzLmludGVybmFsU3RlcChkdCk7CiAgICAgICAgICB0aGlzLmFjY3VtdWxhdG9yIC09IGR0OwogICAgICAgICAgc3Vic3RlcHMrKzsKCiAgICAgICAgICBpZiAocGVyZm9ybWFuY2UkMS5ub3coKSAtIHQwID4gZHQgKiAxMDAwKSB7CiAgICAgICAgICAgIC8vIFRoZSBmcmFtZXJhdGUgaXMgbm90IGludGVyYWN0aXZlIGFueW1vcmUuCiAgICAgICAgICAgIC8vIFdlIGFyZSBiZWxvdyB0aGUgdGFyZ2V0IGZyYW1lcmF0ZS4KICAgICAgICAgICAgLy8gQmV0dGVyIGJhaWwgb3V0LgogICAgICAgICAgICBicmVhazsKICAgICAgICAgIH0KICAgICAgICB9IC8vIFJlbW92ZSB0aGUgZXhjZXNzIGFjY3VtdWxhdG9yLCBzaW5jZSB3ZSBtYXkgbm90CiAgICAgICAgLy8gaGF2ZSBoYWQgZW5vdWdoIHN1YnN0ZXBzIGF2YWlsYWJsZSB0byBjYXRjaCB1cAoKCiAgICAgICAgdGhpcy5hY2N1bXVsYXRvciA9IHRoaXMuYWNjdW11bGF0b3IgJSBkdDsKICAgICAgICBjb25zdCB0ID0gdGhpcy5hY2N1bXVsYXRvciAvIGR0OwoKICAgICAgICBmb3IgKGxldCBqID0gMDsgaiAhPT0gdGhpcy5ib2RpZXMubGVuZ3RoOyBqKyspIHsKICAgICAgICAgIGNvbnN0IGIgPSB0aGlzLmJvZGllc1tqXTsKICAgICAgICAgIGIucHJldmlvdXNQb3NpdGlvbi5sZXJwKGIucG9zaXRpb24sIHQsIGIuaW50ZXJwb2xhdGVkUG9zaXRpb24pOwogICAgICAgICAgYi5wcmV2aW91c1F1YXRlcm5pb24uc2xlcnAoYi5xdWF0ZXJuaW9uLCB0LCBiLmludGVycG9sYXRlZFF1YXRlcm5pb24pOwogICAgICAgICAgYi5wcmV2aW91c1F1YXRlcm5pb24ubm9ybWFsaXplKCk7CiAgICAgICAgfQoKICAgICAgICB0aGlzLnRpbWUgKz0gdGltZVNpbmNlTGFzdENhbGxlZDsKICAgICAgfQogICAgfQoKICAgIGludGVybmFsU3RlcChkdCkgewogICAgICB0aGlzLmR0ID0gZHQ7CiAgICAgIGNvbnN0IGNvbnRhY3RzID0gdGhpcy5jb250YWN0czsKICAgICAgY29uc3QgcDEgPSBXb3JsZF9zdGVwX3AxOwogICAgICBjb25zdCBwMiA9IFdvcmxkX3N0ZXBfcDI7CiAgICAgIGNvbnN0IE4gPSB0aGlzLm51bU9iamVjdHMoKTsKICAgICAgY29uc3QgYm9kaWVzID0gdGhpcy5ib2RpZXM7CiAgICAgIGNvbnN0IHNvbHZlciA9IHRoaXMuc29sdmVyOwogICAgICBjb25zdCBncmF2aXR5ID0gdGhpcy5ncmF2aXR5OwogICAgICBjb25zdCBkb1Byb2ZpbGluZyA9IHRoaXMuZG9Qcm9maWxpbmc7CiAgICAgIGNvbnN0IHByb2ZpbGUgPSB0aGlzLnByb2ZpbGU7CiAgICAgIGNvbnN0IERZTkFNSUMgPSBCb2R5LkRZTkFNSUM7CiAgICAgIGxldCBwcm9maWxpbmdTdGFydCA9IC1JbmZpbml0eTsKICAgICAgY29uc3QgY29uc3RyYWludHMgPSB0aGlzLmNvbnN0cmFpbnRzOwogICAgICBjb25zdCBmcmljdGlvbkVxdWF0aW9uUG9vbCA9IFdvcmxkX3N0ZXBfZnJpY3Rpb25FcXVhdGlvblBvb2w7CiAgICAgIGdyYXZpdHkubGVuZ3RoKCk7CiAgICAgIGNvbnN0IGd4ID0gZ3Jhdml0eS54OwogICAgICBjb25zdCBneSA9IGdyYXZpdHkueTsKICAgICAgY29uc3QgZ3ogPSBncmF2aXR5Lno7CiAgICAgIGxldCBpID0gMDsKCiAgICAgIGlmIChkb1Byb2ZpbGluZykgewogICAgICAgIHByb2ZpbGluZ1N0YXJ0ID0gcGVyZm9ybWFuY2UkMS5ub3coKTsKICAgICAgfSAvLyBBZGQgZ3Jhdml0eSB0byBhbGwgb2JqZWN0cwoKCiAgICAgIGZvciAoaSA9IDA7IGkgIT09IE47IGkrKykgewogICAgICAgIGNvbnN0IGJpID0gYm9kaWVzW2ldOwoKICAgICAgICBpZiAoYmkudHlwZSA9PT0gRFlOQU1JQykgewogICAgICAgICAgLy8gT25seSBmb3IgZHluYW1pYyBib2RpZXMKICAgICAgICAgIGNvbnN0IGYgPSBiaS5mb3JjZTsKICAgICAgICAgIGNvbnN0IG0gPSBiaS5tYXNzOwogICAgICAgICAgZi54ICs9IG0gKiBneDsKICAgICAgICAgIGYueSArPSBtICogZ3k7CiAgICAgICAgICBmLnogKz0gbSAqIGd6OwogICAgICAgIH0KICAgICAgfSAvLyBVcGRhdGUgc3Vic3lzdGVtcwoKCiAgICAgIGZvciAobGV0IGkgPSAwLCBOc3Vic3lzdGVtcyA9IHRoaXMuc3Vic3lzdGVtcy5sZW5ndGg7IGkgIT09IE5zdWJzeXN0ZW1zOyBpKyspIHsKICAgICAgICB0aGlzLnN1YnN5c3RlbXNbaV0udXBkYXRlKCk7CiAgICAgIH0gLy8gQ29sbGlzaW9uIGRldGVjdGlvbgoKCiAgICAgIGlmIChkb1Byb2ZpbGluZykgewogICAgICAgIHByb2ZpbGluZ1N0YXJ0ID0gcGVyZm9ybWFuY2UkMS5ub3coKTsKICAgICAgfQoKICAgICAgcDEubGVuZ3RoID0gMDsgLy8gQ2xlYW4gdXAgcGFpciBhcnJheXMgZnJvbSBsYXN0IHN0ZXAKCiAgICAgIHAyLmxlbmd0aCA9IDA7CiAgICAgIHRoaXMuYnJvYWRwaGFzZS5jb2xsaXNpb25QYWlycyh0aGlzLCBwMSwgcDIpOwoKICAgICAgaWYgKGRvUHJvZmlsaW5nKSB7CiAgICAgICAgcHJvZmlsZS5icm9hZHBoYXNlID0gcGVyZm9ybWFuY2UkMS5ub3coKSAtIHByb2ZpbGluZ1N0YXJ0OwogICAgICB9IC8vIFJlbW92ZSBjb25zdHJhaW5lZCBwYWlycyB3aXRoIGNvbGxpZGVDb25uZWN0ZWQgPT0gZmFsc2UKCgogICAgICBsZXQgTmNvbnN0cmFpbnRzID0gY29uc3RyYWludHMubGVuZ3RoOwoKICAgICAgZm9yIChpID0gMDsgaSAhPT0gTmNvbnN0cmFpbnRzOyBpKyspIHsKICAgICAgICBjb25zdCBjID0gY29uc3RyYWludHNbaV07CgogICAgICAgIGlmICghYy5jb2xsaWRlQ29ubmVjdGVkKSB7CiAgICAgICAgICBmb3IgKGxldCBqID0gcDEubGVuZ3RoIC0gMTsgaiA+PSAwOyBqIC09IDEpIHsKICAgICAgICAgICAgaWYgKGMuYm9keUEgPT09IHAxW2pdICYmIGMuYm9keUIgPT09IHAyW2pdIHx8IGMuYm9keUIgPT09IHAxW2pdICYmIGMuYm9keUEgPT09IHAyW2pdKSB7CiAgICAgICAgICAgICAgcDEuc3BsaWNlKGosIDEpOwogICAgICAgICAgICAgIHAyLnNwbGljZShqLCAxKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQoKICAgICAgdGhpcy5jb2xsaXNpb25NYXRyaXhUaWNrKCk7IC8vIEdlbmVyYXRlIGNvbnRhY3RzCgogICAgICBpZiAoZG9Qcm9maWxpbmcpIHsKICAgICAgICBwcm9maWxpbmdTdGFydCA9IHBlcmZvcm1hbmNlJDEubm93KCk7CiAgICAgIH0KCiAgICAgIGNvbnN0IG9sZGNvbnRhY3RzID0gV29ybGRfc3RlcF9vbGRDb250YWN0czsKICAgICAgY29uc3QgTm9sZENvbnRhY3RzID0gY29udGFjdHMubGVuZ3RoOwoKICAgICAgZm9yIChpID0gMDsgaSAhPT0gTm9sZENvbnRhY3RzOyBpKyspIHsKICAgICAgICBvbGRjb250YWN0cy5wdXNoKGNvbnRhY3RzW2ldKTsKICAgICAgfQoKICAgICAgY29udGFjdHMubGVuZ3RoID0gMDsgLy8gVHJhbnNmZXIgRnJpY3Rpb25FcXVhdGlvbiBmcm9tIGN1cnJlbnQgbGlzdCB0byB0aGUgcG9vbCBmb3IgcmV1c2UKCiAgICAgIGNvbnN0IE5vbGRGcmljdGlvbkVxdWF0aW9ucyA9IHRoaXMuZnJpY3Rpb25FcXVhdGlvbnMubGVuZ3RoOwoKICAgICAgZm9yIChpID0gMDsgaSAhPT0gTm9sZEZyaWN0aW9uRXF1YXRpb25zOyBpKyspIHsKICAgICAgICBmcmljdGlvbkVxdWF0aW9uUG9vbC5wdXNoKHRoaXMuZnJpY3Rpb25FcXVhdGlvbnNbaV0pOwogICAgICB9CgogICAgICB0aGlzLmZyaWN0aW9uRXF1YXRpb25zLmxlbmd0aCA9IDA7CiAgICAgIHRoaXMubmFycm93cGhhc2UuZ2V0Q29udGFjdHMocDEsIHAyLCB0aGlzLCBjb250YWN0cywgb2xkY29udGFjdHMsIC8vIFRvIGJlIHJldXNlZAogICAgICB0aGlzLmZyaWN0aW9uRXF1YXRpb25zLCBmcmljdGlvbkVxdWF0aW9uUG9vbCk7CgogICAgICBpZiAoZG9Qcm9maWxpbmcpIHsKICAgICAgICBwcm9maWxlLm5hcnJvd3BoYXNlID0gcGVyZm9ybWFuY2UkMS5ub3coKSAtIHByb2ZpbGluZ1N0YXJ0OwogICAgICB9IC8vIExvb3Agb3ZlciBhbGwgY29sbGlzaW9ucwoKCiAgICAgIGlmIChkb1Byb2ZpbGluZykgewogICAgICAgIHByb2ZpbGluZ1N0YXJ0ID0gcGVyZm9ybWFuY2UkMS5ub3coKTsKICAgICAgfSAvLyBBZGQgYWxsIGZyaWN0aW9uIGVxcwoKCiAgICAgIGZvciAoaSA9IDA7IGkgPCB0aGlzLmZyaWN0aW9uRXF1YXRpb25zLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgc29sdmVyLmFkZEVxdWF0aW9uKHRoaXMuZnJpY3Rpb25FcXVhdGlvbnNbaV0pOwogICAgICB9CgogICAgICBjb25zdCBuY29udGFjdHMgPSBjb250YWN0cy5sZW5ndGg7CgogICAgICBmb3IgKGxldCBrID0gMDsgayAhPT0gbmNvbnRhY3RzOyBrKyspIHsKICAgICAgICAvLyBDdXJyZW50IGNvbnRhY3QKICAgICAgICBjb25zdCBjID0gY29udGFjdHNba107IC8vIEdldCBjdXJyZW50IGNvbGxpc2lvbiBpbmRlY2VzCgogICAgICAgIGNvbnN0IGJpID0gYy5iaTsKICAgICAgICBjb25zdCBiaiA9IGMuYmo7CiAgICAgICAgY29uc3Qgc2kgPSBjLnNpOwogICAgICAgIGNvbnN0IHNqID0gYy5zajsgLy8gR2V0IGNvbGxpc2lvbiBwcm9wZXJ0aWVzCgogICAgICAgIGxldCBjbTsKCiAgICAgICAgaWYgKGJpLm1hdGVyaWFsICYmIGJqLm1hdGVyaWFsKSB7CiAgICAgICAgICBjbSA9IHRoaXMuZ2V0Q29udGFjdE1hdGVyaWFsKGJpLm1hdGVyaWFsLCBiai5tYXRlcmlhbCkgfHwgdGhpcy5kZWZhdWx0Q29udGFjdE1hdGVyaWFsOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBjbSA9IHRoaXMuZGVmYXVsdENvbnRhY3RNYXRlcmlhbDsKICAgICAgICB9IC8vIGMuZW5hYmxlZCA9IGJpLmNvbGxpc2lvblJlc3BvbnNlICYmIGJqLmNvbGxpc2lvblJlc3BvbnNlICYmIHNpLmNvbGxpc2lvblJlc3BvbnNlICYmIHNqLmNvbGxpc2lvblJlc3BvbnNlOwoKCiAgICAgICAgY20uZnJpY3Rpb247IC8vIGMucmVzdGl0dXRpb24gPSBjbS5yZXN0aXR1dGlvbjsKICAgICAgICAvLyBJZiBmcmljdGlvbiBvciByZXN0aXR1dGlvbiB3ZXJlIHNwZWNpZmllZCBpbiB0aGUgbWF0ZXJpYWwsIHVzZSB0aGVtCgogICAgICAgIGlmIChiaS5tYXRlcmlhbCAmJiBiai5tYXRlcmlhbCkgewogICAgICAgICAgaWYgKGJpLm1hdGVyaWFsLmZyaWN0aW9uID49IDAgJiYgYmoubWF0ZXJpYWwuZnJpY3Rpb24gPj0gMCkgewogICAgICAgICAgICBiaS5tYXRlcmlhbC5mcmljdGlvbiAqIGJqLm1hdGVyaWFsLmZyaWN0aW9uOwogICAgICAgICAgfQoKICAgICAgICAgIGlmIChiaS5tYXRlcmlhbC5yZXN0aXR1dGlvbiA+PSAwICYmIGJqLm1hdGVyaWFsLnJlc3RpdHV0aW9uID49IDApIHsKICAgICAgICAgICAgYy5yZXN0aXR1dGlvbiA9IGJpLm1hdGVyaWFsLnJlc3RpdHV0aW9uICogYmoubWF0ZXJpYWwucmVzdGl0dXRpb247CiAgICAgICAgICB9CiAgICAgICAgfSAvLyBjLnNldFNwb29rUGFyYW1zKAogICAgICAgIC8vICAgICAgICAgICBjbS5jb250YWN0RXF1YXRpb25TdGlmZm5lc3MsCiAgICAgICAgLy8gICAgICAgICAgIGNtLmNvbnRhY3RFcXVhdGlvblJlbGF4YXRpb24sCiAgICAgICAgLy8gICAgICAgICAgIGR0CiAgICAgICAgLy8gICAgICAgKTsKCgogICAgICAgIHNvbHZlci5hZGRFcXVhdGlvbihjKTsgLy8gLy8gQWRkIGZyaWN0aW9uIGNvbnN0cmFpbnQgZXF1YXRpb24KICAgICAgICAvLyBpZihtdSA+IDApewogICAgICAgIC8vIAkvLyBDcmVhdGUgMiB0YW5nZW50IGVxdWF0aW9ucwogICAgICAgIC8vIAljb25zdCBtdWcgPSBtdSAqIGdub3JtOwogICAgICAgIC8vIAljb25zdCByZWR1Y2VkTWFzcyA9IChiaS5pbnZNYXNzICsgYmouaW52TWFzcyk7CiAgICAgICAgLy8gCWlmKHJlZHVjZWRNYXNzID4gMCl7CiAgICAgICAgLy8gCQlyZWR1Y2VkTWFzcyA9IDEvcmVkdWNlZE1hc3M7CiAgICAgICAgLy8gCX0KICAgICAgICAvLyAJY29uc3QgcG9vbCA9IGZyaWN0aW9uRXF1YXRpb25Qb29sOwogICAgICAgIC8vIAljb25zdCBjMSA9IHBvb2wubGVuZ3RoID8gcG9vbC5wb3AoKSA6IG5ldyBGcmljdGlvbkVxdWF0aW9uKGJpLGJqLG11ZypyZWR1Y2VkTWFzcyk7CiAgICAgICAgLy8gCWNvbnN0IGMyID0gcG9vbC5sZW5ndGggPyBwb29sLnBvcCgpIDogbmV3IEZyaWN0aW9uRXF1YXRpb24oYmksYmosbXVnKnJlZHVjZWRNYXNzKTsKICAgICAgICAvLyAJdGhpcy5mcmljdGlvbkVxdWF0aW9ucy5wdXNoKGMxLCBjMik7CiAgICAgICAgLy8gCWMxLmJpID0gYzIuYmkgPSBiaTsKICAgICAgICAvLyAJYzEuYmogPSBjMi5iaiA9IGJqOwogICAgICAgIC8vIAljMS5taW5Gb3JjZSA9IGMyLm1pbkZvcmNlID0gLW11ZypyZWR1Y2VkTWFzczsKICAgICAgICAvLyAJYzEubWF4Rm9yY2UgPSBjMi5tYXhGb3JjZSA9IG11ZypyZWR1Y2VkTWFzczsKICAgICAgICAvLyAJLy8gQ29weSBvdmVyIHRoZSByZWxhdGl2ZSB2ZWN0b3JzCiAgICAgICAgLy8gCWMxLnJpLmNvcHkoYy5yaSk7CiAgICAgICAgLy8gCWMxLnJqLmNvcHkoYy5yaik7CiAgICAgICAgLy8gCWMyLnJpLmNvcHkoYy5yaSk7CiAgICAgICAgLy8gCWMyLnJqLmNvcHkoYy5yaik7CiAgICAgICAgLy8gCS8vIENvbnN0cnVjdCB0YW5nZW50cwogICAgICAgIC8vIAljLm5pLnRhbmdlbnRzKGMxLnQsIGMyLnQpOwogICAgICAgIC8vICAgICAgICAgICAvLyBTZXQgc3Bvb2sgcGFyYW1zCiAgICAgICAgLy8gICAgICAgICAgIGMxLnNldFNwb29rUGFyYW1zKGNtLmZyaWN0aW9uRXF1YXRpb25TdGlmZm5lc3MsIGNtLmZyaWN0aW9uRXF1YXRpb25SZWxheGF0aW9uLCBkdCk7CiAgICAgICAgLy8gICAgICAgICAgIGMyLnNldFNwb29rUGFyYW1zKGNtLmZyaWN0aW9uRXF1YXRpb25TdGlmZm5lc3MsIGNtLmZyaWN0aW9uRXF1YXRpb25SZWxheGF0aW9uLCBkdCk7CiAgICAgICAgLy8gICAgICAgICAgIGMxLmVuYWJsZWQgPSBjMi5lbmFibGVkID0gYy5lbmFibGVkOwogICAgICAgIC8vIAkvLyBBZGQgZXF1YXRpb25zIHRvIHNvbHZlcgogICAgICAgIC8vIAlzb2x2ZXIuYWRkRXF1YXRpb24oYzEpOwogICAgICAgIC8vIAlzb2x2ZXIuYWRkRXF1YXRpb24oYzIpOwogICAgICAgIC8vIH0KCiAgICAgICAgaWYgKGJpLmFsbG93U2xlZXAgJiYgYmkudHlwZSA9PT0gQm9keS5EWU5BTUlDICYmIGJpLnNsZWVwU3RhdGUgPT09IEJvZHkuU0xFRVBJTkcgJiYgYmouc2xlZXBTdGF0ZSA9PT0gQm9keS5BV0FLRSAmJiBiai50eXBlICE9PSBCb2R5LlNUQVRJQykgewogICAgICAgICAgY29uc3Qgc3BlZWRTcXVhcmVkQiA9IGJqLnZlbG9jaXR5Lmxlbmd0aFNxdWFyZWQoKSArIGJqLmFuZ3VsYXJWZWxvY2l0eS5sZW5ndGhTcXVhcmVkKCk7CiAgICAgICAgICBjb25zdCBzcGVlZExpbWl0U3F1YXJlZEIgPSBiai5zbGVlcFNwZWVkTGltaXQgKiogMjsKCiAgICAgICAgICBpZiAoc3BlZWRTcXVhcmVkQiA+PSBzcGVlZExpbWl0U3F1YXJlZEIgKiAyKSB7CiAgICAgICAgICAgIGJpLndha2VVcEFmdGVyTmFycm93cGhhc2UgPSB0cnVlOwogICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgaWYgKGJqLmFsbG93U2xlZXAgJiYgYmoudHlwZSA9PT0gQm9keS5EWU5BTUlDICYmIGJqLnNsZWVwU3RhdGUgPT09IEJvZHkuU0xFRVBJTkcgJiYgYmkuc2xlZXBTdGF0ZSA9PT0gQm9keS5BV0FLRSAmJiBiaS50eXBlICE9PSBCb2R5LlNUQVRJQykgewogICAgICAgICAgY29uc3Qgc3BlZWRTcXVhcmVkQSA9IGJpLnZlbG9jaXR5Lmxlbmd0aFNxdWFyZWQoKSArIGJpLmFuZ3VsYXJWZWxvY2l0eS5sZW5ndGhTcXVhcmVkKCk7CiAgICAgICAgICBjb25zdCBzcGVlZExpbWl0U3F1YXJlZEEgPSBiaS5zbGVlcFNwZWVkTGltaXQgKiogMjsKCiAgICAgICAgICBpZiAoc3BlZWRTcXVhcmVkQSA+PSBzcGVlZExpbWl0U3F1YXJlZEEgKiAyKSB7CiAgICAgICAgICAgIGJqLndha2VVcEFmdGVyTmFycm93cGhhc2UgPSB0cnVlOwogICAgICAgICAgfQogICAgICAgIH0gLy8gTm93IHdlIGtub3cgdGhhdCBpIGFuZCBqIGFyZSBpbiBjb250YWN0LiBTZXQgY29sbGlzaW9uIG1hdHJpeCBzdGF0ZQoKCiAgICAgICAgdGhpcy5jb2xsaXNpb25NYXRyaXguc2V0KGJpLCBiaiwgdHJ1ZSk7CgogICAgICAgIGlmICghdGhpcy5jb2xsaXNpb25NYXRyaXhQcmV2aW91cy5nZXQoYmksIGJqKSkgewogICAgICAgICAgLy8gRmlyc3QgY29udGFjdCEKICAgICAgICAgIC8vIFdlIHJldXNlIHRoZSBjb2xsaWRlRXZlbnQgb2JqZWN0LCBvdGhlcndpc2Ugd2Ugd2lsbCBlbmQgdXAgY3JlYXRpbmcgbmV3IG9iamVjdHMgZm9yIGVhY2ggbmV3IGNvbnRhY3QsIGV2ZW4gaWYgdGhlcmUncyBubyBldmVudCBsaXN0ZW5lciBhdHRhY2hlZC4KICAgICAgICAgIFdvcmxkX3N0ZXBfY29sbGlkZUV2ZW50LmJvZHkgPSBiajsKICAgICAgICAgIFdvcmxkX3N0ZXBfY29sbGlkZUV2ZW50LmNvbnRhY3QgPSBjOwogICAgICAgICAgYmkuZGlzcGF0Y2hFdmVudChXb3JsZF9zdGVwX2NvbGxpZGVFdmVudCk7CiAgICAgICAgICBXb3JsZF9zdGVwX2NvbGxpZGVFdmVudC5ib2R5ID0gYmk7CiAgICAgICAgICBiai5kaXNwYXRjaEV2ZW50KFdvcmxkX3N0ZXBfY29sbGlkZUV2ZW50KTsKICAgICAgICB9CgogICAgICAgIHRoaXMuYm9keU92ZXJsYXBLZWVwZXIuc2V0KGJpLmlkLCBiai5pZCk7CiAgICAgICAgdGhpcy5zaGFwZU92ZXJsYXBLZWVwZXIuc2V0KHNpLmlkLCBzai5pZCk7CiAgICAgIH0KCiAgICAgIHRoaXMuZW1pdENvbnRhY3RFdmVudHMoKTsKCiAgICAgIGlmIChkb1Byb2ZpbGluZykgewogICAgICAgIHByb2ZpbGUubWFrZUNvbnRhY3RDb25zdHJhaW50cyA9IHBlcmZvcm1hbmNlJDEubm93KCkgLSBwcm9maWxpbmdTdGFydDsKICAgICAgICBwcm9maWxpbmdTdGFydCA9IHBlcmZvcm1hbmNlJDEubm93KCk7CiAgICAgIH0gLy8gV2FrZSB1cCBib2RpZXMKCgogICAgICBmb3IgKGkgPSAwOyBpICE9PSBOOyBpKyspIHsKICAgICAgICBjb25zdCBiaSA9IGJvZGllc1tpXTsKCiAgICAgICAgaWYgKGJpLndha2VVcEFmdGVyTmFycm93cGhhc2UpIHsKICAgICAgICAgIGJpLndha2VVcCgpOwogICAgICAgICAgYmkud2FrZVVwQWZ0ZXJOYXJyb3dwaGFzZSA9IGZhbHNlOwogICAgICAgIH0KICAgICAgfSAvLyBBZGQgdXNlci1hZGRlZCBjb25zdHJhaW50cwoKCiAgICAgIE5jb25zdHJhaW50cyA9IGNvbnN0cmFpbnRzLmxlbmd0aDsKCiAgICAgIGZvciAoaSA9IDA7IGkgIT09IE5jb25zdHJhaW50czsgaSsrKSB7CiAgICAgICAgY29uc3QgYyA9IGNvbnN0cmFpbnRzW2ldOwogICAgICAgIGMudXBkYXRlKCk7CgogICAgICAgIGZvciAobGV0IGogPSAwLCBOZXEgPSBjLmVxdWF0aW9ucy5sZW5ndGg7IGogIT09IE5lcTsgaisrKSB7CiAgICAgICAgICBjb25zdCBlcSA9IGMuZXF1YXRpb25zW2pdOwogICAgICAgICAgc29sdmVyLmFkZEVxdWF0aW9uKGVxKTsKICAgICAgICB9CiAgICAgIH0gLy8gU29sdmUgdGhlIGNvbnN0cmFpbmVkIHN5c3RlbQoKCiAgICAgIHNvbHZlci5zb2x2ZShkdCwgdGhpcyk7CgogICAgICBpZiAoZG9Qcm9maWxpbmcpIHsKICAgICAgICBwcm9maWxlLnNvbHZlID0gcGVyZm9ybWFuY2UkMS5ub3coKSAtIHByb2ZpbGluZ1N0YXJ0OwogICAgICB9IC8vIFJlbW92ZSBhbGwgY29udGFjdHMgZnJvbSBzb2x2ZXIKCgogICAgICBzb2x2ZXIucmVtb3ZlQWxsRXF1YXRpb25zKCk7IC8vIEFwcGx5IGRhbXBpbmcsIHNlZSBodHRwOi8vY29kZS5nb29nbGUuY29tL3AvYnVsbGV0L2lzc3Vlcy9kZXRhaWw/aWQ9NzQgZm9yIGRldGFpbHMKCiAgICAgIGNvbnN0IHBvdyA9IE1hdGgucG93OwoKICAgICAgZm9yIChpID0gMDsgaSAhPT0gTjsgaSsrKSB7CiAgICAgICAgY29uc3QgYmkgPSBib2RpZXNbaV07CgogICAgICAgIGlmIChiaS50eXBlICYgRFlOQU1JQykgewogICAgICAgICAgLy8gT25seSBmb3IgZHluYW1pYyBib2RpZXMKICAgICAgICAgIGNvbnN0IGxkID0gcG93KDEuMCAtIGJpLmxpbmVhckRhbXBpbmcsIGR0KTsKICAgICAgICAgIGNvbnN0IHYgPSBiaS52ZWxvY2l0eTsKICAgICAgICAgIHYuc2NhbGUobGQsIHYpOwogICAgICAgICAgY29uc3QgYXYgPSBiaS5hbmd1bGFyVmVsb2NpdHk7CgogICAgICAgICAgaWYgKGF2KSB7CiAgICAgICAgICAgIGNvbnN0IGFkID0gcG93KDEuMCAtIGJpLmFuZ3VsYXJEYW1waW5nLCBkdCk7CiAgICAgICAgICAgIGF2LnNjYWxlKGFkLCBhdik7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CgogICAgICB0aGlzLmRpc3BhdGNoRXZlbnQoV29ybGRfc3RlcF9wcmVTdGVwRXZlbnQpOyAvLyBJbnZva2UgcHJlLXN0ZXAgY2FsbGJhY2tzCgogICAgICBmb3IgKGkgPSAwOyBpICE9PSBOOyBpKyspIHsKICAgICAgICBjb25zdCBiaSA9IGJvZGllc1tpXTsKCiAgICAgICAgaWYgKGJpLnByZVN0ZXApIHsKICAgICAgICAgIGJpLnByZVN0ZXAuY2FsbChiaSk7CiAgICAgICAgfQogICAgICB9IC8vIExlYXAgZnJvZwogICAgICAvLyB2bmV3ID0gdiArIGgqZi9tCiAgICAgIC8vIHhuZXcgPSB4ICsgaCp2bmV3CgoKICAgICAgaWYgKGRvUHJvZmlsaW5nKSB7CiAgICAgICAgcHJvZmlsaW5nU3RhcnQgPSBwZXJmb3JtYW5jZSQxLm5vdygpOwogICAgICB9CgogICAgICBjb25zdCBzdGVwbnVtYmVyID0gdGhpcy5zdGVwbnVtYmVyOwogICAgICBjb25zdCBxdWF0Tm9ybWFsaXplID0gc3RlcG51bWJlciAlICh0aGlzLnF1YXROb3JtYWxpemVTa2lwICsgMSkgPT09IDA7CiAgICAgIGNvbnN0IHF1YXROb3JtYWxpemVGYXN0ID0gdGhpcy5xdWF0Tm9ybWFsaXplRmFzdDsKCiAgICAgIGZvciAoaSA9IDA7IGkgIT09IE47IGkrKykgewogICAgICAgIGJvZGllc1tpXS5pbnRlZ3JhdGUoZHQsIHF1YXROb3JtYWxpemUsIHF1YXROb3JtYWxpemVGYXN0KTsKICAgICAgfQoKICAgICAgdGhpcy5jbGVhckZvcmNlcygpOwogICAgICB0aGlzLmJyb2FkcGhhc2UuZGlydHkgPSB0cnVlOwoKICAgICAgaWYgKGRvUHJvZmlsaW5nKSB7CiAgICAgICAgcHJvZmlsZS5pbnRlZ3JhdGUgPSBwZXJmb3JtYW5jZSQxLm5vdygpIC0gcHJvZmlsaW5nU3RhcnQ7CiAgICAgIH0gLy8gVXBkYXRlIHN0ZXAgbnVtYmVyCgoKICAgICAgdGhpcy5zdGVwbnVtYmVyICs9IDE7CiAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChXb3JsZF9zdGVwX3Bvc3RTdGVwRXZlbnQpOyAvLyBJbnZva2UgcG9zdC1zdGVwIGNhbGxiYWNrcwoKICAgICAgZm9yIChpID0gMDsgaSAhPT0gTjsgaSsrKSB7CiAgICAgICAgY29uc3QgYmkgPSBib2RpZXNbaV07CiAgICAgICAgY29uc3QgcG9zdFN0ZXAgPSBiaS5wb3N0U3RlcDsKCiAgICAgICAgaWYgKHBvc3RTdGVwKSB7CiAgICAgICAgICBwb3N0U3RlcC5jYWxsKGJpKTsKICAgICAgICB9CiAgICAgIH0gLy8gU2xlZXBpbmcgdXBkYXRlCgoKICAgICAgbGV0IGhhc0FjdGl2ZUJvZGllcyA9IHRydWU7CgogICAgICBpZiAodGhpcy5hbGxvd1NsZWVwKSB7CiAgICAgICAgaGFzQWN0aXZlQm9kaWVzID0gZmFsc2U7CgogICAgICAgIGZvciAoaSA9IDA7IGkgIT09IE47IGkrKykgewogICAgICAgICAgY29uc3QgYmkgPSBib2RpZXNbaV07CiAgICAgICAgICBiaS5zbGVlcFRpY2sodGhpcy50aW1lKTsKCiAgICAgICAgICBpZiAoYmkuc2xlZXBTdGF0ZSAhPT0gQm9keS5TTEVFUElORykgewogICAgICAgICAgICBoYXNBY3RpdmVCb2RpZXMgPSB0cnVlOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQoKICAgICAgdGhpcy5oYXNBY3RpdmVCb2RpZXMgPSBoYXNBY3RpdmVCb2RpZXM7CiAgICB9CgogICAgZW1pdENvbnRhY3RFdmVudHMoKSB7CiAgICAgIGNvbnN0IGhhc0JlZ2luQ29udGFjdCA9IHRoaXMuaGFzQW55RXZlbnRMaXN0ZW5lcignYmVnaW5Db250YWN0Jyk7CiAgICAgIGNvbnN0IGhhc0VuZENvbnRhY3QgPSB0aGlzLmhhc0FueUV2ZW50TGlzdGVuZXIoJ2VuZENvbnRhY3QnKTsKCiAgICAgIGlmIChoYXNCZWdpbkNvbnRhY3QgfHwgaGFzRW5kQ29udGFjdCkgewogICAgICAgIHRoaXMuYm9keU92ZXJsYXBLZWVwZXIuZ2V0RGlmZihhZGRpdGlvbnMsIHJlbW92YWxzKTsKICAgICAgfQoKICAgICAgaWYgKGhhc0JlZ2luQ29udGFjdCkgewogICAgICAgIGZvciAobGV0IGkgPSAwLCBsID0gYWRkaXRpb25zLmxlbmd0aDsgaSA8IGw7IGkgKz0gMikgewogICAgICAgICAgYmVnaW5Db250YWN0RXZlbnQuYm9keUEgPSB0aGlzLmdldEJvZHlCeUlkKGFkZGl0aW9uc1tpXSk7CiAgICAgICAgICBiZWdpbkNvbnRhY3RFdmVudC5ib2R5QiA9IHRoaXMuZ2V0Qm9keUJ5SWQoYWRkaXRpb25zW2kgKyAxXSk7CiAgICAgICAgICB0aGlzLmRpc3BhdGNoRXZlbnQoYmVnaW5Db250YWN0RXZlbnQpOwogICAgICAgIH0KCiAgICAgICAgYmVnaW5Db250YWN0RXZlbnQuYm9keUEgPSBiZWdpbkNvbnRhY3RFdmVudC5ib2R5QiA9IG51bGw7CiAgICAgIH0KCiAgICAgIGlmIChoYXNFbmRDb250YWN0KSB7CiAgICAgICAgZm9yIChsZXQgaSA9IDAsIGwgPSByZW1vdmFscy5sZW5ndGg7IGkgPCBsOyBpICs9IDIpIHsKICAgICAgICAgIGVuZENvbnRhY3RFdmVudC5ib2R5QSA9IHRoaXMuZ2V0Qm9keUJ5SWQocmVtb3ZhbHNbaV0pOwogICAgICAgICAgZW5kQ29udGFjdEV2ZW50LmJvZHlCID0gdGhpcy5nZXRCb2R5QnlJZChyZW1vdmFsc1tpICsgMV0pOwogICAgICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KGVuZENvbnRhY3RFdmVudCk7CiAgICAgICAgfQoKICAgICAgICBlbmRDb250YWN0RXZlbnQuYm9keUEgPSBlbmRDb250YWN0RXZlbnQuYm9keUIgPSBudWxsOwogICAgICB9CgogICAgICBhZGRpdGlvbnMubGVuZ3RoID0gcmVtb3ZhbHMubGVuZ3RoID0gMDsKICAgICAgY29uc3QgaGFzQmVnaW5TaGFwZUNvbnRhY3QgPSB0aGlzLmhhc0FueUV2ZW50TGlzdGVuZXIoJ2JlZ2luU2hhcGVDb250YWN0Jyk7CiAgICAgIGNvbnN0IGhhc0VuZFNoYXBlQ29udGFjdCA9IHRoaXMuaGFzQW55RXZlbnRMaXN0ZW5lcignZW5kU2hhcGVDb250YWN0Jyk7CgogICAgICBpZiAoaGFzQmVnaW5TaGFwZUNvbnRhY3QgfHwgaGFzRW5kU2hhcGVDb250YWN0KSB7CiAgICAgICAgdGhpcy5zaGFwZU92ZXJsYXBLZWVwZXIuZ2V0RGlmZihhZGRpdGlvbnMsIHJlbW92YWxzKTsKICAgICAgfQoKICAgICAgaWYgKGhhc0JlZ2luU2hhcGVDb250YWN0KSB7CiAgICAgICAgZm9yIChsZXQgaSA9IDAsIGwgPSBhZGRpdGlvbnMubGVuZ3RoOyBpIDwgbDsgaSArPSAyKSB7CiAgICAgICAgICBjb25zdCBzaGFwZUEgPSB0aGlzLmdldFNoYXBlQnlJZChhZGRpdGlvbnNbaV0pOwogICAgICAgICAgY29uc3Qgc2hhcGVCID0gdGhpcy5nZXRTaGFwZUJ5SWQoYWRkaXRpb25zW2kgKyAxXSk7CiAgICAgICAgICBiZWdpblNoYXBlQ29udGFjdEV2ZW50LnNoYXBlQSA9IHNoYXBlQTsKICAgICAgICAgIGJlZ2luU2hhcGVDb250YWN0RXZlbnQuc2hhcGVCID0gc2hhcGVCOwogICAgICAgICAgaWYgKHNoYXBlQSkgYmVnaW5TaGFwZUNvbnRhY3RFdmVudC5ib2R5QSA9IHNoYXBlQS5ib2R5OwogICAgICAgICAgaWYgKHNoYXBlQikgYmVnaW5TaGFwZUNvbnRhY3RFdmVudC5ib2R5QiA9IHNoYXBlQi5ib2R5OwogICAgICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KGJlZ2luU2hhcGVDb250YWN0RXZlbnQpOwogICAgICAgIH0KCiAgICAgICAgYmVnaW5TaGFwZUNvbnRhY3RFdmVudC5ib2R5QSA9IGJlZ2luU2hhcGVDb250YWN0RXZlbnQuYm9keUIgPSBiZWdpblNoYXBlQ29udGFjdEV2ZW50LnNoYXBlQSA9IGJlZ2luU2hhcGVDb250YWN0RXZlbnQuc2hhcGVCID0gbnVsbDsKICAgICAgfQoKICAgICAgaWYgKGhhc0VuZFNoYXBlQ29udGFjdCkgewogICAgICAgIGZvciAobGV0IGkgPSAwLCBsID0gcmVtb3ZhbHMubGVuZ3RoOyBpIDwgbDsgaSArPSAyKSB7CiAgICAgICAgICBjb25zdCBzaGFwZUEgPSB0aGlzLmdldFNoYXBlQnlJZChyZW1vdmFsc1tpXSk7CiAgICAgICAgICBjb25zdCBzaGFwZUIgPSB0aGlzLmdldFNoYXBlQnlJZChyZW1vdmFsc1tpICsgMV0pOwogICAgICAgICAgZW5kU2hhcGVDb250YWN0RXZlbnQuc2hhcGVBID0gc2hhcGVBOwogICAgICAgICAgZW5kU2hhcGVDb250YWN0RXZlbnQuc2hhcGVCID0gc2hhcGVCOwogICAgICAgICAgaWYgKHNoYXBlQSkgZW5kU2hhcGVDb250YWN0RXZlbnQuYm9keUEgPSBzaGFwZUEuYm9keTsKICAgICAgICAgIGlmIChzaGFwZUIpIGVuZFNoYXBlQ29udGFjdEV2ZW50LmJvZHlCID0gc2hhcGVCLmJvZHk7CiAgICAgICAgICB0aGlzLmRpc3BhdGNoRXZlbnQoZW5kU2hhcGVDb250YWN0RXZlbnQpOwogICAgICAgIH0KCiAgICAgICAgZW5kU2hhcGVDb250YWN0RXZlbnQuYm9keUEgPSBlbmRTaGFwZUNvbnRhY3RFdmVudC5ib2R5QiA9IGVuZFNoYXBlQ29udGFjdEV2ZW50LnNoYXBlQSA9IGVuZFNoYXBlQ29udGFjdEV2ZW50LnNoYXBlQiA9IG51bGw7CiAgICAgIH0KICAgIH0KICAgIC8qKgogICAgICogU2V0cyBhbGwgYm9keSBmb3JjZXMgaW4gdGhlIHdvcmxkIHRvIHplcm8uCiAgICAgKi8KCgogICAgY2xlYXJGb3JjZXMoKSB7CiAgICAgIGNvbnN0IGJvZGllcyA9IHRoaXMuYm9kaWVzOwogICAgICBjb25zdCBOID0gYm9kaWVzLmxlbmd0aDsKCiAgICAgIGZvciAobGV0IGkgPSAwOyBpICE9PSBOOyBpKyspIHsKICAgICAgICBjb25zdCBiID0gYm9kaWVzW2ldOwogICAgICAgIGIuZm9yY2U7CiAgICAgICAgYi50b3JxdWU7CiAgICAgICAgYi5mb3JjZS5zZXQoMCwgMCwgMCk7CiAgICAgICAgYi50b3JxdWUuc2V0KDAsIDAsIDApOwogICAgICB9CiAgICB9CgogIH0gLy8gVGVtcCBzdHVmZgoKCiAgbmV3IEFBQkIoKTsKICBjb25zdCB0bXBSYXkgPSBuZXcgUmF5KCk7IC8vIHBlcmZvcm1hbmNlLm5vdygpIGZhbGxiYWNrIG9uIERhdGUubm93KCkKCiAgY29uc3QgcGVyZm9ybWFuY2UkMSA9IGdsb2JhbFRoaXMucGVyZm9ybWFuY2UgfHwge307CgogIGlmICghcGVyZm9ybWFuY2UkMS5ub3cpIHsKICAgIGxldCBub3dPZmZzZXQgPSBEYXRlLm5vdygpOwoKICAgIGlmIChwZXJmb3JtYW5jZSQxLnRpbWluZyAmJiBwZXJmb3JtYW5jZSQxLnRpbWluZy5uYXZpZ2F0aW9uU3RhcnQpIHsKICAgICAgbm93T2Zmc2V0ID0gcGVyZm9ybWFuY2UkMS50aW1pbmcubmF2aWdhdGlvblN0YXJ0OwogICAgfQoKICAgIHBlcmZvcm1hbmNlJDEubm93ID0gKCkgPT4gRGF0ZS5ub3coKSAtIG5vd09mZnNldDsKICB9IC8vIFJldXNhYmxlIGV2ZW50IG9iamVjdHMgdG8gc2F2ZSBtZW1vcnkuCgoKICBjb25zdCBXb3JsZF9zdGVwX3Bvc3RTdGVwRXZlbnQgPSB7CiAgICB0eXBlOiAncG9zdFN0ZXAnCiAgfTsgLy8gRGlzcGF0Y2hlZCBiZWZvcmUgdGhlIHdvcmxkIHN0ZXBzIGZvcndhcmQgaW4gdGltZS4KCiAgY29uc3QgV29ybGRfc3RlcF9wcmVTdGVwRXZlbnQgPSB7CiAgICB0eXBlOiAncHJlU3RlcCcKICB9OwogIGNvbnN0IFdvcmxkX3N0ZXBfY29sbGlkZUV2ZW50ID0gewogICAgdHlwZTogQm9keS5DT0xMSURFX0VWRU5UX05BTUUsCiAgICBib2R5OiBudWxsLAogICAgY29udGFjdDogbnVsbAogIH07IC8vIFBvb2xzIGZvciB1bnVzZWQgb2JqZWN0cwoKICBjb25zdCBXb3JsZF9zdGVwX29sZENvbnRhY3RzID0gW107CiAgY29uc3QgV29ybGRfc3RlcF9mcmljdGlvbkVxdWF0aW9uUG9vbCA9IFtdOyAvLyBSZXVzYWJsZSBhcnJheXMgZm9yIGNvbGxpc2lvbiBwYWlycwoKICBjb25zdCBXb3JsZF9zdGVwX3AxID0gW107CiAgY29uc3QgV29ybGRfc3RlcF9wMiA9IFtdOyAvLyBTdHVmZiBmb3IgZW1pdENvbnRhY3RFdmVudHMKCiAgY29uc3QgYWRkaXRpb25zID0gW107CiAgY29uc3QgcmVtb3ZhbHMgPSBbXTsKICBjb25zdCBiZWdpbkNvbnRhY3RFdmVudCA9IHsKICAgIHR5cGU6ICdiZWdpbkNvbnRhY3QnLAogICAgYm9keUE6IG51bGwsCiAgICBib2R5QjogbnVsbAogIH07CiAgY29uc3QgZW5kQ29udGFjdEV2ZW50ID0gewogICAgdHlwZTogJ2VuZENvbnRhY3QnLAogICAgYm9keUE6IG51bGwsCiAgICBib2R5QjogbnVsbAogIH07CiAgY29uc3QgYmVnaW5TaGFwZUNvbnRhY3RFdmVudCA9IHsKICAgIHR5cGU6ICdiZWdpblNoYXBlQ29udGFjdCcsCiAgICBib2R5QTogbnVsbCwKICAgIGJvZHlCOiBudWxsLAogICAgc2hhcGVBOiBudWxsLAogICAgc2hhcGVCOiBudWxsCiAgfTsKICBjb25zdCBlbmRTaGFwZUNvbnRhY3RFdmVudCA9IHsKICAgIHR5cGU6ICdlbmRTaGFwZUNvbnRhY3QnLAogICAgYm9keUE6IG51bGwsCiAgICBib2R5QjogbnVsbCwKICAgIHNoYXBlQTogbnVsbCwKICAgIHNoYXBlQjogbnVsbAogIH07CgogIGNvbnN0IG1ha2VWZWMzID0gX3JlZiA9PiB7CiAgICBsZXQgW3gsIHksIHpdID0gX3JlZjsKICAgIHJldHVybiBuZXcgVmVjMyh4LCB5LCB6KTsKICB9OwoKICBjb25zdCBwcmVwYXJlU3BoZXJlID0gYXJncyA9PiBBcnJheS5pc0FycmF5KGFyZ3MpID8gYXJncyA6IFthcmdzXTsKCiAgY29uc3QgcHJlcGFyZUNvbnZleFBvbHloZWRyb24gPSBfcmVmMiA9PiB7CiAgICBsZXQgW3YsIGZhY2VzLCBuLCBhLCBib3VuZGluZ1NwaGVyZVJhZGl1c10gPSBfcmVmMjsKICAgIHJldHVybiBbewogICAgICB2ZXJ0aWNlczogdiA/IHYubWFwKG1ha2VWZWMzKSA6IHVuZGVmaW5lZCwKICAgICAgZmFjZXMsCiAgICAgIG5vcm1hbHM6IG4gPyBuLm1hcChtYWtlVmVjMykgOiB1bmRlZmluZWQsCiAgICAgIGF4ZXM6IGEgPyBhLm1hcChtYWtlVmVjMykgOiB1bmRlZmluZWQsCiAgICAgIGJvdW5kaW5nU3BoZXJlUmFkaXVzCiAgICB9XTsKICB9OwoKICBmdW5jdGlvbiBjcmVhdGVTaGFwZSh0eXBlLCBhcmdzKSB7CiAgICBzd2l0Y2ggKHR5cGUpIHsKICAgICAgY2FzZSAnQm94JzoKICAgICAgICByZXR1cm4gbmV3IEJveChuZXcgVmVjMyguLi5hcmdzLm1hcCh2ID0+IHYgLyAyKSkpOwogICAgICAvLyBleHRlbnRzID0+IGhhbGZFeHRlbnRzCgogICAgICBjYXNlICdDb252ZXhQb2x5aGVkcm9uJzoKICAgICAgICByZXR1cm4gbmV3IENvbnZleFBvbHloZWRyb24oLi4ucHJlcGFyZUNvbnZleFBvbHloZWRyb24oYXJncykpOwoKICAgICAgY2FzZSAnQ3lsaW5kZXInOgogICAgICAgIHJldHVybiBuZXcgQ3lsaW5kZXIoLi4uYXJncyk7CiAgICAgIC8vIFsgcmFkaXVzVG9wLCByYWRpdXNCb3R0b20sIGhlaWdodCwgbnVtU2VnbWVudHMgXSA9IGFyZ3MKCiAgICAgIGNhc2UgJ0hlaWdodGZpZWxkJzoKICAgICAgICByZXR1cm4gbmV3IEhlaWdodGZpZWxkKC4uLmFyZ3MpOwogICAgICAvLyBbIEFycmF5IGRhdGEsIG9wdGlvbnM6IHttaW5WYWx1ZSwgbWF4VmFsdWUsIGVsZW1lbnRTaXplfSAgXSA9IGFyZ3MKCiAgICAgIGNhc2UgJ1BhcnRpY2xlJzoKICAgICAgICByZXR1cm4gbmV3IFBhcnRpY2xlKCk7CiAgICAgIC8vIG5vIGFyZ3MKCiAgICAgIGNhc2UgJ1BsYW5lJzoKICAgICAgICByZXR1cm4gbmV3IFBsYW5lKCk7CiAgICAgIC8vIG5vIGFyZ3MsIGluZmluaXRlIHggYW5kIHkKCiAgICAgIGNhc2UgJ1NwaGVyZSc6CiAgICAgICAgcmV0dXJuIG5ldyBTcGhlcmUoLi4ucHJlcGFyZVNwaGVyZShhcmdzKSk7CiAgICAgIC8vIHJhZGl1cyA9IGFyZ3MKCiAgICAgIGNhc2UgJ1RyaW1lc2gnOgogICAgICAgIHJldHVybiBuZXcgVHJpbWVzaCguLi5hcmdzKTsKICAgICAgLy8gW3ZlcnRpY2VzLCBpbmRpY2VzXSA9IGFyZ3MKICAgIH0KICB9CiAgLyoqCiAgICoKICAgKiBAcGFyYW0gdXVpZCB7c3RyaW5nfQogICAqIEBwYXJhbSBwcm9wcyB7Qm9keVByb3BzfQogICAqIEBwYXJhbSB0eXBlIHtCb2R5U2hhcGVUeXBlfQogICAqIEByZXR1cm4ge21vZHVsZTpvYmplY3RzL0JvZHkuQm9keX0KICAgKi8KCgogIGNvbnN0IHByb3BzVG9Cb2R5ID0gKHV1aWQsIHByb3BzLCB0eXBlKSA9PiB7CiAgICBjb25zdCB7CiAgICAgIGFyZ3MgPSBbXSwKICAgICAgcG9zaXRpb24gPSBbMCwgMCwgMF0sCiAgICAgIHJvdGF0aW9uID0gWzAsIDAsIDBdLAogICAgICB2ZWxvY2l0eSA9IFswLCAwLCAwXSwKICAgICAgYW5ndWxhclZlbG9jaXR5ID0gWzAsIDAsIDBdLAogICAgICBsaW5lYXJGYWN0b3IgPSBbMSwgMSwgMV0sCiAgICAgIGFuZ3VsYXJGYWN0b3IgPSBbMSwgMSwgMV0sCiAgICAgIHR5cGU6IGJvZHlUeXBlLAogICAgICBtYXNzLAogICAgICBtYXRlcmlhbCwKICAgICAgc2hhcGVzLAogICAgICBvbkNvbGxpZGUsCiAgICAgIGNvbGxpc2lvblJlc3BvbnNlLAogICAgICAuLi5leHRyYQogICAgfSA9IHByb3BzOwogICAgY29uc3QgYm9keSA9IG5ldyBCb2R5KHsgLi4uZXh0cmEsCiAgICAgIG1hc3M6IGJvZHlUeXBlID09PSAnU3RhdGljJyA/IDAgOiBtYXNzLAogICAgICB0eXBlOiBib2R5VHlwZSA/IEJvZHlbYm9keVR5cGUudG9VcHBlckNhc2UoKV0gOiB1bmRlZmluZWQsCiAgICAgIG1hdGVyaWFsOiBtYXRlcmlhbCA/IG5ldyBNYXRlcmlhbChtYXRlcmlhbCkgOiB1bmRlZmluZWQKICAgIH0pOwogICAgYm9keS51dWlkID0gdXVpZDsKCiAgICBpZiAoY29sbGlzaW9uUmVzcG9uc2UgIT09IHVuZGVmaW5lZCkgewogICAgICBib2R5LmNvbGxpc2lvblJlc3BvbnNlID0gY29sbGlzaW9uUmVzcG9uc2U7CiAgICB9CgogICAgaWYgKHR5cGUgPT09ICdDb21wb3VuZCcpIHsKICAgICAgc2hhcGVzLmZvckVhY2goX3JlZjMgPT4gewogICAgICAgIGxldCB7CiAgICAgICAgICB0eXBlLAogICAgICAgICAgYXJncywKICAgICAgICAgIHBvc2l0aW9uLAogICAgICAgICAgcm90YXRpb24sCiAgICAgICAgICBtYXRlcmlhbCwKICAgICAgICAgIC4uLmV4dHJhCiAgICAgICAgfSA9IF9yZWYzOwogICAgICAgIGNvbnN0IHNoYXBlQm9keSA9IGJvZHkuYWRkU2hhcGUoY3JlYXRlU2hhcGUodHlwZSwgYXJncyksIHBvc2l0aW9uID8gbmV3IFZlYzMoLi4ucG9zaXRpb24pIDogdW5kZWZpbmVkLCByb3RhdGlvbiA/IG5ldyBRdWF0ZXJuaW9uKCkuc2V0RnJvbUV1bGVyKC4uLnJvdGF0aW9uKSA6IHVuZGVmaW5lZCk7CiAgICAgICAgaWYgKG1hdGVyaWFsKSBzaGFwZUJvZHkubWF0ZXJpYWwgPSBuZXcgTWF0ZXJpYWwobWF0ZXJpYWwpOwogICAgICAgIE9iamVjdC5hc3NpZ24oc2hhcGVCb2R5LCBleHRyYSk7CiAgICAgIH0pOwogICAgfSBlbHNlIHsKICAgICAgYm9keS5hZGRTaGFwZShjcmVhdGVTaGFwZSh0eXBlLCBhcmdzKSk7CiAgICB9CgogICAgYm9keS5wb3NpdGlvbi5zZXQocG9zaXRpb25bMF0sIHBvc2l0aW9uWzFdLCBwb3NpdGlvblsyXSk7CiAgICBib2R5LnF1YXRlcm5pb24uc2V0RnJvbUV1bGVyKHJvdGF0aW9uWzBdLCByb3RhdGlvblsxXSwgcm90YXRpb25bMl0pOwogICAgYm9keS52ZWxvY2l0eS5zZXQodmVsb2NpdHlbMF0sIHZlbG9jaXR5WzFdLCB2ZWxvY2l0eVsyXSk7CiAgICBib2R5LmFuZ3VsYXJWZWxvY2l0eS5zZXQoYW5ndWxhclZlbG9jaXR5WzBdLCBhbmd1bGFyVmVsb2NpdHlbMV0sIGFuZ3VsYXJWZWxvY2l0eVsyXSk7CiAgICBib2R5LmxpbmVhckZhY3Rvci5zZXQobGluZWFyRmFjdG9yWzBdLCBsaW5lYXJGYWN0b3JbMV0sIGxpbmVhckZhY3RvclsyXSk7CiAgICBib2R5LmFuZ3VsYXJGYWN0b3Iuc2V0KGFuZ3VsYXJGYWN0b3JbMF0sIGFuZ3VsYXJGYWN0b3JbMV0sIGFuZ3VsYXJGYWN0b3JbMl0pOwogICAgcmV0dXJuIGJvZHk7CiAgfTsKCiAgdmFyIHByb3BzVG9Cb2R5JDEgPSBwcm9wc1RvQm9keTsKCiAgY29uc3Qgc3RhdGUgPSB7CiAgICBib2RpZXM6IHt9LAogICAgdmVoaWNsZXM6IHt9LAogICAgc3ByaW5nczoge30sCiAgICBzcHJpbmdJbnN0YW5jZXM6IHt9LAogICAgcmF5czoge30sCiAgICB3b3JsZDogbmV3IFdvcmxkKCksCiAgICBjb25maWc6IHsKICAgICAgc3RlcDogMSAvIDYwCiAgICB9LAogICAgc3Vic2NyaXB0aW9uczoge30sCiAgICBib2RpZXNOZWVkU3luY2luZzogZmFsc2UsCiAgICBsYXN0Q2FsbFRpbWU6IHVuZGVmaW5lZAogIH07CgogIGZ1bmN0aW9uIHN5bmNCb2RpZXMoKSB7CiAgICBzdGF0ZS5ib2RpZXNOZWVkU3luY2luZyA9IHRydWU7CiAgICBzdGF0ZS5ib2RpZXMgPSBzdGF0ZS53b3JsZC5ib2RpZXMucmVkdWNlKChhY2MsIGJvZHkpID0+ICh7IC4uLmFjYywKICAgICAgW2JvZHkudXVpZF06IGJvZHkKICAgIH0pLCB7fSk7CiAgfQoKICBmdW5jdGlvbiBlbWl0QmVnaW5Db250YWN0KF9yZWYpIHsKICAgIGxldCB7CiAgICAgIGJvZHlBLAogICAgICBib2R5QgogICAgfSA9IF9yZWY7CiAgICBpZiAoIWJvZHlBIHx8ICFib2R5QikgcmV0dXJuOwogICAgc2VsZi5wb3N0TWVzc2FnZSh7CiAgICAgIG9wOiAnZXZlbnQnLAogICAgICB0eXBlOiAnY29sbGlkZUJlZ2luJywKICAgICAgYm9keUE6IGJvZHlBLnV1aWQsCiAgICAgIGJvZHlCOiBib2R5Qi51dWlkCiAgICB9KTsKICB9CgogIGZ1bmN0aW9uIGVtaXRFbmRDb250YWN0KF9yZWYyKSB7CiAgICBsZXQgewogICAgICBib2R5QSwKICAgICAgYm9keUIKICAgIH0gPSBfcmVmMjsKICAgIGlmICghYm9keUEgfHwgIWJvZHlCKSByZXR1cm47CiAgICBzZWxmLnBvc3RNZXNzYWdlKHsKICAgICAgb3A6ICdldmVudCcsCiAgICAgIHR5cGU6ICdjb2xsaWRlRW5kJywKICAgICAgYm9keUE6IGJvZHlBLnV1aWQsCiAgICAgIGJvZHlCOiBib2R5Qi51dWlkCiAgICB9KTsKICB9CgogIHNlbGYub25tZXNzYWdlID0gZSA9PiB7CiAgICBjb25zdCB7CiAgICAgIG9wLAogICAgICB1dWlkLAogICAgICB0eXBlLAogICAgICBwb3NpdGlvbnMsCiAgICAgIHF1YXRlcm5pb25zLAogICAgICBwcm9wcwogICAgfSA9IGUuZGF0YTsKICAgIGNvbnN0IGJyb2FkcGhhc2VzID0gewogICAgICBOYWl2ZUJyb2FkcGhhc2UsCiAgICAgIFNBUEJyb2FkcGhhc2UKICAgIH07CgogICAgc3dpdGNoIChvcCkgewogICAgICBjYXNlICdpbml0JzoKICAgICAgICB7CiAgICAgICAgICBjb25zdCB7CiAgICAgICAgICAgIGdyYXZpdHksCiAgICAgICAgICAgIHRvbGVyYW5jZSwKICAgICAgICAgICAgc3RlcCwKICAgICAgICAgICAgaXRlcmF0aW9ucywKICAgICAgICAgICAgYWxsb3dTbGVlcCwKICAgICAgICAgICAgYnJvYWRwaGFzZSwKICAgICAgICAgICAgYXhpc0luZGV4LAogICAgICAgICAgICBkZWZhdWx0Q29udGFjdE1hdGVyaWFsLAogICAgICAgICAgICBxdWF0Tm9ybWFsaXplRmFzdCwKICAgICAgICAgICAgcXVhdE5vcm1hbGl6ZVNraXAsCiAgICAgICAgICAgIHNvbHZlcgogICAgICAgICAgfSA9IHByb3BzOwogICAgICAgICAgc3RhdGUud29ybGQuYWxsb3dTbGVlcCA9IGFsbG93U2xlZXA7CiAgICAgICAgICBzdGF0ZS53b3JsZC5ncmF2aXR5LnNldChncmF2aXR5WzBdLCBncmF2aXR5WzFdLCBncmF2aXR5WzJdKTsKICAgICAgICAgIHN0YXRlLndvcmxkLnF1YXROb3JtYWxpemVGYXN0ID0gcXVhdE5vcm1hbGl6ZUZhc3Q7CiAgICAgICAgICBzdGF0ZS53b3JsZC5xdWF0Tm9ybWFsaXplU2tpcCA9IHF1YXROb3JtYWxpemVTa2lwOwoKICAgICAgICAgIGlmIChzb2x2ZXIgPT09ICdTcGxpdCcpIHsKICAgICAgICAgICAgc3RhdGUud29ybGQuc29sdmVyID0gbmV3IFNwbGl0U29sdmVyKG5ldyBHU1NvbHZlcigpKTsKICAgICAgICAgIH0KCiAgICAgICAgICBzdGF0ZS53b3JsZC5zb2x2ZXIudG9sZXJhbmNlID0gdG9sZXJhbmNlOwogICAgICAgICAgc3RhdGUud29ybGQuc29sdmVyLml0ZXJhdGlvbnMgPSBpdGVyYXRpb25zOwogICAgICAgICAgc3RhdGUud29ybGQuYnJvYWRwaGFzZSA9IG5ldyAoYnJvYWRwaGFzZXNbYnJvYWRwaGFzZSArICdCcm9hZHBoYXNlJ10gfHwgTmFpdmVCcm9hZHBoYXNlKShzdGF0ZS53b3JsZCk7CiAgICAgICAgICBzdGF0ZS53b3JsZC5icm9hZHBoYXNlLmF4aXNJbmRleCA9IGF4aXNJbmRleCA9PT0gdW5kZWZpbmVkIHx8IGF4aXNJbmRleCA9PT0gbnVsbCA/IDAgOiBheGlzSW5kZXg7CiAgICAgICAgICBzdGF0ZS53b3JsZC5hZGRFdmVudExpc3RlbmVyKCdiZWdpbkNvbnRhY3QnLCBlbWl0QmVnaW5Db250YWN0KTsKICAgICAgICAgIHN0YXRlLndvcmxkLmFkZEV2ZW50TGlzdGVuZXIoJ2VuZENvbnRhY3QnLCBlbWl0RW5kQ29udGFjdCk7CiAgICAgICAgICBPYmplY3QuYXNzaWduKHN0YXRlLndvcmxkLmRlZmF1bHRDb250YWN0TWF0ZXJpYWwsIGRlZmF1bHRDb250YWN0TWF0ZXJpYWwpOwogICAgICAgICAgc3RhdGUuY29uZmlnLnN0ZXAgPSBzdGVwOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgfQoKICAgICAgY2FzZSAnc3RlcCc6CiAgICAgICAgewogICAgICAgICAgY29uc3Qgbm93ID0gcGVyZm9ybWFuY2Uubm93KCkgLyAxMDAwOwoKICAgICAgICAgIGlmICghc3RhdGUubGFzdENhbGxUaW1lKSB7CiAgICAgICAgICAgIHN0YXRlLndvcmxkLnN0ZXAoc3RhdGUuY29uZmlnLnN0ZXApOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgY29uc3QgdGltZVNpbmNlTGFzdENhbGwgPSBub3cgLSBzdGF0ZS5sYXN0Q2FsbFRpbWU7CiAgICAgICAgICAgIHN0YXRlLndvcmxkLnN0ZXAoc3RhdGUuY29uZmlnLnN0ZXAsIHRpbWVTaW5jZUxhc3RDYWxsKTsKICAgICAgICAgIH0KCiAgICAgICAgICBzdGF0ZS5sYXN0Q2FsbFRpbWUgPSBub3c7CiAgICAgICAgICBjb25zdCBudW1iZXJPZkJvZGllcyA9IHN0YXRlLndvcmxkLmJvZGllcy5sZW5ndGg7CgogICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBudW1iZXJPZkJvZGllczsgaSsrKSB7CiAgICAgICAgICAgIGxldCBiID0gc3RhdGUud29ybGQuYm9kaWVzW2ldLAogICAgICAgICAgICAgICAgcCA9IGIucG9zaXRpb24sCiAgICAgICAgICAgICAgICBxID0gYi5xdWF0ZXJuaW9uOwogICAgICAgICAgICBwb3NpdGlvbnNbMyAqIGkgKyAwXSA9IHAueDsKICAgICAgICAgICAgcG9zaXRpb25zWzMgKiBpICsgMV0gPSBwLnk7CiAgICAgICAgICAgIHBvc2l0aW9uc1szICogaSArIDJdID0gcC56OwogICAgICAgICAgICBxdWF0ZXJuaW9uc1s0ICogaSArIDBdID0gcS54OwogICAgICAgICAgICBxdWF0ZXJuaW9uc1s0ICogaSArIDFdID0gcS55OwogICAgICAgICAgICBxdWF0ZXJuaW9uc1s0ICogaSArIDJdID0gcS56OwogICAgICAgICAgICBxdWF0ZXJuaW9uc1s0ICogaSArIDNdID0gcS53OwogICAgICAgICAgfQoKICAgICAgICAgIGNvbnN0IG9ic2VydmF0aW9ucyA9IFtdOwoKICAgICAgICAgIGZvciAoY29uc3QgaWQgb2YgT2JqZWN0LmtleXMoc3RhdGUuc3Vic2NyaXB0aW9ucykpIHsKICAgICAgICAgICAgbGV0IFt1dWlkLCB0eXBlLCB0YXJnZXQgPSAnYm9kaWVzJ10gPSBzdGF0ZS5zdWJzY3JpcHRpb25zW2lkXTsKICAgICAgICAgICAgbGV0IG9iamVjdCA9IHN0YXRlW3RhcmdldF07CiAgICAgICAgICAgIGlmICghb2JqZWN0IHx8ICFvYmplY3RbdXVpZF0pIGNvbnRpbnVlOwogICAgICAgICAgICBsZXQgdmFsdWUgPSBvYmplY3RbdXVpZF1bdHlwZV07CiAgICAgICAgICAgIGlmICh2YWx1ZSBpbnN0YW5jZW9mIFZlYzMgfHwgdmFsdWUgaW5zdGFuY2VvZiBRdWF0ZXJuaW9uKSB2YWx1ZSA9IHZhbHVlLnRvQXJyYXkoKTsKICAgICAgICAgICAgb2JzZXJ2YXRpb25zLnB1c2goW2lkLCB2YWx1ZSwgdHlwZV0pOwogICAgICAgICAgfQoKICAgICAgICAgIGNvbnN0IG1lc3NhZ2UgPSB7CiAgICAgICAgICAgIG9wOiAnZnJhbWUnLAogICAgICAgICAgICBwb3NpdGlvbnMsCiAgICAgICAgICAgIHF1YXRlcm5pb25zLAogICAgICAgICAgICBvYnNlcnZhdGlvbnMsCiAgICAgICAgICAgIGFjdGl2ZTogc3RhdGUud29ybGQuaGFzQWN0aXZlQm9kaWVzCiAgICAgICAgICB9OwoKICAgICAgICAgIGlmIChzdGF0ZS5ib2RpZXNOZWVkU3luY2luZykgewogICAgICAgICAgICBtZXNzYWdlLmJvZGllcyA9IHN0YXRlLndvcmxkLmJvZGllcy5tYXAoYm9keSA9PiBib2R5LnV1aWQpOwogICAgICAgICAgICBzdGF0ZS5ib2RpZXNOZWVkU3luY2luZyA9IGZhbHNlOwogICAgICAgICAgfQoKICAgICAgICAgIHNlbGYucG9zdE1lc3NhZ2UobWVzc2FnZSwgW3Bvc2l0aW9ucy5idWZmZXIsIHF1YXRlcm5pb25zLmJ1ZmZlcl0pOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgfQoKICAgICAgY2FzZSAnYWRkQm9kaWVzJzoKICAgICAgICB7CiAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHV1aWQubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgY29uc3QgYm9keSA9IHByb3BzVG9Cb2R5JDEodXVpZFtpXSwgcHJvcHNbaV0sIHR5cGUpOwogICAgICAgICAgICBzdGF0ZS53b3JsZC5hZGRCb2R5KGJvZHkpOwogICAgICAgICAgICBpZiAocHJvcHNbaV0ub25Db2xsaWRlKSBib2R5LmFkZEV2ZW50TGlzdGVuZXIoJ2NvbGxpZGUnLCBfcmVmMyA9PiB7CiAgICAgICAgICAgICAgbGV0IHsKICAgICAgICAgICAgICAgIHR5cGUsCiAgICAgICAgICAgICAgICBib2R5LAogICAgICAgICAgICAgICAgdGFyZ2V0LAogICAgICAgICAgICAgICAgY29udGFjdAogICAgICAgICAgICAgIH0gPSBfcmVmMzsKICAgICAgICAgICAgICBjb25zdCB7CiAgICAgICAgICAgICAgICBuaSwKICAgICAgICAgICAgICAgIHJpLAogICAgICAgICAgICAgICAgcmosCiAgICAgICAgICAgICAgICBiaSwKICAgICAgICAgICAgICAgIGJqLAogICAgICAgICAgICAgICAgaWQKICAgICAgICAgICAgICB9ID0gY29udGFjdDsKICAgICAgICAgICAgICBjb25zdCBjb250YWN0UG9pbnQgPSBiaS5wb3NpdGlvbi52YWRkKHJpKTsKICAgICAgICAgICAgICBjb25zdCBjb250YWN0Tm9ybWFsID0gYmkgPT09IGJvZHkgPyBuaSA6IG5pLnNjYWxlKC0xKTsKICAgICAgICAgICAgICBzZWxmLnBvc3RNZXNzYWdlKHsKICAgICAgICAgICAgICAgIG9wOiAnZXZlbnQnLAogICAgICAgICAgICAgICAgdHlwZSwKICAgICAgICAgICAgICAgIGJvZHk6IGJvZHkudXVpZCwKICAgICAgICAgICAgICAgIHRhcmdldDogdGFyZ2V0LnV1aWQsCiAgICAgICAgICAgICAgICBjb250YWN0OiB7CiAgICAgICAgICAgICAgICAgIG5pOiBuaS50b0FycmF5KCksCiAgICAgICAgICAgICAgICAgIHJpOiByaS50b0FycmF5KCksCiAgICAgICAgICAgICAgICAgIHJqOiByai50b0FycmF5KCksCiAgICAgICAgICAgICAgICAgIGJpOiBiaS51dWlkLAogICAgICAgICAgICAgICAgICBiajogYmoudXVpZCwKICAgICAgICAgICAgICAgICAgaW1wYWN0VmVsb2NpdHk6IGNvbnRhY3QuZ2V0SW1wYWN0VmVsb2NpdHlBbG9uZ05vcm1hbCgpLAogICAgICAgICAgICAgICAgICAvLyBXb3JsZCBwb3NpdGlvbiBvZiB0aGUgY29udGFjdAogICAgICAgICAgICAgICAgICBjb250YWN0UG9pbnQ6IGNvbnRhY3RQb2ludC50b0FycmF5KCksCiAgICAgICAgICAgICAgICAgIC8vIE5vcm1hbCBvZiB0aGUgY29udGFjdCwgcmVsYXRpdmUgdG8gdGhlIGNvbGxpZGluZyBib2R5CiAgICAgICAgICAgICAgICAgIGNvbnRhY3ROb3JtYWw6IGNvbnRhY3ROb3JtYWwudG9BcnJheSgpLAogICAgICAgICAgICAgICAgICBpZAogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIGNvbGxpc2lvbkZpbHRlcnM6IHsKICAgICAgICAgICAgICAgICAgYm9keUZpbHRlckdyb3VwOiBib2R5LmNvbGxpc2lvbkZpbHRlckdyb3VwLAogICAgICAgICAgICAgICAgICBib2R5RmlsdGVyTWFzazogYm9keS5jb2xsaXNpb25GaWx0ZXJNYXNrLAogICAgICAgICAgICAgICAgICB0YXJnZXRGaWx0ZXJHcm91cDogdGFyZ2V0LmNvbGxpc2lvbkZpbHRlckdyb3VwLAogICAgICAgICAgICAgICAgICB0YXJnZXRGaWx0ZXJNYXNrOiB0YXJnZXQuY29sbGlzaW9uRmlsdGVyTWFzawogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9KTsKICAgICAgICAgIH0KCiAgICAgICAgICBzeW5jQm9kaWVzKCk7CiAgICAgICAgICBicmVhazsKICAgICAgICB9CgogICAgICBjYXNlICdyZW1vdmVCb2RpZXMnOgogICAgICAgIHsKICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdXVpZC5sZW5ndGg7IGkrKykgc3RhdGUud29ybGQucmVtb3ZlQm9keShzdGF0ZS5ib2RpZXNbdXVpZFtpXV0pOwoKICAgICAgICAgIHN5bmNCb2RpZXMoKTsKICAgICAgICAgIGJyZWFrOwogICAgICAgIH0KCiAgICAgIGNhc2UgJ3N1YnNjcmliZSc6CiAgICAgICAgewogICAgICAgICAgY29uc3QgewogICAgICAgICAgICBpZCwKICAgICAgICAgICAgdHlwZSwKICAgICAgICAgICAgdGFyZ2V0CiAgICAgICAgICB9ID0gcHJvcHM7CiAgICAgICAgICBzdGF0ZS5zdWJzY3JpcHRpb25zW2lkXSA9IFt1dWlkLCB0eXBlLCB0YXJnZXRdOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgfQoKICAgICAgY2FzZSAndW5zdWJzY3JpYmUnOgogICAgICAgIHsKICAgICAgICAgIGRlbGV0ZSBzdGF0ZS5zdWJzY3JpcHRpb25zW3Byb3BzXTsKICAgICAgICAgIGJyZWFrOwogICAgICAgIH0KCiAgICAgIGNhc2UgJ3NldFBvc2l0aW9uJzoKICAgICAgICBzdGF0ZS5ib2RpZXNbdXVpZF0ucG9zaXRpb24uc2V0KHByb3BzWzBdLCBwcm9wc1sxXSwgcHJvcHNbMl0pOwogICAgICAgIGJyZWFrOwoKICAgICAgY2FzZSAnc2V0UXVhdGVybmlvbic6CiAgICAgICAgc3RhdGUuYm9kaWVzW3V1aWRdLnF1YXRlcm5pb24uc2V0KHByb3BzWzBdLCBwcm9wc1sxXSwgcHJvcHNbMl0sIHByb3BzWzNdKTsKICAgICAgICBicmVhazsKCiAgICAgIGNhc2UgJ3NldFJvdGF0aW9uJzoKICAgICAgICBzdGF0ZS5ib2RpZXNbdXVpZF0ucXVhdGVybmlvbi5zZXRGcm9tRXVsZXIocHJvcHNbMF0sIHByb3BzWzFdLCBwcm9wc1syXSk7CiAgICAgICAgYnJlYWs7CgogICAgICBjYXNlICdzZXRWZWxvY2l0eSc6CiAgICAgICAgc3RhdGUuYm9kaWVzW3V1aWRdLnZlbG9jaXR5LnNldChwcm9wc1swXSwgcHJvcHNbMV0sIHByb3BzWzJdKTsKICAgICAgICBicmVhazsKCiAgICAgIGNhc2UgJ3NldEFuZ3VsYXJWZWxvY2l0eSc6CiAgICAgICAgc3RhdGUuYm9kaWVzW3V1aWRdLmFuZ3VsYXJWZWxvY2l0eS5zZXQocHJvcHNbMF0sIHByb3BzWzFdLCBwcm9wc1syXSk7CiAgICAgICAgYnJlYWs7CgogICAgICBjYXNlICdzZXRMaW5lYXJGYWN0b3InOgogICAgICAgIHN0YXRlLmJvZGllc1t1dWlkXS5saW5lYXJGYWN0b3Iuc2V0KHByb3BzWzBdLCBwcm9wc1sxXSwgcHJvcHNbMl0pOwogICAgICAgIGJyZWFrOwoKICAgICAgY2FzZSAnc2V0QW5ndWxhckZhY3Rvcic6CiAgICAgICAgc3RhdGUuYm9kaWVzW3V1aWRdLmFuZ3VsYXJGYWN0b3Iuc2V0KHByb3BzWzBdLCBwcm9wc1sxXSwgcHJvcHNbMl0pOwogICAgICAgIGJyZWFrOwoKICAgICAgY2FzZSAnc2V0TWFzcyc6CiAgICAgICAgLy8gYXNzdW1lIHRoYXQgYW4gdXBkYXRlIGZyb20gemVyby1tYXNzIGltcGxpZXMgYSBuZWVkIGZvciBkeW5hbWljcyBvbiBzdGF0aWMgb2JqLgogICAgICAgIGlmIChwcm9wcyAhPT0gMCAmJiBzdGF0ZS5ib2RpZXNbdXVpZF0udHlwZSA9PT0gMCkgc3RhdGUuYm9kaWVzW3V1aWRdLnR5cGUgPSAxOwogICAgICAgIHN0YXRlLmJvZGllc1t1dWlkXS5tYXNzID0gcHJvcHM7CiAgICAgICAgc3RhdGUuYm9kaWVzW3V1aWRdLnVwZGF0ZU1hc3NQcm9wZXJ0aWVzKCk7CiAgICAgICAgYnJlYWs7CgogICAgICBjYXNlICdzZXRMaW5lYXJEYW1waW5nJzoKICAgICAgICBzdGF0ZS5ib2RpZXNbdXVpZF0ubGluZWFyRGFtcGluZyA9IHByb3BzOwogICAgICAgIGJyZWFrOwoKICAgICAgY2FzZSAnc2V0QW5ndWxhckRhbXBpbmcnOgogICAgICAgIHN0YXRlLmJvZGllc1t1dWlkXS5hbmd1bGFyRGFtcGluZyA9IHByb3BzOwogICAgICAgIGJyZWFrOwoKICAgICAgY2FzZSAnc2V0QWxsb3dTbGVlcCc6CiAgICAgICAgc3RhdGUuYm9kaWVzW3V1aWRdLmFsbG93U2xlZXAgPSBwcm9wczsKICAgICAgICBicmVhazsKCiAgICAgIGNhc2UgJ3NldFNsZWVwU3BlZWRMaW1pdCc6CiAgICAgICAgc3RhdGUuYm9kaWVzW3V1aWRdLnNsZWVwU3BlZWRMaW1pdCA9IHByb3BzOwogICAgICAgIGJyZWFrOwoKICAgICAgY2FzZSAnc2V0U2xlZXBUaW1lTGltaXQnOgogICAgICAgIHN0YXRlLmJvZGllc1t1dWlkXS5zbGVlcFRpbWVMaW1pdCA9IHByb3BzOwogICAgICAgIGJyZWFrOwoKICAgICAgY2FzZSAnc2V0Q29sbGlzaW9uRmlsdGVyR3JvdXAnOgogICAgICAgIHN0YXRlLmJvZGllc1t1dWlkXS5jb2xsaXNpb25GaWx0ZXJHcm91cCA9IHByb3BzOwogICAgICAgIGJyZWFrOwoKICAgICAgY2FzZSAnc2V0Q29sbGlzaW9uRmlsdGVyTWFzayc6CiAgICAgICAgc3RhdGUuYm9kaWVzW3V1aWRdLmNvbGxpc2lvbkZpbHRlck1hc2sgPSBwcm9wczsKICAgICAgICBicmVhazsKCiAgICAgIGNhc2UgJ3NldENvbGxpc2lvblJlc3BvbnNlJzoKICAgICAgICBzdGF0ZS5ib2RpZXNbdXVpZF0uY29sbGlzaW9uUmVzcG9uc2UgPSBwcm9wczsKICAgICAgICBicmVhazsKCiAgICAgIGNhc2UgJ3NldEZpeGVkUm90YXRpb24nOgogICAgICAgIHN0YXRlLmJvZGllc1t1dWlkXS5maXhlZFJvdGF0aW9uID0gcHJvcHM7CiAgICAgICAgYnJlYWs7CgogICAgICBjYXNlICdzZXRJc1RyaWdnZXInOgogICAgICAgIHN0YXRlLmJvZGllc1t1dWlkXS5pc1RyaWdnZXIgPSBwcm9wczsKICAgICAgICBicmVhazsKCiAgICAgIGNhc2UgJ3NldEdyYXZpdHknOgogICAgICAgIHN0YXRlLndvcmxkLmdyYXZpdHkuc2V0KHByb3BzWzBdLCBwcm9wc1sxXSwgcHJvcHNbMl0pOwogICAgICAgIGJyZWFrOwoKICAgICAgY2FzZSAnc2V0VG9sZXJhbmNlJzoKICAgICAgICBzdGF0ZS53b3JsZC5zb2x2ZXIudG9sZXJhbmNlID0gcHJvcHM7CiAgICAgICAgYnJlYWs7CgogICAgICBjYXNlICdzZXRTdGVwJzoKICAgICAgICBzdGF0ZS5jb25maWcuc3RlcCA9IHByb3BzOwogICAgICAgIGJyZWFrOwoKICAgICAgY2FzZSAnc2V0SXRlcmF0aW9ucyc6CiAgICAgICAgc3RhdGUud29ybGQuc29sdmVyLml0ZXJhdGlvbnMgPSBwcm9wczsKICAgICAgICBicmVhazsKCiAgICAgIGNhc2UgJ3NldEJyb2FkcGhhc2UnOgogICAgICAgIHN0YXRlLndvcmxkLmJyb2FkcGhhc2UgPSBuZXcgKGJyb2FkcGhhc2VzW3Byb3BzICsgJ0Jyb2FkcGhhc2UnXSB8fCBOYWl2ZUJyb2FkcGhhc2UpKHN0YXRlLndvcmxkKTsKICAgICAgICBicmVhazsKCiAgICAgIGNhc2UgJ3NldEF4aXNJbmRleCc6CiAgICAgICAgc3RhdGUud29ybGQuYnJvYWRwaGFzZS5heGlzSW5kZXggPSBwcm9wcyA9PT0gdW5kZWZpbmVkIHx8IHByb3BzID09PSBudWxsID8gMCA6IHByb3BzOwogICAgICAgIGJyZWFrOwoKICAgICAgY2FzZSAnYXBwbHlGb3JjZSc6CiAgICAgICAgc3RhdGUuYm9kaWVzW3V1aWRdLmFwcGx5Rm9yY2UobmV3IFZlYzMoLi4ucHJvcHNbMF0pLCBuZXcgVmVjMyguLi5wcm9wc1sxXSkpOwogICAgICAgIGJyZWFrOwoKICAgICAgY2FzZSAnYXBwbHlJbXB1bHNlJzoKICAgICAgICBzdGF0ZS5ib2RpZXNbdXVpZF0uYXBwbHlJbXB1bHNlKG5ldyBWZWMzKC4uLnByb3BzWzBdKSwgbmV3IFZlYzMoLi4ucHJvcHNbMV0pKTsKICAgICAgICBicmVhazsKCiAgICAgIGNhc2UgJ2FwcGx5TG9jYWxGb3JjZSc6CiAgICAgICAgc3RhdGUuYm9kaWVzW3V1aWRdLmFwcGx5TG9jYWxGb3JjZShuZXcgVmVjMyguLi5wcm9wc1swXSksIG5ldyBWZWMzKC4uLnByb3BzWzFdKSk7CiAgICAgICAgYnJlYWs7CgogICAgICBjYXNlICdhcHBseUxvY2FsSW1wdWxzZSc6CiAgICAgICAgc3RhdGUuYm9kaWVzW3V1aWRdLmFwcGx5TG9jYWxJbXB1bHNlKG5ldyBWZWMzKC4uLnByb3BzWzBdKSwgbmV3IFZlYzMoLi4ucHJvcHNbMV0pKTsKICAgICAgICBicmVhazsKCiAgICAgIGNhc2UgJ2FwcGx5VG9ycXVlJzoKICAgICAgICBzdGF0ZS5ib2RpZXNbdXVpZF0uYXBwbHlUb3JxdWUobmV3IFZlYzMoLi4ucHJvcHNbMF0pKTsKICAgICAgICBicmVhazsKCiAgICAgIGNhc2UgJ2FkZENvbnN0cmFpbnQnOgogICAgICAgIHsKICAgICAgICAgIGNvbnN0IFtib2R5QSwgYm9keUIsIG9wdG5zXSA9IHByb3BzOwogICAgICAgICAgbGV0IHsKICAgICAgICAgICAgcGl2b3RBLAogICAgICAgICAgICBwaXZvdEIsCiAgICAgICAgICAgIGF4aXNBLAogICAgICAgICAgICBheGlzQiwKICAgICAgICAgICAgLi4ub3B0aW9ucwogICAgICAgICAgfSA9IG9wdG5zOyAvLyBpcyB0aGVyZSBhIGJldHRlciB3YXkgdG8gZW5mb3JjZSBkZWZhdWx0cz8KCiAgICAgICAgICBwaXZvdEEgPSBBcnJheS5pc0FycmF5KHBpdm90QSkgPyBuZXcgVmVjMyguLi5waXZvdEEpIDogdW5kZWZpbmVkOwogICAgICAgICAgcGl2b3RCID0gQXJyYXkuaXNBcnJheShwaXZvdEIpID8gbmV3IFZlYzMoLi4ucGl2b3RCKSA6IHVuZGVmaW5lZDsKICAgICAgICAgIGF4aXNBID0gQXJyYXkuaXNBcnJheShheGlzQSkgPyBuZXcgVmVjMyguLi5heGlzQSkgOiB1bmRlZmluZWQ7CiAgICAgICAgICBheGlzQiA9IEFycmF5LmlzQXJyYXkoYXhpc0IpID8gbmV3IFZlYzMoLi4uYXhpc0IpIDogdW5kZWZpbmVkOwogICAgICAgICAgbGV0IGNvbnN0cmFpbnQ7CgogICAgICAgICAgc3dpdGNoICh0eXBlKSB7CiAgICAgICAgICAgIGNhc2UgJ1BvaW50VG9Qb2ludCc6CiAgICAgICAgICAgICAgY29uc3RyYWludCA9IG5ldyBQb2ludFRvUG9pbnRDb25zdHJhaW50KHN0YXRlLmJvZGllc1tib2R5QV0sIHBpdm90QSwgc3RhdGUuYm9kaWVzW2JvZHlCXSwgcGl2b3RCLCBvcHRucy5tYXhGb3JjZSk7CiAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICBjYXNlICdDb25lVHdpc3QnOgogICAgICAgICAgICAgIGNvbnN0cmFpbnQgPSBuZXcgQ29uZVR3aXN0Q29uc3RyYWludChzdGF0ZS5ib2RpZXNbYm9keUFdLCBzdGF0ZS5ib2RpZXNbYm9keUJdLCB7CiAgICAgICAgICAgICAgICBwaXZvdEEsCiAgICAgICAgICAgICAgICBwaXZvdEIsCiAgICAgICAgICAgICAgICBheGlzQSwKICAgICAgICAgICAgICAgIGF4aXNCLAogICAgICAgICAgICAgICAgLi4ub3B0aW9ucwogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgY2FzZSAnSGluZ2UnOgogICAgICAgICAgICAgIGNvbnN0cmFpbnQgPSBuZXcgSGluZ2VDb25zdHJhaW50KHN0YXRlLmJvZGllc1tib2R5QV0sIHN0YXRlLmJvZGllc1tib2R5Ql0sIHsKICAgICAgICAgICAgICAgIHBpdm90QSwKICAgICAgICAgICAgICAgIHBpdm90QiwKICAgICAgICAgICAgICAgIGF4aXNBLAogICAgICAgICAgICAgICAgYXhpc0IsCiAgICAgICAgICAgICAgICAuLi5vcHRpb25zCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICBjYXNlICdEaXN0YW5jZSc6CiAgICAgICAgICAgICAgY29uc3RyYWludCA9IG5ldyBEaXN0YW5jZUNvbnN0cmFpbnQoc3RhdGUuYm9kaWVzW2JvZHlBXSwgc3RhdGUuYm9kaWVzW2JvZHlCXSwgb3B0bnMuZGlzdGFuY2UsIG9wdG5zLm1heEZvcmNlKTsKICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgIGNhc2UgJ0xvY2snOgogICAgICAgICAgICAgIGNvbnN0cmFpbnQgPSBuZXcgTG9ja0NvbnN0cmFpbnQoc3RhdGUuYm9kaWVzW2JvZHlBXSwgc3RhdGUuYm9kaWVzW2JvZHlCXSwgb3B0bnMpOwogICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgZGVmYXVsdDoKICAgICAgICAgICAgICBjb25zdHJhaW50ID0gbmV3IENvbnN0cmFpbnQoc3RhdGUuYm9kaWVzW2JvZHlBXSwgc3RhdGUuYm9kaWVzW2JvZHlCXSwgb3B0bnMpOwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgfQoKICAgICAgICAgIGNvbnN0cmFpbnQudXVpZCA9IHV1aWQ7CiAgICAgICAgICBzdGF0ZS53b3JsZC5hZGRDb25zdHJhaW50KGNvbnN0cmFpbnQpOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgfQoKICAgICAgY2FzZSAncmVtb3ZlQ29uc3RyYWludCc6CiAgICAgICAgc3RhdGUud29ybGQuY29uc3RyYWludHMuZmlsdGVyKF9yZWY0ID0+IHsKICAgICAgICAgIGxldCB7CiAgICAgICAgICAgIHV1aWQ6IHRoaXNJZAogICAgICAgICAgfSA9IF9yZWY0OwogICAgICAgICAgcmV0dXJuIHRoaXNJZCA9PT0gdXVpZDsKICAgICAgICB9KS5tYXAoYyA9PiBzdGF0ZS53b3JsZC5yZW1vdmVDb25zdHJhaW50KGMpKTsKICAgICAgICBicmVhazsKCiAgICAgIGNhc2UgJ2VuYWJsZUNvbnN0cmFpbnQnOgogICAgICAgIHN0YXRlLndvcmxkLmNvbnN0cmFpbnRzLmZpbHRlcihfcmVmNSA9PiB7CiAgICAgICAgICBsZXQgewogICAgICAgICAgICB1dWlkOiB0aGlzSWQKICAgICAgICAgIH0gPSBfcmVmNTsKICAgICAgICAgIHJldHVybiB0aGlzSWQgPT09IHV1aWQ7CiAgICAgICAgfSkubWFwKGMgPT4gYy5lbmFibGUoKSk7CiAgICAgICAgYnJlYWs7CgogICAgICBjYXNlICdkaXNhYmxlQ29uc3RyYWludCc6CiAgICAgICAgc3RhdGUud29ybGQuY29uc3RyYWludHMuZmlsdGVyKF9yZWY2ID0+IHsKICAgICAgICAgIGxldCB7CiAgICAgICAgICAgIHV1aWQ6IHRoaXNJZAogICAgICAgICAgfSA9IF9yZWY2OwogICAgICAgICAgcmV0dXJuIHRoaXNJZCA9PT0gdXVpZDsKICAgICAgICB9KS5tYXAoYyA9PiBjLmRpc2FibGUoKSk7CiAgICAgICAgYnJlYWs7CgogICAgICBjYXNlICdlbmFibGVDb25zdHJhaW50TW90b3InOgogICAgICAgIHN0YXRlLndvcmxkLmNvbnN0cmFpbnRzLmZpbHRlcihfcmVmNyA9PiB7CiAgICAgICAgICBsZXQgewogICAgICAgICAgICB1dWlkOiB0aGlzSWQKICAgICAgICAgIH0gPSBfcmVmNzsKICAgICAgICAgIHJldHVybiB0aGlzSWQgPT09IHV1aWQ7CiAgICAgICAgfSkubWFwKGMgPT4gYy5lbmFibGVNb3RvcigpKTsKICAgICAgICBicmVhazsKCiAgICAgIGNhc2UgJ2Rpc2FibGVDb25zdHJhaW50TW90b3InOgogICAgICAgIHN0YXRlLndvcmxkLmNvbnN0cmFpbnRzLmZpbHRlcihfcmVmOCA9PiB7CiAgICAgICAgICBsZXQgewogICAgICAgICAgICB1dWlkOiB0aGlzSWQKICAgICAgICAgIH0gPSBfcmVmODsKICAgICAgICAgIHJldHVybiB0aGlzSWQgPT09IHV1aWQ7CiAgICAgICAgfSkubWFwKGMgPT4gYy5kaXNhYmxlTW90b3IoKSk7CiAgICAgICAgYnJlYWs7CgogICAgICBjYXNlICdzZXRDb25zdHJhaW50TW90b3JTcGVlZCc6CiAgICAgICAgc3RhdGUud29ybGQuY29uc3RyYWludHMuZmlsdGVyKF9yZWY5ID0+IHsKICAgICAgICAgIGxldCB7CiAgICAgICAgICAgIHV1aWQ6IHRoaXNJZAogICAgICAgICAgfSA9IF9yZWY5OwogICAgICAgICAgcmV0dXJuIHRoaXNJZCA9PT0gdXVpZDsKICAgICAgICB9KS5tYXAoYyA9PiBjLnNldE1vdG9yU3BlZWQocHJvcHMpKTsKICAgICAgICBicmVhazsKCiAgICAgIGNhc2UgJ3NldENvbnN0cmFpbnRNb3Rvck1heEZvcmNlJzoKICAgICAgICBzdGF0ZS53b3JsZC5jb25zdHJhaW50cy5maWx0ZXIoX3JlZjEwID0+IHsKICAgICAgICAgIGxldCB7CiAgICAgICAgICAgIHV1aWQ6IHRoaXNJZAogICAgICAgICAgfSA9IF9yZWYxMDsKICAgICAgICAgIHJldHVybiB0aGlzSWQgPT09IHV1aWQ7CiAgICAgICAgfSkubWFwKGMgPT4gYy5zZXRNb3Rvck1heEZvcmNlKHByb3BzKSk7CiAgICAgICAgYnJlYWs7CgogICAgICBjYXNlICdhZGRTcHJpbmcnOgogICAgICAgIHsKICAgICAgICAgIGNvbnN0IFtib2R5QSwgYm9keUIsIG9wdG5zXSA9IHByb3BzOwogICAgICAgICAgbGV0IHsKICAgICAgICAgICAgd29ybGRBbmNob3JBLAogICAgICAgICAgICB3b3JsZEFuY2hvckIsCiAgICAgICAgICAgIGxvY2FsQW5jaG9yQSwKICAgICAgICAgICAgbG9jYWxBbmNob3JCLAogICAgICAgICAgICByZXN0TGVuZ3RoLAogICAgICAgICAgICBzdGlmZm5lc3MsCiAgICAgICAgICAgIGRhbXBpbmcKICAgICAgICAgIH0gPSBvcHRuczsKICAgICAgICAgIHdvcmxkQW5jaG9yQSA9IEFycmF5LmlzQXJyYXkod29ybGRBbmNob3JBKSA/IG5ldyBWZWMzKC4uLndvcmxkQW5jaG9yQSkgOiB1bmRlZmluZWQ7CiAgICAgICAgICB3b3JsZEFuY2hvckIgPSBBcnJheS5pc0FycmF5KHdvcmxkQW5jaG9yQikgPyBuZXcgVmVjMyguLi53b3JsZEFuY2hvckIpIDogdW5kZWZpbmVkOwogICAgICAgICAgbG9jYWxBbmNob3JBID0gQXJyYXkuaXNBcnJheShsb2NhbEFuY2hvckEpID8gbmV3IFZlYzMoLi4ubG9jYWxBbmNob3JBKSA6IHVuZGVmaW5lZDsKICAgICAgICAgIGxvY2FsQW5jaG9yQiA9IEFycmF5LmlzQXJyYXkobG9jYWxBbmNob3JCKSA/IG5ldyBWZWMzKC4uLmxvY2FsQW5jaG9yQikgOiB1bmRlZmluZWQ7CiAgICAgICAgICBsZXQgc3ByaW5nID0gbmV3IFNwcmluZyhzdGF0ZS5ib2RpZXNbYm9keUFdLCBzdGF0ZS5ib2RpZXNbYm9keUJdLCB7CiAgICAgICAgICAgIHdvcmxkQW5jaG9yQSwKICAgICAgICAgICAgd29ybGRBbmNob3JCLAogICAgICAgICAgICBsb2NhbEFuY2hvckEsCiAgICAgICAgICAgIGxvY2FsQW5jaG9yQiwKICAgICAgICAgICAgcmVzdExlbmd0aCwKICAgICAgICAgICAgc3RpZmZuZXNzLAogICAgICAgICAgICBkYW1waW5nCiAgICAgICAgICB9KTsKICAgICAgICAgIHNwcmluZy51dWlkID0gdXVpZDsKCiAgICAgICAgICBsZXQgcG9zdFN0ZXBTcHJpbmcgPSAoKSA9PiBzcHJpbmcuYXBwbHlGb3JjZSgpOwoKICAgICAgICAgIHN0YXRlLnNwcmluZ3NbdXVpZF0gPSBwb3N0U3RlcFNwcmluZzsKICAgICAgICAgIHN0YXRlLnNwcmluZ0luc3RhbmNlc1t1dWlkXSA9IHNwcmluZzsgLy8gQ29tcHV0ZSB0aGUgZm9yY2UgYWZ0ZXIgZWFjaCBzdGVwCgogICAgICAgICAgc3RhdGUud29ybGQuYWRkRXZlbnRMaXN0ZW5lcigncG9zdFN0ZXAnLCBzdGF0ZS5zcHJpbmdzW3V1aWRdKTsKICAgICAgICAgIGJyZWFrOwogICAgICAgIH0KCiAgICAgIGNhc2UgJ3NldFNwcmluZ1N0aWZmbmVzcyc6CiAgICAgICAgewogICAgICAgICAgc3RhdGUuc3ByaW5nSW5zdGFuY2VzW3V1aWRdLnN0aWZmbmVzcyA9IHByb3BzOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgfQoKICAgICAgY2FzZSAnc2V0U3ByaW5nUmVzdExlbmd0aCc6CiAgICAgICAgewogICAgICAgICAgc3RhdGUuc3ByaW5nSW5zdGFuY2VzW3V1aWRdLnJlc3RMZW5ndGggPSBwcm9wczsKICAgICAgICAgIGJyZWFrOwogICAgICAgIH0KCiAgICAgIGNhc2UgJ3NldFNwcmluZ0RhbXBpbmcnOgogICAgICAgIHsKICAgICAgICAgIHN0YXRlLnNwcmluZ0luc3RhbmNlc1t1dWlkXS5kYW1waW5nID0gcHJvcHM7CiAgICAgICAgICBicmVhazsKICAgICAgICB9CgogICAgICBjYXNlICdyZW1vdmVTcHJpbmcnOgogICAgICAgIHsKICAgICAgICAgIHN0YXRlLndvcmxkLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3Bvc3RTdGVwJywgc3RhdGUuc3ByaW5nc1t1dWlkXSk7CiAgICAgICAgICBicmVhazsKICAgICAgICB9CgogICAgICBjYXNlICdhZGRSYXknOgogICAgICAgIHsKICAgICAgICAgIGNvbnN0IHsKICAgICAgICAgICAgZnJvbSwKICAgICAgICAgICAgdG8sCiAgICAgICAgICAgIC4uLm9wdGlvbnMKICAgICAgICAgIH0gPSBwcm9wczsKICAgICAgICAgIGNvbnN0IHJheSA9IG5ldyBSYXkoZnJvbSA/IG5ldyBWZWMzKC4uLmZyb20pIDogdW5kZWZpbmVkLCB0byA/IG5ldyBWZWMzKC4uLnRvKSA6IHVuZGVmaW5lZCk7CiAgICAgICAgICBvcHRpb25zLm1vZGUgPSBSYXlbb3B0aW9ucy5tb2RlLnRvVXBwZXJDYXNlKCldOwogICAgICAgICAgb3B0aW9ucy5yZXN1bHQgPSBuZXcgUmF5Y2FzdFJlc3VsdCgpOwoKICAgICAgICAgIHN0YXRlLnJheXNbdXVpZF0gPSAoKSA9PiB7CiAgICAgICAgICAgIHJheS5pbnRlcnNlY3RXb3JsZChzdGF0ZS53b3JsZCwgb3B0aW9ucyk7CiAgICAgICAgICAgIGNvbnN0IHsKICAgICAgICAgICAgICBib2R5LAogICAgICAgICAgICAgIHNoYXBlLAogICAgICAgICAgICAgIHJheUZyb21Xb3JsZCwKICAgICAgICAgICAgICByYXlUb1dvcmxkLAogICAgICAgICAgICAgIGhpdE5vcm1hbFdvcmxkLAogICAgICAgICAgICAgIGhpdFBvaW50V29ybGQsCiAgICAgICAgICAgICAgLi4ucmVzdAogICAgICAgICAgICB9ID0gb3B0aW9ucy5yZXN1bHQ7CiAgICAgICAgICAgIHNlbGYucG9zdE1lc3NhZ2UoewogICAgICAgICAgICAgIG9wOiAnZXZlbnQnLAogICAgICAgICAgICAgIHR5cGU6ICdyYXloaXQnLAogICAgICAgICAgICAgIHJheTogewogICAgICAgICAgICAgICAgZnJvbSwKICAgICAgICAgICAgICAgIHRvLAogICAgICAgICAgICAgICAgZGlyZWN0aW9uOiByYXkuZGlyZWN0aW9uLnRvQXJyYXkoKSwKICAgICAgICAgICAgICAgIGNvbGxpc2lvbkZpbHRlckdyb3VwOiByYXkuY29sbGlzaW9uRmlsdGVyR3JvdXAsCiAgICAgICAgICAgICAgICBjb2xsaXNpb25GaWx0ZXJNYXNrOiByYXkuY29sbGlzaW9uRmlsdGVyTWFzaywKICAgICAgICAgICAgICAgIHV1aWQKICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgIGJvZHk6IGJvZHkgPyBib2R5LnV1aWQgOiBudWxsLAogICAgICAgICAgICAgIHNoYXBlOiBzaGFwZSA/IHsgLi4uc2hhcGUsCiAgICAgICAgICAgICAgICBib2R5OiBib2R5LnV1aWQKICAgICAgICAgICAgICB9IDogbnVsbCwKICAgICAgICAgICAgICByYXlGcm9tV29ybGQ6IHJheUZyb21Xb3JsZC50b0FycmF5KCksCiAgICAgICAgICAgICAgcmF5VG9Xb3JsZDogcmF5VG9Xb3JsZC50b0FycmF5KCksCiAgICAgICAgICAgICAgaGl0Tm9ybWFsV29ybGQ6IGhpdE5vcm1hbFdvcmxkLnRvQXJyYXkoKSwKICAgICAgICAgICAgICBoaXRQb2ludFdvcmxkOiBoaXRQb2ludFdvcmxkLnRvQXJyYXkoKSwKICAgICAgICAgICAgICAuLi5yZXN0CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfTsKCiAgICAgICAgICBzdGF0ZS53b3JsZC5hZGRFdmVudExpc3RlbmVyKCdwcmVTdGVwJywgc3RhdGUucmF5c1t1dWlkXSk7CiAgICAgICAgICBicmVhazsKICAgICAgICB9CgogICAgICBjYXNlICdyZW1vdmVSYXknOgogICAgICAgIHsKICAgICAgICAgIHN0YXRlLndvcmxkLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3ByZVN0ZXAnLCBzdGF0ZS5yYXlzW3V1aWRdKTsKICAgICAgICAgIGRlbGV0ZSBzdGF0ZS5yYXlzW3V1aWRdOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgfQoKICAgICAgY2FzZSAnYWRkUmF5Y2FzdFZlaGljbGUnOgogICAgICAgIHsKICAgICAgICAgIGNvbnN0IFtjaGFzc2lzQm9keSwgd2hlZWxzLCB3aGVlbEluZm9zLCBpbmRleEZvcndhcmRBeGlzLCBpbmRleFJpZ2h0QXhpcywgaW5kZXhVcEF4aXNdID0gcHJvcHM7CiAgICAgICAgICBjb25zdCB2ZWhpY2xlID0gbmV3IFJheWNhc3RWZWhpY2xlKHsKICAgICAgICAgICAgY2hhc3Npc0JvZHk6IHN0YXRlLmJvZGllc1tjaGFzc2lzQm9keV0sCiAgICAgICAgICAgIGluZGV4Rm9yd2FyZEF4aXM6IGluZGV4Rm9yd2FyZEF4aXMsCiAgICAgICAgICAgIGluZGV4UmlnaHRBeGlzOiBpbmRleFJpZ2h0QXhpcywKICAgICAgICAgICAgaW5kZXhVcEF4aXM6IGluZGV4VXBBeGlzCiAgICAgICAgICB9KTsKICAgICAgICAgIHZlaGljbGUud29ybGQgPSBzdGF0ZS53b3JsZDsKCiAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHdoZWVsSW5mb3MubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgY29uc3Qgd2hlZWxJbmZvID0gd2hlZWxJbmZvc1tpXTsKICAgICAgICAgICAgd2hlZWxJbmZvLmRpcmVjdGlvbkxvY2FsID0gbmV3IFZlYzMoLi4ud2hlZWxJbmZvLmRpcmVjdGlvbkxvY2FsKTsKICAgICAgICAgICAgd2hlZWxJbmZvLmNoYXNzaXNDb25uZWN0aW9uUG9pbnRMb2NhbCA9IG5ldyBWZWMzKC4uLndoZWVsSW5mby5jaGFzc2lzQ29ubmVjdGlvblBvaW50TG9jYWwpOwogICAgICAgICAgICB3aGVlbEluZm8uYXhsZUxvY2FsID0gbmV3IFZlYzMoLi4ud2hlZWxJbmZvLmF4bGVMb2NhbCk7CiAgICAgICAgICAgIHZlaGljbGUuYWRkV2hlZWwod2hlZWxJbmZvKTsKICAgICAgICAgIH0KCiAgICAgICAgICB2ZWhpY2xlLnByZVN0ZXAgPSAoKSA9PiB7CiAgICAgICAgICAgIHN0YXRlLnZlaGljbGVzW3V1aWRdLnVwZGF0ZVZlaGljbGUoc3RhdGUud29ybGQuZHQpOwogICAgICAgICAgfTsKCiAgICAgICAgICB2ZWhpY2xlLnBvc3RTdGVwID0gKCkgPT4gewogICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHN0YXRlLnZlaGljbGVzW3V1aWRdLndoZWVsSW5mb3MubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgICBzdGF0ZS52ZWhpY2xlc1t1dWlkXS51cGRhdGVXaGVlbFRyYW5zZm9ybShpKTsKICAgICAgICAgICAgICBjb25zdCB0ID0gc3RhdGUudmVoaWNsZXNbdXVpZF0ud2hlZWxJbmZvc1tpXS53b3JsZFRyYW5zZm9ybTsKICAgICAgICAgICAgICBjb25zdCB3aGVlbEJvZHkgPSBzdGF0ZS5ib2RpZXNbd2hlZWxzW2ldXTsKICAgICAgICAgICAgICB3aGVlbEJvZHkucG9zaXRpb24uY29weSh0LnBvc2l0aW9uKTsKICAgICAgICAgICAgICB3aGVlbEJvZHkucXVhdGVybmlvbi5jb3B5KHQucXVhdGVybmlvbik7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0sIHN0YXRlLnZlaGljbGVzW3V1aWRdID0gdmVoaWNsZTsKICAgICAgICAgIHN0YXRlLndvcmxkLmFkZEV2ZW50TGlzdGVuZXIoJ3ByZVN0ZXAnLCBzdGF0ZS52ZWhpY2xlc1t1dWlkXS5wcmVTdGVwKTsKICAgICAgICAgIHN0YXRlLndvcmxkLmFkZEV2ZW50TGlzdGVuZXIoJ3Bvc3RTdGVwJywgc3RhdGUudmVoaWNsZXNbdXVpZF0ucG9zdFN0ZXApOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgfQoKICAgICAgY2FzZSAncmVtb3ZlUmF5Y2FzdFZlaGljbGUnOgogICAgICAgIHsKICAgICAgICAgIHN0YXRlLndvcmxkLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3ByZVN0ZXAnLCBzdGF0ZS52ZWhpY2xlc1t1dWlkXS5wcmVTdGVwKTsKICAgICAgICAgIHN0YXRlLndvcmxkLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3Bvc3RTdGVwJywgc3RhdGUudmVoaWNsZXNbdXVpZF0ucG9zdFN0ZXApOwogICAgICAgICAgc3RhdGUudmVoaWNsZXNbdXVpZF0ud29ybGQgPSBudWxsOwogICAgICAgICAgZGVsZXRlIHN0YXRlLnZlaGljbGVzW3V1aWRdOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgfQoKICAgICAgY2FzZSAnc2V0UmF5Y2FzdFZlaGljbGVTdGVlcmluZ1ZhbHVlJzoKICAgICAgICB7CiAgICAgICAgICBjb25zdCBbdmFsdWUsIHdoZWVsSW5kZXhdID0gcHJvcHM7CiAgICAgICAgICBzdGF0ZS52ZWhpY2xlc1t1dWlkXS5zZXRTdGVlcmluZ1ZhbHVlKHZhbHVlLCB3aGVlbEluZGV4KTsKICAgICAgICAgIGJyZWFrOwogICAgICAgIH0KCiAgICAgIGNhc2UgJ2FwcGx5UmF5Y2FzdFZlaGljbGVFbmdpbmVGb3JjZSc6CiAgICAgICAgewogICAgICAgICAgY29uc3QgW3ZhbHVlLCB3aGVlbEluZGV4XSA9IHByb3BzOwogICAgICAgICAgc3RhdGUudmVoaWNsZXNbdXVpZF0uYXBwbHlFbmdpbmVGb3JjZSh2YWx1ZSwgd2hlZWxJbmRleCk7CiAgICAgICAgICBicmVhazsKICAgICAgICB9CgogICAgICBjYXNlICdzZXRSYXljYXN0VmVoaWNsZUJyYWtlJzoKICAgICAgICB7CiAgICAgICAgICBjb25zdCBbYnJha2UsIHdoZWVsSW5kZXhdID0gcHJvcHM7CiAgICAgICAgICBzdGF0ZS52ZWhpY2xlc1t1dWlkXS5zZXRCcmFrZShicmFrZSwgd2hlZWxJbmRleCk7CiAgICAgICAgICBicmVhazsKICAgICAgICB9CgogICAgICBjYXNlICd3YWtlVXAnOgogICAgICAgIHsKICAgICAgICAgIHN0YXRlLmJvZGllc1t1dWlkXS53YWtlVXAoKTsKICAgICAgICAgIGJyZWFrOwogICAgICAgIH0KCiAgICAgIGNhc2UgJ3NsZWVwJzoKICAgICAgICB7CiAgICAgICAgICBzdGF0ZS5ib2RpZXNbdXVpZF0uc2xlZXAoKTsKICAgICAgICAgIGJyZWFrOwogICAgICAgIH0KICAgIH0KICB9OwoKfSkoKTsKCg==', 'data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoid29ya2VyLmpzIiwic291cmNlcyI6WyJ3b3JrZXI6Ly93ZWItd29ya2VyL3NyYy9ub2RlX21vZHVsZXMvY2Fubm9uLWVzL2Rpc3QvY2Fubm9uLWVzLmpzIiwid29ya2VyOi8vd2ViLXdvcmtlci9zcmMvcHJvcHNUb0JvZHkuanMiLCJ3b3JrZXI6Ly93ZWItd29ya2VyL3NyYy93b3JrZXIuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBSZWNvcmRzIHdoYXQgb2JqZWN0cyBhcmUgY29sbGlkaW5nIHdpdGggZWFjaCBvdGhlclxuICovXG5jbGFzcyBPYmplY3RDb2xsaXNpb25NYXRyaXgge1xuICAvKipcbiAgICogVGhlIG1hdHJpeCBzdG9yYWdlLlxuICAgKi9cblxuICAvKipcbiAgICogQHRvZG8gUmVtb3ZlIHVzZWxlc3MgY29uc3RydWN0b3JcbiAgICovXG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHRoaXMubWF0cml4ID0gdm9pZCAwO1xuICAgIHRoaXMubWF0cml4ID0ge307XG4gIH1cbiAgLyoqXG4gICAqIGdldFxuICAgKi9cblxuXG4gIGdldChiaSwgYmopIHtcbiAgICBsZXQge1xuICAgICAgaWQ6IGlcbiAgICB9ID0gYmk7XG4gICAgbGV0IHtcbiAgICAgIGlkOiBqXG4gICAgfSA9IGJqO1xuXG4gICAgaWYgKGogPiBpKSB7XG4gICAgICBjb25zdCB0ZW1wID0gajtcbiAgICAgIGogPSBpO1xuICAgICAgaSA9IHRlbXA7XG4gICAgfVxuXG4gICAgcmV0dXJuIGkgKyBcIi1cIiArIGogaW4gdGhpcy5tYXRyaXg7XG4gIH1cbiAgLyoqXG4gICAqIHNldFxuICAgKi9cblxuXG4gIHNldChiaSwgYmosIHZhbHVlKSB7XG4gICAgbGV0IHtcbiAgICAgIGlkOiBpXG4gICAgfSA9IGJpO1xuICAgIGxldCB7XG4gICAgICBpZDogalxuICAgIH0gPSBiajtcblxuICAgIGlmIChqID4gaSkge1xuICAgICAgY29uc3QgdGVtcCA9IGo7XG4gICAgICBqID0gaTtcbiAgICAgIGkgPSB0ZW1wO1xuICAgIH1cblxuICAgIGlmICh2YWx1ZSkge1xuICAgICAgdGhpcy5tYXRyaXhbaSArIFwiLVwiICsgal0gPSB0cnVlO1xuICAgIH0gZWxzZSB7XG4gICAgICBkZWxldGUgdGhpcy5tYXRyaXhbaSArIFwiLVwiICsgal07XG4gICAgfVxuICB9XG4gIC8qKlxuICAgKiBFbXB0eSB0aGUgbWF0cml4XG4gICAqL1xuXG5cbiAgcmVzZXQoKSB7XG4gICAgdGhpcy5tYXRyaXggPSB7fTtcbiAgfVxuICAvKipcbiAgICogU2V0IG1heCBudW1iZXIgb2Ygb2JqZWN0c1xuICAgKi9cblxuXG4gIHNldE51bU9iamVjdHMobikge31cblxufVxuXG4vKipcbiAqIEEgM3gzIG1hdHJpeC5cbiAqIEF1dGhvcmVkIGJ5IHtAbGluayBodHRwOi8vZ2l0aHViLmNvbS9zY2h0ZXBwZS8gc2NodGVwcGV9XG4gKi9cbmNsYXNzIE1hdDMge1xuICAvKipcbiAgICogQSB2ZWN0b3Igb2YgbGVuZ3RoIDksIGNvbnRhaW5pbmcgYWxsIG1hdHJpeCBlbGVtZW50cy5cbiAgICovXG5cbiAgLyoqXG4gICAqIEBwYXJhbSBlbGVtZW50cyBBIHZlY3RvciBvZiBsZW5ndGggOSwgY29udGFpbmluZyBhbGwgbWF0cml4IGVsZW1lbnRzLlxuICAgKi9cbiAgY29uc3RydWN0b3IoZWxlbWVudHMgPSBbMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMF0pIHtcbiAgICB0aGlzLmVsZW1lbnRzID0gdm9pZCAwO1xuICAgIHRoaXMuZWxlbWVudHMgPSBlbGVtZW50cztcbiAgfVxuICAvKipcbiAgICogU2V0cyB0aGUgbWF0cml4IHRvIGlkZW50aXR5XG4gICAqIEB0b2RvIFNob3VsZCBwZXJoYXBzIGJlIHJlbmFtZWQgdG8gYHNldElkZW50aXR5KClgIHRvIGJlIG1vcmUgY2xlYXIuXG4gICAqIEB0b2RvIENyZWF0ZSBhbm90aGVyIGZ1bmN0aW9uIHRoYXQgaW1tZWRpYXRlbHkgY3JlYXRlcyBhbiBpZGVudGl0eSBtYXRyaXggZWcuIGBleWUoKWBcbiAgICovXG5cblxuICBpZGVudGl0eSgpIHtcbiAgICBjb25zdCBlID0gdGhpcy5lbGVtZW50cztcbiAgICBlWzBdID0gMTtcbiAgICBlWzFdID0gMDtcbiAgICBlWzJdID0gMDtcbiAgICBlWzNdID0gMDtcbiAgICBlWzRdID0gMTtcbiAgICBlWzVdID0gMDtcbiAgICBlWzZdID0gMDtcbiAgICBlWzddID0gMDtcbiAgICBlWzhdID0gMTtcbiAgfVxuICAvKipcbiAgICogU2V0IGFsbCBlbGVtZW50cyB0byB6ZXJvXG4gICAqL1xuXG5cbiAgc2V0WmVybygpIHtcbiAgICBjb25zdCBlID0gdGhpcy5lbGVtZW50cztcbiAgICBlWzBdID0gMDtcbiAgICBlWzFdID0gMDtcbiAgICBlWzJdID0gMDtcbiAgICBlWzNdID0gMDtcbiAgICBlWzRdID0gMDtcbiAgICBlWzVdID0gMDtcbiAgICBlWzZdID0gMDtcbiAgICBlWzddID0gMDtcbiAgICBlWzhdID0gMDtcbiAgfVxuICAvKipcbiAgICogU2V0cyB0aGUgbWF0cml4IGRpYWdvbmFsIGVsZW1lbnRzIGZyb20gYSBWZWMzXG4gICAqL1xuXG5cbiAgc2V0VHJhY2UodmVjdG9yKSB7XG4gICAgY29uc3QgZSA9IHRoaXMuZWxlbWVudHM7XG4gICAgZVswXSA9IHZlY3Rvci54O1xuICAgIGVbNF0gPSB2ZWN0b3IueTtcbiAgICBlWzhdID0gdmVjdG9yLno7XG4gIH1cbiAgLyoqXG4gICAqIEdldHMgdGhlIG1hdHJpeCBkaWFnb25hbCBlbGVtZW50c1xuICAgKi9cblxuXG4gIGdldFRyYWNlKHRhcmdldCA9IG5ldyBWZWMzKCkpIHtcbiAgICBjb25zdCBlID0gdGhpcy5lbGVtZW50cztcbiAgICB0YXJnZXQueCA9IGVbMF07XG4gICAgdGFyZ2V0LnkgPSBlWzRdO1xuICAgIHRhcmdldC56ID0gZVs4XTtcbiAgICByZXR1cm4gdGFyZ2V0O1xuICB9XG4gIC8qKlxuICAgKiBNYXRyaXgtVmVjdG9yIG11bHRpcGxpY2F0aW9uXG4gICAqIEBwYXJhbSB2IFRoZSB2ZWN0b3IgdG8gbXVsdGlwbHkgd2l0aFxuICAgKiBAcGFyYW0gdGFyZ2V0IE9wdGlvbmFsLCB0YXJnZXQgdG8gc2F2ZSB0aGUgcmVzdWx0IGluLlxuICAgKi9cblxuXG4gIHZtdWx0KHYsIHRhcmdldCA9IG5ldyBWZWMzKCkpIHtcbiAgICBjb25zdCBlID0gdGhpcy5lbGVtZW50cztcbiAgICBjb25zdCB4ID0gdi54O1xuICAgIGNvbnN0IHkgPSB2Lnk7XG4gICAgY29uc3QgeiA9IHYuejtcbiAgICB0YXJnZXQueCA9IGVbMF0gKiB4ICsgZVsxXSAqIHkgKyBlWzJdICogejtcbiAgICB0YXJnZXQueSA9IGVbM10gKiB4ICsgZVs0XSAqIHkgKyBlWzVdICogejtcbiAgICB0YXJnZXQueiA9IGVbNl0gKiB4ICsgZVs3XSAqIHkgKyBlWzhdICogejtcbiAgICByZXR1cm4gdGFyZ2V0O1xuICB9XG4gIC8qKlxuICAgKiBNYXRyaXgtc2NhbGFyIG11bHRpcGxpY2F0aW9uXG4gICAqL1xuXG5cbiAgc211bHQocykge1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5lbGVtZW50cy5sZW5ndGg7IGkrKykge1xuICAgICAgdGhpcy5lbGVtZW50c1tpXSAqPSBzO1xuICAgIH1cbiAgfVxuICAvKipcbiAgICogTWF0cml4IG11bHRpcGxpY2F0aW9uXG4gICAqIEBwYXJhbSBtYXRyaXggTWF0cml4IHRvIG11bHRpcGx5IHdpdGggZnJvbSBsZWZ0IHNpZGUuXG4gICAqL1xuXG5cbiAgbW11bHQobWF0cml4LCB0YXJnZXQgPSBuZXcgTWF0MygpKSB7XG4gICAgY29uc3QgQSA9IHRoaXMuZWxlbWVudHM7XG4gICAgY29uc3QgQiA9IG1hdHJpeC5lbGVtZW50cztcbiAgICBjb25zdCBUID0gdGFyZ2V0LmVsZW1lbnRzO1xuICAgIGNvbnN0IGExMSA9IEFbMF0sXG4gICAgICAgICAgYTEyID0gQVsxXSxcbiAgICAgICAgICBhMTMgPSBBWzJdLFxuICAgICAgICAgIGEyMSA9IEFbM10sXG4gICAgICAgICAgYTIyID0gQVs0XSxcbiAgICAgICAgICBhMjMgPSBBWzVdLFxuICAgICAgICAgIGEzMSA9IEFbNl0sXG4gICAgICAgICAgYTMyID0gQVs3XSxcbiAgICAgICAgICBhMzMgPSBBWzhdO1xuICAgIGNvbnN0IGIxMSA9IEJbMF0sXG4gICAgICAgICAgYjEyID0gQlsxXSxcbiAgICAgICAgICBiMTMgPSBCWzJdLFxuICAgICAgICAgIGIyMSA9IEJbM10sXG4gICAgICAgICAgYjIyID0gQls0XSxcbiAgICAgICAgICBiMjMgPSBCWzVdLFxuICAgICAgICAgIGIzMSA9IEJbNl0sXG4gICAgICAgICAgYjMyID0gQls3XSxcbiAgICAgICAgICBiMzMgPSBCWzhdO1xuICAgIFRbMF0gPSBhMTEgKiBiMTEgKyBhMTIgKiBiMjEgKyBhMTMgKiBiMzE7XG4gICAgVFsxXSA9IGExMSAqIGIxMiArIGExMiAqIGIyMiArIGExMyAqIGIzMjtcbiAgICBUWzJdID0gYTExICogYjEzICsgYTEyICogYjIzICsgYTEzICogYjMzO1xuICAgIFRbM10gPSBhMjEgKiBiMTEgKyBhMjIgKiBiMjEgKyBhMjMgKiBiMzE7XG4gICAgVFs0XSA9IGEyMSAqIGIxMiArIGEyMiAqIGIyMiArIGEyMyAqIGIzMjtcbiAgICBUWzVdID0gYTIxICogYjEzICsgYTIyICogYjIzICsgYTIzICogYjMzO1xuICAgIFRbNl0gPSBhMzEgKiBiMTEgKyBhMzIgKiBiMjEgKyBhMzMgKiBiMzE7XG4gICAgVFs3XSA9IGEzMSAqIGIxMiArIGEzMiAqIGIyMiArIGEzMyAqIGIzMjtcbiAgICBUWzhdID0gYTMxICogYjEzICsgYTMyICogYjIzICsgYTMzICogYjMzO1xuICAgIHJldHVybiB0YXJnZXQ7XG4gIH1cbiAgLyoqXG4gICAqIFNjYWxlIGVhY2ggY29sdW1uIG9mIHRoZSBtYXRyaXhcbiAgICovXG5cblxuICBzY2FsZSh2ZWN0b3IsIHRhcmdldCA9IG5ldyBNYXQzKCkpIHtcbiAgICBjb25zdCBlID0gdGhpcy5lbGVtZW50cztcbiAgICBjb25zdCB0ID0gdGFyZ2V0LmVsZW1lbnRzO1xuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgIT09IDM7IGkrKykge1xuICAgICAgdFszICogaSArIDBdID0gdmVjdG9yLnggKiBlWzMgKiBpICsgMF07XG4gICAgICB0WzMgKiBpICsgMV0gPSB2ZWN0b3IueSAqIGVbMyAqIGkgKyAxXTtcbiAgICAgIHRbMyAqIGkgKyAyXSA9IHZlY3Rvci56ICogZVszICogaSArIDJdO1xuICAgIH1cblxuICAgIHJldHVybiB0YXJnZXQ7XG4gIH1cbiAgLyoqXG4gICAqIFNvbHZlIEF4PWJcbiAgICogQHBhcmFtIGIgVGhlIHJpZ2h0IGhhbmQgc2lkZVxuICAgKiBAcGFyYW0gdGFyZ2V0IE9wdGlvbmFsLiBUYXJnZXQgdmVjdG9yIHRvIHNhdmUgaW4uXG4gICAqIEByZXR1cm4gVGhlIHNvbHV0aW9uIHhcbiAgICogQHRvZG8gc2hvdWxkIHJldXNlIGFycmF5c1xuICAgKi9cblxuXG4gIHNvbHZlKGIsIHRhcmdldCA9IG5ldyBWZWMzKCkpIHtcbiAgICAvLyBDb25zdHJ1Y3QgZXF1YXRpb25zXG4gICAgY29uc3QgbnIgPSAzOyAvLyBudW0gcm93c1xuXG4gICAgY29uc3QgbmMgPSA0OyAvLyBudW0gY29sc1xuXG4gICAgY29uc3QgZXFucyA9IFtdO1xuICAgIGxldCBpO1xuICAgIGxldCBqO1xuXG4gICAgZm9yIChpID0gMDsgaSA8IG5yICogbmM7IGkrKykge1xuICAgICAgZXFucy5wdXNoKDApO1xuICAgIH1cblxuICAgIGZvciAoaSA9IDA7IGkgPCAzOyBpKyspIHtcbiAgICAgIGZvciAoaiA9IDA7IGogPCAzOyBqKyspIHtcbiAgICAgICAgZXFuc1tpICsgbmMgKiBqXSA9IHRoaXMuZWxlbWVudHNbaSArIDMgKiBqXTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBlcW5zWzMgKyA0ICogMF0gPSBiLng7XG4gICAgZXFuc1szICsgNCAqIDFdID0gYi55O1xuICAgIGVxbnNbMyArIDQgKiAyXSA9IGIuejsgLy8gQ29tcHV0ZSByaWdodCB1cHBlciB0cmlhbmd1bGFyIHZlcnNpb24gb2YgdGhlIG1hdHJpeCAtIEdhdXNzIGVsaW1pbmF0aW9uXG5cbiAgICBsZXQgbiA9IDM7XG4gICAgY29uc3QgayA9IG47XG4gICAgbGV0IG5wO1xuICAgIGNvbnN0IGtwID0gNDsgLy8gbnVtIHJvd3NcblxuICAgIGxldCBwO1xuXG4gICAgZG8ge1xuICAgICAgaSA9IGsgLSBuO1xuXG4gICAgICBpZiAoZXFuc1tpICsgbmMgKiBpXSA9PT0gMCkge1xuICAgICAgICAvLyB0aGUgcGl2b3QgaXMgbnVsbCwgc3dhcCBsaW5lc1xuICAgICAgICBmb3IgKGogPSBpICsgMTsgaiA8IGs7IGorKykge1xuICAgICAgICAgIGlmIChlcW5zW2kgKyBuYyAqIGpdICE9PSAwKSB7XG4gICAgICAgICAgICBucCA9IGtwO1xuXG4gICAgICAgICAgICBkbyB7XG4gICAgICAgICAgICAgIC8vIGRvIGxpZ25lKCBpICkgPSBsaWduZSggaSApICsgbGlnbmUoIGsgKVxuICAgICAgICAgICAgICBwID0ga3AgLSBucDtcbiAgICAgICAgICAgICAgZXFuc1twICsgbmMgKiBpXSArPSBlcW5zW3AgKyBuYyAqIGpdO1xuICAgICAgICAgICAgfSB3aGlsZSAoLS1ucCk7XG5cbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAoZXFuc1tpICsgbmMgKiBpXSAhPT0gMCkge1xuICAgICAgICBmb3IgKGogPSBpICsgMTsgaiA8IGs7IGorKykge1xuICAgICAgICAgIGNvbnN0IG11bHRpcGxpZXIgPSBlcW5zW2kgKyBuYyAqIGpdIC8gZXFuc1tpICsgbmMgKiBpXTtcbiAgICAgICAgICBucCA9IGtwO1xuXG4gICAgICAgICAgZG8ge1xuICAgICAgICAgICAgLy8gZG8gbGlnbmUoIGsgKSA9IGxpZ25lKCBrICkgLSBtdWx0aXBsaWVyICogbGlnbmUoIGkgKVxuICAgICAgICAgICAgcCA9IGtwIC0gbnA7XG4gICAgICAgICAgICBlcW5zW3AgKyBuYyAqIGpdID0gcCA8PSBpID8gMCA6IGVxbnNbcCArIG5jICogal0gLSBlcW5zW3AgKyBuYyAqIGldICogbXVsdGlwbGllcjtcbiAgICAgICAgICB9IHdoaWxlICgtLW5wKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gd2hpbGUgKC0tbik7IC8vIEdldCB0aGUgc29sdXRpb25cblxuXG4gICAgdGFyZ2V0LnogPSBlcW5zWzIgKiBuYyArIDNdIC8gZXFuc1syICogbmMgKyAyXTtcbiAgICB0YXJnZXQueSA9IChlcW5zWzEgKiBuYyArIDNdIC0gZXFuc1sxICogbmMgKyAyXSAqIHRhcmdldC56KSAvIGVxbnNbMSAqIG5jICsgMV07XG4gICAgdGFyZ2V0LnggPSAoZXFuc1swICogbmMgKyAzXSAtIGVxbnNbMCAqIG5jICsgMl0gKiB0YXJnZXQueiAtIGVxbnNbMCAqIG5jICsgMV0gKiB0YXJnZXQueSkgLyBlcW5zWzAgKiBuYyArIDBdO1xuXG4gICAgaWYgKGlzTmFOKHRhcmdldC54KSB8fCBpc05hTih0YXJnZXQueSkgfHwgaXNOYU4odGFyZ2V0LnopIHx8IHRhcmdldC54ID09PSBJbmZpbml0eSB8fCB0YXJnZXQueSA9PT0gSW5maW5pdHkgfHwgdGFyZ2V0LnogPT09IEluZmluaXR5KSB7XG4gICAgICB0aHJvdyBcIkNvdWxkIG5vdCBzb2x2ZSBlcXVhdGlvbiEgR290IHg9W1wiICsgdGFyZ2V0LnRvU3RyaW5nKCkgKyBcIl0sIGI9W1wiICsgYi50b1N0cmluZygpICsgXCJdLCBBPVtcIiArIHRoaXMudG9TdHJpbmcoKSArIFwiXVwiO1xuICAgIH1cblxuICAgIHJldHVybiB0YXJnZXQ7XG4gIH1cbiAgLyoqXG4gICAqIEdldCBhbiBlbGVtZW50IGluIHRoZSBtYXRyaXggYnkgaW5kZXguIEluZGV4IHN0YXJ0cyBhdCAwLCBub3QgMSEhIVxuICAgKiBAcGFyYW0gdmFsdWUgSWYgcHJvdmlkZWQsIHRoZSBtYXRyaXggZWxlbWVudCB3aWxsIGJlIHNldCB0byB0aGlzIHZhbHVlLlxuICAgKi9cblxuXG4gIGUocm93LCBjb2x1bW4sIHZhbHVlKSB7XG4gICAgaWYgKHZhbHVlID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHJldHVybiB0aGlzLmVsZW1lbnRzW2NvbHVtbiArIDMgKiByb3ddO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBTZXQgdmFsdWVcbiAgICAgIHRoaXMuZWxlbWVudHNbY29sdW1uICsgMyAqIHJvd10gPSB2YWx1ZTtcbiAgICB9XG4gIH1cbiAgLyoqXG4gICAqIENvcHkgYW5vdGhlciBtYXRyaXggaW50byB0aGlzIG1hdHJpeCBvYmplY3QuXG4gICAqL1xuXG5cbiAgY29weShtYXRyaXgpIHtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IG1hdHJpeC5lbGVtZW50cy5sZW5ndGg7IGkrKykge1xuICAgICAgdGhpcy5lbGVtZW50c1tpXSA9IG1hdHJpeC5lbGVtZW50c1tpXTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcztcbiAgfVxuICAvKipcbiAgICogUmV0dXJucyBhIHN0cmluZyByZXByZXNlbnRhdGlvbiBvZiB0aGUgbWF0cml4LlxuICAgKi9cblxuXG4gIHRvU3RyaW5nKCkge1xuICAgIGxldCByID0gJyc7XG4gICAgY29uc3Qgc2VwID0gJywnO1xuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCA5OyBpKyspIHtcbiAgICAgIHIgKz0gdGhpcy5lbGVtZW50c1tpXSArIHNlcDtcbiAgICB9XG5cbiAgICByZXR1cm4gcjtcbiAgfVxuICAvKipcbiAgICogcmV2ZXJzZSB0aGUgbWF0cml4XG4gICAqIEBwYXJhbSB0YXJnZXQgVGFyZ2V0IG1hdHJpeCB0byBzYXZlIGluLlxuICAgKiBAcmV0dXJuIFRoZSBzb2x1dGlvbiB4XG4gICAqL1xuXG5cbiAgcmV2ZXJzZSh0YXJnZXQgPSBuZXcgTWF0MygpKSB7XG4gICAgLy8gQ29uc3RydWN0IGVxdWF0aW9uc1xuICAgIGNvbnN0IG5yID0gMzsgLy8gbnVtIHJvd3NcblxuICAgIGNvbnN0IG5jID0gNjsgLy8gbnVtIGNvbHNcblxuICAgIGNvbnN0IGVxbnMgPSByZXZlcnNlX2VxbnM7XG4gICAgbGV0IGk7XG4gICAgbGV0IGo7XG5cbiAgICBmb3IgKGkgPSAwOyBpIDwgMzsgaSsrKSB7XG4gICAgICBmb3IgKGogPSAwOyBqIDwgMzsgaisrKSB7XG4gICAgICAgIGVxbnNbaSArIG5jICogal0gPSB0aGlzLmVsZW1lbnRzW2kgKyAzICogal07XG4gICAgICB9XG4gICAgfVxuXG4gICAgZXFuc1szICsgNiAqIDBdID0gMTtcbiAgICBlcW5zWzMgKyA2ICogMV0gPSAwO1xuICAgIGVxbnNbMyArIDYgKiAyXSA9IDA7XG4gICAgZXFuc1s0ICsgNiAqIDBdID0gMDtcbiAgICBlcW5zWzQgKyA2ICogMV0gPSAxO1xuICAgIGVxbnNbNCArIDYgKiAyXSA9IDA7XG4gICAgZXFuc1s1ICsgNiAqIDBdID0gMDtcbiAgICBlcW5zWzUgKyA2ICogMV0gPSAwO1xuICAgIGVxbnNbNSArIDYgKiAyXSA9IDE7IC8vIENvbXB1dGUgcmlnaHQgdXBwZXIgdHJpYW5ndWxhciB2ZXJzaW9uIG9mIHRoZSBtYXRyaXggLSBHYXVzcyBlbGltaW5hdGlvblxuXG4gICAgbGV0IG4gPSAzO1xuICAgIGNvbnN0IGsgPSBuO1xuICAgIGxldCBucDtcbiAgICBjb25zdCBrcCA9IG5jOyAvLyBudW0gcm93c1xuXG4gICAgbGV0IHA7XG5cbiAgICBkbyB7XG4gICAgICBpID0gayAtIG47XG5cbiAgICAgIGlmIChlcW5zW2kgKyBuYyAqIGldID09PSAwKSB7XG4gICAgICAgIC8vIHRoZSBwaXZvdCBpcyBudWxsLCBzd2FwIGxpbmVzXG4gICAgICAgIGZvciAoaiA9IGkgKyAxOyBqIDwgazsgaisrKSB7XG4gICAgICAgICAgaWYgKGVxbnNbaSArIG5jICogal0gIT09IDApIHtcbiAgICAgICAgICAgIG5wID0ga3A7XG5cbiAgICAgICAgICAgIGRvIHtcbiAgICAgICAgICAgICAgLy8gZG8gbGluZSggaSApID0gbGluZSggaSApICsgbGluZSggayApXG4gICAgICAgICAgICAgIHAgPSBrcCAtIG5wO1xuICAgICAgICAgICAgICBlcW5zW3AgKyBuYyAqIGldICs9IGVxbnNbcCArIG5jICogal07XG4gICAgICAgICAgICB9IHdoaWxlICgtLW5wKTtcblxuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmIChlcW5zW2kgKyBuYyAqIGldICE9PSAwKSB7XG4gICAgICAgIGZvciAoaiA9IGkgKyAxOyBqIDwgazsgaisrKSB7XG4gICAgICAgICAgY29uc3QgbXVsdGlwbGllciA9IGVxbnNbaSArIG5jICogal0gLyBlcW5zW2kgKyBuYyAqIGldO1xuICAgICAgICAgIG5wID0ga3A7XG5cbiAgICAgICAgICBkbyB7XG4gICAgICAgICAgICAvLyBkbyBsaW5lKCBrICkgPSBsaW5lKCBrICkgLSBtdWx0aXBsaWVyICogbGluZSggaSApXG4gICAgICAgICAgICBwID0ga3AgLSBucDtcbiAgICAgICAgICAgIGVxbnNbcCArIG5jICogal0gPSBwIDw9IGkgPyAwIDogZXFuc1twICsgbmMgKiBqXSAtIGVxbnNbcCArIG5jICogaV0gKiBtdWx0aXBsaWVyO1xuICAgICAgICAgIH0gd2hpbGUgKC0tbnApO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSB3aGlsZSAoLS1uKTsgLy8gZWxpbWluYXRlIHRoZSB1cHBlciBsZWZ0IHRyaWFuZ2xlIG9mIHRoZSBtYXRyaXhcblxuXG4gICAgaSA9IDI7XG5cbiAgICBkbyB7XG4gICAgICBqID0gaSAtIDE7XG5cbiAgICAgIGRvIHtcbiAgICAgICAgY29uc3QgbXVsdGlwbGllciA9IGVxbnNbaSArIG5jICogal0gLyBlcW5zW2kgKyBuYyAqIGldO1xuICAgICAgICBucCA9IG5jO1xuXG4gICAgICAgIGRvIHtcbiAgICAgICAgICBwID0gbmMgLSBucDtcbiAgICAgICAgICBlcW5zW3AgKyBuYyAqIGpdID0gZXFuc1twICsgbmMgKiBqXSAtIGVxbnNbcCArIG5jICogaV0gKiBtdWx0aXBsaWVyO1xuICAgICAgICB9IHdoaWxlICgtLW5wKTtcbiAgICAgIH0gd2hpbGUgKGotLSk7XG4gICAgfSB3aGlsZSAoLS1pKTsgLy8gb3BlcmF0aW9ucyBvbiB0aGUgZGlhZ29uYWxcblxuXG4gICAgaSA9IDI7XG5cbiAgICBkbyB7XG4gICAgICBjb25zdCBtdWx0aXBsaWVyID0gMSAvIGVxbnNbaSArIG5jICogaV07XG4gICAgICBucCA9IG5jO1xuXG4gICAgICBkbyB7XG4gICAgICAgIHAgPSBuYyAtIG5wO1xuICAgICAgICBlcW5zW3AgKyBuYyAqIGldID0gZXFuc1twICsgbmMgKiBpXSAqIG11bHRpcGxpZXI7XG4gICAgICB9IHdoaWxlICgtLW5wKTtcbiAgICB9IHdoaWxlIChpLS0pO1xuXG4gICAgaSA9IDI7XG5cbiAgICBkbyB7XG4gICAgICBqID0gMjtcblxuICAgICAgZG8ge1xuICAgICAgICBwID0gZXFuc1tuciArIGogKyBuYyAqIGldO1xuXG4gICAgICAgIGlmIChpc05hTihwKSB8fCBwID09PSBJbmZpbml0eSkge1xuICAgICAgICAgIHRocm93IFwiQ291bGQgbm90IHJldmVyc2UhIEE9W1wiICsgdGhpcy50b1N0cmluZygpICsgXCJdXCI7XG4gICAgICAgIH1cblxuICAgICAgICB0YXJnZXQuZShpLCBqLCBwKTtcbiAgICAgIH0gd2hpbGUgKGotLSk7XG4gICAgfSB3aGlsZSAoaS0tKTtcblxuICAgIHJldHVybiB0YXJnZXQ7XG4gIH1cbiAgLyoqXG4gICAqIFNldCB0aGUgbWF0cml4IGZyb20gYSBxdWF0ZXJpb25cbiAgICovXG5cblxuICBzZXRSb3RhdGlvbkZyb21RdWF0ZXJuaW9uKHEpIHtcbiAgICBjb25zdCB4ID0gcS54O1xuICAgIGNvbnN0IHkgPSBxLnk7XG4gICAgY29uc3QgeiA9IHEuejtcbiAgICBjb25zdCB3ID0gcS53O1xuICAgIGNvbnN0IHgyID0geCArIHg7XG4gICAgY29uc3QgeTIgPSB5ICsgeTtcbiAgICBjb25zdCB6MiA9IHogKyB6O1xuICAgIGNvbnN0IHh4ID0geCAqIHgyO1xuICAgIGNvbnN0IHh5ID0geCAqIHkyO1xuICAgIGNvbnN0IHh6ID0geCAqIHoyO1xuICAgIGNvbnN0IHl5ID0geSAqIHkyO1xuICAgIGNvbnN0IHl6ID0geSAqIHoyO1xuICAgIGNvbnN0IHp6ID0geiAqIHoyO1xuICAgIGNvbnN0IHd4ID0gdyAqIHgyO1xuICAgIGNvbnN0IHd5ID0gdyAqIHkyO1xuICAgIGNvbnN0IHd6ID0gdyAqIHoyO1xuICAgIGNvbnN0IGUgPSB0aGlzLmVsZW1lbnRzO1xuICAgIGVbMyAqIDAgKyAwXSA9IDEgLSAoeXkgKyB6eik7XG4gICAgZVszICogMCArIDFdID0geHkgLSB3ejtcbiAgICBlWzMgKiAwICsgMl0gPSB4eiArIHd5O1xuICAgIGVbMyAqIDEgKyAwXSA9IHh5ICsgd3o7XG4gICAgZVszICogMSArIDFdID0gMSAtICh4eCArIHp6KTtcbiAgICBlWzMgKiAxICsgMl0gPSB5eiAtIHd4O1xuICAgIGVbMyAqIDIgKyAwXSA9IHh6IC0gd3k7XG4gICAgZVszICogMiArIDFdID0geXogKyB3eDtcbiAgICBlWzMgKiAyICsgMl0gPSAxIC0gKHh4ICsgeXkpO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG4gIC8qKlxuICAgKiBUcmFuc3Bvc2UgdGhlIG1hdHJpeFxuICAgKiBAcGFyYW0gdGFyZ2V0IE9wdGlvbmFsLiBXaGVyZSB0byBzdG9yZSB0aGUgcmVzdWx0LlxuICAgKiBAcmV0dXJuIFRoZSB0YXJnZXQgTWF0Mywgb3IgYSBuZXcgTWF0MyBpZiB0YXJnZXQgd2FzIG9taXR0ZWQuXG4gICAqL1xuXG5cbiAgdHJhbnNwb3NlKHRhcmdldCA9IG5ldyBNYXQzKCkpIHtcbiAgICBjb25zdCBNID0gdGhpcy5lbGVtZW50cztcbiAgICBjb25zdCBUID0gdGFyZ2V0LmVsZW1lbnRzO1xuICAgIGxldCB0bXA7IC8vU2V0IGRpYWdvbmFsc1xuXG4gICAgVFswXSA9IE1bMF07XG4gICAgVFs0XSA9IE1bNF07XG4gICAgVFs4XSA9IE1bOF07XG4gICAgdG1wID0gTVsxXTtcbiAgICBUWzFdID0gTVszXTtcbiAgICBUWzNdID0gdG1wO1xuICAgIHRtcCA9IE1bMl07XG4gICAgVFsyXSA9IE1bNl07XG4gICAgVFs2XSA9IHRtcDtcbiAgICB0bXAgPSBNWzVdO1xuICAgIFRbNV0gPSBNWzddO1xuICAgIFRbN10gPSB0bXA7XG4gICAgcmV0dXJuIHRhcmdldDtcbiAgfVxuXG59XG5jb25zdCByZXZlcnNlX2VxbnMgPSBbMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMF07XG5cbi8qKlxuICogMy1kaW1lbnNpb25hbCB2ZWN0b3JcbiAqIEBleGFtcGxlXG4gKiAgICAgY29uc3QgdiA9IG5ldyBWZWMzKDEsIDIsIDMpXG4gKiAgICAgY29uc29sZS5sb2coJ3g9JyArIHYueCkgLy8geD0xXG4gKi9cblxuY2xhc3MgVmVjMyB7XG4gIGNvbnN0cnVjdG9yKHggPSAwLjAsIHkgPSAwLjAsIHogPSAwLjApIHtcbiAgICB0aGlzLnggPSB2b2lkIDA7XG4gICAgdGhpcy55ID0gdm9pZCAwO1xuICAgIHRoaXMueiA9IHZvaWQgMDtcbiAgICB0aGlzLnggPSB4O1xuICAgIHRoaXMueSA9IHk7XG4gICAgdGhpcy56ID0gejtcbiAgfVxuICAvKipcbiAgICogVmVjdG9yIGNyb3NzIHByb2R1Y3RcbiAgICogQHBhcmFtIHRhcmdldCBPcHRpb25hbCB0YXJnZXQgdG8gc2F2ZSBpbi5cbiAgICovXG5cblxuICBjcm9zcyh2ZWN0b3IsIHRhcmdldCA9IG5ldyBWZWMzKCkpIHtcbiAgICBjb25zdCB2eCA9IHZlY3Rvci54O1xuICAgIGNvbnN0IHZ5ID0gdmVjdG9yLnk7XG4gICAgY29uc3QgdnogPSB2ZWN0b3IuejtcbiAgICBjb25zdCB4ID0gdGhpcy54O1xuICAgIGNvbnN0IHkgPSB0aGlzLnk7XG4gICAgY29uc3QgeiA9IHRoaXMuejtcbiAgICB0YXJnZXQueCA9IHkgKiB2eiAtIHogKiB2eTtcbiAgICB0YXJnZXQueSA9IHogKiB2eCAtIHggKiB2ejtcbiAgICB0YXJnZXQueiA9IHggKiB2eSAtIHkgKiB2eDtcbiAgICByZXR1cm4gdGFyZ2V0O1xuICB9XG4gIC8qKlxuICAgKiBTZXQgdGhlIHZlY3RvcnMnIDMgZWxlbWVudHNcbiAgICovXG5cblxuICBzZXQoeCwgeSwgeikge1xuICAgIHRoaXMueCA9IHg7XG4gICAgdGhpcy55ID0geTtcbiAgICB0aGlzLnogPSB6O1xuICAgIHJldHVybiB0aGlzO1xuICB9XG4gIC8qKlxuICAgKiBTZXQgYWxsIGNvbXBvbmVudHMgb2YgdGhlIHZlY3RvciB0byB6ZXJvLlxuICAgKi9cblxuXG4gIHNldFplcm8oKSB7XG4gICAgdGhpcy54ID0gdGhpcy55ID0gdGhpcy56ID0gMDtcbiAgfVxuICAvKipcbiAgICogVmVjdG9yIGFkZGl0aW9uXG4gICAqL1xuXG5cbiAgdmFkZCh2ZWN0b3IsIHRhcmdldCkge1xuICAgIGlmICh0YXJnZXQpIHtcbiAgICAgIHRhcmdldC54ID0gdmVjdG9yLnggKyB0aGlzLng7XG4gICAgICB0YXJnZXQueSA9IHZlY3Rvci55ICsgdGhpcy55O1xuICAgICAgdGFyZ2V0LnogPSB2ZWN0b3IueiArIHRoaXMuejtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIG5ldyBWZWMzKHRoaXMueCArIHZlY3Rvci54LCB0aGlzLnkgKyB2ZWN0b3IueSwgdGhpcy56ICsgdmVjdG9yLnopO1xuICAgIH1cbiAgfVxuICAvKipcbiAgICogVmVjdG9yIHN1YnRyYWN0aW9uXG4gICAqIEBwYXJhbSB0YXJnZXQgT3B0aW9uYWwgdGFyZ2V0IHRvIHNhdmUgaW4uXG4gICAqL1xuXG5cbiAgdnN1Yih2ZWN0b3IsIHRhcmdldCkge1xuICAgIGlmICh0YXJnZXQpIHtcbiAgICAgIHRhcmdldC54ID0gdGhpcy54IC0gdmVjdG9yLng7XG4gICAgICB0YXJnZXQueSA9IHRoaXMueSAtIHZlY3Rvci55O1xuICAgICAgdGFyZ2V0LnogPSB0aGlzLnogLSB2ZWN0b3IuejtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIG5ldyBWZWMzKHRoaXMueCAtIHZlY3Rvci54LCB0aGlzLnkgLSB2ZWN0b3IueSwgdGhpcy56IC0gdmVjdG9yLnopO1xuICAgIH1cbiAgfVxuICAvKipcbiAgICogR2V0IHRoZSBjcm9zcyBwcm9kdWN0IG1hdHJpeCBhX2Nyb3NzIGZyb20gYSB2ZWN0b3IsIHN1Y2ggdGhhdCBhIHggYiA9IGFfY3Jvc3MgKiBiID0gY1xuICAgKlxuICAgKiBTZWUge0BsaW5rIGh0dHBzOi8vd3d3OC5jcy51bXUuc2Uva3Vyc2VyL1REQkQyNC9WVDA2L2xlY3R1cmVzL0xlY3R1cmU2LnBkZiBVbWXDpSBVbml2ZXJzaXR5IExlY3R1cmV9XG4gICAqL1xuXG5cbiAgY3Jvc3NtYXQoKSB7XG4gICAgcmV0dXJuIG5ldyBNYXQzKFswLCAtdGhpcy56LCB0aGlzLnksIHRoaXMueiwgMCwgLXRoaXMueCwgLXRoaXMueSwgdGhpcy54LCAwXSk7XG4gIH1cbiAgLyoqXG4gICAqIE5vcm1hbGl6ZSB0aGUgdmVjdG9yLiBOb3RlIHRoYXQgdGhpcyBjaGFuZ2VzIHRoZSB2YWx1ZXMgaW4gdGhlIHZlY3Rvci5cbiAgICAqIEByZXR1cm4gUmV0dXJucyB0aGUgbm9ybSBvZiB0aGUgdmVjdG9yXG4gICAqL1xuXG5cbiAgbm9ybWFsaXplKCkge1xuICAgIGNvbnN0IHggPSB0aGlzLng7XG4gICAgY29uc3QgeSA9IHRoaXMueTtcbiAgICBjb25zdCB6ID0gdGhpcy56O1xuICAgIGNvbnN0IG4gPSBNYXRoLnNxcnQoeCAqIHggKyB5ICogeSArIHogKiB6KTtcblxuICAgIGlmIChuID4gMC4wKSB7XG4gICAgICBjb25zdCBpbnZOID0gMSAvIG47XG4gICAgICB0aGlzLnggKj0gaW52TjtcbiAgICAgIHRoaXMueSAqPSBpbnZOO1xuICAgICAgdGhpcy56ICo9IGludk47XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIE1ha2Ugc29tZXRoaW5nIHVwXG4gICAgICB0aGlzLnggPSAwO1xuICAgICAgdGhpcy55ID0gMDtcbiAgICAgIHRoaXMueiA9IDA7XG4gICAgfVxuXG4gICAgcmV0dXJuIG47XG4gIH1cbiAgLyoqXG4gICAqIEdldCB0aGUgdmVyc2lvbiBvZiB0aGlzIHZlY3RvciB0aGF0IGlzIG9mIGxlbmd0aCAxLlxuICAgKiBAcGFyYW0gdGFyZ2V0IE9wdGlvbmFsIHRhcmdldCB0byBzYXZlIGluXG4gICAqIEByZXR1cm4gUmV0dXJucyB0aGUgdW5pdCB2ZWN0b3JcbiAgICovXG5cblxuICB1bml0KHRhcmdldCA9IG5ldyBWZWMzKCkpIHtcbiAgICBjb25zdCB4ID0gdGhpcy54O1xuICAgIGNvbnN0IHkgPSB0aGlzLnk7XG4gICAgY29uc3QgeiA9IHRoaXMuejtcbiAgICBsZXQgbmludiA9IE1hdGguc3FydCh4ICogeCArIHkgKiB5ICsgeiAqIHopO1xuXG4gICAgaWYgKG5pbnYgPiAwLjApIHtcbiAgICAgIG5pbnYgPSAxLjAgLyBuaW52O1xuICAgICAgdGFyZ2V0LnggPSB4ICogbmludjtcbiAgICAgIHRhcmdldC55ID0geSAqIG5pbnY7XG4gICAgICB0YXJnZXQueiA9IHogKiBuaW52O1xuICAgIH0gZWxzZSB7XG4gICAgICB0YXJnZXQueCA9IDE7XG4gICAgICB0YXJnZXQueSA9IDA7XG4gICAgICB0YXJnZXQueiA9IDA7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRhcmdldDtcbiAgfVxuICAvKipcbiAgICogR2V0IHRoZSBsZW5ndGggb2YgdGhlIHZlY3RvclxuICAgKi9cblxuXG4gIGxlbmd0aCgpIHtcbiAgICBjb25zdCB4ID0gdGhpcy54O1xuICAgIGNvbnN0IHkgPSB0aGlzLnk7XG4gICAgY29uc3QgeiA9IHRoaXMuejtcbiAgICByZXR1cm4gTWF0aC5zcXJ0KHggKiB4ICsgeSAqIHkgKyB6ICogeik7XG4gIH1cbiAgLyoqXG4gICAqIEdldCB0aGUgc3F1YXJlZCBsZW5ndGggb2YgdGhlIHZlY3Rvci5cbiAgICovXG5cblxuICBsZW5ndGhTcXVhcmVkKCkge1xuICAgIHJldHVybiB0aGlzLmRvdCh0aGlzKTtcbiAgfVxuICAvKipcbiAgICogR2V0IGRpc3RhbmNlIGZyb20gdGhpcyBwb2ludCB0byBhbm90aGVyIHBvaW50XG4gICAqL1xuXG5cbiAgZGlzdGFuY2VUbyhwKSB7XG4gICAgY29uc3QgeCA9IHRoaXMueDtcbiAgICBjb25zdCB5ID0gdGhpcy55O1xuICAgIGNvbnN0IHogPSB0aGlzLno7XG4gICAgY29uc3QgcHggPSBwLng7XG4gICAgY29uc3QgcHkgPSBwLnk7XG4gICAgY29uc3QgcHogPSBwLno7XG4gICAgcmV0dXJuIE1hdGguc3FydCgocHggLSB4KSAqIChweCAtIHgpICsgKHB5IC0geSkgKiAocHkgLSB5KSArIChweiAtIHopICogKHB6IC0geikpO1xuICB9XG4gIC8qKlxuICAgKiBHZXQgc3F1YXJlZCBkaXN0YW5jZSBmcm9tIHRoaXMgcG9pbnQgdG8gYW5vdGhlciBwb2ludFxuICAgKi9cblxuXG4gIGRpc3RhbmNlU3F1YXJlZChwKSB7XG4gICAgY29uc3QgeCA9IHRoaXMueDtcbiAgICBjb25zdCB5ID0gdGhpcy55O1xuICAgIGNvbnN0IHogPSB0aGlzLno7XG4gICAgY29uc3QgcHggPSBwLng7XG4gICAgY29uc3QgcHkgPSBwLnk7XG4gICAgY29uc3QgcHogPSBwLno7XG4gICAgcmV0dXJuIChweCAtIHgpICogKHB4IC0geCkgKyAocHkgLSB5KSAqIChweSAtIHkpICsgKHB6IC0geikgKiAocHogLSB6KTtcbiAgfVxuICAvKipcbiAgICogTXVsdGlwbHkgYWxsIHRoZSBjb21wb25lbnRzIG9mIHRoZSB2ZWN0b3Igd2l0aCBhIHNjYWxhci5cbiAgICogQHBhcmFtIHRhcmdldCBUaGUgdmVjdG9yIHRvIHNhdmUgdGhlIHJlc3VsdCBpbi5cbiAgICovXG5cblxuICBzY2FsZShzY2FsYXIsIHRhcmdldCA9IG5ldyBWZWMzKCkpIHtcbiAgICBjb25zdCB4ID0gdGhpcy54O1xuICAgIGNvbnN0IHkgPSB0aGlzLnk7XG4gICAgY29uc3QgeiA9IHRoaXMuejtcbiAgICB0YXJnZXQueCA9IHNjYWxhciAqIHg7XG4gICAgdGFyZ2V0LnkgPSBzY2FsYXIgKiB5O1xuICAgIHRhcmdldC56ID0gc2NhbGFyICogejtcbiAgICByZXR1cm4gdGFyZ2V0O1xuICB9XG4gIC8qKlxuICAgKiBNdWx0aXBseSB0aGUgdmVjdG9yIHdpdGggYW4gb3RoZXIgdmVjdG9yLCBjb21wb25lbnQtd2lzZS5cbiAgICogQHBhcmFtIHRhcmdldCBUaGUgdmVjdG9yIHRvIHNhdmUgdGhlIHJlc3VsdCBpbi5cbiAgICovXG5cblxuICB2bXVsKHZlY3RvciwgdGFyZ2V0ID0gbmV3IFZlYzMoKSkge1xuICAgIHRhcmdldC54ID0gdmVjdG9yLnggKiB0aGlzLng7XG4gICAgdGFyZ2V0LnkgPSB2ZWN0b3IueSAqIHRoaXMueTtcbiAgICB0YXJnZXQueiA9IHZlY3Rvci56ICogdGhpcy56O1xuICAgIHJldHVybiB0YXJnZXQ7XG4gIH1cbiAgLyoqXG4gICAqIFNjYWxlIGEgdmVjdG9yIGFuZCBhZGQgaXQgdG8gdGhpcyB2ZWN0b3IuIFNhdmUgdGhlIHJlc3VsdCBpbiBcInRhcmdldFwiLiAodGFyZ2V0ID0gdGhpcyArIHZlY3RvciAqIHNjYWxhcilcbiAgICogQHBhcmFtIHRhcmdldCBUaGUgdmVjdG9yIHRvIHNhdmUgdGhlIHJlc3VsdCBpbi5cbiAgICovXG5cblxuICBhZGRTY2FsZWRWZWN0b3Ioc2NhbGFyLCB2ZWN0b3IsIHRhcmdldCA9IG5ldyBWZWMzKCkpIHtcbiAgICB0YXJnZXQueCA9IHRoaXMueCArIHNjYWxhciAqIHZlY3Rvci54O1xuICAgIHRhcmdldC55ID0gdGhpcy55ICsgc2NhbGFyICogdmVjdG9yLnk7XG4gICAgdGFyZ2V0LnogPSB0aGlzLnogKyBzY2FsYXIgKiB2ZWN0b3IuejtcbiAgICByZXR1cm4gdGFyZ2V0O1xuICB9XG4gIC8qKlxuICAgKiBDYWxjdWxhdGUgZG90IHByb2R1Y3RcbiAgICogQHBhcmFtIHZlY3RvclxuICAgKi9cblxuXG4gIGRvdCh2ZWN0b3IpIHtcbiAgICByZXR1cm4gdGhpcy54ICogdmVjdG9yLnggKyB0aGlzLnkgKiB2ZWN0b3IueSArIHRoaXMueiAqIHZlY3Rvci56O1xuICB9XG5cbiAgaXNaZXJvKCkge1xuICAgIHJldHVybiB0aGlzLnggPT09IDAgJiYgdGhpcy55ID09PSAwICYmIHRoaXMueiA9PT0gMDtcbiAgfVxuICAvKipcbiAgICogTWFrZSB0aGUgdmVjdG9yIHBvaW50IGluIHRoZSBvcHBvc2l0ZSBkaXJlY3Rpb24uXG4gICAqIEBwYXJhbSB0YXJnZXQgT3B0aW9uYWwgdGFyZ2V0IHRvIHNhdmUgaW5cbiAgICovXG5cblxuICBuZWdhdGUodGFyZ2V0ID0gbmV3IFZlYzMoKSkge1xuICAgIHRhcmdldC54ID0gLXRoaXMueDtcbiAgICB0YXJnZXQueSA9IC10aGlzLnk7XG4gICAgdGFyZ2V0LnogPSAtdGhpcy56O1xuICAgIHJldHVybiB0YXJnZXQ7XG4gIH1cbiAgLyoqXG4gICAqIENvbXB1dGUgdHdvIGFydGlmaWNpYWwgdGFuZ2VudHMgdG8gdGhlIHZlY3RvclxuICAgKiBAcGFyYW0gdDEgVmVjdG9yIG9iamVjdCB0byBzYXZlIHRoZSBmaXJzdCB0YW5nZW50IGluXG4gICAqIEBwYXJhbSB0MiBWZWN0b3Igb2JqZWN0IHRvIHNhdmUgdGhlIHNlY29uZCB0YW5nZW50IGluXG4gICAqL1xuXG5cbiAgdGFuZ2VudHModDEsIHQyKSB7XG4gICAgY29uc3Qgbm9ybSA9IHRoaXMubGVuZ3RoKCk7XG5cbiAgICBpZiAobm9ybSA+IDAuMCkge1xuICAgICAgY29uc3QgbiA9IFZlYzNfdGFuZ2VudHNfbjtcbiAgICAgIGNvbnN0IGlub3JtID0gMSAvIG5vcm07XG4gICAgICBuLnNldCh0aGlzLnggKiBpbm9ybSwgdGhpcy55ICogaW5vcm0sIHRoaXMueiAqIGlub3JtKTtcbiAgICAgIGNvbnN0IHJhbmRWZWMgPSBWZWMzX3RhbmdlbnRzX3JhbmRWZWM7XG5cbiAgICAgIGlmIChNYXRoLmFicyhuLngpIDwgMC45KSB7XG4gICAgICAgIHJhbmRWZWMuc2V0KDEsIDAsIDApO1xuICAgICAgICBuLmNyb3NzKHJhbmRWZWMsIHQxKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJhbmRWZWMuc2V0KDAsIDEsIDApO1xuICAgICAgICBuLmNyb3NzKHJhbmRWZWMsIHQxKTtcbiAgICAgIH1cblxuICAgICAgbi5jcm9zcyh0MSwgdDIpO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBUaGUgbm9ybWFsIGxlbmd0aCBpcyB6ZXJvLCBtYWtlIHNvbWV0aGluZyB1cFxuICAgICAgdDEuc2V0KDEsIDAsIDApO1xuICAgICAgdDIuc2V0KDAsIDEsIDApO1xuICAgIH1cbiAgfVxuICAvKipcbiAgICogQ29udmVydHMgdG8gYSBtb3JlIHJlYWRhYmxlIGZvcm1hdFxuICAgKi9cblxuXG4gIHRvU3RyaW5nKCkge1xuICAgIHJldHVybiB0aGlzLnggKyBcIixcIiArIHRoaXMueSArIFwiLFwiICsgdGhpcy56O1xuICB9XG4gIC8qKlxuICAgKiBDb252ZXJ0cyB0byBhbiBhcnJheVxuICAgKi9cblxuXG4gIHRvQXJyYXkoKSB7XG4gICAgcmV0dXJuIFt0aGlzLngsIHRoaXMueSwgdGhpcy56XTtcbiAgfVxuICAvKipcbiAgICogQ29waWVzIHZhbHVlIG9mIHNvdXJjZSB0byB0aGlzIHZlY3Rvci5cbiAgICovXG5cblxuICBjb3B5KHZlY3Rvcikge1xuICAgIHRoaXMueCA9IHZlY3Rvci54O1xuICAgIHRoaXMueSA9IHZlY3Rvci55O1xuICAgIHRoaXMueiA9IHZlY3Rvci56O1xuICAgIHJldHVybiB0aGlzO1xuICB9XG4gIC8qKlxuICAgKiBEbyBhIGxpbmVhciBpbnRlcnBvbGF0aW9uIGJldHdlZW4gdHdvIHZlY3RvcnNcbiAgICogQHBhcmFtIHQgQSBudW1iZXIgYmV0d2VlbiAwIGFuZCAxLiAwIHdpbGwgbWFrZSB0aGlzIGZ1bmN0aW9uIHJldHVybiB1LCBhbmQgMSB3aWxsIG1ha2UgaXQgcmV0dXJuIHYuIE51bWJlcnMgaW4gYmV0d2VlbiB3aWxsIGdlbmVyYXRlIGEgdmVjdG9yIGluIGJldHdlZW4gdGhlbS5cbiAgICovXG5cblxuICBsZXJwKHZlY3RvciwgdCwgdGFyZ2V0KSB7XG4gICAgY29uc3QgeCA9IHRoaXMueDtcbiAgICBjb25zdCB5ID0gdGhpcy55O1xuICAgIGNvbnN0IHogPSB0aGlzLno7XG4gICAgdGFyZ2V0LnggPSB4ICsgKHZlY3Rvci54IC0geCkgKiB0O1xuICAgIHRhcmdldC55ID0geSArICh2ZWN0b3IueSAtIHkpICogdDtcbiAgICB0YXJnZXQueiA9IHogKyAodmVjdG9yLnogLSB6KSAqIHQ7XG4gIH1cbiAgLyoqXG4gICAqIENoZWNrIGlmIGEgdmVjdG9yIGVxdWFscyBpcyBhbG1vc3QgZXF1YWwgdG8gYW5vdGhlciBvbmUuXG4gICAqL1xuXG5cbiAgYWxtb3N0RXF1YWxzKHZlY3RvciwgcHJlY2lzaW9uID0gMWUtNikge1xuICAgIGlmIChNYXRoLmFicyh0aGlzLnggLSB2ZWN0b3IueCkgPiBwcmVjaXNpb24gfHwgTWF0aC5hYnModGhpcy55IC0gdmVjdG9yLnkpID4gcHJlY2lzaW9uIHx8IE1hdGguYWJzKHRoaXMueiAtIHZlY3Rvci56KSA+IHByZWNpc2lvbikge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIHJldHVybiB0cnVlO1xuICB9XG4gIC8qKlxuICAgKiBDaGVjayBpZiBhIHZlY3RvciBpcyBhbG1vc3QgemVyb1xuICAgKi9cblxuXG4gIGFsbW9zdFplcm8ocHJlY2lzaW9uID0gMWUtNikge1xuICAgIGlmIChNYXRoLmFicyh0aGlzLngpID4gcHJlY2lzaW9uIHx8IE1hdGguYWJzKHRoaXMueSkgPiBwcmVjaXNpb24gfHwgTWF0aC5hYnModGhpcy56KSA+IHByZWNpc2lvbikge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIHJldHVybiB0cnVlO1xuICB9XG4gIC8qKlxuICAgKiBDaGVjayBpZiB0aGUgdmVjdG9yIGlzIGFudGktcGFyYWxsZWwgdG8gYW5vdGhlciB2ZWN0b3IuXG4gICAqIEBwYXJhbSBwcmVjaXNpb24gU2V0IHRvIHplcm8gZm9yIGV4YWN0IGNvbXBhcmlzb25zXG4gICAqL1xuXG5cbiAgaXNBbnRpcGFyYWxsZWxUbyh2ZWN0b3IsIHByZWNpc2lvbikge1xuICAgIHRoaXMubmVnYXRlKGFudGlwX25lZyk7XG4gICAgcmV0dXJuIGFudGlwX25lZy5hbG1vc3RFcXVhbHModmVjdG9yLCBwcmVjaXNpb24pO1xuICB9XG4gIC8qKlxuICAgKiBDbG9uZSB0aGUgdmVjdG9yXG4gICAqL1xuXG5cbiAgY2xvbmUoKSB7XG4gICAgcmV0dXJuIG5ldyBWZWMzKHRoaXMueCwgdGhpcy55LCB0aGlzLnopO1xuICB9XG5cbn1cblZlYzMuWkVSTyA9IHZvaWQgMDtcblZlYzMuVU5JVF9YID0gdm9pZCAwO1xuVmVjMy5VTklUX1kgPSB2b2lkIDA7XG5WZWMzLlVOSVRfWiA9IHZvaWQgMDtcblZlYzMuWkVSTyA9IG5ldyBWZWMzKDAsIDAsIDApO1xuVmVjMy5VTklUX1ggPSBuZXcgVmVjMygxLCAwLCAwKTtcblZlYzMuVU5JVF9ZID0gbmV3IFZlYzMoMCwgMSwgMCk7XG5WZWMzLlVOSVRfWiA9IG5ldyBWZWMzKDAsIDAsIDEpO1xuY29uc3QgVmVjM190YW5nZW50c19uID0gbmV3IFZlYzMoKTtcbmNvbnN0IFZlYzNfdGFuZ2VudHNfcmFuZFZlYyA9IG5ldyBWZWMzKCk7XG5jb25zdCBhbnRpcF9uZWcgPSBuZXcgVmVjMygpO1xuXG4vKipcbiAqIEF4aXMgYWxpZ25lZCBib3VuZGluZyBib3ggY2xhc3MuXG4gKi9cbmNsYXNzIEFBQkIge1xuICAvKipcbiAgICogVGhlIGxvd2VyIGJvdW5kIG9mIHRoZSBib3VuZGluZyBib3hcbiAgICovXG5cbiAgLyoqXG4gICAqIFRoZSB1cHBlciBib3VuZCBvZiB0aGUgYm91bmRpbmcgYm94XG4gICAqL1xuICBjb25zdHJ1Y3RvcihvcHRpb25zID0ge30pIHtcbiAgICB0aGlzLmxvd2VyQm91bmQgPSB2b2lkIDA7XG4gICAgdGhpcy51cHBlckJvdW5kID0gdm9pZCAwO1xuICAgIHRoaXMubG93ZXJCb3VuZCA9IG5ldyBWZWMzKCk7XG4gICAgdGhpcy51cHBlckJvdW5kID0gbmV3IFZlYzMoKTtcblxuICAgIGlmIChvcHRpb25zLmxvd2VyQm91bmQpIHtcbiAgICAgIHRoaXMubG93ZXJCb3VuZC5jb3B5KG9wdGlvbnMubG93ZXJCb3VuZCk7XG4gICAgfVxuXG4gICAgaWYgKG9wdGlvbnMudXBwZXJCb3VuZCkge1xuICAgICAgdGhpcy51cHBlckJvdW5kLmNvcHkob3B0aW9ucy51cHBlckJvdW5kKTtcbiAgICB9XG4gIH1cbiAgLyoqXG4gICAqIFNldCB0aGUgQUFCQiBib3VuZHMgZnJvbSBhIHNldCBvZiBwb2ludHMuXG4gICAqIEBwYXJhbSBwb2ludHMgQW4gYXJyYXkgb2YgVmVjMydzLlxuICAgKiBAcmV0dXJuIFRoZSBzZWxmIG9iamVjdFxuICAgKi9cblxuXG4gIHNldEZyb21Qb2ludHMocG9pbnRzLCBwb3NpdGlvbiwgcXVhdGVybmlvbiwgc2tpblNpemUpIHtcbiAgICBjb25zdCBsID0gdGhpcy5sb3dlckJvdW5kO1xuICAgIGNvbnN0IHUgPSB0aGlzLnVwcGVyQm91bmQ7XG4gICAgY29uc3QgcSA9IHF1YXRlcm5pb247IC8vIFNldCB0byB0aGUgZmlyc3QgcG9pbnRcblxuICAgIGwuY29weShwb2ludHNbMF0pO1xuXG4gICAgaWYgKHEpIHtcbiAgICAgIHEudm11bHQobCwgbCk7XG4gICAgfVxuXG4gICAgdS5jb3B5KGwpO1xuXG4gICAgZm9yIChsZXQgaSA9IDE7IGkgPCBwb2ludHMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGxldCBwID0gcG9pbnRzW2ldO1xuXG4gICAgICBpZiAocSkge1xuICAgICAgICBxLnZtdWx0KHAsIHRtcCQxKTtcbiAgICAgICAgcCA9IHRtcCQxO1xuICAgICAgfVxuXG4gICAgICBpZiAocC54ID4gdS54KSB7XG4gICAgICAgIHUueCA9IHAueDtcbiAgICAgIH1cblxuICAgICAgaWYgKHAueCA8IGwueCkge1xuICAgICAgICBsLnggPSBwLng7XG4gICAgICB9XG5cbiAgICAgIGlmIChwLnkgPiB1LnkpIHtcbiAgICAgICAgdS55ID0gcC55O1xuICAgICAgfVxuXG4gICAgICBpZiAocC55IDwgbC55KSB7XG4gICAgICAgIGwueSA9IHAueTtcbiAgICAgIH1cblxuICAgICAgaWYgKHAueiA+IHUueikge1xuICAgICAgICB1LnogPSBwLno7XG4gICAgICB9XG5cbiAgICAgIGlmIChwLnogPCBsLnopIHtcbiAgICAgICAgbC56ID0gcC56O1xuICAgICAgfVxuICAgIH0gLy8gQWRkIG9mZnNldFxuXG5cbiAgICBpZiAocG9zaXRpb24pIHtcbiAgICAgIHBvc2l0aW9uLnZhZGQobCwgbCk7XG4gICAgICBwb3NpdGlvbi52YWRkKHUsIHUpO1xuICAgIH1cblxuICAgIGlmIChza2luU2l6ZSkge1xuICAgICAgbC54IC09IHNraW5TaXplO1xuICAgICAgbC55IC09IHNraW5TaXplO1xuICAgICAgbC56IC09IHNraW5TaXplO1xuICAgICAgdS54ICs9IHNraW5TaXplO1xuICAgICAgdS55ICs9IHNraW5TaXplO1xuICAgICAgdS56ICs9IHNraW5TaXplO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzO1xuICB9XG4gIC8qKlxuICAgKiBDb3B5IGJvdW5kcyBmcm9tIGFuIEFBQkIgdG8gdGhpcyBBQUJCXG4gICAqIEBwYXJhbSBhYWJiIFNvdXJjZSB0byBjb3B5IGZyb21cbiAgICogQHJldHVybiBUaGUgdGhpcyBvYmplY3QsIGZvciBjaGFpbmFiaWxpdHlcbiAgICovXG5cblxuICBjb3B5KGFhYmIpIHtcbiAgICB0aGlzLmxvd2VyQm91bmQuY29weShhYWJiLmxvd2VyQm91bmQpO1xuICAgIHRoaXMudXBwZXJCb3VuZC5jb3B5KGFhYmIudXBwZXJCb3VuZCk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cbiAgLyoqXG4gICAqIENsb25lIGFuIEFBQkJcbiAgICovXG5cblxuICBjbG9uZSgpIHtcbiAgICByZXR1cm4gbmV3IEFBQkIoKS5jb3B5KHRoaXMpO1xuICB9XG4gIC8qKlxuICAgKiBFeHRlbmQgdGhpcyBBQUJCIHNvIHRoYXQgaXQgY292ZXJzIHRoZSBnaXZlbiBBQUJCIHRvby5cbiAgICovXG5cblxuICBleHRlbmQoYWFiYikge1xuICAgIHRoaXMubG93ZXJCb3VuZC54ID0gTWF0aC5taW4odGhpcy5sb3dlckJvdW5kLngsIGFhYmIubG93ZXJCb3VuZC54KTtcbiAgICB0aGlzLnVwcGVyQm91bmQueCA9IE1hdGgubWF4KHRoaXMudXBwZXJCb3VuZC54LCBhYWJiLnVwcGVyQm91bmQueCk7XG4gICAgdGhpcy5sb3dlckJvdW5kLnkgPSBNYXRoLm1pbih0aGlzLmxvd2VyQm91bmQueSwgYWFiYi5sb3dlckJvdW5kLnkpO1xuICAgIHRoaXMudXBwZXJCb3VuZC55ID0gTWF0aC5tYXgodGhpcy51cHBlckJvdW5kLnksIGFhYmIudXBwZXJCb3VuZC55KTtcbiAgICB0aGlzLmxvd2VyQm91bmQueiA9IE1hdGgubWluKHRoaXMubG93ZXJCb3VuZC56LCBhYWJiLmxvd2VyQm91bmQueik7XG4gICAgdGhpcy51cHBlckJvdW5kLnogPSBNYXRoLm1heCh0aGlzLnVwcGVyQm91bmQueiwgYWFiYi51cHBlckJvdW5kLnopO1xuICB9XG4gIC8qKlxuICAgKiBSZXR1cm5zIHRydWUgaWYgdGhlIGdpdmVuIEFBQkIgb3ZlcmxhcHMgdGhpcyBBQUJCLlxuICAgKi9cblxuXG4gIG92ZXJsYXBzKGFhYmIpIHtcbiAgICBjb25zdCBsMSA9IHRoaXMubG93ZXJCb3VuZDtcbiAgICBjb25zdCB1MSA9IHRoaXMudXBwZXJCb3VuZDtcbiAgICBjb25zdCBsMiA9IGFhYmIubG93ZXJCb3VuZDtcbiAgICBjb25zdCB1MiA9IGFhYmIudXBwZXJCb3VuZDsgLy8gICAgICBsMiAgICAgICAgdTJcbiAgICAvLyAgICAgIHwtLS0tLS0tLS18XG4gICAgLy8gfC0tLS0tLS0tfFxuICAgIC8vIGwxICAgICAgIHUxXG5cbiAgICBjb25zdCBvdmVybGFwc1ggPSBsMi54IDw9IHUxLnggJiYgdTEueCA8PSB1Mi54IHx8IGwxLnggPD0gdTIueCAmJiB1Mi54IDw9IHUxLng7XG4gICAgY29uc3Qgb3ZlcmxhcHNZID0gbDIueSA8PSB1MS55ICYmIHUxLnkgPD0gdTIueSB8fCBsMS55IDw9IHUyLnkgJiYgdTIueSA8PSB1MS55O1xuICAgIGNvbnN0IG92ZXJsYXBzWiA9IGwyLnogPD0gdTEueiAmJiB1MS56IDw9IHUyLnogfHwgbDEueiA8PSB1Mi56ICYmIHUyLnogPD0gdTEuejtcbiAgICByZXR1cm4gb3ZlcmxhcHNYICYmIG92ZXJsYXBzWSAmJiBvdmVybGFwc1o7XG4gIH0gLy8gTW9zdGx5IGZvciBkZWJ1Z2dpbmdcblxuXG4gIHZvbHVtZSgpIHtcbiAgICBjb25zdCBsID0gdGhpcy5sb3dlckJvdW5kO1xuICAgIGNvbnN0IHUgPSB0aGlzLnVwcGVyQm91bmQ7XG4gICAgcmV0dXJuICh1LnggLSBsLngpICogKHUueSAtIGwueSkgKiAodS56IC0gbC56KTtcbiAgfVxuICAvKipcbiAgICogUmV0dXJucyB0cnVlIGlmIHRoZSBnaXZlbiBBQUJCIGlzIGZ1bGx5IGNvbnRhaW5lZCBpbiB0aGlzIEFBQkIuXG4gICAqL1xuXG5cbiAgY29udGFpbnMoYWFiYikge1xuICAgIGNvbnN0IGwxID0gdGhpcy5sb3dlckJvdW5kO1xuICAgIGNvbnN0IHUxID0gdGhpcy51cHBlckJvdW5kO1xuICAgIGNvbnN0IGwyID0gYWFiYi5sb3dlckJvdW5kO1xuICAgIGNvbnN0IHUyID0gYWFiYi51cHBlckJvdW5kOyAvLyAgICAgIGwyICAgICAgICB1MlxuICAgIC8vICAgICAgfC0tLS0tLS0tLXxcbiAgICAvLyB8LS0tLS0tLS0tLS0tLS0tfFxuICAgIC8vIGwxICAgICAgICAgICAgICB1MVxuXG4gICAgcmV0dXJuIGwxLnggPD0gbDIueCAmJiB1MS54ID49IHUyLnggJiYgbDEueSA8PSBsMi55ICYmIHUxLnkgPj0gdTIueSAmJiBsMS56IDw9IGwyLnogJiYgdTEueiA+PSB1Mi56O1xuICB9XG5cbiAgZ2V0Q29ybmVycyhhLCBiLCBjLCBkLCBlLCBmLCBnLCBoKSB7XG4gICAgY29uc3QgbCA9IHRoaXMubG93ZXJCb3VuZDtcbiAgICBjb25zdCB1ID0gdGhpcy51cHBlckJvdW5kO1xuICAgIGEuY29weShsKTtcbiAgICBiLnNldCh1LngsIGwueSwgbC56KTtcbiAgICBjLnNldCh1LngsIHUueSwgbC56KTtcbiAgICBkLnNldChsLngsIHUueSwgdS56KTtcbiAgICBlLnNldCh1LngsIGwueSwgdS56KTtcbiAgICBmLnNldChsLngsIHUueSwgbC56KTtcbiAgICBnLnNldChsLngsIGwueSwgdS56KTtcbiAgICBoLmNvcHkodSk7XG4gIH1cbiAgLyoqXG4gICAqIEdldCB0aGUgcmVwcmVzZW50YXRpb24gb2YgYW4gQUFCQiBpbiBhbm90aGVyIGZyYW1lLlxuICAgKiBAcmV0dXJuIFRoZSBcInRhcmdldFwiIEFBQkIgb2JqZWN0LlxuICAgKi9cblxuXG4gIHRvTG9jYWxGcmFtZShmcmFtZSwgdGFyZ2V0KSB7XG4gICAgY29uc3QgY29ybmVycyA9IHRyYW5zZm9ybUludG9GcmFtZV9jb3JuZXJzO1xuICAgIGNvbnN0IGEgPSBjb3JuZXJzWzBdO1xuICAgIGNvbnN0IGIgPSBjb3JuZXJzWzFdO1xuICAgIGNvbnN0IGMgPSBjb3JuZXJzWzJdO1xuICAgIGNvbnN0IGQgPSBjb3JuZXJzWzNdO1xuICAgIGNvbnN0IGUgPSBjb3JuZXJzWzRdO1xuICAgIGNvbnN0IGYgPSBjb3JuZXJzWzVdO1xuICAgIGNvbnN0IGcgPSBjb3JuZXJzWzZdO1xuICAgIGNvbnN0IGggPSBjb3JuZXJzWzddOyAvLyBHZXQgY29ybmVycyBpbiBjdXJyZW50IGZyYW1lXG5cbiAgICB0aGlzLmdldENvcm5lcnMoYSwgYiwgYywgZCwgZSwgZiwgZywgaCk7IC8vIFRyYW5zZm9ybSB0aGVtIHRvIG5ldyBsb2NhbCBmcmFtZVxuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgIT09IDg7IGkrKykge1xuICAgICAgY29uc3QgY29ybmVyID0gY29ybmVyc1tpXTtcbiAgICAgIGZyYW1lLnBvaW50VG9Mb2NhbChjb3JuZXIsIGNvcm5lcik7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRhcmdldC5zZXRGcm9tUG9pbnRzKGNvcm5lcnMpO1xuICB9XG4gIC8qKlxuICAgKiBHZXQgdGhlIHJlcHJlc2VudGF0aW9uIG9mIGFuIEFBQkIgaW4gdGhlIGdsb2JhbCBmcmFtZS5cbiAgICogQHJldHVybiBUaGUgXCJ0YXJnZXRcIiBBQUJCIG9iamVjdC5cbiAgICovXG5cblxuICB0b1dvcmxkRnJhbWUoZnJhbWUsIHRhcmdldCkge1xuICAgIGNvbnN0IGNvcm5lcnMgPSB0cmFuc2Zvcm1JbnRvRnJhbWVfY29ybmVycztcbiAgICBjb25zdCBhID0gY29ybmVyc1swXTtcbiAgICBjb25zdCBiID0gY29ybmVyc1sxXTtcbiAgICBjb25zdCBjID0gY29ybmVyc1syXTtcbiAgICBjb25zdCBkID0gY29ybmVyc1szXTtcbiAgICBjb25zdCBlID0gY29ybmVyc1s0XTtcbiAgICBjb25zdCBmID0gY29ybmVyc1s1XTtcbiAgICBjb25zdCBnID0gY29ybmVyc1s2XTtcbiAgICBjb25zdCBoID0gY29ybmVyc1s3XTsgLy8gR2V0IGNvcm5lcnMgaW4gY3VycmVudCBmcmFtZVxuXG4gICAgdGhpcy5nZXRDb3JuZXJzKGEsIGIsIGMsIGQsIGUsIGYsIGcsIGgpOyAvLyBUcmFuc2Zvcm0gdGhlbSB0byBuZXcgbG9jYWwgZnJhbWVcblxuICAgIGZvciAobGV0IGkgPSAwOyBpICE9PSA4OyBpKyspIHtcbiAgICAgIGNvbnN0IGNvcm5lciA9IGNvcm5lcnNbaV07XG4gICAgICBmcmFtZS5wb2ludFRvV29ybGQoY29ybmVyLCBjb3JuZXIpO1xuICAgIH1cblxuICAgIHJldHVybiB0YXJnZXQuc2V0RnJvbVBvaW50cyhjb3JuZXJzKTtcbiAgfVxuICAvKipcbiAgICogQ2hlY2sgaWYgdGhlIEFBQkIgaXMgaGl0IGJ5IGEgcmF5LlxuICAgKi9cblxuXG4gIG92ZXJsYXBzUmF5KHJheSkge1xuICAgIGNvbnN0IHtcbiAgICAgIGRpcmVjdGlvbixcbiAgICAgIGZyb21cbiAgICB9ID0gcmF5OyAvLyBjb25zdCB0ID0gMFxuICAgIC8vIHJheS5kaXJlY3Rpb24gaXMgdW5pdCBkaXJlY3Rpb24gdmVjdG9yIG9mIHJheVxuXG4gICAgY29uc3QgZGlyRnJhY1ggPSAxIC8gZGlyZWN0aW9uLng7XG4gICAgY29uc3QgZGlyRnJhY1kgPSAxIC8gZGlyZWN0aW9uLnk7XG4gICAgY29uc3QgZGlyRnJhY1ogPSAxIC8gZGlyZWN0aW9uLno7IC8vIHRoaXMubG93ZXJCb3VuZCBpcyB0aGUgY29ybmVyIG9mIEFBQkIgd2l0aCBtaW5pbWFsIGNvb3JkaW5hdGVzIC0gbGVmdCBib3R0b20sIHJ0IGlzIG1heGltYWwgY29ybmVyXG5cbiAgICBjb25zdCB0MSA9ICh0aGlzLmxvd2VyQm91bmQueCAtIGZyb20ueCkgKiBkaXJGcmFjWDtcbiAgICBjb25zdCB0MiA9ICh0aGlzLnVwcGVyQm91bmQueCAtIGZyb20ueCkgKiBkaXJGcmFjWDtcbiAgICBjb25zdCB0MyA9ICh0aGlzLmxvd2VyQm91bmQueSAtIGZyb20ueSkgKiBkaXJGcmFjWTtcbiAgICBjb25zdCB0NCA9ICh0aGlzLnVwcGVyQm91bmQueSAtIGZyb20ueSkgKiBkaXJGcmFjWTtcbiAgICBjb25zdCB0NSA9ICh0aGlzLmxvd2VyQm91bmQueiAtIGZyb20ueikgKiBkaXJGcmFjWjtcbiAgICBjb25zdCB0NiA9ICh0aGlzLnVwcGVyQm91bmQueiAtIGZyb20ueikgKiBkaXJGcmFjWjsgLy8gY29uc3QgdG1pbiA9IE1hdGgubWF4KE1hdGgubWF4KE1hdGgubWluKHQxLCB0MiksIE1hdGgubWluKHQzLCB0NCkpKTtcbiAgICAvLyBjb25zdCB0bWF4ID0gTWF0aC5taW4oTWF0aC5taW4oTWF0aC5tYXgodDEsIHQyKSwgTWF0aC5tYXgodDMsIHQ0KSkpO1xuXG4gICAgY29uc3QgdG1pbiA9IE1hdGgubWF4KE1hdGgubWF4KE1hdGgubWluKHQxLCB0MiksIE1hdGgubWluKHQzLCB0NCkpLCBNYXRoLm1pbih0NSwgdDYpKTtcbiAgICBjb25zdCB0bWF4ID0gTWF0aC5taW4oTWF0aC5taW4oTWF0aC5tYXgodDEsIHQyKSwgTWF0aC5tYXgodDMsIHQ0KSksIE1hdGgubWF4KHQ1LCB0NikpOyAvLyBpZiB0bWF4IDwgMCwgcmF5IChsaW5lKSBpcyBpbnRlcnNlY3RpbmcgQUFCQiwgYnV0IHdob2xlIEFBQkIgaXMgYmVoaW5nIHVzXG5cbiAgICBpZiAodG1heCA8IDApIHtcbiAgICAgIC8vdCA9IHRtYXg7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfSAvLyBpZiB0bWluID4gdG1heCwgcmF5IGRvZXNuJ3QgaW50ZXJzZWN0IEFBQkJcblxuXG4gICAgaWYgKHRtaW4gPiB0bWF4KSB7XG4gICAgICAvL3QgPSB0bWF4O1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbn1cbmNvbnN0IHRtcCQxID0gbmV3IFZlYzMoKTtcbmNvbnN0IHRyYW5zZm9ybUludG9GcmFtZV9jb3JuZXJzID0gW25ldyBWZWMzKCksIG5ldyBWZWMzKCksIG5ldyBWZWMzKCksIG5ldyBWZWMzKCksIG5ldyBWZWMzKCksIG5ldyBWZWMzKCksIG5ldyBWZWMzKCksIG5ldyBWZWMzKCldO1xuXG4vKipcbiAqIENvbGxpc2lvbiBcIm1hdHJpeFwiLlxuICogSXQncyBhY3R1YWxseSBhIHRyaWFuZ3VsYXItc2hhcGVkIGFycmF5IG9mIHdoZXRoZXIgdHdvIGJvZGllcyBhcmUgdG91Y2hpbmcgdGhpcyBzdGVwLCBmb3IgcmVmZXJlbmNlIG5leHQgc3RlcFxuICovXG5jbGFzcyBBcnJheUNvbGxpc2lvbk1hdHJpeCB7XG4gIC8qKlxuICAgKiBUaGUgbWF0cml4IHN0b3JhZ2UuXG4gICAqL1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICB0aGlzLm1hdHJpeCA9IHZvaWQgMDtcbiAgICB0aGlzLm1hdHJpeCA9IFtdO1xuICB9XG4gIC8qKlxuICAgKiBHZXQgYW4gZWxlbWVudFxuICAgKi9cblxuXG4gIGdldChiaSwgYmopIHtcbiAgICBsZXQge1xuICAgICAgaW5kZXg6IGlcbiAgICB9ID0gYmk7XG4gICAgbGV0IHtcbiAgICAgIGluZGV4OiBqXG4gICAgfSA9IGJqO1xuXG4gICAgaWYgKGogPiBpKSB7XG4gICAgICBjb25zdCB0ZW1wID0gajtcbiAgICAgIGogPSBpO1xuICAgICAgaSA9IHRlbXA7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMubWF0cml4WyhpICogKGkgKyAxKSA+PiAxKSArIGogLSAxXTtcbiAgfVxuICAvKipcbiAgICogU2V0IGFuIGVsZW1lbnRcbiAgICovXG5cblxuICBzZXQoYmksIGJqLCB2YWx1ZSkge1xuICAgIGxldCB7XG4gICAgICBpbmRleDogaVxuICAgIH0gPSBiaTtcbiAgICBsZXQge1xuICAgICAgaW5kZXg6IGpcbiAgICB9ID0gYmo7XG5cbiAgICBpZiAoaiA+IGkpIHtcbiAgICAgIGNvbnN0IHRlbXAgPSBqO1xuICAgICAgaiA9IGk7XG4gICAgICBpID0gdGVtcDtcbiAgICB9XG5cbiAgICB0aGlzLm1hdHJpeFsoaSAqIChpICsgMSkgPj4gMSkgKyBqIC0gMV0gPSB2YWx1ZSA/IDEgOiAwO1xuICB9XG4gIC8qKlxuICAgKiBTZXRzIGFsbCBlbGVtZW50cyB0byB6ZXJvXG4gICAqL1xuXG5cbiAgcmVzZXQoKSB7XG4gICAgZm9yIChsZXQgaSA9IDAsIGwgPSB0aGlzLm1hdHJpeC5sZW5ndGg7IGkgIT09IGw7IGkrKykge1xuICAgICAgdGhpcy5tYXRyaXhbaV0gPSAwO1xuICAgIH1cbiAgfVxuICAvKipcbiAgICogU2V0cyB0aGUgbWF4IG51bWJlciBvZiBvYmplY3RzXG4gICAqL1xuXG5cbiAgc2V0TnVtT2JqZWN0cyhuKSB7XG4gICAgdGhpcy5tYXRyaXgubGVuZ3RoID0gbiAqIChuIC0gMSkgPj4gMTtcbiAgfVxuXG59XG5cbi8qKlxuICogQmFzZSBjbGFzcyBmb3Igb2JqZWN0cyB0aGF0IGRpc3BhdGNoZXMgZXZlbnRzLlxuICovXG5jbGFzcyBFdmVudFRhcmdldCB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHRoaXMuX2xpc3RlbmVycyA9IHZvaWQgMDtcbiAgfVxuXG4gIC8qKlxuICAgKiBBZGQgYW4gZXZlbnQgbGlzdGVuZXJcbiAgICogQHJldHVybiBUaGUgc2VsZiBvYmplY3QsIGZvciBjaGFpbmFiaWxpdHkuXG4gICAqL1xuICBhZGRFdmVudExpc3RlbmVyKHR5cGUsIGxpc3RlbmVyKSB7XG4gICAgaWYgKHRoaXMuX2xpc3RlbmVycyA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICB0aGlzLl9saXN0ZW5lcnMgPSB7fTtcbiAgICB9XG5cbiAgICBjb25zdCBsaXN0ZW5lcnMgPSB0aGlzLl9saXN0ZW5lcnM7XG5cbiAgICBpZiAobGlzdGVuZXJzW3R5cGVdID09PSB1bmRlZmluZWQpIHtcbiAgICAgIGxpc3RlbmVyc1t0eXBlXSA9IFtdO1xuICAgIH1cblxuICAgIGlmICghbGlzdGVuZXJzW3R5cGVdLmluY2x1ZGVzKGxpc3RlbmVyKSkge1xuICAgICAgbGlzdGVuZXJzW3R5cGVdLnB1c2gobGlzdGVuZXIpO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzO1xuICB9XG4gIC8qKlxuICAgKiBDaGVjayBpZiBhbiBldmVudCBsaXN0ZW5lciBpcyBhZGRlZFxuICAgKi9cblxuXG4gIGhhc0V2ZW50TGlzdGVuZXIodHlwZSwgbGlzdGVuZXIpIHtcbiAgICBpZiAodGhpcy5fbGlzdGVuZXJzID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICBjb25zdCBsaXN0ZW5lcnMgPSB0aGlzLl9saXN0ZW5lcnM7XG5cbiAgICBpZiAobGlzdGVuZXJzW3R5cGVdICE9PSB1bmRlZmluZWQgJiYgbGlzdGVuZXJzW3R5cGVdLmluY2x1ZGVzKGxpc3RlbmVyKSkge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIC8qKlxuICAgKiBDaGVjayBpZiBhbnkgZXZlbnQgbGlzdGVuZXIgb2YgdGhlIGdpdmVuIHR5cGUgaXMgYWRkZWRcbiAgICovXG5cblxuICBoYXNBbnlFdmVudExpc3RlbmVyKHR5cGUpIHtcbiAgICBpZiAodGhpcy5fbGlzdGVuZXJzID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICBjb25zdCBsaXN0ZW5lcnMgPSB0aGlzLl9saXN0ZW5lcnM7XG4gICAgcmV0dXJuIGxpc3RlbmVyc1t0eXBlXSAhPT0gdW5kZWZpbmVkO1xuICB9XG4gIC8qKlxuICAgKiBSZW1vdmUgYW4gZXZlbnQgbGlzdGVuZXJcbiAgICogQHJldHVybiBUaGUgc2VsZiBvYmplY3QsIGZvciBjaGFpbmFiaWxpdHkuXG4gICAqL1xuXG5cbiAgcmVtb3ZlRXZlbnRMaXN0ZW5lcih0eXBlLCBsaXN0ZW5lcikge1xuICAgIGlmICh0aGlzLl9saXN0ZW5lcnMgPT09IHVuZGVmaW5lZCkge1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuXG4gICAgY29uc3QgbGlzdGVuZXJzID0gdGhpcy5fbGlzdGVuZXJzO1xuXG4gICAgaWYgKGxpc3RlbmVyc1t0eXBlXSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9XG5cbiAgICBjb25zdCBpbmRleCA9IGxpc3RlbmVyc1t0eXBlXS5pbmRleE9mKGxpc3RlbmVyKTtcblxuICAgIGlmIChpbmRleCAhPT0gLTEpIHtcbiAgICAgIGxpc3RlbmVyc1t0eXBlXS5zcGxpY2UoaW5kZXgsIDEpO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzO1xuICB9XG4gIC8qKlxuICAgKiBFbWl0IGFuIGV2ZW50LlxuICAgKiBAcmV0dXJuIFRoZSBzZWxmIG9iamVjdCwgZm9yIGNoYWluYWJpbGl0eS5cbiAgICovXG5cblxuICBkaXNwYXRjaEV2ZW50KGV2ZW50KSB7XG4gICAgaWYgKHRoaXMuX2xpc3RlbmVycyA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9XG5cbiAgICBjb25zdCBsaXN0ZW5lcnMgPSB0aGlzLl9saXN0ZW5lcnM7XG4gICAgY29uc3QgbGlzdGVuZXJBcnJheSA9IGxpc3RlbmVyc1tldmVudC50eXBlXTtcblxuICAgIGlmIChsaXN0ZW5lckFycmF5ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIGV2ZW50LnRhcmdldCA9IHRoaXM7XG5cbiAgICAgIGZvciAobGV0IGkgPSAwLCBsID0gbGlzdGVuZXJBcnJheS5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgICAgbGlzdGVuZXJBcnJheVtpXS5jYWxsKHRoaXMsIGV2ZW50KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG59XG5cbi8qKlxuICogQSBRdWF0ZXJuaW9uIGRlc2NyaWJlcyBhIHJvdGF0aW9uIGluIDNEIHNwYWNlLiBUaGUgUXVhdGVybmlvbiBpcyBtYXRoZW1hdGljYWxseSBkZWZpbmVkIGFzIFEgPSB4KmkgKyB5KmogKyB6KmsgKyB3LCB3aGVyZSAoaSxqLGspIGFyZSBpbWFnaW5hcnkgYmFzaXMgdmVjdG9ycy4gKHgseSx6KSBjYW4gYmUgc2VlbiBhcyBhIHZlY3RvciByZWxhdGVkIHRvIHRoZSBheGlzIG9mIHJvdGF0aW9uLCB3aGlsZSB0aGUgcmVhbCBtdWx0aXBsaWVyLCB3LCBpcyByZWxhdGVkIHRvIHRoZSBhbW91bnQgb2Ygcm90YXRpb24uXG4gKiBAcGFyYW0geCBNdWx0aXBsaWVyIG9mIHRoZSBpbWFnaW5hcnkgYmFzaXMgdmVjdG9yIGkuXG4gKiBAcGFyYW0geSBNdWx0aXBsaWVyIG9mIHRoZSBpbWFnaW5hcnkgYmFzaXMgdmVjdG9yIGouXG4gKiBAcGFyYW0geiBNdWx0aXBsaWVyIG9mIHRoZSBpbWFnaW5hcnkgYmFzaXMgdmVjdG9yIGsuXG4gKiBAcGFyYW0gdyBNdWx0aXBsaWVyIG9mIHRoZSByZWFsIHBhcnQuXG4gKiBAc2VlIGh0dHA6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvUXVhdGVybmlvblxuICovXG5cbmNsYXNzIFF1YXRlcm5pb24ge1xuICBjb25zdHJ1Y3Rvcih4ID0gMCwgeSA9IDAsIHogPSAwLCB3ID0gMSkge1xuICAgIHRoaXMueCA9IHZvaWQgMDtcbiAgICB0aGlzLnkgPSB2b2lkIDA7XG4gICAgdGhpcy56ID0gdm9pZCAwO1xuICAgIHRoaXMudyA9IHZvaWQgMDtcbiAgICB0aGlzLnggPSB4O1xuICAgIHRoaXMueSA9IHk7XG4gICAgdGhpcy56ID0gejtcbiAgICB0aGlzLncgPSB3O1xuICB9XG4gIC8qKlxuICAgKiBTZXQgdGhlIHZhbHVlIG9mIHRoZSBxdWF0ZXJuaW9uLlxuICAgKi9cblxuXG4gIHNldCh4LCB5LCB6LCB3KSB7XG4gICAgdGhpcy54ID0geDtcbiAgICB0aGlzLnkgPSB5O1xuICAgIHRoaXMueiA9IHo7XG4gICAgdGhpcy53ID0gdztcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuICAvKipcbiAgICogQ29udmVydCB0byBhIHJlYWRhYmxlIGZvcm1hdFxuICAgKiBAcmV0dXJuIFwieCx5LHosd1wiXG4gICAqL1xuXG5cbiAgdG9TdHJpbmcoKSB7XG4gICAgcmV0dXJuIHRoaXMueCArIFwiLFwiICsgdGhpcy55ICsgXCIsXCIgKyB0aGlzLnogKyBcIixcIiArIHRoaXMudztcbiAgfVxuICAvKipcbiAgICogQ29udmVydCB0byBhbiBBcnJheVxuICAgKiBAcmV0dXJuIFt4LCB5LCB6LCB3XVxuICAgKi9cblxuXG4gIHRvQXJyYXkoKSB7XG4gICAgcmV0dXJuIFt0aGlzLngsIHRoaXMueSwgdGhpcy56LCB0aGlzLnddO1xuICB9XG4gIC8qKlxuICAgKiBTZXQgdGhlIHF1YXRlcm5pb24gY29tcG9uZW50cyBnaXZlbiBhbiBheGlzIGFuZCBhbiBhbmdsZSBpbiByYWRpYW5zLlxuICAgKi9cblxuXG4gIHNldEZyb21BeGlzQW5nbGUodmVjdG9yLCBhbmdsZSkge1xuICAgIGNvbnN0IHMgPSBNYXRoLnNpbihhbmdsZSAqIDAuNSk7XG4gICAgdGhpcy54ID0gdmVjdG9yLnggKiBzO1xuICAgIHRoaXMueSA9IHZlY3Rvci55ICogcztcbiAgICB0aGlzLnogPSB2ZWN0b3IueiAqIHM7XG4gICAgdGhpcy53ID0gTWF0aC5jb3MoYW5nbGUgKiAwLjUpO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG4gIC8qKlxuICAgKiBDb252ZXJ0cyB0aGUgcXVhdGVybmlvbiB0byBbIGF4aXMsIGFuZ2xlIF0gcmVwcmVzZW50YXRpb24uXG4gICAqIEBwYXJhbSB0YXJnZXRBeGlzIEEgdmVjdG9yIG9iamVjdCB0byByZXVzZSBmb3Igc3RvcmluZyB0aGUgYXhpcy5cbiAgICogQHJldHVybiBBbiBhcnJheSwgZmlyc3QgZWxlbWVudCBpcyB0aGUgYXhpcyBhbmQgdGhlIHNlY29uZCBpcyB0aGUgYW5nbGUgaW4gcmFkaWFucy5cbiAgICovXG5cblxuICB0b0F4aXNBbmdsZSh0YXJnZXRBeGlzID0gbmV3IFZlYzMoKSkge1xuICAgIHRoaXMubm9ybWFsaXplKCk7IC8vIGlmIHc+MSBhY29zIGFuZCBzcXJ0IHdpbGwgcHJvZHVjZSBlcnJvcnMsIHRoaXMgY2FudCBoYXBwZW4gaWYgcXVhdGVybmlvbiBpcyBub3JtYWxpc2VkXG5cbiAgICBjb25zdCBhbmdsZSA9IDIgKiBNYXRoLmFjb3ModGhpcy53KTtcbiAgICBjb25zdCBzID0gTWF0aC5zcXJ0KDEgLSB0aGlzLncgKiB0aGlzLncpOyAvLyBhc3N1bWluZyBxdWF0ZXJuaW9uIG5vcm1hbGlzZWQgdGhlbiB3IGlzIGxlc3MgdGhhbiAxLCBzbyB0ZXJtIGFsd2F5cyBwb3NpdGl2ZS5cblxuICAgIGlmIChzIDwgMC4wMDEpIHtcbiAgICAgIC8vIHRlc3QgdG8gYXZvaWQgZGl2aWRlIGJ5IHplcm8sIHMgaXMgYWx3YXlzIHBvc2l0aXZlIGR1ZSB0byBzcXJ0XG4gICAgICAvLyBpZiBzIGNsb3NlIHRvIHplcm8gdGhlbiBkaXJlY3Rpb24gb2YgYXhpcyBub3QgaW1wb3J0YW50XG4gICAgICB0YXJnZXRBeGlzLnggPSB0aGlzLng7IC8vIGlmIGl0IGlzIGltcG9ydGFudCB0aGF0IGF4aXMgaXMgbm9ybWFsaXNlZCB0aGVuIHJlcGxhY2Ugd2l0aCB4PTE7IHk9ej0wO1xuXG4gICAgICB0YXJnZXRBeGlzLnkgPSB0aGlzLnk7XG4gICAgICB0YXJnZXRBeGlzLnogPSB0aGlzLno7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRhcmdldEF4aXMueCA9IHRoaXMueCAvIHM7IC8vIG5vcm1hbGlzZSBheGlzXG5cbiAgICAgIHRhcmdldEF4aXMueSA9IHRoaXMueSAvIHM7XG4gICAgICB0YXJnZXRBeGlzLnogPSB0aGlzLnogLyBzO1xuICAgIH1cblxuICAgIHJldHVybiBbdGFyZ2V0QXhpcywgYW5nbGVdO1xuICB9XG4gIC8qKlxuICAgKiBTZXQgdGhlIHF1YXRlcm5pb24gdmFsdWUgZ2l2ZW4gdHdvIHZlY3RvcnMuIFRoZSByZXN1bHRpbmcgcm90YXRpb24gd2lsbCBiZSB0aGUgbmVlZGVkIHJvdGF0aW9uIHRvIHJvdGF0ZSB1IHRvIHYuXG4gICAqL1xuXG5cbiAgc2V0RnJvbVZlY3RvcnModSwgdikge1xuICAgIGlmICh1LmlzQW50aXBhcmFsbGVsVG8odikpIHtcbiAgICAgIGNvbnN0IHQxID0gc2Z2X3QxO1xuICAgICAgY29uc3QgdDIgPSBzZnZfdDI7XG4gICAgICB1LnRhbmdlbnRzKHQxLCB0Mik7XG4gICAgICB0aGlzLnNldEZyb21BeGlzQW5nbGUodDEsIE1hdGguUEkpO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCBhID0gdS5jcm9zcyh2KTtcbiAgICAgIHRoaXMueCA9IGEueDtcbiAgICAgIHRoaXMueSA9IGEueTtcbiAgICAgIHRoaXMueiA9IGEuejtcbiAgICAgIHRoaXMudyA9IE1hdGguc3FydCh1Lmxlbmd0aCgpICoqIDIgKiB2Lmxlbmd0aCgpICoqIDIpICsgdS5kb3Qodik7XG4gICAgICB0aGlzLm5vcm1hbGl6ZSgpO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzO1xuICB9XG4gIC8qKlxuICAgKiBNdWx0aXBseSB0aGUgcXVhdGVybmlvbiB3aXRoIGFuIG90aGVyIHF1YXRlcm5pb24uXG4gICAqL1xuXG5cbiAgbXVsdChxdWF0LCB0YXJnZXQgPSBuZXcgUXVhdGVybmlvbigpKSB7XG4gICAgY29uc3QgYXggPSB0aGlzLng7XG4gICAgY29uc3QgYXkgPSB0aGlzLnk7XG4gICAgY29uc3QgYXogPSB0aGlzLno7XG4gICAgY29uc3QgYXcgPSB0aGlzLnc7XG4gICAgY29uc3QgYnggPSBxdWF0Lng7XG4gICAgY29uc3QgYnkgPSBxdWF0Lnk7XG4gICAgY29uc3QgYnogPSBxdWF0Lno7XG4gICAgY29uc3QgYncgPSBxdWF0Lnc7XG4gICAgdGFyZ2V0LnggPSBheCAqIGJ3ICsgYXcgKiBieCArIGF5ICogYnogLSBheiAqIGJ5O1xuICAgIHRhcmdldC55ID0gYXkgKiBidyArIGF3ICogYnkgKyBheiAqIGJ4IC0gYXggKiBiejtcbiAgICB0YXJnZXQueiA9IGF6ICogYncgKyBhdyAqIGJ6ICsgYXggKiBieSAtIGF5ICogYng7XG4gICAgdGFyZ2V0LncgPSBhdyAqIGJ3IC0gYXggKiBieCAtIGF5ICogYnkgLSBheiAqIGJ6O1xuICAgIHJldHVybiB0YXJnZXQ7XG4gIH1cbiAgLyoqXG4gICAqIEdldCB0aGUgaW52ZXJzZSBxdWF0ZXJuaW9uIHJvdGF0aW9uLlxuICAgKi9cblxuXG4gIGludmVyc2UodGFyZ2V0ID0gbmV3IFF1YXRlcm5pb24oKSkge1xuICAgIGNvbnN0IHggPSB0aGlzLng7XG4gICAgY29uc3QgeSA9IHRoaXMueTtcbiAgICBjb25zdCB6ID0gdGhpcy56O1xuICAgIGNvbnN0IHcgPSB0aGlzLnc7XG4gICAgdGhpcy5jb25qdWdhdGUodGFyZ2V0KTtcbiAgICBjb25zdCBpbm9ybTIgPSAxIC8gKHggKiB4ICsgeSAqIHkgKyB6ICogeiArIHcgKiB3KTtcbiAgICB0YXJnZXQueCAqPSBpbm9ybTI7XG4gICAgdGFyZ2V0LnkgKj0gaW5vcm0yO1xuICAgIHRhcmdldC56ICo9IGlub3JtMjtcbiAgICB0YXJnZXQudyAqPSBpbm9ybTI7XG4gICAgcmV0dXJuIHRhcmdldDtcbiAgfVxuICAvKipcbiAgICogR2V0IHRoZSBxdWF0ZXJuaW9uIGNvbmp1Z2F0ZVxuICAgKi9cblxuXG4gIGNvbmp1Z2F0ZSh0YXJnZXQgPSBuZXcgUXVhdGVybmlvbigpKSB7XG4gICAgdGFyZ2V0LnggPSAtdGhpcy54O1xuICAgIHRhcmdldC55ID0gLXRoaXMueTtcbiAgICB0YXJnZXQueiA9IC10aGlzLno7XG4gICAgdGFyZ2V0LncgPSB0aGlzLnc7XG4gICAgcmV0dXJuIHRhcmdldDtcbiAgfVxuICAvKipcbiAgICogTm9ybWFsaXplIHRoZSBxdWF0ZXJuaW9uLiBOb3RlIHRoYXQgdGhpcyBjaGFuZ2VzIHRoZSB2YWx1ZXMgb2YgdGhlIHF1YXRlcm5pb24uXG4gICAqL1xuXG5cbiAgbm9ybWFsaXplKCkge1xuICAgIGxldCBsID0gTWF0aC5zcXJ0KHRoaXMueCAqIHRoaXMueCArIHRoaXMueSAqIHRoaXMueSArIHRoaXMueiAqIHRoaXMueiArIHRoaXMudyAqIHRoaXMudyk7XG5cbiAgICBpZiAobCA9PT0gMCkge1xuICAgICAgdGhpcy54ID0gMDtcbiAgICAgIHRoaXMueSA9IDA7XG4gICAgICB0aGlzLnogPSAwO1xuICAgICAgdGhpcy53ID0gMDtcbiAgICB9IGVsc2Uge1xuICAgICAgbCA9IDEgLyBsO1xuICAgICAgdGhpcy54ICo9IGw7XG4gICAgICB0aGlzLnkgKj0gbDtcbiAgICAgIHRoaXMueiAqPSBsO1xuICAgICAgdGhpcy53ICo9IGw7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cbiAgLyoqXG4gICAqIEFwcHJveGltYXRpb24gb2YgcXVhdGVybmlvbiBub3JtYWxpemF0aW9uLiBXb3JrcyBiZXN0IHdoZW4gcXVhdCBpcyBhbHJlYWR5IGFsbW9zdC1ub3JtYWxpemVkLlxuICAgKiBAYXV0aG9yIHVucGhhc2VkLCBodHRwczovL2dpdGh1Yi5jb20vdW5waGFzZWRcbiAgICovXG5cblxuICBub3JtYWxpemVGYXN0KCkge1xuICAgIGNvbnN0IGYgPSAoMy4wIC0gKHRoaXMueCAqIHRoaXMueCArIHRoaXMueSAqIHRoaXMueSArIHRoaXMueiAqIHRoaXMueiArIHRoaXMudyAqIHRoaXMudykpIC8gMi4wO1xuXG4gICAgaWYgKGYgPT09IDApIHtcbiAgICAgIHRoaXMueCA9IDA7XG4gICAgICB0aGlzLnkgPSAwO1xuICAgICAgdGhpcy56ID0gMDtcbiAgICAgIHRoaXMudyA9IDA7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMueCAqPSBmO1xuICAgICAgdGhpcy55ICo9IGY7XG4gICAgICB0aGlzLnogKj0gZjtcbiAgICAgIHRoaXMudyAqPSBmO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzO1xuICB9XG4gIC8qKlxuICAgKiBNdWx0aXBseSB0aGUgcXVhdGVybmlvbiBieSBhIHZlY3RvclxuICAgKi9cblxuXG4gIHZtdWx0KHYsIHRhcmdldCA9IG5ldyBWZWMzKCkpIHtcbiAgICBjb25zdCB4ID0gdi54O1xuICAgIGNvbnN0IHkgPSB2Lnk7XG4gICAgY29uc3QgeiA9IHYuejtcbiAgICBjb25zdCBxeCA9IHRoaXMueDtcbiAgICBjb25zdCBxeSA9IHRoaXMueTtcbiAgICBjb25zdCBxeiA9IHRoaXMuejtcbiAgICBjb25zdCBxdyA9IHRoaXMudzsgLy8gcSp2XG5cbiAgICBjb25zdCBpeCA9IHF3ICogeCArIHF5ICogeiAtIHF6ICogeTtcbiAgICBjb25zdCBpeSA9IHF3ICogeSArIHF6ICogeCAtIHF4ICogejtcbiAgICBjb25zdCBpeiA9IHF3ICogeiArIHF4ICogeSAtIHF5ICogeDtcbiAgICBjb25zdCBpdyA9IC1xeCAqIHggLSBxeSAqIHkgLSBxeiAqIHo7XG4gICAgdGFyZ2V0LnggPSBpeCAqIHF3ICsgaXcgKiAtcXggKyBpeSAqIC1xeiAtIGl6ICogLXF5O1xuICAgIHRhcmdldC55ID0gaXkgKiBxdyArIGl3ICogLXF5ICsgaXogKiAtcXggLSBpeCAqIC1xejtcbiAgICB0YXJnZXQueiA9IGl6ICogcXcgKyBpdyAqIC1xeiArIGl4ICogLXF5IC0gaXkgKiAtcXg7XG4gICAgcmV0dXJuIHRhcmdldDtcbiAgfVxuICAvKipcbiAgICogQ29waWVzIHZhbHVlIG9mIHNvdXJjZSB0byB0aGlzIHF1YXRlcm5pb24uXG4gICAqIEByZXR1cm4gdGhpc1xuICAgKi9cblxuXG4gIGNvcHkocXVhdCkge1xuICAgIHRoaXMueCA9IHF1YXQueDtcbiAgICB0aGlzLnkgPSBxdWF0Lnk7XG4gICAgdGhpcy56ID0gcXVhdC56O1xuICAgIHRoaXMudyA9IHF1YXQudztcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuICAvKipcbiAgICogQ29udmVydCB0aGUgcXVhdGVybmlvbiB0byBldWxlciBhbmdsZSByZXByZXNlbnRhdGlvbi4gT3JkZXI6IFlaWCwgYXMgdGhpcyBwYWdlIGRlc2NyaWJlczogaHR0cHM6Ly93d3cuZXVjbGlkZWFuc3BhY2UuY29tL21hdGhzL3N0YW5kYXJkcy9pbmRleC5odG1cbiAgICogQHBhcmFtIG9yZGVyIFRocmVlLWNoYXJhY3RlciBzdHJpbmcsIGRlZmF1bHRzIHRvIFwiWVpYXCJcbiAgICovXG5cblxuICB0b0V1bGVyKHRhcmdldCwgb3JkZXIgPSAnWVpYJykge1xuICAgIGxldCBoZWFkaW5nO1xuICAgIGxldCBhdHRpdHVkZTtcbiAgICBsZXQgYmFuaztcbiAgICBjb25zdCB4ID0gdGhpcy54O1xuICAgIGNvbnN0IHkgPSB0aGlzLnk7XG4gICAgY29uc3QgeiA9IHRoaXMuejtcbiAgICBjb25zdCB3ID0gdGhpcy53O1xuXG4gICAgc3dpdGNoIChvcmRlcikge1xuICAgICAgY2FzZSAnWVpYJzpcbiAgICAgICAgY29uc3QgdGVzdCA9IHggKiB5ICsgeiAqIHc7XG5cbiAgICAgICAgaWYgKHRlc3QgPiAwLjQ5OSkge1xuICAgICAgICAgIC8vIHNpbmd1bGFyaXR5IGF0IG5vcnRoIHBvbGVcbiAgICAgICAgICBoZWFkaW5nID0gMiAqIE1hdGguYXRhbjIoeCwgdyk7XG4gICAgICAgICAgYXR0aXR1ZGUgPSBNYXRoLlBJIC8gMjtcbiAgICAgICAgICBiYW5rID0gMDtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0ZXN0IDwgLTAuNDk5KSB7XG4gICAgICAgICAgLy8gc2luZ3VsYXJpdHkgYXQgc291dGggcG9sZVxuICAgICAgICAgIGhlYWRpbmcgPSAtMiAqIE1hdGguYXRhbjIoeCwgdyk7XG4gICAgICAgICAgYXR0aXR1ZGUgPSAtTWF0aC5QSSAvIDI7XG4gICAgICAgICAgYmFuayA9IDA7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoaGVhZGluZyA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgY29uc3Qgc3F4ID0geCAqIHg7XG4gICAgICAgICAgY29uc3Qgc3F5ID0geSAqIHk7XG4gICAgICAgICAgY29uc3Qgc3F6ID0geiAqIHo7XG4gICAgICAgICAgaGVhZGluZyA9IE1hdGguYXRhbjIoMiAqIHkgKiB3IC0gMiAqIHggKiB6LCAxIC0gMiAqIHNxeSAtIDIgKiBzcXopOyAvLyBIZWFkaW5nXG5cbiAgICAgICAgICBhdHRpdHVkZSA9IE1hdGguYXNpbigyICogdGVzdCk7IC8vIGF0dGl0dWRlXG5cbiAgICAgICAgICBiYW5rID0gTWF0aC5hdGFuMigyICogeCAqIHcgLSAyICogeSAqIHosIDEgLSAyICogc3F4IC0gMiAqIHNxeik7IC8vIGJhbmtcbiAgICAgICAgfVxuXG4gICAgICAgIGJyZWFrO1xuXG4gICAgICBkZWZhdWx0OlxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJFdWxlciBvcmRlciBcIiArIG9yZGVyICsgXCIgbm90IHN1cHBvcnRlZCB5ZXQuXCIpO1xuICAgIH1cblxuICAgIHRhcmdldC55ID0gaGVhZGluZztcbiAgICB0YXJnZXQueiA9IGF0dGl0dWRlO1xuICAgIHRhcmdldC54ID0gYmFuaztcbiAgfVxuICAvKipcbiAgICogQHBhcmFtIG9yZGVyIFRoZSBvcmRlciB0byBhcHBseSBhbmdsZXM6ICdYWVonIG9yICdZWFonIG9yIGFueSBvdGhlciBjb21iaW5hdGlvbi5cbiAgICpcbiAgICogU2VlIHtAbGluayBodHRwczovL3d3dy5tYXRod29ya3MuY29tL21hdGxhYmNlbnRyYWwvZmlsZWV4Y2hhbmdlLzIwNjk2LWZ1bmN0aW9uLXRvLWNvbnZlcnQtYmV0d2Vlbi1kY20tZXVsZXItYW5nbGVzLXF1YXRlcm5pb25zLWFuZC1ldWxlci12ZWN0b3JzIE1hdGhXb3Jrc30gcmVmZXJlbmNlXG4gICAqL1xuXG5cbiAgc2V0RnJvbUV1bGVyKHgsIHksIHosIG9yZGVyID0gJ1hZWicpIHtcbiAgICBjb25zdCBjMSA9IE1hdGguY29zKHggLyAyKTtcbiAgICBjb25zdCBjMiA9IE1hdGguY29zKHkgLyAyKTtcbiAgICBjb25zdCBjMyA9IE1hdGguY29zKHogLyAyKTtcbiAgICBjb25zdCBzMSA9IE1hdGguc2luKHggLyAyKTtcbiAgICBjb25zdCBzMiA9IE1hdGguc2luKHkgLyAyKTtcbiAgICBjb25zdCBzMyA9IE1hdGguc2luKHogLyAyKTtcblxuICAgIGlmIChvcmRlciA9PT0gJ1hZWicpIHtcbiAgICAgIHRoaXMueCA9IHMxICogYzIgKiBjMyArIGMxICogczIgKiBzMztcbiAgICAgIHRoaXMueSA9IGMxICogczIgKiBjMyAtIHMxICogYzIgKiBzMztcbiAgICAgIHRoaXMueiA9IGMxICogYzIgKiBzMyArIHMxICogczIgKiBjMztcbiAgICAgIHRoaXMudyA9IGMxICogYzIgKiBjMyAtIHMxICogczIgKiBzMztcbiAgICB9IGVsc2UgaWYgKG9yZGVyID09PSAnWVhaJykge1xuICAgICAgdGhpcy54ID0gczEgKiBjMiAqIGMzICsgYzEgKiBzMiAqIHMzO1xuICAgICAgdGhpcy55ID0gYzEgKiBzMiAqIGMzIC0gczEgKiBjMiAqIHMzO1xuICAgICAgdGhpcy56ID0gYzEgKiBjMiAqIHMzIC0gczEgKiBzMiAqIGMzO1xuICAgICAgdGhpcy53ID0gYzEgKiBjMiAqIGMzICsgczEgKiBzMiAqIHMzO1xuICAgIH0gZWxzZSBpZiAob3JkZXIgPT09ICdaWFknKSB7XG4gICAgICB0aGlzLnggPSBzMSAqIGMyICogYzMgLSBjMSAqIHMyICogczM7XG4gICAgICB0aGlzLnkgPSBjMSAqIHMyICogYzMgKyBzMSAqIGMyICogczM7XG4gICAgICB0aGlzLnogPSBjMSAqIGMyICogczMgKyBzMSAqIHMyICogYzM7XG4gICAgICB0aGlzLncgPSBjMSAqIGMyICogYzMgLSBzMSAqIHMyICogczM7XG4gICAgfSBlbHNlIGlmIChvcmRlciA9PT0gJ1pZWCcpIHtcbiAgICAgIHRoaXMueCA9IHMxICogYzIgKiBjMyAtIGMxICogczIgKiBzMztcbiAgICAgIHRoaXMueSA9IGMxICogczIgKiBjMyArIHMxICogYzIgKiBzMztcbiAgICAgIHRoaXMueiA9IGMxICogYzIgKiBzMyAtIHMxICogczIgKiBjMztcbiAgICAgIHRoaXMudyA9IGMxICogYzIgKiBjMyArIHMxICogczIgKiBzMztcbiAgICB9IGVsc2UgaWYgKG9yZGVyID09PSAnWVpYJykge1xuICAgICAgdGhpcy54ID0gczEgKiBjMiAqIGMzICsgYzEgKiBzMiAqIHMzO1xuICAgICAgdGhpcy55ID0gYzEgKiBzMiAqIGMzICsgczEgKiBjMiAqIHMzO1xuICAgICAgdGhpcy56ID0gYzEgKiBjMiAqIHMzIC0gczEgKiBzMiAqIGMzO1xuICAgICAgdGhpcy53ID0gYzEgKiBjMiAqIGMzIC0gczEgKiBzMiAqIHMzO1xuICAgIH0gZWxzZSBpZiAob3JkZXIgPT09ICdYWlknKSB7XG4gICAgICB0aGlzLnggPSBzMSAqIGMyICogYzMgLSBjMSAqIHMyICogczM7XG4gICAgICB0aGlzLnkgPSBjMSAqIHMyICogYzMgLSBzMSAqIGMyICogczM7XG4gICAgICB0aGlzLnogPSBjMSAqIGMyICogczMgKyBzMSAqIHMyICogYzM7XG4gICAgICB0aGlzLncgPSBjMSAqIGMyICogYzMgKyBzMSAqIHMyICogczM7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICBjbG9uZSgpIHtcbiAgICByZXR1cm4gbmV3IFF1YXRlcm5pb24odGhpcy54LCB0aGlzLnksIHRoaXMueiwgdGhpcy53KTtcbiAgfVxuICAvKipcbiAgICogUGVyZm9ybXMgYSBzcGhlcmljYWwgbGluZWFyIGludGVycG9sYXRpb24gYmV0d2VlbiB0d28gcXVhdFxuICAgKlxuICAgKiBAcGFyYW0gdG9RdWF0IHNlY29uZCBvcGVyYW5kXG4gICAqIEBwYXJhbSB0IGludGVycG9sYXRpb24gYW1vdW50IGJldHdlZW4gdGhlIHNlbGYgcXVhdGVybmlvbiBhbmQgdG9RdWF0XG4gICAqIEBwYXJhbSB0YXJnZXQgQSBxdWF0ZXJuaW9uIHRvIHN0b3JlIHRoZSByZXN1bHQgaW4uIElmIG5vdCBwcm92aWRlZCwgYSBuZXcgb25lIHdpbGwgYmUgY3JlYXRlZC5cbiAgICogQHJldHVybnMge1F1YXRlcm5pb259IFRoZSBcInRhcmdldFwiIG9iamVjdFxuICAgKi9cblxuXG4gIHNsZXJwKHRvUXVhdCwgdCwgdGFyZ2V0ID0gbmV3IFF1YXRlcm5pb24oKSkge1xuICAgIGNvbnN0IGF4ID0gdGhpcy54O1xuICAgIGNvbnN0IGF5ID0gdGhpcy55O1xuICAgIGNvbnN0IGF6ID0gdGhpcy56O1xuICAgIGNvbnN0IGF3ID0gdGhpcy53O1xuICAgIGxldCBieCA9IHRvUXVhdC54O1xuICAgIGxldCBieSA9IHRvUXVhdC55O1xuICAgIGxldCBieiA9IHRvUXVhdC56O1xuICAgIGxldCBidyA9IHRvUXVhdC53O1xuICAgIGxldCBvbWVnYTtcbiAgICBsZXQgY29zb207XG4gICAgbGV0IHNpbm9tO1xuICAgIGxldCBzY2FsZTA7XG4gICAgbGV0IHNjYWxlMTsgLy8gY2FsYyBjb3NpbmVcblxuICAgIGNvc29tID0gYXggKiBieCArIGF5ICogYnkgKyBheiAqIGJ6ICsgYXcgKiBidzsgLy8gYWRqdXN0IHNpZ25zIChpZiBuZWNlc3NhcnkpXG5cbiAgICBpZiAoY29zb20gPCAwLjApIHtcbiAgICAgIGNvc29tID0gLWNvc29tO1xuICAgICAgYnggPSAtYng7XG4gICAgICBieSA9IC1ieTtcbiAgICAgIGJ6ID0gLWJ6O1xuICAgICAgYncgPSAtYnc7XG4gICAgfSAvLyBjYWxjdWxhdGUgY29lZmZpY2llbnRzXG5cblxuICAgIGlmICgxLjAgLSBjb3NvbSA+IDAuMDAwMDAxKSB7XG4gICAgICAvLyBzdGFuZGFyZCBjYXNlIChzbGVycClcbiAgICAgIG9tZWdhID0gTWF0aC5hY29zKGNvc29tKTtcbiAgICAgIHNpbm9tID0gTWF0aC5zaW4ob21lZ2EpO1xuICAgICAgc2NhbGUwID0gTWF0aC5zaW4oKDEuMCAtIHQpICogb21lZ2EpIC8gc2lub207XG4gICAgICBzY2FsZTEgPSBNYXRoLnNpbih0ICogb21lZ2EpIC8gc2lub207XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIFwiZnJvbVwiIGFuZCBcInRvXCIgcXVhdGVybmlvbnMgYXJlIHZlcnkgY2xvc2VcbiAgICAgIC8vICAuLi4gc28gd2UgY2FuIGRvIGEgbGluZWFyIGludGVycG9sYXRpb25cbiAgICAgIHNjYWxlMCA9IDEuMCAtIHQ7XG4gICAgICBzY2FsZTEgPSB0O1xuICAgIH0gLy8gY2FsY3VsYXRlIGZpbmFsIHZhbHVlc1xuXG5cbiAgICB0YXJnZXQueCA9IHNjYWxlMCAqIGF4ICsgc2NhbGUxICogYng7XG4gICAgdGFyZ2V0LnkgPSBzY2FsZTAgKiBheSArIHNjYWxlMSAqIGJ5O1xuICAgIHRhcmdldC56ID0gc2NhbGUwICogYXogKyBzY2FsZTEgKiBiejtcbiAgICB0YXJnZXQudyA9IHNjYWxlMCAqIGF3ICsgc2NhbGUxICogYnc7XG4gICAgcmV0dXJuIHRhcmdldDtcbiAgfVxuICAvKipcbiAgICogUm90YXRlIGFuIGFic29sdXRlIG9yaWVudGF0aW9uIHF1YXRlcm5pb24gZ2l2ZW4gYW4gYW5ndWxhciB2ZWxvY2l0eSBhbmQgYSB0aW1lIHN0ZXAuXG4gICAqL1xuXG5cbiAgaW50ZWdyYXRlKGFuZ3VsYXJWZWxvY2l0eSwgZHQsIGFuZ3VsYXJGYWN0b3IsIHRhcmdldCA9IG5ldyBRdWF0ZXJuaW9uKCkpIHtcbiAgICBjb25zdCBheCA9IGFuZ3VsYXJWZWxvY2l0eS54ICogYW5ndWxhckZhY3Rvci54LFxuICAgICAgICAgIGF5ID0gYW5ndWxhclZlbG9jaXR5LnkgKiBhbmd1bGFyRmFjdG9yLnksXG4gICAgICAgICAgYXogPSBhbmd1bGFyVmVsb2NpdHkueiAqIGFuZ3VsYXJGYWN0b3IueixcbiAgICAgICAgICBieCA9IHRoaXMueCxcbiAgICAgICAgICBieSA9IHRoaXMueSxcbiAgICAgICAgICBieiA9IHRoaXMueixcbiAgICAgICAgICBidyA9IHRoaXMudztcbiAgICBjb25zdCBoYWxmX2R0ID0gZHQgKiAwLjU7XG4gICAgdGFyZ2V0LnggKz0gaGFsZl9kdCAqIChheCAqIGJ3ICsgYXkgKiBieiAtIGF6ICogYnkpO1xuICAgIHRhcmdldC55ICs9IGhhbGZfZHQgKiAoYXkgKiBidyArIGF6ICogYnggLSBheCAqIGJ6KTtcbiAgICB0YXJnZXQueiArPSBoYWxmX2R0ICogKGF6ICogYncgKyBheCAqIGJ5IC0gYXkgKiBieCk7XG4gICAgdGFyZ2V0LncgKz0gaGFsZl9kdCAqICgtYXggKiBieCAtIGF5ICogYnkgLSBheiAqIGJ6KTtcbiAgICByZXR1cm4gdGFyZ2V0O1xuICB9XG5cbn1cbmNvbnN0IHNmdl90MSA9IG5ldyBWZWMzKCk7XG5jb25zdCBzZnZfdDIgPSBuZXcgVmVjMygpO1xuXG4vKipcbiAqIFRoZSBhdmFpbGFibGUgc2hhcGUgdHlwZXMuXG4gKi9cbmNvbnN0IFNIQVBFX1RZUEVTID0ge1xuICAvKiogU1BIRVJFICovXG4gIFNQSEVSRTogMSxcblxuICAvKiogUExBTkUgKi9cbiAgUExBTkU6IDIsXG5cbiAgLyoqIEJPWCAqL1xuICBCT1g6IDQsXG5cbiAgLyoqIENPTVBPVU5EICovXG4gIENPTVBPVU5EOiA4LFxuXG4gIC8qKiBDT05WRVhQT0xZSEVEUk9OICovXG4gIENPTlZFWFBPTFlIRURST046IDE2LFxuXG4gIC8qKiBIRUlHSFRGSUVMRCAqL1xuICBIRUlHSFRGSUVMRDogMzIsXG5cbiAgLyoqIFBBUlRJQ0xFICovXG4gIFBBUlRJQ0xFOiA2NCxcblxuICAvKiogQ1lMSU5ERVIgKi9cbiAgQ1lMSU5ERVI6IDEyOCxcblxuICAvKiogVFJJTUVTSCAqL1xuICBUUklNRVNIOiAyNTZcbn07XG4vKipcbiAqIFNoYXBlVHlwZVxuICovXG5cbi8qKlxuICogQmFzZSBjbGFzcyBmb3Igc2hhcGVzXG4gKi9cbmNsYXNzIFNoYXBlIHtcbiAgLyoqXG4gICAqIElkZW50aWZpZXIgb2YgdGhlIFNoYXBlLlxuICAgKi9cblxuICAvKipcbiAgICogVGhlIHR5cGUgb2YgdGhpcyBzaGFwZS4gTXVzdCBiZSBzZXQgdG8gYW4gaW50ID4gMCBieSBzdWJjbGFzc2VzLlxuICAgKi9cblxuICAvKipcbiAgICogVGhlIGxvY2FsIGJvdW5kaW5nIHNwaGVyZSByYWRpdXMgb2YgdGhpcyBzaGFwZS5cbiAgICovXG5cbiAgLyoqXG4gICAqIFdoZXRoZXIgdG8gcHJvZHVjZSBjb250YWN0IGZvcmNlcyB3aGVuIGluIGNvbnRhY3Qgd2l0aCBvdGhlciBib2RpZXMuIE5vdGUgdGhhdCBjb250YWN0cyB3aWxsIGJlIGdlbmVyYXRlZCwgYnV0IHRoZXkgd2lsbCBiZSBkaXNhYmxlZC5cbiAgICogQGRlZmF1bHQgdHJ1ZVxuICAgKi9cblxuICAvKipcbiAgICogQGRlZmF1bHQgMVxuICAgKi9cblxuICAvKipcbiAgICogQGRlZmF1bHQgLTFcbiAgICovXG5cbiAgLyoqXG4gICAqIE9wdGlvbmFsIG1hdGVyaWFsIG9mIHRoZSBzaGFwZSB0aGF0IHJlZ3VsYXRlcyBjb250YWN0IHByb3BlcnRpZXMuXG4gICAqL1xuXG4gIC8qKlxuICAgKiBUaGUgYm9keSB0byB3aGljaCB0aGUgc2hhcGUgaXMgYWRkZWQgdG8uXG4gICAqL1xuXG4gIC8qKlxuICAgKiBBbGwgdGhlIFNoYXBlIHR5cGVzLlxuICAgKi9cbiAgY29uc3RydWN0b3Iob3B0aW9ucyA9IHt9KSB7XG4gICAgdGhpcy5pZCA9IHZvaWQgMDtcbiAgICB0aGlzLnR5cGUgPSB2b2lkIDA7XG4gICAgdGhpcy5ib3VuZGluZ1NwaGVyZVJhZGl1cyA9IHZvaWQgMDtcbiAgICB0aGlzLmNvbGxpc2lvblJlc3BvbnNlID0gdm9pZCAwO1xuICAgIHRoaXMuY29sbGlzaW9uRmlsdGVyR3JvdXAgPSB2b2lkIDA7XG4gICAgdGhpcy5jb2xsaXNpb25GaWx0ZXJNYXNrID0gdm9pZCAwO1xuICAgIHRoaXMubWF0ZXJpYWwgPSB2b2lkIDA7XG4gICAgdGhpcy5ib2R5ID0gdm9pZCAwO1xuICAgIHRoaXMuaWQgPSBTaGFwZS5pZENvdW50ZXIrKztcbiAgICB0aGlzLnR5cGUgPSBvcHRpb25zLnR5cGUgfHwgMDtcbiAgICB0aGlzLmJvdW5kaW5nU3BoZXJlUmFkaXVzID0gMDtcbiAgICB0aGlzLmNvbGxpc2lvblJlc3BvbnNlID0gb3B0aW9ucy5jb2xsaXNpb25SZXNwb25zZSA/IG9wdGlvbnMuY29sbGlzaW9uUmVzcG9uc2UgOiB0cnVlO1xuICAgIHRoaXMuY29sbGlzaW9uRmlsdGVyR3JvdXAgPSBvcHRpb25zLmNvbGxpc2lvbkZpbHRlckdyb3VwICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLmNvbGxpc2lvbkZpbHRlckdyb3VwIDogMTtcbiAgICB0aGlzLmNvbGxpc2lvbkZpbHRlck1hc2sgPSBvcHRpb25zLmNvbGxpc2lvbkZpbHRlck1hc2sgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMuY29sbGlzaW9uRmlsdGVyTWFzayA6IC0xO1xuICAgIHRoaXMubWF0ZXJpYWwgPSBvcHRpb25zLm1hdGVyaWFsID8gb3B0aW9ucy5tYXRlcmlhbCA6IG51bGw7XG4gICAgdGhpcy5ib2R5ID0gbnVsbDtcbiAgfVxuICAvKipcbiAgICogQ29tcHV0ZXMgdGhlIGJvdW5kaW5nIHNwaGVyZSByYWRpdXMuXG4gICAqIFRoZSByZXN1bHQgaXMgc3RvcmVkIGluIHRoZSBwcm9wZXJ0eSBgLmJvdW5kaW5nU3BoZXJlUmFkaXVzYFxuICAgKi9cblxuXG4gIHVwZGF0ZUJvdW5kaW5nU3BoZXJlUmFkaXVzKCkge1xuICAgIHRocm93IFwiY29tcHV0ZUJvdW5kaW5nU3BoZXJlUmFkaXVzKCkgbm90IGltcGxlbWVudGVkIGZvciBzaGFwZSB0eXBlIFwiICsgdGhpcy50eXBlO1xuICB9XG4gIC8qKlxuICAgKiBHZXQgdGhlIHZvbHVtZSBvZiB0aGlzIHNoYXBlXG4gICAqL1xuXG5cbiAgdm9sdW1lKCkge1xuICAgIHRocm93IFwidm9sdW1lKCkgbm90IGltcGxlbWVudGVkIGZvciBzaGFwZSB0eXBlIFwiICsgdGhpcy50eXBlO1xuICB9XG4gIC8qKlxuICAgKiBDYWxjdWxhdGVzIHRoZSBpbmVydGlhIGluIHRoZSBsb2NhbCBmcmFtZSBmb3IgdGhpcyBzaGFwZS5cbiAgICogQHNlZSBodHRwOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0xpc3Rfb2ZfbW9tZW50c19vZl9pbmVydGlhXG4gICAqL1xuXG5cbiAgY2FsY3VsYXRlTG9jYWxJbmVydGlhKG1hc3MsIHRhcmdldCkge1xuICAgIHRocm93IFwiY2FsY3VsYXRlTG9jYWxJbmVydGlhKCkgbm90IGltcGxlbWVudGVkIGZvciBzaGFwZSB0eXBlIFwiICsgdGhpcy50eXBlO1xuICB9XG4gIC8qKlxuICAgKiBAdG9kbyB1c2UgYWJzdHJhY3QgZm9yIHRoZXNlIGtpbmQgb2YgbWV0aG9kc1xuICAgKi9cblxuXG4gIGNhbGN1bGF0ZVdvcmxkQUFCQihwb3MsIHF1YXQsIG1pbiwgbWF4KSB7XG4gICAgdGhyb3cgXCJjYWxjdWxhdGVXb3JsZEFBQkIoKSBub3QgaW1wbGVtZW50ZWQgZm9yIHNoYXBlIHR5cGUgXCIgKyB0aGlzLnR5cGU7XG4gIH1cblxufVxuU2hhcGUuaWRDb3VudGVyID0gMDtcblNoYXBlLnR5cGVzID0gU0hBUEVfVFlQRVM7XG5cbi8qKlxuICogVHJhbnNmb3JtYXRpb24gdXRpbGl0aWVzLlxuICovXG5jbGFzcyBUcmFuc2Zvcm0ge1xuICAvKipcbiAgICogcG9zaXRpb25cbiAgICovXG5cbiAgLyoqXG4gICAqIHF1YXRlcm5pb25cbiAgICovXG4gIGNvbnN0cnVjdG9yKG9wdGlvbnMgPSB7fSkge1xuICAgIHRoaXMucG9zaXRpb24gPSB2b2lkIDA7XG4gICAgdGhpcy5xdWF0ZXJuaW9uID0gdm9pZCAwO1xuICAgIHRoaXMucG9zaXRpb24gPSBuZXcgVmVjMygpO1xuICAgIHRoaXMucXVhdGVybmlvbiA9IG5ldyBRdWF0ZXJuaW9uKCk7XG5cbiAgICBpZiAob3B0aW9ucy5wb3NpdGlvbikge1xuICAgICAgdGhpcy5wb3NpdGlvbi5jb3B5KG9wdGlvbnMucG9zaXRpb24pO1xuICAgIH1cblxuICAgIGlmIChvcHRpb25zLnF1YXRlcm5pb24pIHtcbiAgICAgIHRoaXMucXVhdGVybmlvbi5jb3B5KG9wdGlvbnMucXVhdGVybmlvbik7XG4gICAgfVxuICB9XG4gIC8qKlxuICAgKiBHZXQgYSBnbG9iYWwgcG9pbnQgaW4gbG9jYWwgdHJhbnNmb3JtIGNvb3JkaW5hdGVzLlxuICAgKi9cblxuXG4gIHBvaW50VG9Mb2NhbCh3b3JsZFBvaW50LCByZXN1bHQpIHtcbiAgICByZXR1cm4gVHJhbnNmb3JtLnBvaW50VG9Mb2NhbEZyYW1lKHRoaXMucG9zaXRpb24sIHRoaXMucXVhdGVybmlvbiwgd29ybGRQb2ludCwgcmVzdWx0KTtcbiAgfVxuICAvKipcbiAgICogR2V0IGEgbG9jYWwgcG9pbnQgaW4gZ2xvYmFsIHRyYW5zZm9ybSBjb29yZGluYXRlcy5cbiAgICovXG5cblxuICBwb2ludFRvV29ybGQobG9jYWxQb2ludCwgcmVzdWx0KSB7XG4gICAgcmV0dXJuIFRyYW5zZm9ybS5wb2ludFRvV29ybGRGcmFtZSh0aGlzLnBvc2l0aW9uLCB0aGlzLnF1YXRlcm5pb24sIGxvY2FsUG9pbnQsIHJlc3VsdCk7XG4gIH1cbiAgLyoqXG4gICAqIHZlY3RvclRvV29ybGRGcmFtZVxuICAgKi9cblxuXG4gIHZlY3RvclRvV29ybGRGcmFtZShsb2NhbFZlY3RvciwgcmVzdWx0ID0gbmV3IFZlYzMoKSkge1xuICAgIHRoaXMucXVhdGVybmlvbi52bXVsdChsb2NhbFZlY3RvciwgcmVzdWx0KTtcbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG4gIC8qKlxuICAgKiBwb2ludFRvTG9jYWxGcmFtZVxuICAgKi9cblxuXG4gIHN0YXRpYyBwb2ludFRvTG9jYWxGcmFtZShwb3NpdGlvbiwgcXVhdGVybmlvbiwgd29ybGRQb2ludCwgcmVzdWx0ID0gbmV3IFZlYzMoKSkge1xuICAgIHdvcmxkUG9pbnQudnN1Yihwb3NpdGlvbiwgcmVzdWx0KTtcbiAgICBxdWF0ZXJuaW9uLmNvbmp1Z2F0ZSh0bXBRdWF0JDEpO1xuICAgIHRtcFF1YXQkMS52bXVsdChyZXN1bHQsIHJlc3VsdCk7XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxuICAvKipcbiAgICogcG9pbnRUb1dvcmxkRnJhbWVcbiAgICovXG5cblxuICBzdGF0aWMgcG9pbnRUb1dvcmxkRnJhbWUocG9zaXRpb24sIHF1YXRlcm5pb24sIGxvY2FsUG9pbnQsIHJlc3VsdCA9IG5ldyBWZWMzKCkpIHtcbiAgICBxdWF0ZXJuaW9uLnZtdWx0KGxvY2FsUG9pbnQsIHJlc3VsdCk7XG4gICAgcmVzdWx0LnZhZGQocG9zaXRpb24sIHJlc3VsdCk7XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxuICAvKipcbiAgICogdmVjdG9yVG9Xb3JsZEZyYW1lXG4gICAqL1xuXG5cbiAgc3RhdGljIHZlY3RvclRvV29ybGRGcmFtZShxdWF0ZXJuaW9uLCBsb2NhbFZlY3RvciwgcmVzdWx0ID0gbmV3IFZlYzMoKSkge1xuICAgIHF1YXRlcm5pb24udm11bHQobG9jYWxWZWN0b3IsIHJlc3VsdCk7XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxuICAvKipcbiAgICogdmVjdG9yVG9Mb2NhbEZyYW1lXG4gICAqL1xuXG5cbiAgc3RhdGljIHZlY3RvclRvTG9jYWxGcmFtZShwb3NpdGlvbiwgcXVhdGVybmlvbiwgd29ybGRWZWN0b3IsIHJlc3VsdCA9IG5ldyBWZWMzKCkpIHtcbiAgICBxdWF0ZXJuaW9uLncgKj0gLTE7XG4gICAgcXVhdGVybmlvbi52bXVsdCh3b3JsZFZlY3RvciwgcmVzdWx0KTtcbiAgICBxdWF0ZXJuaW9uLncgKj0gLTE7XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxuXG59XG5jb25zdCB0bXBRdWF0JDEgPSBuZXcgUXVhdGVybmlvbigpO1xuXG4vKipcbiAqIEEgc2V0IG9mIHBvbHlnb25zIGRlc2NyaWJpbmcgYSBjb252ZXggc2hhcGUuXG4gKlxuICogVGhlIHNoYXBlIE1VU1QgYmUgY29udmV4IGZvciB0aGUgY29kZSB0byB3b3JrIHByb3Blcmx5LiBObyBwb2x5Z29ucyBtYXkgYmUgY29wbGFuYXIgKGNvbnRhaW5lZFxuICogaW4gdGhlIHNhbWUgM0QgcGxhbmUpLCBpbnN0ZWFkIHRoZXNlIHNob3VsZCBiZSBtZXJnZWQgaW50byBvbmUgcG9seWdvbi5cbiAqXG4gKiBAYXV0aG9yIHFpYW8gLyBodHRwczovL2dpdGh1Yi5jb20vcWlhbyAob3JpZ2luYWwgYXV0aG9yLCBzZWUgaHR0cHM6Ly9naXRodWIuY29tL3FpYW8vdGhyZWUuanMvY29tbWl0Lzg1MDI2ZjBjNzY5ZTQwMDAxNDhhNjdkNDVhOWU5YjljNTEwODgzNmYpXG4gKiBAYXV0aG9yIHNjaHRlcHBlIC8gaHR0cHM6Ly9naXRodWIuY29tL3NjaHRlcHBlXG4gKiBAc2VlIGh0dHBzOi8vd3d3LmFsdGRldmJsb2dhZGF5LmNvbS8yMDExLzA1LzEzL2NvbnRhY3QtZ2VuZXJhdGlvbi1iZXR3ZWVuLTNkLWNvbnZleC1tZXNoZXMvXG4gKlxuICogQHRvZG8gTW92ZSB0aGUgY2xpcHBpbmcgZnVuY3Rpb25zIHRvIENvbnRhY3RHZW5lcmF0b3I/XG4gKiBAdG9kbyBBdXRvbWF0aWNhbGx5IG1lcmdlIGNvcGxhbmFyIHBvbHlnb25zIGluIGNvbnN0cnVjdG9yLlxuICogQGV4YW1wbGVcbiAqICAgICBjb25zdCBjb252ZXhTaGFwZSA9IG5ldyBDQU5OT04uQ29udmV4UG9seWhlZHJvbih7IHZlcnRpY2VzLCBmYWNlcyB9KVxuICogICAgIGNvbnN0IGNvbnZleEJvZHkgPSBuZXcgQ0FOTk9OLkJvZHkoeyBtYXNzOiAxLCBzaGFwZTogY29udmV4U2hhcGUgfSlcbiAqICAgICB3b3JsZC5hZGRCb2R5KGNvbnZleEJvZHkpXG4gKi9cbmNsYXNzIENvbnZleFBvbHloZWRyb24gZXh0ZW5kcyBTaGFwZSB7XG4gIC8qKiB2ZXJ0aWNlcyAqL1xuXG4gIC8qKlxuICAgKiBBcnJheSBvZiBpbnRlZ2VyIGFycmF5cywgaW5kaWNhdGluZyB3aGljaCB2ZXJ0aWNlcyBlYWNoIGZhY2UgY29uc2lzdHMgb2ZcbiAgICovXG5cbiAgLyoqIGZhY2VOb3JtYWxzICovXG5cbiAgLyoqIHdvcmxkVmVydGljZXMgKi9cblxuICAvKiogd29ybGRWZXJ0aWNlc05lZWRzVXBkYXRlICovXG5cbiAgLyoqIHdvcmxkRmFjZU5vcm1hbHMgKi9cblxuICAvKiogd29ybGRGYWNlTm9ybWFsc05lZWRzVXBkYXRlICovXG5cbiAgLyoqXG4gICAqIElmIGdpdmVuLCB0aGVzZSBsb2NhbGx5IGRlZmluZWQsIG5vcm1hbGl6ZWQgYXhlcyBhcmUgdGhlIG9ubHkgb25lcyBiZWluZyBjaGVja2VkIHdoZW4gZG9pbmcgc2VwYXJhdGluZyBheGlzIGNoZWNrLlxuICAgKi9cblxuICAvKiogdW5pcXVlRWRnZXMgKi9cblxuICAvKipcbiAgICogQHBhcmFtIHZlcnRpY2VzIEFuIGFycmF5IG9mIFZlYzMnc1xuICAgKiBAcGFyYW0gZmFjZXMgQXJyYXkgb2YgaW50ZWdlciBhcnJheXMsIGRlc2NyaWJpbmcgd2hpY2ggdmVydGljZXMgdGhhdCBpcyBpbmNsdWRlZCBpbiBlYWNoIGZhY2UuXG4gICAqL1xuICBjb25zdHJ1Y3Rvcihwcm9wcyA9IHt9KSB7XG4gICAgY29uc3Qge1xuICAgICAgdmVydGljZXMgPSBbXSxcbiAgICAgIGZhY2VzID0gW10sXG4gICAgICBub3JtYWxzID0gW10sXG4gICAgICBheGVzLFxuICAgICAgYm91bmRpbmdTcGhlcmVSYWRpdXNcbiAgICB9ID0gcHJvcHM7XG4gICAgc3VwZXIoe1xuICAgICAgdHlwZTogU2hhcGUudHlwZXMuQ09OVkVYUE9MWUhFRFJPTlxuICAgIH0pO1xuICAgIHRoaXMudmVydGljZXMgPSB2b2lkIDA7XG4gICAgdGhpcy5mYWNlcyA9IHZvaWQgMDtcbiAgICB0aGlzLmZhY2VOb3JtYWxzID0gdm9pZCAwO1xuICAgIHRoaXMud29ybGRWZXJ0aWNlcyA9IHZvaWQgMDtcbiAgICB0aGlzLndvcmxkVmVydGljZXNOZWVkc1VwZGF0ZSA9IHZvaWQgMDtcbiAgICB0aGlzLndvcmxkRmFjZU5vcm1hbHMgPSB2b2lkIDA7XG4gICAgdGhpcy53b3JsZEZhY2VOb3JtYWxzTmVlZHNVcGRhdGUgPSB2b2lkIDA7XG4gICAgdGhpcy51bmlxdWVBeGVzID0gdm9pZCAwO1xuICAgIHRoaXMudW5pcXVlRWRnZXMgPSB2b2lkIDA7XG4gICAgdGhpcy52ZXJ0aWNlcyA9IHZlcnRpY2VzO1xuICAgIHRoaXMuZmFjZXMgPSBmYWNlcztcbiAgICB0aGlzLmZhY2VOb3JtYWxzID0gbm9ybWFscztcblxuICAgIGlmICh0aGlzLmZhY2VOb3JtYWxzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgdGhpcy5jb21wdXRlTm9ybWFscygpO1xuICAgIH1cblxuICAgIGlmICghYm91bmRpbmdTcGhlcmVSYWRpdXMpIHtcbiAgICAgIHRoaXMudXBkYXRlQm91bmRpbmdTcGhlcmVSYWRpdXMoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5ib3VuZGluZ1NwaGVyZVJhZGl1cyA9IGJvdW5kaW5nU3BoZXJlUmFkaXVzO1xuICAgIH1cblxuICAgIHRoaXMud29ybGRWZXJ0aWNlcyA9IFtdOyAvLyBXb3JsZCB0cmFuc2Zvcm1lZCB2ZXJzaW9uIG9mIC52ZXJ0aWNlc1xuXG4gICAgdGhpcy53b3JsZFZlcnRpY2VzTmVlZHNVcGRhdGUgPSB0cnVlO1xuICAgIHRoaXMud29ybGRGYWNlTm9ybWFscyA9IFtdOyAvLyBXb3JsZCB0cmFuc2Zvcm1lZCB2ZXJzaW9uIG9mIC5mYWNlTm9ybWFsc1xuXG4gICAgdGhpcy53b3JsZEZhY2VOb3JtYWxzTmVlZHNVcGRhdGUgPSB0cnVlO1xuICAgIHRoaXMudW5pcXVlQXhlcyA9IGF4ZXMgPyBheGVzLnNsaWNlKCkgOiBudWxsO1xuICAgIHRoaXMudW5pcXVlRWRnZXMgPSBbXTtcbiAgICB0aGlzLmNvbXB1dGVFZGdlcygpO1xuICB9XG4gIC8qKlxuICAgKiBDb21wdXRlcyB1bmlxdWVFZGdlc1xuICAgKi9cblxuXG4gIGNvbXB1dGVFZGdlcygpIHtcbiAgICBjb25zdCBmYWNlcyA9IHRoaXMuZmFjZXM7XG4gICAgY29uc3QgdmVydGljZXMgPSB0aGlzLnZlcnRpY2VzO1xuICAgIGNvbnN0IGVkZ2VzID0gdGhpcy51bmlxdWVFZGdlcztcbiAgICBlZGdlcy5sZW5ndGggPSAwO1xuICAgIGNvbnN0IGVkZ2UgPSBuZXcgVmVjMygpO1xuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgIT09IGZhY2VzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBjb25zdCBmYWNlID0gZmFjZXNbaV07XG4gICAgICBjb25zdCBudW1WZXJ0aWNlcyA9IGZhY2UubGVuZ3RoO1xuXG4gICAgICBmb3IgKGxldCBqID0gMDsgaiAhPT0gbnVtVmVydGljZXM7IGorKykge1xuICAgICAgICBjb25zdCBrID0gKGogKyAxKSAlIG51bVZlcnRpY2VzO1xuICAgICAgICB2ZXJ0aWNlc1tmYWNlW2pdXS52c3ViKHZlcnRpY2VzW2ZhY2Vba11dLCBlZGdlKTtcbiAgICAgICAgZWRnZS5ub3JtYWxpemUoKTtcbiAgICAgICAgbGV0IGZvdW5kID0gZmFsc2U7XG5cbiAgICAgICAgZm9yIChsZXQgcCA9IDA7IHAgIT09IGVkZ2VzLmxlbmd0aDsgcCsrKSB7XG4gICAgICAgICAgaWYgKGVkZ2VzW3BdLmFsbW9zdEVxdWFscyhlZGdlKSB8fCBlZGdlc1twXS5hbG1vc3RFcXVhbHMoZWRnZSkpIHtcbiAgICAgICAgICAgIGZvdW5kID0gdHJ1ZTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghZm91bmQpIHtcbiAgICAgICAgICBlZGdlcy5wdXNoKGVkZ2UuY2xvbmUoKSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgLyoqXG4gICAqIENvbXB1dGUgdGhlIG5vcm1hbHMgb2YgdGhlIGZhY2VzLlxuICAgKiBXaWxsIHJldXNlIGV4aXN0aW5nIFZlYzMgb2JqZWN0cyBpbiB0aGUgYGZhY2VOb3JtYWxzYCBhcnJheSBpZiB0aGV5IGV4aXN0LlxuICAgKi9cblxuXG4gIGNvbXB1dGVOb3JtYWxzKCkge1xuICAgIHRoaXMuZmFjZU5vcm1hbHMubGVuZ3RoID0gdGhpcy5mYWNlcy5sZW5ndGg7IC8vIEdlbmVyYXRlIG5vcm1hbHNcblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5mYWNlcy5sZW5ndGg7IGkrKykge1xuICAgICAgLy8gQ2hlY2sgc28gYWxsIHZlcnRpY2VzIGV4aXN0cyBmb3IgdGhpcyBmYWNlXG4gICAgICBmb3IgKGxldCBqID0gMDsgaiA8IHRoaXMuZmFjZXNbaV0ubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgaWYgKCF0aGlzLnZlcnRpY2VzW3RoaXMuZmFjZXNbaV1bal1dKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVmVydGV4IFwiICsgdGhpcy5mYWNlc1tpXVtqXSArIFwiIG5vdCBmb3VuZCFcIik7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgY29uc3QgbiA9IHRoaXMuZmFjZU5vcm1hbHNbaV0gfHwgbmV3IFZlYzMoKTtcbiAgICAgIHRoaXMuZ2V0RmFjZU5vcm1hbChpLCBuKTtcbiAgICAgIG4ubmVnYXRlKG4pO1xuICAgICAgdGhpcy5mYWNlTm9ybWFsc1tpXSA9IG47XG4gICAgICBjb25zdCB2ZXJ0ZXggPSB0aGlzLnZlcnRpY2VzW3RoaXMuZmFjZXNbaV1bMF1dO1xuXG4gICAgICBpZiAobi5kb3QodmVydGV4KSA8IDApIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihcIi5mYWNlTm9ybWFsc1tcIiArIGkgKyBcIl0gPSBWZWMzKFwiICsgbi50b1N0cmluZygpICsgXCIpIGxvb2tzIGxpa2UgaXQgcG9pbnRzIGludG8gdGhlIHNoYXBlPyBUaGUgdmVydGljZXMgZm9sbG93LiBNYWtlIHN1cmUgdGhleSBhcmUgb3JkZXJlZCBDQ1cgYXJvdW5kIHRoZSBub3JtYWwsIHVzaW5nIHRoZSByaWdodCBoYW5kIHJ1bGUuXCIpO1xuXG4gICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgdGhpcy5mYWNlc1tpXS5sZW5ndGg7IGorKykge1xuICAgICAgICAgIGNvbnNvbGUud2FybihcIi52ZXJ0aWNlc1tcIiArIHRoaXMuZmFjZXNbaV1bal0gKyBcIl0gPSBWZWMzKFwiICsgdGhpcy52ZXJ0aWNlc1t0aGlzLmZhY2VzW2ldW2pdXS50b1N0cmluZygpICsgXCIpXCIpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG4gIC8qKlxuICAgKiBDb21wdXRlIHRoZSBub3JtYWwgb2YgYSBmYWNlIGZyb20gaXRzIHZlcnRpY2VzXG4gICAqL1xuXG5cbiAgZ2V0RmFjZU5vcm1hbChpLCB0YXJnZXQpIHtcbiAgICBjb25zdCBmID0gdGhpcy5mYWNlc1tpXTtcbiAgICBjb25zdCB2YSA9IHRoaXMudmVydGljZXNbZlswXV07XG4gICAgY29uc3QgdmIgPSB0aGlzLnZlcnRpY2VzW2ZbMV1dO1xuICAgIGNvbnN0IHZjID0gdGhpcy52ZXJ0aWNlc1tmWzJdXTtcbiAgICBDb252ZXhQb2x5aGVkcm9uLmNvbXB1dGVOb3JtYWwodmEsIHZiLCB2YywgdGFyZ2V0KTtcbiAgfVxuICAvKipcbiAgICogR2V0IGZhY2Ugbm9ybWFsIGdpdmVuIDMgdmVydGljZXNcbiAgICovXG5cblxuICBzdGF0aWMgY29tcHV0ZU5vcm1hbCh2YSwgdmIsIHZjLCB0YXJnZXQpIHtcbiAgICBjb25zdCBjYiA9IG5ldyBWZWMzKCk7XG4gICAgY29uc3QgYWIgPSBuZXcgVmVjMygpO1xuICAgIHZiLnZzdWIodmEsIGFiKTtcbiAgICB2Yy52c3ViKHZiLCBjYik7XG4gICAgY2IuY3Jvc3MoYWIsIHRhcmdldCk7XG5cbiAgICBpZiAoIXRhcmdldC5pc1plcm8oKSkge1xuICAgICAgdGFyZ2V0Lm5vcm1hbGl6ZSgpO1xuICAgIH1cbiAgfVxuICAvKipcbiAgICogQHBhcmFtIG1pbkRpc3QgQ2xhbXAgZGlzdGFuY2VcbiAgICogQHBhcmFtIHJlc3VsdCBUaGUgYW4gYXJyYXkgb2YgY29udGFjdCBwb2ludCBvYmplY3RzLCBzZWUgY2xpcEZhY2VBZ2FpbnN0SHVsbFxuICAgKi9cblxuXG4gIGNsaXBBZ2FpbnN0SHVsbChwb3NBLCBxdWF0QSwgaHVsbEIsIHBvc0IsIHF1YXRCLCBzZXBhcmF0aW5nTm9ybWFsLCBtaW5EaXN0LCBtYXhEaXN0LCByZXN1bHQpIHtcbiAgICBjb25zdCBXb3JsZE5vcm1hbCA9IG5ldyBWZWMzKCk7XG4gICAgbGV0IGNsb3Nlc3RGYWNlQiA9IC0xO1xuICAgIGxldCBkbWF4ID0gLU51bWJlci5NQVhfVkFMVUU7XG5cbiAgICBmb3IgKGxldCBmYWNlID0gMDsgZmFjZSA8IGh1bGxCLmZhY2VzLmxlbmd0aDsgZmFjZSsrKSB7XG4gICAgICBXb3JsZE5vcm1hbC5jb3B5KGh1bGxCLmZhY2VOb3JtYWxzW2ZhY2VdKTtcbiAgICAgIHF1YXRCLnZtdWx0KFdvcmxkTm9ybWFsLCBXb3JsZE5vcm1hbCk7XG4gICAgICBjb25zdCBkID0gV29ybGROb3JtYWwuZG90KHNlcGFyYXRpbmdOb3JtYWwpO1xuXG4gICAgICBpZiAoZCA+IGRtYXgpIHtcbiAgICAgICAgZG1heCA9IGQ7XG4gICAgICAgIGNsb3Nlc3RGYWNlQiA9IGZhY2U7XG4gICAgICB9XG4gICAgfVxuXG4gICAgY29uc3Qgd29ybGRWZXJ0c0IxID0gW107XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGh1bGxCLmZhY2VzW2Nsb3Nlc3RGYWNlQl0ubGVuZ3RoOyBpKyspIHtcbiAgICAgIGNvbnN0IGIgPSBodWxsQi52ZXJ0aWNlc1todWxsQi5mYWNlc1tjbG9zZXN0RmFjZUJdW2ldXTtcbiAgICAgIGNvbnN0IHdvcmxkYiA9IG5ldyBWZWMzKCk7XG4gICAgICB3b3JsZGIuY29weShiKTtcbiAgICAgIHF1YXRCLnZtdWx0KHdvcmxkYiwgd29ybGRiKTtcbiAgICAgIHBvc0IudmFkZCh3b3JsZGIsIHdvcmxkYik7XG4gICAgICB3b3JsZFZlcnRzQjEucHVzaCh3b3JsZGIpO1xuICAgIH1cblxuICAgIGlmIChjbG9zZXN0RmFjZUIgPj0gMCkge1xuICAgICAgdGhpcy5jbGlwRmFjZUFnYWluc3RIdWxsKHNlcGFyYXRpbmdOb3JtYWwsIHBvc0EsIHF1YXRBLCB3b3JsZFZlcnRzQjEsIG1pbkRpc3QsIG1heERpc3QsIHJlc3VsdCk7XG4gICAgfVxuICB9XG4gIC8qKlxuICAgKiBGaW5kIHRoZSBzZXBhcmF0aW5nIGF4aXMgYmV0d2VlbiB0aGlzIGh1bGwgYW5kIGFub3RoZXJcbiAgICogQHBhcmFtIHRhcmdldCBUaGUgdGFyZ2V0IHZlY3RvciB0byBzYXZlIHRoZSBheGlzIGluXG4gICAqIEByZXR1cm4gUmV0dXJucyBmYWxzZSBpZiBhIHNlcGFyYXRpb24gaXMgZm91bmQsIGVsc2UgdHJ1ZVxuICAgKi9cblxuXG4gIGZpbmRTZXBhcmF0aW5nQXhpcyhodWxsQiwgcG9zQSwgcXVhdEEsIHBvc0IsIHF1YXRCLCB0YXJnZXQsIGZhY2VMaXN0QSwgZmFjZUxpc3RCKSB7XG4gICAgY29uc3QgZmFjZUFOb3JtYWxXUzMgPSBuZXcgVmVjMygpO1xuICAgIGNvbnN0IFdvcmxkbm9ybWFsMSA9IG5ldyBWZWMzKCk7XG4gICAgY29uc3QgZGVsdGFDID0gbmV3IFZlYzMoKTtcbiAgICBjb25zdCB3b3JsZEVkZ2UwID0gbmV3IFZlYzMoKTtcbiAgICBjb25zdCB3b3JsZEVkZ2UxID0gbmV3IFZlYzMoKTtcbiAgICBjb25zdCBDcm9zcyA9IG5ldyBWZWMzKCk7XG4gICAgbGV0IGRtaW4gPSBOdW1iZXIuTUFYX1ZBTFVFO1xuICAgIGNvbnN0IGh1bGxBID0gdGhpcztcblxuICAgIGlmICghaHVsbEEudW5pcXVlQXhlcykge1xuICAgICAgY29uc3QgbnVtRmFjZXNBID0gZmFjZUxpc3RBID8gZmFjZUxpc3RBLmxlbmd0aCA6IGh1bGxBLmZhY2VzLmxlbmd0aDsgLy8gVGVzdCBmYWNlIG5vcm1hbHMgZnJvbSBodWxsQVxuXG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG51bUZhY2VzQTsgaSsrKSB7XG4gICAgICAgIGNvbnN0IGZpID0gZmFjZUxpc3RBID8gZmFjZUxpc3RBW2ldIDogaTsgLy8gR2V0IHdvcmxkIGZhY2Ugbm9ybWFsXG5cbiAgICAgICAgZmFjZUFOb3JtYWxXUzMuY29weShodWxsQS5mYWNlTm9ybWFsc1tmaV0pO1xuICAgICAgICBxdWF0QS52bXVsdChmYWNlQU5vcm1hbFdTMywgZmFjZUFOb3JtYWxXUzMpO1xuICAgICAgICBjb25zdCBkID0gaHVsbEEudGVzdFNlcEF4aXMoZmFjZUFOb3JtYWxXUzMsIGh1bGxCLCBwb3NBLCBxdWF0QSwgcG9zQiwgcXVhdEIpO1xuXG4gICAgICAgIGlmIChkID09PSBmYWxzZSkge1xuICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChkIDwgZG1pbikge1xuICAgICAgICAgIGRtaW4gPSBkO1xuICAgICAgICAgIHRhcmdldC5jb3B5KGZhY2VBTm9ybWFsV1MzKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICAvLyBUZXN0IHVuaXF1ZSBheGVzXG4gICAgICBmb3IgKGxldCBpID0gMDsgaSAhPT0gaHVsbEEudW5pcXVlQXhlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAvLyBHZXQgd29ybGQgYXhpc1xuICAgICAgICBxdWF0QS52bXVsdChodWxsQS51bmlxdWVBeGVzW2ldLCBmYWNlQU5vcm1hbFdTMyk7XG4gICAgICAgIGNvbnN0IGQgPSBodWxsQS50ZXN0U2VwQXhpcyhmYWNlQU5vcm1hbFdTMywgaHVsbEIsIHBvc0EsIHF1YXRBLCBwb3NCLCBxdWF0Qik7XG5cbiAgICAgICAgaWYgKGQgPT09IGZhbHNlKSB7XG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGQgPCBkbWluKSB7XG4gICAgICAgICAgZG1pbiA9IGQ7XG4gICAgICAgICAgdGFyZ2V0LmNvcHkoZmFjZUFOb3JtYWxXUzMpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKCFodWxsQi51bmlxdWVBeGVzKSB7XG4gICAgICAvLyBUZXN0IGZhY2Ugbm9ybWFscyBmcm9tIGh1bGxCXG4gICAgICBjb25zdCBudW1GYWNlc0IgPSBmYWNlTGlzdEIgPyBmYWNlTGlzdEIubGVuZ3RoIDogaHVsbEIuZmFjZXMubGVuZ3RoO1xuXG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG51bUZhY2VzQjsgaSsrKSB7XG4gICAgICAgIGNvbnN0IGZpID0gZmFjZUxpc3RCID8gZmFjZUxpc3RCW2ldIDogaTtcbiAgICAgICAgV29ybGRub3JtYWwxLmNvcHkoaHVsbEIuZmFjZU5vcm1hbHNbZmldKTtcbiAgICAgICAgcXVhdEIudm11bHQoV29ybGRub3JtYWwxLCBXb3JsZG5vcm1hbDEpO1xuICAgICAgICBjb25zdCBkID0gaHVsbEEudGVzdFNlcEF4aXMoV29ybGRub3JtYWwxLCBodWxsQiwgcG9zQSwgcXVhdEEsIHBvc0IsIHF1YXRCKTtcblxuICAgICAgICBpZiAoZCA9PT0gZmFsc2UpIHtcbiAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoZCA8IGRtaW4pIHtcbiAgICAgICAgICBkbWluID0gZDtcbiAgICAgICAgICB0YXJnZXQuY29weShXb3JsZG5vcm1hbDEpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIFRlc3QgdW5pcXVlIGF4ZXMgaW4gQlxuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgIT09IGh1bGxCLnVuaXF1ZUF4ZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgcXVhdEIudm11bHQoaHVsbEIudW5pcXVlQXhlc1tpXSwgV29ybGRub3JtYWwxKTtcbiAgICAgICAgY29uc3QgZCA9IGh1bGxBLnRlc3RTZXBBeGlzKFdvcmxkbm9ybWFsMSwgaHVsbEIsIHBvc0EsIHF1YXRBLCBwb3NCLCBxdWF0Qik7XG5cbiAgICAgICAgaWYgKGQgPT09IGZhbHNlKSB7XG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGQgPCBkbWluKSB7XG4gICAgICAgICAgZG1pbiA9IGQ7XG4gICAgICAgICAgdGFyZ2V0LmNvcHkoV29ybGRub3JtYWwxKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gLy8gVGVzdCBlZGdlc1xuXG5cbiAgICBmb3IgKGxldCBlMCA9IDA7IGUwICE9PSBodWxsQS51bmlxdWVFZGdlcy5sZW5ndGg7IGUwKyspIHtcbiAgICAgIC8vIEdldCB3b3JsZCBlZGdlXG4gICAgICBxdWF0QS52bXVsdChodWxsQS51bmlxdWVFZGdlc1tlMF0sIHdvcmxkRWRnZTApO1xuXG4gICAgICBmb3IgKGxldCBlMSA9IDA7IGUxICE9PSBodWxsQi51bmlxdWVFZGdlcy5sZW5ndGg7IGUxKyspIHtcbiAgICAgICAgLy8gR2V0IHdvcmxkIGVkZ2UgMlxuICAgICAgICBxdWF0Qi52bXVsdChodWxsQi51bmlxdWVFZGdlc1tlMV0sIHdvcmxkRWRnZTEpO1xuICAgICAgICB3b3JsZEVkZ2UwLmNyb3NzKHdvcmxkRWRnZTEsIENyb3NzKTtcblxuICAgICAgICBpZiAoIUNyb3NzLmFsbW9zdFplcm8oKSkge1xuICAgICAgICAgIENyb3NzLm5vcm1hbGl6ZSgpO1xuICAgICAgICAgIGNvbnN0IGRpc3QgPSBodWxsQS50ZXN0U2VwQXhpcyhDcm9zcywgaHVsbEIsIHBvc0EsIHF1YXRBLCBwb3NCLCBxdWF0Qik7XG5cbiAgICAgICAgICBpZiAoZGlzdCA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAoZGlzdCA8IGRtaW4pIHtcbiAgICAgICAgICAgIGRtaW4gPSBkaXN0O1xuICAgICAgICAgICAgdGFyZ2V0LmNvcHkoQ3Jvc3MpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIHBvc0IudnN1Yihwb3NBLCBkZWx0YUMpO1xuXG4gICAgaWYgKGRlbHRhQy5kb3QodGFyZ2V0KSA+IDAuMCkge1xuICAgICAgdGFyZ2V0Lm5lZ2F0ZSh0YXJnZXQpO1xuICAgIH1cblxuICAgIHJldHVybiB0cnVlO1xuICB9XG4gIC8qKlxuICAgKiBUZXN0IHNlcGFyYXRpbmcgYXhpcyBhZ2FpbnN0IHR3byBodWxscy4gQm90aCBodWxscyBhcmUgcHJvamVjdGVkIG9udG8gdGhlIGF4aXMgYW5kIHRoZSBvdmVybGFwIHNpemUgaXMgcmV0dXJuZWQgaWYgdGhlcmUgaXMgb25lLlxuICAgKiBAcmV0dXJuIFRoZSBvdmVybGFwIGRlcHRoLCBvciBGQUxTRSBpZiBubyBwZW5ldHJhdGlvbi5cbiAgICovXG5cblxuICB0ZXN0U2VwQXhpcyhheGlzLCBodWxsQiwgcG9zQSwgcXVhdEEsIHBvc0IsIHF1YXRCKSB7XG4gICAgY29uc3QgaHVsbEEgPSB0aGlzO1xuICAgIENvbnZleFBvbHloZWRyb24ucHJvamVjdChodWxsQSwgYXhpcywgcG9zQSwgcXVhdEEsIG1heG1pbkEpO1xuICAgIENvbnZleFBvbHloZWRyb24ucHJvamVjdChodWxsQiwgYXhpcywgcG9zQiwgcXVhdEIsIG1heG1pbkIpO1xuICAgIGNvbnN0IG1heEEgPSBtYXhtaW5BWzBdO1xuICAgIGNvbnN0IG1pbkEgPSBtYXhtaW5BWzFdO1xuICAgIGNvbnN0IG1heEIgPSBtYXhtaW5CWzBdO1xuICAgIGNvbnN0IG1pbkIgPSBtYXhtaW5CWzFdO1xuXG4gICAgaWYgKG1heEEgPCBtaW5CIHx8IG1heEIgPCBtaW5BKSB7XG4gICAgICByZXR1cm4gZmFsc2U7IC8vIFNlcGFyYXRlZFxuICAgIH1cblxuICAgIGNvbnN0IGQwID0gbWF4QSAtIG1pbkI7XG4gICAgY29uc3QgZDEgPSBtYXhCIC0gbWluQTtcbiAgICBjb25zdCBkZXB0aCA9IGQwIDwgZDEgPyBkMCA6IGQxO1xuICAgIHJldHVybiBkZXB0aDtcbiAgfVxuICAvKipcbiAgICogY2FsY3VsYXRlTG9jYWxJbmVydGlhXG4gICAqL1xuXG5cbiAgY2FsY3VsYXRlTG9jYWxJbmVydGlhKG1hc3MsIHRhcmdldCkge1xuICAgIC8vIEFwcHJveGltYXRlIHdpdGggYm94IGluZXJ0aWFcbiAgICAvLyBFeGFjdCBpbmVydGlhIGNhbGN1bGF0aW9uIGlzIG92ZXJraWxsLCBidXQgc2VlIGh0dHA6Ly9nZW9tZXRyaWN0b29scy5jb20vRG9jdW1lbnRhdGlvbi9Qb2x5aGVkcmFsTWFzc1Byb3BlcnRpZXMucGRmIGZvciB0aGUgY29ycmVjdCB3YXkgdG8gZG8gaXRcbiAgICBjb25zdCBhYWJibWF4ID0gbmV3IFZlYzMoKTtcbiAgICBjb25zdCBhYWJibWluID0gbmV3IFZlYzMoKTtcbiAgICB0aGlzLmNvbXB1dGVMb2NhbEFBQkIoYWFiYm1pbiwgYWFiYm1heCk7XG4gICAgY29uc3QgeCA9IGFhYmJtYXgueCAtIGFhYmJtaW4ueDtcbiAgICBjb25zdCB5ID0gYWFiYm1heC55IC0gYWFiYm1pbi55O1xuICAgIGNvbnN0IHogPSBhYWJibWF4LnogLSBhYWJibWluLno7XG4gICAgdGFyZ2V0LnggPSAxLjAgLyAxMi4wICogbWFzcyAqICgyICogeSAqIDIgKiB5ICsgMiAqIHogKiAyICogeik7XG4gICAgdGFyZ2V0LnkgPSAxLjAgLyAxMi4wICogbWFzcyAqICgyICogeCAqIDIgKiB4ICsgMiAqIHogKiAyICogeik7XG4gICAgdGFyZ2V0LnogPSAxLjAgLyAxMi4wICogbWFzcyAqICgyICogeSAqIDIgKiB5ICsgMiAqIHggKiAyICogeCk7XG4gIH1cbiAgLyoqXG4gICAqIEBwYXJhbSBmYWNlX2kgSW5kZXggb2YgdGhlIGZhY2VcbiAgICovXG5cblxuICBnZXRQbGFuZUNvbnN0YW50T2ZGYWNlKGZhY2VfaSkge1xuICAgIGNvbnN0IGYgPSB0aGlzLmZhY2VzW2ZhY2VfaV07XG4gICAgY29uc3QgbiA9IHRoaXMuZmFjZU5vcm1hbHNbZmFjZV9pXTtcbiAgICBjb25zdCB2ID0gdGhpcy52ZXJ0aWNlc1tmWzBdXTtcbiAgICBjb25zdCBjID0gLW4uZG90KHYpO1xuICAgIHJldHVybiBjO1xuICB9XG4gIC8qKlxuICAgKiBDbGlwIGEgZmFjZSBhZ2FpbnN0IGEgaHVsbC5cbiAgICogQHBhcmFtIHdvcmxkVmVydHNCMSBBbiBhcnJheSBvZiBWZWMzIHdpdGggdmVydGljZXMgaW4gdGhlIHdvcmxkIGZyYW1lLlxuICAgKiBAcGFyYW0gbWluRGlzdCBEaXN0YW5jZSBjbGFtcGluZ1xuICAgKiBAcGFyYW0gQXJyYXkgcmVzdWx0IEFycmF5IHRvIHN0b3JlIHJlc3VsdGluZyBjb250YWN0IHBvaW50cyBpbi4gV2lsbCBiZSBvYmplY3RzIHdpdGggcHJvcGVydGllczogcG9pbnQsIGRlcHRoLCBub3JtYWwuIFRoZXNlIGFyZSByZXByZXNlbnRlZCBpbiB3b3JsZCBjb29yZGluYXRlcy5cbiAgICovXG5cblxuICBjbGlwRmFjZUFnYWluc3RIdWxsKHNlcGFyYXRpbmdOb3JtYWwsIHBvc0EsIHF1YXRBLCB3b3JsZFZlcnRzQjEsIG1pbkRpc3QsIG1heERpc3QsIHJlc3VsdCkge1xuICAgIGNvbnN0IGZhY2VBTm9ybWFsV1MgPSBuZXcgVmVjMygpO1xuICAgIGNvbnN0IGVkZ2UwID0gbmV3IFZlYzMoKTtcbiAgICBjb25zdCBXb3JsZEVkZ2UwID0gbmV3IFZlYzMoKTtcbiAgICBjb25zdCB3b3JsZFBsYW5lQW5vcm1hbDEgPSBuZXcgVmVjMygpO1xuICAgIGNvbnN0IHBsYW5lTm9ybWFsV1MxID0gbmV3IFZlYzMoKTtcbiAgICBjb25zdCB3b3JsZEExID0gbmV3IFZlYzMoKTtcbiAgICBjb25zdCBsb2NhbFBsYW5lTm9ybWFsID0gbmV3IFZlYzMoKTtcbiAgICBjb25zdCBwbGFuZU5vcm1hbFdTID0gbmV3IFZlYzMoKTtcbiAgICBjb25zdCBodWxsQSA9IHRoaXM7XG4gICAgY29uc3Qgd29ybGRWZXJ0c0IyID0gW107XG4gICAgY29uc3QgcFZ0eEluID0gd29ybGRWZXJ0c0IxO1xuICAgIGNvbnN0IHBWdHhPdXQgPSB3b3JsZFZlcnRzQjI7XG4gICAgbGV0IGNsb3Nlc3RGYWNlQSA9IC0xO1xuICAgIGxldCBkbWluID0gTnVtYmVyLk1BWF9WQUxVRTsgLy8gRmluZCB0aGUgZmFjZSB3aXRoIG5vcm1hbCBjbG9zZXN0IHRvIHRoZSBzZXBhcmF0aW5nIGF4aXNcblxuICAgIGZvciAobGV0IGZhY2UgPSAwOyBmYWNlIDwgaHVsbEEuZmFjZXMubGVuZ3RoOyBmYWNlKyspIHtcbiAgICAgIGZhY2VBTm9ybWFsV1MuY29weShodWxsQS5mYWNlTm9ybWFsc1tmYWNlXSk7XG4gICAgICBxdWF0QS52bXVsdChmYWNlQU5vcm1hbFdTLCBmYWNlQU5vcm1hbFdTKTtcbiAgICAgIGNvbnN0IGQgPSBmYWNlQU5vcm1hbFdTLmRvdChzZXBhcmF0aW5nTm9ybWFsKTtcblxuICAgICAgaWYgKGQgPCBkbWluKSB7XG4gICAgICAgIGRtaW4gPSBkO1xuICAgICAgICBjbG9zZXN0RmFjZUEgPSBmYWNlO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChjbG9zZXN0RmFjZUEgPCAwKSB7XG4gICAgICByZXR1cm47XG4gICAgfSAvLyBHZXQgdGhlIGZhY2UgYW5kIGNvbnN0cnVjdCBjb25uZWN0ZWQgZmFjZXNcblxuXG4gICAgY29uc3QgcG9seUEgPSBodWxsQS5mYWNlc1tjbG9zZXN0RmFjZUFdO1xuICAgIHBvbHlBLmNvbm5lY3RlZEZhY2VzID0gW107XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGh1bGxBLmZhY2VzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBmb3IgKGxldCBqID0gMDsgaiA8IGh1bGxBLmZhY2VzW2ldLmxlbmd0aDsgaisrKSB7XG4gICAgICAgIGlmIChcbiAgICAgICAgLyogU2hhcmluZyBhIHZlcnRleCovXG4gICAgICAgIHBvbHlBLmluZGV4T2YoaHVsbEEuZmFjZXNbaV1bal0pICE9PSAtMSAmJlxuICAgICAgICAvKiBOb3QgdGhlIG9uZSB3ZSBhcmUgbG9va2luZyBmb3IgY29ubmVjdGlvbnMgZnJvbSAqL1xuICAgICAgICBpICE9PSBjbG9zZXN0RmFjZUEgJiZcbiAgICAgICAgLyogTm90IGFscmVhZHkgYWRkZWQgKi9cbiAgICAgICAgcG9seUEuY29ubmVjdGVkRmFjZXMuaW5kZXhPZihpKSA9PT0gLTEpIHtcbiAgICAgICAgICBwb2x5QS5jb25uZWN0ZWRGYWNlcy5wdXNoKGkpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSAvLyBDbGlwIHRoZSBwb2x5Z29uIHRvIHRoZSBiYWNrIG9mIHRoZSBwbGFuZXMgb2YgYWxsIGZhY2VzIG9mIGh1bGwgQSxcbiAgICAvLyB0aGF0IGFyZSBhZGphY2VudCB0byB0aGUgd2l0bmVzcyBmYWNlXG5cblxuICAgIGNvbnN0IG51bVZlcnRpY2VzQSA9IHBvbHlBLmxlbmd0aDtcblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbnVtVmVydGljZXNBOyBpKyspIHtcbiAgICAgIGNvbnN0IGEgPSBodWxsQS52ZXJ0aWNlc1twb2x5QVtpXV07XG4gICAgICBjb25zdCBiID0gaHVsbEEudmVydGljZXNbcG9seUFbKGkgKyAxKSAlIG51bVZlcnRpY2VzQV1dO1xuICAgICAgYS52c3ViKGIsIGVkZ2UwKTtcbiAgICAgIFdvcmxkRWRnZTAuY29weShlZGdlMCk7XG4gICAgICBxdWF0QS52bXVsdChXb3JsZEVkZ2UwLCBXb3JsZEVkZ2UwKTtcbiAgICAgIHBvc0EudmFkZChXb3JsZEVkZ2UwLCBXb3JsZEVkZ2UwKTtcbiAgICAgIHdvcmxkUGxhbmVBbm9ybWFsMS5jb3B5KHRoaXMuZmFjZU5vcm1hbHNbY2xvc2VzdEZhY2VBXSk7XG4gICAgICBxdWF0QS52bXVsdCh3b3JsZFBsYW5lQW5vcm1hbDEsIHdvcmxkUGxhbmVBbm9ybWFsMSk7XG4gICAgICBwb3NBLnZhZGQod29ybGRQbGFuZUFub3JtYWwxLCB3b3JsZFBsYW5lQW5vcm1hbDEpO1xuICAgICAgV29ybGRFZGdlMC5jcm9zcyh3b3JsZFBsYW5lQW5vcm1hbDEsIHBsYW5lTm9ybWFsV1MxKTtcbiAgICAgIHBsYW5lTm9ybWFsV1MxLm5lZ2F0ZShwbGFuZU5vcm1hbFdTMSk7XG4gICAgICB3b3JsZEExLmNvcHkoYSk7XG4gICAgICBxdWF0QS52bXVsdCh3b3JsZEExLCB3b3JsZEExKTtcbiAgICAgIHBvc0EudmFkZCh3b3JsZEExLCB3b3JsZEExKTtcbiAgICAgIGNvbnN0IG90aGVyRmFjZSA9IHBvbHlBLmNvbm5lY3RlZEZhY2VzW2ldO1xuICAgICAgbG9jYWxQbGFuZU5vcm1hbC5jb3B5KHRoaXMuZmFjZU5vcm1hbHNbb3RoZXJGYWNlXSk7XG4gICAgICBjb25zdCBsb2NhbFBsYW5lRXEgPSB0aGlzLmdldFBsYW5lQ29uc3RhbnRPZkZhY2Uob3RoZXJGYWNlKTtcbiAgICAgIHBsYW5lTm9ybWFsV1MuY29weShsb2NhbFBsYW5lTm9ybWFsKTtcbiAgICAgIHF1YXRBLnZtdWx0KHBsYW5lTm9ybWFsV1MsIHBsYW5lTm9ybWFsV1MpO1xuICAgICAgY29uc3QgcGxhbmVFcVdTID0gbG9jYWxQbGFuZUVxIC0gcGxhbmVOb3JtYWxXUy5kb3QocG9zQSk7IC8vIENsaXAgZmFjZSBhZ2FpbnN0IG91ciBjb25zdHJ1Y3RlZCBwbGFuZVxuXG4gICAgICB0aGlzLmNsaXBGYWNlQWdhaW5zdFBsYW5lKHBWdHhJbiwgcFZ0eE91dCwgcGxhbmVOb3JtYWxXUywgcGxhbmVFcVdTKTsgLy8gVGhyb3cgYXdheSBhbGwgY2xpcHBlZCBwb2ludHMsIGJ1dCBzYXZlIHRoZSByZW1haW5pbmcgdW50aWwgbmV4dCBjbGlwXG5cbiAgICAgIHdoaWxlIChwVnR4SW4ubGVuZ3RoKSB7XG4gICAgICAgIHBWdHhJbi5zaGlmdCgpO1xuICAgICAgfVxuXG4gICAgICB3aGlsZSAocFZ0eE91dC5sZW5ndGgpIHtcbiAgICAgICAgcFZ0eEluLnB1c2gocFZ0eE91dC5zaGlmdCgpKTtcbiAgICAgIH1cbiAgICB9IC8vIG9ubHkga2VlcCBjb250YWN0IHBvaW50cyB0aGF0IGFyZSBiZWhpbmQgdGhlIHdpdG5lc3MgZmFjZVxuXG5cbiAgICBsb2NhbFBsYW5lTm9ybWFsLmNvcHkodGhpcy5mYWNlTm9ybWFsc1tjbG9zZXN0RmFjZUFdKTtcbiAgICBjb25zdCBsb2NhbFBsYW5lRXEgPSB0aGlzLmdldFBsYW5lQ29uc3RhbnRPZkZhY2UoY2xvc2VzdEZhY2VBKTtcbiAgICBwbGFuZU5vcm1hbFdTLmNvcHkobG9jYWxQbGFuZU5vcm1hbCk7XG4gICAgcXVhdEEudm11bHQocGxhbmVOb3JtYWxXUywgcGxhbmVOb3JtYWxXUyk7XG4gICAgY29uc3QgcGxhbmVFcVdTID0gbG9jYWxQbGFuZUVxIC0gcGxhbmVOb3JtYWxXUy5kb3QocG9zQSk7XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHBWdHhJbi5sZW5ndGg7IGkrKykge1xuICAgICAgbGV0IGRlcHRoID0gcGxhbmVOb3JtYWxXUy5kb3QocFZ0eEluW2ldKSArIHBsYW5lRXFXUzsgLy8gPz8/XG5cbiAgICAgIGlmIChkZXB0aCA8PSBtaW5EaXN0KSB7XG4gICAgICAgIGNvbnNvbGUubG9nKFwiY2xhbXBlZDogZGVwdGg9XCIgKyBkZXB0aCArIFwiIHRvIG1pbkRpc3Q9XCIgKyBtaW5EaXN0KTtcbiAgICAgICAgZGVwdGggPSBtaW5EaXN0O1xuICAgICAgfVxuXG4gICAgICBpZiAoZGVwdGggPD0gbWF4RGlzdCkge1xuICAgICAgICBjb25zdCBwb2ludCA9IHBWdHhJbltpXTtcblxuICAgICAgICBpZiAoZGVwdGggPD0gMWUtNikge1xuICAgICAgICAgIGNvbnN0IHAgPSB7XG4gICAgICAgICAgICBwb2ludCxcbiAgICAgICAgICAgIG5vcm1hbDogcGxhbmVOb3JtYWxXUyxcbiAgICAgICAgICAgIGRlcHRoXG4gICAgICAgICAgfTtcbiAgICAgICAgICByZXN1bHQucHVzaChwKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuICAvKipcbiAgICogQ2xpcCBhIGZhY2UgaW4gYSBodWxsIGFnYWluc3QgdGhlIGJhY2sgb2YgYSBwbGFuZS5cbiAgICogQHBhcmFtIHBsYW5lQ29uc3RhbnQgVGhlIGNvbnN0YW50IGluIHRoZSBtYXRoZW1hdGljYWwgcGxhbmUgZXF1YXRpb25cbiAgICovXG5cblxuICBjbGlwRmFjZUFnYWluc3RQbGFuZShpblZlcnRpY2VzLCBvdXRWZXJ0aWNlcywgcGxhbmVOb3JtYWwsIHBsYW5lQ29uc3RhbnQpIHtcbiAgICBsZXQgbl9kb3RfZmlyc3Q7XG4gICAgbGV0IG5fZG90X2xhc3Q7XG4gICAgY29uc3QgbnVtVmVydHMgPSBpblZlcnRpY2VzLmxlbmd0aDtcblxuICAgIGlmIChudW1WZXJ0cyA8IDIpIHtcbiAgICAgIHJldHVybiBvdXRWZXJ0aWNlcztcbiAgICB9XG5cbiAgICBsZXQgZmlyc3RWZXJ0ZXggPSBpblZlcnRpY2VzW2luVmVydGljZXMubGVuZ3RoIC0gMV07XG4gICAgbGV0IGxhc3RWZXJ0ZXggPSBpblZlcnRpY2VzWzBdO1xuICAgIG5fZG90X2ZpcnN0ID0gcGxhbmVOb3JtYWwuZG90KGZpcnN0VmVydGV4KSArIHBsYW5lQ29uc3RhbnQ7XG5cbiAgICBmb3IgKGxldCB2aSA9IDA7IHZpIDwgbnVtVmVydHM7IHZpKyspIHtcbiAgICAgIGxhc3RWZXJ0ZXggPSBpblZlcnRpY2VzW3ZpXTtcbiAgICAgIG5fZG90X2xhc3QgPSBwbGFuZU5vcm1hbC5kb3QobGFzdFZlcnRleCkgKyBwbGFuZUNvbnN0YW50O1xuXG4gICAgICBpZiAobl9kb3RfZmlyc3QgPCAwKSB7XG4gICAgICAgIGlmIChuX2RvdF9sYXN0IDwgMCkge1xuICAgICAgICAgIC8vIFN0YXJ0IDwgMCwgZW5kIDwgMCwgc28gb3V0cHV0IGxhc3RWZXJ0ZXhcbiAgICAgICAgICBjb25zdCBuZXd2ID0gbmV3IFZlYzMoKTtcbiAgICAgICAgICBuZXd2LmNvcHkobGFzdFZlcnRleCk7XG4gICAgICAgICAgb3V0VmVydGljZXMucHVzaChuZXd2KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyBTdGFydCA8IDAsIGVuZCA+PSAwLCBzbyBvdXRwdXQgaW50ZXJzZWN0aW9uXG4gICAgICAgICAgY29uc3QgbmV3diA9IG5ldyBWZWMzKCk7XG4gICAgICAgICAgZmlyc3RWZXJ0ZXgubGVycChsYXN0VmVydGV4LCBuX2RvdF9maXJzdCAvIChuX2RvdF9maXJzdCAtIG5fZG90X2xhc3QpLCBuZXd2KTtcbiAgICAgICAgICBvdXRWZXJ0aWNlcy5wdXNoKG5ld3YpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZiAobl9kb3RfbGFzdCA8IDApIHtcbiAgICAgICAgICAvLyBTdGFydCA+PSAwLCBlbmQgPCAwIHNvIG91dHB1dCBpbnRlcnNlY3Rpb24gYW5kIGVuZFxuICAgICAgICAgIGNvbnN0IG5ld3YgPSBuZXcgVmVjMygpO1xuICAgICAgICAgIGZpcnN0VmVydGV4LmxlcnAobGFzdFZlcnRleCwgbl9kb3RfZmlyc3QgLyAobl9kb3RfZmlyc3QgLSBuX2RvdF9sYXN0KSwgbmV3dik7XG4gICAgICAgICAgb3V0VmVydGljZXMucHVzaChuZXd2KTtcbiAgICAgICAgICBvdXRWZXJ0aWNlcy5wdXNoKGxhc3RWZXJ0ZXgpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGZpcnN0VmVydGV4ID0gbGFzdFZlcnRleDtcbiAgICAgIG5fZG90X2ZpcnN0ID0gbl9kb3RfbGFzdDtcbiAgICB9XG5cbiAgICByZXR1cm4gb3V0VmVydGljZXM7XG4gIH1cbiAgLyoqXG4gICAqIFVwZGF0ZXMgYC53b3JsZFZlcnRpY2VzYCBhbmQgc2V0cyBgLndvcmxkVmVydGljZXNOZWVkc1VwZGF0ZWAgdG8gZmFsc2UuXG4gICAqL1xuXG5cbiAgY29tcHV0ZVdvcmxkVmVydGljZXMocG9zaXRpb24sIHF1YXQpIHtcbiAgICB3aGlsZSAodGhpcy53b3JsZFZlcnRpY2VzLmxlbmd0aCA8IHRoaXMudmVydGljZXMubGVuZ3RoKSB7XG4gICAgICB0aGlzLndvcmxkVmVydGljZXMucHVzaChuZXcgVmVjMygpKTtcbiAgICB9XG5cbiAgICBjb25zdCB2ZXJ0cyA9IHRoaXMudmVydGljZXM7XG4gICAgY29uc3Qgd29ybGRWZXJ0cyA9IHRoaXMud29ybGRWZXJ0aWNlcztcblxuICAgIGZvciAobGV0IGkgPSAwOyBpICE9PSB0aGlzLnZlcnRpY2VzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBxdWF0LnZtdWx0KHZlcnRzW2ldLCB3b3JsZFZlcnRzW2ldKTtcbiAgICAgIHBvc2l0aW9uLnZhZGQod29ybGRWZXJ0c1tpXSwgd29ybGRWZXJ0c1tpXSk7XG4gICAgfVxuXG4gICAgdGhpcy53b3JsZFZlcnRpY2VzTmVlZHNVcGRhdGUgPSBmYWxzZTtcbiAgfVxuXG4gIGNvbXB1dGVMb2NhbEFBQkIoYWFiYm1pbiwgYWFiYm1heCkge1xuICAgIGNvbnN0IHZlcnRpY2VzID0gdGhpcy52ZXJ0aWNlcztcbiAgICBhYWJibWluLnNldChOdW1iZXIuTUFYX1ZBTFVFLCBOdW1iZXIuTUFYX1ZBTFVFLCBOdW1iZXIuTUFYX1ZBTFVFKTtcbiAgICBhYWJibWF4LnNldCgtTnVtYmVyLk1BWF9WQUxVRSwgLU51bWJlci5NQVhfVkFMVUUsIC1OdW1iZXIuTUFYX1ZBTFVFKTtcblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy52ZXJ0aWNlcy5sZW5ndGg7IGkrKykge1xuICAgICAgY29uc3QgdiA9IHZlcnRpY2VzW2ldO1xuXG4gICAgICBpZiAodi54IDwgYWFiYm1pbi54KSB7XG4gICAgICAgIGFhYmJtaW4ueCA9IHYueDtcbiAgICAgIH0gZWxzZSBpZiAodi54ID4gYWFiYm1heC54KSB7XG4gICAgICAgIGFhYmJtYXgueCA9IHYueDtcbiAgICAgIH1cblxuICAgICAgaWYgKHYueSA8IGFhYmJtaW4ueSkge1xuICAgICAgICBhYWJibWluLnkgPSB2Lnk7XG4gICAgICB9IGVsc2UgaWYgKHYueSA+IGFhYmJtYXgueSkge1xuICAgICAgICBhYWJibWF4LnkgPSB2Lnk7XG4gICAgICB9XG5cbiAgICAgIGlmICh2LnogPCBhYWJibWluLnopIHtcbiAgICAgICAgYWFiYm1pbi56ID0gdi56O1xuICAgICAgfSBlbHNlIGlmICh2LnogPiBhYWJibWF4LnopIHtcbiAgICAgICAgYWFiYm1heC56ID0gdi56O1xuICAgICAgfVxuICAgIH1cbiAgfVxuICAvKipcbiAgICogVXBkYXRlcyBgd29ybGRWZXJ0aWNlc2AgYW5kIHNldHMgYHdvcmxkVmVydGljZXNOZWVkc1VwZGF0ZWAgdG8gZmFsc2UuXG4gICAqL1xuXG5cbiAgY29tcHV0ZVdvcmxkRmFjZU5vcm1hbHMocXVhdCkge1xuICAgIGNvbnN0IE4gPSB0aGlzLmZhY2VOb3JtYWxzLmxlbmd0aDtcblxuICAgIHdoaWxlICh0aGlzLndvcmxkRmFjZU5vcm1hbHMubGVuZ3RoIDwgTikge1xuICAgICAgdGhpcy53b3JsZEZhY2VOb3JtYWxzLnB1c2gobmV3IFZlYzMoKSk7XG4gICAgfVxuXG4gICAgY29uc3Qgbm9ybWFscyA9IHRoaXMuZmFjZU5vcm1hbHM7XG4gICAgY29uc3Qgd29ybGROb3JtYWxzID0gdGhpcy53b3JsZEZhY2VOb3JtYWxzO1xuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgIT09IE47IGkrKykge1xuICAgICAgcXVhdC52bXVsdChub3JtYWxzW2ldLCB3b3JsZE5vcm1hbHNbaV0pO1xuICAgIH1cblxuICAgIHRoaXMud29ybGRGYWNlTm9ybWFsc05lZWRzVXBkYXRlID0gZmFsc2U7XG4gIH1cbiAgLyoqXG4gICAqIHVwZGF0ZUJvdW5kaW5nU3BoZXJlUmFkaXVzXG4gICAqL1xuXG5cbiAgdXBkYXRlQm91bmRpbmdTcGhlcmVSYWRpdXMoKSB7XG4gICAgLy8gQXNzdW1lIHBvaW50cyBhcmUgZGlzdHJpYnV0ZWQgd2l0aCBsb2NhbCAoMCwwLDApIGFzIGNlbnRlclxuICAgIGxldCBtYXgyID0gMDtcbiAgICBjb25zdCB2ZXJ0cyA9IHRoaXMudmVydGljZXM7XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSAhPT0gdmVydHMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGNvbnN0IG5vcm0yID0gdmVydHNbaV0ubGVuZ3RoU3F1YXJlZCgpO1xuXG4gICAgICBpZiAobm9ybTIgPiBtYXgyKSB7XG4gICAgICAgIG1heDIgPSBub3JtMjtcbiAgICAgIH1cbiAgICB9XG5cbiAgICB0aGlzLmJvdW5kaW5nU3BoZXJlUmFkaXVzID0gTWF0aC5zcXJ0KG1heDIpO1xuICB9XG4gIC8qKlxuICAgKiBjYWxjdWxhdGVXb3JsZEFBQkJcbiAgICovXG5cblxuICBjYWxjdWxhdGVXb3JsZEFBQkIocG9zLCBxdWF0LCBtaW4sIG1heCkge1xuICAgIGNvbnN0IHZlcnRzID0gdGhpcy52ZXJ0aWNlcztcbiAgICBsZXQgbWlueDtcbiAgICBsZXQgbWlueTtcbiAgICBsZXQgbWluejtcbiAgICBsZXQgbWF4eDtcbiAgICBsZXQgbWF4eTtcbiAgICBsZXQgbWF4ejtcbiAgICBsZXQgdGVtcFdvcmxkVmVydGV4ID0gbmV3IFZlYzMoKTtcblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdmVydHMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHRlbXBXb3JsZFZlcnRleC5jb3B5KHZlcnRzW2ldKTtcbiAgICAgIHF1YXQudm11bHQodGVtcFdvcmxkVmVydGV4LCB0ZW1wV29ybGRWZXJ0ZXgpO1xuICAgICAgcG9zLnZhZGQodGVtcFdvcmxkVmVydGV4LCB0ZW1wV29ybGRWZXJ0ZXgpO1xuICAgICAgY29uc3QgdiA9IHRlbXBXb3JsZFZlcnRleDtcblxuICAgICAgaWYgKG1pbnggPT09IHVuZGVmaW5lZCB8fCB2LnggPCBtaW54KSB7XG4gICAgICAgIG1pbnggPSB2Lng7XG4gICAgICB9XG5cbiAgICAgIGlmIChtYXh4ID09PSB1bmRlZmluZWQgfHwgdi54ID4gbWF4eCkge1xuICAgICAgICBtYXh4ID0gdi54O1xuICAgICAgfVxuXG4gICAgICBpZiAobWlueSA9PT0gdW5kZWZpbmVkIHx8IHYueSA8IG1pbnkpIHtcbiAgICAgICAgbWlueSA9IHYueTtcbiAgICAgIH1cblxuICAgICAgaWYgKG1heHkgPT09IHVuZGVmaW5lZCB8fCB2LnkgPiBtYXh5KSB7XG4gICAgICAgIG1heHkgPSB2Lnk7XG4gICAgICB9XG5cbiAgICAgIGlmIChtaW56ID09PSB1bmRlZmluZWQgfHwgdi56IDwgbWlueikge1xuICAgICAgICBtaW56ID0gdi56O1xuICAgICAgfVxuXG4gICAgICBpZiAobWF4eiA9PT0gdW5kZWZpbmVkIHx8IHYueiA+IG1heHopIHtcbiAgICAgICAgbWF4eiA9IHYuejtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBtaW4uc2V0KG1pbngsIG1pbnksIG1pbnopO1xuICAgIG1heC5zZXQobWF4eCwgbWF4eSwgbWF4eik7XG4gIH1cbiAgLyoqXG4gICAqIEdldCBhcHByb3hpbWF0ZSBjb252ZXggdm9sdW1lXG4gICAqL1xuXG5cbiAgdm9sdW1lKCkge1xuICAgIHJldHVybiA0LjAgKiBNYXRoLlBJICogdGhpcy5ib3VuZGluZ1NwaGVyZVJhZGl1cyAvIDMuMDtcbiAgfVxuICAvKipcbiAgICogR2V0IGFuIGF2ZXJhZ2Ugb2YgYWxsIHRoZSB2ZXJ0aWNlcyBwb3NpdGlvbnNcbiAgICovXG5cblxuICBnZXRBdmVyYWdlUG9pbnRMb2NhbCh0YXJnZXQgPSBuZXcgVmVjMygpKSB7XG4gICAgY29uc3QgdmVydHMgPSB0aGlzLnZlcnRpY2VzO1xuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB2ZXJ0cy5sZW5ndGg7IGkrKykge1xuICAgICAgdGFyZ2V0LnZhZGQodmVydHNbaV0sIHRhcmdldCk7XG4gICAgfVxuXG4gICAgdGFyZ2V0LnNjYWxlKDEgLyB2ZXJ0cy5sZW5ndGgsIHRhcmdldCk7XG4gICAgcmV0dXJuIHRhcmdldDtcbiAgfVxuICAvKipcbiAgICogVHJhbnNmb3JtIGFsbCBsb2NhbCBwb2ludHMuIFdpbGwgY2hhbmdlIHRoZSAudmVydGljZXNcbiAgICovXG5cblxuICB0cmFuc2Zvcm1BbGxQb2ludHMob2Zmc2V0LCBxdWF0KSB7XG4gICAgY29uc3QgbiA9IHRoaXMudmVydGljZXMubGVuZ3RoO1xuICAgIGNvbnN0IHZlcnRzID0gdGhpcy52ZXJ0aWNlczsgLy8gQXBwbHkgcm90YXRpb25cblxuICAgIGlmIChxdWF0KSB7XG4gICAgICAvLyBSb3RhdGUgdmVydGljZXNcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbjsgaSsrKSB7XG4gICAgICAgIGNvbnN0IHYgPSB2ZXJ0c1tpXTtcbiAgICAgICAgcXVhdC52bXVsdCh2LCB2KTtcbiAgICAgIH0gLy8gUm90YXRlIGZhY2Ugbm9ybWFsc1xuXG5cbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5mYWNlTm9ybWFscy5sZW5ndGg7IGkrKykge1xuICAgICAgICBjb25zdCB2ID0gdGhpcy5mYWNlTm9ybWFsc1tpXTtcbiAgICAgICAgcXVhdC52bXVsdCh2LCB2KTtcbiAgICAgIH1cbiAgICAgIC8qXG4gICAgICAgICAgICAvLyBSb3RhdGUgZWRnZXNcbiAgICAgICAgICAgIGZvcihsZXQgaT0wOyBpPHRoaXMudW5pcXVlRWRnZXMubGVuZ3RoOyBpKyspe1xuICAgICAgICAgICAgICAgIGNvbnN0IHYgPSB0aGlzLnVuaXF1ZUVkZ2VzW2ldO1xuICAgICAgICAgICAgICAgIHF1YXQudm11bHQodix2KTtcbiAgICAgICAgICAgIH0qL1xuXG4gICAgfSAvLyBBcHBseSBvZmZzZXRcblxuXG4gICAgaWYgKG9mZnNldCkge1xuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBuOyBpKyspIHtcbiAgICAgICAgY29uc3QgdiA9IHZlcnRzW2ldO1xuICAgICAgICB2LnZhZGQob2Zmc2V0LCB2KTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgLyoqXG4gICAqIENoZWNrcyB3aGV0aGVyIHAgaXMgaW5zaWRlIHRoZSBwb2x5aGVkcmEuIE11c3QgYmUgaW4gbG9jYWwgY29vcmRzLlxuICAgKiBUaGUgcG9pbnQgbGllcyBvdXRzaWRlIG9mIHRoZSBjb252ZXggaHVsbCBvZiB0aGUgb3RoZXIgcG9pbnRzIGlmIGFuZCBvbmx5IGlmIHRoZSBkaXJlY3Rpb25cbiAgICogb2YgYWxsIHRoZSB2ZWN0b3JzIGZyb20gaXQgdG8gdGhvc2Ugb3RoZXIgcG9pbnRzIGFyZSBvbiBsZXNzIHRoYW4gb25lIGhhbGYgb2YgYSBzcGhlcmUgYXJvdW5kIGl0LlxuICAgKiBAcGFyYW0gcCBBIHBvaW50IGdpdmVuIGluIGxvY2FsIGNvb3JkaW5hdGVzXG4gICAqL1xuXG5cbiAgcG9pbnRJc0luc2lkZShwKSB7XG4gICAgY29uc3QgdmVydHMgPSB0aGlzLnZlcnRpY2VzO1xuICAgIGNvbnN0IGZhY2VzID0gdGhpcy5mYWNlcztcbiAgICBjb25zdCBub3JtYWxzID0gdGhpcy5mYWNlTm9ybWFscztcbiAgICBjb25zdCBwb2ludEluc2lkZSA9IG5ldyBWZWMzKCk7XG4gICAgdGhpcy5nZXRBdmVyYWdlUG9pbnRMb2NhbChwb2ludEluc2lkZSk7XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuZmFjZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGxldCBuID0gbm9ybWFsc1tpXTtcbiAgICAgIGNvbnN0IHYgPSB2ZXJ0c1tmYWNlc1tpXVswXV07IC8vIFdlIG9ubHkgbmVlZCBvbmUgcG9pbnQgaW4gdGhlIGZhY2VcbiAgICAgIC8vIFRoaXMgZG90IHByb2R1Y3QgZGV0ZXJtaW5lcyB3aGljaCBzaWRlIG9mIHRoZSBlZGdlIHRoZSBwb2ludCBpc1xuXG4gICAgICBjb25zdCB2VG9QID0gbmV3IFZlYzMoKTtcbiAgICAgIHAudnN1Yih2LCB2VG9QKTtcbiAgICAgIGNvbnN0IHIxID0gbi5kb3QodlRvUCk7XG4gICAgICBjb25zdCB2VG9Qb2ludEluc2lkZSA9IG5ldyBWZWMzKCk7XG4gICAgICBwb2ludEluc2lkZS52c3ViKHYsIHZUb1BvaW50SW5zaWRlKTtcbiAgICAgIGNvbnN0IHIyID0gbi5kb3QodlRvUG9pbnRJbnNpZGUpO1xuXG4gICAgICBpZiAocjEgPCAwICYmIHIyID4gMCB8fCByMSA+IDAgJiYgcjIgPCAwKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTsgLy8gRW5jb3VudGVyZWQgc29tZSBvdGhlciBzaWduLiBFeGl0LlxuICAgICAgfVxuICAgIH0gLy8gSWYgd2UgZ290IGhlcmUsIGFsbCBkb3QgcHJvZHVjdHMgd2VyZSBvZiB0aGUgc2FtZSBzaWduLlxuXG5cbiAgICByZXR1cm4gLTE7XG4gIH1cbiAgLyoqXG4gICAqIEdldCBtYXggYW5kIG1pbiBkb3QgcHJvZHVjdCBvZiBhIGNvbnZleCBodWxsIGF0IHBvc2l0aW9uIChwb3MscXVhdCkgcHJvamVjdGVkIG9udG8gYW4gYXhpcy5cbiAgICogUmVzdWx0cyBhcmUgc2F2ZWQgaW4gdGhlIGFycmF5IG1heG1pbi5cbiAgICogQHBhcmFtIHJlc3VsdCByZXN1bHRbMF0gYW5kIHJlc3VsdFsxXSB3aWxsIGJlIHNldCB0byBtYXhpbXVtIGFuZCBtaW5pbXVtLCByZXNwZWN0aXZlbHkuXG4gICAqL1xuXG5cbiAgc3RhdGljIHByb2plY3Qoc2hhcGUsIGF4aXMsIHBvcywgcXVhdCwgcmVzdWx0KSB7XG4gICAgY29uc3QgbiA9IHNoYXBlLnZlcnRpY2VzLmxlbmd0aDtcbiAgICBjb25zdCBsb2NhbEF4aXMgPSBwcm9qZWN0X2xvY2FsQXhpcztcbiAgICBsZXQgbWF4ID0gMDtcbiAgICBsZXQgbWluID0gMDtcbiAgICBjb25zdCBsb2NhbE9yaWdpbiA9IHByb2plY3RfbG9jYWxPcmlnaW47XG4gICAgY29uc3QgdnMgPSBzaGFwZS52ZXJ0aWNlcztcbiAgICBsb2NhbE9yaWdpbi5zZXRaZXJvKCk7IC8vIFRyYW5zZm9ybSB0aGUgYXhpcyB0byBsb2NhbFxuXG4gICAgVHJhbnNmb3JtLnZlY3RvclRvTG9jYWxGcmFtZShwb3MsIHF1YXQsIGF4aXMsIGxvY2FsQXhpcyk7XG4gICAgVHJhbnNmb3JtLnBvaW50VG9Mb2NhbEZyYW1lKHBvcywgcXVhdCwgbG9jYWxPcmlnaW4sIGxvY2FsT3JpZ2luKTtcbiAgICBjb25zdCBhZGQgPSBsb2NhbE9yaWdpbi5kb3QobG9jYWxBeGlzKTtcbiAgICBtaW4gPSBtYXggPSB2c1swXS5kb3QobG9jYWxBeGlzKTtcblxuICAgIGZvciAobGV0IGkgPSAxOyBpIDwgbjsgaSsrKSB7XG4gICAgICBjb25zdCB2YWwgPSB2c1tpXS5kb3QobG9jYWxBeGlzKTtcblxuICAgICAgaWYgKHZhbCA+IG1heCkge1xuICAgICAgICBtYXggPSB2YWw7XG4gICAgICB9XG5cbiAgICAgIGlmICh2YWwgPCBtaW4pIHtcbiAgICAgICAgbWluID0gdmFsO1xuICAgICAgfVxuICAgIH1cblxuICAgIG1pbiAtPSBhZGQ7XG4gICAgbWF4IC09IGFkZDtcblxuICAgIGlmIChtaW4gPiBtYXgpIHtcbiAgICAgIC8vIEluY29uc2lzdGVudCAtIHN3YXBcbiAgICAgIGNvbnN0IHRlbXAgPSBtaW47XG4gICAgICBtaW4gPSBtYXg7XG4gICAgICBtYXggPSB0ZW1wO1xuICAgIH0gLy8gT3V0cHV0XG5cblxuICAgIHJlc3VsdFswXSA9IG1heDtcbiAgICByZXN1bHRbMV0gPSBtaW47XG4gIH1cblxufVxuY29uc3QgbWF4bWluQSA9IFtdO1xuY29uc3QgbWF4bWluQiA9IFtdO1xuY29uc3QgcHJvamVjdF9sb2NhbEF4aXMgPSBuZXcgVmVjMygpO1xuY29uc3QgcHJvamVjdF9sb2NhbE9yaWdpbiA9IG5ldyBWZWMzKCk7XG5cbi8qKlxuICogQSAzZCBib3ggc2hhcGUuXG4gKiBAZXhhbXBsZVxuICogICAgIGNvbnN0IHNpemUgPSAxXG4gKiAgICAgY29uc3QgaGFsZkV4dGVudHMgPSBuZXcgQ0FOTk9OLlZlYzMoc2l6ZSwgc2l6ZSwgc2l6ZSlcbiAqICAgICBjb25zdCBib3hTaGFwZSA9IG5ldyBDQU5OT04uQm94KGhhbGZFeHRlbnRzKVxuICogICAgIGNvbnN0IGJveEJvZHkgPSBuZXcgQ0FOTk9OLkJvZHkoeyBtYXNzOiAxLCBzaGFwZTogYm94U2hhcGUgfSlcbiAqICAgICB3b3JsZC5hZGRCb2R5KGJveEJvZHkpXG4gKi9cbmNsYXNzIEJveCBleHRlbmRzIFNoYXBlIHtcbiAgLyoqXG4gICAqIFRoZSBoYWxmIGV4dGVudHMgb2YgdGhlIGJveC5cbiAgICovXG5cbiAgLyoqXG4gICAqIFVzZWQgYnkgdGhlIGNvbnRhY3QgZ2VuZXJhdG9yIHRvIG1ha2UgY29udGFjdHMgd2l0aCBvdGhlciBjb252ZXggcG9seWhlZHJhIGZvciBleGFtcGxlLlxuICAgKi9cbiAgY29uc3RydWN0b3IoaGFsZkV4dGVudHMpIHtcbiAgICBzdXBlcih7XG4gICAgICB0eXBlOiBTaGFwZS50eXBlcy5CT1hcbiAgICB9KTtcbiAgICB0aGlzLmhhbGZFeHRlbnRzID0gdm9pZCAwO1xuICAgIHRoaXMuY29udmV4UG9seWhlZHJvblJlcHJlc2VudGF0aW9uID0gdm9pZCAwO1xuICAgIHRoaXMuaGFsZkV4dGVudHMgPSBoYWxmRXh0ZW50cztcbiAgICB0aGlzLmNvbnZleFBvbHloZWRyb25SZXByZXNlbnRhdGlvbiA9IG51bGw7XG4gICAgdGhpcy51cGRhdGVDb252ZXhQb2x5aGVkcm9uUmVwcmVzZW50YXRpb24oKTtcbiAgICB0aGlzLnVwZGF0ZUJvdW5kaW5nU3BoZXJlUmFkaXVzKCk7XG4gIH1cbiAgLyoqXG4gICAqIFVwZGF0ZXMgdGhlIGxvY2FsIGNvbnZleCBwb2x5aGVkcm9uIHJlcHJlc2VudGF0aW9uIHVzZWQgZm9yIHNvbWUgY29sbGlzaW9ucy5cbiAgICovXG5cblxuICB1cGRhdGVDb252ZXhQb2x5aGVkcm9uUmVwcmVzZW50YXRpb24oKSB7XG4gICAgY29uc3Qgc3ggPSB0aGlzLmhhbGZFeHRlbnRzLng7XG4gICAgY29uc3Qgc3kgPSB0aGlzLmhhbGZFeHRlbnRzLnk7XG4gICAgY29uc3Qgc3ogPSB0aGlzLmhhbGZFeHRlbnRzLno7XG4gICAgY29uc3QgViA9IFZlYzM7XG4gICAgY29uc3QgdmVydGljZXMgPSBbbmV3IFYoLXN4LCAtc3ksIC1zeiksIG5ldyBWKHN4LCAtc3ksIC1zeiksIG5ldyBWKHN4LCBzeSwgLXN6KSwgbmV3IFYoLXN4LCBzeSwgLXN6KSwgbmV3IFYoLXN4LCAtc3ksIHN6KSwgbmV3IFYoc3gsIC1zeSwgc3opLCBuZXcgVihzeCwgc3ksIHN6KSwgbmV3IFYoLXN4LCBzeSwgc3opXTtcbiAgICBjb25zdCBmYWNlcyA9IFtbMywgMiwgMSwgMF0sIC8vIC16XG4gICAgWzQsIDUsIDYsIDddLCAvLyArelxuICAgIFs1LCA0LCAwLCAxXSwgLy8gLXlcbiAgICBbMiwgMywgNywgNl0sIC8vICt5XG4gICAgWzAsIDQsIDcsIDNdLCAvLyAteFxuICAgIFsxLCAyLCA2LCA1XSAvLyAreFxuICAgIF07XG4gICAgY29uc3QgYXhlcyA9IFtuZXcgVigwLCAwLCAxKSwgbmV3IFYoMCwgMSwgMCksIG5ldyBWKDEsIDAsIDApXTtcbiAgICBjb25zdCBoID0gbmV3IENvbnZleFBvbHloZWRyb24oe1xuICAgICAgdmVydGljZXMsXG4gICAgICBmYWNlcyxcbiAgICAgIGF4ZXNcbiAgICB9KTtcbiAgICB0aGlzLmNvbnZleFBvbHloZWRyb25SZXByZXNlbnRhdGlvbiA9IGg7XG4gICAgaC5tYXRlcmlhbCA9IHRoaXMubWF0ZXJpYWw7XG4gIH1cbiAgLyoqXG4gICAqIENhbGN1bGF0ZSB0aGUgaW5lcnRpYSBvZiB0aGUgYm94LlxuICAgKi9cblxuXG4gIGNhbGN1bGF0ZUxvY2FsSW5lcnRpYShtYXNzLCB0YXJnZXQgPSBuZXcgVmVjMygpKSB7XG4gICAgQm94LmNhbGN1bGF0ZUluZXJ0aWEodGhpcy5oYWxmRXh0ZW50cywgbWFzcywgdGFyZ2V0KTtcbiAgICByZXR1cm4gdGFyZ2V0O1xuICB9XG5cbiAgc3RhdGljIGNhbGN1bGF0ZUluZXJ0aWEoaGFsZkV4dGVudHMsIG1hc3MsIHRhcmdldCkge1xuICAgIGNvbnN0IGUgPSBoYWxmRXh0ZW50cztcbiAgICB0YXJnZXQueCA9IDEuMCAvIDEyLjAgKiBtYXNzICogKDIgKiBlLnkgKiAyICogZS55ICsgMiAqIGUueiAqIDIgKiBlLnopO1xuICAgIHRhcmdldC55ID0gMS4wIC8gMTIuMCAqIG1hc3MgKiAoMiAqIGUueCAqIDIgKiBlLnggKyAyICogZS56ICogMiAqIGUueik7XG4gICAgdGFyZ2V0LnogPSAxLjAgLyAxMi4wICogbWFzcyAqICgyICogZS55ICogMiAqIGUueSArIDIgKiBlLnggKiAyICogZS54KTtcbiAgfVxuICAvKipcbiAgICogR2V0IHRoZSBib3ggNiBzaWRlIG5vcm1hbHNcbiAgICogQHBhcmFtIHNpeFRhcmdldFZlY3RvcnMgQW4gYXJyYXkgb2YgNiB2ZWN0b3JzLCB0byBzdG9yZSB0aGUgcmVzdWx0aW5nIHNpZGUgbm9ybWFscyBpbi5cbiAgICogQHBhcmFtIHF1YXQgT3JpZW50YXRpb24gdG8gYXBwbHkgdG8gdGhlIG5vcm1hbCB2ZWN0b3JzLiBJZiBub3QgcHJvdmlkZWQsIHRoZSB2ZWN0b3JzIHdpbGwgYmUgaW4gcmVzcGVjdCB0byB0aGUgbG9jYWwgZnJhbWUuXG4gICAqL1xuXG5cbiAgZ2V0U2lkZU5vcm1hbHMoc2l4VGFyZ2V0VmVjdG9ycywgcXVhdCkge1xuICAgIGNvbnN0IHNpZGVzID0gc2l4VGFyZ2V0VmVjdG9ycztcbiAgICBjb25zdCBleCA9IHRoaXMuaGFsZkV4dGVudHM7XG4gICAgc2lkZXNbMF0uc2V0KGV4LngsIDAsIDApO1xuICAgIHNpZGVzWzFdLnNldCgwLCBleC55LCAwKTtcbiAgICBzaWRlc1syXS5zZXQoMCwgMCwgZXgueik7XG4gICAgc2lkZXNbM10uc2V0KC1leC54LCAwLCAwKTtcbiAgICBzaWRlc1s0XS5zZXQoMCwgLWV4LnksIDApO1xuICAgIHNpZGVzWzVdLnNldCgwLCAwLCAtZXgueik7XG5cbiAgICBpZiAocXVhdCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICBmb3IgKGxldCBpID0gMDsgaSAhPT0gc2lkZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgcXVhdC52bXVsdChzaWRlc1tpXSwgc2lkZXNbaV0pO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBzaWRlcztcbiAgfVxuICAvKipcbiAgICogUmV0dXJucyB0aGUgdm9sdW1lIG9mIHRoZSBib3guXG4gICAqL1xuXG5cbiAgdm9sdW1lKCkge1xuICAgIHJldHVybiA4LjAgKiB0aGlzLmhhbGZFeHRlbnRzLnggKiB0aGlzLmhhbGZFeHRlbnRzLnkgKiB0aGlzLmhhbGZFeHRlbnRzLno7XG4gIH1cbiAgLyoqXG4gICAqIHVwZGF0ZUJvdW5kaW5nU3BoZXJlUmFkaXVzXG4gICAqL1xuXG5cbiAgdXBkYXRlQm91bmRpbmdTcGhlcmVSYWRpdXMoKSB7XG4gICAgdGhpcy5ib3VuZGluZ1NwaGVyZVJhZGl1cyA9IHRoaXMuaGFsZkV4dGVudHMubGVuZ3RoKCk7XG4gIH1cbiAgLyoqXG4gICAqIGZvckVhY2hXb3JsZENvcm5lclxuICAgKi9cblxuXG4gIGZvckVhY2hXb3JsZENvcm5lcihwb3MsIHF1YXQsIGNhbGxiYWNrKSB7XG4gICAgY29uc3QgZSA9IHRoaXMuaGFsZkV4dGVudHM7XG4gICAgY29uc3QgY29ybmVycyA9IFtbZS54LCBlLnksIGUuel0sIFstZS54LCBlLnksIGUuel0sIFstZS54LCAtZS55LCBlLnpdLCBbLWUueCwgLWUueSwgLWUuel0sIFtlLngsIC1lLnksIC1lLnpdLCBbZS54LCBlLnksIC1lLnpdLCBbLWUueCwgZS55LCAtZS56XSwgW2UueCwgLWUueSwgZS56XV07XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNvcm5lcnMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHdvcmxkQ29ybmVyVGVtcFBvcy5zZXQoY29ybmVyc1tpXVswXSwgY29ybmVyc1tpXVsxXSwgY29ybmVyc1tpXVsyXSk7XG4gICAgICBxdWF0LnZtdWx0KHdvcmxkQ29ybmVyVGVtcFBvcywgd29ybGRDb3JuZXJUZW1wUG9zKTtcbiAgICAgIHBvcy52YWRkKHdvcmxkQ29ybmVyVGVtcFBvcywgd29ybGRDb3JuZXJUZW1wUG9zKTtcbiAgICAgIGNhbGxiYWNrKHdvcmxkQ29ybmVyVGVtcFBvcy54LCB3b3JsZENvcm5lclRlbXBQb3MueSwgd29ybGRDb3JuZXJUZW1wUG9zLnopO1xuICAgIH1cbiAgfVxuICAvKipcbiAgICogY2FsY3VsYXRlV29ybGRBQUJCXG4gICAqL1xuXG5cbiAgY2FsY3VsYXRlV29ybGRBQUJCKHBvcywgcXVhdCwgbWluLCBtYXgpIHtcbiAgICBjb25zdCBlID0gdGhpcy5oYWxmRXh0ZW50cztcbiAgICB3b3JsZENvcm5lcnNUZW1wWzBdLnNldChlLngsIGUueSwgZS56KTtcbiAgICB3b3JsZENvcm5lcnNUZW1wWzFdLnNldCgtZS54LCBlLnksIGUueik7XG4gICAgd29ybGRDb3JuZXJzVGVtcFsyXS5zZXQoLWUueCwgLWUueSwgZS56KTtcbiAgICB3b3JsZENvcm5lcnNUZW1wWzNdLnNldCgtZS54LCAtZS55LCAtZS56KTtcbiAgICB3b3JsZENvcm5lcnNUZW1wWzRdLnNldChlLngsIC1lLnksIC1lLnopO1xuICAgIHdvcmxkQ29ybmVyc1RlbXBbNV0uc2V0KGUueCwgZS55LCAtZS56KTtcbiAgICB3b3JsZENvcm5lcnNUZW1wWzZdLnNldCgtZS54LCBlLnksIC1lLnopO1xuICAgIHdvcmxkQ29ybmVyc1RlbXBbN10uc2V0KGUueCwgLWUueSwgZS56KTtcbiAgICBjb25zdCB3YyA9IHdvcmxkQ29ybmVyc1RlbXBbMF07XG4gICAgcXVhdC52bXVsdCh3Yywgd2MpO1xuICAgIHBvcy52YWRkKHdjLCB3Yyk7XG4gICAgbWF4LmNvcHkod2MpO1xuICAgIG1pbi5jb3B5KHdjKTtcblxuICAgIGZvciAobGV0IGkgPSAxOyBpIDwgODsgaSsrKSB7XG4gICAgICBjb25zdCB3YyA9IHdvcmxkQ29ybmVyc1RlbXBbaV07XG4gICAgICBxdWF0LnZtdWx0KHdjLCB3Yyk7XG4gICAgICBwb3MudmFkZCh3Yywgd2MpO1xuICAgICAgY29uc3QgeCA9IHdjLng7XG4gICAgICBjb25zdCB5ID0gd2MueTtcbiAgICAgIGNvbnN0IHogPSB3Yy56O1xuXG4gICAgICBpZiAoeCA+IG1heC54KSB7XG4gICAgICAgIG1heC54ID0geDtcbiAgICAgIH1cblxuICAgICAgaWYgKHkgPiBtYXgueSkge1xuICAgICAgICBtYXgueSA9IHk7XG4gICAgICB9XG5cbiAgICAgIGlmICh6ID4gbWF4LnopIHtcbiAgICAgICAgbWF4LnogPSB6O1xuICAgICAgfVxuXG4gICAgICBpZiAoeCA8IG1pbi54KSB7XG4gICAgICAgIG1pbi54ID0geDtcbiAgICAgIH1cblxuICAgICAgaWYgKHkgPCBtaW4ueSkge1xuICAgICAgICBtaW4ueSA9IHk7XG4gICAgICB9XG5cbiAgICAgIGlmICh6IDwgbWluLnopIHtcbiAgICAgICAgbWluLnogPSB6O1xuICAgICAgfVxuICAgIH0gLy8gR2V0IGVhY2ggYXhpcyBtYXhcbiAgICAvLyBtaW4uc2V0KEluZmluaXR5LEluZmluaXR5LEluZmluaXR5KTtcbiAgICAvLyBtYXguc2V0KC1JbmZpbml0eSwtSW5maW5pdHksLUluZmluaXR5KTtcbiAgICAvLyB0aGlzLmZvckVhY2hXb3JsZENvcm5lcihwb3MscXVhdCxmdW5jdGlvbih4LHkseil7XG4gICAgLy8gICAgIGlmKHggPiBtYXgueCl7XG4gICAgLy8gICAgICAgICBtYXgueCA9IHg7XG4gICAgLy8gICAgIH1cbiAgICAvLyAgICAgaWYoeSA+IG1heC55KXtcbiAgICAvLyAgICAgICAgIG1heC55ID0geTtcbiAgICAvLyAgICAgfVxuICAgIC8vICAgICBpZih6ID4gbWF4Lnope1xuICAgIC8vICAgICAgICAgbWF4LnogPSB6O1xuICAgIC8vICAgICB9XG4gICAgLy8gICAgIGlmKHggPCBtaW4ueCl7XG4gICAgLy8gICAgICAgICBtaW4ueCA9IHg7XG4gICAgLy8gICAgIH1cbiAgICAvLyAgICAgaWYoeSA8IG1pbi55KXtcbiAgICAvLyAgICAgICAgIG1pbi55ID0geTtcbiAgICAvLyAgICAgfVxuICAgIC8vICAgICBpZih6IDwgbWluLnope1xuICAgIC8vICAgICAgICAgbWluLnogPSB6O1xuICAgIC8vICAgICB9XG4gICAgLy8gfSk7XG5cbiAgfVxuXG59XG5jb25zdCB3b3JsZENvcm5lclRlbXBQb3MgPSBuZXcgVmVjMygpO1xuY29uc3Qgd29ybGRDb3JuZXJzVGVtcCA9IFtuZXcgVmVjMygpLCBuZXcgVmVjMygpLCBuZXcgVmVjMygpLCBuZXcgVmVjMygpLCBuZXcgVmVjMygpLCBuZXcgVmVjMygpLCBuZXcgVmVjMygpLCBuZXcgVmVjMygpXTtcblxuLyoqXG4gKiBCT0RZX1RZUEVTXG4gKi9cbmNvbnN0IEJPRFlfVFlQRVMgPSB7XG4gIC8qKiBEWU5BTUlDICovXG4gIERZTkFNSUM6IDEsXG5cbiAgLyoqIFNUQVRJQyAqL1xuICBTVEFUSUM6IDIsXG5cbiAgLyoqIEtJTkVNQVRJQyAqL1xuICBLSU5FTUFUSUM6IDRcbn07XG4vKipcbiAqIEJvZHlUeXBlXG4gKi9cblxuLyoqXG4gKiBCT0RZX1NMRUVQX1NUQVRFU1xuICovXG5jb25zdCBCT0RZX1NMRUVQX1NUQVRFUyA9IHtcbiAgLyoqIEFXQUtFICovXG4gIEFXQUtFOiAwLFxuXG4gIC8qKiBTTEVFUFkgKi9cbiAgU0xFRVBZOiAxLFxuXG4gIC8qKiBTTEVFUElORyAqL1xuICBTTEVFUElORzogMlxufTtcbi8qKlxuICogQm9keVNsZWVwU3RhdGVcbiAqL1xuXG4vKipcbiAqIEJhc2UgY2xhc3MgZm9yIGFsbCBib2R5IHR5cGVzLlxuICogQGV4YW1wbGVcbiAqICAgICBjb25zdCBzaGFwZSA9IG5ldyBDQU5OT04uU3BoZXJlKDEpXG4gKiAgICAgY29uc3QgYm9keSA9IG5ldyBDQU5OT04uQm9keSh7XG4gKiAgICAgICBtYXNzOiAxLFxuICogICAgICAgc2hhcGUsXG4gKiAgICAgfSlcbiAqICAgICB3b3JsZC5hZGRCb2R5KGJvZHkpXG4gKi9cbmNsYXNzIEJvZHkgZXh0ZW5kcyBFdmVudFRhcmdldCB7XG4gIC8qKlxuICAgKiBEaXNwYXRjaGVkIGFmdGVyIHR3byBib2RpZXMgY29sbGlkZS4gVGhpcyBldmVudCBpcyBkaXNwYXRjaGVkIG9uIGVhY2hcbiAgICogb2YgdGhlIHR3byBib2RpZXMgaW52b2x2ZWQgaW4gdGhlIGNvbGxpc2lvbi5cbiAgICogQGV2ZW50IGNvbGxpZGVcbiAgICogQHBhcmFtIGJvZHkgVGhlIGJvZHkgdGhhdCB3YXMgaW52b2x2ZWQgaW4gdGhlIGNvbGxpc2lvbi5cbiAgICogQHBhcmFtIGNvbnRhY3QgVGhlIGRldGFpbHMgb2YgdGhlIGNvbGxpc2lvbi5cbiAgICovXG5cbiAgLyoqXG4gICAqIEEgZHluYW1pYyBib2R5IGlzIGZ1bGx5IHNpbXVsYXRlZC4gQ2FuIGJlIG1vdmVkIG1hbnVhbGx5IGJ5IHRoZSB1c2VyLCBidXQgbm9ybWFsbHkgdGhleSBtb3ZlIGFjY29yZGluZyB0byBmb3JjZXMuIEEgZHluYW1pYyBib2R5IGNhbiBjb2xsaWRlIHdpdGggYWxsIGJvZHkgdHlwZXMuIEEgZHluYW1pYyBib2R5IGFsd2F5cyBoYXMgZmluaXRlLCBub24temVybyBtYXNzLlxuICAgKi9cblxuICAvKipcbiAgICogQSBzdGF0aWMgYm9keSBkb2VzIG5vdCBtb3ZlIGR1cmluZyBzaW11bGF0aW9uIGFuZCBiZWhhdmVzIGFzIGlmIGl0IGhhcyBpbmZpbml0ZSBtYXNzLiBTdGF0aWMgYm9kaWVzIGNhbiBiZSBtb3ZlZCBtYW51YWxseSBieSBzZXR0aW5nIHRoZSBwb3NpdGlvbiBvZiB0aGUgYm9keS4gVGhlIHZlbG9jaXR5IG9mIGEgc3RhdGljIGJvZHkgaXMgYWx3YXlzIHplcm8uIFN0YXRpYyBib2RpZXMgZG8gbm90IGNvbGxpZGUgd2l0aCBvdGhlciBzdGF0aWMgb3Iga2luZW1hdGljIGJvZGllcy5cbiAgICovXG5cbiAgLyoqXG4gICAqIEEga2luZW1hdGljIGJvZHkgbW92ZXMgdW5kZXIgc2ltdWxhdGlvbiBhY2NvcmRpbmcgdG8gaXRzIHZlbG9jaXR5LiBUaGV5IGRvIG5vdCByZXNwb25kIHRvIGZvcmNlcy4gVGhleSBjYW4gYmUgbW92ZWQgbWFudWFsbHksIGJ1dCBub3JtYWxseSBhIGtpbmVtYXRpYyBib2R5IGlzIG1vdmVkIGJ5IHNldHRpbmcgaXRzIHZlbG9jaXR5LiBBIGtpbmVtYXRpYyBib2R5IGJlaGF2ZXMgYXMgaWYgaXQgaGFzIGluZmluaXRlIG1hc3MuIEtpbmVtYXRpYyBib2RpZXMgZG8gbm90IGNvbGxpZGUgd2l0aCBvdGhlciBzdGF0aWMgb3Iga2luZW1hdGljIGJvZGllcy5cbiAgICovXG5cbiAgLyoqXG4gICAqIEFXQUtFXG4gICAqL1xuXG4gIC8qKlxuICAgKiBTTEVFUFlcbiAgICovXG5cbiAgLyoqXG4gICAqIFNMRUVQSU5HXG4gICAqL1xuXG4gIC8qKlxuICAgKiBEaXNwYXRjaGVkIGFmdGVyIGEgc2xlZXBpbmcgYm9keSBoYXMgd29rZW4gdXAuXG4gICAqIEBldmVudCB3YWtldXBcbiAgICovXG5cbiAgLyoqXG4gICAqIERpc3BhdGNoZWQgYWZ0ZXIgYSBib2R5IGhhcyBnb25lIGluIHRvIHRoZSBzbGVlcHkgc3RhdGUuXG4gICAqIEBldmVudCBzbGVlcHlcbiAgICovXG5cbiAgLyoqXG4gICAqIERpc3BhdGNoZWQgYWZ0ZXIgYSBib2R5IGhhcyBmYWxsZW4gYXNsZWVwLlxuICAgKiBAZXZlbnQgc2xlZXBcbiAgICovXG5cbiAgLyoqXG4gICAqIElkZW50aWZpZXIgb2YgdGhlIGJvZHkuXG4gICAqL1xuXG4gIC8qKlxuICAgKiBQb3NpdGlvbiBvZiBib2R5IGluIFdvcmxkLmJvZGllcy4gVXBkYXRlZCBieSBXb3JsZCBhbmQgdXNlZCBpbiBBcnJheUNvbGxpc2lvbk1hdHJpeC5cbiAgICovXG5cbiAgLyoqXG4gICAqIFJlZmVyZW5jZSB0byB0aGUgd29ybGQgdGhlIGJvZHkgaXMgbGl2aW5nIGluLlxuICAgKi9cblxuICAvKipcbiAgICogQ2FsbGJhY2sgZnVuY3Rpb24gdGhhdCBpcyB1c2VkIEJFRk9SRSBzdGVwcGluZyB0aGUgc3lzdGVtLiBVc2UgaXQgdG8gYXBwbHkgZm9yY2VzLCBmb3IgZXhhbXBsZS4gSW5zaWRlIHRoZSBmdW5jdGlvbiwgXCJ0aGlzXCIgd2lsbCByZWZlciB0byB0aGlzIEJvZHkgb2JqZWN0LiBEZXByZWNhdGVkIC0gdXNlIFdvcmxkIGV2ZW50cyBpbnN0ZWFkLlxuICAgKiBAZGVwcmVjYXRlZCBVc2UgV29ybGQgZXZlbnRzIGluc3RlYWRcbiAgICovXG5cbiAgLyoqXG4gICAqIENhbGxiYWNrIGZ1bmN0aW9uIHRoYXQgaXMgdXNlZCBBRlRFUiBzdGVwcGluZyB0aGUgc3lzdGVtLiBJbnNpZGUgdGhlIGZ1bmN0aW9uLCBcInRoaXNcIiB3aWxsIHJlZmVyIHRvIHRoaXMgQm9keSBvYmplY3QuIERlcHJlY2F0ZWQgLSB1c2UgV29ybGQgZXZlbnRzIGluc3RlYWQuXG4gICAqIEBkZXByZWNhdGVkIFVzZSBXb3JsZCBldmVudHMgaW5zdGVhZFxuICAgKi9cblxuICAvKipcbiAgICogVGhlIGNvbGxpc2lvbiBncm91cCB0aGUgYm9keSBiZWxvbmdzIHRvLlxuICAgKiBAZGVmYXVsdCAxXG4gICAqL1xuXG4gIC8qKlxuICAgKiBUaGUgY29sbGlzaW9uIGdyb3VwIHRoZSBib2R5IGNhbiBjb2xsaWRlIHdpdGguXG4gICAqIEBkZWZhdWx0IC0xXG4gICAqL1xuXG4gIC8qKlxuICAgKiBXaGV0aGVyIHRvIHByb2R1Y2UgY29udGFjdCBmb3JjZXMgd2hlbiBpbiBjb250YWN0IHdpdGggb3RoZXIgYm9kaWVzLiBOb3RlIHRoYXQgY29udGFjdHMgd2lsbCBiZSBnZW5lcmF0ZWQsIGJ1dCB0aGV5IHdpbGwgYmUgZGlzYWJsZWQgLSBpLmUuIFwiY29sbGlkZVwiIGV2ZW50cyB3aWxsIGJlIHJhaXNlZCwgYnV0IGZvcmNlcyB3aWxsIG5vdCBiZSBhbHRlcmVkLlxuICAgKi9cblxuICAvKipcbiAgICogV29ybGQgc3BhY2UgcG9zaXRpb24gb2YgdGhlIGJvZHkuXG4gICAqL1xuXG4gIC8qKlxuICAgKiBJbnRlcnBvbGF0ZWQgcG9zaXRpb24gb2YgdGhlIGJvZHkuXG4gICAqL1xuXG4gIC8qKlxuICAgKiBJbml0aWFsIHBvc2l0aW9uIG9mIHRoZSBib2R5LlxuICAgKi9cblxuICAvKipcbiAgICogV29ybGQgc3BhY2UgdmVsb2NpdHkgb2YgdGhlIGJvZHkuXG4gICAqL1xuXG4gIC8qKlxuICAgKiBJbml0aWFsIHZlbG9jaXR5IG9mIHRoZSBib2R5LlxuICAgKi9cblxuICAvKipcbiAgICogTGluZWFyIGZvcmNlIG9uIHRoZSBib2R5IGluIHdvcmxkIHNwYWNlLlxuICAgKi9cblxuICAvKipcbiAgICogVGhlIG1hc3Mgb2YgdGhlIGJvZHkuXG4gICAqIEBkZWZhdWx0IDBcbiAgICovXG5cbiAgLyoqXG4gICAqIFRoZSBwaHlzaWNzIG1hdGVyaWFsIG9mIHRoZSBib2R5LiBJdCBkZWZpbmVzIHRoZSBib2R5IGludGVyYWN0aW9uIHdpdGggb3RoZXIgYm9kaWVzLlxuICAgKi9cblxuICAvKipcbiAgICogSG93IG11Y2ggdG8gZGFtcCB0aGUgYm9keSB2ZWxvY2l0eSBlYWNoIHN0ZXAuIEl0IGNhbiBnbyBmcm9tIDAgdG8gMS5cbiAgICogQGRlZmF1bHQgMC4wMVxuICAgKi9cblxuICAvKipcbiAgICogT25lIG9mOiBgQm9keS5EWU5BTUlDYCwgYEJvZHkuU1RBVElDYCBhbmQgYEJvZHkuS0lORU1BVElDYC5cbiAgICovXG5cbiAgLyoqXG4gICAqIElmIHRydWUsIHRoZSBib2R5IHdpbGwgYXV0b21hdGljYWxseSBmYWxsIHRvIHNsZWVwLlxuICAgKiBAZGVmYXVsdCB0cnVlXG4gICAqL1xuXG4gIC8qKlxuICAgKiBDdXJyZW50IHNsZWVwIHN0YXRlLlxuICAgKi9cblxuICAvKipcbiAgICogSWYgdGhlIHNwZWVkICh0aGUgbm9ybSBvZiB0aGUgdmVsb2NpdHkpIGlzIHNtYWxsZXIgdGhhbiB0aGlzIHZhbHVlLCB0aGUgYm9keSBpcyBjb25zaWRlcmVkIHNsZWVweS5cbiAgICogQGRlZmF1bHQgMC4xXG4gICAqL1xuXG4gIC8qKlxuICAgKiBJZiB0aGUgYm9keSBoYXMgYmVlbiBzbGVlcHkgZm9yIHRoaXMgc2xlZXBUaW1lTGltaXQgc2Vjb25kcywgaXQgaXMgY29uc2lkZXJlZCBzbGVlcGluZy5cbiAgICogQGRlZmF1bHQgMVxuICAgKi9cblxuICAvKipcbiAgICogV29ybGQgc3BhY2Ugcm90YXRpb25hbCBmb3JjZSBvbiB0aGUgYm9keSwgYXJvdW5kIGNlbnRlciBvZiBtYXNzLlxuICAgKi9cblxuICAvKipcbiAgICogV29ybGQgc3BhY2Ugb3JpZW50YXRpb24gb2YgdGhlIGJvZHkuXG4gICAqL1xuXG4gIC8qKlxuICAgKiBJbml0aWFsIHF1YXRlcm5pb24gb2YgdGhlIGJvZHkuXG4gICAqL1xuXG4gIC8qKlxuICAgKiBJbnRlcnBvbGF0ZWQgb3JpZW50YXRpb24gb2YgdGhlIGJvZHkuXG4gICAqL1xuXG4gIC8qKlxuICAgKiBBbmd1bGFyIHZlbG9jaXR5IG9mIHRoZSBib2R5LCBpbiB3b3JsZCBzcGFjZS4gVGhpbmsgb2YgdGhlIGFuZ3VsYXIgdmVsb2NpdHkgYXMgYSB2ZWN0b3IsIHdoaWNoIHRoZSBib2R5IHJvdGF0ZXMgYXJvdW5kLiBUaGUgbGVuZ3RoIG9mIHRoaXMgdmVjdG9yIGRldGVybWluZXMgaG93IGZhc3QgKGluIHJhZGlhbnMgcGVyIHNlY29uZCkgdGhlIGJvZHkgcm90YXRlcy5cbiAgICovXG5cbiAgLyoqXG4gICAqIEluaXRpYWwgYW5ndWxhciB2ZWxvY2l0eSBvZiB0aGUgYm9keS5cbiAgICovXG5cbiAgLyoqXG4gICAqIExpc3Qgb2YgU2hhcGVzIHRoYXQgaGF2ZSBiZWVuIGFkZGVkIHRvIHRoZSBib2R5LlxuICAgKi9cblxuICAvKipcbiAgICogUG9zaXRpb24gb2YgZWFjaCBTaGFwZSBpbiB0aGUgYm9keSwgZ2l2ZW4gaW4gbG9jYWwgQm9keSBzcGFjZS5cbiAgICovXG5cbiAgLyoqXG4gICAqIE9yaWVudGF0aW9uIG9mIGVhY2ggU2hhcGUsIGdpdmVuIGluIGxvY2FsIEJvZHkgc3BhY2UuXG4gICAqL1xuXG4gIC8qKlxuICAgKiBUaGUgaW5lcnRpYSBvZiB0aGUgYm9keS5cbiAgICovXG5cbiAgLyoqXG4gICAqIFNldCB0byB0cnVlIGlmIHlvdSBkb24ndCB3YW50IHRoZSBib2R5IHRvIHJvdGF0ZS4gTWFrZSBzdXJlIHRvIHJ1biAudXBkYXRlTWFzc1Byb3BlcnRpZXMoKSBpZiB5b3UgY2hhbmdlIHRoaXMgYWZ0ZXIgdGhlIGJvZHkgY3JlYXRpb24uXG4gICAqIEBkZWZhdWx0IGZhbHNlXG4gICAqL1xuXG4gIC8qKlxuICAgKiBIb3cgbXVjaCB0byBkYW1wIHRoZSBib2R5IGFuZ3VsYXIgdmVsb2NpdHkgZWFjaCBzdGVwLiBJdCBjYW4gZ28gZnJvbSAwIHRvIDEuXG4gICAqIEBkZWZhdWx0IDAuMDFcbiAgICovXG5cbiAgLyoqXG4gICAqIFVzZSB0aGlzIHByb3BlcnR5IHRvIGxpbWl0IHRoZSBtb3Rpb24gYWxvbmcgYW55IHdvcmxkIGF4aXMuICgxLDEsMSkgd2lsbCBhbGxvdyBtb3Rpb24gYWxvbmcgYWxsIGF4ZXMgd2hpbGUgKDAsMCwwKSBhbGxvd3Mgbm9uZS5cbiAgICovXG5cbiAgLyoqXG4gICAqIFVzZSB0aGlzIHByb3BlcnR5IHRvIGxpbWl0IHRoZSByb3RhdGlvbmFsIG1vdGlvbiBhbG9uZyBhbnkgd29ybGQgYXhpcy4gKDEsMSwxKSB3aWxsIGFsbG93IHJvdGF0aW9uIGFsb25nIGFsbCBheGVzIHdoaWxlICgwLDAsMCkgYWxsb3dzIG5vbmUuXG4gICAqL1xuXG4gIC8qKlxuICAgKiBXb3JsZCBzcGFjZSBib3VuZGluZyBib3ggb2YgdGhlIGJvZHkgYW5kIGl0cyBzaGFwZXMuXG4gICAqL1xuXG4gIC8qKlxuICAgKiBJbmRpY2F0ZXMgaWYgdGhlIEFBQkIgbmVlZHMgdG8gYmUgdXBkYXRlZCBiZWZvcmUgdXNlLlxuICAgKi9cblxuICAvKipcbiAgICogVG90YWwgYm91bmRpbmcgcmFkaXVzIG9mIHRoZSBCb2R5IGluY2x1ZGluZyBpdHMgc2hhcGVzLCByZWxhdGl2ZSB0byBib2R5LnBvc2l0aW9uLlxuICAgKi9cblxuICAvKipcbiAgICogV2hlbiB0cnVlIHRoZSBib2R5IGJlaGF2ZXMgbGlrZSBhIHRyaWdnZXIuIEl0IGRvZXMgbm90IGNvbGxpZGVcbiAgICogd2l0aCBvdGhlciBib2RpZXMgYnV0IGNvbGxpc2lvbiBldmVudHMgYXJlIHN0aWxsIHRyaWdnZXJlZC5cbiAgICogQGRlZmF1bHQgZmFsc2VcbiAgICovXG4gIGNvbnN0cnVjdG9yKG9wdGlvbnMgPSB7fSkge1xuICAgIHN1cGVyKCk7XG4gICAgdGhpcy5pZCA9IHZvaWQgMDtcbiAgICB0aGlzLmluZGV4ID0gdm9pZCAwO1xuICAgIHRoaXMud29ybGQgPSB2b2lkIDA7XG4gICAgdGhpcy5wcmVTdGVwID0gdm9pZCAwO1xuICAgIHRoaXMucG9zdFN0ZXAgPSB2b2lkIDA7XG4gICAgdGhpcy52bGFtYmRhID0gdm9pZCAwO1xuICAgIHRoaXMuY29sbGlzaW9uRmlsdGVyR3JvdXAgPSB2b2lkIDA7XG4gICAgdGhpcy5jb2xsaXNpb25GaWx0ZXJNYXNrID0gdm9pZCAwO1xuICAgIHRoaXMuY29sbGlzaW9uUmVzcG9uc2UgPSB2b2lkIDA7XG4gICAgdGhpcy5wb3NpdGlvbiA9IHZvaWQgMDtcbiAgICB0aGlzLnByZXZpb3VzUG9zaXRpb24gPSB2b2lkIDA7XG4gICAgdGhpcy5pbnRlcnBvbGF0ZWRQb3NpdGlvbiA9IHZvaWQgMDtcbiAgICB0aGlzLmluaXRQb3NpdGlvbiA9IHZvaWQgMDtcbiAgICB0aGlzLnZlbG9jaXR5ID0gdm9pZCAwO1xuICAgIHRoaXMuaW5pdFZlbG9jaXR5ID0gdm9pZCAwO1xuICAgIHRoaXMuZm9yY2UgPSB2b2lkIDA7XG4gICAgdGhpcy5tYXNzID0gdm9pZCAwO1xuICAgIHRoaXMuaW52TWFzcyA9IHZvaWQgMDtcbiAgICB0aGlzLm1hdGVyaWFsID0gdm9pZCAwO1xuICAgIHRoaXMubGluZWFyRGFtcGluZyA9IHZvaWQgMDtcbiAgICB0aGlzLnR5cGUgPSB2b2lkIDA7XG4gICAgdGhpcy5hbGxvd1NsZWVwID0gdm9pZCAwO1xuICAgIHRoaXMuc2xlZXBTdGF0ZSA9IHZvaWQgMDtcbiAgICB0aGlzLnNsZWVwU3BlZWRMaW1pdCA9IHZvaWQgMDtcbiAgICB0aGlzLnNsZWVwVGltZUxpbWl0ID0gdm9pZCAwO1xuICAgIHRoaXMudGltZUxhc3RTbGVlcHkgPSB2b2lkIDA7XG4gICAgdGhpcy53YWtlVXBBZnRlck5hcnJvd3BoYXNlID0gdm9pZCAwO1xuICAgIHRoaXMudG9ycXVlID0gdm9pZCAwO1xuICAgIHRoaXMucXVhdGVybmlvbiA9IHZvaWQgMDtcbiAgICB0aGlzLmluaXRRdWF0ZXJuaW9uID0gdm9pZCAwO1xuICAgIHRoaXMucHJldmlvdXNRdWF0ZXJuaW9uID0gdm9pZCAwO1xuICAgIHRoaXMuaW50ZXJwb2xhdGVkUXVhdGVybmlvbiA9IHZvaWQgMDtcbiAgICB0aGlzLmFuZ3VsYXJWZWxvY2l0eSA9IHZvaWQgMDtcbiAgICB0aGlzLmluaXRBbmd1bGFyVmVsb2NpdHkgPSB2b2lkIDA7XG4gICAgdGhpcy5zaGFwZXMgPSB2b2lkIDA7XG4gICAgdGhpcy5zaGFwZU9mZnNldHMgPSB2b2lkIDA7XG4gICAgdGhpcy5zaGFwZU9yaWVudGF0aW9ucyA9IHZvaWQgMDtcbiAgICB0aGlzLmluZXJ0aWEgPSB2b2lkIDA7XG4gICAgdGhpcy5pbnZJbmVydGlhID0gdm9pZCAwO1xuICAgIHRoaXMuaW52SW5lcnRpYVdvcmxkID0gdm9pZCAwO1xuICAgIHRoaXMuaW52TWFzc1NvbHZlID0gdm9pZCAwO1xuICAgIHRoaXMuaW52SW5lcnRpYVNvbHZlID0gdm9pZCAwO1xuICAgIHRoaXMuaW52SW5lcnRpYVdvcmxkU29sdmUgPSB2b2lkIDA7XG4gICAgdGhpcy5maXhlZFJvdGF0aW9uID0gdm9pZCAwO1xuICAgIHRoaXMuYW5ndWxhckRhbXBpbmcgPSB2b2lkIDA7XG4gICAgdGhpcy5saW5lYXJGYWN0b3IgPSB2b2lkIDA7XG4gICAgdGhpcy5hbmd1bGFyRmFjdG9yID0gdm9pZCAwO1xuICAgIHRoaXMuYWFiYiA9IHZvaWQgMDtcbiAgICB0aGlzLmFhYmJOZWVkc1VwZGF0ZSA9IHZvaWQgMDtcbiAgICB0aGlzLmJvdW5kaW5nUmFkaXVzID0gdm9pZCAwO1xuICAgIHRoaXMud2xhbWJkYSA9IHZvaWQgMDtcbiAgICB0aGlzLmlzVHJpZ2dlciA9IHZvaWQgMDtcbiAgICB0aGlzLmlkID0gQm9keS5pZENvdW50ZXIrKztcbiAgICB0aGlzLmluZGV4ID0gLTE7XG4gICAgdGhpcy53b3JsZCA9IG51bGw7XG4gICAgdGhpcy5wcmVTdGVwID0gbnVsbDtcbiAgICB0aGlzLnBvc3RTdGVwID0gbnVsbDtcbiAgICB0aGlzLnZsYW1iZGEgPSBuZXcgVmVjMygpO1xuICAgIHRoaXMuY29sbGlzaW9uRmlsdGVyR3JvdXAgPSB0eXBlb2Ygb3B0aW9ucy5jb2xsaXNpb25GaWx0ZXJHcm91cCA9PT0gJ251bWJlcicgPyBvcHRpb25zLmNvbGxpc2lvbkZpbHRlckdyb3VwIDogMTtcbiAgICB0aGlzLmNvbGxpc2lvbkZpbHRlck1hc2sgPSB0eXBlb2Ygb3B0aW9ucy5jb2xsaXNpb25GaWx0ZXJNYXNrID09PSAnbnVtYmVyJyA/IG9wdGlvbnMuY29sbGlzaW9uRmlsdGVyTWFzayA6IC0xO1xuICAgIHRoaXMuY29sbGlzaW9uUmVzcG9uc2UgPSB0eXBlb2Ygb3B0aW9ucy5jb2xsaXNpb25SZXNwb25zZSA9PT0gJ2Jvb2xlYW4nID8gb3B0aW9ucy5jb2xsaXNpb25SZXNwb25zZSA6IHRydWU7XG4gICAgdGhpcy5wb3NpdGlvbiA9IG5ldyBWZWMzKCk7XG4gICAgdGhpcy5wcmV2aW91c1Bvc2l0aW9uID0gbmV3IFZlYzMoKTtcbiAgICB0aGlzLmludGVycG9sYXRlZFBvc2l0aW9uID0gbmV3IFZlYzMoKTtcbiAgICB0aGlzLmluaXRQb3NpdGlvbiA9IG5ldyBWZWMzKCk7XG5cbiAgICBpZiAob3B0aW9ucy5wb3NpdGlvbikge1xuICAgICAgdGhpcy5wb3NpdGlvbi5jb3B5KG9wdGlvbnMucG9zaXRpb24pO1xuICAgICAgdGhpcy5wcmV2aW91c1Bvc2l0aW9uLmNvcHkob3B0aW9ucy5wb3NpdGlvbik7XG4gICAgICB0aGlzLmludGVycG9sYXRlZFBvc2l0aW9uLmNvcHkob3B0aW9ucy5wb3NpdGlvbik7XG4gICAgICB0aGlzLmluaXRQb3NpdGlvbi5jb3B5KG9wdGlvbnMucG9zaXRpb24pO1xuICAgIH1cblxuICAgIHRoaXMudmVsb2NpdHkgPSBuZXcgVmVjMygpO1xuXG4gICAgaWYgKG9wdGlvbnMudmVsb2NpdHkpIHtcbiAgICAgIHRoaXMudmVsb2NpdHkuY29weShvcHRpb25zLnZlbG9jaXR5KTtcbiAgICB9XG5cbiAgICB0aGlzLmluaXRWZWxvY2l0eSA9IG5ldyBWZWMzKCk7XG4gICAgdGhpcy5mb3JjZSA9IG5ldyBWZWMzKCk7XG4gICAgY29uc3QgbWFzcyA9IHR5cGVvZiBvcHRpb25zLm1hc3MgPT09ICdudW1iZXInID8gb3B0aW9ucy5tYXNzIDogMDtcbiAgICB0aGlzLm1hc3MgPSBtYXNzO1xuICAgIHRoaXMuaW52TWFzcyA9IG1hc3MgPiAwID8gMS4wIC8gbWFzcyA6IDA7XG4gICAgdGhpcy5tYXRlcmlhbCA9IG9wdGlvbnMubWF0ZXJpYWwgfHwgbnVsbDtcbiAgICB0aGlzLmxpbmVhckRhbXBpbmcgPSB0eXBlb2Ygb3B0aW9ucy5saW5lYXJEYW1waW5nID09PSAnbnVtYmVyJyA/IG9wdGlvbnMubGluZWFyRGFtcGluZyA6IDAuMDE7XG4gICAgdGhpcy50eXBlID0gbWFzcyA8PSAwLjAgPyBCb2R5LlNUQVRJQyA6IEJvZHkuRFlOQU1JQztcblxuICAgIGlmICh0eXBlb2Ygb3B0aW9ucy50eXBlID09PSB0eXBlb2YgQm9keS5TVEFUSUMpIHtcbiAgICAgIHRoaXMudHlwZSA9IG9wdGlvbnMudHlwZTtcbiAgICB9XG5cbiAgICB0aGlzLmFsbG93U2xlZXAgPSB0eXBlb2Ygb3B0aW9ucy5hbGxvd1NsZWVwICE9PSAndW5kZWZpbmVkJyA/IG9wdGlvbnMuYWxsb3dTbGVlcCA6IHRydWU7XG4gICAgdGhpcy5zbGVlcFN0YXRlID0gQm9keS5BV0FLRTtcbiAgICB0aGlzLnNsZWVwU3BlZWRMaW1pdCA9IHR5cGVvZiBvcHRpb25zLnNsZWVwU3BlZWRMaW1pdCAhPT0gJ3VuZGVmaW5lZCcgPyBvcHRpb25zLnNsZWVwU3BlZWRMaW1pdCA6IDAuMTtcbiAgICB0aGlzLnNsZWVwVGltZUxpbWl0ID0gdHlwZW9mIG9wdGlvbnMuc2xlZXBUaW1lTGltaXQgIT09ICd1bmRlZmluZWQnID8gb3B0aW9ucy5zbGVlcFRpbWVMaW1pdCA6IDE7XG4gICAgdGhpcy50aW1lTGFzdFNsZWVweSA9IDA7XG4gICAgdGhpcy53YWtlVXBBZnRlck5hcnJvd3BoYXNlID0gZmFsc2U7XG4gICAgdGhpcy50b3JxdWUgPSBuZXcgVmVjMygpO1xuICAgIHRoaXMucXVhdGVybmlvbiA9IG5ldyBRdWF0ZXJuaW9uKCk7XG4gICAgdGhpcy5pbml0UXVhdGVybmlvbiA9IG5ldyBRdWF0ZXJuaW9uKCk7XG4gICAgdGhpcy5wcmV2aW91c1F1YXRlcm5pb24gPSBuZXcgUXVhdGVybmlvbigpO1xuICAgIHRoaXMuaW50ZXJwb2xhdGVkUXVhdGVybmlvbiA9IG5ldyBRdWF0ZXJuaW9uKCk7XG5cbiAgICBpZiAob3B0aW9ucy5xdWF0ZXJuaW9uKSB7XG4gICAgICB0aGlzLnF1YXRlcm5pb24uY29weShvcHRpb25zLnF1YXRlcm5pb24pO1xuICAgICAgdGhpcy5pbml0UXVhdGVybmlvbi5jb3B5KG9wdGlvbnMucXVhdGVybmlvbik7XG4gICAgICB0aGlzLnByZXZpb3VzUXVhdGVybmlvbi5jb3B5KG9wdGlvbnMucXVhdGVybmlvbik7XG4gICAgICB0aGlzLmludGVycG9sYXRlZFF1YXRlcm5pb24uY29weShvcHRpb25zLnF1YXRlcm5pb24pO1xuICAgIH1cblxuICAgIHRoaXMuYW5ndWxhclZlbG9jaXR5ID0gbmV3IFZlYzMoKTtcblxuICAgIGlmIChvcHRpb25zLmFuZ3VsYXJWZWxvY2l0eSkge1xuICAgICAgdGhpcy5hbmd1bGFyVmVsb2NpdHkuY29weShvcHRpb25zLmFuZ3VsYXJWZWxvY2l0eSk7XG4gICAgfVxuXG4gICAgdGhpcy5pbml0QW5ndWxhclZlbG9jaXR5ID0gbmV3IFZlYzMoKTtcbiAgICB0aGlzLnNoYXBlcyA9IFtdO1xuICAgIHRoaXMuc2hhcGVPZmZzZXRzID0gW107XG4gICAgdGhpcy5zaGFwZU9yaWVudGF0aW9ucyA9IFtdO1xuICAgIHRoaXMuaW5lcnRpYSA9IG5ldyBWZWMzKCk7XG4gICAgdGhpcy5pbnZJbmVydGlhID0gbmV3IFZlYzMoKTtcbiAgICB0aGlzLmludkluZXJ0aWFXb3JsZCA9IG5ldyBNYXQzKCk7XG4gICAgdGhpcy5pbnZNYXNzU29sdmUgPSAwO1xuICAgIHRoaXMuaW52SW5lcnRpYVNvbHZlID0gbmV3IFZlYzMoKTtcbiAgICB0aGlzLmludkluZXJ0aWFXb3JsZFNvbHZlID0gbmV3IE1hdDMoKTtcbiAgICB0aGlzLmZpeGVkUm90YXRpb24gPSB0eXBlb2Ygb3B0aW9ucy5maXhlZFJvdGF0aW9uICE9PSAndW5kZWZpbmVkJyA/IG9wdGlvbnMuZml4ZWRSb3RhdGlvbiA6IGZhbHNlO1xuICAgIHRoaXMuYW5ndWxhckRhbXBpbmcgPSB0eXBlb2Ygb3B0aW9ucy5hbmd1bGFyRGFtcGluZyAhPT0gJ3VuZGVmaW5lZCcgPyBvcHRpb25zLmFuZ3VsYXJEYW1waW5nIDogMC4wMTtcbiAgICB0aGlzLmxpbmVhckZhY3RvciA9IG5ldyBWZWMzKDEsIDEsIDEpO1xuXG4gICAgaWYgKG9wdGlvbnMubGluZWFyRmFjdG9yKSB7XG4gICAgICB0aGlzLmxpbmVhckZhY3Rvci5jb3B5KG9wdGlvbnMubGluZWFyRmFjdG9yKTtcbiAgICB9XG5cbiAgICB0aGlzLmFuZ3VsYXJGYWN0b3IgPSBuZXcgVmVjMygxLCAxLCAxKTtcblxuICAgIGlmIChvcHRpb25zLmFuZ3VsYXJGYWN0b3IpIHtcbiAgICAgIHRoaXMuYW5ndWxhckZhY3Rvci5jb3B5KG9wdGlvbnMuYW5ndWxhckZhY3Rvcik7XG4gICAgfVxuXG4gICAgdGhpcy5hYWJiID0gbmV3IEFBQkIoKTtcbiAgICB0aGlzLmFhYmJOZWVkc1VwZGF0ZSA9IHRydWU7XG4gICAgdGhpcy5ib3VuZGluZ1JhZGl1cyA9IDA7XG4gICAgdGhpcy53bGFtYmRhID0gbmV3IFZlYzMoKTtcbiAgICB0aGlzLmlzVHJpZ2dlciA9IEJvb2xlYW4ob3B0aW9ucy5pc1RyaWdnZXIpO1xuXG4gICAgaWYgKG9wdGlvbnMuc2hhcGUpIHtcbiAgICAgIHRoaXMuYWRkU2hhcGUob3B0aW9ucy5zaGFwZSk7XG4gICAgfVxuXG4gICAgdGhpcy51cGRhdGVNYXNzUHJvcGVydGllcygpO1xuICB9XG4gIC8qKlxuICAgKiBXYWtlIHRoZSBib2R5IHVwLlxuICAgKi9cblxuXG4gIHdha2VVcCgpIHtcbiAgICBjb25zdCBwcmV2U3RhdGUgPSB0aGlzLnNsZWVwU3RhdGU7XG4gICAgdGhpcy5zbGVlcFN0YXRlID0gQm9keS5BV0FLRTtcbiAgICB0aGlzLndha2VVcEFmdGVyTmFycm93cGhhc2UgPSBmYWxzZTtcblxuICAgIGlmIChwcmV2U3RhdGUgPT09IEJvZHkuU0xFRVBJTkcpIHtcbiAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChCb2R5Lndha2V1cEV2ZW50KTtcbiAgICB9XG4gIH1cbiAgLyoqXG4gICAqIEZvcmNlIGJvZHkgc2xlZXBcbiAgICovXG5cblxuICBzbGVlcCgpIHtcbiAgICB0aGlzLnNsZWVwU3RhdGUgPSBCb2R5LlNMRUVQSU5HO1xuICAgIHRoaXMudmVsb2NpdHkuc2V0KDAsIDAsIDApO1xuICAgIHRoaXMuYW5ndWxhclZlbG9jaXR5LnNldCgwLCAwLCAwKTtcbiAgICB0aGlzLndha2VVcEFmdGVyTmFycm93cGhhc2UgPSBmYWxzZTtcbiAgfVxuICAvKipcbiAgICogQ2FsbGVkIGV2ZXJ5IHRpbWVzdGVwIHRvIHVwZGF0ZSBpbnRlcm5hbCBzbGVlcCB0aW1lciBhbmQgY2hhbmdlIHNsZWVwIHN0YXRlIGlmIG5lZWRlZC5cbiAgICogQHBhcmFtIHRpbWUgVGhlIHdvcmxkIHRpbWUgaW4gc2Vjb25kc1xuICAgKi9cblxuXG4gIHNsZWVwVGljayh0aW1lKSB7XG4gICAgaWYgKHRoaXMuYWxsb3dTbGVlcCkge1xuICAgICAgY29uc3Qgc2xlZXBTdGF0ZSA9IHRoaXMuc2xlZXBTdGF0ZTtcbiAgICAgIGNvbnN0IHNwZWVkU3F1YXJlZCA9IHRoaXMudmVsb2NpdHkubGVuZ3RoU3F1YXJlZCgpICsgdGhpcy5hbmd1bGFyVmVsb2NpdHkubGVuZ3RoU3F1YXJlZCgpO1xuICAgICAgY29uc3Qgc3BlZWRMaW1pdFNxdWFyZWQgPSB0aGlzLnNsZWVwU3BlZWRMaW1pdCAqKiAyO1xuXG4gICAgICBpZiAoc2xlZXBTdGF0ZSA9PT0gQm9keS5BV0FLRSAmJiBzcGVlZFNxdWFyZWQgPCBzcGVlZExpbWl0U3F1YXJlZCkge1xuICAgICAgICB0aGlzLnNsZWVwU3RhdGUgPSBCb2R5LlNMRUVQWTsgLy8gU2xlZXB5XG5cbiAgICAgICAgdGhpcy50aW1lTGFzdFNsZWVweSA9IHRpbWU7XG4gICAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChCb2R5LnNsZWVweUV2ZW50KTtcbiAgICAgIH0gZWxzZSBpZiAoc2xlZXBTdGF0ZSA9PT0gQm9keS5TTEVFUFkgJiYgc3BlZWRTcXVhcmVkID4gc3BlZWRMaW1pdFNxdWFyZWQpIHtcbiAgICAgICAgdGhpcy53YWtlVXAoKTsgLy8gV2FrZSB1cFxuICAgICAgfSBlbHNlIGlmIChzbGVlcFN0YXRlID09PSBCb2R5LlNMRUVQWSAmJiB0aW1lIC0gdGhpcy50aW1lTGFzdFNsZWVweSA+IHRoaXMuc2xlZXBUaW1lTGltaXQpIHtcbiAgICAgICAgdGhpcy5zbGVlcCgpOyAvLyBTbGVlcGluZ1xuXG4gICAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChCb2R5LnNsZWVwRXZlbnQpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICAvKipcbiAgICogSWYgdGhlIGJvZHkgaXMgc2xlZXBpbmcsIGl0IHNob3VsZCBiZSBpbW1vdmFibGUgLyBoYXZlIGluZmluaXRlIG1hc3MgZHVyaW5nIHNvbHZlLiBXZSBzb2x2ZSBpdCBieSBoYXZpbmcgYSBzZXBhcmF0ZSBcInNvbHZlIG1hc3NcIi5cbiAgICovXG5cblxuICB1cGRhdGVTb2x2ZU1hc3NQcm9wZXJ0aWVzKCkge1xuICAgIGlmICh0aGlzLnNsZWVwU3RhdGUgPT09IEJvZHkuU0xFRVBJTkcgfHwgdGhpcy50eXBlID09PSBCb2R5LktJTkVNQVRJQykge1xuICAgICAgdGhpcy5pbnZNYXNzU29sdmUgPSAwO1xuICAgICAgdGhpcy5pbnZJbmVydGlhU29sdmUuc2V0WmVybygpO1xuICAgICAgdGhpcy5pbnZJbmVydGlhV29ybGRTb2x2ZS5zZXRaZXJvKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuaW52TWFzc1NvbHZlID0gdGhpcy5pbnZNYXNzO1xuICAgICAgdGhpcy5pbnZJbmVydGlhU29sdmUuY29weSh0aGlzLmludkluZXJ0aWEpO1xuICAgICAgdGhpcy5pbnZJbmVydGlhV29ybGRTb2x2ZS5jb3B5KHRoaXMuaW52SW5lcnRpYVdvcmxkKTtcbiAgICB9XG4gIH1cbiAgLyoqXG4gICAqIENvbnZlcnQgYSB3b3JsZCBwb2ludCB0byBsb2NhbCBib2R5IGZyYW1lLlxuICAgKi9cblxuXG4gIHBvaW50VG9Mb2NhbEZyYW1lKHdvcmxkUG9pbnQsIHJlc3VsdCA9IG5ldyBWZWMzKCkpIHtcbiAgICB3b3JsZFBvaW50LnZzdWIodGhpcy5wb3NpdGlvbiwgcmVzdWx0KTtcbiAgICB0aGlzLnF1YXRlcm5pb24uY29uanVnYXRlKCkudm11bHQocmVzdWx0LCByZXN1bHQpO1xuICAgIHJldHVybiByZXN1bHQ7XG4gIH1cbiAgLyoqXG4gICAqIENvbnZlcnQgYSB3b3JsZCB2ZWN0b3IgdG8gbG9jYWwgYm9keSBmcmFtZS5cbiAgICovXG5cblxuICB2ZWN0b3JUb0xvY2FsRnJhbWUod29ybGRWZWN0b3IsIHJlc3VsdCA9IG5ldyBWZWMzKCkpIHtcbiAgICB0aGlzLnF1YXRlcm5pb24uY29uanVnYXRlKCkudm11bHQod29ybGRWZWN0b3IsIHJlc3VsdCk7XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxuICAvKipcbiAgICogQ29udmVydCBhIGxvY2FsIGJvZHkgcG9pbnQgdG8gd29ybGQgZnJhbWUuXG4gICAqL1xuXG5cbiAgcG9pbnRUb1dvcmxkRnJhbWUobG9jYWxQb2ludCwgcmVzdWx0ID0gbmV3IFZlYzMoKSkge1xuICAgIHRoaXMucXVhdGVybmlvbi52bXVsdChsb2NhbFBvaW50LCByZXN1bHQpO1xuICAgIHJlc3VsdC52YWRkKHRoaXMucG9zaXRpb24sIHJlc3VsdCk7XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxuICAvKipcbiAgICogQ29udmVydCBhIGxvY2FsIGJvZHkgcG9pbnQgdG8gd29ybGQgZnJhbWUuXG4gICAqL1xuXG5cbiAgdmVjdG9yVG9Xb3JsZEZyYW1lKGxvY2FsVmVjdG9yLCByZXN1bHQgPSBuZXcgVmVjMygpKSB7XG4gICAgdGhpcy5xdWF0ZXJuaW9uLnZtdWx0KGxvY2FsVmVjdG9yLCByZXN1bHQpO1xuICAgIHJldHVybiByZXN1bHQ7XG4gIH1cbiAgLyoqXG4gICAqIEFkZCBhIHNoYXBlIHRvIHRoZSBib2R5IHdpdGggYSBsb2NhbCBvZmZzZXQgYW5kIG9yaWVudGF0aW9uLlxuICAgKiBAcmV0dXJuIFRoZSBib2R5IG9iamVjdCwgZm9yIGNoYWluYWJpbGl0eS5cbiAgICovXG5cblxuICBhZGRTaGFwZShzaGFwZSwgX29mZnNldCwgX29yaWVudGF0aW9uKSB7XG4gICAgY29uc3Qgb2Zmc2V0ID0gbmV3IFZlYzMoKTtcbiAgICBjb25zdCBvcmllbnRhdGlvbiA9IG5ldyBRdWF0ZXJuaW9uKCk7XG5cbiAgICBpZiAoX29mZnNldCkge1xuICAgICAgb2Zmc2V0LmNvcHkoX29mZnNldCk7XG4gICAgfVxuXG4gICAgaWYgKF9vcmllbnRhdGlvbikge1xuICAgICAgb3JpZW50YXRpb24uY29weShfb3JpZW50YXRpb24pO1xuICAgIH1cblxuICAgIHRoaXMuc2hhcGVzLnB1c2goc2hhcGUpO1xuICAgIHRoaXMuc2hhcGVPZmZzZXRzLnB1c2gob2Zmc2V0KTtcbiAgICB0aGlzLnNoYXBlT3JpZW50YXRpb25zLnB1c2gob3JpZW50YXRpb24pO1xuICAgIHRoaXMudXBkYXRlTWFzc1Byb3BlcnRpZXMoKTtcbiAgICB0aGlzLnVwZGF0ZUJvdW5kaW5nUmFkaXVzKCk7XG4gICAgdGhpcy5hYWJiTmVlZHNVcGRhdGUgPSB0cnVlO1xuICAgIHNoYXBlLmJvZHkgPSB0aGlzO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG4gIC8qKlxuICAgKiBSZW1vdmUgYSBzaGFwZSBmcm9tIHRoZSBib2R5LlxuICAgKiBAcmV0dXJuIFRoZSBib2R5IG9iamVjdCwgZm9yIGNoYWluYWJpbGl0eS5cbiAgICovXG5cblxuICByZW1vdmVTaGFwZShzaGFwZSkge1xuICAgIGNvbnN0IGluZGV4ID0gdGhpcy5zaGFwZXMuaW5kZXhPZihzaGFwZSk7XG5cbiAgICBpZiAoaW5kZXggPT09IC0xKSB7XG4gICAgICBjb25zb2xlLndhcm4oJ1NoYXBlIGRvZXMgbm90IGJlbG9uZyB0byB0aGUgYm9keScpO1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuXG4gICAgdGhpcy5zaGFwZXMuc3BsaWNlKGluZGV4LCAxKTtcbiAgICB0aGlzLnNoYXBlT2Zmc2V0cy5zcGxpY2UoaW5kZXgsIDEpO1xuICAgIHRoaXMuc2hhcGVPcmllbnRhdGlvbnMuc3BsaWNlKGluZGV4LCAxKTtcbiAgICB0aGlzLnVwZGF0ZU1hc3NQcm9wZXJ0aWVzKCk7XG4gICAgdGhpcy51cGRhdGVCb3VuZGluZ1JhZGl1cygpO1xuICAgIHRoaXMuYWFiYk5lZWRzVXBkYXRlID0gdHJ1ZTtcbiAgICBzaGFwZS5ib2R5ID0gbnVsbDtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuICAvKipcbiAgICogVXBkYXRlIHRoZSBib3VuZGluZyByYWRpdXMgb2YgdGhlIGJvZHkuIFNob3VsZCBiZSBkb25lIGlmIGFueSBvZiB0aGUgc2hhcGVzIGFyZSBjaGFuZ2VkLlxuICAgKi9cblxuXG4gIHVwZGF0ZUJvdW5kaW5nUmFkaXVzKCkge1xuICAgIGNvbnN0IHNoYXBlcyA9IHRoaXMuc2hhcGVzO1xuICAgIGNvbnN0IHNoYXBlT2Zmc2V0cyA9IHRoaXMuc2hhcGVPZmZzZXRzO1xuICAgIGNvbnN0IE4gPSBzaGFwZXMubGVuZ3RoO1xuICAgIGxldCByYWRpdXMgPSAwO1xuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgIT09IE47IGkrKykge1xuICAgICAgY29uc3Qgc2hhcGUgPSBzaGFwZXNbaV07XG4gICAgICBzaGFwZS51cGRhdGVCb3VuZGluZ1NwaGVyZVJhZGl1cygpO1xuICAgICAgY29uc3Qgb2Zmc2V0ID0gc2hhcGVPZmZzZXRzW2ldLmxlbmd0aCgpO1xuICAgICAgY29uc3QgciA9IHNoYXBlLmJvdW5kaW5nU3BoZXJlUmFkaXVzO1xuXG4gICAgICBpZiAob2Zmc2V0ICsgciA+IHJhZGl1cykge1xuICAgICAgICByYWRpdXMgPSBvZmZzZXQgKyByO1xuICAgICAgfVxuICAgIH1cblxuICAgIHRoaXMuYm91bmRpbmdSYWRpdXMgPSByYWRpdXM7XG4gIH1cbiAgLyoqXG4gICAqIFVwZGF0ZXMgdGhlIC5hYWJiXG4gICAqL1xuXG5cbiAgdXBkYXRlQUFCQigpIHtcbiAgICBjb25zdCBzaGFwZXMgPSB0aGlzLnNoYXBlcztcbiAgICBjb25zdCBzaGFwZU9mZnNldHMgPSB0aGlzLnNoYXBlT2Zmc2V0cztcbiAgICBjb25zdCBzaGFwZU9yaWVudGF0aW9ucyA9IHRoaXMuc2hhcGVPcmllbnRhdGlvbnM7XG4gICAgY29uc3QgTiA9IHNoYXBlcy5sZW5ndGg7XG4gICAgY29uc3Qgb2Zmc2V0ID0gdG1wVmVjO1xuICAgIGNvbnN0IG9yaWVudGF0aW9uID0gdG1wUXVhdDtcbiAgICBjb25zdCBib2R5UXVhdCA9IHRoaXMucXVhdGVybmlvbjtcbiAgICBjb25zdCBhYWJiID0gdGhpcy5hYWJiO1xuICAgIGNvbnN0IHNoYXBlQUFCQiA9IHVwZGF0ZUFBQkJfc2hhcGVBQUJCO1xuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgIT09IE47IGkrKykge1xuICAgICAgY29uc3Qgc2hhcGUgPSBzaGFwZXNbaV07IC8vIEdldCBzaGFwZSB3b3JsZCBwb3NpdGlvblxuXG4gICAgICBib2R5UXVhdC52bXVsdChzaGFwZU9mZnNldHNbaV0sIG9mZnNldCk7XG4gICAgICBvZmZzZXQudmFkZCh0aGlzLnBvc2l0aW9uLCBvZmZzZXQpOyAvLyBHZXQgc2hhcGUgd29ybGQgcXVhdGVybmlvblxuXG4gICAgICBib2R5UXVhdC5tdWx0KHNoYXBlT3JpZW50YXRpb25zW2ldLCBvcmllbnRhdGlvbik7IC8vIEdldCBzaGFwZSBBQUJCXG5cbiAgICAgIHNoYXBlLmNhbGN1bGF0ZVdvcmxkQUFCQihvZmZzZXQsIG9yaWVudGF0aW9uLCBzaGFwZUFBQkIubG93ZXJCb3VuZCwgc2hhcGVBQUJCLnVwcGVyQm91bmQpO1xuXG4gICAgICBpZiAoaSA9PT0gMCkge1xuICAgICAgICBhYWJiLmNvcHkoc2hhcGVBQUJCKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGFhYmIuZXh0ZW5kKHNoYXBlQUFCQik7XG4gICAgICB9XG4gICAgfVxuXG4gICAgdGhpcy5hYWJiTmVlZHNVcGRhdGUgPSBmYWxzZTtcbiAgfVxuICAvKipcbiAgICogVXBkYXRlIGAuaW5lcnRpYVdvcmxkYCBhbmQgYC5pbnZJbmVydGlhV29ybGRgXG4gICAqL1xuXG5cbiAgdXBkYXRlSW5lcnRpYVdvcmxkKGZvcmNlKSB7XG4gICAgY29uc3QgSSA9IHRoaXMuaW52SW5lcnRpYTtcblxuICAgIGlmIChJLnggPT09IEkueSAmJiBJLnkgPT09IEkueiAmJiAhZm9yY2UpIDsgZWxzZSB7XG4gICAgICBjb25zdCBtMSA9IHVpd19tMTtcbiAgICAgIGNvbnN0IG0yID0gdWl3X20yO1xuICAgICAgbTEuc2V0Um90YXRpb25Gcm9tUXVhdGVybmlvbih0aGlzLnF1YXRlcm5pb24pO1xuICAgICAgbTEudHJhbnNwb3NlKG0yKTtcbiAgICAgIG0xLnNjYWxlKEksIG0xKTtcbiAgICAgIG0xLm1tdWx0KG0yLCB0aGlzLmludkluZXJ0aWFXb3JsZCk7XG4gICAgfVxuICB9XG4gIC8qKlxuICAgKiBBcHBseSBmb3JjZSB0byBhIHBvaW50IG9mIHRoZSBib2R5LiBUaGlzIGNvdWxkIGZvciBleGFtcGxlIGJlIGEgcG9pbnQgb24gdGhlIEJvZHkgc3VyZmFjZS5cbiAgICogQXBwbHlpbmcgZm9yY2UgdGhpcyB3YXkgd2lsbCBhZGQgdG8gQm9keS5mb3JjZSBhbmQgQm9keS50b3JxdWUuXG4gICAqIEBwYXJhbSBmb3JjZSBUaGUgYW1vdW50IG9mIGZvcmNlIHRvIGFkZC5cbiAgICogQHBhcmFtIHJlbGF0aXZlUG9pbnQgQSBwb2ludCByZWxhdGl2ZSB0byB0aGUgY2VudGVyIG9mIG1hc3MgdG8gYXBwbHkgdGhlIGZvcmNlIG9uLlxuICAgKi9cblxuXG4gIGFwcGx5Rm9yY2UoZm9yY2UsIHJlbGF0aXZlUG9pbnQgPSBuZXcgVmVjMygpKSB7XG4gICAgLy8gTmVlZGVkP1xuICAgIGlmICh0aGlzLnR5cGUgIT09IEJvZHkuRFlOQU1JQykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmICh0aGlzLnNsZWVwU3RhdGUgPT09IEJvZHkuU0xFRVBJTkcpIHtcbiAgICAgIHRoaXMud2FrZVVwKCk7XG4gICAgfSAvLyBDb21wdXRlIHByb2R1Y2VkIHJvdGF0aW9uYWwgZm9yY2VcblxuXG4gICAgY29uc3Qgcm90Rm9yY2UgPSBCb2R5X2FwcGx5Rm9yY2Vfcm90Rm9yY2U7XG4gICAgcmVsYXRpdmVQb2ludC5jcm9zcyhmb3JjZSwgcm90Rm9yY2UpOyAvLyBBZGQgbGluZWFyIGZvcmNlXG5cbiAgICB0aGlzLmZvcmNlLnZhZGQoZm9yY2UsIHRoaXMuZm9yY2UpOyAvLyBBZGQgcm90YXRpb25hbCBmb3JjZVxuXG4gICAgdGhpcy50b3JxdWUudmFkZChyb3RGb3JjZSwgdGhpcy50b3JxdWUpO1xuICB9XG4gIC8qKlxuICAgKiBBcHBseSBmb3JjZSB0byBhIGxvY2FsIHBvaW50IGluIHRoZSBib2R5LlxuICAgKiBAcGFyYW0gZm9yY2UgVGhlIGZvcmNlIHZlY3RvciB0byBhcHBseSwgZGVmaW5lZCBsb2NhbGx5IGluIHRoZSBib2R5IGZyYW1lLlxuICAgKiBAcGFyYW0gbG9jYWxQb2ludCBBIGxvY2FsIHBvaW50IGluIHRoZSBib2R5IHRvIGFwcGx5IHRoZSBmb3JjZSBvbi5cbiAgICovXG5cblxuICBhcHBseUxvY2FsRm9yY2UobG9jYWxGb3JjZSwgbG9jYWxQb2ludCA9IG5ldyBWZWMzKCkpIHtcbiAgICBpZiAodGhpcy50eXBlICE9PSBCb2R5LkRZTkFNSUMpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCB3b3JsZEZvcmNlID0gQm9keV9hcHBseUxvY2FsRm9yY2Vfd29ybGRGb3JjZTtcbiAgICBjb25zdCByZWxhdGl2ZVBvaW50V29ybGQgPSBCb2R5X2FwcGx5TG9jYWxGb3JjZV9yZWxhdGl2ZVBvaW50V29ybGQ7IC8vIFRyYW5zZm9ybSB0aGUgZm9yY2UgdmVjdG9yIHRvIHdvcmxkIHNwYWNlXG5cbiAgICB0aGlzLnZlY3RvclRvV29ybGRGcmFtZShsb2NhbEZvcmNlLCB3b3JsZEZvcmNlKTtcbiAgICB0aGlzLnZlY3RvclRvV29ybGRGcmFtZShsb2NhbFBvaW50LCByZWxhdGl2ZVBvaW50V29ybGQpO1xuICAgIHRoaXMuYXBwbHlGb3JjZSh3b3JsZEZvcmNlLCByZWxhdGl2ZVBvaW50V29ybGQpO1xuICB9XG4gIC8qKlxuICAgKiBBcHBseSB0b3JxdWUgdG8gdGhlIGJvZHkuXG4gICAqIEBwYXJhbSB0b3JxdWUgVGhlIGFtb3VudCBvZiB0b3JxdWUgdG8gYWRkLlxuICAgKi9cblxuXG4gIGFwcGx5VG9ycXVlKHRvcnF1ZSkge1xuICAgIGlmICh0aGlzLnR5cGUgIT09IEJvZHkuRFlOQU1JQykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmICh0aGlzLnNsZWVwU3RhdGUgPT09IEJvZHkuU0xFRVBJTkcpIHtcbiAgICAgIHRoaXMud2FrZVVwKCk7XG4gICAgfSAvLyBBZGQgcm90YXRpb25hbCBmb3JjZVxuXG5cbiAgICB0aGlzLnRvcnF1ZS52YWRkKHRvcnF1ZSwgdGhpcy50b3JxdWUpO1xuICB9XG4gIC8qKlxuICAgKiBBcHBseSBpbXB1bHNlIHRvIGEgcG9pbnQgb2YgdGhlIGJvZHkuIFRoaXMgY291bGQgZm9yIGV4YW1wbGUgYmUgYSBwb2ludCBvbiB0aGUgQm9keSBzdXJmYWNlLlxuICAgKiBBbiBpbXB1bHNlIGlzIGEgZm9yY2UgYWRkZWQgdG8gYSBib2R5IGR1cmluZyBhIHNob3J0IHBlcmlvZCBvZiB0aW1lIChpbXB1bHNlID0gZm9yY2UgKiB0aW1lKS5cbiAgICogSW1wdWxzZXMgd2lsbCBiZSBhZGRlZCB0byBCb2R5LnZlbG9jaXR5IGFuZCBCb2R5LmFuZ3VsYXJWZWxvY2l0eS5cbiAgICogQHBhcmFtIGltcHVsc2UgVGhlIGFtb3VudCBvZiBpbXB1bHNlIHRvIGFkZC5cbiAgICogQHBhcmFtIHJlbGF0aXZlUG9pbnQgQSBwb2ludCByZWxhdGl2ZSB0byB0aGUgY2VudGVyIG9mIG1hc3MgdG8gYXBwbHkgdGhlIGZvcmNlIG9uLlxuICAgKi9cblxuXG4gIGFwcGx5SW1wdWxzZShpbXB1bHNlLCByZWxhdGl2ZVBvaW50ID0gbmV3IFZlYzMoKSkge1xuICAgIGlmICh0aGlzLnR5cGUgIT09IEJvZHkuRFlOQU1JQykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmICh0aGlzLnNsZWVwU3RhdGUgPT09IEJvZHkuU0xFRVBJTkcpIHtcbiAgICAgIHRoaXMud2FrZVVwKCk7XG4gICAgfSAvLyBDb21wdXRlIHBvaW50IHBvc2l0aW9uIHJlbGF0aXZlIHRvIHRoZSBib2R5IGNlbnRlclxuXG5cbiAgICBjb25zdCByID0gcmVsYXRpdmVQb2ludDsgLy8gQ29tcHV0ZSBwcm9kdWNlZCBjZW50cmFsIGltcHVsc2UgdmVsb2NpdHlcblxuICAgIGNvbnN0IHZlbG8gPSBCb2R5X2FwcGx5SW1wdWxzZV92ZWxvO1xuICAgIHZlbG8uY29weShpbXB1bHNlKTtcbiAgICB2ZWxvLnNjYWxlKHRoaXMuaW52TWFzcywgdmVsbyk7IC8vIEFkZCBsaW5lYXIgaW1wdWxzZVxuXG4gICAgdGhpcy52ZWxvY2l0eS52YWRkKHZlbG8sIHRoaXMudmVsb2NpdHkpOyAvLyBDb21wdXRlIHByb2R1Y2VkIHJvdGF0aW9uYWwgaW1wdWxzZSB2ZWxvY2l0eVxuXG4gICAgY29uc3Qgcm90VmVsbyA9IEJvZHlfYXBwbHlJbXB1bHNlX3JvdFZlbG87XG4gICAgci5jcm9zcyhpbXB1bHNlLCByb3RWZWxvKTtcbiAgICAvKlxuICAgICByb3RWZWxvLnggKj0gdGhpcy5pbnZJbmVydGlhLng7XG4gICAgIHJvdFZlbG8ueSAqPSB0aGlzLmludkluZXJ0aWEueTtcbiAgICAgcm90VmVsby56ICo9IHRoaXMuaW52SW5lcnRpYS56O1xuICAgICAqL1xuXG4gICAgdGhpcy5pbnZJbmVydGlhV29ybGQudm11bHQocm90VmVsbywgcm90VmVsbyk7IC8vIEFkZCByb3RhdGlvbmFsIEltcHVsc2VcblxuICAgIHRoaXMuYW5ndWxhclZlbG9jaXR5LnZhZGQocm90VmVsbywgdGhpcy5hbmd1bGFyVmVsb2NpdHkpO1xuICB9XG4gIC8qKlxuICAgKiBBcHBseSBsb2NhbGx5LWRlZmluZWQgaW1wdWxzZSB0byBhIGxvY2FsIHBvaW50IGluIHRoZSBib2R5LlxuICAgKiBAcGFyYW0gZm9yY2UgVGhlIGZvcmNlIHZlY3RvciB0byBhcHBseSwgZGVmaW5lZCBsb2NhbGx5IGluIHRoZSBib2R5IGZyYW1lLlxuICAgKiBAcGFyYW0gbG9jYWxQb2ludCBBIGxvY2FsIHBvaW50IGluIHRoZSBib2R5IHRvIGFwcGx5IHRoZSBmb3JjZSBvbi5cbiAgICovXG5cblxuICBhcHBseUxvY2FsSW1wdWxzZShsb2NhbEltcHVsc2UsIGxvY2FsUG9pbnQgPSBuZXcgVmVjMygpKSB7XG4gICAgaWYgKHRoaXMudHlwZSAhPT0gQm9keS5EWU5BTUlDKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3Qgd29ybGRJbXB1bHNlID0gQm9keV9hcHBseUxvY2FsSW1wdWxzZV93b3JsZEltcHVsc2U7XG4gICAgY29uc3QgcmVsYXRpdmVQb2ludFdvcmxkID0gQm9keV9hcHBseUxvY2FsSW1wdWxzZV9yZWxhdGl2ZVBvaW50OyAvLyBUcmFuc2Zvcm0gdGhlIGZvcmNlIHZlY3RvciB0byB3b3JsZCBzcGFjZVxuXG4gICAgdGhpcy52ZWN0b3JUb1dvcmxkRnJhbWUobG9jYWxJbXB1bHNlLCB3b3JsZEltcHVsc2UpO1xuICAgIHRoaXMudmVjdG9yVG9Xb3JsZEZyYW1lKGxvY2FsUG9pbnQsIHJlbGF0aXZlUG9pbnRXb3JsZCk7XG4gICAgdGhpcy5hcHBseUltcHVsc2Uod29ybGRJbXB1bHNlLCByZWxhdGl2ZVBvaW50V29ybGQpO1xuICB9XG4gIC8qKlxuICAgKiBTaG91bGQgYmUgY2FsbGVkIHdoZW5ldmVyIHlvdSBjaGFuZ2UgdGhlIGJvZHkgc2hhcGUgb3IgbWFzcy5cbiAgICovXG5cblxuICB1cGRhdGVNYXNzUHJvcGVydGllcygpIHtcbiAgICBjb25zdCBoYWxmRXh0ZW50cyA9IEJvZHlfdXBkYXRlTWFzc1Byb3BlcnRpZXNfaGFsZkV4dGVudHM7XG4gICAgdGhpcy5pbnZNYXNzID0gdGhpcy5tYXNzID4gMCA/IDEuMCAvIHRoaXMubWFzcyA6IDA7XG4gICAgY29uc3QgSSA9IHRoaXMuaW5lcnRpYTtcbiAgICBjb25zdCBmaXhlZCA9IHRoaXMuZml4ZWRSb3RhdGlvbjsgLy8gQXBwcm94aW1hdGUgd2l0aCBBQUJCIGJveFxuXG4gICAgdGhpcy51cGRhdGVBQUJCKCk7XG4gICAgaGFsZkV4dGVudHMuc2V0KCh0aGlzLmFhYmIudXBwZXJCb3VuZC54IC0gdGhpcy5hYWJiLmxvd2VyQm91bmQueCkgLyAyLCAodGhpcy5hYWJiLnVwcGVyQm91bmQueSAtIHRoaXMuYWFiYi5sb3dlckJvdW5kLnkpIC8gMiwgKHRoaXMuYWFiYi51cHBlckJvdW5kLnogLSB0aGlzLmFhYmIubG93ZXJCb3VuZC56KSAvIDIpO1xuICAgIEJveC5jYWxjdWxhdGVJbmVydGlhKGhhbGZFeHRlbnRzLCB0aGlzLm1hc3MsIEkpO1xuICAgIHRoaXMuaW52SW5lcnRpYS5zZXQoSS54ID4gMCAmJiAhZml4ZWQgPyAxLjAgLyBJLnggOiAwLCBJLnkgPiAwICYmICFmaXhlZCA/IDEuMCAvIEkueSA6IDAsIEkueiA+IDAgJiYgIWZpeGVkID8gMS4wIC8gSS56IDogMCk7XG4gICAgdGhpcy51cGRhdGVJbmVydGlhV29ybGQodHJ1ZSk7XG4gIH1cbiAgLyoqXG4gICAqIEdldCB3b3JsZCB2ZWxvY2l0eSBvZiBhIHBvaW50IGluIHRoZSBib2R5LlxuICAgKiBAcGFyYW0gd29ybGRQb2ludFxuICAgKiBAcGFyYW0gcmVzdWx0XG4gICAqIEByZXR1cm4gVGhlIHJlc3VsdCB2ZWN0b3IuXG4gICAqL1xuXG5cbiAgZ2V0VmVsb2NpdHlBdFdvcmxkUG9pbnQod29ybGRQb2ludCwgcmVzdWx0KSB7XG4gICAgY29uc3QgciA9IG5ldyBWZWMzKCk7XG4gICAgd29ybGRQb2ludC52c3ViKHRoaXMucG9zaXRpb24sIHIpO1xuICAgIHRoaXMuYW5ndWxhclZlbG9jaXR5LmNyb3NzKHIsIHJlc3VsdCk7XG4gICAgdGhpcy52ZWxvY2l0eS52YWRkKHJlc3VsdCwgcmVzdWx0KTtcbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG4gIC8qKlxuICAgKiBNb3ZlIHRoZSBib2R5IGZvcndhcmQgaW4gdGltZS5cbiAgICogQHBhcmFtIGR0IFRpbWUgc3RlcFxuICAgKiBAcGFyYW0gcXVhdE5vcm1hbGl6ZSBTZXQgdG8gdHJ1ZSB0byBub3JtYWxpemUgdGhlIGJvZHkgcXVhdGVybmlvblxuICAgKiBAcGFyYW0gcXVhdE5vcm1hbGl6ZUZhc3QgSWYgdGhlIHF1YXRlcm5pb24gc2hvdWxkIGJlIG5vcm1hbGl6ZWQgdXNpbmcgXCJmYXN0XCIgcXVhdGVybmlvbiBub3JtYWxpemF0aW9uXG4gICAqL1xuXG5cbiAgaW50ZWdyYXRlKGR0LCBxdWF0Tm9ybWFsaXplLCBxdWF0Tm9ybWFsaXplRmFzdCkge1xuICAgIC8vIFNhdmUgcHJldmlvdXMgcG9zaXRpb25cbiAgICB0aGlzLnByZXZpb3VzUG9zaXRpb24uY29weSh0aGlzLnBvc2l0aW9uKTtcbiAgICB0aGlzLnByZXZpb3VzUXVhdGVybmlvbi5jb3B5KHRoaXMucXVhdGVybmlvbik7XG5cbiAgICBpZiAoISh0aGlzLnR5cGUgPT09IEJvZHkuRFlOQU1JQyB8fCB0aGlzLnR5cGUgPT09IEJvZHkuS0lORU1BVElDKSB8fCB0aGlzLnNsZWVwU3RhdGUgPT09IEJvZHkuU0xFRVBJTkcpIHtcbiAgICAgIC8vIE9ubHkgZm9yIGR5bmFtaWNcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCB2ZWxvID0gdGhpcy52ZWxvY2l0eTtcbiAgICBjb25zdCBhbmd1bGFyVmVsbyA9IHRoaXMuYW5ndWxhclZlbG9jaXR5O1xuICAgIGNvbnN0IHBvcyA9IHRoaXMucG9zaXRpb247XG4gICAgY29uc3QgZm9yY2UgPSB0aGlzLmZvcmNlO1xuICAgIGNvbnN0IHRvcnF1ZSA9IHRoaXMudG9ycXVlO1xuICAgIGNvbnN0IHF1YXQgPSB0aGlzLnF1YXRlcm5pb247XG4gICAgY29uc3QgaW52TWFzcyA9IHRoaXMuaW52TWFzcztcbiAgICBjb25zdCBpbnZJbmVydGlhID0gdGhpcy5pbnZJbmVydGlhV29ybGQ7XG4gICAgY29uc3QgbGluZWFyRmFjdG9yID0gdGhpcy5saW5lYXJGYWN0b3I7XG4gICAgY29uc3QgaU1kdCA9IGludk1hc3MgKiBkdDtcbiAgICB2ZWxvLnggKz0gZm9yY2UueCAqIGlNZHQgKiBsaW5lYXJGYWN0b3IueDtcbiAgICB2ZWxvLnkgKz0gZm9yY2UueSAqIGlNZHQgKiBsaW5lYXJGYWN0b3IueTtcbiAgICB2ZWxvLnogKz0gZm9yY2UueiAqIGlNZHQgKiBsaW5lYXJGYWN0b3IuejtcbiAgICBjb25zdCBlID0gaW52SW5lcnRpYS5lbGVtZW50cztcbiAgICBjb25zdCBhbmd1bGFyRmFjdG9yID0gdGhpcy5hbmd1bGFyRmFjdG9yO1xuICAgIGNvbnN0IHR4ID0gdG9ycXVlLnggKiBhbmd1bGFyRmFjdG9yLng7XG4gICAgY29uc3QgdHkgPSB0b3JxdWUueSAqIGFuZ3VsYXJGYWN0b3IueTtcbiAgICBjb25zdCB0eiA9IHRvcnF1ZS56ICogYW5ndWxhckZhY3Rvci56O1xuICAgIGFuZ3VsYXJWZWxvLnggKz0gZHQgKiAoZVswXSAqIHR4ICsgZVsxXSAqIHR5ICsgZVsyXSAqIHR6KTtcbiAgICBhbmd1bGFyVmVsby55ICs9IGR0ICogKGVbM10gKiB0eCArIGVbNF0gKiB0eSArIGVbNV0gKiB0eik7XG4gICAgYW5ndWxhclZlbG8ueiArPSBkdCAqIChlWzZdICogdHggKyBlWzddICogdHkgKyBlWzhdICogdHopOyAvLyBVc2UgbmV3IHZlbG9jaXR5ICAtIGxlYXAgZnJvZ1xuXG4gICAgcG9zLnggKz0gdmVsby54ICogZHQ7XG4gICAgcG9zLnkgKz0gdmVsby55ICogZHQ7XG4gICAgcG9zLnogKz0gdmVsby56ICogZHQ7XG4gICAgcXVhdC5pbnRlZ3JhdGUodGhpcy5hbmd1bGFyVmVsb2NpdHksIGR0LCB0aGlzLmFuZ3VsYXJGYWN0b3IsIHF1YXQpO1xuXG4gICAgaWYgKHF1YXROb3JtYWxpemUpIHtcbiAgICAgIGlmIChxdWF0Tm9ybWFsaXplRmFzdCkge1xuICAgICAgICBxdWF0Lm5vcm1hbGl6ZUZhc3QoKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHF1YXQubm9ybWFsaXplKCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgdGhpcy5hYWJiTmVlZHNVcGRhdGUgPSB0cnVlOyAvLyBVcGRhdGUgd29ybGQgaW5lcnRpYVxuXG4gICAgdGhpcy51cGRhdGVJbmVydGlhV29ybGQoKTtcbiAgfVxuXG59XG5Cb2R5LmlkQ291bnRlciA9IDA7XG5Cb2R5LkNPTExJREVfRVZFTlRfTkFNRSA9ICdjb2xsaWRlJztcbkJvZHkuRFlOQU1JQyA9IEJPRFlfVFlQRVMuRFlOQU1JQztcbkJvZHkuU1RBVElDID0gQk9EWV9UWVBFUy5TVEFUSUM7XG5Cb2R5LktJTkVNQVRJQyA9IEJPRFlfVFlQRVMuS0lORU1BVElDO1xuQm9keS5BV0FLRSA9IEJPRFlfU0xFRVBfU1RBVEVTLkFXQUtFO1xuQm9keS5TTEVFUFkgPSBCT0RZX1NMRUVQX1NUQVRFUy5TTEVFUFk7XG5Cb2R5LlNMRUVQSU5HID0gQk9EWV9TTEVFUF9TVEFURVMuU0xFRVBJTkc7XG5Cb2R5Lndha2V1cEV2ZW50ID0ge1xuICB0eXBlOiAnd2FrZXVwJ1xufTtcbkJvZHkuc2xlZXB5RXZlbnQgPSB7XG4gIHR5cGU6ICdzbGVlcHknXG59O1xuQm9keS5zbGVlcEV2ZW50ID0ge1xuICB0eXBlOiAnc2xlZXAnXG59O1xuY29uc3QgdG1wVmVjID0gbmV3IFZlYzMoKTtcbmNvbnN0IHRtcFF1YXQgPSBuZXcgUXVhdGVybmlvbigpO1xuY29uc3QgdXBkYXRlQUFCQl9zaGFwZUFBQkIgPSBuZXcgQUFCQigpO1xuY29uc3QgdWl3X20xID0gbmV3IE1hdDMoKTtcbmNvbnN0IHVpd19tMiA9IG5ldyBNYXQzKCk7XG5jb25zdCBCb2R5X2FwcGx5Rm9yY2Vfcm90Rm9yY2UgPSBuZXcgVmVjMygpO1xuY29uc3QgQm9keV9hcHBseUxvY2FsRm9yY2Vfd29ybGRGb3JjZSA9IG5ldyBWZWMzKCk7XG5jb25zdCBCb2R5X2FwcGx5TG9jYWxGb3JjZV9yZWxhdGl2ZVBvaW50V29ybGQgPSBuZXcgVmVjMygpO1xuY29uc3QgQm9keV9hcHBseUltcHVsc2VfdmVsbyA9IG5ldyBWZWMzKCk7XG5jb25zdCBCb2R5X2FwcGx5SW1wdWxzZV9yb3RWZWxvID0gbmV3IFZlYzMoKTtcbmNvbnN0IEJvZHlfYXBwbHlMb2NhbEltcHVsc2Vfd29ybGRJbXB1bHNlID0gbmV3IFZlYzMoKTtcbmNvbnN0IEJvZHlfYXBwbHlMb2NhbEltcHVsc2VfcmVsYXRpdmVQb2ludCA9IG5ldyBWZWMzKCk7XG5jb25zdCBCb2R5X3VwZGF0ZU1hc3NQcm9wZXJ0aWVzX2hhbGZFeHRlbnRzID0gbmV3IFZlYzMoKTtcblxuLyoqXG4gKiBCYXNlIGNsYXNzIGZvciBicm9hZHBoYXNlIGltcGxlbWVudGF0aW9uc1xuICogQGF1dGhvciBzY2h0ZXBwZVxuICovXG5jbGFzcyBCcm9hZHBoYXNlIHtcbiAgLyoqXG4gICAqIFRoZSB3b3JsZCB0byBzZWFyY2ggZm9yIGNvbGxpc2lvbnMgaW4uXG4gICAqL1xuXG4gIC8qKlxuICAgKiBJZiBzZXQgdG8gdHJ1ZSwgdGhlIGJyb2FkcGhhc2UgdXNlcyBib3VuZGluZyBib3hlcyBmb3IgaW50ZXJzZWN0aW9uIHRlc3RzLCBlbHNlIGl0IHVzZXMgYm91bmRpbmcgc3BoZXJlcy5cbiAgICovXG5cbiAgLyoqXG4gICAqIFNldCB0byB0cnVlIGlmIHRoZSBvYmplY3RzIGluIHRoZSB3b3JsZCBtb3ZlZC5cbiAgICovXG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHRoaXMud29ybGQgPSB2b2lkIDA7XG4gICAgdGhpcy51c2VCb3VuZGluZ0JveGVzID0gdm9pZCAwO1xuICAgIHRoaXMuZGlydHkgPSB2b2lkIDA7XG4gICAgdGhpcy53b3JsZCA9IG51bGw7XG4gICAgdGhpcy51c2VCb3VuZGluZ0JveGVzID0gZmFsc2U7XG4gICAgdGhpcy5kaXJ0eSA9IHRydWU7XG4gIH1cbiAgLyoqXG4gICAqIEdldCB0aGUgY29sbGlzaW9uIHBhaXJzIGZyb20gdGhlIHdvcmxkXG4gICAqIEBwYXJhbSB3b3JsZCBUaGUgd29ybGQgdG8gc2VhcmNoIGluXG4gICAqIEBwYXJhbSBwMSBFbXB0eSBhcnJheSB0byBiZSBmaWxsZWQgd2l0aCBib2R5IG9iamVjdHNcbiAgICogQHBhcmFtIHAyIEVtcHR5IGFycmF5IHRvIGJlIGZpbGxlZCB3aXRoIGJvZHkgb2JqZWN0c1xuICAgKi9cblxuXG4gIGNvbGxpc2lvblBhaXJzKHdvcmxkLCBwMSwgcDIpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ2NvbGxpc2lvblBhaXJzIG5vdCBpbXBsZW1lbnRlZCBmb3IgdGhpcyBCcm9hZFBoYXNlIGNsYXNzIScpO1xuICB9XG4gIC8qKlxuICAgKiBDaGVjayBpZiBhIGJvZHkgcGFpciBuZWVkcyB0byBiZSBpbnRlcnNlY3Rpb24gdGVzdGVkIGF0IGFsbC5cbiAgICovXG5cblxuICBuZWVkQnJvYWRwaGFzZUNvbGxpc2lvbihib2R5QSwgYm9keUIpIHtcbiAgICAvLyBDaGVjayBjb2xsaXNpb24gZmlsdGVyIG1hc2tzXG4gICAgaWYgKChib2R5QS5jb2xsaXNpb25GaWx0ZXJHcm91cCAmIGJvZHlCLmNvbGxpc2lvbkZpbHRlck1hc2spID09PSAwIHx8IChib2R5Qi5jb2xsaXNpb25GaWx0ZXJHcm91cCAmIGJvZHlBLmNvbGxpc2lvbkZpbHRlck1hc2spID09PSAwKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfSAvLyBDaGVjayB0eXBlc1xuXG5cbiAgICBpZiAoKChib2R5QS50eXBlICYgQm9keS5TVEFUSUMpICE9PSAwIHx8IGJvZHlBLnNsZWVwU3RhdGUgPT09IEJvZHkuU0xFRVBJTkcpICYmICgoYm9keUIudHlwZSAmIEJvZHkuU1RBVElDKSAhPT0gMCB8fCBib2R5Qi5zbGVlcFN0YXRlID09PSBCb2R5LlNMRUVQSU5HKSkge1xuICAgICAgLy8gQm90aCBib2RpZXMgYXJlIHN0YXRpYyBvciBzbGVlcGluZy4gU2tpcC5cbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuICAvKipcbiAgICogQ2hlY2sgaWYgdGhlIGJvdW5kaW5nIHZvbHVtZXMgb2YgdHdvIGJvZGllcyBpbnRlcnNlY3QuXG4gICAqL1xuXG5cbiAgaW50ZXJzZWN0aW9uVGVzdChib2R5QSwgYm9keUIsIHBhaXJzMSwgcGFpcnMyKSB7XG4gICAgaWYgKHRoaXMudXNlQm91bmRpbmdCb3hlcykge1xuICAgICAgdGhpcy5kb0JvdW5kaW5nQm94QnJvYWRwaGFzZShib2R5QSwgYm9keUIsIHBhaXJzMSwgcGFpcnMyKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5kb0JvdW5kaW5nU3BoZXJlQnJvYWRwaGFzZShib2R5QSwgYm9keUIsIHBhaXJzMSwgcGFpcnMyKTtcbiAgICB9XG4gIH1cbiAgLyoqXG4gICAqIENoZWNrIGlmIHRoZSBib3VuZGluZyBzcGhlcmVzIG9mIHR3byBib2RpZXMgYXJlIGludGVyc2VjdGluZy5cbiAgICogQHBhcmFtIHBhaXJzMSBib2R5QSBpcyBhcHBlbmRlZCB0byB0aGlzIGFycmF5IGlmIGludGVyc2VjdGlvblxuICAgKiBAcGFyYW0gcGFpcnMyIGJvZHlCIGlzIGFwcGVuZGVkIHRvIHRoaXMgYXJyYXkgaWYgaW50ZXJzZWN0aW9uXG4gICAqL1xuXG5cbiAgZG9Cb3VuZGluZ1NwaGVyZUJyb2FkcGhhc2UoYm9keUEsIGJvZHlCLCBwYWlyczEsIHBhaXJzMikge1xuICAgIGNvbnN0IHIgPSBCcm9hZHBoYXNlX2NvbGxpc2lvblBhaXJzX3I7XG4gICAgYm9keUIucG9zaXRpb24udnN1Yihib2R5QS5wb3NpdGlvbiwgcik7XG4gICAgY29uc3QgYm91bmRpbmdSYWRpdXNTdW0yID0gKGJvZHlBLmJvdW5kaW5nUmFkaXVzICsgYm9keUIuYm91bmRpbmdSYWRpdXMpICoqIDI7XG4gICAgY29uc3Qgbm9ybTIgPSByLmxlbmd0aFNxdWFyZWQoKTtcblxuICAgIGlmIChub3JtMiA8IGJvdW5kaW5nUmFkaXVzU3VtMikge1xuICAgICAgcGFpcnMxLnB1c2goYm9keUEpO1xuICAgICAgcGFpcnMyLnB1c2goYm9keUIpO1xuICAgIH1cbiAgfVxuICAvKipcbiAgICogQ2hlY2sgaWYgdGhlIGJvdW5kaW5nIGJveGVzIG9mIHR3byBib2RpZXMgYXJlIGludGVyc2VjdGluZy5cbiAgICovXG5cblxuICBkb0JvdW5kaW5nQm94QnJvYWRwaGFzZShib2R5QSwgYm9keUIsIHBhaXJzMSwgcGFpcnMyKSB7XG4gICAgaWYgKGJvZHlBLmFhYmJOZWVkc1VwZGF0ZSkge1xuICAgICAgYm9keUEudXBkYXRlQUFCQigpO1xuICAgIH1cblxuICAgIGlmIChib2R5Qi5hYWJiTmVlZHNVcGRhdGUpIHtcbiAgICAgIGJvZHlCLnVwZGF0ZUFBQkIoKTtcbiAgICB9IC8vIENoZWNrIEFBQkIgLyBBQUJCXG5cblxuICAgIGlmIChib2R5QS5hYWJiLm92ZXJsYXBzKGJvZHlCLmFhYmIpKSB7XG4gICAgICBwYWlyczEucHVzaChib2R5QSk7XG4gICAgICBwYWlyczIucHVzaChib2R5Qik7XG4gICAgfVxuICB9XG4gIC8qKlxuICAgKiBSZW1vdmVzIGR1cGxpY2F0ZSBwYWlycyBmcm9tIHRoZSBwYWlyIGFycmF5cy5cbiAgICovXG5cblxuICBtYWtlUGFpcnNVbmlxdWUocGFpcnMxLCBwYWlyczIpIHtcbiAgICBjb25zdCB0ID0gQnJvYWRwaGFzZV9tYWtlUGFpcnNVbmlxdWVfdGVtcDtcbiAgICBjb25zdCBwMSA9IEJyb2FkcGhhc2VfbWFrZVBhaXJzVW5pcXVlX3AxO1xuICAgIGNvbnN0IHAyID0gQnJvYWRwaGFzZV9tYWtlUGFpcnNVbmlxdWVfcDI7XG4gICAgY29uc3QgTiA9IHBhaXJzMS5sZW5ndGg7XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSAhPT0gTjsgaSsrKSB7XG4gICAgICBwMVtpXSA9IHBhaXJzMVtpXTtcbiAgICAgIHAyW2ldID0gcGFpcnMyW2ldO1xuICAgIH1cblxuICAgIHBhaXJzMS5sZW5ndGggPSAwO1xuICAgIHBhaXJzMi5sZW5ndGggPSAwO1xuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgIT09IE47IGkrKykge1xuICAgICAgY29uc3QgaWQxID0gcDFbaV0uaWQ7XG4gICAgICBjb25zdCBpZDIgPSBwMltpXS5pZDtcbiAgICAgIGNvbnN0IGtleSA9IGlkMSA8IGlkMiA/IGlkMSArIFwiLFwiICsgaWQyIDogaWQyICsgXCIsXCIgKyBpZDE7XG4gICAgICB0W2tleV0gPSBpO1xuICAgICAgdC5rZXlzLnB1c2goa2V5KTtcbiAgICB9XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSAhPT0gdC5rZXlzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBjb25zdCBrZXkgPSB0LmtleXMucG9wKCk7XG4gICAgICBjb25zdCBwYWlySW5kZXggPSB0W2tleV07XG4gICAgICBwYWlyczEucHVzaChwMVtwYWlySW5kZXhdKTtcbiAgICAgIHBhaXJzMi5wdXNoKHAyW3BhaXJJbmRleF0pO1xuICAgICAgZGVsZXRlIHRba2V5XTtcbiAgICB9XG4gIH1cbiAgLyoqXG4gICAqIFRvIGJlIGltcGxlbWVudGVkIGJ5IHN1YmNhc3Nlc1xuICAgKi9cblxuXG4gIHNldFdvcmxkKHdvcmxkKSB7fVxuICAvKipcbiAgICogQ2hlY2sgaWYgdGhlIGJvdW5kaW5nIHNwaGVyZXMgb2YgdHdvIGJvZGllcyBvdmVybGFwLlxuICAgKi9cblxuXG4gIHN0YXRpYyBib3VuZGluZ1NwaGVyZUNoZWNrKGJvZHlBLCBib2R5Qikge1xuICAgIGNvbnN0IGRpc3QgPSBuZXcgVmVjMygpOyAvLyBic2NfZGlzdDtcblxuICAgIGJvZHlBLnBvc2l0aW9uLnZzdWIoYm9keUIucG9zaXRpb24sIGRpc3QpO1xuICAgIGNvbnN0IHNhID0gYm9keUEuc2hhcGVzWzBdO1xuICAgIGNvbnN0IHNiID0gYm9keUIuc2hhcGVzWzBdO1xuICAgIHJldHVybiBNYXRoLnBvdyhzYS5ib3VuZGluZ1NwaGVyZVJhZGl1cyArIHNiLmJvdW5kaW5nU3BoZXJlUmFkaXVzLCAyKSA+IGRpc3QubGVuZ3RoU3F1YXJlZCgpO1xuICB9XG4gIC8qKlxuICAgKiBSZXR1cm5zIGFsbCB0aGUgYm9kaWVzIHdpdGhpbiB0aGUgQUFCQi5cbiAgICovXG5cblxuICBhYWJiUXVlcnkod29ybGQsIGFhYmIsIHJlc3VsdCkge1xuICAgIGNvbnNvbGUud2FybignLmFhYmJRdWVyeSBpcyBub3QgaW1wbGVtZW50ZWQgaW4gdGhpcyBCcm9hZHBoYXNlIHN1YmNsYXNzLicpO1xuICAgIHJldHVybiBbXTtcbiAgfVxuXG59IC8vIFRlbXAgb2JqZWN0c1xuXG5jb25zdCBCcm9hZHBoYXNlX2NvbGxpc2lvblBhaXJzX3IgPSBuZXcgVmVjMygpO1xuY29uc3QgQnJvYWRwaGFzZV9tYWtlUGFpcnNVbmlxdWVfdGVtcCA9IHtcbiAga2V5czogW11cbn07XG5jb25zdCBCcm9hZHBoYXNlX21ha2VQYWlyc1VuaXF1ZV9wMSA9IFtdO1xuY29uc3QgQnJvYWRwaGFzZV9tYWtlUGFpcnNVbmlxdWVfcDIgPSBbXTtcblxuLyoqXG4gKiBBeGlzIGFsaWduZWQgdW5pZm9ybSBncmlkIGJyb2FkcGhhc2UuXG4gKiBAdG9kbyBOZWVkcyBzdXBwb3J0IGZvciBtb3JlIHRoYW4ganVzdCBwbGFuZXMgYW5kIHNwaGVyZXMuXG4gKi9cbmNsYXNzIEdyaWRCcm9hZHBoYXNlIGV4dGVuZHMgQnJvYWRwaGFzZSB7XG4gIC8qKlxuICAgKiBOdW1iZXIgb2YgYm94ZXMgYWxvbmcgeFxuICAgKi9cblxuICAvKipcbiAgICogTnVtYmVyIG9mIGJveGVzIGFsb25nIHlcbiAgICovXG5cbiAgLyoqXG4gICAqIE51bWJlciBvZiBib3hlcyBhbG9uZyB6XG4gICAqL1xuXG4gIC8qKlxuICAgKiBhYWJiTWluXG4gICAqL1xuXG4gIC8qKlxuICAgKiBhYWJiTWF4XG4gICAqL1xuXG4gIC8qKlxuICAgKiBiaW5zXG4gICAqL1xuXG4gIC8qKlxuICAgKiBiaW5MZW5ndGhzXG4gICAqL1xuXG4gIC8qKlxuICAgKiBAcGFyYW0gbnggTnVtYmVyIG9mIGJveGVzIGFsb25nIHguXG4gICAqIEBwYXJhbSBueSBOdW1iZXIgb2YgYm94ZXMgYWxvbmcgeS5cbiAgICogQHBhcmFtIG56IE51bWJlciBvZiBib3hlcyBhbG9uZyB6LlxuICAgKi9cbiAgY29uc3RydWN0b3IoYWFiYk1pbiA9IG5ldyBWZWMzKDEwMCwgMTAwLCAxMDApLCBhYWJiTWF4ID0gbmV3IFZlYzMoLTEwMCwgLTEwMCwgLTEwMCksIG54ID0gMTAsIG55ID0gMTAsIG56ID0gMTApIHtcbiAgICBzdXBlcigpO1xuICAgIHRoaXMubnggPSB2b2lkIDA7XG4gICAgdGhpcy5ueSA9IHZvaWQgMDtcbiAgICB0aGlzLm56ID0gdm9pZCAwO1xuICAgIHRoaXMuYWFiYk1pbiA9IHZvaWQgMDtcbiAgICB0aGlzLmFhYmJNYXggPSB2b2lkIDA7XG4gICAgdGhpcy5iaW5zID0gdm9pZCAwO1xuICAgIHRoaXMuYmluTGVuZ3RocyA9IHZvaWQgMDtcbiAgICB0aGlzLm54ID0gbng7XG4gICAgdGhpcy5ueSA9IG55O1xuICAgIHRoaXMubnogPSBuejtcbiAgICB0aGlzLmFhYmJNaW4gPSBhYWJiTWluO1xuICAgIHRoaXMuYWFiYk1heCA9IGFhYmJNYXg7XG4gICAgY29uc3QgbmJpbnMgPSB0aGlzLm54ICogdGhpcy5ueSAqIHRoaXMubno7XG5cbiAgICBpZiAobmJpbnMgPD0gMCkge1xuICAgICAgdGhyb3cgXCJHcmlkQnJvYWRwaGFzZTogRWFjaCBkaW1lbnNpb24ncyBuIG11c3QgYmUgPjBcIjtcbiAgICB9XG5cbiAgICB0aGlzLmJpbnMgPSBbXTtcbiAgICB0aGlzLmJpbkxlbmd0aHMgPSBbXTsgLy8gUmF0aGVyIHRoYW4gY29udGludWFsbHkgcmVzaXppbmcgYXJyYXlzICh0aHJhc2hpbmcgdGhlIG1lbW9yeSksIGp1c3QgcmVjb3JkIGxlbmd0aCBhbmQgYWxsb3cgdGhlbSB0byBncm93XG5cbiAgICB0aGlzLmJpbnMubGVuZ3RoID0gbmJpbnM7XG4gICAgdGhpcy5iaW5MZW5ndGhzLmxlbmd0aCA9IG5iaW5zO1xuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBuYmluczsgaSsrKSB7XG4gICAgICB0aGlzLmJpbnNbaV0gPSBbXTtcbiAgICAgIHRoaXMuYmluTGVuZ3Roc1tpXSA9IDA7XG4gICAgfVxuICB9XG4gIC8qKlxuICAgKiBHZXQgYWxsIHRoZSBjb2xsaXNpb24gcGFpcnMgaW4gdGhlIHBoeXNpY3Mgd29ybGRcbiAgICovXG5cblxuICBjb2xsaXNpb25QYWlycyh3b3JsZCwgcGFpcnMxLCBwYWlyczIpIHtcbiAgICBjb25zdCBOID0gd29ybGQubnVtT2JqZWN0cygpO1xuICAgIGNvbnN0IGJvZGllcyA9IHdvcmxkLmJvZGllcztcbiAgICBjb25zdCBtYXggPSB0aGlzLmFhYmJNYXg7XG4gICAgY29uc3QgbWluID0gdGhpcy5hYWJiTWluO1xuICAgIGNvbnN0IG54ID0gdGhpcy5ueDtcbiAgICBjb25zdCBueSA9IHRoaXMubnk7XG4gICAgY29uc3QgbnogPSB0aGlzLm56O1xuICAgIGNvbnN0IHhzdGVwID0gbnkgKiBuejtcbiAgICBjb25zdCB5c3RlcCA9IG56O1xuICAgIGNvbnN0IHpzdGVwID0gMTtcbiAgICBjb25zdCB4bWF4ID0gbWF4Lng7XG4gICAgY29uc3QgeW1heCA9IG1heC55O1xuICAgIGNvbnN0IHptYXggPSBtYXguejtcbiAgICBjb25zdCB4bWluID0gbWluLng7XG4gICAgY29uc3QgeW1pbiA9IG1pbi55O1xuICAgIGNvbnN0IHptaW4gPSBtaW4uejtcbiAgICBjb25zdCB4bXVsdCA9IG54IC8gKHhtYXggLSB4bWluKTtcbiAgICBjb25zdCB5bXVsdCA9IG55IC8gKHltYXggLSB5bWluKTtcbiAgICBjb25zdCB6bXVsdCA9IG56IC8gKHptYXggLSB6bWluKTtcbiAgICBjb25zdCBiaW5zaXplWCA9ICh4bWF4IC0geG1pbikgLyBueDtcbiAgICBjb25zdCBiaW5zaXplWSA9ICh5bWF4IC0geW1pbikgLyBueTtcbiAgICBjb25zdCBiaW5zaXplWiA9ICh6bWF4IC0gem1pbikgLyBuejtcbiAgICBjb25zdCBiaW5SYWRpdXMgPSBNYXRoLnNxcnQoYmluc2l6ZVggKiBiaW5zaXplWCArIGJpbnNpemVZICogYmluc2l6ZVkgKyBiaW5zaXplWiAqIGJpbnNpemVaKSAqIDAuNTtcbiAgICBjb25zdCB0eXBlcyA9IFNoYXBlLnR5cGVzO1xuICAgIGNvbnN0IFNQSEVSRSA9IHR5cGVzLlNQSEVSRTtcbiAgICBjb25zdCBQTEFORSA9IHR5cGVzLlBMQU5FO1xuICAgIHR5cGVzLkJPWDtcbiAgICB0eXBlcy5DT01QT1VORDtcbiAgICB0eXBlcy5DT05WRVhQT0xZSEVEUk9OO1xuICAgIGNvbnN0IGJpbnMgPSB0aGlzLmJpbnM7XG4gICAgY29uc3QgYmluTGVuZ3RocyA9IHRoaXMuYmluTGVuZ3RocztcbiAgICBjb25zdCBOYmlucyA9IHRoaXMuYmlucy5sZW5ndGg7IC8vIFJlc2V0IGJpbnNcblxuICAgIGZvciAobGV0IGkgPSAwOyBpICE9PSBOYmluczsgaSsrKSB7XG4gICAgICBiaW5MZW5ndGhzW2ldID0gMDtcbiAgICB9XG5cbiAgICBjb25zdCBjZWlsID0gTWF0aC5jZWlsO1xuXG4gICAgZnVuY3Rpb24gYWRkQm94VG9CaW5zKHgwLCB5MCwgejAsIHgxLCB5MSwgejEsIGJpKSB7XG4gICAgICBsZXQgeG9mZjAgPSAoeDAgLSB4bWluKSAqIHhtdWx0IHwgMDtcbiAgICAgIGxldCB5b2ZmMCA9ICh5MCAtIHltaW4pICogeW11bHQgfCAwO1xuICAgICAgbGV0IHpvZmYwID0gKHowIC0gem1pbikgKiB6bXVsdCB8IDA7XG4gICAgICBsZXQgeG9mZjEgPSBjZWlsKCh4MSAtIHhtaW4pICogeG11bHQpO1xuICAgICAgbGV0IHlvZmYxID0gY2VpbCgoeTEgLSB5bWluKSAqIHltdWx0KTtcbiAgICAgIGxldCB6b2ZmMSA9IGNlaWwoKHoxIC0gem1pbikgKiB6bXVsdCk7XG5cbiAgICAgIGlmICh4b2ZmMCA8IDApIHtcbiAgICAgICAgeG9mZjAgPSAwO1xuICAgICAgfSBlbHNlIGlmICh4b2ZmMCA+PSBueCkge1xuICAgICAgICB4b2ZmMCA9IG54IC0gMTtcbiAgICAgIH1cblxuICAgICAgaWYgKHlvZmYwIDwgMCkge1xuICAgICAgICB5b2ZmMCA9IDA7XG4gICAgICB9IGVsc2UgaWYgKHlvZmYwID49IG55KSB7XG4gICAgICAgIHlvZmYwID0gbnkgLSAxO1xuICAgICAgfVxuXG4gICAgICBpZiAoem9mZjAgPCAwKSB7XG4gICAgICAgIHpvZmYwID0gMDtcbiAgICAgIH0gZWxzZSBpZiAoem9mZjAgPj0gbnopIHtcbiAgICAgICAgem9mZjAgPSBueiAtIDE7XG4gICAgICB9XG5cbiAgICAgIGlmICh4b2ZmMSA8IDApIHtcbiAgICAgICAgeG9mZjEgPSAwO1xuICAgICAgfSBlbHNlIGlmICh4b2ZmMSA+PSBueCkge1xuICAgICAgICB4b2ZmMSA9IG54IC0gMTtcbiAgICAgIH1cblxuICAgICAgaWYgKHlvZmYxIDwgMCkge1xuICAgICAgICB5b2ZmMSA9IDA7XG4gICAgICB9IGVsc2UgaWYgKHlvZmYxID49IG55KSB7XG4gICAgICAgIHlvZmYxID0gbnkgLSAxO1xuICAgICAgfVxuXG4gICAgICBpZiAoem9mZjEgPCAwKSB7XG4gICAgICAgIHpvZmYxID0gMDtcbiAgICAgIH0gZWxzZSBpZiAoem9mZjEgPj0gbnopIHtcbiAgICAgICAgem9mZjEgPSBueiAtIDE7XG4gICAgICB9XG5cbiAgICAgIHhvZmYwICo9IHhzdGVwO1xuICAgICAgeW9mZjAgKj0geXN0ZXA7XG4gICAgICB6b2ZmMCAqPSB6c3RlcDtcbiAgICAgIHhvZmYxICo9IHhzdGVwO1xuICAgICAgeW9mZjEgKj0geXN0ZXA7XG4gICAgICB6b2ZmMSAqPSB6c3RlcDtcblxuICAgICAgZm9yIChsZXQgeG9mZiA9IHhvZmYwOyB4b2ZmIDw9IHhvZmYxOyB4b2ZmICs9IHhzdGVwKSB7XG4gICAgICAgIGZvciAobGV0IHlvZmYgPSB5b2ZmMDsgeW9mZiA8PSB5b2ZmMTsgeW9mZiArPSB5c3RlcCkge1xuICAgICAgICAgIGZvciAobGV0IHpvZmYgPSB6b2ZmMDsgem9mZiA8PSB6b2ZmMTsgem9mZiArPSB6c3RlcCkge1xuICAgICAgICAgICAgY29uc3QgaWR4ID0geG9mZiArIHlvZmYgKyB6b2ZmO1xuICAgICAgICAgICAgYmluc1tpZHhdW2Jpbkxlbmd0aHNbaWR4XSsrXSA9IGJpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gLy8gUHV0IGFsbCBib2RpZXMgaW50byB0aGUgYmluc1xuXG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSAhPT0gTjsgaSsrKSB7XG4gICAgICBjb25zdCBiaSA9IGJvZGllc1tpXTtcbiAgICAgIGNvbnN0IHNpID0gYmkuc2hhcGVzWzBdO1xuXG4gICAgICBzd2l0Y2ggKHNpLnR5cGUpIHtcbiAgICAgICAgY2FzZSBTUEhFUkU6XG4gICAgICAgICAge1xuICAgICAgICAgICAgY29uc3Qgc2hhcGUgPSBzaTsgLy8gUHV0IGluIGJpblxuICAgICAgICAgICAgLy8gY2hlY2sgaWYgb3ZlcmxhcCB3aXRoIG90aGVyIGJpbnNcblxuICAgICAgICAgICAgY29uc3QgeCA9IGJpLnBvc2l0aW9uLng7XG4gICAgICAgICAgICBjb25zdCB5ID0gYmkucG9zaXRpb24ueTtcbiAgICAgICAgICAgIGNvbnN0IHogPSBiaS5wb3NpdGlvbi56O1xuICAgICAgICAgICAgY29uc3QgciA9IHNoYXBlLnJhZGl1cztcbiAgICAgICAgICAgIGFkZEJveFRvQmlucyh4IC0gciwgeSAtIHIsIHogLSByLCB4ICsgciwgeSArIHIsIHogKyByLCBiaSk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG5cbiAgICAgICAgY2FzZSBQTEFORTpcbiAgICAgICAgICB7XG4gICAgICAgICAgICBjb25zdCBzaGFwZSA9IHNpO1xuXG4gICAgICAgICAgICBpZiAoc2hhcGUud29ybGROb3JtYWxOZWVkc1VwZGF0ZSkge1xuICAgICAgICAgICAgICBzaGFwZS5jb21wdXRlV29ybGROb3JtYWwoYmkucXVhdGVybmlvbik7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGNvbnN0IHBsYW5lTm9ybWFsID0gc2hhcGUud29ybGROb3JtYWw7IC8vUmVsYXRpdmUgcG9zaXRpb24gZnJvbSBvcmlnaW4gb2YgcGxhbmUgb2JqZWN0IHRvIHRoZSBmaXJzdCBiaW5cbiAgICAgICAgICAgIC8vSW5jcmVtZW50ZWQgYXMgd2UgaXRlcmF0ZSB0aHJvdWdoIHRoZSBiaW5zXG5cbiAgICAgICAgICAgIGNvbnN0IHhyZXNldCA9IHhtaW4gKyBiaW5zaXplWCAqIDAuNSAtIGJpLnBvc2l0aW9uLng7XG4gICAgICAgICAgICBjb25zdCB5cmVzZXQgPSB5bWluICsgYmluc2l6ZVkgKiAwLjUgLSBiaS5wb3NpdGlvbi55O1xuICAgICAgICAgICAgY29uc3QgenJlc2V0ID0gem1pbiArIGJpbnNpemVaICogMC41IC0gYmkucG9zaXRpb24uejtcbiAgICAgICAgICAgIGNvbnN0IGQgPSBHcmlkQnJvYWRwaGFzZV9jb2xsaXNpb25QYWlyc19kO1xuICAgICAgICAgICAgZC5zZXQoeHJlc2V0LCB5cmVzZXQsIHpyZXNldCk7XG5cbiAgICAgICAgICAgIGZvciAobGV0IHhpID0gMCwgeG9mZiA9IDA7IHhpICE9PSBueDsgeGkrKywgeG9mZiArPSB4c3RlcCwgZC55ID0geXJlc2V0LCBkLnggKz0gYmluc2l6ZVgpIHtcbiAgICAgICAgICAgICAgZm9yIChsZXQgeWkgPSAwLCB5b2ZmID0gMDsgeWkgIT09IG55OyB5aSsrLCB5b2ZmICs9IHlzdGVwLCBkLnogPSB6cmVzZXQsIGQueSArPSBiaW5zaXplWSkge1xuICAgICAgICAgICAgICAgIGZvciAobGV0IHppID0gMCwgem9mZiA9IDA7IHppICE9PSBuejsgemkrKywgem9mZiArPSB6c3RlcCwgZC56ICs9IGJpbnNpemVaKSB7XG4gICAgICAgICAgICAgICAgICBpZiAoZC5kb3QocGxhbmVOb3JtYWwpIDwgYmluUmFkaXVzKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGlkeCA9IHhvZmYgKyB5b2ZmICsgem9mZjtcbiAgICAgICAgICAgICAgICAgICAgYmluc1tpZHhdW2Jpbkxlbmd0aHNbaWR4XSsrXSA9IGJpO1xuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG5cbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICB7XG4gICAgICAgICAgICBpZiAoYmkuYWFiYk5lZWRzVXBkYXRlKSB7XG4gICAgICAgICAgICAgIGJpLnVwZGF0ZUFBQkIoKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgYWRkQm94VG9CaW5zKGJpLmFhYmIubG93ZXJCb3VuZC54LCBiaS5hYWJiLmxvd2VyQm91bmQueSwgYmkuYWFiYi5sb3dlckJvdW5kLnosIGJpLmFhYmIudXBwZXJCb3VuZC54LCBiaS5hYWJiLnVwcGVyQm91bmQueSwgYmkuYWFiYi51cHBlckJvdW5kLnosIGJpKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgIH1cbiAgICB9IC8vIENoZWNrIGVhY2ggYmluXG5cblxuICAgIGZvciAobGV0IGkgPSAwOyBpICE9PSBOYmluczsgaSsrKSB7XG4gICAgICBjb25zdCBiaW5MZW5ndGggPSBiaW5MZW5ndGhzW2ldOyAvL1NraXAgYmlucyB3aXRoIG5vIHBvdGVudGlhbCBjb2xsaXNpb25zXG5cbiAgICAgIGlmIChiaW5MZW5ndGggPiAxKSB7XG4gICAgICAgIGNvbnN0IGJpbiA9IGJpbnNbaV07IC8vIERvIE5eMiBicm9hZHBoYXNlIGluc2lkZVxuXG4gICAgICAgIGZvciAobGV0IHhpID0gMDsgeGkgIT09IGJpbkxlbmd0aDsgeGkrKykge1xuICAgICAgICAgIGNvbnN0IGJpID0gYmluW3hpXTtcblxuICAgICAgICAgIGZvciAobGV0IHlpID0gMDsgeWkgIT09IHhpOyB5aSsrKSB7XG4gICAgICAgICAgICBjb25zdCBiaiA9IGJpblt5aV07XG5cbiAgICAgICAgICAgIGlmICh0aGlzLm5lZWRCcm9hZHBoYXNlQ29sbGlzaW9uKGJpLCBiaikpIHtcbiAgICAgICAgICAgICAgdGhpcy5pbnRlcnNlY3Rpb25UZXN0KGJpLCBiaiwgcGFpcnMxLCBwYWlyczIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gLy9cdGZvciAobGV0IHppID0gMCwgem9mZj0wOyB6aSA8IG56OyB6aSsrLCB6b2ZmKz0genN0ZXApIHtcbiAgICAvL1x0XHRjb25zb2xlLmxvZyhcImxheWVyIFwiK3ppKTtcbiAgICAvL1x0XHRmb3IgKGxldCB5aSA9IDAsIHlvZmY9MDsgeWkgPCBueTsgeWkrKywgeW9mZiArPSB5c3RlcCkge1xuICAgIC8vXHRcdFx0Y29uc3Qgcm93ID0gJyc7XG4gICAgLy9cdFx0XHRmb3IgKGxldCB4aSA9IDAsIHhvZmY9MDsgeGkgPCBueDsgeGkrKywgeG9mZiArPSB4c3RlcCkge1xuICAgIC8vXHRcdFx0XHRjb25zdCBpZHggPSB4b2ZmICsgeW9mZiArIHpvZmY7XG4gICAgLy9cdFx0XHRcdHJvdyArPSAnICcgKyBiaW5MZW5ndGhzW2lkeF07XG4gICAgLy9cdFx0XHR9XG4gICAgLy9cdFx0XHRjb25zb2xlLmxvZyhyb3cpO1xuICAgIC8vXHRcdH1cbiAgICAvL1x0fVxuXG5cbiAgICB0aGlzLm1ha2VQYWlyc1VuaXF1ZShwYWlyczEsIHBhaXJzMik7XG4gIH1cblxufVxuY29uc3QgR3JpZEJyb2FkcGhhc2VfY29sbGlzaW9uUGFpcnNfZCA9IG5ldyBWZWMzKCk7XG5cbi8qKlxuICogTmFpdmUgYnJvYWRwaGFzZSBpbXBsZW1lbnRhdGlvbiwgdXNlZCBpbiBsYWNrIG9mIGJldHRlciBvbmVzLlxuICpcbiAqIFRoZSBuYWl2ZSBicm9hZHBoYXNlIGxvb2tzIGF0IGFsbCBwb3NzaWJsZSBwYWlycyB3aXRob3V0IHJlc3RyaWN0aW9uLCB0aGVyZWZvcmUgaXQgaGFzIGNvbXBsZXhpdHkgTl4yIF8od2hpY2ggaXMgYmFkKV9cbiAqL1xuY2xhc3MgTmFpdmVCcm9hZHBoYXNlIGV4dGVuZHMgQnJvYWRwaGFzZSB7XG4gIC8qKlxuICAgKiBAdG9kbyBSZW1vdmUgdXNlbGVzcyBjb25zdHJ1Y3RvclxuICAgKi9cbiAgY29uc3RydWN0b3IoKSB7XG4gICAgc3VwZXIoKTtcbiAgfVxuICAvKipcbiAgICogR2V0IGFsbCB0aGUgY29sbGlzaW9uIHBhaXJzIGluIHRoZSBwaHlzaWNzIHdvcmxkXG4gICAqL1xuXG5cbiAgY29sbGlzaW9uUGFpcnMod29ybGQsIHBhaXJzMSwgcGFpcnMyKSB7XG4gICAgY29uc3QgYm9kaWVzID0gd29ybGQuYm9kaWVzO1xuICAgIGNvbnN0IG4gPSBib2RpZXMubGVuZ3RoO1xuICAgIGxldCBiaTtcbiAgICBsZXQgYmo7IC8vIE5haXZlIE5eMiBmdHchXG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSAhPT0gbjsgaSsrKSB7XG4gICAgICBmb3IgKGxldCBqID0gMDsgaiAhPT0gaTsgaisrKSB7XG4gICAgICAgIGJpID0gYm9kaWVzW2ldO1xuICAgICAgICBiaiA9IGJvZGllc1tqXTtcblxuICAgICAgICBpZiAoIXRoaXMubmVlZEJyb2FkcGhhc2VDb2xsaXNpb24oYmksIGJqKSkge1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5pbnRlcnNlY3Rpb25UZXN0KGJpLCBiaiwgcGFpcnMxLCBwYWlyczIpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICAvKipcbiAgICogUmV0dXJucyBhbGwgdGhlIGJvZGllcyB3aXRoaW4gYW4gQUFCQi5cbiAgICogQHBhcmFtIHJlc3VsdCBBbiBhcnJheSB0byBzdG9yZSByZXN1bHRpbmcgYm9kaWVzIGluLlxuICAgKi9cblxuXG4gIGFhYmJRdWVyeSh3b3JsZCwgYWFiYiwgcmVzdWx0ID0gW10pIHtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHdvcmxkLmJvZGllcy5sZW5ndGg7IGkrKykge1xuICAgICAgY29uc3QgYiA9IHdvcmxkLmJvZGllc1tpXTtcblxuICAgICAgaWYgKGIuYWFiYk5lZWRzVXBkYXRlKSB7XG4gICAgICAgIGIudXBkYXRlQUFCQigpO1xuICAgICAgfSAvLyBVZ2x5IGhhY2sgdW50aWwgQm9keSBnZXRzIGFhYmJcblxuXG4gICAgICBpZiAoYi5hYWJiLm92ZXJsYXBzKGFhYmIpKSB7XG4gICAgICAgIHJlc3VsdC5wdXNoKGIpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiByZXN1bHQ7XG4gIH1cblxufVxuXG4vKipcbiAqIFN0b3JhZ2UgZm9yIFJheSBjYXN0aW5nIGRhdGFcbiAqL1xuY2xhc3MgUmF5Y2FzdFJlc3VsdCB7XG4gIC8qKlxuICAgKiByYXlGcm9tV29ybGRcbiAgICovXG5cbiAgLyoqXG4gICAqIHJheVRvV29ybGRcbiAgICovXG5cbiAgLyoqXG4gICAqIGhpdE5vcm1hbFdvcmxkXG4gICAqL1xuXG4gIC8qKlxuICAgKiBoaXRQb2ludFdvcmxkXG4gICAqL1xuXG4gIC8qKlxuICAgKiBoYXNIaXRcbiAgICovXG5cbiAgLyoqXG4gICAqIHNoYXBlXG4gICAqL1xuXG4gIC8qKlxuICAgKiBib2R5XG4gICAqL1xuXG4gIC8qKlxuICAgKiBUaGUgaW5kZXggb2YgdGhlIGhpdCB0cmlhbmdsZSwgaWYgdGhlIGhpdCBzaGFwZSB3YXMgYSB0cmltZXNoXG4gICAqL1xuXG4gIC8qKlxuICAgKiBEaXN0YW5jZSB0byB0aGUgaGl0LiBXaWxsIGJlIHNldCB0byAtMSBpZiB0aGVyZSB3YXMgbm8gaGl0XG4gICAqL1xuXG4gIC8qKlxuICAgKiBJZiB0aGUgcmF5IHNob3VsZCBzdG9wIHRyYXZlcnNpbmcgdGhlIGJvZGllc1xuICAgKi9cbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy5yYXlGcm9tV29ybGQgPSB2b2lkIDA7XG4gICAgdGhpcy5yYXlUb1dvcmxkID0gdm9pZCAwO1xuICAgIHRoaXMuaGl0Tm9ybWFsV29ybGQgPSB2b2lkIDA7XG4gICAgdGhpcy5oaXRQb2ludFdvcmxkID0gdm9pZCAwO1xuICAgIHRoaXMuaGFzSGl0ID0gdm9pZCAwO1xuICAgIHRoaXMuc2hhcGUgPSB2b2lkIDA7XG4gICAgdGhpcy5ib2R5ID0gdm9pZCAwO1xuICAgIHRoaXMuaGl0RmFjZUluZGV4ID0gdm9pZCAwO1xuICAgIHRoaXMuZGlzdGFuY2UgPSB2b2lkIDA7XG4gICAgdGhpcy5zaG91bGRTdG9wID0gdm9pZCAwO1xuICAgIHRoaXMucmF5RnJvbVdvcmxkID0gbmV3IFZlYzMoKTtcbiAgICB0aGlzLnJheVRvV29ybGQgPSBuZXcgVmVjMygpO1xuICAgIHRoaXMuaGl0Tm9ybWFsV29ybGQgPSBuZXcgVmVjMygpO1xuICAgIHRoaXMuaGl0UG9pbnRXb3JsZCA9IG5ldyBWZWMzKCk7XG4gICAgdGhpcy5oYXNIaXQgPSBmYWxzZTtcbiAgICB0aGlzLnNoYXBlID0gbnVsbDtcbiAgICB0aGlzLmJvZHkgPSBudWxsO1xuICAgIHRoaXMuaGl0RmFjZUluZGV4ID0gLTE7XG4gICAgdGhpcy5kaXN0YW5jZSA9IC0xO1xuICAgIHRoaXMuc2hvdWxkU3RvcCA9IGZhbHNlO1xuICB9XG4gIC8qKlxuICAgKiBSZXNldCBhbGwgcmVzdWx0IGRhdGEuXG4gICAqL1xuXG5cbiAgcmVzZXQoKSB7XG4gICAgdGhpcy5yYXlGcm9tV29ybGQuc2V0WmVybygpO1xuICAgIHRoaXMucmF5VG9Xb3JsZC5zZXRaZXJvKCk7XG4gICAgdGhpcy5oaXROb3JtYWxXb3JsZC5zZXRaZXJvKCk7XG4gICAgdGhpcy5oaXRQb2ludFdvcmxkLnNldFplcm8oKTtcbiAgICB0aGlzLmhhc0hpdCA9IGZhbHNlO1xuICAgIHRoaXMuc2hhcGUgPSBudWxsO1xuICAgIHRoaXMuYm9keSA9IG51bGw7XG4gICAgdGhpcy5oaXRGYWNlSW5kZXggPSAtMTtcbiAgICB0aGlzLmRpc3RhbmNlID0gLTE7XG4gICAgdGhpcy5zaG91bGRTdG9wID0gZmFsc2U7XG4gIH1cbiAgLyoqXG4gICAqIGFib3J0XG4gICAqL1xuXG5cbiAgYWJvcnQoKSB7XG4gICAgdGhpcy5zaG91bGRTdG9wID0gdHJ1ZTtcbiAgfVxuICAvKipcbiAgICogU2V0IHJlc3VsdCBkYXRhLlxuICAgKi9cblxuXG4gIHNldChyYXlGcm9tV29ybGQsIHJheVRvV29ybGQsIGhpdE5vcm1hbFdvcmxkLCBoaXRQb2ludFdvcmxkLCBzaGFwZSwgYm9keSwgZGlzdGFuY2UpIHtcbiAgICB0aGlzLnJheUZyb21Xb3JsZC5jb3B5KHJheUZyb21Xb3JsZCk7XG4gICAgdGhpcy5yYXlUb1dvcmxkLmNvcHkocmF5VG9Xb3JsZCk7XG4gICAgdGhpcy5oaXROb3JtYWxXb3JsZC5jb3B5KGhpdE5vcm1hbFdvcmxkKTtcbiAgICB0aGlzLmhpdFBvaW50V29ybGQuY29weShoaXRQb2ludFdvcmxkKTtcbiAgICB0aGlzLnNoYXBlID0gc2hhcGU7XG4gICAgdGhpcy5ib2R5ID0gYm9keTtcbiAgICB0aGlzLmRpc3RhbmNlID0gZGlzdGFuY2U7XG4gIH1cblxufVxuXG5sZXQgX1NoYXBlJHR5cGVzJFNQSEVSRSwgX1NoYXBlJHR5cGVzJFBMQU5FLCBfU2hhcGUkdHlwZXMkQk9YLCBfU2hhcGUkdHlwZXMkQ1lMSU5ERVIsIF9TaGFwZSR0eXBlcyRDT05WRVhQTywgX1NoYXBlJHR5cGVzJEhFSUdIVEZJLCBfU2hhcGUkdHlwZXMkVFJJTUVTSDtcblxuLyoqXG4gKiBSQVlfTU9ERVNcbiAqL1xuY29uc3QgUkFZX01PREVTID0ge1xuICAvKiogQ0xPU0VTVCAqL1xuICBDTE9TRVNUOiAxLFxuXG4gIC8qKiBBTlkgKi9cbiAgQU5ZOiAyLFxuXG4gIC8qKiBBTEwgKi9cbiAgQUxMOiA0XG59O1xuLyoqXG4gKiBSYXlNb2RlXG4gKi9cblxuX1NoYXBlJHR5cGVzJFNQSEVSRSA9IFNoYXBlLnR5cGVzLlNQSEVSRTtcbl9TaGFwZSR0eXBlcyRQTEFORSA9IFNoYXBlLnR5cGVzLlBMQU5FO1xuX1NoYXBlJHR5cGVzJEJPWCA9IFNoYXBlLnR5cGVzLkJPWDtcbl9TaGFwZSR0eXBlcyRDWUxJTkRFUiA9IFNoYXBlLnR5cGVzLkNZTElOREVSO1xuX1NoYXBlJHR5cGVzJENPTlZFWFBPID0gU2hhcGUudHlwZXMuQ09OVkVYUE9MWUhFRFJPTjtcbl9TaGFwZSR0eXBlcyRIRUlHSFRGSSA9IFNoYXBlLnR5cGVzLkhFSUdIVEZJRUxEO1xuX1NoYXBlJHR5cGVzJFRSSU1FU0ggPSBTaGFwZS50eXBlcy5UUklNRVNIO1xuXG4vKipcbiAqIEEgbGluZSBpbiAzRCBzcGFjZSB0aGF0IGludGVyc2VjdHMgYm9kaWVzIGFuZCByZXR1cm4gcG9pbnRzLlxuICovXG5jbGFzcyBSYXkge1xuICAvKipcbiAgICogZnJvbVxuICAgKi9cblxuICAvKipcbiAgICogdG9cbiAgICovXG5cbiAgLyoqXG4gICAqIGRpcmVjdGlvblxuICAgKi9cblxuICAvKipcbiAgICogVGhlIHByZWNpc2lvbiBvZiB0aGUgcmF5LiBVc2VkIHdoZW4gY2hlY2tpbmcgcGFyYWxsZWxpdHkgZXRjLlxuICAgKiBAZGVmYXVsdCAwLjAwMDFcbiAgICovXG5cbiAgLyoqXG4gICAqIFNldCB0byBgZmFsc2VgIGlmIHlvdSBkb24ndCB3YW50IHRoZSBSYXkgdG8gdGFrZSBgY29sbGlzaW9uUmVzcG9uc2VgIGZsYWdzIGludG8gYWNjb3VudCBvbiBib2RpZXMgYW5kIHNoYXBlcy5cbiAgICogQGRlZmF1bHQgdHJ1ZVxuICAgKi9cblxuICAvKipcbiAgICogSWYgc2V0IHRvIGB0cnVlYCwgdGhlIHJheSBza2lwcyBhbnkgaGl0cyB3aXRoIG5vcm1hbC5kb3QocmF5RGlyZWN0aW9uKSA8IDAuXG4gICAqIEBkZWZhdWx0IGZhbHNlXG4gICAqL1xuXG4gIC8qKlxuICAgKiBjb2xsaXNpb25GaWx0ZXJNYXNrXG4gICAqIEBkZWZhdWx0IC0xXG4gICAqL1xuXG4gIC8qKlxuICAgKiBjb2xsaXNpb25GaWx0ZXJHcm91cFxuICAgKiBAZGVmYXVsdCAtMVxuICAgKi9cblxuICAvKipcbiAgICogVGhlIGludGVyc2VjdGlvbiBtb2RlLiBTaG91bGQgYmUgUmF5LkFOWSwgUmF5LkFMTCBvciBSYXkuQ0xPU0VTVC5cbiAgICogQGRlZmF1bHQgUkFZLkFOWVxuICAgKi9cblxuICAvKipcbiAgICogQ3VycmVudCByZXN1bHQgb2JqZWN0LlxuICAgKi9cblxuICAvKipcbiAgICogV2lsbCBiZSBzZXQgdG8gYHRydWVgIGR1cmluZyBpbnRlcnNlY3RXb3JsZCgpIGlmIHRoZSByYXkgaGl0IGFueXRoaW5nLlxuICAgKi9cblxuICAvKipcbiAgICogVXNlci1wcm92aWRlZCByZXN1bHQgY2FsbGJhY2suIFdpbGwgYmUgdXNlZCBpZiBtb2RlIGlzIFJheS5BTEwuXG4gICAqL1xuXG4gIC8qKlxuICAgKiBDTE9TRVNUXG4gICAqL1xuXG4gIC8qKlxuICAgKiBBTllcbiAgICovXG5cbiAgLyoqXG4gICAqIEFMTFxuICAgKi9cbiAgZ2V0IFtfU2hhcGUkdHlwZXMkU1BIRVJFXSgpIHtcbiAgICByZXR1cm4gdGhpcy5faW50ZXJzZWN0U3BoZXJlO1xuICB9XG5cbiAgZ2V0IFtfU2hhcGUkdHlwZXMkUExBTkVdKCkge1xuICAgIHJldHVybiB0aGlzLl9pbnRlcnNlY3RQbGFuZTtcbiAgfVxuXG4gIGdldCBbX1NoYXBlJHR5cGVzJEJPWF0oKSB7XG4gICAgcmV0dXJuIHRoaXMuX2ludGVyc2VjdEJveDtcbiAgfVxuXG4gIGdldCBbX1NoYXBlJHR5cGVzJENZTElOREVSXSgpIHtcbiAgICByZXR1cm4gdGhpcy5faW50ZXJzZWN0Q29udmV4O1xuICB9XG5cbiAgZ2V0IFtfU2hhcGUkdHlwZXMkQ09OVkVYUE9dKCkge1xuICAgIHJldHVybiB0aGlzLl9pbnRlcnNlY3RDb252ZXg7XG4gIH1cblxuICBnZXQgW19TaGFwZSR0eXBlcyRIRUlHSFRGSV0oKSB7XG4gICAgcmV0dXJuIHRoaXMuX2ludGVyc2VjdEhlaWdodGZpZWxkO1xuICB9XG5cbiAgZ2V0IFtfU2hhcGUkdHlwZXMkVFJJTUVTSF0oKSB7XG4gICAgcmV0dXJuIHRoaXMuX2ludGVyc2VjdFRyaW1lc2g7XG4gIH1cblxuICBjb25zdHJ1Y3Rvcihmcm9tID0gbmV3IFZlYzMoKSwgdG8gPSBuZXcgVmVjMygpKSB7XG4gICAgdGhpcy5mcm9tID0gdm9pZCAwO1xuICAgIHRoaXMudG8gPSB2b2lkIDA7XG4gICAgdGhpcy5kaXJlY3Rpb24gPSB2b2lkIDA7XG4gICAgdGhpcy5wcmVjaXNpb24gPSB2b2lkIDA7XG4gICAgdGhpcy5jaGVja0NvbGxpc2lvblJlc3BvbnNlID0gdm9pZCAwO1xuICAgIHRoaXMuc2tpcEJhY2tmYWNlcyA9IHZvaWQgMDtcbiAgICB0aGlzLmNvbGxpc2lvbkZpbHRlck1hc2sgPSB2b2lkIDA7XG4gICAgdGhpcy5jb2xsaXNpb25GaWx0ZXJHcm91cCA9IHZvaWQgMDtcbiAgICB0aGlzLm1vZGUgPSB2b2lkIDA7XG4gICAgdGhpcy5yZXN1bHQgPSB2b2lkIDA7XG4gICAgdGhpcy5oYXNIaXQgPSB2b2lkIDA7XG4gICAgdGhpcy5jYWxsYmFjayA9IHZvaWQgMDtcbiAgICB0aGlzLmZyb20gPSBmcm9tLmNsb25lKCk7XG4gICAgdGhpcy50byA9IHRvLmNsb25lKCk7XG4gICAgdGhpcy5kaXJlY3Rpb24gPSBuZXcgVmVjMygpO1xuICAgIHRoaXMucHJlY2lzaW9uID0gMC4wMDAxO1xuICAgIHRoaXMuY2hlY2tDb2xsaXNpb25SZXNwb25zZSA9IHRydWU7XG4gICAgdGhpcy5za2lwQmFja2ZhY2VzID0gZmFsc2U7XG4gICAgdGhpcy5jb2xsaXNpb25GaWx0ZXJNYXNrID0gLTE7XG4gICAgdGhpcy5jb2xsaXNpb25GaWx0ZXJHcm91cCA9IC0xO1xuICAgIHRoaXMubW9kZSA9IFJheS5BTlk7XG4gICAgdGhpcy5yZXN1bHQgPSBuZXcgUmF5Y2FzdFJlc3VsdCgpO1xuICAgIHRoaXMuaGFzSGl0ID0gZmFsc2U7XG5cbiAgICB0aGlzLmNhbGxiYWNrID0gcmVzdWx0ID0+IHt9O1xuICB9XG4gIC8qKlxuICAgKiBEbyBpdGVyc2VjdGlvbiBhZ2FpbnN0IGFsbCBib2RpZXMgaW4gdGhlIGdpdmVuIFdvcmxkLlxuICAgKiBAcmV0dXJuIFRydWUgaWYgdGhlIHJheSBoaXQgYW55dGhpbmcsIG90aGVyd2lzZSBmYWxzZS5cbiAgICovXG5cblxuICBpbnRlcnNlY3RXb3JsZCh3b3JsZCwgb3B0aW9ucykge1xuICAgIHRoaXMubW9kZSA9IG9wdGlvbnMubW9kZSB8fCBSYXkuQU5ZO1xuICAgIHRoaXMucmVzdWx0ID0gb3B0aW9ucy5yZXN1bHQgfHwgbmV3IFJheWNhc3RSZXN1bHQoKTtcbiAgICB0aGlzLnNraXBCYWNrZmFjZXMgPSAhIW9wdGlvbnMuc2tpcEJhY2tmYWNlcztcbiAgICB0aGlzLmNvbGxpc2lvbkZpbHRlck1hc2sgPSB0eXBlb2Ygb3B0aW9ucy5jb2xsaXNpb25GaWx0ZXJNYXNrICE9PSAndW5kZWZpbmVkJyA/IG9wdGlvbnMuY29sbGlzaW9uRmlsdGVyTWFzayA6IC0xO1xuICAgIHRoaXMuY29sbGlzaW9uRmlsdGVyR3JvdXAgPSB0eXBlb2Ygb3B0aW9ucy5jb2xsaXNpb25GaWx0ZXJHcm91cCAhPT0gJ3VuZGVmaW5lZCcgPyBvcHRpb25zLmNvbGxpc2lvbkZpbHRlckdyb3VwIDogLTE7XG4gICAgdGhpcy5jaGVja0NvbGxpc2lvblJlc3BvbnNlID0gdHlwZW9mIG9wdGlvbnMuY2hlY2tDb2xsaXNpb25SZXNwb25zZSAhPT0gJ3VuZGVmaW5lZCcgPyBvcHRpb25zLmNoZWNrQ29sbGlzaW9uUmVzcG9uc2UgOiB0cnVlO1xuXG4gICAgaWYgKG9wdGlvbnMuZnJvbSkge1xuICAgICAgdGhpcy5mcm9tLmNvcHkob3B0aW9ucy5mcm9tKTtcbiAgICB9XG5cbiAgICBpZiAob3B0aW9ucy50bykge1xuICAgICAgdGhpcy50by5jb3B5KG9wdGlvbnMudG8pO1xuICAgIH1cblxuICAgIHRoaXMuY2FsbGJhY2sgPSBvcHRpb25zLmNhbGxiYWNrIHx8ICgoKSA9PiB7fSk7XG5cbiAgICB0aGlzLmhhc0hpdCA9IGZhbHNlO1xuICAgIHRoaXMucmVzdWx0LnJlc2V0KCk7XG4gICAgdGhpcy51cGRhdGVEaXJlY3Rpb24oKTtcbiAgICB0aGlzLmdldEFBQkIodG1wQUFCQiQxKTtcbiAgICB0bXBBcnJheS5sZW5ndGggPSAwO1xuICAgIHdvcmxkLmJyb2FkcGhhc2UuYWFiYlF1ZXJ5KHdvcmxkLCB0bXBBQUJCJDEsIHRtcEFycmF5KTtcbiAgICB0aGlzLmludGVyc2VjdEJvZGllcyh0bXBBcnJheSk7XG4gICAgcmV0dXJuIHRoaXMuaGFzSGl0O1xuICB9XG4gIC8qKlxuICAgKiBTaG9vdCBhIHJheSBhdCBhIGJvZHksIGdldCBiYWNrIGluZm9ybWF0aW9uIGFib3V0IHRoZSBoaXQuXG4gICAqIEBkZXByZWNhdGVkIEBwYXJhbSByZXN1bHQgc2V0IHRoZSByZXN1bHQgcHJvcGVydHkgb2YgdGhlIFJheSBpbnN0ZWFkLlxuICAgKi9cblxuXG4gIGludGVyc2VjdEJvZHkoYm9keSwgcmVzdWx0KSB7XG4gICAgaWYgKHJlc3VsdCkge1xuICAgICAgdGhpcy5yZXN1bHQgPSByZXN1bHQ7XG4gICAgICB0aGlzLnVwZGF0ZURpcmVjdGlvbigpO1xuICAgIH1cblxuICAgIGNvbnN0IGNoZWNrQ29sbGlzaW9uUmVzcG9uc2UgPSB0aGlzLmNoZWNrQ29sbGlzaW9uUmVzcG9uc2U7XG5cbiAgICBpZiAoY2hlY2tDb2xsaXNpb25SZXNwb25zZSAmJiAhYm9keS5jb2xsaXNpb25SZXNwb25zZSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmICgodGhpcy5jb2xsaXNpb25GaWx0ZXJHcm91cCAmIGJvZHkuY29sbGlzaW9uRmlsdGVyTWFzaykgPT09IDAgfHwgKGJvZHkuY29sbGlzaW9uRmlsdGVyR3JvdXAgJiB0aGlzLmNvbGxpc2lvbkZpbHRlck1hc2spID09PSAwKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgeGkgPSBpbnRlcnNlY3RCb2R5X3hpO1xuICAgIGNvbnN0IHFpID0gaW50ZXJzZWN0Qm9keV9xaTtcblxuICAgIGZvciAobGV0IGkgPSAwLCBOID0gYm9keS5zaGFwZXMubGVuZ3RoOyBpIDwgTjsgaSsrKSB7XG4gICAgICBjb25zdCBzaGFwZSA9IGJvZHkuc2hhcGVzW2ldO1xuXG4gICAgICBpZiAoY2hlY2tDb2xsaXNpb25SZXNwb25zZSAmJiAhc2hhcGUuY29sbGlzaW9uUmVzcG9uc2UpIHtcbiAgICAgICAgY29udGludWU7IC8vIFNraXBcbiAgICAgIH1cblxuICAgICAgYm9keS5xdWF0ZXJuaW9uLm11bHQoYm9keS5zaGFwZU9yaWVudGF0aW9uc1tpXSwgcWkpO1xuICAgICAgYm9keS5xdWF0ZXJuaW9uLnZtdWx0KGJvZHkuc2hhcGVPZmZzZXRzW2ldLCB4aSk7XG4gICAgICB4aS52YWRkKGJvZHkucG9zaXRpb24sIHhpKTtcbiAgICAgIHRoaXMuaW50ZXJzZWN0U2hhcGUoc2hhcGUsIHFpLCB4aSwgYm9keSk7XG5cbiAgICAgIGlmICh0aGlzLnJlc3VsdC5zaG91bGRTdG9wKSB7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICAvKipcbiAgICogU2hvb3QgYSByYXkgYXQgYW4gYXJyYXkgYm9kaWVzLCBnZXQgYmFjayBpbmZvcm1hdGlvbiBhYm91dCB0aGUgaGl0LlxuICAgKiBAcGFyYW0gYm9kaWVzIEFuIGFycmF5IG9mIEJvZHkgb2JqZWN0cy5cbiAgICogQGRlcHJlY2F0ZWQgQHBhcmFtIHJlc3VsdCBzZXQgdGhlIHJlc3VsdCBwcm9wZXJ0eSBvZiB0aGUgUmF5IGluc3RlYWQuXG4gICAqXG4gICAqL1xuXG5cbiAgaW50ZXJzZWN0Qm9kaWVzKGJvZGllcywgcmVzdWx0KSB7XG4gICAgaWYgKHJlc3VsdCkge1xuICAgICAgdGhpcy5yZXN1bHQgPSByZXN1bHQ7XG4gICAgICB0aGlzLnVwZGF0ZURpcmVjdGlvbigpO1xuICAgIH1cblxuICAgIGZvciAobGV0IGkgPSAwLCBsID0gYm9kaWVzLmxlbmd0aDsgIXRoaXMucmVzdWx0LnNob3VsZFN0b3AgJiYgaSA8IGw7IGkrKykge1xuICAgICAgdGhpcy5pbnRlcnNlY3RCb2R5KGJvZGllc1tpXSk7XG4gICAgfVxuICB9XG4gIC8qKlxuICAgKiBVcGRhdGVzIHRoZSBkaXJlY3Rpb24gdmVjdG9yLlxuICAgKi9cblxuXG4gIHVwZGF0ZURpcmVjdGlvbigpIHtcbiAgICB0aGlzLnRvLnZzdWIodGhpcy5mcm9tLCB0aGlzLmRpcmVjdGlvbik7XG4gICAgdGhpcy5kaXJlY3Rpb24ubm9ybWFsaXplKCk7XG4gIH1cblxuICBpbnRlcnNlY3RTaGFwZShzaGFwZSwgcXVhdCwgcG9zaXRpb24sIGJvZHkpIHtcbiAgICBjb25zdCBmcm9tID0gdGhpcy5mcm9tOyAvLyBDaGVja2luZyBib3VuZGluZ1NwaGVyZVxuXG4gICAgY29uc3QgZGlzdGFuY2UgPSBkaXN0YW5jZUZyb21JbnRlcnNlY3Rpb24oZnJvbSwgdGhpcy5kaXJlY3Rpb24sIHBvc2l0aW9uKTtcblxuICAgIGlmIChkaXN0YW5jZSA+IHNoYXBlLmJvdW5kaW5nU3BoZXJlUmFkaXVzKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgaW50ZXJzZWN0TWV0aG9kID0gdGhpc1tzaGFwZS50eXBlXTtcblxuICAgIGlmIChpbnRlcnNlY3RNZXRob2QpIHtcbiAgICAgIGludGVyc2VjdE1ldGhvZC5jYWxsKHRoaXMsIHNoYXBlLCBxdWF0LCBwb3NpdGlvbiwgYm9keSwgc2hhcGUpO1xuICAgIH1cbiAgfVxuXG4gIF9pbnRlcnNlY3RCb3goYm94LCBxdWF0LCBwb3NpdGlvbiwgYm9keSwgcmVwb3J0ZWRTaGFwZSkge1xuICAgIHJldHVybiB0aGlzLl9pbnRlcnNlY3RDb252ZXgoYm94LmNvbnZleFBvbHloZWRyb25SZXByZXNlbnRhdGlvbiwgcXVhdCwgcG9zaXRpb24sIGJvZHksIHJlcG9ydGVkU2hhcGUpO1xuICB9XG5cbiAgX2ludGVyc2VjdFBsYW5lKHNoYXBlLCBxdWF0LCBwb3NpdGlvbiwgYm9keSwgcmVwb3J0ZWRTaGFwZSkge1xuICAgIGNvbnN0IGZyb20gPSB0aGlzLmZyb207XG4gICAgY29uc3QgdG8gPSB0aGlzLnRvO1xuICAgIGNvbnN0IGRpcmVjdGlvbiA9IHRoaXMuZGlyZWN0aW9uOyAvLyBHZXQgcGxhbmUgbm9ybWFsXG5cbiAgICBjb25zdCB3b3JsZE5vcm1hbCA9IG5ldyBWZWMzKDAsIDAsIDEpO1xuICAgIHF1YXQudm11bHQod29ybGROb3JtYWwsIHdvcmxkTm9ybWFsKTtcbiAgICBjb25zdCBsZW4gPSBuZXcgVmVjMygpO1xuICAgIGZyb20udnN1Yihwb3NpdGlvbiwgbGVuKTtcbiAgICBjb25zdCBwbGFuZVRvRnJvbSA9IGxlbi5kb3Qod29ybGROb3JtYWwpO1xuICAgIHRvLnZzdWIocG9zaXRpb24sIGxlbik7XG4gICAgY29uc3QgcGxhbmVUb1RvID0gbGVuLmRvdCh3b3JsZE5vcm1hbCk7XG5cbiAgICBpZiAocGxhbmVUb0Zyb20gKiBwbGFuZVRvVG8gPiAwKSB7XG4gICAgICAvLyBcImZyb21cIiBhbmQgXCJ0b1wiIGFyZSBvbiB0aGUgc2FtZSBzaWRlIG9mIHRoZSBwbGFuZS4uLiBiYWlsIG91dFxuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmIChmcm9tLmRpc3RhbmNlVG8odG8pIDwgcGxhbmVUb0Zyb20pIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBuX2RvdF9kaXIgPSB3b3JsZE5vcm1hbC5kb3QoZGlyZWN0aW9uKTtcblxuICAgIGlmIChNYXRoLmFicyhuX2RvdF9kaXIpIDwgdGhpcy5wcmVjaXNpb24pIHtcbiAgICAgIC8vIE5vIGludGVyc2VjdGlvblxuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IHBsYW5lUG9pbnRUb0Zyb20gPSBuZXcgVmVjMygpO1xuICAgIGNvbnN0IGRpcl9zY2FsZWRfd2l0aF90ID0gbmV3IFZlYzMoKTtcbiAgICBjb25zdCBoaXRQb2ludFdvcmxkID0gbmV3IFZlYzMoKTtcbiAgICBmcm9tLnZzdWIocG9zaXRpb24sIHBsYW5lUG9pbnRUb0Zyb20pO1xuICAgIGNvbnN0IHQgPSAtd29ybGROb3JtYWwuZG90KHBsYW5lUG9pbnRUb0Zyb20pIC8gbl9kb3RfZGlyO1xuICAgIGRpcmVjdGlvbi5zY2FsZSh0LCBkaXJfc2NhbGVkX3dpdGhfdCk7XG4gICAgZnJvbS52YWRkKGRpcl9zY2FsZWRfd2l0aF90LCBoaXRQb2ludFdvcmxkKTtcbiAgICB0aGlzLnJlcG9ydEludGVyc2VjdGlvbih3b3JsZE5vcm1hbCwgaGl0UG9pbnRXb3JsZCwgcmVwb3J0ZWRTaGFwZSwgYm9keSwgLTEpO1xuICB9XG4gIC8qKlxuICAgKiBHZXQgdGhlIHdvcmxkIEFBQkIgb2YgdGhlIHJheS5cbiAgICovXG5cblxuICBnZXRBQUJCKGFhYmIpIHtcbiAgICBjb25zdCB7XG4gICAgICBsb3dlckJvdW5kLFxuICAgICAgdXBwZXJCb3VuZFxuICAgIH0gPSBhYWJiO1xuICAgIGNvbnN0IHRvID0gdGhpcy50bztcbiAgICBjb25zdCBmcm9tID0gdGhpcy5mcm9tO1xuICAgIGxvd2VyQm91bmQueCA9IE1hdGgubWluKHRvLngsIGZyb20ueCk7XG4gICAgbG93ZXJCb3VuZC55ID0gTWF0aC5taW4odG8ueSwgZnJvbS55KTtcbiAgICBsb3dlckJvdW5kLnogPSBNYXRoLm1pbih0by56LCBmcm9tLnopO1xuICAgIHVwcGVyQm91bmQueCA9IE1hdGgubWF4KHRvLngsIGZyb20ueCk7XG4gICAgdXBwZXJCb3VuZC55ID0gTWF0aC5tYXgodG8ueSwgZnJvbS55KTtcbiAgICB1cHBlckJvdW5kLnogPSBNYXRoLm1heCh0by56LCBmcm9tLnopO1xuICB9XG5cbiAgX2ludGVyc2VjdEhlaWdodGZpZWxkKHNoYXBlLCBxdWF0LCBwb3NpdGlvbiwgYm9keSwgcmVwb3J0ZWRTaGFwZSkge1xuICAgIHNoYXBlLmRhdGE7XG4gICAgc2hhcGUuZWxlbWVudFNpemU7IC8vIENvbnZlcnQgdGhlIHJheSB0byBsb2NhbCBoZWlnaHRmaWVsZCBjb29yZGluYXRlc1xuXG4gICAgY29uc3QgbG9jYWxSYXkgPSBpbnRlcnNlY3RIZWlnaHRmaWVsZF9sb2NhbFJheTsgLy9uZXcgUmF5KHRoaXMuZnJvbSwgdGhpcy50byk7XG5cbiAgICBsb2NhbFJheS5mcm9tLmNvcHkodGhpcy5mcm9tKTtcbiAgICBsb2NhbFJheS50by5jb3B5KHRoaXMudG8pO1xuICAgIFRyYW5zZm9ybS5wb2ludFRvTG9jYWxGcmFtZShwb3NpdGlvbiwgcXVhdCwgbG9jYWxSYXkuZnJvbSwgbG9jYWxSYXkuZnJvbSk7XG4gICAgVHJhbnNmb3JtLnBvaW50VG9Mb2NhbEZyYW1lKHBvc2l0aW9uLCBxdWF0LCBsb2NhbFJheS50bywgbG9jYWxSYXkudG8pO1xuICAgIGxvY2FsUmF5LnVwZGF0ZURpcmVjdGlvbigpOyAvLyBHZXQgdGhlIGluZGV4IG9mIHRoZSBkYXRhIHBvaW50cyB0byB0ZXN0IGFnYWluc3RcblxuICAgIGNvbnN0IGluZGV4ID0gaW50ZXJzZWN0SGVpZ2h0ZmllbGRfaW5kZXg7XG4gICAgbGV0IGlNaW5YO1xuICAgIGxldCBpTWluWTtcbiAgICBsZXQgaU1heFg7XG4gICAgbGV0IGlNYXhZOyAvLyBTZXQgdG8gbWF4XG5cbiAgICBpTWluWCA9IGlNaW5ZID0gMDtcbiAgICBpTWF4WCA9IGlNYXhZID0gc2hhcGUuZGF0YS5sZW5ndGggLSAxO1xuICAgIGNvbnN0IGFhYmIgPSBuZXcgQUFCQigpO1xuICAgIGxvY2FsUmF5LmdldEFBQkIoYWFiYik7XG4gICAgc2hhcGUuZ2V0SW5kZXhPZlBvc2l0aW9uKGFhYmIubG93ZXJCb3VuZC54LCBhYWJiLmxvd2VyQm91bmQueSwgaW5kZXgsIHRydWUpO1xuICAgIGlNaW5YID0gTWF0aC5tYXgoaU1pblgsIGluZGV4WzBdKTtcbiAgICBpTWluWSA9IE1hdGgubWF4KGlNaW5ZLCBpbmRleFsxXSk7XG4gICAgc2hhcGUuZ2V0SW5kZXhPZlBvc2l0aW9uKGFhYmIudXBwZXJCb3VuZC54LCBhYWJiLnVwcGVyQm91bmQueSwgaW5kZXgsIHRydWUpO1xuICAgIGlNYXhYID0gTWF0aC5taW4oaU1heFgsIGluZGV4WzBdICsgMSk7XG4gICAgaU1heFkgPSBNYXRoLm1pbihpTWF4WSwgaW5kZXhbMV0gKyAxKTtcblxuICAgIGZvciAobGV0IGkgPSBpTWluWDsgaSA8IGlNYXhYOyBpKyspIHtcbiAgICAgIGZvciAobGV0IGogPSBpTWluWTsgaiA8IGlNYXhZOyBqKyspIHtcbiAgICAgICAgaWYgKHRoaXMucmVzdWx0LnNob3VsZFN0b3ApIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBzaGFwZS5nZXRBYWJiQXRJbmRleChpLCBqLCBhYWJiKTtcblxuICAgICAgICBpZiAoIWFhYmIub3ZlcmxhcHNSYXkobG9jYWxSYXkpKSB7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH0gLy8gTG93ZXIgdHJpYW5nbGVcblxuXG4gICAgICAgIHNoYXBlLmdldENvbnZleFRyaWFuZ2xlUGlsbGFyKGksIGosIGZhbHNlKTtcbiAgICAgICAgVHJhbnNmb3JtLnBvaW50VG9Xb3JsZEZyYW1lKHBvc2l0aW9uLCBxdWF0LCBzaGFwZS5waWxsYXJPZmZzZXQsIHdvcmxkUGlsbGFyT2Zmc2V0KTtcblxuICAgICAgICB0aGlzLl9pbnRlcnNlY3RDb252ZXgoc2hhcGUucGlsbGFyQ29udmV4LCBxdWF0LCB3b3JsZFBpbGxhck9mZnNldCwgYm9keSwgcmVwb3J0ZWRTaGFwZSwgaW50ZXJzZWN0Q29udmV4T3B0aW9ucyk7XG5cbiAgICAgICAgaWYgKHRoaXMucmVzdWx0LnNob3VsZFN0b3ApIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH0gLy8gVXBwZXIgdHJpYW5nbGVcblxuXG4gICAgICAgIHNoYXBlLmdldENvbnZleFRyaWFuZ2xlUGlsbGFyKGksIGosIHRydWUpO1xuICAgICAgICBUcmFuc2Zvcm0ucG9pbnRUb1dvcmxkRnJhbWUocG9zaXRpb24sIHF1YXQsIHNoYXBlLnBpbGxhck9mZnNldCwgd29ybGRQaWxsYXJPZmZzZXQpO1xuXG4gICAgICAgIHRoaXMuX2ludGVyc2VjdENvbnZleChzaGFwZS5waWxsYXJDb252ZXgsIHF1YXQsIHdvcmxkUGlsbGFyT2Zmc2V0LCBib2R5LCByZXBvcnRlZFNoYXBlLCBpbnRlcnNlY3RDb252ZXhPcHRpb25zKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBfaW50ZXJzZWN0U3BoZXJlKHNwaGVyZSwgcXVhdCwgcG9zaXRpb24sIGJvZHksIHJlcG9ydGVkU2hhcGUpIHtcbiAgICBjb25zdCBmcm9tID0gdGhpcy5mcm9tO1xuICAgIGNvbnN0IHRvID0gdGhpcy50bztcbiAgICBjb25zdCByID0gc3BoZXJlLnJhZGl1cztcbiAgICBjb25zdCBhID0gKHRvLnggLSBmcm9tLngpICoqIDIgKyAodG8ueSAtIGZyb20ueSkgKiogMiArICh0by56IC0gZnJvbS56KSAqKiAyO1xuICAgIGNvbnN0IGIgPSAyICogKCh0by54IC0gZnJvbS54KSAqIChmcm9tLnggLSBwb3NpdGlvbi54KSArICh0by55IC0gZnJvbS55KSAqIChmcm9tLnkgLSBwb3NpdGlvbi55KSArICh0by56IC0gZnJvbS56KSAqIChmcm9tLnogLSBwb3NpdGlvbi56KSk7XG4gICAgY29uc3QgYyA9IChmcm9tLnggLSBwb3NpdGlvbi54KSAqKiAyICsgKGZyb20ueSAtIHBvc2l0aW9uLnkpICoqIDIgKyAoZnJvbS56IC0gcG9zaXRpb24ueikgKiogMiAtIHIgKiogMjtcbiAgICBjb25zdCBkZWx0YSA9IGIgKiogMiAtIDQgKiBhICogYztcbiAgICBjb25zdCBpbnRlcnNlY3Rpb25Qb2ludCA9IFJheV9pbnRlcnNlY3RTcGhlcmVfaW50ZXJzZWN0aW9uUG9pbnQ7XG4gICAgY29uc3Qgbm9ybWFsID0gUmF5X2ludGVyc2VjdFNwaGVyZV9ub3JtYWw7XG5cbiAgICBpZiAoZGVsdGEgPCAwKSB7XG4gICAgICAvLyBObyBpbnRlcnNlY3Rpb25cbiAgICAgIHJldHVybjtcbiAgICB9IGVsc2UgaWYgKGRlbHRhID09PSAwKSB7XG4gICAgICAvLyBzaW5nbGUgaW50ZXJzZWN0aW9uIHBvaW50XG4gICAgICBmcm9tLmxlcnAodG8sIGRlbHRhLCBpbnRlcnNlY3Rpb25Qb2ludCk7XG4gICAgICBpbnRlcnNlY3Rpb25Qb2ludC52c3ViKHBvc2l0aW9uLCBub3JtYWwpO1xuICAgICAgbm9ybWFsLm5vcm1hbGl6ZSgpO1xuICAgICAgdGhpcy5yZXBvcnRJbnRlcnNlY3Rpb24obm9ybWFsLCBpbnRlcnNlY3Rpb25Qb2ludCwgcmVwb3J0ZWRTaGFwZSwgYm9keSwgLTEpO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCBkMSA9ICgtYiAtIE1hdGguc3FydChkZWx0YSkpIC8gKDIgKiBhKTtcbiAgICAgIGNvbnN0IGQyID0gKC1iICsgTWF0aC5zcXJ0KGRlbHRhKSkgLyAoMiAqIGEpO1xuXG4gICAgICBpZiAoZDEgPj0gMCAmJiBkMSA8PSAxKSB7XG4gICAgICAgIGZyb20ubGVycCh0bywgZDEsIGludGVyc2VjdGlvblBvaW50KTtcbiAgICAgICAgaW50ZXJzZWN0aW9uUG9pbnQudnN1Yihwb3NpdGlvbiwgbm9ybWFsKTtcbiAgICAgICAgbm9ybWFsLm5vcm1hbGl6ZSgpO1xuICAgICAgICB0aGlzLnJlcG9ydEludGVyc2VjdGlvbihub3JtYWwsIGludGVyc2VjdGlvblBvaW50LCByZXBvcnRlZFNoYXBlLCBib2R5LCAtMSk7XG4gICAgICB9XG5cbiAgICAgIGlmICh0aGlzLnJlc3VsdC5zaG91bGRTdG9wKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgaWYgKGQyID49IDAgJiYgZDIgPD0gMSkge1xuICAgICAgICBmcm9tLmxlcnAodG8sIGQyLCBpbnRlcnNlY3Rpb25Qb2ludCk7XG4gICAgICAgIGludGVyc2VjdGlvblBvaW50LnZzdWIocG9zaXRpb24sIG5vcm1hbCk7XG4gICAgICAgIG5vcm1hbC5ub3JtYWxpemUoKTtcbiAgICAgICAgdGhpcy5yZXBvcnRJbnRlcnNlY3Rpb24obm9ybWFsLCBpbnRlcnNlY3Rpb25Qb2ludCwgcmVwb3J0ZWRTaGFwZSwgYm9keSwgLTEpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIF9pbnRlcnNlY3RDb252ZXgoc2hhcGUsIHF1YXQsIHBvc2l0aW9uLCBib2R5LCByZXBvcnRlZFNoYXBlLCBvcHRpb25zKSB7XG4gICAgY29uc3Qgbm9ybWFsID0gaW50ZXJzZWN0Q29udmV4X25vcm1hbDtcbiAgICBjb25zdCB2ZWN0b3IgPSBpbnRlcnNlY3RDb252ZXhfdmVjdG9yO1xuICAgIGNvbnN0IGZhY2VMaXN0ID0gb3B0aW9ucyAmJiBvcHRpb25zLmZhY2VMaXN0IHx8IG51bGw7IC8vIENoZWNraW5nIGZhY2VzXG5cbiAgICBjb25zdCBmYWNlcyA9IHNoYXBlLmZhY2VzO1xuICAgIGNvbnN0IHZlcnRpY2VzID0gc2hhcGUudmVydGljZXM7XG4gICAgY29uc3Qgbm9ybWFscyA9IHNoYXBlLmZhY2VOb3JtYWxzO1xuICAgIGNvbnN0IGRpcmVjdGlvbiA9IHRoaXMuZGlyZWN0aW9uO1xuICAgIGNvbnN0IGZyb20gPSB0aGlzLmZyb207XG4gICAgY29uc3QgdG8gPSB0aGlzLnRvO1xuICAgIGNvbnN0IGZyb21Ub0Rpc3RhbmNlID0gZnJvbS5kaXN0YW5jZVRvKHRvKTtcbiAgICBjb25zdCBOZmFjZXMgPSBmYWNlTGlzdCA/IGZhY2VMaXN0Lmxlbmd0aCA6IGZhY2VzLmxlbmd0aDtcbiAgICBjb25zdCByZXN1bHQgPSB0aGlzLnJlc3VsdDtcblxuICAgIGZvciAobGV0IGogPSAwOyAhcmVzdWx0LnNob3VsZFN0b3AgJiYgaiA8IE5mYWNlczsgaisrKSB7XG4gICAgICBjb25zdCBmaSA9IGZhY2VMaXN0ID8gZmFjZUxpc3Rbal0gOiBqO1xuICAgICAgY29uc3QgZmFjZSA9IGZhY2VzW2ZpXTtcbiAgICAgIGNvbnN0IGZhY2VOb3JtYWwgPSBub3JtYWxzW2ZpXTtcbiAgICAgIGNvbnN0IHEgPSBxdWF0O1xuICAgICAgY29uc3QgeCA9IHBvc2l0aW9uOyAvLyBkZXRlcm1pbmUgaWYgcmF5IGludGVyc2VjdHMgdGhlIHBsYW5lIG9mIHRoZSBmYWNlXG4gICAgICAvLyBub3RlOiB0aGlzIHdvcmtzIHJlZ2FyZGxlc3Mgb2YgdGhlIGRpcmVjdGlvbiBvZiB0aGUgZmFjZSBub3JtYWxcbiAgICAgIC8vIEdldCBwbGFuZSBwb2ludCBpbiB3b3JsZCBjb29yZGluYXRlcy4uLlxuXG4gICAgICB2ZWN0b3IuY29weSh2ZXJ0aWNlc1tmYWNlWzBdXSk7XG4gICAgICBxLnZtdWx0KHZlY3RvciwgdmVjdG9yKTtcbiAgICAgIHZlY3Rvci52YWRkKHgsIHZlY3Rvcik7IC8vIC4uLmJ1dCBtYWtlIGl0IHJlbGF0aXZlIHRvIHRoZSByYXkgZnJvbS4gV2UnbGwgZml4IHRoaXMgbGF0ZXIuXG5cbiAgICAgIHZlY3Rvci52c3ViKGZyb20sIHZlY3Rvcik7IC8vIEdldCBwbGFuZSBub3JtYWxcblxuICAgICAgcS52bXVsdChmYWNlTm9ybWFsLCBub3JtYWwpOyAvLyBJZiB0aGlzIGRvdCBwcm9kdWN0IGlzIG5lZ2F0aXZlLCB3ZSBoYXZlIHNvbWV0aGluZyBpbnRlcmVzdGluZ1xuXG4gICAgICBjb25zdCBkb3QgPSBkaXJlY3Rpb24uZG90KG5vcm1hbCk7IC8vIEJhaWwgb3V0IGlmIHJheSBhbmQgcGxhbmUgYXJlIHBhcmFsbGVsXG5cbiAgICAgIGlmIChNYXRoLmFicyhkb3QpIDwgdGhpcy5wcmVjaXNpb24pIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9IC8vIGNhbGMgZGlzdGFuY2UgdG8gcGxhbmVcblxuXG4gICAgICBjb25zdCBzY2FsYXIgPSBub3JtYWwuZG90KHZlY3RvcikgLyBkb3Q7IC8vIGlmIG5lZ2F0aXZlIGRpc3RhbmNlLCB0aGVuIHBsYW5lIGlzIGJlaGluZCByYXlcblxuICAgICAgaWYgKHNjYWxhciA8IDApIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9IC8vIGlmIChkb3QgPCAwKSB7XG4gICAgICAvLyBJbnRlcnNlY3Rpb24gcG9pbnQgaXMgZnJvbSArIGRpcmVjdGlvbiAqIHNjYWxhclxuXG5cbiAgICAgIGRpcmVjdGlvbi5zY2FsZShzY2FsYXIsIGludGVyc2VjdFBvaW50KTtcbiAgICAgIGludGVyc2VjdFBvaW50LnZhZGQoZnJvbSwgaW50ZXJzZWN0UG9pbnQpOyAvLyBhIGlzIHRoZSBwb2ludCB3ZSBjb21wYXJlIHBvaW50cyBiIGFuZCBjIHdpdGguXG5cbiAgICAgIGEuY29weSh2ZXJ0aWNlc1tmYWNlWzBdXSk7XG4gICAgICBxLnZtdWx0KGEsIGEpO1xuICAgICAgeC52YWRkKGEsIGEpO1xuXG4gICAgICBmb3IgKGxldCBpID0gMTsgIXJlc3VsdC5zaG91bGRTdG9wICYmIGkgPCBmYWNlLmxlbmd0aCAtIDE7IGkrKykge1xuICAgICAgICAvLyBUcmFuc2Zvcm0gMyB2ZXJ0aWNlcyB0byB3b3JsZCBjb29yZHNcbiAgICAgICAgYi5jb3B5KHZlcnRpY2VzW2ZhY2VbaV1dKTtcbiAgICAgICAgYy5jb3B5KHZlcnRpY2VzW2ZhY2VbaSArIDFdXSk7XG4gICAgICAgIHEudm11bHQoYiwgYik7XG4gICAgICAgIHEudm11bHQoYywgYyk7XG4gICAgICAgIHgudmFkZChiLCBiKTtcbiAgICAgICAgeC52YWRkKGMsIGMpO1xuICAgICAgICBjb25zdCBkaXN0YW5jZSA9IGludGVyc2VjdFBvaW50LmRpc3RhbmNlVG8oZnJvbSk7XG5cbiAgICAgICAgaWYgKCEoUmF5LnBvaW50SW5UcmlhbmdsZShpbnRlcnNlY3RQb2ludCwgYSwgYiwgYykgfHwgUmF5LnBvaW50SW5UcmlhbmdsZShpbnRlcnNlY3RQb2ludCwgYiwgYSwgYykpIHx8IGRpc3RhbmNlID4gZnJvbVRvRGlzdGFuY2UpIHtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMucmVwb3J0SW50ZXJzZWN0aW9uKG5vcm1hbCwgaW50ZXJzZWN0UG9pbnQsIHJlcG9ydGVkU2hhcGUsIGJvZHksIGZpKTtcbiAgICAgIH0gLy8gfVxuXG4gICAgfVxuICB9XG4gIC8qKlxuICAgKiBAdG9kbyBPcHRpbWl6ZSBieSB0cmFuc2Zvcm1pbmcgdGhlIHdvcmxkIHRvIGxvY2FsIHNwYWNlIGZpcnN0LlxuICAgKiBAdG9kbyBVc2UgT2N0cmVlIGxvb2t1cFxuICAgKi9cblxuXG4gIF9pbnRlcnNlY3RUcmltZXNoKG1lc2gsIHF1YXQsIHBvc2l0aW9uLCBib2R5LCByZXBvcnRlZFNoYXBlLCBvcHRpb25zKSB7XG4gICAgY29uc3Qgbm9ybWFsID0gaW50ZXJzZWN0VHJpbWVzaF9ub3JtYWw7XG4gICAgY29uc3QgdHJpYW5nbGVzID0gaW50ZXJzZWN0VHJpbWVzaF90cmlhbmdsZXM7XG4gICAgY29uc3QgdHJlZVRyYW5zZm9ybSA9IGludGVyc2VjdFRyaW1lc2hfdHJlZVRyYW5zZm9ybTtcbiAgICBjb25zdCB2ZWN0b3IgPSBpbnRlcnNlY3RDb252ZXhfdmVjdG9yO1xuICAgIGNvbnN0IGxvY2FsRGlyZWN0aW9uID0gaW50ZXJzZWN0VHJpbWVzaF9sb2NhbERpcmVjdGlvbjtcbiAgICBjb25zdCBsb2NhbEZyb20gPSBpbnRlcnNlY3RUcmltZXNoX2xvY2FsRnJvbTtcbiAgICBjb25zdCBsb2NhbFRvID0gaW50ZXJzZWN0VHJpbWVzaF9sb2NhbFRvO1xuICAgIGNvbnN0IHdvcmxkSW50ZXJzZWN0UG9pbnQgPSBpbnRlcnNlY3RUcmltZXNoX3dvcmxkSW50ZXJzZWN0UG9pbnQ7XG4gICAgY29uc3Qgd29ybGROb3JtYWwgPSBpbnRlcnNlY3RUcmltZXNoX3dvcmxkTm9ybWFsOyAvLyBDaGVja2luZyBmYWNlc1xuXG4gICAgY29uc3QgaW5kaWNlcyA9IG1lc2guaW5kaWNlcztcbiAgICBtZXNoLnZlcnRpY2VzOyAvLyBjb25zdCBub3JtYWxzID0gbWVzaC5mYWNlTm9ybWFsc1xuXG4gICAgY29uc3QgZnJvbSA9IHRoaXMuZnJvbTtcbiAgICBjb25zdCB0byA9IHRoaXMudG87XG4gICAgY29uc3QgZGlyZWN0aW9uID0gdGhpcy5kaXJlY3Rpb247XG4gICAgdHJlZVRyYW5zZm9ybS5wb3NpdGlvbi5jb3B5KHBvc2l0aW9uKTtcbiAgICB0cmVlVHJhbnNmb3JtLnF1YXRlcm5pb24uY29weShxdWF0KTsgLy8gVHJhbnNmb3JtIHJheSB0byBsb2NhbCBzcGFjZSFcblxuICAgIFRyYW5zZm9ybS52ZWN0b3JUb0xvY2FsRnJhbWUocG9zaXRpb24sIHF1YXQsIGRpcmVjdGlvbiwgbG9jYWxEaXJlY3Rpb24pO1xuICAgIFRyYW5zZm9ybS5wb2ludFRvTG9jYWxGcmFtZShwb3NpdGlvbiwgcXVhdCwgZnJvbSwgbG9jYWxGcm9tKTtcbiAgICBUcmFuc2Zvcm0ucG9pbnRUb0xvY2FsRnJhbWUocG9zaXRpb24sIHF1YXQsIHRvLCBsb2NhbFRvKTtcbiAgICBsb2NhbFRvLnggKj0gbWVzaC5zY2FsZS54O1xuICAgIGxvY2FsVG8ueSAqPSBtZXNoLnNjYWxlLnk7XG4gICAgbG9jYWxUby56ICo9IG1lc2guc2NhbGUuejtcbiAgICBsb2NhbEZyb20ueCAqPSBtZXNoLnNjYWxlLng7XG4gICAgbG9jYWxGcm9tLnkgKj0gbWVzaC5zY2FsZS55O1xuICAgIGxvY2FsRnJvbS56ICo9IG1lc2guc2NhbGUuejtcbiAgICBsb2NhbFRvLnZzdWIobG9jYWxGcm9tLCBsb2NhbERpcmVjdGlvbik7XG4gICAgbG9jYWxEaXJlY3Rpb24ubm9ybWFsaXplKCk7XG4gICAgY29uc3QgZnJvbVRvRGlzdGFuY2VTcXVhcmVkID0gbG9jYWxGcm9tLmRpc3RhbmNlU3F1YXJlZChsb2NhbFRvKTtcbiAgICBtZXNoLnRyZWUucmF5UXVlcnkodGhpcywgdHJlZVRyYW5zZm9ybSwgdHJpYW5nbGVzKTtcblxuICAgIGZvciAobGV0IGkgPSAwLCBOID0gdHJpYW5nbGVzLmxlbmd0aDsgIXRoaXMucmVzdWx0LnNob3VsZFN0b3AgJiYgaSAhPT0gTjsgaSsrKSB7XG4gICAgICBjb25zdCB0cmlhbmdsZXNJbmRleCA9IHRyaWFuZ2xlc1tpXTtcbiAgICAgIG1lc2guZ2V0Tm9ybWFsKHRyaWFuZ2xlc0luZGV4LCBub3JtYWwpOyAvLyBkZXRlcm1pbmUgaWYgcmF5IGludGVyc2VjdHMgdGhlIHBsYW5lIG9mIHRoZSBmYWNlXG4gICAgICAvLyBub3RlOiB0aGlzIHdvcmtzIHJlZ2FyZGxlc3Mgb2YgdGhlIGRpcmVjdGlvbiBvZiB0aGUgZmFjZSBub3JtYWxcbiAgICAgIC8vIEdldCBwbGFuZSBwb2ludCBpbiB3b3JsZCBjb29yZGluYXRlcy4uLlxuXG4gICAgICBtZXNoLmdldFZlcnRleChpbmRpY2VzW3RyaWFuZ2xlc0luZGV4ICogM10sIGEpOyAvLyAuLi5idXQgbWFrZSBpdCByZWxhdGl2ZSB0byB0aGUgcmF5IGZyb20uIFdlJ2xsIGZpeCB0aGlzIGxhdGVyLlxuXG4gICAgICBhLnZzdWIobG9jYWxGcm9tLCB2ZWN0b3IpOyAvLyBJZiB0aGlzIGRvdCBwcm9kdWN0IGlzIG5lZ2F0aXZlLCB3ZSBoYXZlIHNvbWV0aGluZyBpbnRlcmVzdGluZ1xuXG4gICAgICBjb25zdCBkb3QgPSBsb2NhbERpcmVjdGlvbi5kb3Qobm9ybWFsKTsgLy8gQmFpbCBvdXQgaWYgcmF5IGFuZCBwbGFuZSBhcmUgcGFyYWxsZWxcbiAgICAgIC8vIGlmIChNYXRoLmFicyggZG90ICkgPCB0aGlzLnByZWNpc2lvbil7XG4gICAgICAvLyAgICAgY29udGludWU7XG4gICAgICAvLyB9XG4gICAgICAvLyBjYWxjIGRpc3RhbmNlIHRvIHBsYW5lXG5cbiAgICAgIGNvbnN0IHNjYWxhciA9IG5vcm1hbC5kb3QodmVjdG9yKSAvIGRvdDsgLy8gaWYgbmVnYXRpdmUgZGlzdGFuY2UsIHRoZW4gcGxhbmUgaXMgYmVoaW5kIHJheVxuXG4gICAgICBpZiAoc2NhbGFyIDwgMCkge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH0gLy8gSW50ZXJzZWN0aW9uIHBvaW50IGlzIGZyb20gKyBkaXJlY3Rpb24gKiBzY2FsYXJcblxuXG4gICAgICBsb2NhbERpcmVjdGlvbi5zY2FsZShzY2FsYXIsIGludGVyc2VjdFBvaW50KTtcbiAgICAgIGludGVyc2VjdFBvaW50LnZhZGQobG9jYWxGcm9tLCBpbnRlcnNlY3RQb2ludCk7IC8vIEdldCB0cmlhbmdsZSB2ZXJ0aWNlc1xuXG4gICAgICBtZXNoLmdldFZlcnRleChpbmRpY2VzW3RyaWFuZ2xlc0luZGV4ICogMyArIDFdLCBiKTtcbiAgICAgIG1lc2guZ2V0VmVydGV4KGluZGljZXNbdHJpYW5nbGVzSW5kZXggKiAzICsgMl0sIGMpO1xuICAgICAgY29uc3Qgc3F1YXJlZERpc3RhbmNlID0gaW50ZXJzZWN0UG9pbnQuZGlzdGFuY2VTcXVhcmVkKGxvY2FsRnJvbSk7XG5cbiAgICAgIGlmICghKFJheS5wb2ludEluVHJpYW5nbGUoaW50ZXJzZWN0UG9pbnQsIGIsIGEsIGMpIHx8IFJheS5wb2ludEluVHJpYW5nbGUoaW50ZXJzZWN0UG9pbnQsIGEsIGIsIGMpKSB8fCBzcXVhcmVkRGlzdGFuY2UgPiBmcm9tVG9EaXN0YW5jZVNxdWFyZWQpIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9IC8vIHRyYW5zZm9ybSBpbnRlcnNlY3Rwb2ludCBhbmQgbm9ybWFsIHRvIHdvcmxkXG5cblxuICAgICAgVHJhbnNmb3JtLnZlY3RvclRvV29ybGRGcmFtZShxdWF0LCBub3JtYWwsIHdvcmxkTm9ybWFsKTtcbiAgICAgIFRyYW5zZm9ybS5wb2ludFRvV29ybGRGcmFtZShwb3NpdGlvbiwgcXVhdCwgaW50ZXJzZWN0UG9pbnQsIHdvcmxkSW50ZXJzZWN0UG9pbnQpO1xuICAgICAgdGhpcy5yZXBvcnRJbnRlcnNlY3Rpb24od29ybGROb3JtYWwsIHdvcmxkSW50ZXJzZWN0UG9pbnQsIHJlcG9ydGVkU2hhcGUsIGJvZHksIHRyaWFuZ2xlc0luZGV4KTtcbiAgICB9XG5cbiAgICB0cmlhbmdsZXMubGVuZ3RoID0gMDtcbiAgfVxuICAvKipcbiAgICogQHJldHVybiBUcnVlIGlmIHRoZSBpbnRlcnNlY3Rpb25zIHNob3VsZCBjb250aW51ZVxuICAgKi9cblxuXG4gIHJlcG9ydEludGVyc2VjdGlvbihub3JtYWwsIGhpdFBvaW50V29ybGQsIHNoYXBlLCBib2R5LCBoaXRGYWNlSW5kZXgpIHtcbiAgICBjb25zdCBmcm9tID0gdGhpcy5mcm9tO1xuICAgIGNvbnN0IHRvID0gdGhpcy50bztcbiAgICBjb25zdCBkaXN0YW5jZSA9IGZyb20uZGlzdGFuY2VUbyhoaXRQb2ludFdvcmxkKTtcbiAgICBjb25zdCByZXN1bHQgPSB0aGlzLnJlc3VsdDsgLy8gU2tpcCBiYWNrIGZhY2VzP1xuXG4gICAgaWYgKHRoaXMuc2tpcEJhY2tmYWNlcyAmJiBub3JtYWwuZG90KHRoaXMuZGlyZWN0aW9uKSA+IDApIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICByZXN1bHQuaGl0RmFjZUluZGV4ID0gdHlwZW9mIGhpdEZhY2VJbmRleCAhPT0gJ3VuZGVmaW5lZCcgPyBoaXRGYWNlSW5kZXggOiAtMTtcblxuICAgIHN3aXRjaCAodGhpcy5tb2RlKSB7XG4gICAgICBjYXNlIFJheS5BTEw6XG4gICAgICAgIHRoaXMuaGFzSGl0ID0gdHJ1ZTtcbiAgICAgICAgcmVzdWx0LnNldChmcm9tLCB0bywgbm9ybWFsLCBoaXRQb2ludFdvcmxkLCBzaGFwZSwgYm9keSwgZGlzdGFuY2UpO1xuICAgICAgICByZXN1bHQuaGFzSGl0ID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5jYWxsYmFjayhyZXN1bHQpO1xuICAgICAgICBicmVhaztcblxuICAgICAgY2FzZSBSYXkuQ0xPU0VTVDpcbiAgICAgICAgLy8gU3RvcmUgaWYgY2xvc2VyIHRoYW4gY3VycmVudCBjbG9zZXN0XG4gICAgICAgIGlmIChkaXN0YW5jZSA8IHJlc3VsdC5kaXN0YW5jZSB8fCAhcmVzdWx0Lmhhc0hpdCkge1xuICAgICAgICAgIHRoaXMuaGFzSGl0ID0gdHJ1ZTtcbiAgICAgICAgICByZXN1bHQuaGFzSGl0ID0gdHJ1ZTtcbiAgICAgICAgICByZXN1bHQuc2V0KGZyb20sIHRvLCBub3JtYWwsIGhpdFBvaW50V29ybGQsIHNoYXBlLCBib2R5LCBkaXN0YW5jZSk7XG4gICAgICAgIH1cblxuICAgICAgICBicmVhaztcblxuICAgICAgY2FzZSBSYXkuQU5ZOlxuICAgICAgICAvLyBSZXBvcnQgYW5kIHN0b3AuXG4gICAgICAgIHRoaXMuaGFzSGl0ID0gdHJ1ZTtcbiAgICAgICAgcmVzdWx0Lmhhc0hpdCA9IHRydWU7XG4gICAgICAgIHJlc3VsdC5zZXQoZnJvbSwgdG8sIG5vcm1hbCwgaGl0UG9pbnRXb3JsZCwgc2hhcGUsIGJvZHksIGRpc3RhbmNlKTtcbiAgICAgICAgcmVzdWx0LnNob3VsZFN0b3AgPSB0cnVlO1xuICAgICAgICBicmVhaztcbiAgICB9XG4gIH1cbiAgLyoqXG4gICAqIEFzIHBlciBcIkJhcnljZW50cmljIFRlY2huaXF1ZVwiIGFzIG5hbWVkXG4gICAqIHtAbGluayBodHRwczovL3d3dy5ibGFja3Bhd24uY29tL3RleHRzL3BvaW50aW5wb2x5L2RlZmF1bHQuaHRtbCBoZXJlfSBidXQgd2l0aG91dCB0aGUgZGl2aXNpb25cbiAgICovXG5cblxuICBzdGF0aWMgcG9pbnRJblRyaWFuZ2xlKHAsIGEsIGIsIGMpIHtcbiAgICBjLnZzdWIoYSwgdjApO1xuICAgIGIudnN1YihhLCB2MSk7XG4gICAgcC52c3ViKGEsIHYyKTtcbiAgICBjb25zdCBkb3QwMCA9IHYwLmRvdCh2MCk7XG4gICAgY29uc3QgZG90MDEgPSB2MC5kb3QodjEpO1xuICAgIGNvbnN0IGRvdDAyID0gdjAuZG90KHYyKTtcbiAgICBjb25zdCBkb3QxMSA9IHYxLmRvdCh2MSk7XG4gICAgY29uc3QgZG90MTIgPSB2MS5kb3QodjIpO1xuICAgIGxldCB1O1xuICAgIGxldCB2O1xuICAgIHJldHVybiAodSA9IGRvdDExICogZG90MDIgLSBkb3QwMSAqIGRvdDEyKSA+PSAwICYmICh2ID0gZG90MDAgKiBkb3QxMiAtIGRvdDAxICogZG90MDIpID49IDAgJiYgdSArIHYgPCBkb3QwMCAqIGRvdDExIC0gZG90MDEgKiBkb3QwMTtcbiAgfVxuXG59XG5SYXkuQ0xPU0VTVCA9IFJBWV9NT0RFUy5DTE9TRVNUO1xuUmF5LkFOWSA9IFJBWV9NT0RFUy5BTlk7XG5SYXkuQUxMID0gUkFZX01PREVTLkFMTDtcbmNvbnN0IHRtcEFBQkIkMSA9IG5ldyBBQUJCKCk7XG5jb25zdCB0bXBBcnJheSA9IFtdO1xuY29uc3QgdjEgPSBuZXcgVmVjMygpO1xuY29uc3QgdjIgPSBuZXcgVmVjMygpO1xuY29uc3QgaW50ZXJzZWN0Qm9keV94aSA9IG5ldyBWZWMzKCk7XG5jb25zdCBpbnRlcnNlY3RCb2R5X3FpID0gbmV3IFF1YXRlcm5pb24oKTtcbmNvbnN0IGludGVyc2VjdFBvaW50ID0gbmV3IFZlYzMoKTtcbmNvbnN0IGEgPSBuZXcgVmVjMygpO1xuY29uc3QgYiA9IG5ldyBWZWMzKCk7XG5jb25zdCBjID0gbmV3IFZlYzMoKTtcbmNvbnN0IGludGVyc2VjdENvbnZleE9wdGlvbnMgPSB7XG4gIGZhY2VMaXN0OiBbMF1cbn07XG5jb25zdCB3b3JsZFBpbGxhck9mZnNldCA9IG5ldyBWZWMzKCk7XG5jb25zdCBpbnRlcnNlY3RIZWlnaHRmaWVsZF9sb2NhbFJheSA9IG5ldyBSYXkoKTtcbmNvbnN0IGludGVyc2VjdEhlaWdodGZpZWxkX2luZGV4ID0gW107XG5jb25zdCBSYXlfaW50ZXJzZWN0U3BoZXJlX2ludGVyc2VjdGlvblBvaW50ID0gbmV3IFZlYzMoKTtcbmNvbnN0IFJheV9pbnRlcnNlY3RTcGhlcmVfbm9ybWFsID0gbmV3IFZlYzMoKTtcbmNvbnN0IGludGVyc2VjdENvbnZleF9ub3JtYWwgPSBuZXcgVmVjMygpO1xuY29uc3QgaW50ZXJzZWN0Q29udmV4X3ZlY3RvciA9IG5ldyBWZWMzKCk7XG5jb25zdCBpbnRlcnNlY3RUcmltZXNoX25vcm1hbCA9IG5ldyBWZWMzKCk7XG5jb25zdCBpbnRlcnNlY3RUcmltZXNoX2xvY2FsRGlyZWN0aW9uID0gbmV3IFZlYzMoKTtcbmNvbnN0IGludGVyc2VjdFRyaW1lc2hfbG9jYWxGcm9tID0gbmV3IFZlYzMoKTtcbmNvbnN0IGludGVyc2VjdFRyaW1lc2hfbG9jYWxUbyA9IG5ldyBWZWMzKCk7XG5jb25zdCBpbnRlcnNlY3RUcmltZXNoX3dvcmxkTm9ybWFsID0gbmV3IFZlYzMoKTtcbmNvbnN0IGludGVyc2VjdFRyaW1lc2hfd29ybGRJbnRlcnNlY3RQb2ludCA9IG5ldyBWZWMzKCk7XG5uZXcgQUFCQigpO1xuY29uc3QgaW50ZXJzZWN0VHJpbWVzaF90cmlhbmdsZXMgPSBbXTtcbmNvbnN0IGludGVyc2VjdFRyaW1lc2hfdHJlZVRyYW5zZm9ybSA9IG5ldyBUcmFuc2Zvcm0oKTtcbmNvbnN0IHYwID0gbmV3IFZlYzMoKTtcbmNvbnN0IGludGVyc2VjdCA9IG5ldyBWZWMzKCk7XG5cbmZ1bmN0aW9uIGRpc3RhbmNlRnJvbUludGVyc2VjdGlvbihmcm9tLCBkaXJlY3Rpb24sIHBvc2l0aW9uKSB7XG4gIC8vIHYwIGlzIHZlY3RvciBmcm9tIGZyb20gdG8gcG9zaXRpb25cbiAgcG9zaXRpb24udnN1Yihmcm9tLCB2MCk7XG4gIGNvbnN0IGRvdCA9IHYwLmRvdChkaXJlY3Rpb24pOyAvLyBpbnRlcnNlY3QgPSBkaXJlY3Rpb24qZG90ICsgZnJvbVxuXG4gIGRpcmVjdGlvbi5zY2FsZShkb3QsIGludGVyc2VjdCk7XG4gIGludGVyc2VjdC52YWRkKGZyb20sIGludGVyc2VjdCk7XG4gIGNvbnN0IGRpc3RhbmNlID0gcG9zaXRpb24uZGlzdGFuY2VUbyhpbnRlcnNlY3QpO1xuICByZXR1cm4gZGlzdGFuY2U7XG59XG5cbi8qKlxuICogU3dlZXAgYW5kIHBydW5lIGJyb2FkcGhhc2UgYWxvbmcgb25lIGF4aXMuXG4gKi9cbmNsYXNzIFNBUEJyb2FkcGhhc2UgZXh0ZW5kcyBCcm9hZHBoYXNlIHtcbiAgLyoqXG4gICAqIExpc3Qgb2YgYm9kaWVzIGN1cnJlbnRseSBpbiB0aGUgYnJvYWRwaGFzZS5cbiAgICovXG5cbiAgLyoqXG4gICAqIFRoZSB3b3JsZCB0byBzZWFyY2ggaW4uXG4gICAqL1xuXG4gIC8qKlxuICAgKiBBeGlzIHRvIHNvcnQgdGhlIGJvZGllcyBhbG9uZy5cbiAgICogU2V0IHRvIDAgZm9yIHggYXhpcywgYW5kIDEgZm9yIHkgYXhpcy5cbiAgICogRm9yIGJlc3QgcGVyZm9ybWFuY2UsIHBpY2sgdGhlIGF4aXMgd2hlcmUgYm9kaWVzIGFyZSBtb3N0IGRpc3RyaWJ1dGVkLlxuICAgKi9cblxuICAvKipcbiAgICogQ2hlY2sgaWYgdGhlIGJvdW5kcyBvZiB0d28gYm9kaWVzIG92ZXJsYXAsIGFsb25nIHRoZSBnaXZlbiBTQVAgYXhpcy5cbiAgICovXG4gIHN0YXRpYyBjaGVja0JvdW5kcyhiaSwgYmosIGF4aXNJbmRleCkge1xuICAgIGxldCBiaVBvcztcbiAgICBsZXQgYmpQb3M7XG5cbiAgICBpZiAoYXhpc0luZGV4ID09PSAwKSB7XG4gICAgICBiaVBvcyA9IGJpLnBvc2l0aW9uLng7XG4gICAgICBialBvcyA9IGJqLnBvc2l0aW9uLng7XG4gICAgfSBlbHNlIGlmIChheGlzSW5kZXggPT09IDEpIHtcbiAgICAgIGJpUG9zID0gYmkucG9zaXRpb24ueTtcbiAgICAgIGJqUG9zID0gYmoucG9zaXRpb24ueTtcbiAgICB9IGVsc2UgaWYgKGF4aXNJbmRleCA9PT0gMikge1xuICAgICAgYmlQb3MgPSBiaS5wb3NpdGlvbi56O1xuICAgICAgYmpQb3MgPSBiai5wb3NpdGlvbi56O1xuICAgIH1cblxuICAgIGNvbnN0IHJpID0gYmkuYm91bmRpbmdSYWRpdXMsXG4gICAgICAgICAgcmogPSBiai5ib3VuZGluZ1JhZGl1cyxcbiAgICAgICAgICBib3VuZEEyID0gYmlQb3MgKyByaSxcbiAgICAgICAgICBib3VuZEIxID0gYmpQb3MgLSByajtcbiAgICByZXR1cm4gYm91bmRCMSA8IGJvdW5kQTI7XG4gIH0gLy8gTm90ZTogdGhlc2UgYXJlIGlkZW50aWNhbCwgc2F2ZSBmb3IgeC95L3ogbG93ZXJib3VuZFxuXG4gIC8qKlxuICAgKiBpbnNlcnRpb25Tb3J0WFxuICAgKi9cblxuXG4gIHN0YXRpYyBpbnNlcnRpb25Tb3J0WChhKSB7XG4gICAgZm9yIChsZXQgaSA9IDEsIGwgPSBhLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgY29uc3QgdiA9IGFbaV07XG4gICAgICBsZXQgajtcblxuICAgICAgZm9yIChqID0gaSAtIDE7IGogPj0gMDsgai0tKSB7XG4gICAgICAgIGlmIChhW2pdLmFhYmIubG93ZXJCb3VuZC54IDw9IHYuYWFiYi5sb3dlckJvdW5kLngpIHtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuXG4gICAgICAgIGFbaiArIDFdID0gYVtqXTtcbiAgICAgIH1cblxuICAgICAgYVtqICsgMV0gPSB2O1xuICAgIH1cblxuICAgIHJldHVybiBhO1xuICB9XG4gIC8qKlxuICAgKiBpbnNlcnRpb25Tb3J0WVxuICAgKi9cblxuXG4gIHN0YXRpYyBpbnNlcnRpb25Tb3J0WShhKSB7XG4gICAgZm9yIChsZXQgaSA9IDEsIGwgPSBhLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgY29uc3QgdiA9IGFbaV07XG4gICAgICBsZXQgajtcblxuICAgICAgZm9yIChqID0gaSAtIDE7IGogPj0gMDsgai0tKSB7XG4gICAgICAgIGlmIChhW2pdLmFhYmIubG93ZXJCb3VuZC55IDw9IHYuYWFiYi5sb3dlckJvdW5kLnkpIHtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuXG4gICAgICAgIGFbaiArIDFdID0gYVtqXTtcbiAgICAgIH1cblxuICAgICAgYVtqICsgMV0gPSB2O1xuICAgIH1cblxuICAgIHJldHVybiBhO1xuICB9XG4gIC8qKlxuICAgKiBpbnNlcnRpb25Tb3J0WlxuICAgKi9cblxuXG4gIHN0YXRpYyBpbnNlcnRpb25Tb3J0WihhKSB7XG4gICAgZm9yIChsZXQgaSA9IDEsIGwgPSBhLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgY29uc3QgdiA9IGFbaV07XG4gICAgICBsZXQgajtcblxuICAgICAgZm9yIChqID0gaSAtIDE7IGogPj0gMDsgai0tKSB7XG4gICAgICAgIGlmIChhW2pdLmFhYmIubG93ZXJCb3VuZC56IDw9IHYuYWFiYi5sb3dlckJvdW5kLnopIHtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuXG4gICAgICAgIGFbaiArIDFdID0gYVtqXTtcbiAgICAgIH1cblxuICAgICAgYVtqICsgMV0gPSB2O1xuICAgIH1cblxuICAgIHJldHVybiBhO1xuICB9XG5cbiAgY29uc3RydWN0b3Iod29ybGQpIHtcbiAgICBzdXBlcigpO1xuICAgIHRoaXMuYXhpc0xpc3QgPSB2b2lkIDA7XG4gICAgdGhpcy53b3JsZCA9IHZvaWQgMDtcbiAgICB0aGlzLmF4aXNJbmRleCA9IHZvaWQgMDtcbiAgICB0aGlzLl9hZGRCb2R5SGFuZGxlciA9IHZvaWQgMDtcbiAgICB0aGlzLl9yZW1vdmVCb2R5SGFuZGxlciA9IHZvaWQgMDtcbiAgICB0aGlzLmF4aXNMaXN0ID0gW107XG4gICAgdGhpcy53b3JsZCA9IG51bGw7XG4gICAgdGhpcy5heGlzSW5kZXggPSAwO1xuICAgIGNvbnN0IGF4aXNMaXN0ID0gdGhpcy5heGlzTGlzdDtcblxuICAgIHRoaXMuX2FkZEJvZHlIYW5kbGVyID0gZXZlbnQgPT4ge1xuICAgICAgYXhpc0xpc3QucHVzaChldmVudC5ib2R5KTtcbiAgICB9O1xuXG4gICAgdGhpcy5fcmVtb3ZlQm9keUhhbmRsZXIgPSBldmVudCA9PiB7XG4gICAgICBjb25zdCBpZHggPSBheGlzTGlzdC5pbmRleE9mKGV2ZW50LmJvZHkpO1xuXG4gICAgICBpZiAoaWR4ICE9PSAtMSkge1xuICAgICAgICBheGlzTGlzdC5zcGxpY2UoaWR4LCAxKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgaWYgKHdvcmxkKSB7XG4gICAgICB0aGlzLnNldFdvcmxkKHdvcmxkKTtcbiAgICB9XG4gIH1cbiAgLyoqXG4gICAqIENoYW5nZSB0aGUgd29ybGRcbiAgICovXG5cblxuICBzZXRXb3JsZCh3b3JsZCkge1xuICAgIC8vIENsZWFyIHRoZSBvbGQgYXhpcyBhcnJheVxuICAgIHRoaXMuYXhpc0xpc3QubGVuZ3RoID0gMDsgLy8gQWRkIGFsbCBib2RpZXMgZnJvbSB0aGUgbmV3IHdvcmxkXG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHdvcmxkLmJvZGllcy5sZW5ndGg7IGkrKykge1xuICAgICAgdGhpcy5heGlzTGlzdC5wdXNoKHdvcmxkLmJvZGllc1tpXSk7XG4gICAgfSAvLyBSZW1vdmUgb2xkIGhhbmRsZXJzLCBpZiBhbnlcblxuXG4gICAgd29ybGQucmVtb3ZlRXZlbnRMaXN0ZW5lcignYWRkQm9keScsIHRoaXMuX2FkZEJvZHlIYW5kbGVyKTtcbiAgICB3b3JsZC5yZW1vdmVFdmVudExpc3RlbmVyKCdyZW1vdmVCb2R5JywgdGhpcy5fcmVtb3ZlQm9keUhhbmRsZXIpOyAvLyBBZGQgaGFuZGxlcnMgdG8gdXBkYXRlIHRoZSBsaXN0IG9mIGJvZGllcy5cblxuICAgIHdvcmxkLmFkZEV2ZW50TGlzdGVuZXIoJ2FkZEJvZHknLCB0aGlzLl9hZGRCb2R5SGFuZGxlcik7XG4gICAgd29ybGQuYWRkRXZlbnRMaXN0ZW5lcigncmVtb3ZlQm9keScsIHRoaXMuX3JlbW92ZUJvZHlIYW5kbGVyKTtcbiAgICB0aGlzLndvcmxkID0gd29ybGQ7XG4gICAgdGhpcy5kaXJ0eSA9IHRydWU7XG4gIH1cbiAgLyoqXG4gICAqIENvbGxlY3QgYWxsIGNvbGxpc2lvbiBwYWlyc1xuICAgKi9cblxuXG4gIGNvbGxpc2lvblBhaXJzKHdvcmxkLCBwMSwgcDIpIHtcbiAgICBjb25zdCBib2RpZXMgPSB0aGlzLmF4aXNMaXN0O1xuICAgIGNvbnN0IE4gPSBib2RpZXMubGVuZ3RoO1xuICAgIGNvbnN0IGF4aXNJbmRleCA9IHRoaXMuYXhpc0luZGV4O1xuICAgIGxldCBpO1xuICAgIGxldCBqO1xuXG4gICAgaWYgKHRoaXMuZGlydHkpIHtcbiAgICAgIHRoaXMuc29ydExpc3QoKTtcbiAgICAgIHRoaXMuZGlydHkgPSBmYWxzZTtcbiAgICB9IC8vIExvb2sgdGhyb3VnaCB0aGUgbGlzdFxuXG5cbiAgICBmb3IgKGkgPSAwOyBpICE9PSBOOyBpKyspIHtcbiAgICAgIGNvbnN0IGJpID0gYm9kaWVzW2ldO1xuXG4gICAgICBmb3IgKGogPSBpICsgMTsgaiA8IE47IGorKykge1xuICAgICAgICBjb25zdCBiaiA9IGJvZGllc1tqXTtcblxuICAgICAgICBpZiAoIXRoaXMubmVlZEJyb2FkcGhhc2VDb2xsaXNpb24oYmksIGJqKSkge1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCFTQVBCcm9hZHBoYXNlLmNoZWNrQm91bmRzKGJpLCBiaiwgYXhpc0luZGV4KSkge1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5pbnRlcnNlY3Rpb25UZXN0KGJpLCBiaiwgcDEsIHAyKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBzb3J0TGlzdCgpIHtcbiAgICBjb25zdCBheGlzTGlzdCA9IHRoaXMuYXhpc0xpc3Q7XG4gICAgY29uc3QgYXhpc0luZGV4ID0gdGhpcy5heGlzSW5kZXg7XG4gICAgY29uc3QgTiA9IGF4aXNMaXN0Lmxlbmd0aDsgLy8gVXBkYXRlIEFBQkJzXG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSAhPT0gTjsgaSsrKSB7XG4gICAgICBjb25zdCBiaSA9IGF4aXNMaXN0W2ldO1xuXG4gICAgICBpZiAoYmkuYWFiYk5lZWRzVXBkYXRlKSB7XG4gICAgICAgIGJpLnVwZGF0ZUFBQkIoKTtcbiAgICAgIH1cbiAgICB9IC8vIFNvcnQgdGhlIGxpc3RcblxuXG4gICAgaWYgKGF4aXNJbmRleCA9PT0gMCkge1xuICAgICAgU0FQQnJvYWRwaGFzZS5pbnNlcnRpb25Tb3J0WChheGlzTGlzdCk7XG4gICAgfSBlbHNlIGlmIChheGlzSW5kZXggPT09IDEpIHtcbiAgICAgIFNBUEJyb2FkcGhhc2UuaW5zZXJ0aW9uU29ydFkoYXhpc0xpc3QpO1xuICAgIH0gZWxzZSBpZiAoYXhpc0luZGV4ID09PSAyKSB7XG4gICAgICBTQVBCcm9hZHBoYXNlLmluc2VydGlvblNvcnRaKGF4aXNMaXN0KTtcbiAgICB9XG4gIH1cbiAgLyoqXG4gICAqIENvbXB1dGVzIHRoZSB2YXJpYW5jZSBvZiB0aGUgYm9keSBwb3NpdGlvbnMgYW5kIGVzdGltYXRlcyB0aGUgYmVzdCBheGlzIHRvIHVzZS5cbiAgICogV2lsbCBhdXRvbWF0aWNhbGx5IHNldCBwcm9wZXJ0eSBgYXhpc0luZGV4YC5cbiAgICovXG5cblxuICBhdXRvRGV0ZWN0QXhpcygpIHtcbiAgICBsZXQgc3VtWCA9IDA7XG4gICAgbGV0IHN1bVgyID0gMDtcbiAgICBsZXQgc3VtWSA9IDA7XG4gICAgbGV0IHN1bVkyID0gMDtcbiAgICBsZXQgc3VtWiA9IDA7XG4gICAgbGV0IHN1bVoyID0gMDtcbiAgICBjb25zdCBib2RpZXMgPSB0aGlzLmF4aXNMaXN0O1xuICAgIGNvbnN0IE4gPSBib2RpZXMubGVuZ3RoO1xuICAgIGNvbnN0IGludk4gPSAxIC8gTjtcblxuICAgIGZvciAobGV0IGkgPSAwOyBpICE9PSBOOyBpKyspIHtcbiAgICAgIGNvbnN0IGIgPSBib2RpZXNbaV07XG4gICAgICBjb25zdCBjZW50ZXJYID0gYi5wb3NpdGlvbi54O1xuICAgICAgc3VtWCArPSBjZW50ZXJYO1xuICAgICAgc3VtWDIgKz0gY2VudGVyWCAqIGNlbnRlclg7XG4gICAgICBjb25zdCBjZW50ZXJZID0gYi5wb3NpdGlvbi55O1xuICAgICAgc3VtWSArPSBjZW50ZXJZO1xuICAgICAgc3VtWTIgKz0gY2VudGVyWSAqIGNlbnRlclk7XG4gICAgICBjb25zdCBjZW50ZXJaID0gYi5wb3NpdGlvbi56O1xuICAgICAgc3VtWiArPSBjZW50ZXJaO1xuICAgICAgc3VtWjIgKz0gY2VudGVyWiAqIGNlbnRlclo7XG4gICAgfVxuXG4gICAgY29uc3QgdmFyaWFuY2VYID0gc3VtWDIgLSBzdW1YICogc3VtWCAqIGludk47XG4gICAgY29uc3QgdmFyaWFuY2VZID0gc3VtWTIgLSBzdW1ZICogc3VtWSAqIGludk47XG4gICAgY29uc3QgdmFyaWFuY2VaID0gc3VtWjIgLSBzdW1aICogc3VtWiAqIGludk47XG5cbiAgICBpZiAodmFyaWFuY2VYID4gdmFyaWFuY2VZKSB7XG4gICAgICBpZiAodmFyaWFuY2VYID4gdmFyaWFuY2VaKSB7XG4gICAgICAgIHRoaXMuYXhpc0luZGV4ID0gMDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuYXhpc0luZGV4ID0gMjtcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKHZhcmlhbmNlWSA+IHZhcmlhbmNlWikge1xuICAgICAgdGhpcy5heGlzSW5kZXggPSAxO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmF4aXNJbmRleCA9IDI7XG4gICAgfVxuICB9XG4gIC8qKlxuICAgKiBSZXR1cm5zIGFsbCB0aGUgYm9kaWVzIHdpdGhpbiBhbiBBQUJCLlxuICAgKiBAcGFyYW0gcmVzdWx0IEFuIGFycmF5IHRvIHN0b3JlIHJlc3VsdGluZyBib2RpZXMgaW4uXG4gICAqL1xuXG5cbiAgYWFiYlF1ZXJ5KHdvcmxkLCBhYWJiLCByZXN1bHQgPSBbXSkge1xuICAgIGlmICh0aGlzLmRpcnR5KSB7XG4gICAgICB0aGlzLnNvcnRMaXN0KCk7XG4gICAgICB0aGlzLmRpcnR5ID0gZmFsc2U7XG4gICAgfVxuXG4gICAgY29uc3QgYXhpc0luZGV4ID0gdGhpcy5heGlzSW5kZXg7XG4gICAgbGV0IGF4aXMgPSAneCc7XG5cbiAgICBpZiAoYXhpc0luZGV4ID09PSAxKSB7XG4gICAgICBheGlzID0gJ3knO1xuICAgIH1cblxuICAgIGlmIChheGlzSW5kZXggPT09IDIpIHtcbiAgICAgIGF4aXMgPSAneic7XG4gICAgfVxuXG4gICAgY29uc3QgYXhpc0xpc3QgPSB0aGlzLmF4aXNMaXN0O1xuICAgIGFhYmIubG93ZXJCb3VuZFtheGlzXTtcbiAgICBhYWJiLnVwcGVyQm91bmRbYXhpc107XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGF4aXNMaXN0Lmxlbmd0aDsgaSsrKSB7XG4gICAgICBjb25zdCBiID0gYXhpc0xpc3RbaV07XG5cbiAgICAgIGlmIChiLmFhYmJOZWVkc1VwZGF0ZSkge1xuICAgICAgICBiLnVwZGF0ZUFBQkIoKTtcbiAgICAgIH1cblxuICAgICAgaWYgKGIuYWFiYi5vdmVybGFwcyhhYWJiKSkge1xuICAgICAgICByZXN1bHQucHVzaChiKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG5cbn1cblxuY2xhc3MgVXRpbHMge1xuICAvKipcbiAgICogRXh0ZW5kIGFuIG9wdGlvbnMgb2JqZWN0IHdpdGggZGVmYXVsdCB2YWx1ZXMuXG4gICAqIEBwYXJhbSBvcHRpb25zIFRoZSBvcHRpb25zIG9iamVjdC4gTWF5IGJlIGZhbHN5OiBpbiB0aGlzIGNhc2UsIGEgbmV3IG9iamVjdCBpcyBjcmVhdGVkIGFuZCByZXR1cm5lZC5cbiAgICogQHBhcmFtIGRlZmF1bHRzIEFuIG9iamVjdCBjb250YWluaW5nIGRlZmF1bHQgdmFsdWVzLlxuICAgKiBAcmV0dXJuIFRoZSBtb2RpZmllZCBvcHRpb25zIG9iamVjdC5cbiAgICovXG4gIHN0YXRpYyBkZWZhdWx0cyhvcHRpb25zID0ge30sIGRlZmF1bHRzKSB7XG4gICAgZm9yIChsZXQga2V5IGluIGRlZmF1bHRzKSB7XG4gICAgICBpZiAoIShrZXkgaW4gb3B0aW9ucykpIHtcbiAgICAgICAgb3B0aW9uc1trZXldID0gZGVmYXVsdHNba2V5XTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gb3B0aW9ucztcbiAgfVxuXG59XG5cbi8qKlxuICogQ29uc3RyYWludCBiYXNlIGNsYXNzXG4gKi9cbmNsYXNzIENvbnN0cmFpbnQge1xuICAvKipcbiAgICogRXF1YXRpb25zIHRvIGJlIHNvbHZlZCBpbiB0aGlzIGNvbnN0cmFpbnQuXG4gICAqL1xuXG4gIC8qKlxuICAgKiBCb2R5IEEuXG4gICAqL1xuXG4gIC8qKlxuICAgKiBCb2R5IEIuXG4gICAqL1xuXG4gIC8qKlxuICAgKiBTZXQgdG8gZmFsc2UgaWYgeW91IGRvbid0IHdhbnQgdGhlIGJvZGllcyB0byBjb2xsaWRlIHdoZW4gdGhleSBhcmUgY29ubmVjdGVkLlxuICAgKi9cbiAgY29uc3RydWN0b3IoYm9keUEsIGJvZHlCLCBvcHRpb25zID0ge30pIHtcbiAgICB0aGlzLmVxdWF0aW9ucyA9IHZvaWQgMDtcbiAgICB0aGlzLmJvZHlBID0gdm9pZCAwO1xuICAgIHRoaXMuYm9keUIgPSB2b2lkIDA7XG4gICAgdGhpcy5pZCA9IHZvaWQgMDtcbiAgICB0aGlzLmNvbGxpZGVDb25uZWN0ZWQgPSB2b2lkIDA7XG4gICAgb3B0aW9ucyA9IFV0aWxzLmRlZmF1bHRzKG9wdGlvbnMsIHtcbiAgICAgIGNvbGxpZGVDb25uZWN0ZWQ6IHRydWUsXG4gICAgICB3YWtlVXBCb2RpZXM6IHRydWVcbiAgICB9KTtcbiAgICB0aGlzLmVxdWF0aW9ucyA9IFtdO1xuICAgIHRoaXMuYm9keUEgPSBib2R5QTtcbiAgICB0aGlzLmJvZHlCID0gYm9keUI7XG4gICAgdGhpcy5pZCA9IENvbnN0cmFpbnQuaWRDb3VudGVyKys7XG4gICAgdGhpcy5jb2xsaWRlQ29ubmVjdGVkID0gb3B0aW9ucy5jb2xsaWRlQ29ubmVjdGVkO1xuXG4gICAgaWYgKG9wdGlvbnMud2FrZVVwQm9kaWVzKSB7XG4gICAgICBpZiAoYm9keUEpIHtcbiAgICAgICAgYm9keUEud2FrZVVwKCk7XG4gICAgICB9XG5cbiAgICAgIGlmIChib2R5Qikge1xuICAgICAgICBib2R5Qi53YWtlVXAoKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgLyoqXG4gICAqIFVwZGF0ZSBhbGwgdGhlIGVxdWF0aW9ucyB3aXRoIGRhdGEuXG4gICAqL1xuXG5cbiAgdXBkYXRlKCkge1xuICAgIHRocm93IG5ldyBFcnJvcignbWV0aG9kIHVwZGF0ZSgpIG5vdCBpbXBsbWVtZW50ZWQgaW4gdGhpcyBDb25zdHJhaW50IHN1YmNsYXNzIScpO1xuICB9XG4gIC8qKlxuICAgKiBFbmFibGVzIGFsbCBlcXVhdGlvbnMgaW4gdGhlIGNvbnN0cmFpbnQuXG4gICAqL1xuXG5cbiAgZW5hYmxlKCkge1xuICAgIGNvbnN0IGVxcyA9IHRoaXMuZXF1YXRpb25zO1xuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBlcXMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGVxc1tpXS5lbmFibGVkID0gdHJ1ZTtcbiAgICB9XG4gIH1cbiAgLyoqXG4gICAqIERpc2FibGVzIGFsbCBlcXVhdGlvbnMgaW4gdGhlIGNvbnN0cmFpbnQuXG4gICAqL1xuXG5cbiAgZGlzYWJsZSgpIHtcbiAgICBjb25zdCBlcXMgPSB0aGlzLmVxdWF0aW9ucztcblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZXFzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBlcXNbaV0uZW5hYmxlZCA9IGZhbHNlO1xuICAgIH1cbiAgfVxuXG59XG5Db25zdHJhaW50LmlkQ291bnRlciA9IDA7XG5cbi8qKlxuICogQW4gZWxlbWVudCBjb250YWluaW5nIDYgZW50cmllcywgMyBzcGF0aWFsIGFuZCAzIHJvdGF0aW9uYWwgZGVncmVlcyBvZiBmcmVlZG9tLlxuICovXG5cbmNsYXNzIEphY29iaWFuRWxlbWVudCB7XG4gIC8qKlxuICAgKiBzcGF0aWFsXG4gICAqL1xuXG4gIC8qKlxuICAgKiByb3RhdGlvbmFsXG4gICAqL1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICB0aGlzLnNwYXRpYWwgPSB2b2lkIDA7XG4gICAgdGhpcy5yb3RhdGlvbmFsID0gdm9pZCAwO1xuICAgIHRoaXMuc3BhdGlhbCA9IG5ldyBWZWMzKCk7XG4gICAgdGhpcy5yb3RhdGlvbmFsID0gbmV3IFZlYzMoKTtcbiAgfVxuICAvKipcbiAgICogTXVsdGlwbHkgd2l0aCBvdGhlciBKYWNvYmlhbkVsZW1lbnRcbiAgICovXG5cblxuICBtdWx0aXBseUVsZW1lbnQoZWxlbWVudCkge1xuICAgIHJldHVybiBlbGVtZW50LnNwYXRpYWwuZG90KHRoaXMuc3BhdGlhbCkgKyBlbGVtZW50LnJvdGF0aW9uYWwuZG90KHRoaXMucm90YXRpb25hbCk7XG4gIH1cbiAgLyoqXG4gICAqIE11bHRpcGx5IHdpdGggdHdvIHZlY3RvcnNcbiAgICovXG5cblxuICBtdWx0aXBseVZlY3RvcnMoc3BhdGlhbCwgcm90YXRpb25hbCkge1xuICAgIHJldHVybiBzcGF0aWFsLmRvdCh0aGlzLnNwYXRpYWwpICsgcm90YXRpb25hbC5kb3QodGhpcy5yb3RhdGlvbmFsKTtcbiAgfVxuXG59XG5cbi8qKlxuICogRXF1YXRpb24gYmFzZSBjbGFzcy5cbiAqXG4gKiBgYWAsIGBiYCBhbmQgYGVwc2AgYXJlIHtAbGluayBodHRwczovL3d3dzguY3MudW11LnNlL2t1cnNlci81RFYwNTgvVlQxNS9sZWN0dXJlcy9TUE9PS2xhYm5vdGVzLnBkZiBTUE9PS30gcGFyYW1ldGVycyB0aGF0IGRlZmF1bHQgdG8gYDAuMGAuIFNlZSB7QGxpbmsgaHR0cHM6Ly9naXRodWIuY29tL3NjaHRlcHBlL2Nhbm5vbi5qcy9pc3N1ZXMvMjM4I2lzc3VlY29tbWVudC0xNDcxNzIzMjcgdGhpcyBleGNoYW5nZX0gZm9yIG1vcmUgZGV0YWlscyBvbiBDYW5ub24ncyBwaHlzaWNzIGltcGxlbWVudGF0aW9uLlxuICovXG5jbGFzcyBFcXVhdGlvbiB7XG4gIC8qKlxuICAgKiBNaW5pbXVtIChyZWFkOiBuZWdhdGl2ZSBtYXgpIGZvcmNlIHRvIGJlIGFwcGxpZWQgYnkgdGhlIGNvbnN0cmFpbnQuXG4gICAqL1xuXG4gIC8qKlxuICAgKiBNYXhpbXVtIChyZWFkOiBwb3NpdGl2ZSBtYXgpIGZvcmNlIHRvIGJlIGFwcGxpZWQgYnkgdGhlIGNvbnN0cmFpbnQuXG4gICAqL1xuXG4gIC8qKlxuICAgKiBTUE9PSyBwYXJhbWV0ZXJcbiAgICovXG5cbiAgLyoqXG4gICAqIFNQT09LIHBhcmFtZXRlclxuICAgKi9cblxuICAvKipcbiAgICogU1BPT0sgcGFyYW1ldGVyXG4gICAqL1xuXG4gIC8qKlxuICAgKiBBIG51bWJlciwgcHJvcG9ydGlvbmFsIHRvIHRoZSBmb3JjZSBhZGRlZCB0byB0aGUgYm9kaWVzLlxuICAgKi9cbiAgY29uc3RydWN0b3IoYmksIGJqLCBtaW5Gb3JjZSA9IC0xZTYsIG1heEZvcmNlID0gMWU2KSB7XG4gICAgdGhpcy5pZCA9IHZvaWQgMDtcbiAgICB0aGlzLm1pbkZvcmNlID0gdm9pZCAwO1xuICAgIHRoaXMubWF4Rm9yY2UgPSB2b2lkIDA7XG4gICAgdGhpcy5iaSA9IHZvaWQgMDtcbiAgICB0aGlzLmJqID0gdm9pZCAwO1xuICAgIHRoaXMuc2kgPSB2b2lkIDA7XG4gICAgdGhpcy5zaiA9IHZvaWQgMDtcbiAgICB0aGlzLmEgPSB2b2lkIDA7XG4gICAgdGhpcy5iID0gdm9pZCAwO1xuICAgIHRoaXMuZXBzID0gdm9pZCAwO1xuICAgIHRoaXMuamFjb2JpYW5FbGVtZW50QSA9IHZvaWQgMDtcbiAgICB0aGlzLmphY29iaWFuRWxlbWVudEIgPSB2b2lkIDA7XG4gICAgdGhpcy5lbmFibGVkID0gdm9pZCAwO1xuICAgIHRoaXMubXVsdGlwbGllciA9IHZvaWQgMDtcbiAgICB0aGlzLmlkID0gRXF1YXRpb24uaWRDb3VudGVyKys7XG4gICAgdGhpcy5taW5Gb3JjZSA9IG1pbkZvcmNlO1xuICAgIHRoaXMubWF4Rm9yY2UgPSBtYXhGb3JjZTtcbiAgICB0aGlzLmJpID0gYmk7XG4gICAgdGhpcy5iaiA9IGJqO1xuICAgIHRoaXMuYSA9IDAuMDsgLy8gU1BPT0sgcGFyYW1ldGVyXG5cbiAgICB0aGlzLmIgPSAwLjA7IC8vIFNQT09LIHBhcmFtZXRlclxuXG4gICAgdGhpcy5lcHMgPSAwLjA7IC8vIFNQT09LIHBhcmFtZXRlclxuXG4gICAgdGhpcy5qYWNvYmlhbkVsZW1lbnRBID0gbmV3IEphY29iaWFuRWxlbWVudCgpO1xuICAgIHRoaXMuamFjb2JpYW5FbGVtZW50QiA9IG5ldyBKYWNvYmlhbkVsZW1lbnQoKTtcbiAgICB0aGlzLmVuYWJsZWQgPSB0cnVlO1xuICAgIHRoaXMubXVsdGlwbGllciA9IDA7XG4gICAgdGhpcy5zZXRTcG9va1BhcmFtcygxZTcsIDQsIDEgLyA2MCk7IC8vIFNldCB0eXBpY2FsIHNwb29rIHBhcmFtc1xuICB9XG4gIC8qKlxuICAgKiBSZWNhbGN1bGF0ZXMgYSwgYiwgYW5kIGVwcy5cbiAgICpcbiAgICogVGhlIEVxdWF0aW9uIGNvbnN0cnVjdG9yIHNldHMgdHlwaWNhbCBTUE9PSyBwYXJhbWV0ZXJzIGFzIHN1Y2g6XG4gICAqICogYHN0aWZmbmVzc2AgPSAxZTdcbiAgICogKiBgcmVsYXhhdGlvbmAgPSA0XG4gICAqICogYHRpbWVTdGVwYD0gMSAvIDYwLCBfbm90ZSB0aGUgaGFyZGNvZGVkIHJlZnJlc2ggcmF0ZS5fXG4gICAqL1xuXG5cbiAgc2V0U3Bvb2tQYXJhbXMoc3RpZmZuZXNzLCByZWxheGF0aW9uLCB0aW1lU3RlcCkge1xuICAgIGNvbnN0IGQgPSByZWxheGF0aW9uO1xuICAgIGNvbnN0IGsgPSBzdGlmZm5lc3M7XG4gICAgY29uc3QgaCA9IHRpbWVTdGVwO1xuICAgIHRoaXMuYSA9IDQuMCAvIChoICogKDEgKyA0ICogZCkpO1xuICAgIHRoaXMuYiA9IDQuMCAqIGQgLyAoMSArIDQgKiBkKTtcbiAgICB0aGlzLmVwcyA9IDQuMCAvIChoICogaCAqIGsgKiAoMSArIDQgKiBkKSk7XG4gIH1cbiAgLyoqXG4gICAqIENvbXB1dGVzIHRoZSByaWdodCBoYW5kIHNpZGUgb2YgdGhlIFNQT09LIGVxdWF0aW9uXG4gICAqL1xuXG5cbiAgY29tcHV0ZUIoYSwgYiwgaCkge1xuICAgIGNvbnN0IEdXID0gdGhpcy5jb21wdXRlR1coKTtcbiAgICBjb25zdCBHcSA9IHRoaXMuY29tcHV0ZUdxKCk7XG4gICAgY29uc3QgR2lNZiA9IHRoaXMuY29tcHV0ZUdpTWYoKTtcbiAgICByZXR1cm4gLUdxICogYSAtIEdXICogYiAtIEdpTWYgKiBoO1xuICB9XG4gIC8qKlxuICAgKiBDb21wdXRlcyBHKnEsIHdoZXJlIHEgYXJlIHRoZSBnZW5lcmFsaXplZCBib2R5IGNvb3JkaW5hdGVzXG4gICAqL1xuXG5cbiAgY29tcHV0ZUdxKCkge1xuICAgIGNvbnN0IEdBID0gdGhpcy5qYWNvYmlhbkVsZW1lbnRBO1xuICAgIGNvbnN0IEdCID0gdGhpcy5qYWNvYmlhbkVsZW1lbnRCO1xuICAgIGNvbnN0IGJpID0gdGhpcy5iaTtcbiAgICBjb25zdCBiaiA9IHRoaXMuYmo7XG4gICAgY29uc3QgeGkgPSBiaS5wb3NpdGlvbjtcbiAgICBjb25zdCB4aiA9IGJqLnBvc2l0aW9uO1xuICAgIHJldHVybiBHQS5zcGF0aWFsLmRvdCh4aSkgKyBHQi5zcGF0aWFsLmRvdCh4aik7XG4gIH1cbiAgLyoqXG4gICAqIENvbXB1dGVzIEcqVywgd2hlcmUgVyBhcmUgdGhlIGJvZHkgdmVsb2NpdGllc1xuICAgKi9cblxuXG4gIGNvbXB1dGVHVygpIHtcbiAgICBjb25zdCBHQSA9IHRoaXMuamFjb2JpYW5FbGVtZW50QTtcbiAgICBjb25zdCBHQiA9IHRoaXMuamFjb2JpYW5FbGVtZW50QjtcbiAgICBjb25zdCBiaSA9IHRoaXMuYmk7XG4gICAgY29uc3QgYmogPSB0aGlzLmJqO1xuICAgIGNvbnN0IHZpID0gYmkudmVsb2NpdHk7XG4gICAgY29uc3QgdmogPSBiai52ZWxvY2l0eTtcbiAgICBjb25zdCB3aSA9IGJpLmFuZ3VsYXJWZWxvY2l0eTtcbiAgICBjb25zdCB3aiA9IGJqLmFuZ3VsYXJWZWxvY2l0eTtcbiAgICByZXR1cm4gR0EubXVsdGlwbHlWZWN0b3JzKHZpLCB3aSkgKyBHQi5tdWx0aXBseVZlY3RvcnModmosIHdqKTtcbiAgfVxuICAvKipcbiAgICogQ29tcHV0ZXMgRypXbGFtYmRhLCB3aGVyZSBXIGFyZSB0aGUgYm9keSB2ZWxvY2l0aWVzXG4gICAqL1xuXG5cbiAgY29tcHV0ZUdXbGFtYmRhKCkge1xuICAgIGNvbnN0IEdBID0gdGhpcy5qYWNvYmlhbkVsZW1lbnRBO1xuICAgIGNvbnN0IEdCID0gdGhpcy5qYWNvYmlhbkVsZW1lbnRCO1xuICAgIGNvbnN0IGJpID0gdGhpcy5iaTtcbiAgICBjb25zdCBiaiA9IHRoaXMuYmo7XG4gICAgY29uc3QgdmkgPSBiaS52bGFtYmRhO1xuICAgIGNvbnN0IHZqID0gYmoudmxhbWJkYTtcbiAgICBjb25zdCB3aSA9IGJpLndsYW1iZGE7XG4gICAgY29uc3Qgd2ogPSBiai53bGFtYmRhO1xuICAgIHJldHVybiBHQS5tdWx0aXBseVZlY3RvcnModmksIHdpKSArIEdCLm11bHRpcGx5VmVjdG9ycyh2aiwgd2opO1xuICB9XG4gIC8qKlxuICAgKiBDb21wdXRlcyBHKmludihNKSpmLCB3aGVyZSBNIGlzIHRoZSBtYXNzIG1hdHJpeCB3aXRoIGRpYWdvbmFsIGJsb2NrcyBmb3IgZWFjaCBib2R5LCBhbmQgZiBhcmUgdGhlIGZvcmNlcyBvbiB0aGUgYm9kaWVzLlxuICAgKi9cblxuXG4gIGNvbXB1dGVHaU1mKCkge1xuICAgIGNvbnN0IEdBID0gdGhpcy5qYWNvYmlhbkVsZW1lbnRBO1xuICAgIGNvbnN0IEdCID0gdGhpcy5qYWNvYmlhbkVsZW1lbnRCO1xuICAgIGNvbnN0IGJpID0gdGhpcy5iaTtcbiAgICBjb25zdCBiaiA9IHRoaXMuYmo7XG4gICAgY29uc3QgZmkgPSBiaS5mb3JjZTtcbiAgICBjb25zdCB0aSA9IGJpLnRvcnF1ZTtcbiAgICBjb25zdCBmaiA9IGJqLmZvcmNlO1xuICAgIGNvbnN0IHRqID0gYmoudG9ycXVlO1xuICAgIGNvbnN0IGludk1hc3NpID0gYmkuaW52TWFzc1NvbHZlO1xuICAgIGNvbnN0IGludk1hc3NqID0gYmouaW52TWFzc1NvbHZlO1xuICAgIGZpLnNjYWxlKGludk1hc3NpLCBpTWZpKTtcbiAgICBmai5zY2FsZShpbnZNYXNzaiwgaU1maik7XG4gICAgYmkuaW52SW5lcnRpYVdvcmxkU29sdmUudm11bHQodGksIGludklpX3ZtdWx0X3RhdWkpO1xuICAgIGJqLmludkluZXJ0aWFXb3JsZFNvbHZlLnZtdWx0KHRqLCBpbnZJal92bXVsdF90YXVqKTtcbiAgICByZXR1cm4gR0EubXVsdGlwbHlWZWN0b3JzKGlNZmksIGludklpX3ZtdWx0X3RhdWkpICsgR0IubXVsdGlwbHlWZWN0b3JzKGlNZmosIGludklqX3ZtdWx0X3RhdWopO1xuICB9XG4gIC8qKlxuICAgKiBDb21wdXRlcyBHKmludihNKSpHJ1xuICAgKi9cblxuXG4gIGNvbXB1dGVHaU1HdCgpIHtcbiAgICBjb25zdCBHQSA9IHRoaXMuamFjb2JpYW5FbGVtZW50QTtcbiAgICBjb25zdCBHQiA9IHRoaXMuamFjb2JpYW5FbGVtZW50QjtcbiAgICBjb25zdCBiaSA9IHRoaXMuYmk7XG4gICAgY29uc3QgYmogPSB0aGlzLmJqO1xuICAgIGNvbnN0IGludk1hc3NpID0gYmkuaW52TWFzc1NvbHZlO1xuICAgIGNvbnN0IGludk1hc3NqID0gYmouaW52TWFzc1NvbHZlO1xuICAgIGNvbnN0IGludklpID0gYmkuaW52SW5lcnRpYVdvcmxkU29sdmU7XG4gICAgY29uc3QgaW52SWogPSBiai5pbnZJbmVydGlhV29ybGRTb2x2ZTtcbiAgICBsZXQgcmVzdWx0ID0gaW52TWFzc2kgKyBpbnZNYXNzajtcbiAgICBpbnZJaS52bXVsdChHQS5yb3RhdGlvbmFsLCB0bXApO1xuICAgIHJlc3VsdCArPSB0bXAuZG90KEdBLnJvdGF0aW9uYWwpO1xuICAgIGludklqLnZtdWx0KEdCLnJvdGF0aW9uYWwsIHRtcCk7XG4gICAgcmVzdWx0ICs9IHRtcC5kb3QoR0Iucm90YXRpb25hbCk7XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxuICAvKipcbiAgICogQWRkIGNvbnN0cmFpbnQgdmVsb2NpdHkgdG8gdGhlIGJvZGllcy5cbiAgICovXG5cblxuICBhZGRUb1dsYW1iZGEoZGVsdGFsYW1iZGEpIHtcbiAgICBjb25zdCBHQSA9IHRoaXMuamFjb2JpYW5FbGVtZW50QTtcbiAgICBjb25zdCBHQiA9IHRoaXMuamFjb2JpYW5FbGVtZW50QjtcbiAgICBjb25zdCBiaSA9IHRoaXMuYmk7XG4gICAgY29uc3QgYmogPSB0aGlzLmJqO1xuICAgIGNvbnN0IHRlbXAgPSBhZGRUb1dsYW1iZGFfdGVtcDsgLy8gQWRkIHRvIGxpbmVhciB2ZWxvY2l0eVxuICAgIC8vIHZfbGFtYmRhICs9IGludihNKSAqIGRlbHRhX2xhbWJhICogR1xuXG4gICAgYmkudmxhbWJkYS5hZGRTY2FsZWRWZWN0b3IoYmkuaW52TWFzc1NvbHZlICogZGVsdGFsYW1iZGEsIEdBLnNwYXRpYWwsIGJpLnZsYW1iZGEpO1xuICAgIGJqLnZsYW1iZGEuYWRkU2NhbGVkVmVjdG9yKGJqLmludk1hc3NTb2x2ZSAqIGRlbHRhbGFtYmRhLCBHQi5zcGF0aWFsLCBiai52bGFtYmRhKTsgLy8gQWRkIHRvIGFuZ3VsYXIgdmVsb2NpdHlcblxuICAgIGJpLmludkluZXJ0aWFXb3JsZFNvbHZlLnZtdWx0KEdBLnJvdGF0aW9uYWwsIHRlbXApO1xuICAgIGJpLndsYW1iZGEuYWRkU2NhbGVkVmVjdG9yKGRlbHRhbGFtYmRhLCB0ZW1wLCBiaS53bGFtYmRhKTtcbiAgICBiai5pbnZJbmVydGlhV29ybGRTb2x2ZS52bXVsdChHQi5yb3RhdGlvbmFsLCB0ZW1wKTtcbiAgICBiai53bGFtYmRhLmFkZFNjYWxlZFZlY3RvcihkZWx0YWxhbWJkYSwgdGVtcCwgYmoud2xhbWJkYSk7XG4gIH1cbiAgLyoqXG4gICAqIENvbXB1dGUgdGhlIGRlbm9taW5hdG9yIHBhcnQgb2YgdGhlIFNQT09LIGVxdWF0aW9uOiBDID0gRyppbnYoTSkqRycgKyBlcHNcbiAgICovXG5cblxuICBjb21wdXRlQygpIHtcbiAgICByZXR1cm4gdGhpcy5jb21wdXRlR2lNR3QoKSArIHRoaXMuZXBzO1xuICB9XG5cbn1cbkVxdWF0aW9uLmlkQ291bnRlciA9IDA7XG5jb25zdCBpTWZpID0gbmV3IFZlYzMoKTtcbmNvbnN0IGlNZmogPSBuZXcgVmVjMygpO1xuY29uc3QgaW52SWlfdm11bHRfdGF1aSA9IG5ldyBWZWMzKCk7XG5jb25zdCBpbnZJal92bXVsdF90YXVqID0gbmV3IFZlYzMoKTtcbmNvbnN0IHRtcCA9IG5ldyBWZWMzKCk7XG5jb25zdCBhZGRUb1dsYW1iZGFfdGVtcCA9IG5ldyBWZWMzKCk7XG5cbi8qKlxuICogQ29udGFjdC9ub24tcGVuZXRyYXRpb24gY29uc3RyYWludCBlcXVhdGlvblxuICovXG5jbGFzcyBDb250YWN0RXF1YXRpb24gZXh0ZW5kcyBFcXVhdGlvbiB7XG4gIC8qKlxuICAgKiBcImJvdW5jaW5lc3NcIjogdTEgPSAtZSp1MFxuICAgKi9cblxuICAvKipcbiAgICogV29ybGQtb3JpZW50ZWQgdmVjdG9yIHRoYXQgZ29lcyBmcm9tIHRoZSBjZW50ZXIgb2YgYmkgdG8gdGhlIGNvbnRhY3QgcG9pbnQuXG4gICAqL1xuXG4gIC8qKlxuICAgKiBXb3JsZC1vcmllbnRlZCB2ZWN0b3IgdGhhdCBzdGFydHMgaW4gYm9keSBqIHBvc2l0aW9uIGFuZCBnb2VzIHRvIHRoZSBjb250YWN0IHBvaW50LlxuICAgKi9cblxuICAvKipcbiAgICogQ29udGFjdCBub3JtYWwsIHBvaW50aW5nIG91dCBvZiBib2R5IGkuXG4gICAqL1xuICBjb25zdHJ1Y3Rvcihib2R5QSwgYm9keUIsIG1heEZvcmNlID0gMWU2KSB7XG4gICAgc3VwZXIoYm9keUEsIGJvZHlCLCAwLCBtYXhGb3JjZSk7XG4gICAgdGhpcy5yZXN0aXR1dGlvbiA9IHZvaWQgMDtcbiAgICB0aGlzLnJpID0gdm9pZCAwO1xuICAgIHRoaXMucmogPSB2b2lkIDA7XG4gICAgdGhpcy5uaSA9IHZvaWQgMDtcbiAgICB0aGlzLnJlc3RpdHV0aW9uID0gMC4wO1xuICAgIHRoaXMucmkgPSBuZXcgVmVjMygpO1xuICAgIHRoaXMucmogPSBuZXcgVmVjMygpO1xuICAgIHRoaXMubmkgPSBuZXcgVmVjMygpO1xuICB9XG5cbiAgY29tcHV0ZUIoaCkge1xuICAgIGNvbnN0IGEgPSB0aGlzLmE7XG4gICAgY29uc3QgYiA9IHRoaXMuYjtcbiAgICBjb25zdCBiaSA9IHRoaXMuYmk7XG4gICAgY29uc3QgYmogPSB0aGlzLmJqO1xuICAgIGNvbnN0IHJpID0gdGhpcy5yaTtcbiAgICBjb25zdCByaiA9IHRoaXMucmo7XG4gICAgY29uc3Qgcml4biA9IENvbnRhY3RFcXVhdGlvbl9jb21wdXRlQl90ZW1wMTtcbiAgICBjb25zdCByanhuID0gQ29udGFjdEVxdWF0aW9uX2NvbXB1dGVCX3RlbXAyO1xuICAgIGNvbnN0IHZpID0gYmkudmVsb2NpdHk7XG4gICAgY29uc3Qgd2kgPSBiaS5hbmd1bGFyVmVsb2NpdHk7XG4gICAgYmkuZm9yY2U7XG4gICAgYmkudG9ycXVlO1xuICAgIGNvbnN0IHZqID0gYmoudmVsb2NpdHk7XG4gICAgY29uc3Qgd2ogPSBiai5hbmd1bGFyVmVsb2NpdHk7XG4gICAgYmouZm9yY2U7XG4gICAgYmoudG9ycXVlO1xuICAgIGNvbnN0IHBlbmV0cmF0aW9uVmVjID0gQ29udGFjdEVxdWF0aW9uX2NvbXB1dGVCX3RlbXAzO1xuICAgIGNvbnN0IEdBID0gdGhpcy5qYWNvYmlhbkVsZW1lbnRBO1xuICAgIGNvbnN0IEdCID0gdGhpcy5qYWNvYmlhbkVsZW1lbnRCO1xuICAgIGNvbnN0IG4gPSB0aGlzLm5pOyAvLyBDYWx1Y2xhdGUgY3Jvc3MgcHJvZHVjdHNcblxuICAgIHJpLmNyb3NzKG4sIHJpeG4pO1xuICAgIHJqLmNyb3NzKG4sIHJqeG4pOyAvLyBnID0geGorcmogLSh4aStyaSlcbiAgICAvLyBHID0gWyAtbmkgIC1yaXhuICBuaSAgcmp4biBdXG5cbiAgICBuLm5lZ2F0ZShHQS5zcGF0aWFsKTtcbiAgICByaXhuLm5lZ2F0ZShHQS5yb3RhdGlvbmFsKTtcbiAgICBHQi5zcGF0aWFsLmNvcHkobik7XG4gICAgR0Iucm90YXRpb25hbC5jb3B5KHJqeG4pOyAvLyBDYWxjdWxhdGUgdGhlIHBlbmV0cmF0aW9uIHZlY3RvclxuXG4gICAgcGVuZXRyYXRpb25WZWMuY29weShiai5wb3NpdGlvbik7XG4gICAgcGVuZXRyYXRpb25WZWMudmFkZChyaiwgcGVuZXRyYXRpb25WZWMpO1xuICAgIHBlbmV0cmF0aW9uVmVjLnZzdWIoYmkucG9zaXRpb24sIHBlbmV0cmF0aW9uVmVjKTtcbiAgICBwZW5ldHJhdGlvblZlYy52c3ViKHJpLCBwZW5ldHJhdGlvblZlYyk7XG4gICAgY29uc3QgZyA9IG4uZG90KHBlbmV0cmF0aW9uVmVjKTsgLy8gQ29tcHV0ZSBpdGVyYXRpb25cblxuICAgIGNvbnN0IGVQbHVzT25lID0gdGhpcy5yZXN0aXR1dGlvbiArIDE7XG4gICAgY29uc3QgR1cgPSBlUGx1c09uZSAqIHZqLmRvdChuKSAtIGVQbHVzT25lICogdmkuZG90KG4pICsgd2ouZG90KHJqeG4pIC0gd2kuZG90KHJpeG4pO1xuICAgIGNvbnN0IEdpTWYgPSB0aGlzLmNvbXB1dGVHaU1mKCk7XG4gICAgY29uc3QgQiA9IC1nICogYSAtIEdXICogYiAtIGggKiBHaU1mO1xuICAgIHJldHVybiBCO1xuICB9XG4gIC8qKlxuICAgKiBHZXQgdGhlIGN1cnJlbnQgcmVsYXRpdmUgdmVsb2NpdHkgaW4gdGhlIGNvbnRhY3QgcG9pbnQuXG4gICAqL1xuXG5cbiAgZ2V0SW1wYWN0VmVsb2NpdHlBbG9uZ05vcm1hbCgpIHtcbiAgICBjb25zdCB2aSA9IENvbnRhY3RFcXVhdGlvbl9nZXRJbXBhY3RWZWxvY2l0eUFsb25nTm9ybWFsX3ZpO1xuICAgIGNvbnN0IHZqID0gQ29udGFjdEVxdWF0aW9uX2dldEltcGFjdFZlbG9jaXR5QWxvbmdOb3JtYWxfdmo7XG4gICAgY29uc3QgeGkgPSBDb250YWN0RXF1YXRpb25fZ2V0SW1wYWN0VmVsb2NpdHlBbG9uZ05vcm1hbF94aTtcbiAgICBjb25zdCB4aiA9IENvbnRhY3RFcXVhdGlvbl9nZXRJbXBhY3RWZWxvY2l0eUFsb25nTm9ybWFsX3hqO1xuICAgIGNvbnN0IHJlbFZlbCA9IENvbnRhY3RFcXVhdGlvbl9nZXRJbXBhY3RWZWxvY2l0eUFsb25nTm9ybWFsX3JlbFZlbDtcbiAgICB0aGlzLmJpLnBvc2l0aW9uLnZhZGQodGhpcy5yaSwgeGkpO1xuICAgIHRoaXMuYmoucG9zaXRpb24udmFkZCh0aGlzLnJqLCB4aik7XG4gICAgdGhpcy5iaS5nZXRWZWxvY2l0eUF0V29ybGRQb2ludCh4aSwgdmkpO1xuICAgIHRoaXMuYmouZ2V0VmVsb2NpdHlBdFdvcmxkUG9pbnQoeGosIHZqKTtcbiAgICB2aS52c3ViKHZqLCByZWxWZWwpO1xuICAgIHJldHVybiB0aGlzLm5pLmRvdChyZWxWZWwpO1xuICB9XG5cbn1cbmNvbnN0IENvbnRhY3RFcXVhdGlvbl9jb21wdXRlQl90ZW1wMSA9IG5ldyBWZWMzKCk7IC8vIFRlbXAgdmVjdG9yc1xuXG5jb25zdCBDb250YWN0RXF1YXRpb25fY29tcHV0ZUJfdGVtcDIgPSBuZXcgVmVjMygpO1xuY29uc3QgQ29udGFjdEVxdWF0aW9uX2NvbXB1dGVCX3RlbXAzID0gbmV3IFZlYzMoKTtcbmNvbnN0IENvbnRhY3RFcXVhdGlvbl9nZXRJbXBhY3RWZWxvY2l0eUFsb25nTm9ybWFsX3ZpID0gbmV3IFZlYzMoKTtcbmNvbnN0IENvbnRhY3RFcXVhdGlvbl9nZXRJbXBhY3RWZWxvY2l0eUFsb25nTm9ybWFsX3ZqID0gbmV3IFZlYzMoKTtcbmNvbnN0IENvbnRhY3RFcXVhdGlvbl9nZXRJbXBhY3RWZWxvY2l0eUFsb25nTm9ybWFsX3hpID0gbmV3IFZlYzMoKTtcbmNvbnN0IENvbnRhY3RFcXVhdGlvbl9nZXRJbXBhY3RWZWxvY2l0eUFsb25nTm9ybWFsX3hqID0gbmV3IFZlYzMoKTtcbmNvbnN0IENvbnRhY3RFcXVhdGlvbl9nZXRJbXBhY3RWZWxvY2l0eUFsb25nTm9ybWFsX3JlbFZlbCA9IG5ldyBWZWMzKCk7XG5cbi8qKlxuICogQ29ubmVjdHMgdHdvIGJvZGllcyBhdCBnaXZlbiBvZmZzZXQgcG9pbnRzLlxuICogQGV4YW1wbGVcbiAqICAgICBjb25zdCBib2R5QSA9IG5ldyBCb2R5KHsgbWFzczogMSB9KVxuICogICAgIGNvbnN0IGJvZHlCID0gbmV3IEJvZHkoeyBtYXNzOiAxIH0pXG4gKiAgICAgYm9keUEucG9zaXRpb24uc2V0KC0xLCAwLCAwKVxuICogICAgIGJvZHlCLnBvc2l0aW9uLnNldCgxLCAwLCAwKVxuICogICAgIGJvZHlBLmFkZFNoYXBlKHNoYXBlQSlcbiAqICAgICBib2R5Qi5hZGRTaGFwZShzaGFwZUIpXG4gKiAgICAgd29ybGQuYWRkQm9keShib2R5QSlcbiAqICAgICB3b3JsZC5hZGRCb2R5KGJvZHlCKVxuICogICAgIGNvbnN0IGxvY2FsUGl2b3RBID0gbmV3IFZlYzMoMSwgMCwgMClcbiAqICAgICBjb25zdCBsb2NhbFBpdm90QiA9IG5ldyBWZWMzKC0xLCAwLCAwKVxuICogICAgIGNvbnN0IGNvbnN0cmFpbnQgPSBuZXcgUG9pbnRUb1BvaW50Q29uc3RyYWludChib2R5QSwgbG9jYWxQaXZvdEEsIGJvZHlCLCBsb2NhbFBpdm90QilcbiAqICAgICB3b3JsZC5hZGRDb25zdHJhaW50KGNvbnN0cmFpbnQpXG4gKi9cbmNsYXNzIFBvaW50VG9Qb2ludENvbnN0cmFpbnQgZXh0ZW5kcyBDb25zdHJhaW50IHtcbiAgLyoqXG4gICAqIFBpdm90LCBkZWZpbmVkIGxvY2FsbHkgaW4gYm9keUEuXG4gICAqL1xuXG4gIC8qKlxuICAgKiBQaXZvdCwgZGVmaW5lZCBsb2NhbGx5IGluIGJvZHlCLlxuICAgKi9cblxuICAvKipcbiAgICogQHBhcmFtIHBpdm90QSBUaGUgcG9pbnQgcmVsYXRpdmUgdG8gdGhlIGNlbnRlciBvZiBtYXNzIG9mIGJvZHlBIHdoaWNoIGJvZHlBIGlzIGNvbnN0cmFpbmVkIHRvLlxuICAgKiBAcGFyYW0gYm9keUIgQm9keSB0aGF0IHdpbGwgYmUgY29uc3RyYWluZWQgaW4gYSBzaW1pbGFyIHdheSB0byB0aGUgc2FtZSBwb2ludCBhcyBib2R5QS4gV2Ugd2lsbCB0aGVyZWZvcmUgZ2V0IGEgbGluayBiZXR3ZWVuIGJvZHlBIGFuZCBib2R5Qi4gSWYgbm90IHNwZWNpZmllZCwgYm9keUEgd2lsbCBiZSBjb25zdHJhaW5lZCB0byBhIHN0YXRpYyBwb2ludC5cbiAgICogQHBhcmFtIHBpdm90QiBUaGUgcG9pbnQgcmVsYXRpdmUgdG8gdGhlIGNlbnRlciBvZiBtYXNzIG9mIGJvZHlCIHdoaWNoIGJvZHlCIGlzIGNvbnN0cmFpbmVkIHRvLlxuICAgKiBAcGFyYW0gbWF4Rm9yY2UgVGhlIG1heGltdW0gZm9yY2UgdGhhdCBzaG91bGQgYmUgYXBwbGllZCB0byBjb25zdHJhaW4gdGhlIGJvZGllcy5cbiAgICovXG4gIGNvbnN0cnVjdG9yKGJvZHlBLCBwaXZvdEEgPSBuZXcgVmVjMygpLCBib2R5QiwgcGl2b3RCID0gbmV3IFZlYzMoKSwgbWF4Rm9yY2UgPSAxZTYpIHtcbiAgICBzdXBlcihib2R5QSwgYm9keUIpO1xuICAgIHRoaXMucGl2b3RBID0gdm9pZCAwO1xuICAgIHRoaXMucGl2b3RCID0gdm9pZCAwO1xuICAgIHRoaXMuZXF1YXRpb25YID0gdm9pZCAwO1xuICAgIHRoaXMuZXF1YXRpb25ZID0gdm9pZCAwO1xuICAgIHRoaXMuZXF1YXRpb25aID0gdm9pZCAwO1xuICAgIHRoaXMucGl2b3RBID0gcGl2b3RBLmNsb25lKCk7XG4gICAgdGhpcy5waXZvdEIgPSBwaXZvdEIuY2xvbmUoKTtcbiAgICBjb25zdCB4ID0gdGhpcy5lcXVhdGlvblggPSBuZXcgQ29udGFjdEVxdWF0aW9uKGJvZHlBLCBib2R5Qik7XG4gICAgY29uc3QgeSA9IHRoaXMuZXF1YXRpb25ZID0gbmV3IENvbnRhY3RFcXVhdGlvbihib2R5QSwgYm9keUIpO1xuICAgIGNvbnN0IHogPSB0aGlzLmVxdWF0aW9uWiA9IG5ldyBDb250YWN0RXF1YXRpb24oYm9keUEsIGJvZHlCKTsgLy8gRXF1YXRpb25zIHRvIGJlIGZlZCB0byB0aGUgc29sdmVyXG5cbiAgICB0aGlzLmVxdWF0aW9ucy5wdXNoKHgsIHksIHopOyAvLyBNYWtlIHRoZSBlcXVhdGlvbnMgYmlkaXJlY3Rpb25hbFxuXG4gICAgeC5taW5Gb3JjZSA9IHkubWluRm9yY2UgPSB6Lm1pbkZvcmNlID0gLW1heEZvcmNlO1xuICAgIHgubWF4Rm9yY2UgPSB5Lm1heEZvcmNlID0gei5tYXhGb3JjZSA9IG1heEZvcmNlO1xuICAgIHgubmkuc2V0KDEsIDAsIDApO1xuICAgIHkubmkuc2V0KDAsIDEsIDApO1xuICAgIHoubmkuc2V0KDAsIDAsIDEpO1xuICB9XG5cbiAgdXBkYXRlKCkge1xuICAgIGNvbnN0IGJvZHlBID0gdGhpcy5ib2R5QTtcbiAgICBjb25zdCBib2R5QiA9IHRoaXMuYm9keUI7XG4gICAgY29uc3QgeCA9IHRoaXMuZXF1YXRpb25YO1xuICAgIGNvbnN0IHkgPSB0aGlzLmVxdWF0aW9uWTtcbiAgICBjb25zdCB6ID0gdGhpcy5lcXVhdGlvblo7IC8vIFJvdGF0ZSB0aGUgcGl2b3RzIHRvIHdvcmxkIHNwYWNlXG5cbiAgICBib2R5QS5xdWF0ZXJuaW9uLnZtdWx0KHRoaXMucGl2b3RBLCB4LnJpKTtcbiAgICBib2R5Qi5xdWF0ZXJuaW9uLnZtdWx0KHRoaXMucGl2b3RCLCB4LnJqKTtcbiAgICB5LnJpLmNvcHkoeC5yaSk7XG4gICAgeS5yai5jb3B5KHgucmopO1xuICAgIHoucmkuY29weSh4LnJpKTtcbiAgICB6LnJqLmNvcHkoeC5yaik7XG4gIH1cblxufVxuXG4vKipcbiAqIENvbmUgZXF1YXRpb24uIFdvcmtzIHRvIGtlZXAgdGhlIGdpdmVuIGJvZHkgd29ybGQgdmVjdG9ycyBhbGlnbmVkLCBvciB0aWx0ZWQgd2l0aGluIGEgZ2l2ZW4gYW5nbGUgZnJvbSBlYWNoIG90aGVyLlxuICovXG5jbGFzcyBDb25lRXF1YXRpb24gZXh0ZW5kcyBFcXVhdGlvbiB7XG4gIC8qKlxuICAgKiBMb2NhbCBheGlzIGluIEFcbiAgICovXG5cbiAgLyoqXG4gICAqIExvY2FsIGF4aXMgaW4gQlxuICAgKi9cblxuICAvKipcbiAgICogVGhlIFwiY29uZSBhbmdsZVwiIHRvIGtlZXBcbiAgICovXG4gIGNvbnN0cnVjdG9yKGJvZHlBLCBib2R5Qiwgb3B0aW9ucyA9IHt9KSB7XG4gICAgY29uc3QgbWF4Rm9yY2UgPSB0eXBlb2Ygb3B0aW9ucy5tYXhGb3JjZSAhPT0gJ3VuZGVmaW5lZCcgPyBvcHRpb25zLm1heEZvcmNlIDogMWU2O1xuICAgIHN1cGVyKGJvZHlBLCBib2R5QiwgLW1heEZvcmNlLCBtYXhGb3JjZSk7XG4gICAgdGhpcy5heGlzQSA9IHZvaWQgMDtcbiAgICB0aGlzLmF4aXNCID0gdm9pZCAwO1xuICAgIHRoaXMuYW5nbGUgPSB2b2lkIDA7XG4gICAgdGhpcy5heGlzQSA9IG9wdGlvbnMuYXhpc0EgPyBvcHRpb25zLmF4aXNBLmNsb25lKCkgOiBuZXcgVmVjMygxLCAwLCAwKTtcbiAgICB0aGlzLmF4aXNCID0gb3B0aW9ucy5heGlzQiA/IG9wdGlvbnMuYXhpc0IuY2xvbmUoKSA6IG5ldyBWZWMzKDAsIDEsIDApO1xuICAgIHRoaXMuYW5nbGUgPSB0eXBlb2Ygb3B0aW9ucy5hbmdsZSAhPT0gJ3VuZGVmaW5lZCcgPyBvcHRpb25zLmFuZ2xlIDogMDtcbiAgfVxuXG4gIGNvbXB1dGVCKGgpIHtcbiAgICBjb25zdCBhID0gdGhpcy5hO1xuICAgIGNvbnN0IGIgPSB0aGlzLmI7XG4gICAgY29uc3QgbmkgPSB0aGlzLmF4aXNBO1xuICAgIGNvbnN0IG5qID0gdGhpcy5heGlzQjtcbiAgICBjb25zdCBuaXhuaiA9IHRtcFZlYzEkMjtcbiAgICBjb25zdCBuanhuaSA9IHRtcFZlYzIkMjtcbiAgICBjb25zdCBHQSA9IHRoaXMuamFjb2JpYW5FbGVtZW50QTtcbiAgICBjb25zdCBHQiA9IHRoaXMuamFjb2JpYW5FbGVtZW50QjsgLy8gQ2FsdWNsYXRlIGNyb3NzIHByb2R1Y3RzXG5cbiAgICBuaS5jcm9zcyhuaiwgbml4bmopO1xuICAgIG5qLmNyb3NzKG5pLCBuanhuaSk7IC8vIFRoZSBhbmdsZSBiZXR3ZWVuIHR3byB2ZWN0b3IgaXM6XG4gICAgLy8gY29zKHRoZXRhKSA9IGEgKiBiIC8gKGxlbmd0aChhKSAqIGxlbmd0aChiKSA9IHsgbGVuKGEpID0gbGVuKGIpID0gMSB9ID0gYSAqIGJcbiAgICAvLyBnID0gYSAqIGJcbiAgICAvLyBnZG90ID0gKGIgeCBhKSAqIHdpICsgKGEgeCBiKSAqIHdqXG4gICAgLy8gRyA9IFswIGJ4YSAwIGF4Yl1cbiAgICAvLyBXID0gW3ZpIHdpIHZqIHdqXVxuXG4gICAgR0Eucm90YXRpb25hbC5jb3B5KG5qeG5pKTtcbiAgICBHQi5yb3RhdGlvbmFsLmNvcHkobml4bmopO1xuICAgIGNvbnN0IGcgPSBNYXRoLmNvcyh0aGlzLmFuZ2xlKSAtIG5pLmRvdChuaik7XG4gICAgY29uc3QgR1cgPSB0aGlzLmNvbXB1dGVHVygpO1xuICAgIGNvbnN0IEdpTWYgPSB0aGlzLmNvbXB1dGVHaU1mKCk7XG4gICAgY29uc3QgQiA9IC1nICogYSAtIEdXICogYiAtIGggKiBHaU1mO1xuICAgIHJldHVybiBCO1xuICB9XG5cbn1cbmNvbnN0IHRtcFZlYzEkMiA9IG5ldyBWZWMzKCk7XG5jb25zdCB0bXBWZWMyJDIgPSBuZXcgVmVjMygpO1xuXG4vKipcbiAqIFJvdGF0aW9uYWwgY29uc3RyYWludC4gV29ya3MgdG8ga2VlcCB0aGUgbG9jYWwgdmVjdG9ycyBvcnRob2dvbmFsIHRvIGVhY2ggb3RoZXIgaW4gd29ybGQgc3BhY2UuXG4gKi9cbmNsYXNzIFJvdGF0aW9uYWxFcXVhdGlvbiBleHRlbmRzIEVxdWF0aW9uIHtcbiAgLyoqXG4gICAqIFdvcmxkIG9yaWVudGVkIHJvdGF0aW9uYWwgYXhpcy5cbiAgICovXG5cbiAgLyoqXG4gICAqIFdvcmxkIG9yaWVudGVkIHJvdGF0aW9uYWwgYXhpcy5cbiAgICovXG5cbiAgLyoqXG4gICAqIG1heEFuZ2xlXG4gICAqL1xuICBjb25zdHJ1Y3Rvcihib2R5QSwgYm9keUIsIG9wdGlvbnMgPSB7fSkge1xuICAgIGNvbnN0IG1heEZvcmNlID0gdHlwZW9mIG9wdGlvbnMubWF4Rm9yY2UgIT09ICd1bmRlZmluZWQnID8gb3B0aW9ucy5tYXhGb3JjZSA6IDFlNjtcbiAgICBzdXBlcihib2R5QSwgYm9keUIsIC1tYXhGb3JjZSwgbWF4Rm9yY2UpO1xuICAgIHRoaXMuYXhpc0EgPSB2b2lkIDA7XG4gICAgdGhpcy5heGlzQiA9IHZvaWQgMDtcbiAgICB0aGlzLm1heEFuZ2xlID0gdm9pZCAwO1xuICAgIHRoaXMuYXhpc0EgPSBvcHRpb25zLmF4aXNBID8gb3B0aW9ucy5heGlzQS5jbG9uZSgpIDogbmV3IFZlYzMoMSwgMCwgMCk7XG4gICAgdGhpcy5heGlzQiA9IG9wdGlvbnMuYXhpc0IgPyBvcHRpb25zLmF4aXNCLmNsb25lKCkgOiBuZXcgVmVjMygwLCAxLCAwKTtcbiAgICB0aGlzLm1heEFuZ2xlID0gTWF0aC5QSSAvIDI7XG4gIH1cblxuICBjb21wdXRlQihoKSB7XG4gICAgY29uc3QgYSA9IHRoaXMuYTtcbiAgICBjb25zdCBiID0gdGhpcy5iO1xuICAgIGNvbnN0IG5pID0gdGhpcy5heGlzQTtcbiAgICBjb25zdCBuaiA9IHRoaXMuYXhpc0I7XG4gICAgY29uc3Qgbml4bmogPSB0bXBWZWMxJDE7XG4gICAgY29uc3Qgbmp4bmkgPSB0bXBWZWMyJDE7XG4gICAgY29uc3QgR0EgPSB0aGlzLmphY29iaWFuRWxlbWVudEE7XG4gICAgY29uc3QgR0IgPSB0aGlzLmphY29iaWFuRWxlbWVudEI7IC8vIENhbHVjbGF0ZSBjcm9zcyBwcm9kdWN0c1xuXG4gICAgbmkuY3Jvc3MobmosIG5peG5qKTtcbiAgICBuai5jcm9zcyhuaSwgbmp4bmkpOyAvLyBnID0gbmkgKiBualxuICAgIC8vIGdkb3QgPSAobmogeCBuaSkgKiB3aSArIChuaSB4IG5qKSAqIHdqXG4gICAgLy8gRyA9IFswIG5qeG5pIDAgbml4bmpdXG4gICAgLy8gVyA9IFt2aSB3aSB2aiB3al1cblxuICAgIEdBLnJvdGF0aW9uYWwuY29weShuanhuaSk7XG4gICAgR0Iucm90YXRpb25hbC5jb3B5KG5peG5qKTtcbiAgICBjb25zdCBnID0gTWF0aC5jb3ModGhpcy5tYXhBbmdsZSkgLSBuaS5kb3QobmopO1xuICAgIGNvbnN0IEdXID0gdGhpcy5jb21wdXRlR1coKTtcbiAgICBjb25zdCBHaU1mID0gdGhpcy5jb21wdXRlR2lNZigpO1xuICAgIGNvbnN0IEIgPSAtZyAqIGEgLSBHVyAqIGIgLSBoICogR2lNZjtcbiAgICByZXR1cm4gQjtcbiAgfVxuXG59XG5jb25zdCB0bXBWZWMxJDEgPSBuZXcgVmVjMygpO1xuY29uc3QgdG1wVmVjMiQxID0gbmV3IFZlYzMoKTtcblxuLyoqXG4gKiBBIENvbmUgVHdpc3QgY29uc3RyYWludCwgdXNlZnVsIGZvciByYWdkb2xscy5cbiAqL1xuY2xhc3MgQ29uZVR3aXN0Q29uc3RyYWludCBleHRlbmRzIFBvaW50VG9Qb2ludENvbnN0cmFpbnQge1xuICAvKipcbiAgICogVGhlIGF4aXMgZGlyZWN0aW9uIGZvciB0aGUgY29uc3RyYWludCBvZiB0aGUgYm9keSBBLlxuICAgKi9cblxuICAvKipcbiAgICogVGhlIGF4aXMgZGlyZWN0aW9uIGZvciB0aGUgY29uc3RyYWludCBvZiB0aGUgYm9keSBCLlxuICAgKi9cblxuICAvKipcbiAgICogVGhlIGFwZXJ0dXJlIGFuZ2xlIG9mIHRoZSBjb25lLlxuICAgKi9cblxuICAvKipcbiAgICogVGhlIHR3aXN0IGFuZ2xlIG9mIHRoZSBqb2ludC5cbiAgICovXG4gIGNvbnN0cnVjdG9yKGJvZHlBLCBib2R5Qiwgb3B0aW9ucyA9IHt9KSB7XG4gICAgY29uc3QgbWF4Rm9yY2UgPSB0eXBlb2Ygb3B0aW9ucy5tYXhGb3JjZSAhPT0gJ3VuZGVmaW5lZCcgPyBvcHRpb25zLm1heEZvcmNlIDogMWU2OyAvLyBTZXQgcGl2b3QgcG9pbnQgaW4gYmV0d2VlblxuXG4gICAgY29uc3QgcGl2b3RBID0gb3B0aW9ucy5waXZvdEEgPyBvcHRpb25zLnBpdm90QS5jbG9uZSgpIDogbmV3IFZlYzMoKTtcbiAgICBjb25zdCBwaXZvdEIgPSBvcHRpb25zLnBpdm90QiA/IG9wdGlvbnMucGl2b3RCLmNsb25lKCkgOiBuZXcgVmVjMygpO1xuICAgIHN1cGVyKGJvZHlBLCBwaXZvdEEsIGJvZHlCLCBwaXZvdEIsIG1heEZvcmNlKTtcbiAgICB0aGlzLmF4aXNBID0gdm9pZCAwO1xuICAgIHRoaXMuYXhpc0IgPSB2b2lkIDA7XG4gICAgdGhpcy5hbmdsZSA9IHZvaWQgMDtcbiAgICB0aGlzLnR3aXN0QW5nbGUgPSB2b2lkIDA7XG4gICAgdGhpcy5jb25lRXF1YXRpb24gPSB2b2lkIDA7XG4gICAgdGhpcy50d2lzdEVxdWF0aW9uID0gdm9pZCAwO1xuICAgIHRoaXMuYXhpc0EgPSBvcHRpb25zLmF4aXNBID8gb3B0aW9ucy5heGlzQS5jbG9uZSgpIDogbmV3IFZlYzMoKTtcbiAgICB0aGlzLmF4aXNCID0gb3B0aW9ucy5heGlzQiA/IG9wdGlvbnMuYXhpc0IuY2xvbmUoKSA6IG5ldyBWZWMzKCk7XG4gICAgdGhpcy5jb2xsaWRlQ29ubmVjdGVkID0gISFvcHRpb25zLmNvbGxpZGVDb25uZWN0ZWQ7XG4gICAgdGhpcy5hbmdsZSA9IHR5cGVvZiBvcHRpb25zLmFuZ2xlICE9PSAndW5kZWZpbmVkJyA/IG9wdGlvbnMuYW5nbGUgOiAwO1xuICAgIGNvbnN0IGMgPSB0aGlzLmNvbmVFcXVhdGlvbiA9IG5ldyBDb25lRXF1YXRpb24oYm9keUEsIGJvZHlCLCBvcHRpb25zKTtcbiAgICBjb25zdCB0ID0gdGhpcy50d2lzdEVxdWF0aW9uID0gbmV3IFJvdGF0aW9uYWxFcXVhdGlvbihib2R5QSwgYm9keUIsIG9wdGlvbnMpO1xuICAgIHRoaXMudHdpc3RBbmdsZSA9IHR5cGVvZiBvcHRpb25zLnR3aXN0QW5nbGUgIT09ICd1bmRlZmluZWQnID8gb3B0aW9ucy50d2lzdEFuZ2xlIDogMDsgLy8gTWFrZSB0aGUgY29uZSBlcXVhdGlvbiBwdXNoIHRoZSBib2RpZXMgdG93YXJkIHRoZSBjb25lIGF4aXMsIG5vdCBvdXR3YXJkXG5cbiAgICBjLm1heEZvcmNlID0gMDtcbiAgICBjLm1pbkZvcmNlID0gLW1heEZvcmNlOyAvLyBNYWtlIHRoZSB0d2lzdCBlcXVhdGlvbiBhZGQgdG9ycXVlIHRvd2FyZCB0aGUgaW5pdGlhbCBwb3NpdGlvblxuXG4gICAgdC5tYXhGb3JjZSA9IDA7XG4gICAgdC5taW5Gb3JjZSA9IC1tYXhGb3JjZTtcbiAgICB0aGlzLmVxdWF0aW9ucy5wdXNoKGMsIHQpO1xuICB9XG5cbiAgdXBkYXRlKCkge1xuICAgIGNvbnN0IGJvZHlBID0gdGhpcy5ib2R5QTtcbiAgICBjb25zdCBib2R5QiA9IHRoaXMuYm9keUI7XG4gICAgY29uc3QgY29uZSA9IHRoaXMuY29uZUVxdWF0aW9uO1xuICAgIGNvbnN0IHR3aXN0ID0gdGhpcy50d2lzdEVxdWF0aW9uO1xuICAgIHN1cGVyLnVwZGF0ZSgpOyAvLyBVcGRhdGUgdGhlIGF4ZXMgdG8gdGhlIGNvbmUgY29uc3RyYWludFxuXG4gICAgYm9keUEudmVjdG9yVG9Xb3JsZEZyYW1lKHRoaXMuYXhpc0EsIGNvbmUuYXhpc0EpO1xuICAgIGJvZHlCLnZlY3RvclRvV29ybGRGcmFtZSh0aGlzLmF4aXNCLCBjb25lLmF4aXNCKTsgLy8gVXBkYXRlIHRoZSB3b3JsZCBheGVzIGluIHRoZSB0d2lzdCBjb25zdHJhaW50XG5cbiAgICB0aGlzLmF4aXNBLnRhbmdlbnRzKHR3aXN0LmF4aXNBLCB0d2lzdC5heGlzQSk7XG4gICAgYm9keUEudmVjdG9yVG9Xb3JsZEZyYW1lKHR3aXN0LmF4aXNBLCB0d2lzdC5heGlzQSk7XG4gICAgdGhpcy5heGlzQi50YW5nZW50cyh0d2lzdC5heGlzQiwgdHdpc3QuYXhpc0IpO1xuICAgIGJvZHlCLnZlY3RvclRvV29ybGRGcmFtZSh0d2lzdC5heGlzQiwgdHdpc3QuYXhpc0IpO1xuICAgIGNvbmUuYW5nbGUgPSB0aGlzLmFuZ2xlO1xuICAgIHR3aXN0Lm1heEFuZ2xlID0gdGhpcy50d2lzdEFuZ2xlO1xuICB9XG5cbn1cblxuLyoqXG4gKiBDb25zdHJhaW5zIHR3byBib2RpZXMgdG8gYmUgYXQgYSBjb25zdGFudCBkaXN0YW5jZSBmcm9tIGVhY2ggb3RoZXJzIGNlbnRlciBvZiBtYXNzLlxuICovXG5jbGFzcyBEaXN0YW5jZUNvbnN0cmFpbnQgZXh0ZW5kcyBDb25zdHJhaW50IHtcbiAgLyoqXG4gICAqIFRoZSBkaXN0YW5jZSB0byBrZWVwLiBJZiB1bmRlZmluZWQsIGl0IHdpbGwgYmUgc2V0IHRvIHRoZSBjdXJyZW50IGRpc3RhbmNlIGJldHdlZW4gYm9keUEgYW5kIGJvZHlCXG4gICAqL1xuXG4gIC8qKlxuICAgKiBAcGFyYW0gZGlzdGFuY2UgVGhlIGRpc3RhbmNlIHRvIGtlZXAuIElmIHVuZGVmaW5lZCwgaXQgd2lsbCBiZSBzZXQgdG8gdGhlIGN1cnJlbnQgZGlzdGFuY2UgYmV0d2VlbiBib2R5QSBhbmQgYm9keUIuXG4gICAqIEBwYXJhbSBtYXhGb3JjZSBUaGUgbWF4aW11bSBmb3JjZSB0aGF0IHNob3VsZCBiZSBhcHBsaWVkIHRvIGNvbnN0cmFpbiB0aGUgYm9kaWVzLlxuICAgKi9cbiAgY29uc3RydWN0b3IoYm9keUEsIGJvZHlCLCBkaXN0YW5jZSwgbWF4Rm9yY2UgPSAxZTYpIHtcbiAgICBzdXBlcihib2R5QSwgYm9keUIpO1xuICAgIHRoaXMuZGlzdGFuY2UgPSB2b2lkIDA7XG4gICAgdGhpcy5kaXN0YW5jZUVxdWF0aW9uID0gdm9pZCAwO1xuXG4gICAgaWYgKHR5cGVvZiBkaXN0YW5jZSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIGRpc3RhbmNlID0gYm9keUEucG9zaXRpb24uZGlzdGFuY2VUbyhib2R5Qi5wb3NpdGlvbik7XG4gICAgfVxuXG4gICAgdGhpcy5kaXN0YW5jZSA9IGRpc3RhbmNlO1xuICAgIGNvbnN0IGVxID0gdGhpcy5kaXN0YW5jZUVxdWF0aW9uID0gbmV3IENvbnRhY3RFcXVhdGlvbihib2R5QSwgYm9keUIpO1xuICAgIHRoaXMuZXF1YXRpb25zLnB1c2goZXEpOyAvLyBNYWtlIGl0IGJpZGlyZWN0aW9uYWxcblxuICAgIGVxLm1pbkZvcmNlID0gLW1heEZvcmNlO1xuICAgIGVxLm1heEZvcmNlID0gbWF4Rm9yY2U7XG4gIH1cbiAgLyoqXG4gICAqIHVwZGF0ZVxuICAgKi9cblxuXG4gIHVwZGF0ZSgpIHtcbiAgICBjb25zdCBib2R5QSA9IHRoaXMuYm9keUE7XG4gICAgY29uc3QgYm9keUIgPSB0aGlzLmJvZHlCO1xuICAgIGNvbnN0IGVxID0gdGhpcy5kaXN0YW5jZUVxdWF0aW9uO1xuICAgIGNvbnN0IGhhbGZEaXN0ID0gdGhpcy5kaXN0YW5jZSAqIDAuNTtcbiAgICBjb25zdCBub3JtYWwgPSBlcS5uaTtcbiAgICBib2R5Qi5wb3NpdGlvbi52c3ViKGJvZHlBLnBvc2l0aW9uLCBub3JtYWwpO1xuICAgIG5vcm1hbC5ub3JtYWxpemUoKTtcbiAgICBub3JtYWwuc2NhbGUoaGFsZkRpc3QsIGVxLnJpKTtcbiAgICBub3JtYWwuc2NhbGUoLWhhbGZEaXN0LCBlcS5yaik7XG4gIH1cblxufVxuXG4vKipcbiAqIExvY2sgY29uc3RyYWludC4gV2lsbCByZW1vdmUgYWxsIGRlZ3JlZXMgb2YgZnJlZWRvbSBiZXR3ZWVuIHRoZSBib2RpZXMuXG4gKi9cbmNsYXNzIExvY2tDb25zdHJhaW50IGV4dGVuZHMgUG9pbnRUb1BvaW50Q29uc3RyYWludCB7XG4gIGNvbnN0cnVjdG9yKGJvZHlBLCBib2R5Qiwgb3B0aW9ucyA9IHt9KSB7XG4gICAgY29uc3QgbWF4Rm9yY2UgPSB0eXBlb2Ygb3B0aW9ucy5tYXhGb3JjZSAhPT0gJ3VuZGVmaW5lZCcgPyBvcHRpb25zLm1heEZvcmNlIDogMWU2OyAvLyBTZXQgcGl2b3QgcG9pbnQgaW4gYmV0d2VlblxuXG4gICAgY29uc3QgcGl2b3RBID0gbmV3IFZlYzMoKTtcbiAgICBjb25zdCBwaXZvdEIgPSBuZXcgVmVjMygpO1xuICAgIGNvbnN0IGhhbGZXYXkgPSBuZXcgVmVjMygpO1xuICAgIGJvZHlBLnBvc2l0aW9uLnZhZGQoYm9keUIucG9zaXRpb24sIGhhbGZXYXkpO1xuICAgIGhhbGZXYXkuc2NhbGUoMC41LCBoYWxmV2F5KTtcbiAgICBib2R5Qi5wb2ludFRvTG9jYWxGcmFtZShoYWxmV2F5LCBwaXZvdEIpO1xuICAgIGJvZHlBLnBvaW50VG9Mb2NhbEZyYW1lKGhhbGZXYXksIHBpdm90QSk7IC8vIFRoZSBwb2ludC10by1wb2ludCBjb25zdHJhaW50IHdpbGwga2VlcCBhIHBvaW50IHNoYXJlZCBiZXR3ZWVuIHRoZSBib2RpZXNcblxuICAgIHN1cGVyKGJvZHlBLCBwaXZvdEEsIGJvZHlCLCBwaXZvdEIsIG1heEZvcmNlKTsgLy8gU3RvcmUgaW5pdGlhbCByb3RhdGlvbiBvZiB0aGUgYm9kaWVzIGFzIHVuaXQgdmVjdG9ycyBpbiB0aGUgbG9jYWwgYm9keSBzcGFjZXNcblxuICAgIHRoaXMueEEgPSB2b2lkIDA7XG4gICAgdGhpcy54QiA9IHZvaWQgMDtcbiAgICB0aGlzLnlBID0gdm9pZCAwO1xuICAgIHRoaXMueUIgPSB2b2lkIDA7XG4gICAgdGhpcy56QSA9IHZvaWQgMDtcbiAgICB0aGlzLnpCID0gdm9pZCAwO1xuICAgIHRoaXMucm90YXRpb25hbEVxdWF0aW9uMSA9IHZvaWQgMDtcbiAgICB0aGlzLnJvdGF0aW9uYWxFcXVhdGlvbjIgPSB2b2lkIDA7XG4gICAgdGhpcy5yb3RhdGlvbmFsRXF1YXRpb24zID0gdm9pZCAwO1xuICAgIHRoaXMubW90b3JFcXVhdGlvbiA9IHZvaWQgMDtcbiAgICB0aGlzLnhBID0gYm9keUEudmVjdG9yVG9Mb2NhbEZyYW1lKFZlYzMuVU5JVF9YKTtcbiAgICB0aGlzLnhCID0gYm9keUIudmVjdG9yVG9Mb2NhbEZyYW1lKFZlYzMuVU5JVF9YKTtcbiAgICB0aGlzLnlBID0gYm9keUEudmVjdG9yVG9Mb2NhbEZyYW1lKFZlYzMuVU5JVF9ZKTtcbiAgICB0aGlzLnlCID0gYm9keUIudmVjdG9yVG9Mb2NhbEZyYW1lKFZlYzMuVU5JVF9ZKTtcbiAgICB0aGlzLnpBID0gYm9keUEudmVjdG9yVG9Mb2NhbEZyYW1lKFZlYzMuVU5JVF9aKTtcbiAgICB0aGlzLnpCID0gYm9keUIudmVjdG9yVG9Mb2NhbEZyYW1lKFZlYzMuVU5JVF9aKTsgLy8gLi4uYW5kIHRoZSBmb2xsb3dpbmcgcm90YXRpb25hbCBlcXVhdGlvbnMgd2lsbCBrZWVwIGFsbCByb3RhdGlvbmFsIERPRidzIGluIHBsYWNlXG5cbiAgICBjb25zdCByMSA9IHRoaXMucm90YXRpb25hbEVxdWF0aW9uMSA9IG5ldyBSb3RhdGlvbmFsRXF1YXRpb24oYm9keUEsIGJvZHlCLCBvcHRpb25zKTtcbiAgICBjb25zdCByMiA9IHRoaXMucm90YXRpb25hbEVxdWF0aW9uMiA9IG5ldyBSb3RhdGlvbmFsRXF1YXRpb24oYm9keUEsIGJvZHlCLCBvcHRpb25zKTtcbiAgICBjb25zdCByMyA9IHRoaXMucm90YXRpb25hbEVxdWF0aW9uMyA9IG5ldyBSb3RhdGlvbmFsRXF1YXRpb24oYm9keUEsIGJvZHlCLCBvcHRpb25zKTtcbiAgICB0aGlzLmVxdWF0aW9ucy5wdXNoKHIxLCByMiwgcjMpO1xuICB9XG4gIC8qKlxuICAgKiB1cGRhdGVcbiAgICovXG5cblxuICB1cGRhdGUoKSB7XG4gICAgY29uc3QgYm9keUEgPSB0aGlzLmJvZHlBO1xuICAgIGNvbnN0IGJvZHlCID0gdGhpcy5ib2R5QjtcbiAgICB0aGlzLm1vdG9yRXF1YXRpb247XG4gICAgY29uc3QgcjEgPSB0aGlzLnJvdGF0aW9uYWxFcXVhdGlvbjE7XG4gICAgY29uc3QgcjIgPSB0aGlzLnJvdGF0aW9uYWxFcXVhdGlvbjI7XG4gICAgY29uc3QgcjMgPSB0aGlzLnJvdGF0aW9uYWxFcXVhdGlvbjM7XG4gICAgc3VwZXIudXBkYXRlKCk7IC8vIFRoZXNlIHZlY3RvciBwYWlycyBtdXN0IGJlIG9ydGhvZ29uYWxcblxuICAgIGJvZHlBLnZlY3RvclRvV29ybGRGcmFtZSh0aGlzLnhBLCByMS5heGlzQSk7XG4gICAgYm9keUIudmVjdG9yVG9Xb3JsZEZyYW1lKHRoaXMueUIsIHIxLmF4aXNCKTtcbiAgICBib2R5QS52ZWN0b3JUb1dvcmxkRnJhbWUodGhpcy55QSwgcjIuYXhpc0EpO1xuICAgIGJvZHlCLnZlY3RvclRvV29ybGRGcmFtZSh0aGlzLnpCLCByMi5heGlzQik7XG4gICAgYm9keUEudmVjdG9yVG9Xb3JsZEZyYW1lKHRoaXMuekEsIHIzLmF4aXNBKTtcbiAgICBib2R5Qi52ZWN0b3JUb1dvcmxkRnJhbWUodGhpcy54QiwgcjMuYXhpc0IpO1xuICB9XG5cbn1cblxuLyoqXG4gKiBSb3RhdGlvbmFsIG1vdG9yIGNvbnN0cmFpbnQuIFRyaWVzIHRvIGtlZXAgdGhlIHJlbGF0aXZlIGFuZ3VsYXIgdmVsb2NpdHkgb2YgdGhlIGJvZGllcyB0byBhIGdpdmVuIHZhbHVlLlxuICovXG5jbGFzcyBSb3RhdGlvbmFsTW90b3JFcXVhdGlvbiBleHRlbmRzIEVxdWF0aW9uIHtcbiAgLyoqXG4gICAqIFdvcmxkIG9yaWVudGVkIHJvdGF0aW9uYWwgYXhpcy5cbiAgICovXG5cbiAgLyoqXG4gICAqIFdvcmxkIG9yaWVudGVkIHJvdGF0aW9uYWwgYXhpcy5cbiAgICovXG5cbiAgLyoqXG4gICAqIE1vdG9yIHZlbG9jaXR5LlxuICAgKi9cbiAgY29uc3RydWN0b3IoYm9keUEsIGJvZHlCLCBtYXhGb3JjZSA9IDFlNikge1xuICAgIHN1cGVyKGJvZHlBLCBib2R5QiwgLW1heEZvcmNlLCBtYXhGb3JjZSk7XG4gICAgdGhpcy5heGlzQSA9IHZvaWQgMDtcbiAgICB0aGlzLmF4aXNCID0gdm9pZCAwO1xuICAgIHRoaXMudGFyZ2V0VmVsb2NpdHkgPSB2b2lkIDA7XG4gICAgdGhpcy5heGlzQSA9IG5ldyBWZWMzKCk7XG4gICAgdGhpcy5heGlzQiA9IG5ldyBWZWMzKCk7XG4gICAgdGhpcy50YXJnZXRWZWxvY2l0eSA9IDA7XG4gIH1cblxuICBjb21wdXRlQihoKSB7XG4gICAgdGhpcy5hO1xuICAgIGNvbnN0IGIgPSB0aGlzLmI7XG4gICAgdGhpcy5iaTtcbiAgICB0aGlzLmJqO1xuICAgIGNvbnN0IGF4aXNBID0gdGhpcy5heGlzQTtcbiAgICBjb25zdCBheGlzQiA9IHRoaXMuYXhpc0I7XG4gICAgY29uc3QgR0EgPSB0aGlzLmphY29iaWFuRWxlbWVudEE7XG4gICAgY29uc3QgR0IgPSB0aGlzLmphY29iaWFuRWxlbWVudEI7IC8vIGcgPSAwXG4gICAgLy8gZ2RvdCA9IGF4aXNBICogd2kgLSBheGlzQiAqIHdqXG4gICAgLy8gZ2RvdCA9IEcgKiBXID0gRyAqIFt2aSB3aSB2aiB3al1cbiAgICAvLyA9PlxuICAgIC8vIEcgPSBbMCBheGlzQSAwIC1heGlzQl1cblxuICAgIEdBLnJvdGF0aW9uYWwuY29weShheGlzQSk7XG4gICAgYXhpc0IubmVnYXRlKEdCLnJvdGF0aW9uYWwpO1xuICAgIGNvbnN0IEdXID0gdGhpcy5jb21wdXRlR1coKSAtIHRoaXMudGFyZ2V0VmVsb2NpdHk7XG4gICAgY29uc3QgR2lNZiA9IHRoaXMuY29tcHV0ZUdpTWYoKTtcbiAgICBjb25zdCBCID0gLUdXICogYiAtIGggKiBHaU1mO1xuICAgIHJldHVybiBCO1xuICB9XG5cbn1cblxuLyoqXG4gKiBIaW5nZSBjb25zdHJhaW50LiBUaGluayBvZiBpdCBhcyBhIGRvb3IgaGluZ2UuIEl0IHRyaWVzIHRvIGtlZXAgdGhlIGRvb3IgaW4gdGhlIGNvcnJlY3QgcGxhY2UgYW5kIHdpdGggdGhlIGNvcnJlY3Qgb3JpZW50YXRpb24uXG4gKi9cbmNsYXNzIEhpbmdlQ29uc3RyYWludCBleHRlbmRzIFBvaW50VG9Qb2ludENvbnN0cmFpbnQge1xuICAvKipcbiAgICogUm90YXRpb24gYXhpcywgZGVmaW5lZCBsb2NhbGx5IGluIGJvZHlBLlxuICAgKi9cblxuICAvKipcbiAgICogUm90YXRpb24gYXhpcywgZGVmaW5lZCBsb2NhbGx5IGluIGJvZHlCLlxuICAgKi9cbiAgY29uc3RydWN0b3IoYm9keUEsIGJvZHlCLCBvcHRpb25zID0ge30pIHtcbiAgICBjb25zdCBtYXhGb3JjZSA9IHR5cGVvZiBvcHRpb25zLm1heEZvcmNlICE9PSAndW5kZWZpbmVkJyA/IG9wdGlvbnMubWF4Rm9yY2UgOiAxZTY7XG4gICAgY29uc3QgcGl2b3RBID0gb3B0aW9ucy5waXZvdEEgPyBvcHRpb25zLnBpdm90QS5jbG9uZSgpIDogbmV3IFZlYzMoKTtcbiAgICBjb25zdCBwaXZvdEIgPSBvcHRpb25zLnBpdm90QiA/IG9wdGlvbnMucGl2b3RCLmNsb25lKCkgOiBuZXcgVmVjMygpO1xuICAgIHN1cGVyKGJvZHlBLCBwaXZvdEEsIGJvZHlCLCBwaXZvdEIsIG1heEZvcmNlKTtcbiAgICB0aGlzLmF4aXNBID0gdm9pZCAwO1xuICAgIHRoaXMuYXhpc0IgPSB2b2lkIDA7XG4gICAgdGhpcy5yb3RhdGlvbmFsRXF1YXRpb24xID0gdm9pZCAwO1xuICAgIHRoaXMucm90YXRpb25hbEVxdWF0aW9uMiA9IHZvaWQgMDtcbiAgICB0aGlzLm1vdG9yRXF1YXRpb24gPSB2b2lkIDA7XG4gICAgY29uc3QgYXhpc0EgPSB0aGlzLmF4aXNBID0gb3B0aW9ucy5heGlzQSA/IG9wdGlvbnMuYXhpc0EuY2xvbmUoKSA6IG5ldyBWZWMzKDEsIDAsIDApO1xuICAgIGF4aXNBLm5vcm1hbGl6ZSgpO1xuICAgIGNvbnN0IGF4aXNCID0gdGhpcy5heGlzQiA9IG9wdGlvbnMuYXhpc0IgPyBvcHRpb25zLmF4aXNCLmNsb25lKCkgOiBuZXcgVmVjMygxLCAwLCAwKTtcbiAgICBheGlzQi5ub3JtYWxpemUoKTtcbiAgICB0aGlzLmNvbGxpZGVDb25uZWN0ZWQgPSAhIW9wdGlvbnMuY29sbGlkZUNvbm5lY3RlZDtcbiAgICBjb25zdCByb3RhdGlvbmFsMSA9IHRoaXMucm90YXRpb25hbEVxdWF0aW9uMSA9IG5ldyBSb3RhdGlvbmFsRXF1YXRpb24oYm9keUEsIGJvZHlCLCBvcHRpb25zKTtcbiAgICBjb25zdCByb3RhdGlvbmFsMiA9IHRoaXMucm90YXRpb25hbEVxdWF0aW9uMiA9IG5ldyBSb3RhdGlvbmFsRXF1YXRpb24oYm9keUEsIGJvZHlCLCBvcHRpb25zKTtcbiAgICBjb25zdCBtb3RvciA9IHRoaXMubW90b3JFcXVhdGlvbiA9IG5ldyBSb3RhdGlvbmFsTW90b3JFcXVhdGlvbihib2R5QSwgYm9keUIsIG1heEZvcmNlKTtcbiAgICBtb3Rvci5lbmFibGVkID0gZmFsc2U7IC8vIE5vdCBlbmFibGVkIGJ5IGRlZmF1bHRcbiAgICAvLyBFcXVhdGlvbnMgdG8gYmUgZmVkIHRvIHRoZSBzb2x2ZXJcblxuICAgIHRoaXMuZXF1YXRpb25zLnB1c2gocm90YXRpb25hbDEsIHJvdGF0aW9uYWwyLCBtb3Rvcik7XG4gIH1cbiAgLyoqXG4gICAqIGVuYWJsZU1vdG9yXG4gICAqL1xuXG5cbiAgZW5hYmxlTW90b3IoKSB7XG4gICAgdGhpcy5tb3RvckVxdWF0aW9uLmVuYWJsZWQgPSB0cnVlO1xuICB9XG4gIC8qKlxuICAgKiBkaXNhYmxlTW90b3JcbiAgICovXG5cblxuICBkaXNhYmxlTW90b3IoKSB7XG4gICAgdGhpcy5tb3RvckVxdWF0aW9uLmVuYWJsZWQgPSBmYWxzZTtcbiAgfVxuICAvKipcbiAgICogc2V0TW90b3JTcGVlZFxuICAgKi9cblxuXG4gIHNldE1vdG9yU3BlZWQoc3BlZWQpIHtcbiAgICB0aGlzLm1vdG9yRXF1YXRpb24udGFyZ2V0VmVsb2NpdHkgPSBzcGVlZDtcbiAgfVxuICAvKipcbiAgICogc2V0TW90b3JNYXhGb3JjZVxuICAgKi9cblxuXG4gIHNldE1vdG9yTWF4Rm9yY2UobWF4Rm9yY2UpIHtcbiAgICB0aGlzLm1vdG9yRXF1YXRpb24ubWF4Rm9yY2UgPSBtYXhGb3JjZTtcbiAgICB0aGlzLm1vdG9yRXF1YXRpb24ubWluRm9yY2UgPSAtbWF4Rm9yY2U7XG4gIH1cbiAgLyoqXG4gICAqIHVwZGF0ZVxuICAgKi9cblxuXG4gIHVwZGF0ZSgpIHtcbiAgICBjb25zdCBib2R5QSA9IHRoaXMuYm9keUE7XG4gICAgY29uc3QgYm9keUIgPSB0aGlzLmJvZHlCO1xuICAgIGNvbnN0IG1vdG9yID0gdGhpcy5tb3RvckVxdWF0aW9uO1xuICAgIGNvbnN0IHIxID0gdGhpcy5yb3RhdGlvbmFsRXF1YXRpb24xO1xuICAgIGNvbnN0IHIyID0gdGhpcy5yb3RhdGlvbmFsRXF1YXRpb24yO1xuICAgIGNvbnN0IHdvcmxkQXhpc0EgPSBIaW5nZUNvbnN0cmFpbnRfdXBkYXRlX3RtcFZlYzE7XG4gICAgY29uc3Qgd29ybGRBeGlzQiA9IEhpbmdlQ29uc3RyYWludF91cGRhdGVfdG1wVmVjMjtcbiAgICBjb25zdCBheGlzQSA9IHRoaXMuYXhpc0E7XG4gICAgY29uc3QgYXhpc0IgPSB0aGlzLmF4aXNCO1xuICAgIHN1cGVyLnVwZGF0ZSgpOyAvLyBHZXQgd29ybGQgYXhlc1xuXG4gICAgYm9keUEucXVhdGVybmlvbi52bXVsdChheGlzQSwgd29ybGRBeGlzQSk7XG4gICAgYm9keUIucXVhdGVybmlvbi52bXVsdChheGlzQiwgd29ybGRBeGlzQik7XG4gICAgd29ybGRBeGlzQS50YW5nZW50cyhyMS5heGlzQSwgcjIuYXhpc0EpO1xuICAgIHIxLmF4aXNCLmNvcHkod29ybGRBeGlzQik7XG4gICAgcjIuYXhpc0IuY29weSh3b3JsZEF4aXNCKTtcblxuICAgIGlmICh0aGlzLm1vdG9yRXF1YXRpb24uZW5hYmxlZCkge1xuICAgICAgYm9keUEucXVhdGVybmlvbi52bXVsdCh0aGlzLmF4aXNBLCBtb3Rvci5heGlzQSk7XG4gICAgICBib2R5Qi5xdWF0ZXJuaW9uLnZtdWx0KHRoaXMuYXhpc0IsIG1vdG9yLmF4aXNCKTtcbiAgICB9XG4gIH1cblxufVxuY29uc3QgSGluZ2VDb25zdHJhaW50X3VwZGF0ZV90bXBWZWMxID0gbmV3IFZlYzMoKTtcbmNvbnN0IEhpbmdlQ29uc3RyYWludF91cGRhdGVfdG1wVmVjMiA9IG5ldyBWZWMzKCk7XG5cbi8qKlxuICogQ29uc3RyYWlucyB0aGUgc2xpcHBpbmcgaW4gYSBjb250YWN0IGFsb25nIGEgdGFuZ2VudFxuICovXG5jbGFzcyBGcmljdGlvbkVxdWF0aW9uIGV4dGVuZHMgRXF1YXRpb24ge1xuICAvLyBUYW5nZW50XG5cbiAgLyoqXG4gICAqIEBwYXJhbSBzbGlwRm9yY2Ugc2hvdWxkIGJlICstRl9mcmljdGlvbiA9ICstbXUgKiBGX25vcm1hbCA9ICstbXUgKiBtICogZ1xuICAgKi9cbiAgY29uc3RydWN0b3IoYm9keUEsIGJvZHlCLCBzbGlwRm9yY2UpIHtcbiAgICBzdXBlcihib2R5QSwgYm9keUIsIC1zbGlwRm9yY2UsIHNsaXBGb3JjZSk7XG4gICAgdGhpcy5yaSA9IHZvaWQgMDtcbiAgICB0aGlzLnJqID0gdm9pZCAwO1xuICAgIHRoaXMudCA9IHZvaWQgMDtcbiAgICB0aGlzLnJpID0gbmV3IFZlYzMoKTtcbiAgICB0aGlzLnJqID0gbmV3IFZlYzMoKTtcbiAgICB0aGlzLnQgPSBuZXcgVmVjMygpO1xuICB9XG5cbiAgY29tcHV0ZUIoaCkge1xuICAgIHRoaXMuYTtcbiAgICBjb25zdCBiID0gdGhpcy5iO1xuICAgIHRoaXMuYmk7XG4gICAgdGhpcy5iajtcbiAgICBjb25zdCByaSA9IHRoaXMucmk7XG4gICAgY29uc3QgcmogPSB0aGlzLnJqO1xuICAgIGNvbnN0IHJpeHQgPSBGcmljdGlvbkVxdWF0aW9uX2NvbXB1dGVCX3RlbXAxO1xuICAgIGNvbnN0IHJqeHQgPSBGcmljdGlvbkVxdWF0aW9uX2NvbXB1dGVCX3RlbXAyO1xuICAgIGNvbnN0IHQgPSB0aGlzLnQ7IC8vIENhbHVjbGF0ZSBjcm9zcyBwcm9kdWN0c1xuXG4gICAgcmkuY3Jvc3ModCwgcml4dCk7XG4gICAgcmouY3Jvc3ModCwgcmp4dCk7IC8vIEcgPSBbLXQgLXJpeHQgdCByanh0XVxuICAgIC8vIEFuZCByZW1lbWJlciwgdGhpcyBpcyBhIHB1cmUgdmVsb2NpdHkgY29uc3RyYWludCwgZyBpcyBhbHdheXMgemVybyFcblxuICAgIGNvbnN0IEdBID0gdGhpcy5qYWNvYmlhbkVsZW1lbnRBO1xuICAgIGNvbnN0IEdCID0gdGhpcy5qYWNvYmlhbkVsZW1lbnRCO1xuICAgIHQubmVnYXRlKEdBLnNwYXRpYWwpO1xuICAgIHJpeHQubmVnYXRlKEdBLnJvdGF0aW9uYWwpO1xuICAgIEdCLnNwYXRpYWwuY29weSh0KTtcbiAgICBHQi5yb3RhdGlvbmFsLmNvcHkocmp4dCk7XG4gICAgY29uc3QgR1cgPSB0aGlzLmNvbXB1dGVHVygpO1xuICAgIGNvbnN0IEdpTWYgPSB0aGlzLmNvbXB1dGVHaU1mKCk7XG4gICAgY29uc3QgQiA9IC1HVyAqIGIgLSBoICogR2lNZjtcbiAgICByZXR1cm4gQjtcbiAgfVxuXG59XG5jb25zdCBGcmljdGlvbkVxdWF0aW9uX2NvbXB1dGVCX3RlbXAxID0gbmV3IFZlYzMoKTtcbmNvbnN0IEZyaWN0aW9uRXF1YXRpb25fY29tcHV0ZUJfdGVtcDIgPSBuZXcgVmVjMygpO1xuXG4vKipcbiAqIERlZmluZXMgd2hhdCBoYXBwZW5zIHdoZW4gdHdvIG1hdGVyaWFscyBtZWV0LlxuICogQHRvZG8gUmVmYWN0b3IgbWF0ZXJpYWxzIHRvIG1hdGVyaWFsQSBhbmQgbWF0ZXJpYWxCXG4gKi9cbmNsYXNzIENvbnRhY3RNYXRlcmlhbCB7XG4gIC8qKlxuICAgKiBJZGVudGlmaWVyIG9mIHRoaXMgbWF0ZXJpYWwuXG4gICAqL1xuXG4gIC8qKlxuICAgKiBQYXJ0aWNpcGF0aW5nIG1hdGVyaWFscy5cbiAgICovXG5cbiAgLyoqXG4gICAqIEZyaWN0aW9uIGNvZWZmaWNpZW50LlxuICAgKiBAZGVmYXVsdCAwLjNcbiAgICovXG5cbiAgLyoqXG4gICAqIFJlc3RpdHV0aW9uIGNvZWZmaWNpZW50LlxuICAgKiBAZGVmYXVsdCAwLjNcbiAgICovXG5cbiAgLyoqXG4gICAqIFN0aWZmbmVzcyBvZiB0aGUgcHJvZHVjZWQgY29udGFjdCBlcXVhdGlvbnMuXG4gICAqIEBkZWZhdWx0IDFlN1xuICAgKi9cblxuICAvKipcbiAgICogUmVsYXhhdGlvbiB0aW1lIG9mIHRoZSBwcm9kdWNlZCBjb250YWN0IGVxdWF0aW9ucy5cbiAgICogQGRlZmF1bHQgM1xuICAgKi9cblxuICAvKipcbiAgICogU3RpZmZuZXNzIG9mIHRoZSBwcm9kdWNlZCBmcmljdGlvbiBlcXVhdGlvbnMuXG4gICAqIEBkZWZhdWx0IDFlN1xuICAgKi9cblxuICAvKipcbiAgICogUmVsYXhhdGlvbiB0aW1lIG9mIHRoZSBwcm9kdWNlZCBmcmljdGlvbiBlcXVhdGlvbnNcbiAgICogQGRlZmF1bHQgM1xuICAgKi9cbiAgY29uc3RydWN0b3IobTEsIG0yLCBvcHRpb25zKSB7XG4gICAgdGhpcy5pZCA9IHZvaWQgMDtcbiAgICB0aGlzLm1hdGVyaWFscyA9IHZvaWQgMDtcbiAgICB0aGlzLmZyaWN0aW9uID0gdm9pZCAwO1xuICAgIHRoaXMucmVzdGl0dXRpb24gPSB2b2lkIDA7XG4gICAgdGhpcy5jb250YWN0RXF1YXRpb25TdGlmZm5lc3MgPSB2b2lkIDA7XG4gICAgdGhpcy5jb250YWN0RXF1YXRpb25SZWxheGF0aW9uID0gdm9pZCAwO1xuICAgIHRoaXMuZnJpY3Rpb25FcXVhdGlvblN0aWZmbmVzcyA9IHZvaWQgMDtcbiAgICB0aGlzLmZyaWN0aW9uRXF1YXRpb25SZWxheGF0aW9uID0gdm9pZCAwO1xuICAgIG9wdGlvbnMgPSBVdGlscy5kZWZhdWx0cyhvcHRpb25zLCB7XG4gICAgICBmcmljdGlvbjogMC4zLFxuICAgICAgcmVzdGl0dXRpb246IDAuMyxcbiAgICAgIGNvbnRhY3RFcXVhdGlvblN0aWZmbmVzczogMWU3LFxuICAgICAgY29udGFjdEVxdWF0aW9uUmVsYXhhdGlvbjogMyxcbiAgICAgIGZyaWN0aW9uRXF1YXRpb25TdGlmZm5lc3M6IDFlNyxcbiAgICAgIGZyaWN0aW9uRXF1YXRpb25SZWxheGF0aW9uOiAzXG4gICAgfSk7XG4gICAgdGhpcy5pZCA9IENvbnRhY3RNYXRlcmlhbC5pZENvdW50ZXIrKztcbiAgICB0aGlzLm1hdGVyaWFscyA9IFttMSwgbTJdO1xuICAgIHRoaXMuZnJpY3Rpb24gPSBvcHRpb25zLmZyaWN0aW9uO1xuICAgIHRoaXMucmVzdGl0dXRpb24gPSBvcHRpb25zLnJlc3RpdHV0aW9uO1xuICAgIHRoaXMuY29udGFjdEVxdWF0aW9uU3RpZmZuZXNzID0gb3B0aW9ucy5jb250YWN0RXF1YXRpb25TdGlmZm5lc3M7XG4gICAgdGhpcy5jb250YWN0RXF1YXRpb25SZWxheGF0aW9uID0gb3B0aW9ucy5jb250YWN0RXF1YXRpb25SZWxheGF0aW9uO1xuICAgIHRoaXMuZnJpY3Rpb25FcXVhdGlvblN0aWZmbmVzcyA9IG9wdGlvbnMuZnJpY3Rpb25FcXVhdGlvblN0aWZmbmVzcztcbiAgICB0aGlzLmZyaWN0aW9uRXF1YXRpb25SZWxheGF0aW9uID0gb3B0aW9ucy5mcmljdGlvbkVxdWF0aW9uUmVsYXhhdGlvbjtcbiAgfVxuXG59XG5Db250YWN0TWF0ZXJpYWwuaWRDb3VudGVyID0gMDtcblxuLyoqXG4gKiBEZWZpbmVzIGEgcGh5c2ljcyBtYXRlcmlhbC5cbiAqL1xuY2xhc3MgTWF0ZXJpYWwge1xuICAvKipcbiAgICogTWF0ZXJpYWwgbmFtZS5cbiAgICogSWYgb3B0aW9ucyBpcyBhIHN0cmluZywgbmFtZSB3aWxsIGJlIHNldCB0byB0aGF0IHN0cmluZy5cbiAgICogQHRvZG8gRGVwcmVjYXRlIHRoaXNcbiAgICovXG5cbiAgLyoqIE1hdGVyaWFsIGlkLiAqL1xuXG4gIC8qKlxuICAgKiBGcmljdGlvbiBmb3IgdGhpcyBtYXRlcmlhbC5cbiAgICogSWYgbm9uLW5lZ2F0aXZlLCBpdCB3aWxsIGJlIHVzZWQgaW5zdGVhZCBvZiB0aGUgZnJpY3Rpb24gZ2l2ZW4gYnkgQ29udGFjdE1hdGVyaWFscy4gSWYgdGhlcmUncyBubyBtYXRjaGluZyBDb250YWN0TWF0ZXJpYWwsIHRoZSB2YWx1ZSBmcm9tIGBkZWZhdWx0Q29udGFjdE1hdGVyaWFsYCBpbiB0aGUgV29ybGQgd2lsbCBiZSB1c2VkLlxuICAgKi9cblxuICAvKipcbiAgICogUmVzdGl0dXRpb24gZm9yIHRoaXMgbWF0ZXJpYWwuXG4gICAqIElmIG5vbi1uZWdhdGl2ZSwgaXQgd2lsbCBiZSB1c2VkIGluc3RlYWQgb2YgdGhlIHJlc3RpdHV0aW9uIGdpdmVuIGJ5IENvbnRhY3RNYXRlcmlhbHMuIElmIHRoZXJlJ3Mgbm8gbWF0Y2hpbmcgQ29udGFjdE1hdGVyaWFsLCB0aGUgdmFsdWUgZnJvbSBgZGVmYXVsdENvbnRhY3RNYXRlcmlhbGAgaW4gdGhlIFdvcmxkIHdpbGwgYmUgdXNlZC5cbiAgICovXG4gIGNvbnN0cnVjdG9yKG9wdGlvbnMgPSB7fSkge1xuICAgIHRoaXMubmFtZSA9IHZvaWQgMDtcbiAgICB0aGlzLmlkID0gdm9pZCAwO1xuICAgIHRoaXMuZnJpY3Rpb24gPSB2b2lkIDA7XG4gICAgdGhpcy5yZXN0aXR1dGlvbiA9IHZvaWQgMDtcbiAgICBsZXQgbmFtZSA9ICcnOyAvLyBCYWNrd2FyZHMgY29tcGF0aWJpbGl0eSBmaXhcblxuICAgIGlmICh0eXBlb2Ygb3B0aW9ucyA9PT0gJ3N0cmluZycpIHtcbiAgICAgIC8vY29uc29sZS53YXJuKGBQYXNzaW5nIGEgc3RyaW5nIHRvIE1hdGVyaWFsT3B0aW9ucyBpcyBkZXByZWNhdGVkLCBhbmQgaGFzIG5vIGVmZmVjdGApXG4gICAgICBuYW1lID0gb3B0aW9ucztcbiAgICAgIG9wdGlvbnMgPSB7fTtcbiAgICB9XG5cbiAgICB0aGlzLm5hbWUgPSBuYW1lO1xuICAgIHRoaXMuaWQgPSBNYXRlcmlhbC5pZENvdW50ZXIrKztcbiAgICB0aGlzLmZyaWN0aW9uID0gdHlwZW9mIG9wdGlvbnMuZnJpY3Rpb24gIT09ICd1bmRlZmluZWQnID8gb3B0aW9ucy5mcmljdGlvbiA6IC0xO1xuICAgIHRoaXMucmVzdGl0dXRpb24gPSB0eXBlb2Ygb3B0aW9ucy5yZXN0aXR1dGlvbiAhPT0gJ3VuZGVmaW5lZCcgPyBvcHRpb25zLnJlc3RpdHV0aW9uIDogLTE7XG4gIH1cblxufVxuTWF0ZXJpYWwuaWRDb3VudGVyID0gMDtcblxuLyoqXG4gKiBBIHNwcmluZywgY29ubmVjdGluZyB0d28gYm9kaWVzLlxuICogQGV4YW1wbGVcbiAqICAgICBjb25zdCBzcHJpbmcgPSBuZXcgU3ByaW5nKGJveEJvZHksIHNwaGVyZUJvZHksIHtcbiAqICAgICAgIHJlc3RMZW5ndGg6IDAsXG4gKiAgICAgICBzdGlmZm5lc3M6IDUwLFxuICogICAgICAgZGFtcGluZzogMSxcbiAqICAgICB9KVxuICpcbiAqICAgICAvLyBDb21wdXRlIHRoZSBmb3JjZSBhZnRlciBlYWNoIHN0ZXBcbiAqICAgICB3b3JsZC5hZGRFdmVudExpc3RlbmVyKCdwb3N0U3RlcCcsIChldmVudCkgPT4ge1xuICogICAgICAgc3ByaW5nLmFwcGx5Rm9yY2UoKVxuICogICAgIH0pXG4gKi9cbmNsYXNzIFNwcmluZyB7XG4gIC8qKlxuICAgKiBSZXN0IGxlbmd0aCBvZiB0aGUgc3ByaW5nLiBBIG51bWJlciA+IDAuXG4gICAqIEBkZWZhdWx0IDFcbiAgICovXG5cbiAgLyoqXG4gICAqIFN0aWZmbmVzcyBvZiB0aGUgc3ByaW5nLiBBIG51bWJlciA+PSAwLlxuICAgKiBAZGVmYXVsdCAxMDBcbiAgICovXG5cbiAgLyoqXG4gICAqIERhbXBpbmcgb2YgdGhlIHNwcmluZy4gQSBudW1iZXIgPj0gMC5cbiAgICogQGRlZmF1bHQgMVxuICAgKi9cblxuICAvKipcbiAgICogRmlyc3QgY29ubmVjdGVkIGJvZHkuXG4gICAqL1xuXG4gIC8qKlxuICAgKiBTZWNvbmQgY29ubmVjdGVkIGJvZHkuXG4gICAqL1xuXG4gIC8qKlxuICAgKiBBbmNob3IgZm9yIGJvZHlBIGluIGxvY2FsIGJvZHlBIGNvb3JkaW5hdGVzLlxuICAgKiBXaGVyZSB0byBob29rIHRoZSBzcHJpbmcgdG8gYm9keSBBLCBpbiBsb2NhbCBib2R5IGNvb3JkaW5hdGVzLlxuICAgKiBAZGVmYXVsdCBuZXcgVmVjMygpXG4gICAqL1xuXG4gIC8qKlxuICAgKiBBbmNob3IgZm9yIGJvZHlCIGluIGxvY2FsIGJvZHlCIGNvb3JkaW5hdGVzLlxuICAgKiBXaGVyZSB0byBob29rIHRoZSBzcHJpbmcgdG8gYm9keSBCLCBpbiBsb2NhbCBib2R5IGNvb3JkaW5hdGVzLlxuICAgKiBAZGVmYXVsdCBuZXcgVmVjMygpXG4gICAqL1xuICBjb25zdHJ1Y3Rvcihib2R5QSwgYm9keUIsIG9wdGlvbnMgPSB7fSkge1xuICAgIHRoaXMucmVzdExlbmd0aCA9IHZvaWQgMDtcbiAgICB0aGlzLnN0aWZmbmVzcyA9IHZvaWQgMDtcbiAgICB0aGlzLmRhbXBpbmcgPSB2b2lkIDA7XG4gICAgdGhpcy5ib2R5QSA9IHZvaWQgMDtcbiAgICB0aGlzLmJvZHlCID0gdm9pZCAwO1xuICAgIHRoaXMubG9jYWxBbmNob3JBID0gdm9pZCAwO1xuICAgIHRoaXMubG9jYWxBbmNob3JCID0gdm9pZCAwO1xuICAgIHRoaXMucmVzdExlbmd0aCA9IHR5cGVvZiBvcHRpb25zLnJlc3RMZW5ndGggPT09ICdudW1iZXInID8gb3B0aW9ucy5yZXN0TGVuZ3RoIDogMTtcbiAgICB0aGlzLnN0aWZmbmVzcyA9IG9wdGlvbnMuc3RpZmZuZXNzIHx8IDEwMDtcbiAgICB0aGlzLmRhbXBpbmcgPSBvcHRpb25zLmRhbXBpbmcgfHwgMTtcbiAgICB0aGlzLmJvZHlBID0gYm9keUE7XG4gICAgdGhpcy5ib2R5QiA9IGJvZHlCO1xuICAgIHRoaXMubG9jYWxBbmNob3JBID0gbmV3IFZlYzMoKTtcbiAgICB0aGlzLmxvY2FsQW5jaG9yQiA9IG5ldyBWZWMzKCk7XG5cbiAgICBpZiAob3B0aW9ucy5sb2NhbEFuY2hvckEpIHtcbiAgICAgIHRoaXMubG9jYWxBbmNob3JBLmNvcHkob3B0aW9ucy5sb2NhbEFuY2hvckEpO1xuICAgIH1cblxuICAgIGlmIChvcHRpb25zLmxvY2FsQW5jaG9yQikge1xuICAgICAgdGhpcy5sb2NhbEFuY2hvckIuY29weShvcHRpb25zLmxvY2FsQW5jaG9yQik7XG4gICAgfVxuXG4gICAgaWYgKG9wdGlvbnMud29ybGRBbmNob3JBKSB7XG4gICAgICB0aGlzLnNldFdvcmxkQW5jaG9yQShvcHRpb25zLndvcmxkQW5jaG9yQSk7XG4gICAgfVxuXG4gICAgaWYgKG9wdGlvbnMud29ybGRBbmNob3JCKSB7XG4gICAgICB0aGlzLnNldFdvcmxkQW5jaG9yQihvcHRpb25zLndvcmxkQW5jaG9yQik7XG4gICAgfVxuICB9XG4gIC8qKlxuICAgKiBTZXQgdGhlIGFuY2hvciBwb2ludCBvbiBib2R5IEEsIHVzaW5nIHdvcmxkIGNvb3JkaW5hdGVzLlxuICAgKi9cblxuXG4gIHNldFdvcmxkQW5jaG9yQSh3b3JsZEFuY2hvckEpIHtcbiAgICB0aGlzLmJvZHlBLnBvaW50VG9Mb2NhbEZyYW1lKHdvcmxkQW5jaG9yQSwgdGhpcy5sb2NhbEFuY2hvckEpO1xuICB9XG4gIC8qKlxuICAgKiBTZXQgdGhlIGFuY2hvciBwb2ludCBvbiBib2R5IEIsIHVzaW5nIHdvcmxkIGNvb3JkaW5hdGVzLlxuICAgKi9cblxuXG4gIHNldFdvcmxkQW5jaG9yQih3b3JsZEFuY2hvckIpIHtcbiAgICB0aGlzLmJvZHlCLnBvaW50VG9Mb2NhbEZyYW1lKHdvcmxkQW5jaG9yQiwgdGhpcy5sb2NhbEFuY2hvckIpO1xuICB9XG4gIC8qKlxuICAgKiBHZXQgdGhlIGFuY2hvciBwb2ludCBvbiBib2R5IEEsIGluIHdvcmxkIGNvb3JkaW5hdGVzLlxuICAgKiBAcGFyYW0gcmVzdWx0IFRoZSB2ZWN0b3IgdG8gc3RvcmUgdGhlIHJlc3VsdCBpbi5cbiAgICovXG5cblxuICBnZXRXb3JsZEFuY2hvckEocmVzdWx0KSB7XG4gICAgdGhpcy5ib2R5QS5wb2ludFRvV29ybGRGcmFtZSh0aGlzLmxvY2FsQW5jaG9yQSwgcmVzdWx0KTtcbiAgfVxuICAvKipcbiAgICogR2V0IHRoZSBhbmNob3IgcG9pbnQgb24gYm9keSBCLCBpbiB3b3JsZCBjb29yZGluYXRlcy5cbiAgICogQHBhcmFtIHJlc3VsdCBUaGUgdmVjdG9yIHRvIHN0b3JlIHRoZSByZXN1bHQgaW4uXG4gICAqL1xuXG5cbiAgZ2V0V29ybGRBbmNob3JCKHJlc3VsdCkge1xuICAgIHRoaXMuYm9keUIucG9pbnRUb1dvcmxkRnJhbWUodGhpcy5sb2NhbEFuY2hvckIsIHJlc3VsdCk7XG4gIH1cbiAgLyoqXG4gICAqIEFwcGx5IHRoZSBzcHJpbmcgZm9yY2UgdG8gdGhlIGNvbm5lY3RlZCBib2RpZXMuXG4gICAqL1xuXG5cbiAgYXBwbHlGb3JjZSgpIHtcbiAgICBjb25zdCBrID0gdGhpcy5zdGlmZm5lc3M7XG4gICAgY29uc3QgZCA9IHRoaXMuZGFtcGluZztcbiAgICBjb25zdCBsID0gdGhpcy5yZXN0TGVuZ3RoO1xuICAgIGNvbnN0IGJvZHlBID0gdGhpcy5ib2R5QTtcbiAgICBjb25zdCBib2R5QiA9IHRoaXMuYm9keUI7XG4gICAgY29uc3QgciA9IGFwcGx5Rm9yY2VfcjtcbiAgICBjb25zdCByX3VuaXQgPSBhcHBseUZvcmNlX3JfdW5pdDtcbiAgICBjb25zdCB1ID0gYXBwbHlGb3JjZV91O1xuICAgIGNvbnN0IGYgPSBhcHBseUZvcmNlX2Y7XG4gICAgY29uc3QgdG1wID0gYXBwbHlGb3JjZV90bXA7XG4gICAgY29uc3Qgd29ybGRBbmNob3JBID0gYXBwbHlGb3JjZV93b3JsZEFuY2hvckE7XG4gICAgY29uc3Qgd29ybGRBbmNob3JCID0gYXBwbHlGb3JjZV93b3JsZEFuY2hvckI7XG4gICAgY29uc3QgcmkgPSBhcHBseUZvcmNlX3JpO1xuICAgIGNvbnN0IHJqID0gYXBwbHlGb3JjZV9yajtcbiAgICBjb25zdCByaV94X2YgPSBhcHBseUZvcmNlX3JpX3hfZjtcbiAgICBjb25zdCByal94X2YgPSBhcHBseUZvcmNlX3JqX3hfZjsgLy8gR2V0IHdvcmxkIGFuY2hvcnNcblxuICAgIHRoaXMuZ2V0V29ybGRBbmNob3JBKHdvcmxkQW5jaG9yQSk7XG4gICAgdGhpcy5nZXRXb3JsZEFuY2hvckIod29ybGRBbmNob3JCKTsgLy8gR2V0IG9mZnNldCBwb2ludHNcblxuICAgIHdvcmxkQW5jaG9yQS52c3ViKGJvZHlBLnBvc2l0aW9uLCByaSk7XG4gICAgd29ybGRBbmNob3JCLnZzdWIoYm9keUIucG9zaXRpb24sIHJqKTsgLy8gQ29tcHV0ZSBkaXN0YW5jZSB2ZWN0b3IgYmV0d2VlbiB3b3JsZCBhbmNob3IgcG9pbnRzXG5cbiAgICB3b3JsZEFuY2hvckIudnN1Yih3b3JsZEFuY2hvckEsIHIpO1xuICAgIGNvbnN0IHJsZW4gPSByLmxlbmd0aCgpO1xuICAgIHJfdW5pdC5jb3B5KHIpO1xuICAgIHJfdW5pdC5ub3JtYWxpemUoKTsgLy8gQ29tcHV0ZSByZWxhdGl2ZSB2ZWxvY2l0eSBvZiB0aGUgYW5jaG9yIHBvaW50cywgdVxuXG4gICAgYm9keUIudmVsb2NpdHkudnN1Yihib2R5QS52ZWxvY2l0eSwgdSk7IC8vIEFkZCByb3RhdGlvbmFsIHZlbG9jaXR5XG5cbiAgICBib2R5Qi5hbmd1bGFyVmVsb2NpdHkuY3Jvc3MocmosIHRtcCk7XG4gICAgdS52YWRkKHRtcCwgdSk7XG4gICAgYm9keUEuYW5ndWxhclZlbG9jaXR5LmNyb3NzKHJpLCB0bXApO1xuICAgIHUudnN1Yih0bXAsIHUpOyAvLyBGID0gLSBrICogKCB4IC0gTCApIC0gRCAqICggdSApXG5cbiAgICByX3VuaXQuc2NhbGUoLWsgKiAocmxlbiAtIGwpIC0gZCAqIHUuZG90KHJfdW5pdCksIGYpOyAvLyBBZGQgZm9yY2VzIHRvIGJvZGllc1xuXG4gICAgYm9keUEuZm9yY2UudnN1YihmLCBib2R5QS5mb3JjZSk7XG4gICAgYm9keUIuZm9yY2UudmFkZChmLCBib2R5Qi5mb3JjZSk7IC8vIEFuZ3VsYXIgZm9yY2VcblxuICAgIHJpLmNyb3NzKGYsIHJpX3hfZik7XG4gICAgcmouY3Jvc3MoZiwgcmpfeF9mKTtcbiAgICBib2R5QS50b3JxdWUudnN1YihyaV94X2YsIGJvZHlBLnRvcnF1ZSk7XG4gICAgYm9keUIudG9ycXVlLnZhZGQocmpfeF9mLCBib2R5Qi50b3JxdWUpO1xuICB9XG5cbn1cbmNvbnN0IGFwcGx5Rm9yY2VfciA9IG5ldyBWZWMzKCk7XG5jb25zdCBhcHBseUZvcmNlX3JfdW5pdCA9IG5ldyBWZWMzKCk7XG5jb25zdCBhcHBseUZvcmNlX3UgPSBuZXcgVmVjMygpO1xuY29uc3QgYXBwbHlGb3JjZV9mID0gbmV3IFZlYzMoKTtcbmNvbnN0IGFwcGx5Rm9yY2Vfd29ybGRBbmNob3JBID0gbmV3IFZlYzMoKTtcbmNvbnN0IGFwcGx5Rm9yY2Vfd29ybGRBbmNob3JCID0gbmV3IFZlYzMoKTtcbmNvbnN0IGFwcGx5Rm9yY2VfcmkgPSBuZXcgVmVjMygpO1xuY29uc3QgYXBwbHlGb3JjZV9yaiA9IG5ldyBWZWMzKCk7XG5jb25zdCBhcHBseUZvcmNlX3JpX3hfZiA9IG5ldyBWZWMzKCk7XG5jb25zdCBhcHBseUZvcmNlX3JqX3hfZiA9IG5ldyBWZWMzKCk7XG5jb25zdCBhcHBseUZvcmNlX3RtcCA9IG5ldyBWZWMzKCk7XG5cbi8qKlxuICogV2hlZWxJbmZvXG4gKi9cbmNsYXNzIFdoZWVsSW5mbyB7XG4gIC8qKlxuICAgKiBNYXggdHJhdmVsIGRpc3RhbmNlIG9mIHRoZSBzdXNwZW5zaW9uLCBpbiBtZXRlcnMuXG4gICAqIEBkZWZhdWx0IDFcbiAgICovXG5cbiAgLyoqXG4gICAqIFNwZWVkIHRvIGFwcGx5IHRvIHRoZSB3aGVlbCByb3RhdGlvbiB3aGVuIHRoZSB3aGVlbCBpcyBzbGlkaW5nLlxuICAgKiBAZGVmYXVsdCAtMC4xXG4gICAqL1xuXG4gIC8qKlxuICAgKiBJZiB0aGUgY3VzdG9tU2xpZGluZ1JvdGF0aW9uYWxTcGVlZCBzaG91bGQgYmUgdXNlZC5cbiAgICogQGRlZmF1bHQgZmFsc2VcbiAgICovXG5cbiAgLyoqXG4gICAqIHNsaWRpbmdcbiAgICovXG5cbiAgLyoqXG4gICAqIENvbm5lY3Rpb24gcG9pbnQsIGRlZmluZWQgbG9jYWxseSBpbiB0aGUgY2hhc3NpcyBib2R5IGZyYW1lLlxuICAgKi9cblxuICAvKipcbiAgICogY2hhc3Npc0Nvbm5lY3Rpb25Qb2ludFdvcmxkXG4gICAqL1xuXG4gIC8qKlxuICAgKiBkaXJlY3Rpb25Mb2NhbFxuICAgKi9cblxuICAvKipcbiAgICogZGlyZWN0aW9uV29ybGRcbiAgICovXG5cbiAgLyoqXG4gICAqIGF4bGVMb2NhbFxuICAgKi9cblxuICAvKipcbiAgICogYXhsZVdvcmxkXG4gICAqL1xuXG4gIC8qKlxuICAgKiBzdXNwZW5zaW9uUmVzdExlbmd0aFxuICAgKiBAZGVmYXVsdCAxXG4gICAqL1xuXG4gIC8qKlxuICAgKiBzdXNwZW5zaW9uTWF4TGVuZ3RoXG4gICAqIEBkZWZhdWx0IDJcbiAgICovXG5cbiAgLyoqXG4gICAqIHJhZGl1c1xuICAgKiBAZGVmYXVsdCAxXG4gICAqL1xuXG4gIC8qKlxuICAgKiBzdXNwZW5zaW9uU3RpZmZuZXNzXG4gICAqIEBkZWZhdWx0IDEwMFxuICAgKi9cblxuICAvKipcbiAgICogZGFtcGluZ0NvbXByZXNzaW9uXG4gICAqIEBkZWZhdWx0IDEwXG4gICAqL1xuXG4gIC8qKlxuICAgKiBkYW1waW5nUmVsYXhhdGlvblxuICAgKiBAZGVmYXVsdCAxMFxuICAgKi9cblxuICAvKipcbiAgICogZnJpY3Rpb25TbGlwXG4gICAqIEBkZWZhdWx0IDEwLjVcbiAgICovXG5cbiAgLyoqIGZvcndhcmRBY2NlbGVyYXRpb24gKi9cblxuICAvKiogc2lkZUFjY2VsZXJhdGlvbiAqL1xuXG4gIC8qKlxuICAgKiBzdGVlcmluZ1xuICAgKiBAZGVmYXVsdCAwXG4gICAqL1xuXG4gIC8qKlxuICAgKiBSb3RhdGlvbiB2YWx1ZSwgaW4gcmFkaWFucy5cbiAgICogQGRlZmF1bHQgMFxuICAgKi9cblxuICAvKipcbiAgICogZGVsdGFSb3RhdGlvblxuICAgKiBAZGVmYXVsdCAwXG4gICAqL1xuXG4gIC8qKlxuICAgKiByb2xsSW5mbHVlbmNlXG4gICAqIEBkZWZhdWx0IDAuMDFcbiAgICovXG5cbiAgLyoqXG4gICAqIG1heFN1c3BlbnNpb25Gb3JjZVxuICAgKi9cblxuICAvKipcbiAgICogZW5naW5lRm9yY2VcbiAgICovXG5cbiAgLyoqXG4gICAqIGJyYWtlXG4gICAqL1xuXG4gIC8qKlxuICAgKiBpc0Zyb250V2hlZWxcbiAgICogQGRlZmF1bHQgdHJ1ZVxuICAgKi9cblxuICAvKipcbiAgICogY2xpcHBlZEludkNvbnRhY3REb3RTdXNwZW5zaW9uXG4gICAqIEBkZWZhdWx0IDFcbiAgICovXG5cbiAgLyoqXG4gICAqIHN1c3BlbnNpb25SZWxhdGl2ZVZlbG9jaXR5XG4gICAqIEBkZWZhdWx0IDBcbiAgICovXG5cbiAgLyoqXG4gICAqIHN1c3BlbnNpb25Gb3JjZVxuICAgKiBAZGVmYXVsdCAwXG4gICAqL1xuXG4gIC8qKlxuICAgKiBzbGlwSW5mb1xuICAgKi9cblxuICAvKipcbiAgICogc2tpZEluZm9cbiAgICogQGRlZmF1bHQgMFxuICAgKi9cblxuICAvKipcbiAgICogc3VzcGVuc2lvbkxlbmd0aFxuICAgKiBAZGVmYXVsdCAwXG4gICAqL1xuXG4gIC8qKlxuICAgKiBzaWRlSW1wdWxzZVxuICAgKi9cblxuICAvKipcbiAgICogZm9yd2FyZEltcHVsc2VcbiAgICovXG5cbiAgLyoqXG4gICAqIFRoZSByZXN1bHQgZnJvbSByYXljYXN0aW5nLlxuICAgKi9cblxuICAvKipcbiAgICogV2hlZWwgd29ybGQgdHJhbnNmb3JtLlxuICAgKi9cblxuICAvKipcbiAgICogaXNJbkNvbnRhY3RcbiAgICovXG4gIGNvbnN0cnVjdG9yKG9wdGlvbnMgPSB7fSkge1xuICAgIHRoaXMubWF4U3VzcGVuc2lvblRyYXZlbCA9IHZvaWQgMDtcbiAgICB0aGlzLmN1c3RvbVNsaWRpbmdSb3RhdGlvbmFsU3BlZWQgPSB2b2lkIDA7XG4gICAgdGhpcy51c2VDdXN0b21TbGlkaW5nUm90YXRpb25hbFNwZWVkID0gdm9pZCAwO1xuICAgIHRoaXMuc2xpZGluZyA9IHZvaWQgMDtcbiAgICB0aGlzLmNoYXNzaXNDb25uZWN0aW9uUG9pbnRMb2NhbCA9IHZvaWQgMDtcbiAgICB0aGlzLmNoYXNzaXNDb25uZWN0aW9uUG9pbnRXb3JsZCA9IHZvaWQgMDtcbiAgICB0aGlzLmRpcmVjdGlvbkxvY2FsID0gdm9pZCAwO1xuICAgIHRoaXMuZGlyZWN0aW9uV29ybGQgPSB2b2lkIDA7XG4gICAgdGhpcy5heGxlTG9jYWwgPSB2b2lkIDA7XG4gICAgdGhpcy5heGxlV29ybGQgPSB2b2lkIDA7XG4gICAgdGhpcy5zdXNwZW5zaW9uUmVzdExlbmd0aCA9IHZvaWQgMDtcbiAgICB0aGlzLnN1c3BlbnNpb25NYXhMZW5ndGggPSB2b2lkIDA7XG4gICAgdGhpcy5yYWRpdXMgPSB2b2lkIDA7XG4gICAgdGhpcy5zdXNwZW5zaW9uU3RpZmZuZXNzID0gdm9pZCAwO1xuICAgIHRoaXMuZGFtcGluZ0NvbXByZXNzaW9uID0gdm9pZCAwO1xuICAgIHRoaXMuZGFtcGluZ1JlbGF4YXRpb24gPSB2b2lkIDA7XG4gICAgdGhpcy5mcmljdGlvblNsaXAgPSB2b2lkIDA7XG4gICAgdGhpcy5mb3J3YXJkQWNjZWxlcmF0aW9uID0gdm9pZCAwO1xuICAgIHRoaXMuc2lkZUFjY2VsZXJhdGlvbiA9IHZvaWQgMDtcbiAgICB0aGlzLnN0ZWVyaW5nID0gdm9pZCAwO1xuICAgIHRoaXMucm90YXRpb24gPSB2b2lkIDA7XG4gICAgdGhpcy5kZWx0YVJvdGF0aW9uID0gdm9pZCAwO1xuICAgIHRoaXMucm9sbEluZmx1ZW5jZSA9IHZvaWQgMDtcbiAgICB0aGlzLm1heFN1c3BlbnNpb25Gb3JjZSA9IHZvaWQgMDtcbiAgICB0aGlzLmVuZ2luZUZvcmNlID0gdm9pZCAwO1xuICAgIHRoaXMuYnJha2UgPSB2b2lkIDA7XG4gICAgdGhpcy5pc0Zyb250V2hlZWwgPSB2b2lkIDA7XG4gICAgdGhpcy5jbGlwcGVkSW52Q29udGFjdERvdFN1c3BlbnNpb24gPSB2b2lkIDA7XG4gICAgdGhpcy5zdXNwZW5zaW9uUmVsYXRpdmVWZWxvY2l0eSA9IHZvaWQgMDtcbiAgICB0aGlzLnN1c3BlbnNpb25Gb3JjZSA9IHZvaWQgMDtcbiAgICB0aGlzLnNsaXBJbmZvID0gdm9pZCAwO1xuICAgIHRoaXMuc2tpZEluZm8gPSB2b2lkIDA7XG4gICAgdGhpcy5zdXNwZW5zaW9uTGVuZ3RoID0gdm9pZCAwO1xuICAgIHRoaXMuc2lkZUltcHVsc2UgPSB2b2lkIDA7XG4gICAgdGhpcy5mb3J3YXJkSW1wdWxzZSA9IHZvaWQgMDtcbiAgICB0aGlzLnJheWNhc3RSZXN1bHQgPSB2b2lkIDA7XG4gICAgdGhpcy53b3JsZFRyYW5zZm9ybSA9IHZvaWQgMDtcbiAgICB0aGlzLmlzSW5Db250YWN0ID0gdm9pZCAwO1xuICAgIG9wdGlvbnMgPSBVdGlscy5kZWZhdWx0cyhvcHRpb25zLCB7XG4gICAgICBjaGFzc2lzQ29ubmVjdGlvblBvaW50TG9jYWw6IG5ldyBWZWMzKCksXG4gICAgICBjaGFzc2lzQ29ubmVjdGlvblBvaW50V29ybGQ6IG5ldyBWZWMzKCksXG4gICAgICBkaXJlY3Rpb25Mb2NhbDogbmV3IFZlYzMoKSxcbiAgICAgIGRpcmVjdGlvbldvcmxkOiBuZXcgVmVjMygpLFxuICAgICAgYXhsZUxvY2FsOiBuZXcgVmVjMygpLFxuICAgICAgYXhsZVdvcmxkOiBuZXcgVmVjMygpLFxuICAgICAgc3VzcGVuc2lvblJlc3RMZW5ndGg6IDEsXG4gICAgICBzdXNwZW5zaW9uTWF4TGVuZ3RoOiAyLFxuICAgICAgcmFkaXVzOiAxLFxuICAgICAgc3VzcGVuc2lvblN0aWZmbmVzczogMTAwLFxuICAgICAgZGFtcGluZ0NvbXByZXNzaW9uOiAxMCxcbiAgICAgIGRhbXBpbmdSZWxheGF0aW9uOiAxMCxcbiAgICAgIGZyaWN0aW9uU2xpcDogMTAuNSxcbiAgICAgIGZvcndhcmRBY2NlbGVyYXRpb246IDEsXG4gICAgICBzaWRlQWNjZWxlcmF0aW9uOiAxLFxuICAgICAgc3RlZXJpbmc6IDAsXG4gICAgICByb3RhdGlvbjogMCxcbiAgICAgIGRlbHRhUm90YXRpb246IDAsXG4gICAgICByb2xsSW5mbHVlbmNlOiAwLjAxLFxuICAgICAgbWF4U3VzcGVuc2lvbkZvcmNlOiBOdW1iZXIuTUFYX1ZBTFVFLFxuICAgICAgaXNGcm9udFdoZWVsOiB0cnVlLFxuICAgICAgY2xpcHBlZEludkNvbnRhY3REb3RTdXNwZW5zaW9uOiAxLFxuICAgICAgc3VzcGVuc2lvblJlbGF0aXZlVmVsb2NpdHk6IDAsXG4gICAgICBzdXNwZW5zaW9uRm9yY2U6IDAsXG4gICAgICBzbGlwSW5mbzogMCxcbiAgICAgIHNraWRJbmZvOiAwLFxuICAgICAgc3VzcGVuc2lvbkxlbmd0aDogMCxcbiAgICAgIG1heFN1c3BlbnNpb25UcmF2ZWw6IDEsXG4gICAgICB1c2VDdXN0b21TbGlkaW5nUm90YXRpb25hbFNwZWVkOiBmYWxzZSxcbiAgICAgIGN1c3RvbVNsaWRpbmdSb3RhdGlvbmFsU3BlZWQ6IC0wLjFcbiAgICB9KTtcbiAgICB0aGlzLm1heFN1c3BlbnNpb25UcmF2ZWwgPSBvcHRpb25zLm1heFN1c3BlbnNpb25UcmF2ZWw7XG4gICAgdGhpcy5jdXN0b21TbGlkaW5nUm90YXRpb25hbFNwZWVkID0gb3B0aW9ucy5jdXN0b21TbGlkaW5nUm90YXRpb25hbFNwZWVkO1xuICAgIHRoaXMudXNlQ3VzdG9tU2xpZGluZ1JvdGF0aW9uYWxTcGVlZCA9IG9wdGlvbnMudXNlQ3VzdG9tU2xpZGluZ1JvdGF0aW9uYWxTcGVlZDtcbiAgICB0aGlzLnNsaWRpbmcgPSBmYWxzZTtcbiAgICB0aGlzLmNoYXNzaXNDb25uZWN0aW9uUG9pbnRMb2NhbCA9IG9wdGlvbnMuY2hhc3Npc0Nvbm5lY3Rpb25Qb2ludExvY2FsLmNsb25lKCk7XG4gICAgdGhpcy5jaGFzc2lzQ29ubmVjdGlvblBvaW50V29ybGQgPSBvcHRpb25zLmNoYXNzaXNDb25uZWN0aW9uUG9pbnRXb3JsZC5jbG9uZSgpO1xuICAgIHRoaXMuZGlyZWN0aW9uTG9jYWwgPSBvcHRpb25zLmRpcmVjdGlvbkxvY2FsLmNsb25lKCk7XG4gICAgdGhpcy5kaXJlY3Rpb25Xb3JsZCA9IG9wdGlvbnMuZGlyZWN0aW9uV29ybGQuY2xvbmUoKTtcbiAgICB0aGlzLmF4bGVMb2NhbCA9IG9wdGlvbnMuYXhsZUxvY2FsLmNsb25lKCk7XG4gICAgdGhpcy5heGxlV29ybGQgPSBvcHRpb25zLmF4bGVXb3JsZC5jbG9uZSgpO1xuICAgIHRoaXMuc3VzcGVuc2lvblJlc3RMZW5ndGggPSBvcHRpb25zLnN1c3BlbnNpb25SZXN0TGVuZ3RoO1xuICAgIHRoaXMuc3VzcGVuc2lvbk1heExlbmd0aCA9IG9wdGlvbnMuc3VzcGVuc2lvbk1heExlbmd0aDtcbiAgICB0aGlzLnJhZGl1cyA9IG9wdGlvbnMucmFkaXVzO1xuICAgIHRoaXMuc3VzcGVuc2lvblN0aWZmbmVzcyA9IG9wdGlvbnMuc3VzcGVuc2lvblN0aWZmbmVzcztcbiAgICB0aGlzLmRhbXBpbmdDb21wcmVzc2lvbiA9IG9wdGlvbnMuZGFtcGluZ0NvbXByZXNzaW9uO1xuICAgIHRoaXMuZGFtcGluZ1JlbGF4YXRpb24gPSBvcHRpb25zLmRhbXBpbmdSZWxheGF0aW9uO1xuICAgIHRoaXMuZnJpY3Rpb25TbGlwID0gb3B0aW9ucy5mcmljdGlvblNsaXA7XG4gICAgdGhpcy5mb3J3YXJkQWNjZWxlcmF0aW9uID0gb3B0aW9ucy5mb3J3YXJkQWNjZWxlcmF0aW9uO1xuICAgIHRoaXMuc2lkZUFjY2VsZXJhdGlvbiA9IG9wdGlvbnMuc2lkZUFjY2VsZXJhdGlvbjtcbiAgICB0aGlzLnN0ZWVyaW5nID0gMDtcbiAgICB0aGlzLnJvdGF0aW9uID0gMDtcbiAgICB0aGlzLmRlbHRhUm90YXRpb24gPSAwO1xuICAgIHRoaXMucm9sbEluZmx1ZW5jZSA9IG9wdGlvbnMucm9sbEluZmx1ZW5jZTtcbiAgICB0aGlzLm1heFN1c3BlbnNpb25Gb3JjZSA9IG9wdGlvbnMubWF4U3VzcGVuc2lvbkZvcmNlO1xuICAgIHRoaXMuZW5naW5lRm9yY2UgPSAwO1xuICAgIHRoaXMuYnJha2UgPSAwO1xuICAgIHRoaXMuaXNGcm9udFdoZWVsID0gb3B0aW9ucy5pc0Zyb250V2hlZWw7XG4gICAgdGhpcy5jbGlwcGVkSW52Q29udGFjdERvdFN1c3BlbnNpb24gPSAxO1xuICAgIHRoaXMuc3VzcGVuc2lvblJlbGF0aXZlVmVsb2NpdHkgPSAwO1xuICAgIHRoaXMuc3VzcGVuc2lvbkZvcmNlID0gMDtcbiAgICB0aGlzLnNsaXBJbmZvID0gMDtcbiAgICB0aGlzLnNraWRJbmZvID0gMDtcbiAgICB0aGlzLnN1c3BlbnNpb25MZW5ndGggPSAwO1xuICAgIHRoaXMuc2lkZUltcHVsc2UgPSAwO1xuICAgIHRoaXMuZm9yd2FyZEltcHVsc2UgPSAwO1xuICAgIHRoaXMucmF5Y2FzdFJlc3VsdCA9IG5ldyBSYXljYXN0UmVzdWx0KCk7XG4gICAgdGhpcy53b3JsZFRyYW5zZm9ybSA9IG5ldyBUcmFuc2Zvcm0oKTtcbiAgICB0aGlzLmlzSW5Db250YWN0ID0gZmFsc2U7XG4gIH1cblxuICB1cGRhdGVXaGVlbChjaGFzc2lzKSB7XG4gICAgY29uc3QgcmF5Y2FzdFJlc3VsdCA9IHRoaXMucmF5Y2FzdFJlc3VsdDtcblxuICAgIGlmICh0aGlzLmlzSW5Db250YWN0KSB7XG4gICAgICBjb25zdCBwcm9qZWN0ID0gcmF5Y2FzdFJlc3VsdC5oaXROb3JtYWxXb3JsZC5kb3QocmF5Y2FzdFJlc3VsdC5kaXJlY3Rpb25Xb3JsZCk7XG4gICAgICByYXljYXN0UmVzdWx0LmhpdFBvaW50V29ybGQudnN1YihjaGFzc2lzLnBvc2l0aW9uLCByZWxwb3MpO1xuICAgICAgY2hhc3Npcy5nZXRWZWxvY2l0eUF0V29ybGRQb2ludChyZWxwb3MsIGNoYXNzaXNfdmVsb2NpdHlfYXRfY29udGFjdFBvaW50KTtcbiAgICAgIGNvbnN0IHByb2pWZWwgPSByYXljYXN0UmVzdWx0LmhpdE5vcm1hbFdvcmxkLmRvdChjaGFzc2lzX3ZlbG9jaXR5X2F0X2NvbnRhY3RQb2ludCk7XG5cbiAgICAgIGlmIChwcm9qZWN0ID49IC0wLjEpIHtcbiAgICAgICAgdGhpcy5zdXNwZW5zaW9uUmVsYXRpdmVWZWxvY2l0eSA9IDAuMDtcbiAgICAgICAgdGhpcy5jbGlwcGVkSW52Q29udGFjdERvdFN1c3BlbnNpb24gPSAxLjAgLyAwLjE7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zdCBpbnYgPSAtMSAvIHByb2plY3Q7XG4gICAgICAgIHRoaXMuc3VzcGVuc2lvblJlbGF0aXZlVmVsb2NpdHkgPSBwcm9qVmVsICogaW52O1xuICAgICAgICB0aGlzLmNsaXBwZWRJbnZDb250YWN0RG90U3VzcGVuc2lvbiA9IGludjtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgLy8gTm90IGluIGNvbnRhY3QgOiBwb3NpdGlvbiB3aGVlbCBpbiBhIG5pY2UgKHJlc3QgbGVuZ3RoKSBwb3NpdGlvblxuICAgICAgcmF5Y2FzdFJlc3VsdC5zdXNwZW5zaW9uTGVuZ3RoID0gdGhpcy5zdXNwZW5zaW9uUmVzdExlbmd0aDtcbiAgICAgIHRoaXMuc3VzcGVuc2lvblJlbGF0aXZlVmVsb2NpdHkgPSAwLjA7XG4gICAgICByYXljYXN0UmVzdWx0LmRpcmVjdGlvbldvcmxkLnNjYWxlKC0xLCByYXljYXN0UmVzdWx0LmhpdE5vcm1hbFdvcmxkKTtcbiAgICAgIHRoaXMuY2xpcHBlZEludkNvbnRhY3REb3RTdXNwZW5zaW9uID0gMS4wO1xuICAgIH1cbiAgfVxuXG59XG5jb25zdCBjaGFzc2lzX3ZlbG9jaXR5X2F0X2NvbnRhY3RQb2ludCA9IG5ldyBWZWMzKCk7XG5jb25zdCByZWxwb3MgPSBuZXcgVmVjMygpO1xuXG4vKipcbiAqIFZlaGljbGUgaGVscGVyIGNsYXNzIHRoYXQgY2FzdHMgcmF5cyBmcm9tIHRoZSB3aGVlbCBwb3NpdGlvbnMgdG93YXJkcyB0aGUgZ3JvdW5kIGFuZCBhcHBsaWVzIGZvcmNlcy5cbiAqL1xuY2xhc3MgUmF5Y2FzdFZlaGljbGUge1xuICAvKiogVGhlIGNhciBjaGFzc2lzIGJvZHkuICovXG5cbiAgLyoqIFRoZSB3aGVlbHMuICovXG5cbiAgLyoqIFdpbGwgYmUgc2V0IHRvIHRydWUgaWYgdGhlIGNhciBpcyBzbGlkaW5nLiAqL1xuXG4gIC8qKiBJbmRleCBvZiB0aGUgcmlnaHQgYXhpcy4geD0wLCB5PTEsIHo9MiAqL1xuXG4gIC8qKiBJbmRleCBvZiB0aGUgZm9yd2FyZCBheGlzLiB4PTAsIHk9MSwgej0yICovXG5cbiAgLyoqIEluZGV4IG9mIHRoZSB1cCBheGlzLiB4PTAsIHk9MSwgej0yICovXG5cbiAgLyoqIFRoZSBjb25zdHJhaW50cy4gKi9cblxuICAvKiogT3B0aW9uYWwgcHJlLXN0ZXAgY2FsbGJhY2suICovXG5cbiAgLyoqIE51bWJlciBvZiB3aGVlbHMgb24gdGhlIGdyb3VuZC4gKi9cbiAgY29uc3RydWN0b3Iob3B0aW9ucykge1xuICAgIHRoaXMuY2hhc3Npc0JvZHkgPSB2b2lkIDA7XG4gICAgdGhpcy53aGVlbEluZm9zID0gdm9pZCAwO1xuICAgIHRoaXMuc2xpZGluZyA9IHZvaWQgMDtcbiAgICB0aGlzLndvcmxkID0gdm9pZCAwO1xuICAgIHRoaXMuaW5kZXhSaWdodEF4aXMgPSB2b2lkIDA7XG4gICAgdGhpcy5pbmRleEZvcndhcmRBeGlzID0gdm9pZCAwO1xuICAgIHRoaXMuaW5kZXhVcEF4aXMgPSB2b2lkIDA7XG4gICAgdGhpcy5jb25zdHJhaW50cyA9IHZvaWQgMDtcbiAgICB0aGlzLnByZVN0ZXBDYWxsYmFjayA9IHZvaWQgMDtcbiAgICB0aGlzLmN1cnJlbnRWZWhpY2xlU3BlZWRLbUhvdXIgPSB2b2lkIDA7XG4gICAgdGhpcy5udW1XaGVlbHNPbkdyb3VuZCA9IHZvaWQgMDtcbiAgICB0aGlzLmNoYXNzaXNCb2R5ID0gb3B0aW9ucy5jaGFzc2lzQm9keTtcbiAgICB0aGlzLndoZWVsSW5mb3MgPSBbXTtcbiAgICB0aGlzLnNsaWRpbmcgPSBmYWxzZTtcbiAgICB0aGlzLndvcmxkID0gbnVsbDtcbiAgICB0aGlzLmluZGV4UmlnaHRBeGlzID0gdHlwZW9mIG9wdGlvbnMuaW5kZXhSaWdodEF4aXMgIT09ICd1bmRlZmluZWQnID8gb3B0aW9ucy5pbmRleFJpZ2h0QXhpcyA6IDI7XG4gICAgdGhpcy5pbmRleEZvcndhcmRBeGlzID0gdHlwZW9mIG9wdGlvbnMuaW5kZXhGb3J3YXJkQXhpcyAhPT0gJ3VuZGVmaW5lZCcgPyBvcHRpb25zLmluZGV4Rm9yd2FyZEF4aXMgOiAwO1xuICAgIHRoaXMuaW5kZXhVcEF4aXMgPSB0eXBlb2Ygb3B0aW9ucy5pbmRleFVwQXhpcyAhPT0gJ3VuZGVmaW5lZCcgPyBvcHRpb25zLmluZGV4VXBBeGlzIDogMTtcbiAgICB0aGlzLmNvbnN0cmFpbnRzID0gW107XG5cbiAgICB0aGlzLnByZVN0ZXBDYWxsYmFjayA9ICgpID0+IHt9O1xuXG4gICAgdGhpcy5jdXJyZW50VmVoaWNsZVNwZWVkS21Ib3VyID0gMDtcbiAgICB0aGlzLm51bVdoZWVsc09uR3JvdW5kID0gMDtcbiAgfVxuICAvKipcbiAgICogQWRkIGEgd2hlZWwuIEZvciBpbmZvcm1hdGlvbiBhYm91dCB0aGUgb3B0aW9ucywgc2VlIGBXaGVlbEluZm9gLlxuICAgKi9cblxuXG4gIGFkZFdoZWVsKG9wdGlvbnMgPSB7fSkge1xuICAgIGNvbnN0IGluZm8gPSBuZXcgV2hlZWxJbmZvKG9wdGlvbnMpO1xuICAgIGNvbnN0IGluZGV4ID0gdGhpcy53aGVlbEluZm9zLmxlbmd0aDtcbiAgICB0aGlzLndoZWVsSW5mb3MucHVzaChpbmZvKTtcbiAgICByZXR1cm4gaW5kZXg7XG4gIH1cbiAgLyoqXG4gICAqIFNldCB0aGUgc3RlZXJpbmcgdmFsdWUgb2YgYSB3aGVlbC5cbiAgICovXG5cblxuICBzZXRTdGVlcmluZ1ZhbHVlKHZhbHVlLCB3aGVlbEluZGV4KSB7XG4gICAgY29uc3Qgd2hlZWwgPSB0aGlzLndoZWVsSW5mb3Nbd2hlZWxJbmRleF07XG4gICAgd2hlZWwuc3RlZXJpbmcgPSB2YWx1ZTtcbiAgfVxuICAvKipcbiAgICogU2V0IHRoZSB3aGVlbCBmb3JjZSB0byBhcHBseSBvbiBvbmUgb2YgdGhlIHdoZWVscyBlYWNoIHRpbWUgc3RlcFxuICAgKi9cblxuXG4gIGFwcGx5RW5naW5lRm9yY2UodmFsdWUsIHdoZWVsSW5kZXgpIHtcbiAgICB0aGlzLndoZWVsSW5mb3Nbd2hlZWxJbmRleF0uZW5naW5lRm9yY2UgPSB2YWx1ZTtcbiAgfVxuICAvKipcbiAgICogU2V0IHRoZSBicmFraW5nIGZvcmNlIG9mIGEgd2hlZWxcbiAgICovXG5cblxuICBzZXRCcmFrZShicmFrZSwgd2hlZWxJbmRleCkge1xuICAgIHRoaXMud2hlZWxJbmZvc1t3aGVlbEluZGV4XS5icmFrZSA9IGJyYWtlO1xuICB9XG4gIC8qKlxuICAgKiBBZGQgdGhlIHZlaGljbGUgaW5jbHVkaW5nIGl0cyBjb25zdHJhaW50cyB0byB0aGUgd29ybGQuXG4gICAqL1xuXG5cbiAgYWRkVG9Xb3JsZCh3b3JsZCkge1xuICAgIHdvcmxkLmFkZEJvZHkodGhpcy5jaGFzc2lzQm9keSk7XG4gICAgY29uc3QgdGhhdCA9IHRoaXM7XG5cbiAgICB0aGlzLnByZVN0ZXBDYWxsYmFjayA9ICgpID0+IHtcbiAgICAgIHRoYXQudXBkYXRlVmVoaWNsZSh3b3JsZC5kdCk7XG4gICAgfTtcblxuICAgIHdvcmxkLmFkZEV2ZW50TGlzdGVuZXIoJ3ByZVN0ZXAnLCB0aGlzLnByZVN0ZXBDYWxsYmFjayk7XG4gICAgdGhpcy53b3JsZCA9IHdvcmxkO1xuICB9XG4gIC8qKlxuICAgKiBHZXQgb25lIG9mIHRoZSB3aGVlbCBheGxlcywgd29ybGQtb3JpZW50ZWQuXG4gICAqL1xuXG5cbiAgZ2V0VmVoaWNsZUF4aXNXb3JsZChheGlzSW5kZXgsIHJlc3VsdCkge1xuICAgIHJlc3VsdC5zZXQoYXhpc0luZGV4ID09PSAwID8gMSA6IDAsIGF4aXNJbmRleCA9PT0gMSA/IDEgOiAwLCBheGlzSW5kZXggPT09IDIgPyAxIDogMCk7XG4gICAgdGhpcy5jaGFzc2lzQm9keS52ZWN0b3JUb1dvcmxkRnJhbWUocmVzdWx0LCByZXN1bHQpO1xuICB9XG5cbiAgdXBkYXRlVmVoaWNsZSh0aW1lU3RlcCkge1xuICAgIGNvbnN0IHdoZWVsSW5mb3MgPSB0aGlzLndoZWVsSW5mb3M7XG4gICAgY29uc3QgbnVtV2hlZWxzID0gd2hlZWxJbmZvcy5sZW5ndGg7XG4gICAgY29uc3QgY2hhc3Npc0JvZHkgPSB0aGlzLmNoYXNzaXNCb2R5O1xuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBudW1XaGVlbHM7IGkrKykge1xuICAgICAgdGhpcy51cGRhdGVXaGVlbFRyYW5zZm9ybShpKTtcbiAgICB9XG5cbiAgICB0aGlzLmN1cnJlbnRWZWhpY2xlU3BlZWRLbUhvdXIgPSAzLjYgKiBjaGFzc2lzQm9keS52ZWxvY2l0eS5sZW5ndGgoKTtcbiAgICBjb25zdCBmb3J3YXJkV29ybGQgPSBuZXcgVmVjMygpO1xuICAgIHRoaXMuZ2V0VmVoaWNsZUF4aXNXb3JsZCh0aGlzLmluZGV4Rm9yd2FyZEF4aXMsIGZvcndhcmRXb3JsZCk7XG5cbiAgICBpZiAoZm9yd2FyZFdvcmxkLmRvdChjaGFzc2lzQm9keS52ZWxvY2l0eSkgPCAwKSB7XG4gICAgICB0aGlzLmN1cnJlbnRWZWhpY2xlU3BlZWRLbUhvdXIgKj0gLTE7XG4gICAgfSAvLyBzaW11bGF0ZSBzdXNwZW5zaW9uXG5cblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbnVtV2hlZWxzOyBpKyspIHtcbiAgICAgIHRoaXMuY2FzdFJheSh3aGVlbEluZm9zW2ldKTtcbiAgICB9XG5cbiAgICB0aGlzLnVwZGF0ZVN1c3BlbnNpb24odGltZVN0ZXApO1xuICAgIGNvbnN0IGltcHVsc2UgPSBuZXcgVmVjMygpO1xuICAgIGNvbnN0IHJlbHBvcyA9IG5ldyBWZWMzKCk7XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IG51bVdoZWVsczsgaSsrKSB7XG4gICAgICAvL2FwcGx5IHN1c3BlbnNpb24gZm9yY2VcbiAgICAgIGNvbnN0IHdoZWVsID0gd2hlZWxJbmZvc1tpXTtcbiAgICAgIGxldCBzdXNwZW5zaW9uRm9yY2UgPSB3aGVlbC5zdXNwZW5zaW9uRm9yY2U7XG5cbiAgICAgIGlmIChzdXNwZW5zaW9uRm9yY2UgPiB3aGVlbC5tYXhTdXNwZW5zaW9uRm9yY2UpIHtcbiAgICAgICAgc3VzcGVuc2lvbkZvcmNlID0gd2hlZWwubWF4U3VzcGVuc2lvbkZvcmNlO1xuICAgICAgfVxuXG4gICAgICB3aGVlbC5yYXljYXN0UmVzdWx0LmhpdE5vcm1hbFdvcmxkLnNjYWxlKHN1c3BlbnNpb25Gb3JjZSAqIHRpbWVTdGVwLCBpbXB1bHNlKTtcbiAgICAgIHdoZWVsLnJheWNhc3RSZXN1bHQuaGl0UG9pbnRXb3JsZC52c3ViKGNoYXNzaXNCb2R5LnBvc2l0aW9uLCByZWxwb3MpO1xuICAgICAgY2hhc3Npc0JvZHkuYXBwbHlJbXB1bHNlKGltcHVsc2UsIHJlbHBvcyk7XG4gICAgfVxuXG4gICAgdGhpcy51cGRhdGVGcmljdGlvbih0aW1lU3RlcCk7XG4gICAgY29uc3QgaGl0Tm9ybWFsV29ybGRTY2FsZWRXaXRoUHJvaiA9IG5ldyBWZWMzKCk7XG4gICAgY29uc3QgZndkID0gbmV3IFZlYzMoKTtcbiAgICBjb25zdCB2ZWwgPSBuZXcgVmVjMygpO1xuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBudW1XaGVlbHM7IGkrKykge1xuICAgICAgY29uc3Qgd2hlZWwgPSB3aGVlbEluZm9zW2ldOyAvL2NvbnN0IHJlbHBvcyA9IG5ldyBWZWMzKCk7XG4gICAgICAvL3doZWVsLmNoYXNzaXNDb25uZWN0aW9uUG9pbnRXb3JsZC52c3ViKGNoYXNzaXNCb2R5LnBvc2l0aW9uLCByZWxwb3MpO1xuXG4gICAgICBjaGFzc2lzQm9keS5nZXRWZWxvY2l0eUF0V29ybGRQb2ludCh3aGVlbC5jaGFzc2lzQ29ubmVjdGlvblBvaW50V29ybGQsIHZlbCk7IC8vIEhhY2sgdG8gZ2V0IHRoZSByb3RhdGlvbiBpbiB0aGUgY29ycmVjdCBkaXJlY3Rpb25cblxuICAgICAgbGV0IG0gPSAxO1xuXG4gICAgICBzd2l0Y2ggKHRoaXMuaW5kZXhVcEF4aXMpIHtcbiAgICAgICAgY2FzZSAxOlxuICAgICAgICAgIG0gPSAtMTtcbiAgICAgICAgICBicmVhaztcbiAgICAgIH1cblxuICAgICAgaWYgKHdoZWVsLmlzSW5Db250YWN0KSB7XG4gICAgICAgIHRoaXMuZ2V0VmVoaWNsZUF4aXNXb3JsZCh0aGlzLmluZGV4Rm9yd2FyZEF4aXMsIGZ3ZCk7XG4gICAgICAgIGNvbnN0IHByb2ogPSBmd2QuZG90KHdoZWVsLnJheWNhc3RSZXN1bHQuaGl0Tm9ybWFsV29ybGQpO1xuICAgICAgICB3aGVlbC5yYXljYXN0UmVzdWx0LmhpdE5vcm1hbFdvcmxkLnNjYWxlKHByb2osIGhpdE5vcm1hbFdvcmxkU2NhbGVkV2l0aFByb2opO1xuICAgICAgICBmd2QudnN1YihoaXROb3JtYWxXb3JsZFNjYWxlZFdpdGhQcm9qLCBmd2QpO1xuICAgICAgICBjb25zdCBwcm9qMiA9IGZ3ZC5kb3QodmVsKTtcbiAgICAgICAgd2hlZWwuZGVsdGFSb3RhdGlvbiA9IG0gKiBwcm9qMiAqIHRpbWVTdGVwIC8gd2hlZWwucmFkaXVzO1xuICAgICAgfVxuXG4gICAgICBpZiAoKHdoZWVsLnNsaWRpbmcgfHwgIXdoZWVsLmlzSW5Db250YWN0KSAmJiB3aGVlbC5lbmdpbmVGb3JjZSAhPT0gMCAmJiB3aGVlbC51c2VDdXN0b21TbGlkaW5nUm90YXRpb25hbFNwZWVkKSB7XG4gICAgICAgIC8vIEFwcGx5IGN1c3RvbSByb3RhdGlvbiB3aGVuIGFjY2VsZXJhdGluZyBhbmQgc2xpZGluZ1xuICAgICAgICB3aGVlbC5kZWx0YVJvdGF0aW9uID0gKHdoZWVsLmVuZ2luZUZvcmNlID4gMCA/IDEgOiAtMSkgKiB3aGVlbC5jdXN0b21TbGlkaW5nUm90YXRpb25hbFNwZWVkICogdGltZVN0ZXA7XG4gICAgICB9IC8vIExvY2sgd2hlZWxzXG5cblxuICAgICAgaWYgKE1hdGguYWJzKHdoZWVsLmJyYWtlKSA+IE1hdGguYWJzKHdoZWVsLmVuZ2luZUZvcmNlKSkge1xuICAgICAgICB3aGVlbC5kZWx0YVJvdGF0aW9uID0gMDtcbiAgICAgIH1cblxuICAgICAgd2hlZWwucm90YXRpb24gKz0gd2hlZWwuZGVsdGFSb3RhdGlvbjsgLy8gVXNlIHRoZSBvbGQgdmFsdWVcblxuICAgICAgd2hlZWwuZGVsdGFSb3RhdGlvbiAqPSAwLjk5OyAvLyBkYW1waW5nIG9mIHJvdGF0aW9uIHdoZW4gbm90IGluIGNvbnRhY3RcbiAgICB9XG4gIH1cblxuICB1cGRhdGVTdXNwZW5zaW9uKGRlbHRhVGltZSkge1xuICAgIGNvbnN0IGNoYXNzaXNCb2R5ID0gdGhpcy5jaGFzc2lzQm9keTtcbiAgICBjb25zdCBjaGFzc2lzTWFzcyA9IGNoYXNzaXNCb2R5Lm1hc3M7XG4gICAgY29uc3Qgd2hlZWxJbmZvcyA9IHRoaXMud2hlZWxJbmZvcztcbiAgICBjb25zdCBudW1XaGVlbHMgPSB3aGVlbEluZm9zLmxlbmd0aDtcblxuICAgIGZvciAobGV0IHdfaXQgPSAwOyB3X2l0IDwgbnVtV2hlZWxzOyB3X2l0KyspIHtcbiAgICAgIGNvbnN0IHdoZWVsID0gd2hlZWxJbmZvc1t3X2l0XTtcblxuICAgICAgaWYgKHdoZWVsLmlzSW5Db250YWN0KSB7XG4gICAgICAgIGxldCBmb3JjZTsgLy8gU3ByaW5nXG5cbiAgICAgICAgY29uc3Qgc3VzcF9sZW5ndGggPSB3aGVlbC5zdXNwZW5zaW9uUmVzdExlbmd0aDtcbiAgICAgICAgY29uc3QgY3VycmVudF9sZW5ndGggPSB3aGVlbC5zdXNwZW5zaW9uTGVuZ3RoO1xuICAgICAgICBjb25zdCBsZW5ndGhfZGlmZiA9IHN1c3BfbGVuZ3RoIC0gY3VycmVudF9sZW5ndGg7XG4gICAgICAgIGZvcmNlID0gd2hlZWwuc3VzcGVuc2lvblN0aWZmbmVzcyAqIGxlbmd0aF9kaWZmICogd2hlZWwuY2xpcHBlZEludkNvbnRhY3REb3RTdXNwZW5zaW9uOyAvLyBEYW1wZXJcblxuICAgICAgICBjb25zdCBwcm9qZWN0ZWRfcmVsX3ZlbCA9IHdoZWVsLnN1c3BlbnNpb25SZWxhdGl2ZVZlbG9jaXR5O1xuICAgICAgICBsZXQgc3VzcF9kYW1waW5nO1xuXG4gICAgICAgIGlmIChwcm9qZWN0ZWRfcmVsX3ZlbCA8IDApIHtcbiAgICAgICAgICBzdXNwX2RhbXBpbmcgPSB3aGVlbC5kYW1waW5nQ29tcHJlc3Npb247XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgc3VzcF9kYW1waW5nID0gd2hlZWwuZGFtcGluZ1JlbGF4YXRpb247XG4gICAgICAgIH1cblxuICAgICAgICBmb3JjZSAtPSBzdXNwX2RhbXBpbmcgKiBwcm9qZWN0ZWRfcmVsX3ZlbDtcbiAgICAgICAgd2hlZWwuc3VzcGVuc2lvbkZvcmNlID0gZm9yY2UgKiBjaGFzc2lzTWFzcztcblxuICAgICAgICBpZiAod2hlZWwuc3VzcGVuc2lvbkZvcmNlIDwgMCkge1xuICAgICAgICAgIHdoZWVsLnN1c3BlbnNpb25Gb3JjZSA9IDA7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHdoZWVsLnN1c3BlbnNpb25Gb3JjZSA9IDA7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIC8qKlxuICAgKiBSZW1vdmUgdGhlIHZlaGljbGUgaW5jbHVkaW5nIGl0cyBjb25zdHJhaW50cyBmcm9tIHRoZSB3b3JsZC5cbiAgICovXG5cblxuICByZW1vdmVGcm9tV29ybGQod29ybGQpIHtcbiAgICB0aGlzLmNvbnN0cmFpbnRzO1xuICAgIHdvcmxkLnJlbW92ZUJvZHkodGhpcy5jaGFzc2lzQm9keSk7XG4gICAgd29ybGQucmVtb3ZlRXZlbnRMaXN0ZW5lcigncHJlU3RlcCcsIHRoaXMucHJlU3RlcENhbGxiYWNrKTtcbiAgICB0aGlzLndvcmxkID0gbnVsbDtcbiAgfVxuXG4gIGNhc3RSYXkod2hlZWwpIHtcbiAgICBjb25zdCByYXl2ZWN0b3IgPSBjYXN0UmF5X3JheXZlY3RvcjtcbiAgICBjb25zdCB0YXJnZXQgPSBjYXN0UmF5X3RhcmdldDtcbiAgICB0aGlzLnVwZGF0ZVdoZWVsVHJhbnNmb3JtV29ybGQod2hlZWwpO1xuICAgIGNvbnN0IGNoYXNzaXNCb2R5ID0gdGhpcy5jaGFzc2lzQm9keTtcbiAgICBsZXQgZGVwdGggPSAtMTtcbiAgICBjb25zdCByYXlsZW4gPSB3aGVlbC5zdXNwZW5zaW9uUmVzdExlbmd0aCArIHdoZWVsLnJhZGl1cztcbiAgICB3aGVlbC5kaXJlY3Rpb25Xb3JsZC5zY2FsZShyYXlsZW4sIHJheXZlY3Rvcik7XG4gICAgY29uc3Qgc291cmNlID0gd2hlZWwuY2hhc3Npc0Nvbm5lY3Rpb25Qb2ludFdvcmxkO1xuICAgIHNvdXJjZS52YWRkKHJheXZlY3RvciwgdGFyZ2V0KTtcbiAgICBjb25zdCByYXljYXN0UmVzdWx0ID0gd2hlZWwucmF5Y2FzdFJlc3VsdDtcbiAgICByYXljYXN0UmVzdWx0LnJlc2V0KCk7IC8vIFR1cm4gb2ZmIHJheSBjb2xsaXNpb24gd2l0aCB0aGUgY2hhc3NpcyB0ZW1wb3JhcmlseVxuXG4gICAgY29uc3Qgb2xkU3RhdGUgPSBjaGFzc2lzQm9keS5jb2xsaXNpb25SZXNwb25zZTtcbiAgICBjaGFzc2lzQm9keS5jb2xsaXNpb25SZXNwb25zZSA9IGZhbHNlOyAvLyBDYXN0IHJheSBhZ2FpbnN0IHdvcmxkXG5cbiAgICB0aGlzLndvcmxkLnJheVRlc3Qoc291cmNlLCB0YXJnZXQsIHJheWNhc3RSZXN1bHQpO1xuICAgIGNoYXNzaXNCb2R5LmNvbGxpc2lvblJlc3BvbnNlID0gb2xkU3RhdGU7XG4gICAgY29uc3Qgb2JqZWN0ID0gcmF5Y2FzdFJlc3VsdC5ib2R5O1xuICAgIHdoZWVsLnJheWNhc3RSZXN1bHQuZ3JvdW5kT2JqZWN0ID0gMDtcblxuICAgIGlmIChvYmplY3QpIHtcbiAgICAgIGRlcHRoID0gcmF5Y2FzdFJlc3VsdC5kaXN0YW5jZTtcbiAgICAgIHdoZWVsLnJheWNhc3RSZXN1bHQuaGl0Tm9ybWFsV29ybGQgPSByYXljYXN0UmVzdWx0LmhpdE5vcm1hbFdvcmxkO1xuICAgICAgd2hlZWwuaXNJbkNvbnRhY3QgPSB0cnVlO1xuICAgICAgY29uc3QgaGl0RGlzdGFuY2UgPSByYXljYXN0UmVzdWx0LmRpc3RhbmNlO1xuICAgICAgd2hlZWwuc3VzcGVuc2lvbkxlbmd0aCA9IGhpdERpc3RhbmNlIC0gd2hlZWwucmFkaXVzOyAvLyBjbGFtcCBvbiBtYXggc3VzcGVuc2lvbiB0cmF2ZWxcblxuICAgICAgY29uc3QgbWluU3VzcGVuc2lvbkxlbmd0aCA9IHdoZWVsLnN1c3BlbnNpb25SZXN0TGVuZ3RoIC0gd2hlZWwubWF4U3VzcGVuc2lvblRyYXZlbDtcbiAgICAgIGNvbnN0IG1heFN1c3BlbnNpb25MZW5ndGggPSB3aGVlbC5zdXNwZW5zaW9uUmVzdExlbmd0aCArIHdoZWVsLm1heFN1c3BlbnNpb25UcmF2ZWw7XG5cbiAgICAgIGlmICh3aGVlbC5zdXNwZW5zaW9uTGVuZ3RoIDwgbWluU3VzcGVuc2lvbkxlbmd0aCkge1xuICAgICAgICB3aGVlbC5zdXNwZW5zaW9uTGVuZ3RoID0gbWluU3VzcGVuc2lvbkxlbmd0aDtcbiAgICAgIH1cblxuICAgICAgaWYgKHdoZWVsLnN1c3BlbnNpb25MZW5ndGggPiBtYXhTdXNwZW5zaW9uTGVuZ3RoKSB7XG4gICAgICAgIHdoZWVsLnN1c3BlbnNpb25MZW5ndGggPSBtYXhTdXNwZW5zaW9uTGVuZ3RoO1xuICAgICAgICB3aGVlbC5yYXljYXN0UmVzdWx0LnJlc2V0KCk7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGRlbm9taW5hdG9yID0gd2hlZWwucmF5Y2FzdFJlc3VsdC5oaXROb3JtYWxXb3JsZC5kb3Qod2hlZWwuZGlyZWN0aW9uV29ybGQpO1xuICAgICAgY29uc3QgY2hhc3Npc192ZWxvY2l0eV9hdF9jb250YWN0UG9pbnQgPSBuZXcgVmVjMygpO1xuICAgICAgY2hhc3Npc0JvZHkuZ2V0VmVsb2NpdHlBdFdvcmxkUG9pbnQod2hlZWwucmF5Y2FzdFJlc3VsdC5oaXRQb2ludFdvcmxkLCBjaGFzc2lzX3ZlbG9jaXR5X2F0X2NvbnRhY3RQb2ludCk7XG4gICAgICBjb25zdCBwcm9qVmVsID0gd2hlZWwucmF5Y2FzdFJlc3VsdC5oaXROb3JtYWxXb3JsZC5kb3QoY2hhc3Npc192ZWxvY2l0eV9hdF9jb250YWN0UG9pbnQpO1xuXG4gICAgICBpZiAoZGVub21pbmF0b3IgPj0gLTAuMSkge1xuICAgICAgICB3aGVlbC5zdXNwZW5zaW9uUmVsYXRpdmVWZWxvY2l0eSA9IDA7XG4gICAgICAgIHdoZWVsLmNsaXBwZWRJbnZDb250YWN0RG90U3VzcGVuc2lvbiA9IDEgLyAwLjE7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zdCBpbnYgPSAtMSAvIGRlbm9taW5hdG9yO1xuICAgICAgICB3aGVlbC5zdXNwZW5zaW9uUmVsYXRpdmVWZWxvY2l0eSA9IHByb2pWZWwgKiBpbnY7XG4gICAgICAgIHdoZWVsLmNsaXBwZWRJbnZDb250YWN0RG90U3VzcGVuc2lvbiA9IGludjtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgLy9wdXQgd2hlZWwgaW5mbyBhcyBpbiByZXN0IHBvc2l0aW9uXG4gICAgICB3aGVlbC5zdXNwZW5zaW9uTGVuZ3RoID0gd2hlZWwuc3VzcGVuc2lvblJlc3RMZW5ndGggKyAwICogd2hlZWwubWF4U3VzcGVuc2lvblRyYXZlbDtcbiAgICAgIHdoZWVsLnN1c3BlbnNpb25SZWxhdGl2ZVZlbG9jaXR5ID0gMC4wO1xuICAgICAgd2hlZWwuZGlyZWN0aW9uV29ybGQuc2NhbGUoLTEsIHdoZWVsLnJheWNhc3RSZXN1bHQuaGl0Tm9ybWFsV29ybGQpO1xuICAgICAgd2hlZWwuY2xpcHBlZEludkNvbnRhY3REb3RTdXNwZW5zaW9uID0gMS4wO1xuICAgIH1cblxuICAgIHJldHVybiBkZXB0aDtcbiAgfVxuXG4gIHVwZGF0ZVdoZWVsVHJhbnNmb3JtV29ybGQod2hlZWwpIHtcbiAgICB3aGVlbC5pc0luQ29udGFjdCA9IGZhbHNlO1xuICAgIGNvbnN0IGNoYXNzaXNCb2R5ID0gdGhpcy5jaGFzc2lzQm9keTtcbiAgICBjaGFzc2lzQm9keS5wb2ludFRvV29ybGRGcmFtZSh3aGVlbC5jaGFzc2lzQ29ubmVjdGlvblBvaW50TG9jYWwsIHdoZWVsLmNoYXNzaXNDb25uZWN0aW9uUG9pbnRXb3JsZCk7XG4gICAgY2hhc3Npc0JvZHkudmVjdG9yVG9Xb3JsZEZyYW1lKHdoZWVsLmRpcmVjdGlvbkxvY2FsLCB3aGVlbC5kaXJlY3Rpb25Xb3JsZCk7XG4gICAgY2hhc3Npc0JvZHkudmVjdG9yVG9Xb3JsZEZyYW1lKHdoZWVsLmF4bGVMb2NhbCwgd2hlZWwuYXhsZVdvcmxkKTtcbiAgfVxuICAvKipcbiAgICogVXBkYXRlIG9uZSBvZiB0aGUgd2hlZWwgdHJhbnNmb3JtLlxuICAgKiBOb3RlIHdoZW4gcmVuZGVyaW5nIHdoZWVsczogZHVyaW5nIGVhY2ggc3RlcCwgd2hlZWwgdHJhbnNmb3JtcyBhcmUgdXBkYXRlZCBCRUZPUkUgdGhlIGNoYXNzaXM7IGllLiB0aGVpciBwb3NpdGlvbiBiZWNvbWVzIGludmFsaWQgYWZ0ZXIgdGhlIHN0ZXAuIFRodXMgd2hlbiB5b3UgcmVuZGVyIHdoZWVscywgeW91IG11c3QgdXBkYXRlIHdoZWVsIHRyYW5zZm9ybXMgYmVmb3JlIHJlbmRlcmluZyB0aGVtLiBTZWUgcmF5Y2FzdFZlaGljbGUgZGVtbyBmb3IgYW4gZXhhbXBsZS5cbiAgICogQHBhcmFtIHdoZWVsSW5kZXggVGhlIHdoZWVsIGluZGV4IHRvIHVwZGF0ZS5cbiAgICovXG5cblxuICB1cGRhdGVXaGVlbFRyYW5zZm9ybSh3aGVlbEluZGV4KSB7XG4gICAgY29uc3QgdXAgPSB0bXBWZWM0O1xuICAgIGNvbnN0IHJpZ2h0ID0gdG1wVmVjNTtcbiAgICBjb25zdCBmd2QgPSB0bXBWZWM2O1xuICAgIGNvbnN0IHdoZWVsID0gdGhpcy53aGVlbEluZm9zW3doZWVsSW5kZXhdO1xuICAgIHRoaXMudXBkYXRlV2hlZWxUcmFuc2Zvcm1Xb3JsZCh3aGVlbCk7XG4gICAgd2hlZWwuZGlyZWN0aW9uTG9jYWwuc2NhbGUoLTEsIHVwKTtcbiAgICByaWdodC5jb3B5KHdoZWVsLmF4bGVMb2NhbCk7XG4gICAgdXAuY3Jvc3MocmlnaHQsIGZ3ZCk7XG4gICAgZndkLm5vcm1hbGl6ZSgpO1xuICAgIHJpZ2h0Lm5vcm1hbGl6ZSgpOyAvLyBSb3RhdGUgYXJvdW5kIHN0ZWVyaW5nIG92ZXIgdGhlIHdoZWVsQXhsZVxuXG4gICAgY29uc3Qgc3RlZXJpbmcgPSB3aGVlbC5zdGVlcmluZztcbiAgICBjb25zdCBzdGVlcmluZ09ybiA9IG5ldyBRdWF0ZXJuaW9uKCk7XG4gICAgc3RlZXJpbmdPcm4uc2V0RnJvbUF4aXNBbmdsZSh1cCwgc3RlZXJpbmcpO1xuICAgIGNvbnN0IHJvdGF0aW5nT3JuID0gbmV3IFF1YXRlcm5pb24oKTtcbiAgICByb3RhdGluZ09ybi5zZXRGcm9tQXhpc0FuZ2xlKHJpZ2h0LCB3aGVlbC5yb3RhdGlvbik7IC8vIFdvcmxkIHJvdGF0aW9uIG9mIHRoZSB3aGVlbFxuXG4gICAgY29uc3QgcSA9IHdoZWVsLndvcmxkVHJhbnNmb3JtLnF1YXRlcm5pb247XG4gICAgdGhpcy5jaGFzc2lzQm9keS5xdWF0ZXJuaW9uLm11bHQoc3RlZXJpbmdPcm4sIHEpO1xuICAgIHEubXVsdChyb3RhdGluZ09ybiwgcSk7XG4gICAgcS5ub3JtYWxpemUoKTsgLy8gd29ybGQgcG9zaXRpb24gb2YgdGhlIHdoZWVsXG5cbiAgICBjb25zdCBwID0gd2hlZWwud29ybGRUcmFuc2Zvcm0ucG9zaXRpb247XG4gICAgcC5jb3B5KHdoZWVsLmRpcmVjdGlvbldvcmxkKTtcbiAgICBwLnNjYWxlKHdoZWVsLnN1c3BlbnNpb25MZW5ndGgsIHApO1xuICAgIHAudmFkZCh3aGVlbC5jaGFzc2lzQ29ubmVjdGlvblBvaW50V29ybGQsIHApO1xuICB9XG4gIC8qKlxuICAgKiBHZXQgdGhlIHdvcmxkIHRyYW5zZm9ybSBvZiBvbmUgb2YgdGhlIHdoZWVsc1xuICAgKi9cblxuXG4gIGdldFdoZWVsVHJhbnNmb3JtV29ybGQod2hlZWxJbmRleCkge1xuICAgIHJldHVybiB0aGlzLndoZWVsSW5mb3Nbd2hlZWxJbmRleF0ud29ybGRUcmFuc2Zvcm07XG4gIH1cblxuICB1cGRhdGVGcmljdGlvbih0aW1lU3RlcCkge1xuICAgIGNvbnN0IHN1cmZOb3JtYWxXU19zY2FsZWRfcHJvaiA9IHVwZGF0ZUZyaWN0aW9uX3N1cmZOb3JtYWxXU19zY2FsZWRfcHJvajsgLy9jYWxjdWxhdGUgdGhlIGltcHVsc2UsIHNvIHRoYXQgdGhlIHdoZWVscyBkb24ndCBtb3ZlIHNpZGV3YXJkc1xuXG4gICAgY29uc3Qgd2hlZWxJbmZvcyA9IHRoaXMud2hlZWxJbmZvcztcbiAgICBjb25zdCBudW1XaGVlbHMgPSB3aGVlbEluZm9zLmxlbmd0aDtcbiAgICBjb25zdCBjaGFzc2lzQm9keSA9IHRoaXMuY2hhc3Npc0JvZHk7XG4gICAgY29uc3QgZm9yd2FyZFdTID0gdXBkYXRlRnJpY3Rpb25fZm9yd2FyZFdTO1xuICAgIGNvbnN0IGF4bGUgPSB1cGRhdGVGcmljdGlvbl9heGxlO1xuICAgIHRoaXMubnVtV2hlZWxzT25Hcm91bmQgPSAwO1xuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBudW1XaGVlbHM7IGkrKykge1xuICAgICAgY29uc3Qgd2hlZWwgPSB3aGVlbEluZm9zW2ldO1xuICAgICAgY29uc3QgZ3JvdW5kT2JqZWN0ID0gd2hlZWwucmF5Y2FzdFJlc3VsdC5ib2R5O1xuXG4gICAgICBpZiAoZ3JvdW5kT2JqZWN0KSB7XG4gICAgICAgIHRoaXMubnVtV2hlZWxzT25Hcm91bmQrKztcbiAgICAgIH1cblxuICAgICAgd2hlZWwuc2lkZUltcHVsc2UgPSAwO1xuICAgICAgd2hlZWwuZm9yd2FyZEltcHVsc2UgPSAwO1xuXG4gICAgICBpZiAoIWZvcndhcmRXU1tpXSkge1xuICAgICAgICBmb3J3YXJkV1NbaV0gPSBuZXcgVmVjMygpO1xuICAgICAgfVxuXG4gICAgICBpZiAoIWF4bGVbaV0pIHtcbiAgICAgICAgYXhsZVtpXSA9IG5ldyBWZWMzKCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBudW1XaGVlbHM7IGkrKykge1xuICAgICAgY29uc3Qgd2hlZWwgPSB3aGVlbEluZm9zW2ldO1xuICAgICAgY29uc3QgZ3JvdW5kT2JqZWN0ID0gd2hlZWwucmF5Y2FzdFJlc3VsdC5ib2R5O1xuXG4gICAgICBpZiAoZ3JvdW5kT2JqZWN0KSB7XG4gICAgICAgIGNvbnN0IGF4bGVpID0gYXhsZVtpXTtcbiAgICAgICAgY29uc3Qgd2hlZWxUcmFucyA9IHRoaXMuZ2V0V2hlZWxUcmFuc2Zvcm1Xb3JsZChpKTsgLy8gR2V0IHdvcmxkIGF4bGVcblxuICAgICAgICB3aGVlbFRyYW5zLnZlY3RvclRvV29ybGRGcmFtZShkaXJlY3Rpb25zW3RoaXMuaW5kZXhSaWdodEF4aXNdLCBheGxlaSk7XG4gICAgICAgIGNvbnN0IHN1cmZOb3JtYWxXUyA9IHdoZWVsLnJheWNhc3RSZXN1bHQuaGl0Tm9ybWFsV29ybGQ7XG4gICAgICAgIGNvbnN0IHByb2ogPSBheGxlaS5kb3Qoc3VyZk5vcm1hbFdTKTtcbiAgICAgICAgc3VyZk5vcm1hbFdTLnNjYWxlKHByb2osIHN1cmZOb3JtYWxXU19zY2FsZWRfcHJvaik7XG4gICAgICAgIGF4bGVpLnZzdWIoc3VyZk5vcm1hbFdTX3NjYWxlZF9wcm9qLCBheGxlaSk7XG4gICAgICAgIGF4bGVpLm5vcm1hbGl6ZSgpO1xuICAgICAgICBzdXJmTm9ybWFsV1MuY3Jvc3MoYXhsZWksIGZvcndhcmRXU1tpXSk7XG4gICAgICAgIGZvcndhcmRXU1tpXS5ub3JtYWxpemUoKTtcbiAgICAgICAgd2hlZWwuc2lkZUltcHVsc2UgPSByZXNvbHZlU2luZ2xlQmlsYXRlcmFsKGNoYXNzaXNCb2R5LCB3aGVlbC5yYXljYXN0UmVzdWx0LmhpdFBvaW50V29ybGQsIGdyb3VuZE9iamVjdCwgd2hlZWwucmF5Y2FzdFJlc3VsdC5oaXRQb2ludFdvcmxkLCBheGxlaSk7XG4gICAgICAgIHdoZWVsLnNpZGVJbXB1bHNlICo9IHNpZGVGcmljdGlvblN0aWZmbmVzczI7XG4gICAgICB9XG4gICAgfVxuXG4gICAgY29uc3Qgc2lkZUZhY3RvciA9IDE7XG4gICAgY29uc3QgZndkRmFjdG9yID0gMC41O1xuICAgIHRoaXMuc2xpZGluZyA9IGZhbHNlO1xuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBudW1XaGVlbHM7IGkrKykge1xuICAgICAgY29uc3Qgd2hlZWwgPSB3aGVlbEluZm9zW2ldO1xuICAgICAgY29uc3QgZ3JvdW5kT2JqZWN0ID0gd2hlZWwucmF5Y2FzdFJlc3VsdC5ib2R5O1xuICAgICAgbGV0IHJvbGxpbmdGcmljdGlvbiA9IDA7XG4gICAgICB3aGVlbC5zbGlwSW5mbyA9IDE7XG5cbiAgICAgIGlmIChncm91bmRPYmplY3QpIHtcbiAgICAgICAgY29uc3QgZGVmYXVsdFJvbGxpbmdGcmljdGlvbkltcHVsc2UgPSAwO1xuICAgICAgICBjb25zdCBtYXhJbXB1bHNlID0gd2hlZWwuYnJha2UgPyB3aGVlbC5icmFrZSA6IGRlZmF1bHRSb2xsaW5nRnJpY3Rpb25JbXB1bHNlOyAvLyBidFdoZWVsQ29udGFjdFBvaW50IGNvbnRhY3RQdChjaGFzc2lzQm9keSxncm91bmRPYmplY3Qsd2hlZWxJbmZyYXljYXN0SW5mby5oaXRQb2ludFdvcmxkLGZvcndhcmRXU1t3aGVlbF0sbWF4SW1wdWxzZSk7XG4gICAgICAgIC8vIHJvbGxpbmdGcmljdGlvbiA9IGNhbGNSb2xsaW5nRnJpY3Rpb24oY29udGFjdFB0KTtcblxuICAgICAgICByb2xsaW5nRnJpY3Rpb24gPSBjYWxjUm9sbGluZ0ZyaWN0aW9uKGNoYXNzaXNCb2R5LCBncm91bmRPYmplY3QsIHdoZWVsLnJheWNhc3RSZXN1bHQuaGl0UG9pbnRXb3JsZCwgZm9yd2FyZFdTW2ldLCBtYXhJbXB1bHNlKTtcbiAgICAgICAgcm9sbGluZ0ZyaWN0aW9uICs9IHdoZWVsLmVuZ2luZUZvcmNlICogdGltZVN0ZXA7IC8vIHJvbGxpbmdGcmljdGlvbiA9IDA7XG5cbiAgICAgICAgY29uc3QgZmFjdG9yID0gbWF4SW1wdWxzZSAvIHJvbGxpbmdGcmljdGlvbjtcbiAgICAgICAgd2hlZWwuc2xpcEluZm8gKj0gZmFjdG9yO1xuICAgICAgfSAvL3N3aXRjaCBiZXR3ZWVuIGFjdGl2ZSByb2xsaW5nICh0aHJvdHRsZSksIGJyYWtpbmcgYW5kIG5vbi1hY3RpdmUgcm9sbGluZyBmcmljdGlvbiAobnRocm90dGxlL2JyZWFrKVxuXG5cbiAgICAgIHdoZWVsLmZvcndhcmRJbXB1bHNlID0gMDtcbiAgICAgIHdoZWVsLnNraWRJbmZvID0gMTtcblxuICAgICAgaWYgKGdyb3VuZE9iamVjdCkge1xuICAgICAgICB3aGVlbC5za2lkSW5mbyA9IDE7XG4gICAgICAgIGNvbnN0IG1heGltcCA9IHdoZWVsLnN1c3BlbnNpb25Gb3JjZSAqIHRpbWVTdGVwICogd2hlZWwuZnJpY3Rpb25TbGlwO1xuICAgICAgICBjb25zdCBtYXhpbXBTaWRlID0gbWF4aW1wO1xuICAgICAgICBjb25zdCBtYXhpbXBTcXVhcmVkID0gbWF4aW1wICogbWF4aW1wU2lkZTtcbiAgICAgICAgd2hlZWwuZm9yd2FyZEltcHVsc2UgPSByb2xsaW5nRnJpY3Rpb247IC8vd2hlZWxJbmZvLmVuZ2luZUZvcmNlKiB0aW1lU3RlcDtcblxuICAgICAgICBjb25zdCB4ID0gd2hlZWwuZm9yd2FyZEltcHVsc2UgKiBmd2RGYWN0b3IgLyB3aGVlbC5mb3J3YXJkQWNjZWxlcmF0aW9uO1xuICAgICAgICBjb25zdCB5ID0gd2hlZWwuc2lkZUltcHVsc2UgKiBzaWRlRmFjdG9yIC8gd2hlZWwuc2lkZUFjY2VsZXJhdGlvbjtcbiAgICAgICAgY29uc3QgaW1wdWxzZVNxdWFyZWQgPSB4ICogeCArIHkgKiB5O1xuICAgICAgICB3aGVlbC5zbGlkaW5nID0gZmFsc2U7XG5cbiAgICAgICAgaWYgKGltcHVsc2VTcXVhcmVkID4gbWF4aW1wU3F1YXJlZCkge1xuICAgICAgICAgIHRoaXMuc2xpZGluZyA9IHRydWU7XG4gICAgICAgICAgd2hlZWwuc2xpZGluZyA9IHRydWU7XG4gICAgICAgICAgY29uc3QgZmFjdG9yID0gbWF4aW1wIC8gTWF0aC5zcXJ0KGltcHVsc2VTcXVhcmVkKTtcbiAgICAgICAgICB3aGVlbC5za2lkSW5mbyAqPSBmYWN0b3I7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAodGhpcy5zbGlkaW5nKSB7XG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG51bVdoZWVsczsgaSsrKSB7XG4gICAgICAgIGNvbnN0IHdoZWVsID0gd2hlZWxJbmZvc1tpXTtcblxuICAgICAgICBpZiAod2hlZWwuc2lkZUltcHVsc2UgIT09IDApIHtcbiAgICAgICAgICBpZiAod2hlZWwuc2tpZEluZm8gPCAxKSB7XG4gICAgICAgICAgICB3aGVlbC5mb3J3YXJkSW1wdWxzZSAqPSB3aGVlbC5za2lkSW5mbztcbiAgICAgICAgICAgIHdoZWVsLnNpZGVJbXB1bHNlICo9IHdoZWVsLnNraWRJbmZvO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gLy8gYXBwbHkgdGhlIGltcHVsc2VzXG5cblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbnVtV2hlZWxzOyBpKyspIHtcbiAgICAgIGNvbnN0IHdoZWVsID0gd2hlZWxJbmZvc1tpXTtcbiAgICAgIGNvbnN0IHJlbF9wb3MgPSBuZXcgVmVjMygpO1xuICAgICAgd2hlZWwucmF5Y2FzdFJlc3VsdC5oaXRQb2ludFdvcmxkLnZzdWIoY2hhc3Npc0JvZHkucG9zaXRpb24sIHJlbF9wb3MpOyAvLyBjYW5ub25zIGFwcGx5aW1wdWxzZSBpcyB1c2luZyB3b3JsZCBjb29yZCBmb3IgdGhlIHBvc2l0aW9uXG4gICAgICAvL3JlbF9wb3MuY29weSh3aGVlbC5yYXljYXN0UmVzdWx0LmhpdFBvaW50V29ybGQpO1xuXG4gICAgICBpZiAod2hlZWwuZm9yd2FyZEltcHVsc2UgIT09IDApIHtcbiAgICAgICAgY29uc3QgaW1wdWxzZSA9IG5ldyBWZWMzKCk7XG4gICAgICAgIGZvcndhcmRXU1tpXS5zY2FsZSh3aGVlbC5mb3J3YXJkSW1wdWxzZSwgaW1wdWxzZSk7XG4gICAgICAgIGNoYXNzaXNCb2R5LmFwcGx5SW1wdWxzZShpbXB1bHNlLCByZWxfcG9zKTtcbiAgICAgIH1cblxuICAgICAgaWYgKHdoZWVsLnNpZGVJbXB1bHNlICE9PSAwKSB7XG4gICAgICAgIGNvbnN0IGdyb3VuZE9iamVjdCA9IHdoZWVsLnJheWNhc3RSZXN1bHQuYm9keTtcbiAgICAgICAgY29uc3QgcmVsX3BvczIgPSBuZXcgVmVjMygpO1xuICAgICAgICB3aGVlbC5yYXljYXN0UmVzdWx0LmhpdFBvaW50V29ybGQudnN1Yihncm91bmRPYmplY3QucG9zaXRpb24sIHJlbF9wb3MyKTsgLy9yZWxfcG9zMi5jb3B5KHdoZWVsLnJheWNhc3RSZXN1bHQuaGl0UG9pbnRXb3JsZCk7XG5cbiAgICAgICAgY29uc3Qgc2lkZUltcCA9IG5ldyBWZWMzKCk7XG4gICAgICAgIGF4bGVbaV0uc2NhbGUod2hlZWwuc2lkZUltcHVsc2UsIHNpZGVJbXApOyAvLyBTY2FsZSB0aGUgcmVsYXRpdmUgcG9zaXRpb24gaW4gdGhlIHVwIGRpcmVjdGlvbiB3aXRoIHJvbGxJbmZsdWVuY2UuXG4gICAgICAgIC8vIElmIHJvbGxJbmZsdWVuY2UgaXMgMSwgdGhlIGltcHVsc2Ugd2lsbCBiZSBhcHBsaWVkIG9uIHRoZSBoaXRQb2ludCAoZWFzeSB0byByb2xsIG92ZXIpLCBpZiBpdCBpcyB6ZXJvIGl0IHdpbGwgYmUgYXBwbGllZCBpbiB0aGUgc2FtZSBwbGFuZSBhcyB0aGUgY2VudGVyIG9mIG1hc3MgKG5vdCBlYXN5IHRvIHJvbGwgb3ZlcikuXG5cbiAgICAgICAgY2hhc3Npc0JvZHkudmVjdG9yVG9Mb2NhbEZyYW1lKHJlbF9wb3MsIHJlbF9wb3MpO1xuICAgICAgICByZWxfcG9zWyd4eXonW3RoaXMuaW5kZXhVcEF4aXNdXSAqPSB3aGVlbC5yb2xsSW5mbHVlbmNlO1xuICAgICAgICBjaGFzc2lzQm9keS52ZWN0b3JUb1dvcmxkRnJhbWUocmVsX3BvcywgcmVsX3Bvcyk7XG4gICAgICAgIGNoYXNzaXNCb2R5LmFwcGx5SW1wdWxzZShzaWRlSW1wLCByZWxfcG9zKTsgLy9hcHBseSBmcmljdGlvbiBpbXB1bHNlIG9uIHRoZSBncm91bmRcblxuICAgICAgICBzaWRlSW1wLnNjYWxlKC0xLCBzaWRlSW1wKTtcbiAgICAgICAgZ3JvdW5kT2JqZWN0LmFwcGx5SW1wdWxzZShzaWRlSW1wLCByZWxfcG9zMik7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbn1cbmNvbnN0IHRtcFZlYzQgPSBuZXcgVmVjMygpO1xuY29uc3QgdG1wVmVjNSA9IG5ldyBWZWMzKCk7XG5jb25zdCB0bXBWZWM2ID0gbmV3IFZlYzMoKTtcbm5ldyBSYXkoKTtcbmNvbnN0IGNhc3RSYXlfcmF5dmVjdG9yID0gbmV3IFZlYzMoKTtcbmNvbnN0IGNhc3RSYXlfdGFyZ2V0ID0gbmV3IFZlYzMoKTtcbmNvbnN0IGRpcmVjdGlvbnMgPSBbbmV3IFZlYzMoMSwgMCwgMCksIG5ldyBWZWMzKDAsIDEsIDApLCBuZXcgVmVjMygwLCAwLCAxKV07XG5jb25zdCB1cGRhdGVGcmljdGlvbl9zdXJmTm9ybWFsV1Nfc2NhbGVkX3Byb2ogPSBuZXcgVmVjMygpO1xuY29uc3QgdXBkYXRlRnJpY3Rpb25fYXhsZSA9IFtdO1xuY29uc3QgdXBkYXRlRnJpY3Rpb25fZm9yd2FyZFdTID0gW107XG5jb25zdCBzaWRlRnJpY3Rpb25TdGlmZm5lc3MyID0gMTtcbmNvbnN0IGNhbGNSb2xsaW5nRnJpY3Rpb25fdmVsMSA9IG5ldyBWZWMzKCk7XG5jb25zdCBjYWxjUm9sbGluZ0ZyaWN0aW9uX3ZlbDIgPSBuZXcgVmVjMygpO1xuY29uc3QgY2FsY1JvbGxpbmdGcmljdGlvbl92ZWwgPSBuZXcgVmVjMygpO1xuXG5mdW5jdGlvbiBjYWxjUm9sbGluZ0ZyaWN0aW9uKGJvZHkwLCBib2R5MSwgZnJpY3Rpb25Qb3NXb3JsZCwgZnJpY3Rpb25EaXJlY3Rpb25Xb3JsZCwgbWF4SW1wdWxzZSkge1xuICBsZXQgajEgPSAwO1xuICBjb25zdCBjb250YWN0UG9zV29ybGQgPSBmcmljdGlvblBvc1dvcmxkOyAvLyBjb25zdCByZWxfcG9zMSA9IG5ldyBWZWMzKCk7XG4gIC8vIGNvbnN0IHJlbF9wb3MyID0gbmV3IFZlYzMoKTtcblxuICBjb25zdCB2ZWwxID0gY2FsY1JvbGxpbmdGcmljdGlvbl92ZWwxO1xuICBjb25zdCB2ZWwyID0gY2FsY1JvbGxpbmdGcmljdGlvbl92ZWwyO1xuICBjb25zdCB2ZWwgPSBjYWxjUm9sbGluZ0ZyaWN0aW9uX3ZlbDsgLy8gY29udGFjdFBvc1dvcmxkLnZzdWIoYm9keTAucG9zaXRpb24sIHJlbF9wb3MxKTtcbiAgLy8gY29udGFjdFBvc1dvcmxkLnZzdWIoYm9keTEucG9zaXRpb24sIHJlbF9wb3MyKTtcblxuICBib2R5MC5nZXRWZWxvY2l0eUF0V29ybGRQb2ludChjb250YWN0UG9zV29ybGQsIHZlbDEpO1xuICBib2R5MS5nZXRWZWxvY2l0eUF0V29ybGRQb2ludChjb250YWN0UG9zV29ybGQsIHZlbDIpO1xuICB2ZWwxLnZzdWIodmVsMiwgdmVsKTtcbiAgY29uc3QgdnJlbCA9IGZyaWN0aW9uRGlyZWN0aW9uV29ybGQuZG90KHZlbCk7XG4gIGNvbnN0IGRlbm9tMCA9IGNvbXB1dGVJbXB1bHNlRGVub21pbmF0b3IoYm9keTAsIGZyaWN0aW9uUG9zV29ybGQsIGZyaWN0aW9uRGlyZWN0aW9uV29ybGQpO1xuICBjb25zdCBkZW5vbTEgPSBjb21wdXRlSW1wdWxzZURlbm9taW5hdG9yKGJvZHkxLCBmcmljdGlvblBvc1dvcmxkLCBmcmljdGlvbkRpcmVjdGlvbldvcmxkKTtcbiAgY29uc3QgcmVsYXhhdGlvbiA9IDE7XG4gIGNvbnN0IGphY0RpYWdBQkludiA9IHJlbGF4YXRpb24gLyAoZGVub20wICsgZGVub20xKTsgLy8gY2FsY3VsYXRlIGogdGhhdCBtb3ZlcyB1cyB0byB6ZXJvIHJlbGF0aXZlIHZlbG9jaXR5XG5cbiAgajEgPSAtdnJlbCAqIGphY0RpYWdBQkludjtcblxuICBpZiAobWF4SW1wdWxzZSA8IGoxKSB7XG4gICAgajEgPSBtYXhJbXB1bHNlO1xuICB9XG5cbiAgaWYgKGoxIDwgLW1heEltcHVsc2UpIHtcbiAgICBqMSA9IC1tYXhJbXB1bHNlO1xuICB9XG5cbiAgcmV0dXJuIGoxO1xufVxuXG5jb25zdCBjb21wdXRlSW1wdWxzZURlbm9taW5hdG9yX3IwID0gbmV3IFZlYzMoKTtcbmNvbnN0IGNvbXB1dGVJbXB1bHNlRGVub21pbmF0b3JfYzAgPSBuZXcgVmVjMygpO1xuY29uc3QgY29tcHV0ZUltcHVsc2VEZW5vbWluYXRvcl92ZWMgPSBuZXcgVmVjMygpO1xuY29uc3QgY29tcHV0ZUltcHVsc2VEZW5vbWluYXRvcl9tID0gbmV3IFZlYzMoKTtcblxuZnVuY3Rpb24gY29tcHV0ZUltcHVsc2VEZW5vbWluYXRvcihib2R5LCBwb3MsIG5vcm1hbCkge1xuICBjb25zdCByMCA9IGNvbXB1dGVJbXB1bHNlRGVub21pbmF0b3JfcjA7XG4gIGNvbnN0IGMwID0gY29tcHV0ZUltcHVsc2VEZW5vbWluYXRvcl9jMDtcbiAgY29uc3QgdmVjID0gY29tcHV0ZUltcHVsc2VEZW5vbWluYXRvcl92ZWM7XG4gIGNvbnN0IG0gPSBjb21wdXRlSW1wdWxzZURlbm9taW5hdG9yX207XG4gIHBvcy52c3ViKGJvZHkucG9zaXRpb24sIHIwKTtcbiAgcjAuY3Jvc3Mobm9ybWFsLCBjMCk7XG4gIGJvZHkuaW52SW5lcnRpYVdvcmxkLnZtdWx0KGMwLCBtKTtcbiAgbS5jcm9zcyhyMCwgdmVjKTtcbiAgcmV0dXJuIGJvZHkuaW52TWFzcyArIG5vcm1hbC5kb3QodmVjKTtcbn1cblxuY29uc3QgcmVzb2x2ZVNpbmdsZUJpbGF0ZXJhbF92ZWwxID0gbmV3IFZlYzMoKTtcbmNvbnN0IHJlc29sdmVTaW5nbGVCaWxhdGVyYWxfdmVsMiA9IG5ldyBWZWMzKCk7XG5jb25zdCByZXNvbHZlU2luZ2xlQmlsYXRlcmFsX3ZlbCA9IG5ldyBWZWMzKCk7IC8vIGJpbGF0ZXJhbCBjb25zdHJhaW50IGJldHdlZW4gdHdvIGR5bmFtaWMgb2JqZWN0c1xuXG5mdW5jdGlvbiByZXNvbHZlU2luZ2xlQmlsYXRlcmFsKGJvZHkxLCBwb3MxLCBib2R5MiwgcG9zMiwgbm9ybWFsKSB7XG4gIGNvbnN0IG5vcm1hbExlblNxciA9IG5vcm1hbC5sZW5ndGhTcXVhcmVkKCk7XG5cbiAgaWYgKG5vcm1hbExlblNxciA+IDEuMSkge1xuICAgIHJldHVybiAwOyAvLyBubyBpbXB1bHNlXG4gIH0gLy8gY29uc3QgcmVsX3BvczEgPSBuZXcgVmVjMygpO1xuICAvLyBjb25zdCByZWxfcG9zMiA9IG5ldyBWZWMzKCk7XG4gIC8vIHBvczEudnN1Yihib2R5MS5wb3NpdGlvbiwgcmVsX3BvczEpO1xuICAvLyBwb3MyLnZzdWIoYm9keTIucG9zaXRpb24sIHJlbF9wb3MyKTtcblxuXG4gIGNvbnN0IHZlbDEgPSByZXNvbHZlU2luZ2xlQmlsYXRlcmFsX3ZlbDE7XG4gIGNvbnN0IHZlbDIgPSByZXNvbHZlU2luZ2xlQmlsYXRlcmFsX3ZlbDI7XG4gIGNvbnN0IHZlbCA9IHJlc29sdmVTaW5nbGVCaWxhdGVyYWxfdmVsO1xuICBib2R5MS5nZXRWZWxvY2l0eUF0V29ybGRQb2ludChwb3MxLCB2ZWwxKTtcbiAgYm9keTIuZ2V0VmVsb2NpdHlBdFdvcmxkUG9pbnQocG9zMiwgdmVsMik7XG4gIHZlbDEudnN1Yih2ZWwyLCB2ZWwpO1xuICBjb25zdCByZWxfdmVsID0gbm9ybWFsLmRvdCh2ZWwpO1xuICBjb25zdCBjb250YWN0RGFtcGluZyA9IDAuMjtcbiAgY29uc3QgbWFzc1Rlcm0gPSAxIC8gKGJvZHkxLmludk1hc3MgKyBib2R5Mi5pbnZNYXNzKTtcbiAgY29uc3QgaW1wdWxzZSA9IC1jb250YWN0RGFtcGluZyAqIHJlbF92ZWwgKiBtYXNzVGVybTtcbiAgcmV0dXJuIGltcHVsc2U7XG59XG5cbi8qKlxuICogU3BoZXJpY2FsIHNoYXBlXG4gKiBAZXhhbXBsZVxuICogICAgIGNvbnN0IHJhZGl1cyA9IDFcbiAqICAgICBjb25zdCBzcGhlcmVTaGFwZSA9IG5ldyBDQU5OT04uU3BoZXJlKHJhZGl1cylcbiAqICAgICBjb25zdCBzcGhlcmVCb2R5ID0gbmV3IENBTk5PTi5Cb2R5KHsgbWFzczogMSwgc2hhcGU6IHNwaGVyZVNoYXBlIH0pXG4gKiAgICAgd29ybGQuYWRkQm9keShzcGhlcmVCb2R5KVxuICovXG5jbGFzcyBTcGhlcmUgZXh0ZW5kcyBTaGFwZSB7XG4gIC8qKlxuICAgKiBUaGUgcmFkaXVzIG9mIHRoZSBzcGhlcmUuXG4gICAqL1xuXG4gIC8qKlxuICAgKlxuICAgKiBAcGFyYW0gcmFkaXVzIFRoZSByYWRpdXMgb2YgdGhlIHNwaGVyZSwgYSBub24tbmVnYXRpdmUgbnVtYmVyLlxuICAgKi9cbiAgY29uc3RydWN0b3IocmFkaXVzKSB7XG4gICAgc3VwZXIoe1xuICAgICAgdHlwZTogU2hhcGUudHlwZXMuU1BIRVJFXG4gICAgfSk7XG4gICAgdGhpcy5yYWRpdXMgPSB2b2lkIDA7XG4gICAgdGhpcy5yYWRpdXMgPSByYWRpdXMgIT09IHVuZGVmaW5lZCA/IHJhZGl1cyA6IDEuMDtcblxuICAgIGlmICh0aGlzLnJhZGl1cyA8IDApIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignVGhlIHNwaGVyZSByYWRpdXMgY2Fubm90IGJlIG5lZ2F0aXZlLicpO1xuICAgIH1cblxuICAgIHRoaXMudXBkYXRlQm91bmRpbmdTcGhlcmVSYWRpdXMoKTtcbiAgfVxuICAvKiogY2FsY3VsYXRlTG9jYWxJbmVydGlhICovXG5cblxuICBjYWxjdWxhdGVMb2NhbEluZXJ0aWEobWFzcywgdGFyZ2V0ID0gbmV3IFZlYzMoKSkge1xuICAgIGNvbnN0IEkgPSAyLjAgKiBtYXNzICogdGhpcy5yYWRpdXMgKiB0aGlzLnJhZGl1cyAvIDUuMDtcbiAgICB0YXJnZXQueCA9IEk7XG4gICAgdGFyZ2V0LnkgPSBJO1xuICAgIHRhcmdldC56ID0gSTtcbiAgICByZXR1cm4gdGFyZ2V0O1xuICB9XG4gIC8qKiB2b2x1bWUgKi9cblxuXG4gIHZvbHVtZSgpIHtcbiAgICByZXR1cm4gNC4wICogTWF0aC5QSSAqIE1hdGgucG93KHRoaXMucmFkaXVzLCAzKSAvIDMuMDtcbiAgfVxuXG4gIHVwZGF0ZUJvdW5kaW5nU3BoZXJlUmFkaXVzKCkge1xuICAgIHRoaXMuYm91bmRpbmdTcGhlcmVSYWRpdXMgPSB0aGlzLnJhZGl1cztcbiAgfVxuXG4gIGNhbGN1bGF0ZVdvcmxkQUFCQihwb3MsIHF1YXQsIG1pbiwgbWF4KSB7XG4gICAgY29uc3QgciA9IHRoaXMucmFkaXVzO1xuICAgIGNvbnN0IGF4ZXMgPSBbJ3gnLCAneScsICd6J107XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGF4ZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGNvbnN0IGF4ID0gYXhlc1tpXTtcbiAgICAgIG1pbltheF0gPSBwb3NbYXhdIC0gcjtcbiAgICAgIG1heFtheF0gPSBwb3NbYXhdICsgcjtcbiAgICB9XG4gIH1cblxufVxuXG4vKipcbiAqIFNpbXBsZSB2ZWhpY2xlIGhlbHBlciBjbGFzcyB3aXRoIHNwaGVyaWNhbCByaWdpZCBib2R5IHdoZWVscy5cbiAqL1xuY2xhc3MgUmlnaWRWZWhpY2xlIHtcbiAgLyoqXG4gICAqIFRoZSBib2RpZXMgb2YgdGhlIHdoZWVscy5cbiAgICovXG5cbiAgLyoqXG4gICAqIFRoZSBjaGFzc2lzIGJvZHkuXG4gICAqL1xuXG4gIC8qKlxuICAgKiBUaGUgY29uc3RyYWludHMuXG4gICAqL1xuXG4gIC8qKlxuICAgKiBUaGUgd2hlZWwgYXhlcy5cbiAgICovXG5cbiAgLyoqXG4gICAqIFRoZSB3aGVlbCBmb3JjZXMuXG4gICAqL1xuICBjb25zdHJ1Y3RvcihvcHRpb25zID0ge30pIHtcbiAgICB0aGlzLndoZWVsQm9kaWVzID0gdm9pZCAwO1xuICAgIHRoaXMuY29vcmRpbmF0ZVN5c3RlbSA9IHZvaWQgMDtcbiAgICB0aGlzLmNoYXNzaXNCb2R5ID0gdm9pZCAwO1xuICAgIHRoaXMuY29uc3RyYWludHMgPSB2b2lkIDA7XG4gICAgdGhpcy53aGVlbEF4ZXMgPSB2b2lkIDA7XG4gICAgdGhpcy53aGVlbEZvcmNlcyA9IHZvaWQgMDtcbiAgICB0aGlzLndoZWVsQm9kaWVzID0gW107XG4gICAgdGhpcy5jb29yZGluYXRlU3lzdGVtID0gdHlwZW9mIG9wdGlvbnMuY29vcmRpbmF0ZVN5c3RlbSAhPT0gJ3VuZGVmaW5lZCcgPyBvcHRpb25zLmNvb3JkaW5hdGVTeXN0ZW0uY2xvbmUoKSA6IG5ldyBWZWMzKDEsIDIsIDMpO1xuXG4gICAgaWYgKG9wdGlvbnMuY2hhc3Npc0JvZHkpIHtcbiAgICAgIHRoaXMuY2hhc3Npc0JvZHkgPSBvcHRpb25zLmNoYXNzaXNCb2R5O1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBObyBjaGFzc2lzIGJvZHkgZ2l2ZW4uIENyZWF0ZSBpdCFcbiAgICAgIHRoaXMuY2hhc3Npc0JvZHkgPSBuZXcgQm9keSh7XG4gICAgICAgIG1hc3M6IDEsXG4gICAgICAgIHNoYXBlOiBuZXcgQm94KG5ldyBWZWMzKDUsIDAuNSwgMikpXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICB0aGlzLmNvbnN0cmFpbnRzID0gW107XG4gICAgdGhpcy53aGVlbEF4ZXMgPSBbXTtcbiAgICB0aGlzLndoZWVsRm9yY2VzID0gW107XG4gIH1cbiAgLyoqXG4gICAqIEFkZCBhIHdoZWVsXG4gICAqL1xuXG5cbiAgYWRkV2hlZWwob3B0aW9ucyA9IHt9KSB7XG4gICAgbGV0IHdoZWVsQm9keTtcblxuICAgIGlmIChvcHRpb25zLmJvZHkpIHtcbiAgICAgIHdoZWVsQm9keSA9IG9wdGlvbnMuYm9keTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gTm8gd2hlZWwgYm9keSBnaXZlbi4gQ3JlYXRlIGl0IVxuICAgICAgd2hlZWxCb2R5ID0gbmV3IEJvZHkoe1xuICAgICAgICBtYXNzOiAxLFxuICAgICAgICBzaGFwZTogbmV3IFNwaGVyZSgxLjIpXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICB0aGlzLndoZWVsQm9kaWVzLnB1c2god2hlZWxCb2R5KTtcbiAgICB0aGlzLndoZWVsRm9yY2VzLnB1c2goMCk7IC8vIFBvc2l0aW9uIGNvbnN0cmFpbiB3aGVlbHNcblxuICAgIGNvbnN0IHBvc2l0aW9uID0gdHlwZW9mIG9wdGlvbnMucG9zaXRpb24gIT09ICd1bmRlZmluZWQnID8gb3B0aW9ucy5wb3NpdGlvbi5jbG9uZSgpIDogbmV3IFZlYzMoKTsgLy8gU2V0IHBvc2l0aW9uIGxvY2FsbHkgdG8gdGhlIGNoYXNzaXNcblxuICAgIGNvbnN0IHdvcmxkUG9zaXRpb24gPSBuZXcgVmVjMygpO1xuICAgIHRoaXMuY2hhc3Npc0JvZHkucG9pbnRUb1dvcmxkRnJhbWUocG9zaXRpb24sIHdvcmxkUG9zaXRpb24pO1xuICAgIHdoZWVsQm9keS5wb3NpdGlvbi5zZXQod29ybGRQb3NpdGlvbi54LCB3b3JsZFBvc2l0aW9uLnksIHdvcmxkUG9zaXRpb24ueik7IC8vIENvbnN0cmFpbiB3aGVlbFxuXG4gICAgY29uc3QgYXhpcyA9IHR5cGVvZiBvcHRpb25zLmF4aXMgIT09ICd1bmRlZmluZWQnID8gb3B0aW9ucy5heGlzLmNsb25lKCkgOiBuZXcgVmVjMygwLCAwLCAxKTtcbiAgICB0aGlzLndoZWVsQXhlcy5wdXNoKGF4aXMpO1xuICAgIGNvbnN0IGhpbmdlQ29uc3RyYWludCA9IG5ldyBIaW5nZUNvbnN0cmFpbnQodGhpcy5jaGFzc2lzQm9keSwgd2hlZWxCb2R5LCB7XG4gICAgICBwaXZvdEE6IHBvc2l0aW9uLFxuICAgICAgYXhpc0E6IGF4aXMsXG4gICAgICBwaXZvdEI6IFZlYzMuWkVSTyxcbiAgICAgIGF4aXNCOiBheGlzLFxuICAgICAgY29sbGlkZUNvbm5lY3RlZDogZmFsc2VcbiAgICB9KTtcbiAgICB0aGlzLmNvbnN0cmFpbnRzLnB1c2goaGluZ2VDb25zdHJhaW50KTtcbiAgICByZXR1cm4gdGhpcy53aGVlbEJvZGllcy5sZW5ndGggLSAxO1xuICB9XG4gIC8qKlxuICAgKiBTZXQgdGhlIHN0ZWVyaW5nIHZhbHVlIG9mIGEgd2hlZWwuXG4gICAqIEB0b2RvIGNoZWNrIGNvb3JkaW5hdGVTeXN0ZW1cbiAgICovXG5cblxuICBzZXRTdGVlcmluZ1ZhbHVlKHZhbHVlLCB3aGVlbEluZGV4KSB7XG4gICAgLy8gU2V0IGFuZ2xlIG9mIHRoZSBoaW5nZSBheGlzXG4gICAgY29uc3QgYXhpcyA9IHRoaXMud2hlZWxBeGVzW3doZWVsSW5kZXhdO1xuICAgIGNvbnN0IGMgPSBNYXRoLmNvcyh2YWx1ZSk7XG4gICAgY29uc3QgcyA9IE1hdGguc2luKHZhbHVlKTtcbiAgICBjb25zdCB4ID0gYXhpcy54O1xuICAgIGNvbnN0IHogPSBheGlzLno7XG4gICAgdGhpcy5jb25zdHJhaW50c1t3aGVlbEluZGV4XS5heGlzQS5zZXQoLWMgKiB4ICsgcyAqIHosIDAsIHMgKiB4ICsgYyAqIHopO1xuICB9XG4gIC8qKlxuICAgKiBTZXQgdGhlIHRhcmdldCByb3RhdGlvbmFsIHNwZWVkIG9mIHRoZSBoaW5nZSBjb25zdHJhaW50LlxuICAgKi9cblxuXG4gIHNldE1vdG9yU3BlZWQodmFsdWUsIHdoZWVsSW5kZXgpIHtcbiAgICBjb25zdCBoaW5nZUNvbnN0cmFpbnQgPSB0aGlzLmNvbnN0cmFpbnRzW3doZWVsSW5kZXhdO1xuICAgIGhpbmdlQ29uc3RyYWludC5lbmFibGVNb3RvcigpO1xuICAgIGhpbmdlQ29uc3RyYWludC5tb3RvclRhcmdldFZlbG9jaXR5ID0gdmFsdWU7XG4gIH1cbiAgLyoqXG4gICAqIFNldCB0aGUgdGFyZ2V0IHJvdGF0aW9uYWwgc3BlZWQgb2YgdGhlIGhpbmdlIGNvbnN0cmFpbnQuXG4gICAqL1xuXG5cbiAgZGlzYWJsZU1vdG9yKHdoZWVsSW5kZXgpIHtcbiAgICBjb25zdCBoaW5nZUNvbnN0cmFpbnQgPSB0aGlzLmNvbnN0cmFpbnRzW3doZWVsSW5kZXhdO1xuICAgIGhpbmdlQ29uc3RyYWludC5kaXNhYmxlTW90b3IoKTtcbiAgfVxuICAvKipcbiAgICogU2V0IHRoZSB3aGVlbCBmb3JjZSB0byBhcHBseSBvbiBvbmUgb2YgdGhlIHdoZWVscyBlYWNoIHRpbWUgc3RlcFxuICAgKi9cblxuXG4gIHNldFdoZWVsRm9yY2UodmFsdWUsIHdoZWVsSW5kZXgpIHtcbiAgICB0aGlzLndoZWVsRm9yY2VzW3doZWVsSW5kZXhdID0gdmFsdWU7XG4gIH1cbiAgLyoqXG4gICAqIEFwcGx5IGEgdG9ycXVlIG9uIG9uZSBvZiB0aGUgd2hlZWxzLlxuICAgKi9cblxuXG4gIGFwcGx5V2hlZWxGb3JjZSh2YWx1ZSwgd2hlZWxJbmRleCkge1xuICAgIGNvbnN0IGF4aXMgPSB0aGlzLndoZWVsQXhlc1t3aGVlbEluZGV4XTtcbiAgICBjb25zdCB3aGVlbEJvZHkgPSB0aGlzLndoZWVsQm9kaWVzW3doZWVsSW5kZXhdO1xuICAgIGNvbnN0IGJvZHlUb3JxdWUgPSB3aGVlbEJvZHkudG9ycXVlO1xuICAgIGF4aXMuc2NhbGUodmFsdWUsIHRvcnF1ZSk7XG4gICAgd2hlZWxCb2R5LnZlY3RvclRvV29ybGRGcmFtZSh0b3JxdWUsIHRvcnF1ZSk7XG4gICAgYm9keVRvcnF1ZS52YWRkKHRvcnF1ZSwgYm9keVRvcnF1ZSk7XG4gIH1cbiAgLyoqXG4gICAqIEFkZCB0aGUgdmVoaWNsZSBpbmNsdWRpbmcgaXRzIGNvbnN0cmFpbnRzIHRvIHRoZSB3b3JsZC5cbiAgICovXG5cblxuICBhZGRUb1dvcmxkKHdvcmxkKSB7XG4gICAgY29uc3QgY29uc3RyYWludHMgPSB0aGlzLmNvbnN0cmFpbnRzO1xuICAgIGNvbnN0IGJvZGllcyA9IHRoaXMud2hlZWxCb2RpZXMuY29uY2F0KFt0aGlzLmNoYXNzaXNCb2R5XSk7XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGJvZGllcy5sZW5ndGg7IGkrKykge1xuICAgICAgd29ybGQuYWRkQm9keShib2RpZXNbaV0pO1xuICAgIH1cblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY29uc3RyYWludHMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHdvcmxkLmFkZENvbnN0cmFpbnQoY29uc3RyYWludHNbaV0pO1xuICAgIH1cblxuICAgIHdvcmxkLmFkZEV2ZW50TGlzdGVuZXIoJ3ByZVN0ZXAnLCB0aGlzLl91cGRhdGUuYmluZCh0aGlzKSk7XG4gIH1cblxuICBfdXBkYXRlKCkge1xuICAgIGNvbnN0IHdoZWVsRm9yY2VzID0gdGhpcy53aGVlbEZvcmNlcztcblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgd2hlZWxGb3JjZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHRoaXMuYXBwbHlXaGVlbEZvcmNlKHdoZWVsRm9yY2VzW2ldLCBpKTtcbiAgICB9XG4gIH1cbiAgLyoqXG4gICAqIFJlbW92ZSB0aGUgdmVoaWNsZSBpbmNsdWRpbmcgaXRzIGNvbnN0cmFpbnRzIGZyb20gdGhlIHdvcmxkLlxuICAgKi9cblxuXG4gIHJlbW92ZUZyb21Xb3JsZCh3b3JsZCkge1xuICAgIGNvbnN0IGNvbnN0cmFpbnRzID0gdGhpcy5jb25zdHJhaW50cztcbiAgICBjb25zdCBib2RpZXMgPSB0aGlzLndoZWVsQm9kaWVzLmNvbmNhdChbdGhpcy5jaGFzc2lzQm9keV0pO1xuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBib2RpZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHdvcmxkLnJlbW92ZUJvZHkoYm9kaWVzW2ldKTtcbiAgICB9XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNvbnN0cmFpbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICB3b3JsZC5yZW1vdmVDb25zdHJhaW50KGNvbnN0cmFpbnRzW2ldKTtcbiAgICB9XG4gIH1cbiAgLyoqXG4gICAqIEdldCBjdXJyZW50IHJvdGF0aW9uYWwgdmVsb2NpdHkgb2YgYSB3aGVlbFxuICAgKi9cblxuXG4gIGdldFdoZWVsU3BlZWQod2hlZWxJbmRleCkge1xuICAgIGNvbnN0IGF4aXMgPSB0aGlzLndoZWVsQXhlc1t3aGVlbEluZGV4XTtcbiAgICBjb25zdCB3aGVlbEJvZHkgPSB0aGlzLndoZWVsQm9kaWVzW3doZWVsSW5kZXhdO1xuICAgIGNvbnN0IHcgPSB3aGVlbEJvZHkuYW5ndWxhclZlbG9jaXR5O1xuICAgIHRoaXMuY2hhc3Npc0JvZHkudmVjdG9yVG9Xb3JsZEZyYW1lKGF4aXMsIHdvcmxkQXhpcyk7XG4gICAgcmV0dXJuIHcuZG90KHdvcmxkQXhpcyk7XG4gIH1cblxufVxuY29uc3QgdG9ycXVlID0gbmV3IFZlYzMoKTtcbmNvbnN0IHdvcmxkQXhpcyA9IG5ldyBWZWMzKCk7XG5cbi8qKlxuICogU21vb3RoZWQtcGFydGljbGUgaHlkcm9keW5hbWljcyBzeXN0ZW1cbiAqIEB0b2RvIE1ha2UgcGFyYW1ldGVycyBjdXN0b21pemFibGUgaW4gdGhlIGNvbnN0cnVjdG9yXG4gKi9cbmNsYXNzIFNQSFN5c3RlbSB7XG4gIC8qKlxuICAgKiBUaGUgcGFydGljbGVzIGFycmF5LlxuICAgKi9cblxuICAvKipcbiAgICogRGVuc2l0eSBvZiB0aGUgc3lzdGVtIChrZy9tMykuXG4gICAqIEBkZWZhdWx0IDFcbiAgICovXG5cbiAgLyoqXG4gICAqIERpc3RhbmNlIGJlbG93IHdoaWNoIHR3byBwYXJ0aWNsZXMgYXJlIGNvbnNpZGVyZWQgdG8gYmUgbmVpZ2hib3JzLlxuICAgKiBJdCBzaG91bGQgYmUgYWRqdXN0ZWQgc28gdGhlcmUgYXJlIGFib3V0IDE1LTIwIG5laWdoYm9yIHBhcnRpY2xlcyB3aXRoaW4gdGhpcyByYWRpdXMuXG4gICAqIEBkZWZhdWx0IDFcbiAgICovXG5cbiAgLyoqXG4gICAqIEBkZWZhdWx0IDFcbiAgICovXG5cbiAgLyoqXG4gICAqIFZpc2Nvc2l0eSBvZiB0aGUgc3lzdGVtLlxuICAgKiBAZGVmYXVsdCAwLjAxXG4gICAqL1xuXG4gIC8qKlxuICAgKiBAZGVmYXVsdCAwLjAwMDAwMVxuICAgKi9cbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy5wYXJ0aWNsZXMgPSB2b2lkIDA7XG4gICAgdGhpcy5kZW5zaXR5ID0gdm9pZCAwO1xuICAgIHRoaXMuc21vb3RoaW5nUmFkaXVzID0gdm9pZCAwO1xuICAgIHRoaXMuc3BlZWRPZlNvdW5kID0gdm9pZCAwO1xuICAgIHRoaXMudmlzY29zaXR5ID0gdm9pZCAwO1xuICAgIHRoaXMuZXBzID0gdm9pZCAwO1xuICAgIHRoaXMucHJlc3N1cmVzID0gdm9pZCAwO1xuICAgIHRoaXMuZGVuc2l0aWVzID0gdm9pZCAwO1xuICAgIHRoaXMubmVpZ2hib3JzID0gdm9pZCAwO1xuICAgIHRoaXMucGFydGljbGVzID0gW107XG4gICAgdGhpcy5kZW5zaXR5ID0gMTtcbiAgICB0aGlzLnNtb290aGluZ1JhZGl1cyA9IDE7XG4gICAgdGhpcy5zcGVlZE9mU291bmQgPSAxO1xuICAgIHRoaXMudmlzY29zaXR5ID0gMC4wMTtcbiAgICB0aGlzLmVwcyA9IDAuMDAwMDAxOyAvLyBTdHVmZiBDb21wdXRlZCBwZXIgcGFydGljbGVcblxuICAgIHRoaXMucHJlc3N1cmVzID0gW107XG4gICAgdGhpcy5kZW5zaXRpZXMgPSBbXTtcbiAgICB0aGlzLm5laWdoYm9ycyA9IFtdO1xuICB9XG4gIC8qKlxuICAgKiBBZGQgYSBwYXJ0aWNsZSB0byB0aGUgc3lzdGVtLlxuICAgKi9cblxuXG4gIGFkZChwYXJ0aWNsZSkge1xuICAgIHRoaXMucGFydGljbGVzLnB1c2gocGFydGljbGUpO1xuXG4gICAgaWYgKHRoaXMubmVpZ2hib3JzLmxlbmd0aCA8IHRoaXMucGFydGljbGVzLmxlbmd0aCkge1xuICAgICAgdGhpcy5uZWlnaGJvcnMucHVzaChbXSk7XG4gICAgfVxuICB9XG4gIC8qKlxuICAgKiBSZW1vdmUgYSBwYXJ0aWNsZSBmcm9tIHRoZSBzeXN0ZW0uXG4gICAqL1xuXG5cbiAgcmVtb3ZlKHBhcnRpY2xlKSB7XG4gICAgY29uc3QgaWR4ID0gdGhpcy5wYXJ0aWNsZXMuaW5kZXhPZihwYXJ0aWNsZSk7XG5cbiAgICBpZiAoaWR4ICE9PSAtMSkge1xuICAgICAgdGhpcy5wYXJ0aWNsZXMuc3BsaWNlKGlkeCwgMSk7XG5cbiAgICAgIGlmICh0aGlzLm5laWdoYm9ycy5sZW5ndGggPiB0aGlzLnBhcnRpY2xlcy5sZW5ndGgpIHtcbiAgICAgICAgdGhpcy5uZWlnaGJvcnMucG9wKCk7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIC8qKlxuICAgKiBHZXQgbmVpZ2hib3JzIHdpdGhpbiBzbW9vdGhpbmcgdm9sdW1lLCBzYXZlIGluIHRoZSBhcnJheSBuZWlnaGJvcnNcbiAgICovXG5cblxuICBnZXROZWlnaGJvcnMocGFydGljbGUsIG5laWdoYm9ycykge1xuICAgIGNvbnN0IE4gPSB0aGlzLnBhcnRpY2xlcy5sZW5ndGg7XG4gICAgY29uc3QgaWQgPSBwYXJ0aWNsZS5pZDtcbiAgICBjb25zdCBSMiA9IHRoaXMuc21vb3RoaW5nUmFkaXVzICogdGhpcy5zbW9vdGhpbmdSYWRpdXM7XG4gICAgY29uc3QgZGlzdCA9IFNQSFN5c3RlbV9nZXROZWlnaGJvcnNfZGlzdDtcblxuICAgIGZvciAobGV0IGkgPSAwOyBpICE9PSBOOyBpKyspIHtcbiAgICAgIGNvbnN0IHAgPSB0aGlzLnBhcnRpY2xlc1tpXTtcbiAgICAgIHAucG9zaXRpb24udnN1YihwYXJ0aWNsZS5wb3NpdGlvbiwgZGlzdCk7XG5cbiAgICAgIGlmIChpZCAhPT0gcC5pZCAmJiBkaXN0Lmxlbmd0aFNxdWFyZWQoKSA8IFIyKSB7XG4gICAgICAgIG5laWdoYm9ycy5wdXNoKHApO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHVwZGF0ZSgpIHtcbiAgICBjb25zdCBOID0gdGhpcy5wYXJ0aWNsZXMubGVuZ3RoO1xuICAgIGNvbnN0IGRpc3QgPSBTUEhTeXN0ZW1fdXBkYXRlX2Rpc3Q7XG4gICAgY29uc3QgY3MgPSB0aGlzLnNwZWVkT2ZTb3VuZDtcbiAgICBjb25zdCBlcHMgPSB0aGlzLmVwcztcblxuICAgIGZvciAobGV0IGkgPSAwOyBpICE9PSBOOyBpKyspIHtcbiAgICAgIGNvbnN0IHAgPSB0aGlzLnBhcnRpY2xlc1tpXTsgLy8gQ3VycmVudCBwYXJ0aWNsZVxuXG4gICAgICBjb25zdCBuZWlnaGJvcnMgPSB0aGlzLm5laWdoYm9yc1tpXTsgLy8gR2V0IG5laWdoYm9yc1xuXG4gICAgICBuZWlnaGJvcnMubGVuZ3RoID0gMDtcbiAgICAgIHRoaXMuZ2V0TmVpZ2hib3JzKHAsIG5laWdoYm9ycyk7XG4gICAgICBuZWlnaGJvcnMucHVzaCh0aGlzLnBhcnRpY2xlc1tpXSk7IC8vIEFkZCBjdXJyZW50IHRvb1xuXG4gICAgICBjb25zdCBudW1OZWlnaGJvcnMgPSBuZWlnaGJvcnMubGVuZ3RoOyAvLyBBY2N1bXVsYXRlIGRlbnNpdHkgZm9yIHRoZSBwYXJ0aWNsZVxuXG4gICAgICBsZXQgc3VtID0gMC4wO1xuXG4gICAgICBmb3IgKGxldCBqID0gMDsgaiAhPT0gbnVtTmVpZ2hib3JzOyBqKyspIHtcbiAgICAgICAgLy9wcmludGYoXCJDdXJyZW50IHBhcnRpY2xlIGhhcyBwb3NpdGlvbiAlZiAlZiAlZlxcblwiLG9iamVjdHNbaWRdLnBvcy54KCksb2JqZWN0c1tpZF0ucG9zLnkoKSxvYmplY3RzW2lkXS5wb3MueigpKTtcbiAgICAgICAgcC5wb3NpdGlvbi52c3ViKG5laWdoYm9yc1tqXS5wb3NpdGlvbiwgZGlzdCk7XG4gICAgICAgIGNvbnN0IGxlbiA9IGRpc3QubGVuZ3RoKCk7XG4gICAgICAgIGNvbnN0IHdlaWdodCA9IHRoaXMudyhsZW4pO1xuICAgICAgICBzdW0gKz0gbmVpZ2hib3JzW2pdLm1hc3MgKiB3ZWlnaHQ7XG4gICAgICB9IC8vIFNhdmVcblxuXG4gICAgICB0aGlzLmRlbnNpdGllc1tpXSA9IHN1bTtcbiAgICAgIHRoaXMucHJlc3N1cmVzW2ldID0gY3MgKiBjcyAqICh0aGlzLmRlbnNpdGllc1tpXSAtIHRoaXMuZGVuc2l0eSk7XG4gICAgfSAvLyBBZGQgZm9yY2VzXG4gICAgLy8gU3VtIHRvIHRoZXNlIGFjY2VsZXJhdGlvbnNcblxuXG4gICAgY29uc3QgYV9wcmVzc3VyZSA9IFNQSFN5c3RlbV91cGRhdGVfYV9wcmVzc3VyZTtcbiAgICBjb25zdCBhX3Zpc2MgPSBTUEhTeXN0ZW1fdXBkYXRlX2FfdmlzYztcbiAgICBjb25zdCBncmFkVyA9IFNQSFN5c3RlbV91cGRhdGVfZ3JhZFc7XG4gICAgY29uc3Qgcl92ZWMgPSBTUEhTeXN0ZW1fdXBkYXRlX3JfdmVjO1xuICAgIGNvbnN0IHUgPSBTUEhTeXN0ZW1fdXBkYXRlX3U7XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSAhPT0gTjsgaSsrKSB7XG4gICAgICBjb25zdCBwYXJ0aWNsZSA9IHRoaXMucGFydGljbGVzW2ldO1xuICAgICAgYV9wcmVzc3VyZS5zZXQoMCwgMCwgMCk7XG4gICAgICBhX3Zpc2Muc2V0KDAsIDAsIDApOyAvLyBJbml0IHZhcnNcblxuICAgICAgbGV0IFBpajtcbiAgICAgIGxldCBuYWJsYTtcblxuICAgICAgY29uc3QgbmVpZ2hib3JzID0gdGhpcy5uZWlnaGJvcnNbaV07XG4gICAgICBjb25zdCBudW1OZWlnaGJvcnMgPSBuZWlnaGJvcnMubGVuZ3RoOyAvL3ByaW50ZihcIk5laWdoYm9yczogXCIpO1xuXG4gICAgICBmb3IgKGxldCBqID0gMDsgaiAhPT0gbnVtTmVpZ2hib3JzOyBqKyspIHtcbiAgICAgICAgY29uc3QgbmVpZ2hib3IgPSBuZWlnaGJvcnNbal07IC8vcHJpbnRmKFwiJWQgXCIsbmopO1xuICAgICAgICAvLyBHZXQgciBvbmNlIGZvciBhbGwuLlxuXG4gICAgICAgIHBhcnRpY2xlLnBvc2l0aW9uLnZzdWIobmVpZ2hib3IucG9zaXRpb24sIHJfdmVjKTtcbiAgICAgICAgY29uc3QgciA9IHJfdmVjLmxlbmd0aCgpOyAvLyBQcmVzc3VyZSBjb250cmlidXRpb25cblxuICAgICAgICBQaWogPSAtbmVpZ2hib3IubWFzcyAqICh0aGlzLnByZXNzdXJlc1tpXSAvICh0aGlzLmRlbnNpdGllc1tpXSAqIHRoaXMuZGVuc2l0aWVzW2ldICsgZXBzKSArIHRoaXMucHJlc3N1cmVzW2pdIC8gKHRoaXMuZGVuc2l0aWVzW2pdICogdGhpcy5kZW5zaXRpZXNbal0gKyBlcHMpKTtcbiAgICAgICAgdGhpcy5ncmFkdyhyX3ZlYywgZ3JhZFcpOyAvLyBBZGQgdG8gcHJlc3N1cmUgYWNjZWxlcmF0aW9uXG5cbiAgICAgICAgZ3JhZFcuc2NhbGUoUGlqLCBncmFkVyk7XG4gICAgICAgIGFfcHJlc3N1cmUudmFkZChncmFkVywgYV9wcmVzc3VyZSk7IC8vIFZpc2Nvc2l0eSBjb250cmlidXRpb25cblxuICAgICAgICBuZWlnaGJvci52ZWxvY2l0eS52c3ViKHBhcnRpY2xlLnZlbG9jaXR5LCB1KTtcbiAgICAgICAgdS5zY2FsZSgxLjAgLyAoMC4wMDAxICsgdGhpcy5kZW5zaXRpZXNbaV0gKiB0aGlzLmRlbnNpdGllc1tqXSkgKiB0aGlzLnZpc2Nvc2l0eSAqIG5laWdoYm9yLm1hc3MsIHUpO1xuICAgICAgICBuYWJsYSA9IHRoaXMubmFibGF3KHIpO1xuICAgICAgICB1LnNjYWxlKG5hYmxhLCB1KTsgLy8gQWRkIHRvIHZpc2Nvc2l0eSBhY2NlbGVyYXRpb25cblxuICAgICAgICBhX3Zpc2MudmFkZCh1LCBhX3Zpc2MpO1xuICAgICAgfSAvLyBDYWxjdWxhdGUgZm9yY2VcblxuXG4gICAgICBhX3Zpc2Muc2NhbGUocGFydGljbGUubWFzcywgYV92aXNjKTtcbiAgICAgIGFfcHJlc3N1cmUuc2NhbGUocGFydGljbGUubWFzcywgYV9wcmVzc3VyZSk7IC8vIEFkZCBmb3JjZSB0byBwYXJ0aWNsZXNcblxuICAgICAgcGFydGljbGUuZm9yY2UudmFkZChhX3Zpc2MsIHBhcnRpY2xlLmZvcmNlKTtcbiAgICAgIHBhcnRpY2xlLmZvcmNlLnZhZGQoYV9wcmVzc3VyZSwgcGFydGljbGUuZm9yY2UpO1xuICAgIH1cbiAgfSAvLyBDYWxjdWxhdGUgdGhlIHdlaWdodCB1c2luZyB0aGUgVyhyKSB3ZWlnaHRmdW5jdGlvblxuXG5cbiAgdyhyKSB7XG4gICAgLy8gMzE1XG4gICAgY29uc3QgaCA9IHRoaXMuc21vb3RoaW5nUmFkaXVzO1xuICAgIHJldHVybiAzMTUuMCAvICg2NC4wICogTWF0aC5QSSAqIGggKiogOSkgKiAoaCAqIGggLSByICogcikgKiogMztcbiAgfSAvLyBjYWxjdWxhdGUgZ3JhZGllbnQgb2YgdGhlIHdlaWdodCBmdW5jdGlvblxuXG5cbiAgZ3JhZHcoclZlYywgcmVzdWx0VmVjKSB7XG4gICAgY29uc3QgciA9IHJWZWMubGVuZ3RoKCk7XG4gICAgY29uc3QgaCA9IHRoaXMuc21vb3RoaW5nUmFkaXVzO1xuICAgIHJWZWMuc2NhbGUoOTQ1LjAgLyAoMzIuMCAqIE1hdGguUEkgKiBoICoqIDkpICogKGggKiBoIC0gciAqIHIpICoqIDIsIHJlc3VsdFZlYyk7XG4gIH0gLy8gQ2FsY3VsYXRlIG5hYmxhKFcpXG5cblxuICBuYWJsYXcocikge1xuICAgIGNvbnN0IGggPSB0aGlzLnNtb290aGluZ1JhZGl1cztcbiAgICBjb25zdCBuYWJsYSA9IDk0NS4wIC8gKDMyLjAgKiBNYXRoLlBJICogaCAqKiA5KSAqIChoICogaCAtIHIgKiByKSAqICg3ICogciAqIHIgLSAzICogaCAqIGgpO1xuICAgIHJldHVybiBuYWJsYTtcbiAgfVxuXG59XG5jb25zdCBTUEhTeXN0ZW1fZ2V0TmVpZ2hib3JzX2Rpc3QgPSBuZXcgVmVjMygpOyAvLyBUZW1wIHZlY3RvcnMgZm9yIGNhbGN1bGF0aW9uXG5cbmNvbnN0IFNQSFN5c3RlbV91cGRhdGVfZGlzdCA9IG5ldyBWZWMzKCk7IC8vIFJlbGF0aXZlIHZlbG9jaXR5XG5cbmNvbnN0IFNQSFN5c3RlbV91cGRhdGVfYV9wcmVzc3VyZSA9IG5ldyBWZWMzKCk7XG5jb25zdCBTUEhTeXN0ZW1fdXBkYXRlX2FfdmlzYyA9IG5ldyBWZWMzKCk7XG5jb25zdCBTUEhTeXN0ZW1fdXBkYXRlX2dyYWRXID0gbmV3IFZlYzMoKTtcbmNvbnN0IFNQSFN5c3RlbV91cGRhdGVfcl92ZWMgPSBuZXcgVmVjMygpO1xuY29uc3QgU1BIU3lzdGVtX3VwZGF0ZV91ID0gbmV3IFZlYzMoKTtcblxuLyoqXG4gKiBDeWxpbmRlciBjbGFzcy5cbiAqIEBleGFtcGxlXG4gKiAgICAgY29uc3QgcmFkaXVzVG9wID0gMC41XG4gKiAgICAgY29uc3QgcmFkaXVzQm90dG9tID0gMC41XG4gKiAgICAgY29uc3QgaGVpZ2h0ID0gMlxuICogICAgIGNvbnN0IG51bVNlZ21lbnRzID0gMTJcbiAqICAgICBjb25zdCBjeWxpbmRlclNoYXBlID0gbmV3IENBTk5PTi5DeWxpbmRlcihyYWRpdXNUb3AsIHJhZGl1c0JvdHRvbSwgaGVpZ2h0LCBudW1TZWdtZW50cylcbiAqICAgICBjb25zdCBjeWxpbmRlckJvZHkgPSBuZXcgQ0FOTk9OLkJvZHkoeyBtYXNzOiAxLCBzaGFwZTogY3lsaW5kZXJTaGFwZSB9KVxuICogICAgIHdvcmxkLmFkZEJvZHkoY3lsaW5kZXJCb2R5KVxuICovXG5cbmNsYXNzIEN5bGluZGVyIGV4dGVuZHMgQ29udmV4UG9seWhlZHJvbiB7XG4gIC8qKiBUaGUgcmFkaXVzIG9mIHRoZSB0b3Agb2YgdGhlIEN5bGluZGVyLiAqL1xuXG4gIC8qKiBUaGUgcmFkaXVzIG9mIHRoZSBib3R0b20gb2YgdGhlIEN5bGluZGVyLiAqL1xuXG4gIC8qKiBUaGUgaGVpZ2h0IG9mIHRoZSBDeWxpbmRlci4gKi9cblxuICAvKiogVGhlIG51bWJlciBvZiBzZWdtZW50cyB0byBidWlsZCB0aGUgY3lsaW5kZXIgb3V0IG9mLiAqL1xuXG4gIC8qKlxuICAgKiBAcGFyYW0gcmFkaXVzVG9wIFRoZSByYWRpdXMgb2YgdGhlIHRvcCBvZiB0aGUgQ3lsaW5kZXIuXG4gICAqIEBwYXJhbSByYWRpdXNCb3R0b20gVGhlIHJhZGl1cyBvZiB0aGUgYm90dG9tIG9mIHRoZSBDeWxpbmRlci5cbiAgICogQHBhcmFtIGhlaWdodCBUaGUgaGVpZ2h0IG9mIHRoZSBDeWxpbmRlci5cbiAgICogQHBhcmFtIG51bVNlZ21lbnRzIFRoZSBudW1iZXIgb2Ygc2VnbWVudHMgdG8gYnVpbGQgdGhlIGN5bGluZGVyIG91dCBvZi5cbiAgICovXG4gIGNvbnN0cnVjdG9yKHJhZGl1c1RvcCA9IDEsIHJhZGl1c0JvdHRvbSA9IDEsIGhlaWdodCA9IDEsIG51bVNlZ21lbnRzID0gOCkge1xuICAgIGlmIChyYWRpdXNUb3AgPCAwKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ1RoZSBjeWxpbmRlciByYWRpdXNUb3AgY2Fubm90IGJlIG5lZ2F0aXZlLicpO1xuICAgIH1cblxuICAgIGlmIChyYWRpdXNCb3R0b20gPCAwKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ1RoZSBjeWxpbmRlciByYWRpdXNCb3R0b20gY2Fubm90IGJlIG5lZ2F0aXZlLicpO1xuICAgIH1cblxuICAgIGNvbnN0IE4gPSBudW1TZWdtZW50cztcbiAgICBjb25zdCB2ZXJ0aWNlcyA9IFtdO1xuICAgIGNvbnN0IGF4ZXMgPSBbXTtcbiAgICBjb25zdCBmYWNlcyA9IFtdO1xuICAgIGNvbnN0IGJvdHRvbWZhY2UgPSBbXTtcbiAgICBjb25zdCB0b3BmYWNlID0gW107XG4gICAgY29uc3QgY29zID0gTWF0aC5jb3M7XG4gICAgY29uc3Qgc2luID0gTWF0aC5zaW47IC8vIEZpcnN0IGJvdHRvbSBwb2ludFxuXG4gICAgdmVydGljZXMucHVzaChuZXcgVmVjMygtcmFkaXVzQm90dG9tICogc2luKDApLCAtaGVpZ2h0ICogMC41LCByYWRpdXNCb3R0b20gKiBjb3MoMCkpKTtcbiAgICBib3R0b21mYWNlLnB1c2goMCk7IC8vIEZpcnN0IHRvcCBwb2ludFxuXG4gICAgdmVydGljZXMucHVzaChuZXcgVmVjMygtcmFkaXVzVG9wICogc2luKDApLCBoZWlnaHQgKiAwLjUsIHJhZGl1c1RvcCAqIGNvcygwKSkpO1xuICAgIHRvcGZhY2UucHVzaCgxKTtcblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgTjsgaSsrKSB7XG4gICAgICBjb25zdCB0aGV0YSA9IDIgKiBNYXRoLlBJIC8gTiAqIChpICsgMSk7XG4gICAgICBjb25zdCB0aGV0YU4gPSAyICogTWF0aC5QSSAvIE4gKiAoaSArIDAuNSk7XG5cbiAgICAgIGlmIChpIDwgTiAtIDEpIHtcbiAgICAgICAgLy8gQm90dG9tXG4gICAgICAgIHZlcnRpY2VzLnB1c2gobmV3IFZlYzMoLXJhZGl1c0JvdHRvbSAqIHNpbih0aGV0YSksIC1oZWlnaHQgKiAwLjUsIHJhZGl1c0JvdHRvbSAqIGNvcyh0aGV0YSkpKTtcbiAgICAgICAgYm90dG9tZmFjZS5wdXNoKDIgKiBpICsgMik7IC8vIFRvcFxuXG4gICAgICAgIHZlcnRpY2VzLnB1c2gobmV3IFZlYzMoLXJhZGl1c1RvcCAqIHNpbih0aGV0YSksIGhlaWdodCAqIDAuNSwgcmFkaXVzVG9wICogY29zKHRoZXRhKSkpO1xuICAgICAgICB0b3BmYWNlLnB1c2goMiAqIGkgKyAzKTsgLy8gRmFjZVxuXG4gICAgICAgIGZhY2VzLnB1c2goWzIgKiBpLCAyICogaSArIDEsIDIgKiBpICsgMywgMiAqIGkgKyAyXSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBmYWNlcy5wdXNoKFsyICogaSwgMiAqIGkgKyAxLCAxLCAwXSk7IC8vIENvbm5lY3RcbiAgICAgIH0gLy8gQXhpczogd2UgY2FuIGN1dCBvZmYgaGFsZiBvZiB0aGVtIGlmIHdlIGhhdmUgZXZlbiBudW1iZXIgb2Ygc2VnbWVudHNcblxuXG4gICAgICBpZiAoTiAlIDIgPT09IDEgfHwgaSA8IE4gLyAyKSB7XG4gICAgICAgIGF4ZXMucHVzaChuZXcgVmVjMygtc2luKHRoZXRhTiksIDAsIGNvcyh0aGV0YU4pKSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgZmFjZXMucHVzaChib3R0b21mYWNlKTtcbiAgICBheGVzLnB1c2gobmV3IFZlYzMoMCwgMSwgMCkpOyAvLyBSZW9yZGVyIHRvcCBmYWNlXG5cbiAgICBjb25zdCB0ZW1wID0gW107XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRvcGZhY2UubGVuZ3RoOyBpKyspIHtcbiAgICAgIHRlbXAucHVzaCh0b3BmYWNlW3RvcGZhY2UubGVuZ3RoIC0gaSAtIDFdKTtcbiAgICB9XG5cbiAgICBmYWNlcy5wdXNoKHRlbXApO1xuICAgIHN1cGVyKHtcbiAgICAgIHZlcnRpY2VzLFxuICAgICAgZmFjZXMsXG4gICAgICBheGVzXG4gICAgfSk7XG4gICAgdGhpcy5yYWRpdXNUb3AgPSB2b2lkIDA7XG4gICAgdGhpcy5yYWRpdXNCb3R0b20gPSB2b2lkIDA7XG4gICAgdGhpcy5oZWlnaHQgPSB2b2lkIDA7XG4gICAgdGhpcy5udW1TZWdtZW50cyA9IHZvaWQgMDtcbiAgICB0aGlzLnR5cGUgPSBTaGFwZS50eXBlcy5DWUxJTkRFUjtcbiAgICB0aGlzLnJhZGl1c1RvcCA9IHJhZGl1c1RvcDtcbiAgICB0aGlzLnJhZGl1c0JvdHRvbSA9IHJhZGl1c0JvdHRvbTtcbiAgICB0aGlzLmhlaWdodCA9IGhlaWdodDtcbiAgICB0aGlzLm51bVNlZ21lbnRzID0gbnVtU2VnbWVudHM7XG4gIH1cblxufVxuXG4vKipcbiAqIFBhcnRpY2xlIHNoYXBlLlxuICogQGV4YW1wbGVcbiAqICAgICBjb25zdCBwYXJ0aWNsZVNoYXBlID0gbmV3IENBTk5PTi5QYXJ0aWNsZSgpXG4gKiAgICAgY29uc3QgcGFydGljbGVCb2R5ID0gbmV3IENBTk5PTi5Cb2R5KHsgbWFzczogMSwgc2hhcGU6IHBhcnRpY2xlU2hhcGUgfSlcbiAqICAgICB3b3JsZC5hZGRCb2R5KHBhcnRpY2xlQm9keSlcbiAqL1xuY2xhc3MgUGFydGljbGUgZXh0ZW5kcyBTaGFwZSB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHN1cGVyKHtcbiAgICAgIHR5cGU6IFNoYXBlLnR5cGVzLlBBUlRJQ0xFXG4gICAgfSk7XG4gIH1cbiAgLyoqXG4gICAqIGNhbGN1bGF0ZUxvY2FsSW5lcnRpYVxuICAgKi9cblxuXG4gIGNhbGN1bGF0ZUxvY2FsSW5lcnRpYShtYXNzLCB0YXJnZXQgPSBuZXcgVmVjMygpKSB7XG4gICAgdGFyZ2V0LnNldCgwLCAwLCAwKTtcbiAgICByZXR1cm4gdGFyZ2V0O1xuICB9XG5cbiAgdm9sdW1lKCkge1xuICAgIHJldHVybiAwO1xuICB9XG5cbiAgdXBkYXRlQm91bmRpbmdTcGhlcmVSYWRpdXMoKSB7XG4gICAgdGhpcy5ib3VuZGluZ1NwaGVyZVJhZGl1cyA9IDA7XG4gIH1cblxuICBjYWxjdWxhdGVXb3JsZEFBQkIocG9zLCBxdWF0LCBtaW4sIG1heCkge1xuICAgIC8vIEdldCBlYWNoIGF4aXMgbWF4XG4gICAgbWluLmNvcHkocG9zKTtcbiAgICBtYXguY29weShwb3MpO1xuICB9XG5cbn1cblxuLyoqXG4gKiBBIHBsYW5lLCBmYWNpbmcgaW4gdGhlIFogZGlyZWN0aW9uLiBUaGUgcGxhbmUgaGFzIGl0cyBzdXJmYWNlIGF0IHo9MCBhbmQgZXZlcnl0aGluZyBiZWxvdyB6PTAgaXMgYXNzdW1lZCB0byBiZSBzb2xpZCBwbGFuZS4gVG8gbWFrZSB0aGUgcGxhbmUgZmFjZSBpbiBzb21lIG90aGVyIGRpcmVjdGlvbiB0aGFuIHosIHlvdSBtdXN0IHB1dCBpdCBpbnNpZGUgYSBCb2R5IGFuZCByb3RhdGUgdGhhdCBib2R5LiBTZWUgdGhlIGRlbW9zLlxuICogQGV4YW1wbGVcbiAqICAgICBjb25zdCBwbGFuZVNoYXBlID0gbmV3IENBTk5PTi5QbGFuZSgpXG4gKiAgICAgY29uc3QgcGxhbmVCb2R5ID0gbmV3IENBTk5PTi5Cb2R5KHsgbWFzczogMCwgc2hhcGU6ICBwbGFuZVNoYXBlIH0pXG4gKiAgICAgcGxhbmVCb2R5LnF1YXRlcm5pb24uc2V0RnJvbUV1bGVyKC1NYXRoLlBJIC8gMiwgMCwgMCkgLy8gbWFrZSBpdCBmYWNlIHVwXG4gKiAgICAgd29ybGQuYWRkQm9keShwbGFuZUJvZHkpXG4gKi9cbmNsYXNzIFBsYW5lIGV4dGVuZHMgU2hhcGUge1xuICAvKiogd29ybGROb3JtYWwgKi9cblxuICAvKiogd29ybGROb3JtYWxOZWVkc1VwZGF0ZSAqL1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICBzdXBlcih7XG4gICAgICB0eXBlOiBTaGFwZS50eXBlcy5QTEFORVxuICAgIH0pOyAvLyBXb3JsZCBvcmllbnRlZCBub3JtYWxcblxuICAgIHRoaXMud29ybGROb3JtYWwgPSB2b2lkIDA7XG4gICAgdGhpcy53b3JsZE5vcm1hbE5lZWRzVXBkYXRlID0gdm9pZCAwO1xuICAgIHRoaXMuYm91bmRpbmdTcGhlcmVSYWRpdXMgPSB2b2lkIDA7XG4gICAgdGhpcy53b3JsZE5vcm1hbCA9IG5ldyBWZWMzKCk7XG4gICAgdGhpcy53b3JsZE5vcm1hbE5lZWRzVXBkYXRlID0gdHJ1ZTtcbiAgICB0aGlzLmJvdW5kaW5nU3BoZXJlUmFkaXVzID0gTnVtYmVyLk1BWF9WQUxVRTtcbiAgfVxuICAvKiogY29tcHV0ZVdvcmxkTm9ybWFsICovXG5cblxuICBjb21wdXRlV29ybGROb3JtYWwocXVhdCkge1xuICAgIGNvbnN0IG4gPSB0aGlzLndvcmxkTm9ybWFsO1xuICAgIG4uc2V0KDAsIDAsIDEpO1xuICAgIHF1YXQudm11bHQobiwgbik7XG4gICAgdGhpcy53b3JsZE5vcm1hbE5lZWRzVXBkYXRlID0gZmFsc2U7XG4gIH1cblxuICBjYWxjdWxhdGVMb2NhbEluZXJ0aWEobWFzcywgdGFyZ2V0ID0gbmV3IFZlYzMoKSkge1xuICAgIHJldHVybiB0YXJnZXQ7XG4gIH1cblxuICB2b2x1bWUoKSB7XG4gICAgcmV0dXJuICgvLyBUaGUgcGxhbmUgaXMgaW5maW5pdGUuLi5cbiAgICAgIE51bWJlci5NQVhfVkFMVUVcbiAgICApO1xuICB9XG5cbiAgY2FsY3VsYXRlV29ybGRBQUJCKHBvcywgcXVhdCwgbWluLCBtYXgpIHtcbiAgICAvLyBUaGUgcGxhbmUgQUFCQiBpcyBpbmZpbml0ZSwgZXhjZXB0IGlmIHRoZSBub3JtYWwgaXMgcG9pbnRpbmcgYWxvbmcgYW55IGF4aXNcbiAgICB0ZW1wTm9ybWFsLnNldCgwLCAwLCAxKTsgLy8gRGVmYXVsdCBwbGFuZSBub3JtYWwgaXMgelxuXG4gICAgcXVhdC52bXVsdCh0ZW1wTm9ybWFsLCB0ZW1wTm9ybWFsKTtcbiAgICBjb25zdCBtYXhWYWwgPSBOdW1iZXIuTUFYX1ZBTFVFO1xuICAgIG1pbi5zZXQoLW1heFZhbCwgLW1heFZhbCwgLW1heFZhbCk7XG4gICAgbWF4LnNldChtYXhWYWwsIG1heFZhbCwgbWF4VmFsKTtcblxuICAgIGlmICh0ZW1wTm9ybWFsLnggPT09IDEpIHtcbiAgICAgIG1heC54ID0gcG9zLng7XG4gICAgfSBlbHNlIGlmICh0ZW1wTm9ybWFsLnggPT09IC0xKSB7XG4gICAgICBtaW4ueCA9IHBvcy54O1xuICAgIH1cblxuICAgIGlmICh0ZW1wTm9ybWFsLnkgPT09IDEpIHtcbiAgICAgIG1heC55ID0gcG9zLnk7XG4gICAgfSBlbHNlIGlmICh0ZW1wTm9ybWFsLnkgPT09IC0xKSB7XG4gICAgICBtaW4ueSA9IHBvcy55O1xuICAgIH1cblxuICAgIGlmICh0ZW1wTm9ybWFsLnogPT09IDEpIHtcbiAgICAgIG1heC56ID0gcG9zLno7XG4gICAgfSBlbHNlIGlmICh0ZW1wTm9ybWFsLnogPT09IC0xKSB7XG4gICAgICBtaW4ueiA9IHBvcy56O1xuICAgIH1cbiAgfVxuXG4gIHVwZGF0ZUJvdW5kaW5nU3BoZXJlUmFkaXVzKCkge1xuICAgIHRoaXMuYm91bmRpbmdTcGhlcmVSYWRpdXMgPSBOdW1iZXIuTUFYX1ZBTFVFO1xuICB9XG5cbn1cbmNvbnN0IHRlbXBOb3JtYWwgPSBuZXcgVmVjMygpO1xuXG4vKipcbiAqIEhlaWdodGZpZWxkIHNoYXBlIGNsYXNzLiBIZWlnaHQgZGF0YSBpcyBnaXZlbiBhcyBhbiBhcnJheS4gVGhlc2UgZGF0YSBwb2ludHMgYXJlIHNwcmVhZCBvdXQgZXZlbmx5IHdpdGggYSBnaXZlbiBkaXN0YW5jZS5cbiAqIEB0b2RvIFNob3VsZCBiZSBwb3NzaWJsZSB0byB1c2UgYWxvbmcgYWxsIGF4ZXMsIG5vdCBqdXN0IHlcbiAqIEB0b2RvIHNob3VsZCBiZSBwb3NzaWJsZSB0byBzY2FsZSBhbG9uZyBhbGwgYXhlc1xuICogQHRvZG8gUmVmYWN0b3IgZWxlbWVudFNpemUgdG8gZWxlbWVudFNpemVYIGFuZCBlbGVtZW50U2l6ZVlcbiAqXG4gKiBAZXhhbXBsZVxuICogICAgIC8vIEdlbmVyYXRlIHNvbWUgaGVpZ2h0IGRhdGEgKHktdmFsdWVzKS5cbiAqICAgICBjb25zdCBkYXRhID0gW11cbiAqICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDEwMDA7IGkrKykge1xuICogICAgICAgICBjb25zdCB5ID0gMC41ICogTWF0aC5jb3MoMC4yICogaSlcbiAqICAgICAgICAgZGF0YS5wdXNoKHkpXG4gKiAgICAgfVxuICpcbiAqICAgICAvLyBDcmVhdGUgdGhlIGhlaWdodGZpZWxkIHNoYXBlXG4gKiAgICAgY29uc3QgaGVpZ2h0ZmllbGRTaGFwZSA9IG5ldyBDQU5OT04uSGVpZ2h0ZmllbGQoZGF0YSwge1xuICogICAgICAgICBlbGVtZW50U2l6ZTogMSAvLyBEaXN0YW5jZSBiZXR3ZWVuIHRoZSBkYXRhIHBvaW50cyBpbiBYIGFuZCBZIGRpcmVjdGlvbnNcbiAqICAgICB9KVxuICogICAgIGNvbnN0IGhlaWdodGZpZWxkQm9keSA9IG5ldyBDQU5OT04uQm9keSh7IHNoYXBlOiBoZWlnaHRmaWVsZFNoYXBlIH0pXG4gKiAgICAgd29ybGQuYWRkQm9keShoZWlnaHRmaWVsZEJvZHkpXG4gKi9cbmNsYXNzIEhlaWdodGZpZWxkIGV4dGVuZHMgU2hhcGUge1xuICAvKipcbiAgICogQW4gYXJyYXkgb2YgbnVtYmVycywgb3IgaGVpZ2h0IHZhbHVlcywgdGhhdCBhcmUgc3ByZWFkIG91dCBhbG9uZyB0aGUgeCBheGlzLlxuICAgKi9cblxuICAvKipcbiAgICogTWF4IHZhbHVlIG9mIHRoZSBkYXRhIHBvaW50cyBpbiB0aGUgZGF0YSBhcnJheS5cbiAgICovXG5cbiAgLyoqXG4gICAqIE1pbmltdW0gdmFsdWUgb2YgdGhlIGRhdGEgcG9pbnRzIGluIHRoZSBkYXRhIGFycmF5LlxuICAgKi9cblxuICAvKipcbiAgICogV29ybGQgc3BhY2luZyBiZXR3ZWVuIHRoZSBkYXRhIHBvaW50cyBpbiBYIGFuZCBZIGRpcmVjdGlvbi5cbiAgICogQHRvZG8gZWxlbWVudFNpemVYIGFuZCBZXG4gICAqIEBkZWZhdWx0IDFcbiAgICovXG5cbiAgLyoqXG4gICAqIEBkZWZhdWx0IHRydWVcbiAgICovXG5cbiAgLyoqXG4gICAqIEBwYXJhbSBkYXRhIEFuIGFycmF5IG9mIG51bWJlcnMsIG9yIGhlaWdodCB2YWx1ZXMsIHRoYXQgYXJlIHNwcmVhZCBvdXQgYWxvbmcgdGhlIHggYXhpcy5cbiAgICovXG4gIGNvbnN0cnVjdG9yKGRhdGEsIG9wdGlvbnMgPSB7fSkge1xuICAgIG9wdGlvbnMgPSBVdGlscy5kZWZhdWx0cyhvcHRpb25zLCB7XG4gICAgICBtYXhWYWx1ZTogbnVsbCxcbiAgICAgIG1pblZhbHVlOiBudWxsLFxuICAgICAgZWxlbWVudFNpemU6IDFcbiAgICB9KTtcbiAgICBzdXBlcih7XG4gICAgICB0eXBlOiBTaGFwZS50eXBlcy5IRUlHSFRGSUVMRFxuICAgIH0pO1xuICAgIHRoaXMuZGF0YSA9IHZvaWQgMDtcbiAgICB0aGlzLm1heFZhbHVlID0gdm9pZCAwO1xuICAgIHRoaXMubWluVmFsdWUgPSB2b2lkIDA7XG4gICAgdGhpcy5lbGVtZW50U2l6ZSA9IHZvaWQgMDtcbiAgICB0aGlzLmNhY2hlRW5hYmxlZCA9IHZvaWQgMDtcbiAgICB0aGlzLnBpbGxhckNvbnZleCA9IHZvaWQgMDtcbiAgICB0aGlzLnBpbGxhck9mZnNldCA9IHZvaWQgMDtcbiAgICB0aGlzLl9jYWNoZWRQaWxsYXJzID0gdm9pZCAwO1xuICAgIHRoaXMuZGF0YSA9IGRhdGE7XG4gICAgdGhpcy5tYXhWYWx1ZSA9IG9wdGlvbnMubWF4VmFsdWU7XG4gICAgdGhpcy5taW5WYWx1ZSA9IG9wdGlvbnMubWluVmFsdWU7XG4gICAgdGhpcy5lbGVtZW50U2l6ZSA9IG9wdGlvbnMuZWxlbWVudFNpemU7XG5cbiAgICBpZiAob3B0aW9ucy5taW5WYWx1ZSA9PT0gbnVsbCkge1xuICAgICAgdGhpcy51cGRhdGVNaW5WYWx1ZSgpO1xuICAgIH1cblxuICAgIGlmIChvcHRpb25zLm1heFZhbHVlID09PSBudWxsKSB7XG4gICAgICB0aGlzLnVwZGF0ZU1heFZhbHVlKCk7XG4gICAgfVxuXG4gICAgdGhpcy5jYWNoZUVuYWJsZWQgPSB0cnVlO1xuICAgIHRoaXMucGlsbGFyQ29udmV4ID0gbmV3IENvbnZleFBvbHloZWRyb24oKTtcbiAgICB0aGlzLnBpbGxhck9mZnNldCA9IG5ldyBWZWMzKCk7XG4gICAgdGhpcy51cGRhdGVCb3VuZGluZ1NwaGVyZVJhZGl1cygpOyAvLyBcImlfal9pc1VwcGVyXCIgPT4geyBjb252ZXg6IC4uLiwgb2Zmc2V0OiAuLi4gfVxuICAgIC8vIGZvciBleGFtcGxlOlxuICAgIC8vIF9jYWNoZWRQaWxsYXJzW1wiMF8yXzFcIl1cblxuICAgIHRoaXMuX2NhY2hlZFBpbGxhcnMgPSB7fTtcbiAgfVxuICAvKipcbiAgICogQ2FsbCB3aGVuZXZlciB5b3UgY2hhbmdlIHRoZSBkYXRhIGFycmF5LlxuICAgKi9cblxuXG4gIHVwZGF0ZSgpIHtcbiAgICB0aGlzLl9jYWNoZWRQaWxsYXJzID0ge307XG4gIH1cbiAgLyoqXG4gICAqIFVwZGF0ZSB0aGUgYG1pblZhbHVlYCBwcm9wZXJ0eVxuICAgKi9cblxuXG4gIHVwZGF0ZU1pblZhbHVlKCkge1xuICAgIGNvbnN0IGRhdGEgPSB0aGlzLmRhdGE7XG4gICAgbGV0IG1pblZhbHVlID0gZGF0YVswXVswXTtcblxuICAgIGZvciAobGV0IGkgPSAwOyBpICE9PSBkYXRhLmxlbmd0aDsgaSsrKSB7XG4gICAgICBmb3IgKGxldCBqID0gMDsgaiAhPT0gZGF0YVtpXS5sZW5ndGg7IGorKykge1xuICAgICAgICBjb25zdCB2ID0gZGF0YVtpXVtqXTtcblxuICAgICAgICBpZiAodiA8IG1pblZhbHVlKSB7XG4gICAgICAgICAgbWluVmFsdWUgPSB2O1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgdGhpcy5taW5WYWx1ZSA9IG1pblZhbHVlO1xuICB9XG4gIC8qKlxuICAgKiBVcGRhdGUgdGhlIGBtYXhWYWx1ZWAgcHJvcGVydHlcbiAgICovXG5cblxuICB1cGRhdGVNYXhWYWx1ZSgpIHtcbiAgICBjb25zdCBkYXRhID0gdGhpcy5kYXRhO1xuICAgIGxldCBtYXhWYWx1ZSA9IGRhdGFbMF1bMF07XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSAhPT0gZGF0YS5sZW5ndGg7IGkrKykge1xuICAgICAgZm9yIChsZXQgaiA9IDA7IGogIT09IGRhdGFbaV0ubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgY29uc3QgdiA9IGRhdGFbaV1bal07XG5cbiAgICAgICAgaWYgKHYgPiBtYXhWYWx1ZSkge1xuICAgICAgICAgIG1heFZhbHVlID0gdjtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIHRoaXMubWF4VmFsdWUgPSBtYXhWYWx1ZTtcbiAgfVxuICAvKipcbiAgICogU2V0IHRoZSBoZWlnaHQgdmFsdWUgYXQgYW4gaW5kZXguIERvbid0IGZvcmdldCB0byB1cGRhdGUgbWF4VmFsdWUgYW5kIG1pblZhbHVlIGFmdGVyIHlvdSdyZSBkb25lLlxuICAgKi9cblxuXG4gIHNldEhlaWdodFZhbHVlQXRJbmRleCh4aSwgeWksIHZhbHVlKSB7XG4gICAgY29uc3QgZGF0YSA9IHRoaXMuZGF0YTtcbiAgICBkYXRhW3hpXVt5aV0gPSB2YWx1ZTsgLy8gSW52YWxpZGF0ZSBjYWNoZVxuXG4gICAgdGhpcy5jbGVhckNhY2hlZENvbnZleFRyaWFuZ2xlUGlsbGFyKHhpLCB5aSwgZmFsc2UpO1xuXG4gICAgaWYgKHhpID4gMCkge1xuICAgICAgdGhpcy5jbGVhckNhY2hlZENvbnZleFRyaWFuZ2xlUGlsbGFyKHhpIC0gMSwgeWksIHRydWUpO1xuICAgICAgdGhpcy5jbGVhckNhY2hlZENvbnZleFRyaWFuZ2xlUGlsbGFyKHhpIC0gMSwgeWksIGZhbHNlKTtcbiAgICB9XG5cbiAgICBpZiAoeWkgPiAwKSB7XG4gICAgICB0aGlzLmNsZWFyQ2FjaGVkQ29udmV4VHJpYW5nbGVQaWxsYXIoeGksIHlpIC0gMSwgdHJ1ZSk7XG4gICAgICB0aGlzLmNsZWFyQ2FjaGVkQ29udmV4VHJpYW5nbGVQaWxsYXIoeGksIHlpIC0gMSwgZmFsc2UpO1xuICAgIH1cblxuICAgIGlmICh5aSA+IDAgJiYgeGkgPiAwKSB7XG4gICAgICB0aGlzLmNsZWFyQ2FjaGVkQ29udmV4VHJpYW5nbGVQaWxsYXIoeGkgLSAxLCB5aSAtIDEsIHRydWUpO1xuICAgIH1cbiAgfVxuICAvKipcbiAgICogR2V0IG1heC9taW4gaW4gYSByZWN0YW5nbGUgaW4gdGhlIG1hdHJpeCBkYXRhXG4gICAqIEBwYXJhbSByZXN1bHQgQW4gYXJyYXkgdG8gc3RvcmUgdGhlIHJlc3VsdHMgaW4uXG4gICAqIEByZXR1cm4gVGhlIHJlc3VsdCBhcnJheSwgaWYgaXQgd2FzIHBhc3NlZCBpbi4gTWluaW11bSB3aWxsIGJlIGF0IHBvc2l0aW9uIDAgYW5kIG1heCBhdCAxLlxuICAgKi9cblxuXG4gIGdldFJlY3RNaW5NYXgoaU1pblgsIGlNaW5ZLCBpTWF4WCwgaU1heFksIHJlc3VsdCA9IFtdKSB7XG4gICAgLy8gR2V0IG1heCBhbmQgbWluIG9mIHRoZSBkYXRhXG4gICAgY29uc3QgZGF0YSA9IHRoaXMuZGF0YTsgLy8gU2V0IGZpcnN0IHZhbHVlXG5cbiAgICBsZXQgbWF4ID0gdGhpcy5taW5WYWx1ZTtcblxuICAgIGZvciAobGV0IGkgPSBpTWluWDsgaSA8PSBpTWF4WDsgaSsrKSB7XG4gICAgICBmb3IgKGxldCBqID0gaU1pblk7IGogPD0gaU1heFk7IGorKykge1xuICAgICAgICBjb25zdCBoZWlnaHQgPSBkYXRhW2ldW2pdO1xuXG4gICAgICAgIGlmIChoZWlnaHQgPiBtYXgpIHtcbiAgICAgICAgICBtYXggPSBoZWlnaHQ7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXN1bHRbMF0gPSB0aGlzLm1pblZhbHVlO1xuICAgIHJlc3VsdFsxXSA9IG1heDtcbiAgfVxuICAvKipcbiAgICogR2V0IHRoZSBpbmRleCBvZiBhIGxvY2FsIHBvc2l0aW9uIG9uIHRoZSBoZWlnaHRmaWVsZC4gVGhlIGluZGV4ZXMgaW5kaWNhdGUgdGhlIHJlY3RhbmdsZXMsIHNvIGlmIHlvdXIgdGVycmFpbiBpcyBtYWRlIG9mIE4geCBOIGhlaWdodCBkYXRhIHBvaW50cywgeW91IHdpbGwgaGF2ZSByZWN0YW5nbGUgaW5kZXhlcyByYW5naW5nIGZyb20gMCB0byBOLTEuXG4gICAqIEBwYXJhbSByZXN1bHQgVHdvLWVsZW1lbnQgYXJyYXlcbiAgICogQHBhcmFtIGNsYW1wIElmIHRoZSBwb3NpdGlvbiBzaG91bGQgYmUgY2xhbXBlZCB0byB0aGUgaGVpZ2h0ZmllbGQgZWRnZS5cbiAgICovXG5cblxuICBnZXRJbmRleE9mUG9zaXRpb24oeCwgeSwgcmVzdWx0LCBjbGFtcCkge1xuICAgIC8vIEdldCB0aGUgaW5kZXggb2YgdGhlIGRhdGEgcG9pbnRzIHRvIHRlc3QgYWdhaW5zdFxuICAgIGNvbnN0IHcgPSB0aGlzLmVsZW1lbnRTaXplO1xuICAgIGNvbnN0IGRhdGEgPSB0aGlzLmRhdGE7XG4gICAgbGV0IHhpID0gTWF0aC5mbG9vcih4IC8gdyk7XG4gICAgbGV0IHlpID0gTWF0aC5mbG9vcih5IC8gdyk7XG4gICAgcmVzdWx0WzBdID0geGk7XG4gICAgcmVzdWx0WzFdID0geWk7XG5cbiAgICBpZiAoY2xhbXApIHtcbiAgICAgIC8vIENsYW1wIGluZGV4IHRvIGVkZ2VzXG4gICAgICBpZiAoeGkgPCAwKSB7XG4gICAgICAgIHhpID0gMDtcbiAgICAgIH1cblxuICAgICAgaWYgKHlpIDwgMCkge1xuICAgICAgICB5aSA9IDA7XG4gICAgICB9XG5cbiAgICAgIGlmICh4aSA+PSBkYXRhLmxlbmd0aCAtIDEpIHtcbiAgICAgICAgeGkgPSBkYXRhLmxlbmd0aCAtIDE7XG4gICAgICB9XG5cbiAgICAgIGlmICh5aSA+PSBkYXRhWzBdLmxlbmd0aCAtIDEpIHtcbiAgICAgICAgeWkgPSBkYXRhWzBdLmxlbmd0aCAtIDE7XG4gICAgICB9XG4gICAgfSAvLyBCYWlsIG91dCBpZiB3ZSBhcmUgb3V0IG9mIHRoZSB0ZXJyYWluXG5cblxuICAgIGlmICh4aSA8IDAgfHwgeWkgPCAwIHx8IHhpID49IGRhdGEubGVuZ3RoIC0gMSB8fCB5aSA+PSBkYXRhWzBdLmxlbmd0aCAtIDEpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIGdldFRyaWFuZ2xlQXQoeCwgeSwgZWRnZUNsYW1wLCBhLCBiLCBjKSB7XG4gICAgY29uc3QgaWR4ID0gZ2V0SGVpZ2h0QXRfaWR4O1xuICAgIHRoaXMuZ2V0SW5kZXhPZlBvc2l0aW9uKHgsIHksIGlkeCwgZWRnZUNsYW1wKTtcbiAgICBsZXQgeGkgPSBpZHhbMF07XG4gICAgbGV0IHlpID0gaWR4WzFdO1xuICAgIGNvbnN0IGRhdGEgPSB0aGlzLmRhdGE7XG5cbiAgICBpZiAoZWRnZUNsYW1wKSB7XG4gICAgICB4aSA9IE1hdGgubWluKGRhdGEubGVuZ3RoIC0gMiwgTWF0aC5tYXgoMCwgeGkpKTtcbiAgICAgIHlpID0gTWF0aC5taW4oZGF0YVswXS5sZW5ndGggLSAyLCBNYXRoLm1heCgwLCB5aSkpO1xuICAgIH1cblxuICAgIGNvbnN0IGVsZW1lbnRTaXplID0gdGhpcy5lbGVtZW50U2l6ZTtcbiAgICBjb25zdCBsb3dlckRpc3QyID0gKHggLyBlbGVtZW50U2l6ZSAtIHhpKSAqKiAyICsgKHkgLyBlbGVtZW50U2l6ZSAtIHlpKSAqKiAyO1xuICAgIGNvbnN0IHVwcGVyRGlzdDIgPSAoeCAvIGVsZW1lbnRTaXplIC0gKHhpICsgMSkpICoqIDIgKyAoeSAvIGVsZW1lbnRTaXplIC0gKHlpICsgMSkpICoqIDI7XG4gICAgY29uc3QgdXBwZXIgPSBsb3dlckRpc3QyID4gdXBwZXJEaXN0MjtcbiAgICB0aGlzLmdldFRyaWFuZ2xlKHhpLCB5aSwgdXBwZXIsIGEsIGIsIGMpO1xuICAgIHJldHVybiB1cHBlcjtcbiAgfVxuXG4gIGdldE5vcm1hbEF0KHgsIHksIGVkZ2VDbGFtcCwgcmVzdWx0KSB7XG4gICAgY29uc3QgYSA9IGdldE5vcm1hbEF0X2E7XG4gICAgY29uc3QgYiA9IGdldE5vcm1hbEF0X2I7XG4gICAgY29uc3QgYyA9IGdldE5vcm1hbEF0X2M7XG4gICAgY29uc3QgZTAgPSBnZXROb3JtYWxBdF9lMDtcbiAgICBjb25zdCBlMSA9IGdldE5vcm1hbEF0X2UxO1xuICAgIHRoaXMuZ2V0VHJpYW5nbGVBdCh4LCB5LCBlZGdlQ2xhbXAsIGEsIGIsIGMpO1xuICAgIGIudnN1YihhLCBlMCk7XG4gICAgYy52c3ViKGEsIGUxKTtcbiAgICBlMC5jcm9zcyhlMSwgcmVzdWx0KTtcbiAgICByZXN1bHQubm9ybWFsaXplKCk7XG4gIH1cbiAgLyoqXG4gICAqIEdldCBhbiBBQUJCIG9mIGEgc3F1YXJlIGluIHRoZSBoZWlnaHRmaWVsZFxuICAgKiBAcGFyYW0geGlcbiAgICogQHBhcmFtIHlpXG4gICAqIEBwYXJhbSByZXN1bHRcbiAgICovXG5cblxuICBnZXRBYWJiQXRJbmRleCh4aSwgeWksIHtcbiAgICBsb3dlckJvdW5kLFxuICAgIHVwcGVyQm91bmRcbiAgfSkge1xuICAgIGNvbnN0IGRhdGEgPSB0aGlzLmRhdGE7XG4gICAgY29uc3QgZWxlbWVudFNpemUgPSB0aGlzLmVsZW1lbnRTaXplO1xuICAgIGxvd2VyQm91bmQuc2V0KHhpICogZWxlbWVudFNpemUsIHlpICogZWxlbWVudFNpemUsIGRhdGFbeGldW3lpXSk7XG4gICAgdXBwZXJCb3VuZC5zZXQoKHhpICsgMSkgKiBlbGVtZW50U2l6ZSwgKHlpICsgMSkgKiBlbGVtZW50U2l6ZSwgZGF0YVt4aSArIDFdW3lpICsgMV0pO1xuICB9XG4gIC8qKlxuICAgKiBHZXQgdGhlIGhlaWdodCBpbiB0aGUgaGVpZ2h0ZmllbGQgYXQgYSBnaXZlbiBwb3NpdGlvblxuICAgKi9cblxuXG4gIGdldEhlaWdodEF0KHgsIHksIGVkZ2VDbGFtcCkge1xuICAgIGNvbnN0IGRhdGEgPSB0aGlzLmRhdGE7XG4gICAgY29uc3QgYSA9IGdldEhlaWdodEF0X2E7XG4gICAgY29uc3QgYiA9IGdldEhlaWdodEF0X2I7XG4gICAgY29uc3QgYyA9IGdldEhlaWdodEF0X2M7XG4gICAgY29uc3QgaWR4ID0gZ2V0SGVpZ2h0QXRfaWR4O1xuICAgIHRoaXMuZ2V0SW5kZXhPZlBvc2l0aW9uKHgsIHksIGlkeCwgZWRnZUNsYW1wKTtcbiAgICBsZXQgeGkgPSBpZHhbMF07XG4gICAgbGV0IHlpID0gaWR4WzFdO1xuXG4gICAgaWYgKGVkZ2VDbGFtcCkge1xuICAgICAgeGkgPSBNYXRoLm1pbihkYXRhLmxlbmd0aCAtIDIsIE1hdGgubWF4KDAsIHhpKSk7XG4gICAgICB5aSA9IE1hdGgubWluKGRhdGFbMF0ubGVuZ3RoIC0gMiwgTWF0aC5tYXgoMCwgeWkpKTtcbiAgICB9XG5cbiAgICBjb25zdCB1cHBlciA9IHRoaXMuZ2V0VHJpYW5nbGVBdCh4LCB5LCBlZGdlQ2xhbXAsIGEsIGIsIGMpO1xuICAgIGJhcnljZW50cmljV2VpZ2h0cyh4LCB5LCBhLngsIGEueSwgYi54LCBiLnksIGMueCwgYy55LCBnZXRIZWlnaHRBdF93ZWlnaHRzKTtcbiAgICBjb25zdCB3ID0gZ2V0SGVpZ2h0QXRfd2VpZ2h0cztcblxuICAgIGlmICh1cHBlcikge1xuICAgICAgLy8gVG9wIHRyaWFuZ2xlIHZlcnRzXG4gICAgICByZXR1cm4gZGF0YVt4aSArIDFdW3lpICsgMV0gKiB3LnggKyBkYXRhW3hpXVt5aSArIDFdICogdy55ICsgZGF0YVt4aSArIDFdW3lpXSAqIHcuejtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gVG9wIHRyaWFuZ2xlIHZlcnRzXG4gICAgICByZXR1cm4gZGF0YVt4aV1beWldICogdy54ICsgZGF0YVt4aSArIDFdW3lpXSAqIHcueSArIGRhdGFbeGldW3lpICsgMV0gKiB3Lno7XG4gICAgfVxuICB9XG5cbiAgZ2V0Q2FjaGVDb252ZXhUcmlhbmdsZVBpbGxhcktleSh4aSwgeWksIGdldFVwcGVyVHJpYW5nbGUpIHtcbiAgICByZXR1cm4geGkgKyBcIl9cIiArIHlpICsgXCJfXCIgKyAoZ2V0VXBwZXJUcmlhbmdsZSA/IDEgOiAwKTtcbiAgfVxuXG4gIGdldENhY2hlZENvbnZleFRyaWFuZ2xlUGlsbGFyKHhpLCB5aSwgZ2V0VXBwZXJUcmlhbmdsZSkge1xuICAgIHJldHVybiB0aGlzLl9jYWNoZWRQaWxsYXJzW3RoaXMuZ2V0Q2FjaGVDb252ZXhUcmlhbmdsZVBpbGxhcktleSh4aSwgeWksIGdldFVwcGVyVHJpYW5nbGUpXTtcbiAgfVxuXG4gIHNldENhY2hlZENvbnZleFRyaWFuZ2xlUGlsbGFyKHhpLCB5aSwgZ2V0VXBwZXJUcmlhbmdsZSwgY29udmV4LCBvZmZzZXQpIHtcbiAgICB0aGlzLl9jYWNoZWRQaWxsYXJzW3RoaXMuZ2V0Q2FjaGVDb252ZXhUcmlhbmdsZVBpbGxhcktleSh4aSwgeWksIGdldFVwcGVyVHJpYW5nbGUpXSA9IHtcbiAgICAgIGNvbnZleCxcbiAgICAgIG9mZnNldFxuICAgIH07XG4gIH1cblxuICBjbGVhckNhY2hlZENvbnZleFRyaWFuZ2xlUGlsbGFyKHhpLCB5aSwgZ2V0VXBwZXJUcmlhbmdsZSkge1xuICAgIGRlbGV0ZSB0aGlzLl9jYWNoZWRQaWxsYXJzW3RoaXMuZ2V0Q2FjaGVDb252ZXhUcmlhbmdsZVBpbGxhcktleSh4aSwgeWksIGdldFVwcGVyVHJpYW5nbGUpXTtcbiAgfVxuICAvKipcbiAgICogR2V0IGEgdHJpYW5nbGUgZnJvbSB0aGUgaGVpZ2h0ZmllbGRcbiAgICovXG5cblxuICBnZXRUcmlhbmdsZSh4aSwgeWksIHVwcGVyLCBhLCBiLCBjKSB7XG4gICAgY29uc3QgZGF0YSA9IHRoaXMuZGF0YTtcbiAgICBjb25zdCBlbGVtZW50U2l6ZSA9IHRoaXMuZWxlbWVudFNpemU7XG5cbiAgICBpZiAodXBwZXIpIHtcbiAgICAgIC8vIFRvcCB0cmlhbmdsZSB2ZXJ0c1xuICAgICAgYS5zZXQoKHhpICsgMSkgKiBlbGVtZW50U2l6ZSwgKHlpICsgMSkgKiBlbGVtZW50U2l6ZSwgZGF0YVt4aSArIDFdW3lpICsgMV0pO1xuICAgICAgYi5zZXQoeGkgKiBlbGVtZW50U2l6ZSwgKHlpICsgMSkgKiBlbGVtZW50U2l6ZSwgZGF0YVt4aV1beWkgKyAxXSk7XG4gICAgICBjLnNldCgoeGkgKyAxKSAqIGVsZW1lbnRTaXplLCB5aSAqIGVsZW1lbnRTaXplLCBkYXRhW3hpICsgMV1beWldKTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gVG9wIHRyaWFuZ2xlIHZlcnRzXG4gICAgICBhLnNldCh4aSAqIGVsZW1lbnRTaXplLCB5aSAqIGVsZW1lbnRTaXplLCBkYXRhW3hpXVt5aV0pO1xuICAgICAgYi5zZXQoKHhpICsgMSkgKiBlbGVtZW50U2l6ZSwgeWkgKiBlbGVtZW50U2l6ZSwgZGF0YVt4aSArIDFdW3lpXSk7XG4gICAgICBjLnNldCh4aSAqIGVsZW1lbnRTaXplLCAoeWkgKyAxKSAqIGVsZW1lbnRTaXplLCBkYXRhW3hpXVt5aSArIDFdKTtcbiAgICB9XG4gIH1cbiAgLyoqXG4gICAqIEdldCBhIHRyaWFuZ2xlIGluIHRoZSB0ZXJyYWluIGluIHRoZSBmb3JtIG9mIGEgdHJpYW5ndWxhciBjb252ZXggc2hhcGUuXG4gICAqL1xuXG5cbiAgZ2V0Q29udmV4VHJpYW5nbGVQaWxsYXIoeGksIHlpLCBnZXRVcHBlclRyaWFuZ2xlKSB7XG4gICAgbGV0IHJlc3VsdCA9IHRoaXMucGlsbGFyQ29udmV4O1xuICAgIGxldCBvZmZzZXRSZXN1bHQgPSB0aGlzLnBpbGxhck9mZnNldDtcblxuICAgIGlmICh0aGlzLmNhY2hlRW5hYmxlZCkge1xuICAgICAgY29uc3QgZGF0YSA9IHRoaXMuZ2V0Q2FjaGVkQ29udmV4VHJpYW5nbGVQaWxsYXIoeGksIHlpLCBnZXRVcHBlclRyaWFuZ2xlKTtcblxuICAgICAgaWYgKGRhdGEpIHtcbiAgICAgICAgdGhpcy5waWxsYXJDb252ZXggPSBkYXRhLmNvbnZleDtcbiAgICAgICAgdGhpcy5waWxsYXJPZmZzZXQgPSBkYXRhLm9mZnNldDtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICByZXN1bHQgPSBuZXcgQ29udmV4UG9seWhlZHJvbigpO1xuICAgICAgb2Zmc2V0UmVzdWx0ID0gbmV3IFZlYzMoKTtcbiAgICAgIHRoaXMucGlsbGFyQ29udmV4ID0gcmVzdWx0O1xuICAgICAgdGhpcy5waWxsYXJPZmZzZXQgPSBvZmZzZXRSZXN1bHQ7XG4gICAgfVxuXG4gICAgY29uc3QgZGF0YSA9IHRoaXMuZGF0YTtcbiAgICBjb25zdCBlbGVtZW50U2l6ZSA9IHRoaXMuZWxlbWVudFNpemU7XG4gICAgY29uc3QgZmFjZXMgPSByZXN1bHQuZmFjZXM7IC8vIFJldXNlIHZlcnRzIGlmIHBvc3NpYmxlXG5cbiAgICByZXN1bHQudmVydGljZXMubGVuZ3RoID0gNjtcblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgNjsgaSsrKSB7XG4gICAgICBpZiAoIXJlc3VsdC52ZXJ0aWNlc1tpXSkge1xuICAgICAgICByZXN1bHQudmVydGljZXNbaV0gPSBuZXcgVmVjMygpO1xuICAgICAgfVxuICAgIH0gLy8gUmV1c2UgZmFjZXMgaWYgcG9zc2libGVcblxuXG4gICAgZmFjZXMubGVuZ3RoID0gNTtcblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgNTsgaSsrKSB7XG4gICAgICBpZiAoIWZhY2VzW2ldKSB7XG4gICAgICAgIGZhY2VzW2ldID0gW107XG4gICAgICB9XG4gICAgfVxuXG4gICAgY29uc3QgdmVydHMgPSByZXN1bHQudmVydGljZXM7XG4gICAgY29uc3QgaCA9IChNYXRoLm1pbihkYXRhW3hpXVt5aV0sIGRhdGFbeGkgKyAxXVt5aV0sIGRhdGFbeGldW3lpICsgMV0sIGRhdGFbeGkgKyAxXVt5aSArIDFdKSAtIHRoaXMubWluVmFsdWUpIC8gMiArIHRoaXMubWluVmFsdWU7XG5cbiAgICBpZiAoIWdldFVwcGVyVHJpYW5nbGUpIHtcbiAgICAgIC8vIENlbnRlciBvZiB0aGUgdHJpYW5nbGUgcGlsbGFyIC0gYWxsIHBvbHlnb25zIGFyZSBnaXZlbiByZWxhdGl2ZSB0byB0aGlzIG9uZVxuICAgICAgb2Zmc2V0UmVzdWx0LnNldCgoeGkgKyAwLjI1KSAqIGVsZW1lbnRTaXplLCAvLyBzb3J0IG9mIGNlbnRlciBvZiBhIHRyaWFuZ2xlXG4gICAgICAoeWkgKyAwLjI1KSAqIGVsZW1lbnRTaXplLCBoIC8vIHZlcnRpY2FsIGNlbnRlclxuICAgICAgKTsgLy8gVG9wIHRyaWFuZ2xlIHZlcnRzXG5cbiAgICAgIHZlcnRzWzBdLnNldCgtMC4yNSAqIGVsZW1lbnRTaXplLCAtMC4yNSAqIGVsZW1lbnRTaXplLCBkYXRhW3hpXVt5aV0gLSBoKTtcbiAgICAgIHZlcnRzWzFdLnNldCgwLjc1ICogZWxlbWVudFNpemUsIC0wLjI1ICogZWxlbWVudFNpemUsIGRhdGFbeGkgKyAxXVt5aV0gLSBoKTtcbiAgICAgIHZlcnRzWzJdLnNldCgtMC4yNSAqIGVsZW1lbnRTaXplLCAwLjc1ICogZWxlbWVudFNpemUsIGRhdGFbeGldW3lpICsgMV0gLSBoKTsgLy8gYm90dG9tIHRyaWFuZ2xlIHZlcnRzXG5cbiAgICAgIHZlcnRzWzNdLnNldCgtMC4yNSAqIGVsZW1lbnRTaXplLCAtMC4yNSAqIGVsZW1lbnRTaXplLCAtTWF0aC5hYnMoaCkgLSAxKTtcbiAgICAgIHZlcnRzWzRdLnNldCgwLjc1ICogZWxlbWVudFNpemUsIC0wLjI1ICogZWxlbWVudFNpemUsIC1NYXRoLmFicyhoKSAtIDEpO1xuICAgICAgdmVydHNbNV0uc2V0KC0wLjI1ICogZWxlbWVudFNpemUsIDAuNzUgKiBlbGVtZW50U2l6ZSwgLU1hdGguYWJzKGgpIC0gMSk7IC8vIHRvcCB0cmlhbmdsZVxuXG4gICAgICBmYWNlc1swXVswXSA9IDA7XG4gICAgICBmYWNlc1swXVsxXSA9IDE7XG4gICAgICBmYWNlc1swXVsyXSA9IDI7IC8vIGJvdHRvbSB0cmlhbmdsZVxuXG4gICAgICBmYWNlc1sxXVswXSA9IDU7XG4gICAgICBmYWNlc1sxXVsxXSA9IDQ7XG4gICAgICBmYWNlc1sxXVsyXSA9IDM7IC8vIC14IGZhY2luZyBxdWFkXG5cbiAgICAgIGZhY2VzWzJdWzBdID0gMDtcbiAgICAgIGZhY2VzWzJdWzFdID0gMjtcbiAgICAgIGZhY2VzWzJdWzJdID0gNTtcbiAgICAgIGZhY2VzWzJdWzNdID0gMzsgLy8gLXkgZmFjaW5nIHF1YWRcblxuICAgICAgZmFjZXNbM11bMF0gPSAxO1xuICAgICAgZmFjZXNbM11bMV0gPSAwO1xuICAgICAgZmFjZXNbM11bMl0gPSAzO1xuICAgICAgZmFjZXNbM11bM10gPSA0OyAvLyAreHkgZmFjaW5nIHF1YWRcblxuICAgICAgZmFjZXNbNF1bMF0gPSA0O1xuICAgICAgZmFjZXNbNF1bMV0gPSA1O1xuICAgICAgZmFjZXNbNF1bMl0gPSAyO1xuICAgICAgZmFjZXNbNF1bM10gPSAxO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBDZW50ZXIgb2YgdGhlIHRyaWFuZ2xlIHBpbGxhciAtIGFsbCBwb2x5Z29ucyBhcmUgZ2l2ZW4gcmVsYXRpdmUgdG8gdGhpcyBvbmVcbiAgICAgIG9mZnNldFJlc3VsdC5zZXQoKHhpICsgMC43NSkgKiBlbGVtZW50U2l6ZSwgLy8gc29ydCBvZiBjZW50ZXIgb2YgYSB0cmlhbmdsZVxuICAgICAgKHlpICsgMC43NSkgKiBlbGVtZW50U2l6ZSwgaCAvLyB2ZXJ0aWNhbCBjZW50ZXJcbiAgICAgICk7IC8vIFRvcCB0cmlhbmdsZSB2ZXJ0c1xuXG4gICAgICB2ZXJ0c1swXS5zZXQoMC4yNSAqIGVsZW1lbnRTaXplLCAwLjI1ICogZWxlbWVudFNpemUsIGRhdGFbeGkgKyAxXVt5aSArIDFdIC0gaCk7XG4gICAgICB2ZXJ0c1sxXS5zZXQoLTAuNzUgKiBlbGVtZW50U2l6ZSwgMC4yNSAqIGVsZW1lbnRTaXplLCBkYXRhW3hpXVt5aSArIDFdIC0gaCk7XG4gICAgICB2ZXJ0c1syXS5zZXQoMC4yNSAqIGVsZW1lbnRTaXplLCAtMC43NSAqIGVsZW1lbnRTaXplLCBkYXRhW3hpICsgMV1beWldIC0gaCk7IC8vIGJvdHRvbSB0cmlhbmdsZSB2ZXJ0c1xuXG4gICAgICB2ZXJ0c1szXS5zZXQoMC4yNSAqIGVsZW1lbnRTaXplLCAwLjI1ICogZWxlbWVudFNpemUsIC1NYXRoLmFicyhoKSAtIDEpO1xuICAgICAgdmVydHNbNF0uc2V0KC0wLjc1ICogZWxlbWVudFNpemUsIDAuMjUgKiBlbGVtZW50U2l6ZSwgLU1hdGguYWJzKGgpIC0gMSk7XG4gICAgICB2ZXJ0c1s1XS5zZXQoMC4yNSAqIGVsZW1lbnRTaXplLCAtMC43NSAqIGVsZW1lbnRTaXplLCAtTWF0aC5hYnMoaCkgLSAxKTsgLy8gVG9wIHRyaWFuZ2xlXG5cbiAgICAgIGZhY2VzWzBdWzBdID0gMDtcbiAgICAgIGZhY2VzWzBdWzFdID0gMTtcbiAgICAgIGZhY2VzWzBdWzJdID0gMjsgLy8gYm90dG9tIHRyaWFuZ2xlXG5cbiAgICAgIGZhY2VzWzFdWzBdID0gNTtcbiAgICAgIGZhY2VzWzFdWzFdID0gNDtcbiAgICAgIGZhY2VzWzFdWzJdID0gMzsgLy8gK3ggZmFjaW5nIHF1YWRcblxuICAgICAgZmFjZXNbMl1bMF0gPSAyO1xuICAgICAgZmFjZXNbMl1bMV0gPSA1O1xuICAgICAgZmFjZXNbMl1bMl0gPSAzO1xuICAgICAgZmFjZXNbMl1bM10gPSAwOyAvLyAreSBmYWNpbmcgcXVhZFxuXG4gICAgICBmYWNlc1szXVswXSA9IDM7XG4gICAgICBmYWNlc1szXVsxXSA9IDQ7XG4gICAgICBmYWNlc1szXVsyXSA9IDE7XG4gICAgICBmYWNlc1szXVszXSA9IDA7IC8vIC14eSBmYWNpbmcgcXVhZFxuXG4gICAgICBmYWNlc1s0XVswXSA9IDE7XG4gICAgICBmYWNlc1s0XVsxXSA9IDQ7XG4gICAgICBmYWNlc1s0XVsyXSA9IDU7XG4gICAgICBmYWNlc1s0XVszXSA9IDI7XG4gICAgfVxuXG4gICAgcmVzdWx0LmNvbXB1dGVOb3JtYWxzKCk7XG4gICAgcmVzdWx0LmNvbXB1dGVFZGdlcygpO1xuICAgIHJlc3VsdC51cGRhdGVCb3VuZGluZ1NwaGVyZVJhZGl1cygpO1xuICAgIHRoaXMuc2V0Q2FjaGVkQ29udmV4VHJpYW5nbGVQaWxsYXIoeGksIHlpLCBnZXRVcHBlclRyaWFuZ2xlLCByZXN1bHQsIG9mZnNldFJlc3VsdCk7XG4gIH1cblxuICBjYWxjdWxhdGVMb2NhbEluZXJ0aWEobWFzcywgdGFyZ2V0ID0gbmV3IFZlYzMoKSkge1xuICAgIHRhcmdldC5zZXQoMCwgMCwgMCk7XG4gICAgcmV0dXJuIHRhcmdldDtcbiAgfVxuXG4gIHZvbHVtZSgpIHtcbiAgICByZXR1cm4gKC8vIFRoZSB0ZXJyYWluIGlzIGluZmluaXRlXG4gICAgICBOdW1iZXIuTUFYX1ZBTFVFXG4gICAgKTtcbiAgfVxuXG4gIGNhbGN1bGF0ZVdvcmxkQUFCQihwb3MsIHF1YXQsIG1pbiwgbWF4KSB7XG4gICAgLyoqIEBUT0RPIGRvIGl0IHByb3Blcmx5ICovXG4gICAgbWluLnNldCgtTnVtYmVyLk1BWF9WQUxVRSwgLU51bWJlci5NQVhfVkFMVUUsIC1OdW1iZXIuTUFYX1ZBTFVFKTtcbiAgICBtYXguc2V0KE51bWJlci5NQVhfVkFMVUUsIE51bWJlci5NQVhfVkFMVUUsIE51bWJlci5NQVhfVkFMVUUpO1xuICB9XG5cbiAgdXBkYXRlQm91bmRpbmdTcGhlcmVSYWRpdXMoKSB7XG4gICAgLy8gVXNlIHRoZSBib3VuZGluZyBib3ggb2YgdGhlIG1pbi9tYXggdmFsdWVzXG4gICAgY29uc3QgZGF0YSA9IHRoaXMuZGF0YTtcbiAgICBjb25zdCBzID0gdGhpcy5lbGVtZW50U2l6ZTtcbiAgICB0aGlzLmJvdW5kaW5nU3BoZXJlUmFkaXVzID0gbmV3IFZlYzMoZGF0YS5sZW5ndGggKiBzLCBkYXRhWzBdLmxlbmd0aCAqIHMsIE1hdGgubWF4KE1hdGguYWJzKHRoaXMubWF4VmFsdWUpLCBNYXRoLmFicyh0aGlzLm1pblZhbHVlKSkpLmxlbmd0aCgpO1xuICB9XG4gIC8qKlxuICAgKiBTZXRzIHRoZSBoZWlnaHQgdmFsdWVzIGZyb20gYW4gaW1hZ2UuIEN1cnJlbnRseSBvbmx5IHN1cHBvcnRlZCBpbiBicm93c2VyLlxuICAgKi9cblxuXG4gIHNldEhlaWdodHNGcm9tSW1hZ2UoaW1hZ2UsIHNjYWxlKSB7XG4gICAgY29uc3Qge1xuICAgICAgeCxcbiAgICAgIHosXG4gICAgICB5XG4gICAgfSA9IHNjYWxlO1xuICAgIGNvbnN0IGNhbnZhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2NhbnZhcycpO1xuICAgIGNhbnZhcy53aWR0aCA9IGltYWdlLndpZHRoO1xuICAgIGNhbnZhcy5oZWlnaHQgPSBpbWFnZS5oZWlnaHQ7XG4gICAgY29uc3QgY29udGV4dCA9IGNhbnZhcy5nZXRDb250ZXh0KCcyZCcpO1xuICAgIGNvbnRleHQuZHJhd0ltYWdlKGltYWdlLCAwLCAwKTtcbiAgICBjb25zdCBpbWFnZURhdGEgPSBjb250ZXh0LmdldEltYWdlRGF0YSgwLCAwLCBpbWFnZS53aWR0aCwgaW1hZ2UuaGVpZ2h0KTtcbiAgICBjb25zdCBtYXRyaXggPSB0aGlzLmRhdGE7XG4gICAgbWF0cml4Lmxlbmd0aCA9IDA7XG4gICAgdGhpcy5lbGVtZW50U2l6ZSA9IE1hdGguYWJzKHgpIC8gaW1hZ2VEYXRhLndpZHRoO1xuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBpbWFnZURhdGEuaGVpZ2h0OyBpKyspIHtcbiAgICAgIGNvbnN0IHJvdyA9IFtdO1xuXG4gICAgICBmb3IgKGxldCBqID0gMDsgaiA8IGltYWdlRGF0YS53aWR0aDsgaisrKSB7XG4gICAgICAgIGNvbnN0IGEgPSBpbWFnZURhdGEuZGF0YVsoaSAqIGltYWdlRGF0YS5oZWlnaHQgKyBqKSAqIDRdO1xuICAgICAgICBjb25zdCBiID0gaW1hZ2VEYXRhLmRhdGFbKGkgKiBpbWFnZURhdGEuaGVpZ2h0ICsgaikgKiA0ICsgMV07XG4gICAgICAgIGNvbnN0IGMgPSBpbWFnZURhdGEuZGF0YVsoaSAqIGltYWdlRGF0YS5oZWlnaHQgKyBqKSAqIDQgKyAyXTtcbiAgICAgICAgY29uc3QgaGVpZ2h0ID0gKGEgKyBiICsgYykgLyA0IC8gMjU1ICogejtcblxuICAgICAgICBpZiAoeCA8IDApIHtcbiAgICAgICAgICByb3cucHVzaChoZWlnaHQpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJvdy51bnNoaWZ0KGhlaWdodCk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKHkgPCAwKSB7XG4gICAgICAgIG1hdHJpeC51bnNoaWZ0KHJvdyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBtYXRyaXgucHVzaChyb3cpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHRoaXMudXBkYXRlTWF4VmFsdWUoKTtcbiAgICB0aGlzLnVwZGF0ZU1pblZhbHVlKCk7XG4gICAgdGhpcy51cGRhdGUoKTtcbiAgfVxuXG59XG5jb25zdCBnZXRIZWlnaHRBdF9pZHggPSBbXTtcbmNvbnN0IGdldEhlaWdodEF0X3dlaWdodHMgPSBuZXcgVmVjMygpO1xuY29uc3QgZ2V0SGVpZ2h0QXRfYSA9IG5ldyBWZWMzKCk7XG5jb25zdCBnZXRIZWlnaHRBdF9iID0gbmV3IFZlYzMoKTtcbmNvbnN0IGdldEhlaWdodEF0X2MgPSBuZXcgVmVjMygpO1xuY29uc3QgZ2V0Tm9ybWFsQXRfYSA9IG5ldyBWZWMzKCk7XG5jb25zdCBnZXROb3JtYWxBdF9iID0gbmV3IFZlYzMoKTtcbmNvbnN0IGdldE5vcm1hbEF0X2MgPSBuZXcgVmVjMygpO1xuY29uc3QgZ2V0Tm9ybWFsQXRfZTAgPSBuZXcgVmVjMygpO1xuY29uc3QgZ2V0Tm9ybWFsQXRfZTEgPSBuZXcgVmVjMygpOyAvLyBmcm9tIGh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0JhcnljZW50cmljX2Nvb3JkaW5hdGVfc3lzdGVtXG5cbmZ1bmN0aW9uIGJhcnljZW50cmljV2VpZ2h0cyh4LCB5LCBheCwgYXksIGJ4LCBieSwgY3gsIGN5LCByZXN1bHQpIHtcbiAgcmVzdWx0LnggPSAoKGJ5IC0gY3kpICogKHggLSBjeCkgKyAoY3ggLSBieCkgKiAoeSAtIGN5KSkgLyAoKGJ5IC0gY3kpICogKGF4IC0gY3gpICsgKGN4IC0gYngpICogKGF5IC0gY3kpKTtcbiAgcmVzdWx0LnkgPSAoKGN5IC0gYXkpICogKHggLSBjeCkgKyAoYXggLSBjeCkgKiAoeSAtIGN5KSkgLyAoKGJ5IC0gY3kpICogKGF4IC0gY3gpICsgKGN4IC0gYngpICogKGF5IC0gY3kpKTtcbiAgcmVzdWx0LnogPSAxIC0gcmVzdWx0LnggLSByZXN1bHQueTtcbn1cblxuLyoqXG4gKiBPY3RyZWVOb2RlXG4gKi9cbmNsYXNzIE9jdHJlZU5vZGUge1xuICAvKiogVGhlIHJvb3Qgbm9kZSAqL1xuXG4gIC8qKiBCb3VuZGFyeSBvZiB0aGlzIG5vZGUgKi9cblxuICAvKiogQ29udGFpbmVkIGRhdGEgYXQgdGhlIGN1cnJlbnQgbm9kZSBsZXZlbCAqL1xuXG4gIC8qKiBDaGlsZHJlbiB0byB0aGlzIG5vZGUgKi9cbiAgY29uc3RydWN0b3Iob3B0aW9ucyA9IHt9KSB7XG4gICAgdGhpcy5yb290ID0gdm9pZCAwO1xuICAgIHRoaXMuYWFiYiA9IHZvaWQgMDtcbiAgICB0aGlzLmRhdGEgPSB2b2lkIDA7XG4gICAgdGhpcy5jaGlsZHJlbiA9IHZvaWQgMDtcbiAgICB0aGlzLnJvb3QgPSBvcHRpb25zLnJvb3QgfHwgbnVsbDtcbiAgICB0aGlzLmFhYmIgPSBvcHRpb25zLmFhYmIgPyBvcHRpb25zLmFhYmIuY2xvbmUoKSA6IG5ldyBBQUJCKCk7XG4gICAgdGhpcy5kYXRhID0gW107XG4gICAgdGhpcy5jaGlsZHJlbiA9IFtdO1xuICB9XG4gIC8qKlxuICAgKiByZXNldFxuICAgKi9cblxuXG4gIHJlc2V0KCkge1xuICAgIHRoaXMuY2hpbGRyZW4ubGVuZ3RoID0gdGhpcy5kYXRhLmxlbmd0aCA9IDA7XG4gIH1cbiAgLyoqXG4gICAqIEluc2VydCBkYXRhIGludG8gdGhpcyBub2RlXG4gICAqIEByZXR1cm4gVHJ1ZSBpZiBzdWNjZXNzZnVsLCBvdGhlcndpc2UgZmFsc2VcbiAgICovXG5cblxuICBpbnNlcnQoYWFiYiwgZWxlbWVudERhdGEsIGxldmVsID0gMCkge1xuICAgIGNvbnN0IG5vZGVEYXRhID0gdGhpcy5kYXRhOyAvLyBJZ25vcmUgb2JqZWN0cyB0aGF0IGRvIG5vdCBiZWxvbmcgaW4gdGhpcyBub2RlXG5cbiAgICBpZiAoIXRoaXMuYWFiYi5jb250YWlucyhhYWJiKSkge1xuICAgICAgcmV0dXJuIGZhbHNlOyAvLyBvYmplY3QgY2Fubm90IGJlIGFkZGVkXG4gICAgfVxuXG4gICAgY29uc3QgY2hpbGRyZW4gPSB0aGlzLmNoaWxkcmVuO1xuICAgIGNvbnN0IG1heERlcHRoID0gdGhpcy5tYXhEZXB0aCB8fCB0aGlzLnJvb3QubWF4RGVwdGg7XG5cbiAgICBpZiAobGV2ZWwgPCBtYXhEZXB0aCkge1xuICAgICAgLy8gU3ViZGl2aWRlIGlmIHRoZXJlIGFyZSBubyBjaGlsZHJlbiB5ZXRcbiAgICAgIGxldCBzdWJkaXZpZGVkID0gZmFsc2U7XG5cbiAgICAgIGlmICghY2hpbGRyZW4ubGVuZ3RoKSB7XG4gICAgICAgIHRoaXMuc3ViZGl2aWRlKCk7XG4gICAgICAgIHN1YmRpdmlkZWQgPSB0cnVlO1xuICAgICAgfSAvLyBhZGQgdG8gd2hpY2hldmVyIG5vZGUgd2lsbCBhY2NlcHQgaXRcblxuXG4gICAgICBmb3IgKGxldCBpID0gMDsgaSAhPT0gODsgaSsrKSB7XG4gICAgICAgIGlmIChjaGlsZHJlbltpXS5pbnNlcnQoYWFiYiwgZWxlbWVudERhdGEsIGxldmVsICsgMSkpIHtcbiAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAoc3ViZGl2aWRlZCkge1xuICAgICAgICAvLyBObyBjaGlsZHJlbiBhY2NlcHRlZCEgTWlnaHQgYXMgd2VsbCBqdXN0IHJlbW92ZSBlbSBzaW5jZSB0aGV5IGNvbnRhaW4gbm9uZVxuICAgICAgICBjaGlsZHJlbi5sZW5ndGggPSAwO1xuICAgICAgfVxuICAgIH0gLy8gVG9vIGRlZXAsIG9yIGNoaWxkcmVuIGRpZG50IHdhbnQgaXQuIGFkZCBpdCBpbiBjdXJyZW50IG5vZGVcblxuXG4gICAgbm9kZURhdGEucHVzaChlbGVtZW50RGF0YSk7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cbiAgLyoqXG4gICAqIENyZWF0ZSA4IGVxdWFsbHkgc2l6ZWQgY2hpbGRyZW4gbm9kZXMgYW5kIHB1dCB0aGVtIGluIHRoZSBgY2hpbGRyZW5gIGFycmF5LlxuICAgKi9cblxuXG4gIHN1YmRpdmlkZSgpIHtcbiAgICBjb25zdCBhYWJiID0gdGhpcy5hYWJiO1xuICAgIGNvbnN0IGwgPSBhYWJiLmxvd2VyQm91bmQ7XG4gICAgY29uc3QgdSA9IGFhYmIudXBwZXJCb3VuZDtcbiAgICBjb25zdCBjaGlsZHJlbiA9IHRoaXMuY2hpbGRyZW47XG4gICAgY2hpbGRyZW4ucHVzaChuZXcgT2N0cmVlTm9kZSh7XG4gICAgICBhYWJiOiBuZXcgQUFCQih7XG4gICAgICAgIGxvd2VyQm91bmQ6IG5ldyBWZWMzKDAsIDAsIDApXG4gICAgICB9KVxuICAgIH0pLCBuZXcgT2N0cmVlTm9kZSh7XG4gICAgICBhYWJiOiBuZXcgQUFCQih7XG4gICAgICAgIGxvd2VyQm91bmQ6IG5ldyBWZWMzKDEsIDAsIDApXG4gICAgICB9KVxuICAgIH0pLCBuZXcgT2N0cmVlTm9kZSh7XG4gICAgICBhYWJiOiBuZXcgQUFCQih7XG4gICAgICAgIGxvd2VyQm91bmQ6IG5ldyBWZWMzKDEsIDEsIDApXG4gICAgICB9KVxuICAgIH0pLCBuZXcgT2N0cmVlTm9kZSh7XG4gICAgICBhYWJiOiBuZXcgQUFCQih7XG4gICAgICAgIGxvd2VyQm91bmQ6IG5ldyBWZWMzKDEsIDEsIDEpXG4gICAgICB9KVxuICAgIH0pLCBuZXcgT2N0cmVlTm9kZSh7XG4gICAgICBhYWJiOiBuZXcgQUFCQih7XG4gICAgICAgIGxvd2VyQm91bmQ6IG5ldyBWZWMzKDAsIDEsIDEpXG4gICAgICB9KVxuICAgIH0pLCBuZXcgT2N0cmVlTm9kZSh7XG4gICAgICBhYWJiOiBuZXcgQUFCQih7XG4gICAgICAgIGxvd2VyQm91bmQ6IG5ldyBWZWMzKDAsIDAsIDEpXG4gICAgICB9KVxuICAgIH0pLCBuZXcgT2N0cmVlTm9kZSh7XG4gICAgICBhYWJiOiBuZXcgQUFCQih7XG4gICAgICAgIGxvd2VyQm91bmQ6IG5ldyBWZWMzKDEsIDAsIDEpXG4gICAgICB9KVxuICAgIH0pLCBuZXcgT2N0cmVlTm9kZSh7XG4gICAgICBhYWJiOiBuZXcgQUFCQih7XG4gICAgICAgIGxvd2VyQm91bmQ6IG5ldyBWZWMzKDAsIDEsIDApXG4gICAgICB9KVxuICAgIH0pKTtcbiAgICB1LnZzdWIobCwgaGFsZkRpYWdvbmFsKTtcbiAgICBoYWxmRGlhZ29uYWwuc2NhbGUoMC41LCBoYWxmRGlhZ29uYWwpO1xuICAgIGNvbnN0IHJvb3QgPSB0aGlzLnJvb3QgfHwgdGhpcztcblxuICAgIGZvciAobGV0IGkgPSAwOyBpICE9PSA4OyBpKyspIHtcbiAgICAgIGNvbnN0IGNoaWxkID0gY2hpbGRyZW5baV07IC8vIFNldCBjdXJyZW50IG5vZGUgYXMgcm9vdFxuXG4gICAgICBjaGlsZC5yb290ID0gcm9vdDsgLy8gQ29tcHV0ZSBib3VuZHNcblxuICAgICAgY29uc3QgbG93ZXJCb3VuZCA9IGNoaWxkLmFhYmIubG93ZXJCb3VuZDtcbiAgICAgIGxvd2VyQm91bmQueCAqPSBoYWxmRGlhZ29uYWwueDtcbiAgICAgIGxvd2VyQm91bmQueSAqPSBoYWxmRGlhZ29uYWwueTtcbiAgICAgIGxvd2VyQm91bmQueiAqPSBoYWxmRGlhZ29uYWwuejtcbiAgICAgIGxvd2VyQm91bmQudmFkZChsLCBsb3dlckJvdW5kKTsgLy8gVXBwZXIgYm91bmQgaXMgYWx3YXlzIGxvd2VyIGJvdW5kICsgaGFsZkRpYWdvbmFsXG5cbiAgICAgIGxvd2VyQm91bmQudmFkZChoYWxmRGlhZ29uYWwsIGNoaWxkLmFhYmIudXBwZXJCb3VuZCk7XG4gICAgfVxuICB9XG4gIC8qKlxuICAgKiBHZXQgYWxsIGRhdGEsIHBvdGVudGlhbGx5IHdpdGhpbiBhbiBBQUJCXG4gICAqIEByZXR1cm4gVGhlIFwicmVzdWx0XCIgb2JqZWN0XG4gICAqL1xuXG5cbiAgYWFiYlF1ZXJ5KGFhYmIsIHJlc3VsdCkge1xuICAgIHRoaXMuZGF0YTsgLy8gYWJvcnQgaWYgdGhlIHJhbmdlIGRvZXMgbm90IGludGVyc2VjdCB0aGlzIG5vZGVcbiAgICAvLyBpZiAoIXRoaXMuYWFiYi5vdmVybGFwcyhhYWJiKSl7XG4gICAgLy8gICAgIHJldHVybiByZXN1bHQ7XG4gICAgLy8gfVxuICAgIC8vIEFkZCBvYmplY3RzIGF0IHRoaXMgbGV2ZWxcbiAgICAvLyBBcnJheS5wcm90b3R5cGUucHVzaC5hcHBseShyZXN1bHQsIG5vZGVEYXRhKTtcbiAgICAvLyBBZGQgY2hpbGQgZGF0YVxuICAgIC8vIEB0b2RvIHVud3JhcCByZWN1cnNpb24gaW50byBhIHF1ZXVlIC8gbG9vcCwgdGhhdCdzIGZhc3RlciBpbiBKU1xuXG4gICAgdGhpcy5jaGlsZHJlbjsgLy8gZm9yIChsZXQgaSA9IDAsIE4gPSB0aGlzLmNoaWxkcmVuLmxlbmd0aDsgaSAhPT0gTjsgaSsrKSB7XG4gICAgLy8gICAgIGNoaWxkcmVuW2ldLmFhYmJRdWVyeShhYWJiLCByZXN1bHQpO1xuICAgIC8vIH1cblxuICAgIGNvbnN0IHF1ZXVlID0gW3RoaXNdO1xuXG4gICAgd2hpbGUgKHF1ZXVlLmxlbmd0aCkge1xuICAgICAgY29uc3Qgbm9kZSA9IHF1ZXVlLnBvcCgpO1xuXG4gICAgICBpZiAobm9kZS5hYWJiLm92ZXJsYXBzKGFhYmIpKSB7XG4gICAgICAgIEFycmF5LnByb3RvdHlwZS5wdXNoLmFwcGx5KHJlc3VsdCwgbm9kZS5kYXRhKTtcbiAgICAgIH1cblxuICAgICAgQXJyYXkucHJvdG90eXBlLnB1c2guYXBwbHkocXVldWUsIG5vZGUuY2hpbGRyZW4pO1xuICAgIH1cblxuICAgIHJldHVybiByZXN1bHQ7XG4gIH1cbiAgLyoqXG4gICAqIEdldCBhbGwgZGF0YSwgcG90ZW50aWFsbHkgaW50ZXJzZWN0ZWQgYnkgYSByYXkuXG4gICAqIEByZXR1cm4gVGhlIFwicmVzdWx0XCIgb2JqZWN0XG4gICAqL1xuXG5cbiAgcmF5UXVlcnkocmF5LCB0cmVlVHJhbnNmb3JtLCByZXN1bHQpIHtcbiAgICAvLyBVc2UgYWFiYiBxdWVyeSBmb3Igbm93LlxuXG4gICAgLyoqIEB0b2RvIGltcGxlbWVudCByZWFsIHJheSBxdWVyeSB3aGljaCBuZWVkcyBsZXNzIGxvb2t1cHMgKi9cbiAgICByYXkuZ2V0QUFCQih0bXBBQUJCKTtcbiAgICB0bXBBQUJCLnRvTG9jYWxGcmFtZSh0cmVlVHJhbnNmb3JtLCB0bXBBQUJCKTtcbiAgICB0aGlzLmFhYmJRdWVyeSh0bXBBQUJCLCByZXN1bHQpO1xuICAgIHJldHVybiByZXN1bHQ7XG4gIH1cbiAgLyoqXG4gICAqIHJlbW92ZUVtcHR5Tm9kZXNcbiAgICovXG5cblxuICByZW1vdmVFbXB0eU5vZGVzKCkge1xuICAgIGZvciAobGV0IGkgPSB0aGlzLmNoaWxkcmVuLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG4gICAgICB0aGlzLmNoaWxkcmVuW2ldLnJlbW92ZUVtcHR5Tm9kZXMoKTtcblxuICAgICAgaWYgKCF0aGlzLmNoaWxkcmVuW2ldLmNoaWxkcmVuLmxlbmd0aCAmJiAhdGhpcy5jaGlsZHJlbltpXS5kYXRhLmxlbmd0aCkge1xuICAgICAgICB0aGlzLmNoaWxkcmVuLnNwbGljZShpLCAxKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxufVxuLyoqXG4gKiBPY3RyZWVcbiAqL1xuXG5cbmNsYXNzIE9jdHJlZSBleHRlbmRzIE9jdHJlZU5vZGUge1xuICAvKipcbiAgICogTWF4aW11bSBzdWJkaXZpc2lvbiBkZXB0aFxuICAgKiBAZGVmYXVsdCA4XG4gICAqL1xuXG4gIC8qKlxuICAgKiBAcGFyYW0gYWFiYiBUaGUgdG90YWwgQUFCQiBvZiB0aGUgdHJlZVxuICAgKi9cbiAgY29uc3RydWN0b3IoYWFiYiwgb3B0aW9ucyA9IHt9KSB7XG4gICAgc3VwZXIoe1xuICAgICAgcm9vdDogbnVsbCxcbiAgICAgIGFhYmJcbiAgICB9KTtcbiAgICB0aGlzLm1heERlcHRoID0gdm9pZCAwO1xuICAgIHRoaXMubWF4RGVwdGggPSB0eXBlb2Ygb3B0aW9ucy5tYXhEZXB0aCAhPT0gJ3VuZGVmaW5lZCcgPyBvcHRpb25zLm1heERlcHRoIDogODtcbiAgfVxuXG59XG5jb25zdCBoYWxmRGlhZ29uYWwgPSBuZXcgVmVjMygpO1xuY29uc3QgdG1wQUFCQiA9IG5ldyBBQUJCKCk7XG5cbi8qKlxuICogVHJpbWVzaC5cbiAqIEBleGFtcGxlXG4gKiAgICAgLy8gSG93IHRvIG1ha2UgYSBtZXNoIHdpdGggYSBzaW5nbGUgdHJpYW5nbGVcbiAqICAgICBjb25zdCB2ZXJ0aWNlcyA9IFtcbiAqICAgICAgICAgMCwgMCwgMCwgLy8gdmVydGV4IDBcbiAqICAgICAgICAgMSwgMCwgMCwgLy8gdmVydGV4IDFcbiAqICAgICAgICAgMCwgMSwgMCAgLy8gdmVydGV4IDJcbiAqICAgICBdXG4gKiAgICAgY29uc3QgaW5kaWNlcyA9IFtcbiAqICAgICAgICAgMCwgMSwgMiAgLy8gdHJpYW5nbGUgMFxuICogICAgIF1cbiAqICAgICBjb25zdCB0cmltZXNoU2hhcGUgPSBuZXcgQ0FOTk9OLlRyaW1lc2godmVydGljZXMsIGluZGljZXMpXG4gKi9cbmNsYXNzIFRyaW1lc2ggZXh0ZW5kcyBTaGFwZSB7XG4gIC8qKlxuICAgKiB2ZXJ0aWNlc1xuICAgKi9cblxuICAvKipcbiAgICogQXJyYXkgb2YgaW50ZWdlcnMsIGluZGljYXRpbmcgd2hpY2ggdmVydGljZXMgZWFjaCB0cmlhbmdsZSBjb25zaXN0cyBvZi4gVGhlIGxlbmd0aCBvZiB0aGlzIGFycmF5IGlzIHRodXMgMyB0aW1lcyB0aGUgbnVtYmVyIG9mIHRyaWFuZ2xlcy5cbiAgICovXG5cbiAgLyoqXG4gICAqIFRoZSBub3JtYWxzIGRhdGEuXG4gICAqL1xuXG4gIC8qKlxuICAgKiBUaGUgbG9jYWwgQUFCQiBvZiB0aGUgbWVzaC5cbiAgICovXG5cbiAgLyoqXG4gICAqIFJlZmVyZW5jZXMgdG8gdmVydGV4IHBhaXJzLCBtYWtpbmcgdXAgYWxsIHVuaXF1ZSBlZGdlcyBpbiB0aGUgdHJpbWVzaC5cbiAgICovXG5cbiAgLyoqXG4gICAqIExvY2FsIHNjYWxpbmcgb2YgdGhlIG1lc2guIFVzZSAuc2V0U2NhbGUoKSB0byBzZXQgaXQuXG4gICAqL1xuXG4gIC8qKlxuICAgKiBUaGUgaW5kZXhlZCB0cmlhbmdsZXMuIFVzZSAudXBkYXRlVHJlZSgpIHRvIHVwZGF0ZSBpdC5cbiAgICovXG4gIGNvbnN0cnVjdG9yKHZlcnRpY2VzLCBpbmRpY2VzKSB7XG4gICAgc3VwZXIoe1xuICAgICAgdHlwZTogU2hhcGUudHlwZXMuVFJJTUVTSFxuICAgIH0pO1xuICAgIHRoaXMudmVydGljZXMgPSB2b2lkIDA7XG4gICAgdGhpcy5pbmRpY2VzID0gdm9pZCAwO1xuICAgIHRoaXMubm9ybWFscyA9IHZvaWQgMDtcbiAgICB0aGlzLmFhYmIgPSB2b2lkIDA7XG4gICAgdGhpcy5lZGdlcyA9IHZvaWQgMDtcbiAgICB0aGlzLnNjYWxlID0gdm9pZCAwO1xuICAgIHRoaXMudHJlZSA9IHZvaWQgMDtcbiAgICB0aGlzLnZlcnRpY2VzID0gbmV3IEZsb2F0MzJBcnJheSh2ZXJ0aWNlcyk7XG4gICAgdGhpcy5pbmRpY2VzID0gbmV3IEludDE2QXJyYXkoaW5kaWNlcyk7XG4gICAgdGhpcy5ub3JtYWxzID0gbmV3IEZsb2F0MzJBcnJheShpbmRpY2VzLmxlbmd0aCk7XG4gICAgdGhpcy5hYWJiID0gbmV3IEFBQkIoKTtcbiAgICB0aGlzLmVkZ2VzID0gbnVsbDtcbiAgICB0aGlzLnNjYWxlID0gbmV3IFZlYzMoMSwgMSwgMSk7XG4gICAgdGhpcy50cmVlID0gbmV3IE9jdHJlZSgpO1xuICAgIHRoaXMudXBkYXRlRWRnZXMoKTtcbiAgICB0aGlzLnVwZGF0ZU5vcm1hbHMoKTtcbiAgICB0aGlzLnVwZGF0ZUFBQkIoKTtcbiAgICB0aGlzLnVwZGF0ZUJvdW5kaW5nU3BoZXJlUmFkaXVzKCk7XG4gICAgdGhpcy51cGRhdGVUcmVlKCk7XG4gIH1cbiAgLyoqXG4gICAqIHVwZGF0ZVRyZWVcbiAgICovXG5cblxuICB1cGRhdGVUcmVlKCkge1xuICAgIGNvbnN0IHRyZWUgPSB0aGlzLnRyZWU7XG4gICAgdHJlZS5yZXNldCgpO1xuICAgIHRyZWUuYWFiYi5jb3B5KHRoaXMuYWFiYik7XG4gICAgY29uc3Qgc2NhbGUgPSB0aGlzLnNjYWxlOyAvLyBUaGUgbG9jYWwgbWVzaCBBQUJCIGlzIHNjYWxlZCwgYnV0IHRoZSBvY3RyZWUgQUFCQiBzaG91bGQgYmUgdW5zY2FsZWRcblxuICAgIHRyZWUuYWFiYi5sb3dlckJvdW5kLnggKj0gMSAvIHNjYWxlLng7XG4gICAgdHJlZS5hYWJiLmxvd2VyQm91bmQueSAqPSAxIC8gc2NhbGUueTtcbiAgICB0cmVlLmFhYmIubG93ZXJCb3VuZC56ICo9IDEgLyBzY2FsZS56O1xuICAgIHRyZWUuYWFiYi51cHBlckJvdW5kLnggKj0gMSAvIHNjYWxlLng7XG4gICAgdHJlZS5hYWJiLnVwcGVyQm91bmQueSAqPSAxIC8gc2NhbGUueTtcbiAgICB0cmVlLmFhYmIudXBwZXJCb3VuZC56ICo9IDEgLyBzY2FsZS56OyAvLyBJbnNlcnQgYWxsIHRyaWFuZ2xlc1xuXG4gICAgY29uc3QgdHJpYW5nbGVBQUJCID0gbmV3IEFBQkIoKTtcbiAgICBjb25zdCBhID0gbmV3IFZlYzMoKTtcbiAgICBjb25zdCBiID0gbmV3IFZlYzMoKTtcbiAgICBjb25zdCBjID0gbmV3IFZlYzMoKTtcbiAgICBjb25zdCBwb2ludHMgPSBbYSwgYiwgY107XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuaW5kaWNlcy5sZW5ndGggLyAzOyBpKyspIHtcbiAgICAgIC8vdGhpcy5nZXRUcmlhbmdsZVZlcnRpY2VzKGksIGEsIGIsIGMpO1xuICAgICAgLy8gR2V0IHVuc2NhbGVkIHRyaWFuZ2xlIHZlcnRzXG4gICAgICBjb25zdCBpMyA9IGkgKiAzO1xuXG4gICAgICB0aGlzLl9nZXRVbnNjYWxlZFZlcnRleCh0aGlzLmluZGljZXNbaTNdLCBhKTtcblxuICAgICAgdGhpcy5fZ2V0VW5zY2FsZWRWZXJ0ZXgodGhpcy5pbmRpY2VzW2kzICsgMV0sIGIpO1xuXG4gICAgICB0aGlzLl9nZXRVbnNjYWxlZFZlcnRleCh0aGlzLmluZGljZXNbaTMgKyAyXSwgYyk7XG5cbiAgICAgIHRyaWFuZ2xlQUFCQi5zZXRGcm9tUG9pbnRzKHBvaW50cyk7XG4gICAgICB0cmVlLmluc2VydCh0cmlhbmdsZUFBQkIsIGkpO1xuICAgIH1cblxuICAgIHRyZWUucmVtb3ZlRW1wdHlOb2RlcygpO1xuICB9XG4gIC8qKlxuICAgKiBHZXQgdHJpYW5nbGVzIGluIGEgbG9jYWwgQUFCQiBmcm9tIHRoZSB0cmltZXNoLlxuICAgKiBAcGFyYW0gcmVzdWx0IEFuIGFycmF5IG9mIGludGVnZXJzLCByZWZlcmVuY2luZyB0aGUgcXVlcmllZCB0cmlhbmdsZXMuXG4gICAqL1xuXG5cbiAgZ2V0VHJpYW5nbGVzSW5BQUJCKGFhYmIsIHJlc3VsdCkge1xuICAgIHVuc2NhbGVkQUFCQi5jb3B5KGFhYmIpOyAvLyBTY2FsZSBpdCB0byBsb2NhbFxuXG4gICAgY29uc3Qgc2NhbGUgPSB0aGlzLnNjYWxlO1xuICAgIGNvbnN0IGlzeCA9IHNjYWxlLng7XG4gICAgY29uc3QgaXN5ID0gc2NhbGUueTtcbiAgICBjb25zdCBpc3ogPSBzY2FsZS56O1xuICAgIGNvbnN0IGwgPSB1bnNjYWxlZEFBQkIubG93ZXJCb3VuZDtcbiAgICBjb25zdCB1ID0gdW5zY2FsZWRBQUJCLnVwcGVyQm91bmQ7XG4gICAgbC54IC89IGlzeDtcbiAgICBsLnkgLz0gaXN5O1xuICAgIGwueiAvPSBpc3o7XG4gICAgdS54IC89IGlzeDtcbiAgICB1LnkgLz0gaXN5O1xuICAgIHUueiAvPSBpc3o7XG4gICAgcmV0dXJuIHRoaXMudHJlZS5hYWJiUXVlcnkodW5zY2FsZWRBQUJCLCByZXN1bHQpO1xuICB9XG4gIC8qKlxuICAgKiBzZXRTY2FsZVxuICAgKi9cblxuXG4gIHNldFNjYWxlKHNjYWxlKSB7XG4gICAgY29uc3Qgd2FzVW5pZm9ybSA9IHRoaXMuc2NhbGUueCA9PT0gdGhpcy5zY2FsZS55ICYmIHRoaXMuc2NhbGUueSA9PT0gdGhpcy5zY2FsZS56O1xuICAgIGNvbnN0IGlzVW5pZm9ybSA9IHNjYWxlLnggPT09IHNjYWxlLnkgJiYgc2NhbGUueSA9PT0gc2NhbGUuejtcblxuICAgIGlmICghKHdhc1VuaWZvcm0gJiYgaXNVbmlmb3JtKSkge1xuICAgICAgLy8gTm9uLXVuaWZvcm0gc2NhbGluZy4gTmVlZCB0byB1cGRhdGUgbm9ybWFscy5cbiAgICAgIHRoaXMudXBkYXRlTm9ybWFscygpO1xuICAgIH1cblxuICAgIHRoaXMuc2NhbGUuY29weShzY2FsZSk7XG4gICAgdGhpcy51cGRhdGVBQUJCKCk7XG4gICAgdGhpcy51cGRhdGVCb3VuZGluZ1NwaGVyZVJhZGl1cygpO1xuICB9XG4gIC8qKlxuICAgKiBDb21wdXRlIHRoZSBub3JtYWxzIG9mIHRoZSBmYWNlcy4gV2lsbCBzYXZlIGluIHRoZSBgLm5vcm1hbHNgIGFycmF5LlxuICAgKi9cblxuXG4gIHVwZGF0ZU5vcm1hbHMoKSB7XG4gICAgY29uc3QgbiA9IGNvbXB1dGVOb3JtYWxzX247IC8vIEdlbmVyYXRlIG5vcm1hbHNcblxuICAgIGNvbnN0IG5vcm1hbHMgPSB0aGlzLm5vcm1hbHM7XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuaW5kaWNlcy5sZW5ndGggLyAzOyBpKyspIHtcbiAgICAgIGNvbnN0IGkzID0gaSAqIDM7XG4gICAgICBjb25zdCBhID0gdGhpcy5pbmRpY2VzW2kzXTtcbiAgICAgIGNvbnN0IGIgPSB0aGlzLmluZGljZXNbaTMgKyAxXTtcbiAgICAgIGNvbnN0IGMgPSB0aGlzLmluZGljZXNbaTMgKyAyXTtcbiAgICAgIHRoaXMuZ2V0VmVydGV4KGEsIHZhKTtcbiAgICAgIHRoaXMuZ2V0VmVydGV4KGIsIHZiKTtcbiAgICAgIHRoaXMuZ2V0VmVydGV4KGMsIHZjKTtcbiAgICAgIFRyaW1lc2guY29tcHV0ZU5vcm1hbCh2YiwgdmEsIHZjLCBuKTtcbiAgICAgIG5vcm1hbHNbaTNdID0gbi54O1xuICAgICAgbm9ybWFsc1tpMyArIDFdID0gbi55O1xuICAgICAgbm9ybWFsc1tpMyArIDJdID0gbi56O1xuICAgIH1cbiAgfVxuICAvKipcbiAgICogVXBkYXRlIHRoZSBgLmVkZ2VzYCBwcm9wZXJ0eVxuICAgKi9cblxuXG4gIHVwZGF0ZUVkZ2VzKCkge1xuICAgIGNvbnN0IGVkZ2VzID0ge307XG5cbiAgICBjb25zdCBhZGQgPSAoYSwgYikgPT4ge1xuICAgICAgY29uc3Qga2V5ID0gYSA8IGIgPyBhICsgXCJfXCIgKyBiIDogYiArIFwiX1wiICsgYTtcbiAgICAgIGVkZ2VzW2tleV0gPSB0cnVlO1xuICAgIH07XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuaW5kaWNlcy5sZW5ndGggLyAzOyBpKyspIHtcbiAgICAgIGNvbnN0IGkzID0gaSAqIDM7XG4gICAgICBjb25zdCBhID0gdGhpcy5pbmRpY2VzW2kzXTtcbiAgICAgIGNvbnN0IGIgPSB0aGlzLmluZGljZXNbaTMgKyAxXTtcbiAgICAgIGNvbnN0IGMgPSB0aGlzLmluZGljZXNbaTMgKyAyXTtcbiAgICAgIGFkZChhLCBiKTtcbiAgICAgIGFkZChiLCBjKTtcbiAgICAgIGFkZChjLCBhKTtcbiAgICB9XG5cbiAgICBjb25zdCBrZXlzID0gT2JqZWN0LmtleXMoZWRnZXMpO1xuICAgIHRoaXMuZWRnZXMgPSBuZXcgSW50MTZBcnJheShrZXlzLmxlbmd0aCAqIDIpO1xuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBrZXlzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBjb25zdCBpbmRpY2VzID0ga2V5c1tpXS5zcGxpdCgnXycpO1xuICAgICAgdGhpcy5lZGdlc1syICogaV0gPSBwYXJzZUludChpbmRpY2VzWzBdLCAxMCk7XG4gICAgICB0aGlzLmVkZ2VzWzIgKiBpICsgMV0gPSBwYXJzZUludChpbmRpY2VzWzFdLCAxMCk7XG4gICAgfVxuICB9XG4gIC8qKlxuICAgKiBHZXQgYW4gZWRnZSB2ZXJ0ZXhcbiAgICogQHBhcmFtIGZpcnN0T3JTZWNvbmQgMCBvciAxLCBkZXBlbmRpbmcgb24gd2hpY2ggb25lIG9mIHRoZSB2ZXJ0aWNlcyB5b3UgbmVlZC5cbiAgICogQHBhcmFtIHZlcnRleFN0b3JlIFdoZXJlIHRvIHN0b3JlIHRoZSByZXN1bHRcbiAgICovXG5cblxuICBnZXRFZGdlVmVydGV4KGVkZ2VJbmRleCwgZmlyc3RPclNlY29uZCwgdmVydGV4U3RvcmUpIHtcbiAgICBjb25zdCB2ZXJ0ZXhJbmRleCA9IHRoaXMuZWRnZXNbZWRnZUluZGV4ICogMiArIChmaXJzdE9yU2Vjb25kID8gMSA6IDApXTtcbiAgICB0aGlzLmdldFZlcnRleCh2ZXJ0ZXhJbmRleCwgdmVydGV4U3RvcmUpO1xuICB9XG4gIC8qKlxuICAgKiBHZXQgYSB2ZWN0b3IgYWxvbmcgYW4gZWRnZS5cbiAgICovXG5cblxuICBnZXRFZGdlVmVjdG9yKGVkZ2VJbmRleCwgdmVjdG9yU3RvcmUpIHtcbiAgICBjb25zdCB2YSA9IGdldEVkZ2VWZWN0b3JfdmE7XG4gICAgY29uc3QgdmIgPSBnZXRFZGdlVmVjdG9yX3ZiO1xuICAgIHRoaXMuZ2V0RWRnZVZlcnRleChlZGdlSW5kZXgsIDAsIHZhKTtcbiAgICB0aGlzLmdldEVkZ2VWZXJ0ZXgoZWRnZUluZGV4LCAxLCB2Yik7XG4gICAgdmIudnN1Yih2YSwgdmVjdG9yU3RvcmUpO1xuICB9XG4gIC8qKlxuICAgKiBHZXQgZmFjZSBub3JtYWwgZ2l2ZW4gMyB2ZXJ0aWNlc1xuICAgKi9cblxuXG4gIHN0YXRpYyBjb21wdXRlTm9ybWFsKHZhLCB2YiwgdmMsIHRhcmdldCkge1xuICAgIHZiLnZzdWIodmEsIGFiKTtcbiAgICB2Yy52c3ViKHZiLCBjYik7XG4gICAgY2IuY3Jvc3MoYWIsIHRhcmdldCk7XG5cbiAgICBpZiAoIXRhcmdldC5pc1plcm8oKSkge1xuICAgICAgdGFyZ2V0Lm5vcm1hbGl6ZSgpO1xuICAgIH1cbiAgfVxuICAvKipcbiAgICogR2V0IHZlcnRleCBpLlxuICAgKiBAcmV0dXJuIFRoZSBcIm91dFwiIHZlY3RvciBvYmplY3RcbiAgICovXG5cblxuICBnZXRWZXJ0ZXgoaSwgb3V0KSB7XG4gICAgY29uc3Qgc2NhbGUgPSB0aGlzLnNjYWxlO1xuXG4gICAgdGhpcy5fZ2V0VW5zY2FsZWRWZXJ0ZXgoaSwgb3V0KTtcblxuICAgIG91dC54ICo9IHNjYWxlLng7XG4gICAgb3V0LnkgKj0gc2NhbGUueTtcbiAgICBvdXQueiAqPSBzY2FsZS56O1xuICAgIHJldHVybiBvdXQ7XG4gIH1cbiAgLyoqXG4gICAqIEdldCByYXcgdmVydGV4IGlcbiAgICogQHJldHVybiBUaGUgXCJvdXRcIiB2ZWN0b3Igb2JqZWN0XG4gICAqL1xuXG5cbiAgX2dldFVuc2NhbGVkVmVydGV4KGksIG91dCkge1xuICAgIGNvbnN0IGkzID0gaSAqIDM7XG4gICAgY29uc3QgdmVydGljZXMgPSB0aGlzLnZlcnRpY2VzO1xuICAgIHJldHVybiBvdXQuc2V0KHZlcnRpY2VzW2kzXSwgdmVydGljZXNbaTMgKyAxXSwgdmVydGljZXNbaTMgKyAyXSk7XG4gIH1cbiAgLyoqXG4gICAqIEdldCBhIHZlcnRleCBmcm9tIHRoZSB0cmltZXNoLHRyYW5zZm9ybWVkIGJ5IHRoZSBnaXZlbiBwb3NpdGlvbiBhbmQgcXVhdGVybmlvbi5cbiAgICogQHJldHVybiBUaGUgXCJvdXRcIiB2ZWN0b3Igb2JqZWN0XG4gICAqL1xuXG5cbiAgZ2V0V29ybGRWZXJ0ZXgoaSwgcG9zLCBxdWF0LCBvdXQpIHtcbiAgICB0aGlzLmdldFZlcnRleChpLCBvdXQpO1xuICAgIFRyYW5zZm9ybS5wb2ludFRvV29ybGRGcmFtZShwb3MsIHF1YXQsIG91dCwgb3V0KTtcbiAgICByZXR1cm4gb3V0O1xuICB9XG4gIC8qKlxuICAgKiBHZXQgdGhlIHRocmVlIHZlcnRpY2VzIGZvciB0cmlhbmdsZSBpLlxuICAgKi9cblxuXG4gIGdldFRyaWFuZ2xlVmVydGljZXMoaSwgYSwgYiwgYykge1xuICAgIGNvbnN0IGkzID0gaSAqIDM7XG4gICAgdGhpcy5nZXRWZXJ0ZXgodGhpcy5pbmRpY2VzW2kzXSwgYSk7XG4gICAgdGhpcy5nZXRWZXJ0ZXgodGhpcy5pbmRpY2VzW2kzICsgMV0sIGIpO1xuICAgIHRoaXMuZ2V0VmVydGV4KHRoaXMuaW5kaWNlc1tpMyArIDJdLCBjKTtcbiAgfVxuICAvKipcbiAgICogQ29tcHV0ZSB0aGUgbm9ybWFsIG9mIHRyaWFuZ2xlIGkuXG4gICAqIEByZXR1cm4gVGhlIFwidGFyZ2V0XCIgdmVjdG9yIG9iamVjdFxuICAgKi9cblxuXG4gIGdldE5vcm1hbChpLCB0YXJnZXQpIHtcbiAgICBjb25zdCBpMyA9IGkgKiAzO1xuICAgIHJldHVybiB0YXJnZXQuc2V0KHRoaXMubm9ybWFsc1tpM10sIHRoaXMubm9ybWFsc1tpMyArIDFdLCB0aGlzLm5vcm1hbHNbaTMgKyAyXSk7XG4gIH1cbiAgLyoqXG4gICAqIEByZXR1cm4gVGhlIFwidGFyZ2V0XCIgdmVjdG9yIG9iamVjdFxuICAgKi9cblxuXG4gIGNhbGN1bGF0ZUxvY2FsSW5lcnRpYShtYXNzLCB0YXJnZXQpIHtcbiAgICAvLyBBcHByb3hpbWF0ZSB3aXRoIGJveCBpbmVydGlhXG4gICAgLy8gRXhhY3QgaW5lcnRpYSBjYWxjdWxhdGlvbiBpcyBvdmVya2lsbCwgYnV0IHNlZSBodHRwOi8vZ2VvbWV0cmljdG9vbHMuY29tL0RvY3VtZW50YXRpb24vUG9seWhlZHJhbE1hc3NQcm9wZXJ0aWVzLnBkZiBmb3IgdGhlIGNvcnJlY3Qgd2F5IHRvIGRvIGl0XG4gICAgdGhpcy5jb21wdXRlTG9jYWxBQUJCKGNsaV9hYWJiKTtcbiAgICBjb25zdCB4ID0gY2xpX2FhYmIudXBwZXJCb3VuZC54IC0gY2xpX2FhYmIubG93ZXJCb3VuZC54O1xuICAgIGNvbnN0IHkgPSBjbGlfYWFiYi51cHBlckJvdW5kLnkgLSBjbGlfYWFiYi5sb3dlckJvdW5kLnk7XG4gICAgY29uc3QgeiA9IGNsaV9hYWJiLnVwcGVyQm91bmQueiAtIGNsaV9hYWJiLmxvd2VyQm91bmQuejtcbiAgICByZXR1cm4gdGFyZ2V0LnNldCgxLjAgLyAxMi4wICogbWFzcyAqICgyICogeSAqIDIgKiB5ICsgMiAqIHogKiAyICogeiksIDEuMCAvIDEyLjAgKiBtYXNzICogKDIgKiB4ICogMiAqIHggKyAyICogeiAqIDIgKiB6KSwgMS4wIC8gMTIuMCAqIG1hc3MgKiAoMiAqIHkgKiAyICogeSArIDIgKiB4ICogMiAqIHgpKTtcbiAgfVxuICAvKipcbiAgICogQ29tcHV0ZSB0aGUgbG9jYWwgQUFCQiBmb3IgdGhlIHRyaW1lc2hcbiAgICovXG5cblxuICBjb21wdXRlTG9jYWxBQUJCKGFhYmIpIHtcbiAgICBjb25zdCBsID0gYWFiYi5sb3dlckJvdW5kO1xuICAgIGNvbnN0IHUgPSBhYWJiLnVwcGVyQm91bmQ7XG4gICAgY29uc3QgbiA9IHRoaXMudmVydGljZXMubGVuZ3RoO1xuICAgIHRoaXMudmVydGljZXM7XG4gICAgY29uc3QgdiA9IGNvbXB1dGVMb2NhbEFBQkJfd29ybGRWZXJ0O1xuICAgIHRoaXMuZ2V0VmVydGV4KDAsIHYpO1xuICAgIGwuY29weSh2KTtcbiAgICB1LmNvcHkodik7XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSAhPT0gbjsgaSsrKSB7XG4gICAgICB0aGlzLmdldFZlcnRleChpLCB2KTtcblxuICAgICAgaWYgKHYueCA8IGwueCkge1xuICAgICAgICBsLnggPSB2Lng7XG4gICAgICB9IGVsc2UgaWYgKHYueCA+IHUueCkge1xuICAgICAgICB1LnggPSB2Lng7XG4gICAgICB9XG5cbiAgICAgIGlmICh2LnkgPCBsLnkpIHtcbiAgICAgICAgbC55ID0gdi55O1xuICAgICAgfSBlbHNlIGlmICh2LnkgPiB1LnkpIHtcbiAgICAgICAgdS55ID0gdi55O1xuICAgICAgfVxuXG4gICAgICBpZiAodi56IDwgbC56KSB7XG4gICAgICAgIGwueiA9IHYuejtcbiAgICAgIH0gZWxzZSBpZiAodi56ID4gdS56KSB7XG4gICAgICAgIHUueiA9IHYuejtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgLyoqXG4gICAqIFVwZGF0ZSB0aGUgYC5hYWJiYCBwcm9wZXJ0eVxuICAgKi9cblxuXG4gIHVwZGF0ZUFBQkIoKSB7XG4gICAgdGhpcy5jb21wdXRlTG9jYWxBQUJCKHRoaXMuYWFiYik7XG4gIH1cbiAgLyoqXG4gICAqIFdpbGwgdXBkYXRlIHRoZSBgLmJvdW5kaW5nU3BoZXJlUmFkaXVzYCBwcm9wZXJ0eVxuICAgKi9cblxuXG4gIHVwZGF0ZUJvdW5kaW5nU3BoZXJlUmFkaXVzKCkge1xuICAgIC8vIEFzc3VtZSBwb2ludHMgYXJlIGRpc3RyaWJ1dGVkIHdpdGggbG9jYWwgKDAsMCwwKSBhcyBjZW50ZXJcbiAgICBsZXQgbWF4MiA9IDA7XG4gICAgY29uc3QgdmVydGljZXMgPSB0aGlzLnZlcnRpY2VzO1xuICAgIGNvbnN0IHYgPSBuZXcgVmVjMygpO1xuXG4gICAgZm9yIChsZXQgaSA9IDAsIE4gPSB2ZXJ0aWNlcy5sZW5ndGggLyAzOyBpICE9PSBOOyBpKyspIHtcbiAgICAgIHRoaXMuZ2V0VmVydGV4KGksIHYpO1xuICAgICAgY29uc3Qgbm9ybTIgPSB2Lmxlbmd0aFNxdWFyZWQoKTtcblxuICAgICAgaWYgKG5vcm0yID4gbWF4Mikge1xuICAgICAgICBtYXgyID0gbm9ybTI7XG4gICAgICB9XG4gICAgfVxuXG4gICAgdGhpcy5ib3VuZGluZ1NwaGVyZVJhZGl1cyA9IE1hdGguc3FydChtYXgyKTtcbiAgfVxuICAvKipcbiAgICogY2FsY3VsYXRlV29ybGRBQUJCXG4gICAqL1xuXG5cbiAgY2FsY3VsYXRlV29ybGRBQUJCKHBvcywgcXVhdCwgbWluLCBtYXgpIHtcbiAgICAvKlxuICAgICAgICBjb25zdCBuID0gdGhpcy52ZXJ0aWNlcy5sZW5ndGggLyAzLFxuICAgICAgICAgICAgdmVydHMgPSB0aGlzLnZlcnRpY2VzO1xuICAgICAgICBjb25zdCBtaW54LG1pbnksbWlueixtYXh4LG1heHksbWF4ejtcbiAgICAgICAgIGNvbnN0IHYgPSB0ZW1wV29ybGRWZXJ0ZXg7XG4gICAgICAgIGZvcihsZXQgaT0wOyBpPG47IGkrKyl7XG4gICAgICAgICAgICB0aGlzLmdldFZlcnRleChpLCB2KTtcbiAgICAgICAgICAgIHF1YXQudm11bHQodiwgdik7XG4gICAgICAgICAgICBwb3MudmFkZCh2LCB2KTtcbiAgICAgICAgICAgIGlmICh2LnggPCBtaW54IHx8IG1pbng9PT11bmRlZmluZWQpe1xuICAgICAgICAgICAgICAgIG1pbnggPSB2Lng7XG4gICAgICAgICAgICB9IGVsc2UgaWYodi54ID4gbWF4eCB8fCBtYXh4PT09dW5kZWZpbmVkKXtcbiAgICAgICAgICAgICAgICBtYXh4ID0gdi54O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgIGlmICh2LnkgPCBtaW55IHx8IG1pbnk9PT11bmRlZmluZWQpe1xuICAgICAgICAgICAgICAgIG1pbnkgPSB2Lnk7XG4gICAgICAgICAgICB9IGVsc2UgaWYodi55ID4gbWF4eSB8fCBtYXh5PT09dW5kZWZpbmVkKXtcbiAgICAgICAgICAgICAgICBtYXh5ID0gdi55O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgIGlmICh2LnogPCBtaW56IHx8IG1pbno9PT11bmRlZmluZWQpe1xuICAgICAgICAgICAgICAgIG1pbnogPSB2Lno7XG4gICAgICAgICAgICB9IGVsc2UgaWYodi56ID4gbWF4eiB8fCBtYXh6PT09dW5kZWZpbmVkKXtcbiAgICAgICAgICAgICAgICBtYXh6ID0gdi56O1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIG1pbi5zZXQobWlueCxtaW55LG1pbnopO1xuICAgICAgICBtYXguc2V0KG1heHgsbWF4eSxtYXh6KTtcbiAgICAgICAgKi9cbiAgICAvLyBGYXN0ZXIgYXBwcm94aW1hdGlvbiB1c2luZyBsb2NhbCBBQUJCXG4gICAgY29uc3QgZnJhbWUgPSBjYWxjdWxhdGVXb3JsZEFBQkJfZnJhbWU7XG4gICAgY29uc3QgcmVzdWx0ID0gY2FsY3VsYXRlV29ybGRBQUJCX2FhYmI7XG4gICAgZnJhbWUucG9zaXRpb24gPSBwb3M7XG4gICAgZnJhbWUucXVhdGVybmlvbiA9IHF1YXQ7XG4gICAgdGhpcy5hYWJiLnRvV29ybGRGcmFtZShmcmFtZSwgcmVzdWx0KTtcbiAgICBtaW4uY29weShyZXN1bHQubG93ZXJCb3VuZCk7XG4gICAgbWF4LmNvcHkocmVzdWx0LnVwcGVyQm91bmQpO1xuICB9XG4gIC8qKlxuICAgKiBHZXQgYXBwcm94aW1hdGUgdm9sdW1lXG4gICAqL1xuXG5cbiAgdm9sdW1lKCkge1xuICAgIHJldHVybiA0LjAgKiBNYXRoLlBJICogdGhpcy5ib3VuZGluZ1NwaGVyZVJhZGl1cyAvIDMuMDtcbiAgfVxuICAvKipcbiAgICogQ3JlYXRlIGEgVHJpbWVzaCBpbnN0YW5jZSwgc2hhcGVkIGFzIGEgdG9ydXMuXG4gICAqL1xuXG5cbiAgc3RhdGljIGNyZWF0ZVRvcnVzKHJhZGl1cyA9IDEsIHR1YmUgPSAwLjUsIHJhZGlhbFNlZ21lbnRzID0gOCwgdHVidWxhclNlZ21lbnRzID0gNiwgYXJjID0gTWF0aC5QSSAqIDIpIHtcbiAgICBjb25zdCB2ZXJ0aWNlcyA9IFtdO1xuICAgIGNvbnN0IGluZGljZXMgPSBbXTtcblxuICAgIGZvciAobGV0IGogPSAwOyBqIDw9IHJhZGlhbFNlZ21lbnRzOyBqKyspIHtcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDw9IHR1YnVsYXJTZWdtZW50czsgaSsrKSB7XG4gICAgICAgIGNvbnN0IHUgPSBpIC8gdHVidWxhclNlZ21lbnRzICogYXJjO1xuICAgICAgICBjb25zdCB2ID0gaiAvIHJhZGlhbFNlZ21lbnRzICogTWF0aC5QSSAqIDI7XG4gICAgICAgIGNvbnN0IHggPSAocmFkaXVzICsgdHViZSAqIE1hdGguY29zKHYpKSAqIE1hdGguY29zKHUpO1xuICAgICAgICBjb25zdCB5ID0gKHJhZGl1cyArIHR1YmUgKiBNYXRoLmNvcyh2KSkgKiBNYXRoLnNpbih1KTtcbiAgICAgICAgY29uc3QgeiA9IHR1YmUgKiBNYXRoLnNpbih2KTtcbiAgICAgICAgdmVydGljZXMucHVzaCh4LCB5LCB6KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBmb3IgKGxldCBqID0gMTsgaiA8PSByYWRpYWxTZWdtZW50czsgaisrKSB7XG4gICAgICBmb3IgKGxldCBpID0gMTsgaSA8PSB0dWJ1bGFyU2VnbWVudHM7IGkrKykge1xuICAgICAgICBjb25zdCBhID0gKHR1YnVsYXJTZWdtZW50cyArIDEpICogaiArIGkgLSAxO1xuICAgICAgICBjb25zdCBiID0gKHR1YnVsYXJTZWdtZW50cyArIDEpICogKGogLSAxKSArIGkgLSAxO1xuICAgICAgICBjb25zdCBjID0gKHR1YnVsYXJTZWdtZW50cyArIDEpICogKGogLSAxKSArIGk7XG4gICAgICAgIGNvbnN0IGQgPSAodHVidWxhclNlZ21lbnRzICsgMSkgKiBqICsgaTtcbiAgICAgICAgaW5kaWNlcy5wdXNoKGEsIGIsIGQpO1xuICAgICAgICBpbmRpY2VzLnB1c2goYiwgYywgZCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIG5ldyBUcmltZXNoKHZlcnRpY2VzLCBpbmRpY2VzKTtcbiAgfVxuXG59XG5jb25zdCBjb21wdXRlTm9ybWFsc19uID0gbmV3IFZlYzMoKTtcbmNvbnN0IHVuc2NhbGVkQUFCQiA9IG5ldyBBQUJCKCk7XG5jb25zdCBnZXRFZGdlVmVjdG9yX3ZhID0gbmV3IFZlYzMoKTtcbmNvbnN0IGdldEVkZ2VWZWN0b3JfdmIgPSBuZXcgVmVjMygpO1xuY29uc3QgY2IgPSBuZXcgVmVjMygpO1xuY29uc3QgYWIgPSBuZXcgVmVjMygpO1xuY29uc3QgdmEgPSBuZXcgVmVjMygpO1xuY29uc3QgdmIgPSBuZXcgVmVjMygpO1xuY29uc3QgdmMgPSBuZXcgVmVjMygpO1xuY29uc3QgY2xpX2FhYmIgPSBuZXcgQUFCQigpO1xuY29uc3QgY29tcHV0ZUxvY2FsQUFCQl93b3JsZFZlcnQgPSBuZXcgVmVjMygpO1xuY29uc3QgY2FsY3VsYXRlV29ybGRBQUJCX2ZyYW1lID0gbmV3IFRyYW5zZm9ybSgpO1xuY29uc3QgY2FsY3VsYXRlV29ybGRBQUJCX2FhYmIgPSBuZXcgQUFCQigpO1xuXG4vKipcbiAqIENvbnN0cmFpbnQgZXF1YXRpb24gc29sdmVyIGJhc2UgY2xhc3MuXG4gKi9cbmNsYXNzIFNvbHZlciB7XG4gIC8qKlxuICAgKiBBbGwgZXF1YXRpb25zIHRvIGJlIHNvbHZlZFxuICAgKi9cblxuICAvKipcbiAgICogQHRvZG8gcmVtb3ZlIHVzZWxlc3MgY29uc3RydWN0b3JcbiAgICovXG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHRoaXMuZXF1YXRpb25zID0gdm9pZCAwO1xuICAgIHRoaXMuZXF1YXRpb25zID0gW107XG4gIH1cbiAgLyoqXG4gICAqIFNob3VsZCBiZSBpbXBsZW1lbnRlZCBpbiBzdWJjbGFzc2VzIVxuICAgKiBAdG9kbyB1c2UgYWJzdHJhY3RcbiAgICogQHJldHVybiBudW1iZXIgb2YgaXRlcmF0aW9ucyBwZXJmb3JtZWRcbiAgICovXG5cblxuICBzb2x2ZShkdCwgd29ybGQpIHtcbiAgICByZXR1cm4gKC8vIFNob3VsZCByZXR1cm4gdGhlIG51bWJlciBvZiBpdGVyYXRpb25zIGRvbmUhXG4gICAgICAwXG4gICAgKTtcbiAgfVxuICAvKipcbiAgICogQWRkIGFuIGVxdWF0aW9uXG4gICAqL1xuXG5cbiAgYWRkRXF1YXRpb24oZXEpIHtcbiAgICBpZiAoZXEuZW5hYmxlZCAmJiAhZXEuYmkuaXNUcmlnZ2VyICYmICFlcS5iai5pc1RyaWdnZXIpIHtcbiAgICAgIHRoaXMuZXF1YXRpb25zLnB1c2goZXEpO1xuICAgIH1cbiAgfVxuICAvKipcbiAgICogUmVtb3ZlIGFuIGVxdWF0aW9uXG4gICAqL1xuXG5cbiAgcmVtb3ZlRXF1YXRpb24oZXEpIHtcbiAgICBjb25zdCBlcXMgPSB0aGlzLmVxdWF0aW9ucztcbiAgICBjb25zdCBpID0gZXFzLmluZGV4T2YoZXEpO1xuXG4gICAgaWYgKGkgIT09IC0xKSB7XG4gICAgICBlcXMuc3BsaWNlKGksIDEpO1xuICAgIH1cbiAgfVxuICAvKipcbiAgICogQWRkIGFsbCBlcXVhdGlvbnNcbiAgICovXG5cblxuICByZW1vdmVBbGxFcXVhdGlvbnMoKSB7XG4gICAgdGhpcy5lcXVhdGlvbnMubGVuZ3RoID0gMDtcbiAgfVxuXG59XG5cbi8qKlxuICogQ29uc3RyYWludCBlcXVhdGlvbiBHYXVzcy1TZWlkZWwgc29sdmVyLlxuICogQHRvZG8gVGhlIHNwb29rIHBhcmFtZXRlcnMgc2hvdWxkIGJlIHNwZWNpZmllZCBmb3IgZWFjaCBjb25zdHJhaW50LCBub3QgZ2xvYmFsbHkuXG4gKiBAc2VlIGh0dHBzOi8vd3d3OC5jcy51bXUuc2Uva3Vyc2VyLzVEVjA1OC9WVDA5L2xlY3R1cmVzL3Nwb29rbm90ZXMucGRmXG4gKi9cbmNsYXNzIEdTU29sdmVyIGV4dGVuZHMgU29sdmVyIHtcbiAgLyoqXG4gICAqIFRoZSBudW1iZXIgb2Ygc29sdmVyIGl0ZXJhdGlvbnMgZGV0ZXJtaW5lcyBxdWFsaXR5IG9mIHRoZSBjb25zdHJhaW50cyBpbiB0aGUgd29ybGQuXG4gICAqIFRoZSBtb3JlIGl0ZXJhdGlvbnMsIHRoZSBtb3JlIGNvcnJlY3Qgc2ltdWxhdGlvbi4gTW9yZSBpdGVyYXRpb25zIG5lZWQgbW9yZSBjb21wdXRhdGlvbnMgdGhvdWdoLiBJZiB5b3UgaGF2ZSBhIGxhcmdlIGdyYXZpdHkgZm9yY2UgaW4geW91ciB3b3JsZCwgeW91IHdpbGwgbmVlZCBtb3JlIGl0ZXJhdGlvbnMuXG4gICAqL1xuXG4gIC8qKlxuICAgKiBXaGVuIHRvbGVyYW5jZSBpcyByZWFjaGVkLCB0aGUgc3lzdGVtIGlzIGFzc3VtZWQgdG8gYmUgY29udmVyZ2VkLlxuICAgKi9cblxuICAvKipcbiAgICogQHRvZG8gcmVtb3ZlIHVzZWxlc3MgY29uc3RydWN0b3JcbiAgICovXG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHN1cGVyKCk7XG4gICAgdGhpcy5pdGVyYXRpb25zID0gdm9pZCAwO1xuICAgIHRoaXMudG9sZXJhbmNlID0gdm9pZCAwO1xuICAgIHRoaXMuaXRlcmF0aW9ucyA9IDEwO1xuICAgIHRoaXMudG9sZXJhbmNlID0gMWUtNztcbiAgfVxuICAvKipcbiAgICogU29sdmVcbiAgICogQHJldHVybiBudW1iZXIgb2YgaXRlcmF0aW9ucyBwZXJmb3JtZWRcbiAgICovXG5cblxuICBzb2x2ZShkdCwgd29ybGQpIHtcbiAgICBsZXQgaXRlciA9IDA7XG4gICAgY29uc3QgbWF4SXRlciA9IHRoaXMuaXRlcmF0aW9ucztcbiAgICBjb25zdCB0b2xTcXVhcmVkID0gdGhpcy50b2xlcmFuY2UgKiB0aGlzLnRvbGVyYW5jZTtcbiAgICBjb25zdCBlcXVhdGlvbnMgPSB0aGlzLmVxdWF0aW9ucztcbiAgICBjb25zdCBOZXEgPSBlcXVhdGlvbnMubGVuZ3RoO1xuICAgIGNvbnN0IGJvZGllcyA9IHdvcmxkLmJvZGllcztcbiAgICBjb25zdCBOYm9kaWVzID0gYm9kaWVzLmxlbmd0aDtcbiAgICBjb25zdCBoID0gZHQ7XG4gICAgbGV0IEI7XG4gICAgbGV0IGludkM7XG4gICAgbGV0IGRlbHRhbGFtYmRhO1xuICAgIGxldCBkZWx0YWxhbWJkYVRvdDtcbiAgICBsZXQgR1dsYW1iZGE7XG4gICAgbGV0IGxhbWJkYWo7IC8vIFVwZGF0ZSBzb2x2ZSBtYXNzXG5cbiAgICBpZiAoTmVxICE9PSAwKSB7XG4gICAgICBmb3IgKGxldCBpID0gMDsgaSAhPT0gTmJvZGllczsgaSsrKSB7XG4gICAgICAgIGJvZGllc1tpXS51cGRhdGVTb2x2ZU1hc3NQcm9wZXJ0aWVzKCk7XG4gICAgICB9XG4gICAgfSAvLyBUaGluZ3MgdGhhdCBkbyBub3QgY2hhbmdlIGR1cmluZyBpdGVyYXRpb24gY2FuIGJlIGNvbXB1dGVkIG9uY2VcblxuXG4gICAgY29uc3QgaW52Q3MgPSBHU1NvbHZlcl9zb2x2ZV9pbnZDcztcbiAgICBjb25zdCBCcyA9IEdTU29sdmVyX3NvbHZlX0JzO1xuICAgIGNvbnN0IGxhbWJkYSA9IEdTU29sdmVyX3NvbHZlX2xhbWJkYTtcbiAgICBpbnZDcy5sZW5ndGggPSBOZXE7XG4gICAgQnMubGVuZ3RoID0gTmVxO1xuICAgIGxhbWJkYS5sZW5ndGggPSBOZXE7XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSAhPT0gTmVxOyBpKyspIHtcbiAgICAgIGNvbnN0IGMgPSBlcXVhdGlvbnNbaV07XG4gICAgICBsYW1iZGFbaV0gPSAwLjA7XG4gICAgICBCc1tpXSA9IGMuY29tcHV0ZUIoaCk7XG4gICAgICBpbnZDc1tpXSA9IDEuMCAvIGMuY29tcHV0ZUMoKTtcbiAgICB9XG5cbiAgICBpZiAoTmVxICE9PSAwKSB7XG4gICAgICAvLyBSZXNldCB2bGFtYmRhXG4gICAgICBmb3IgKGxldCBpID0gMDsgaSAhPT0gTmJvZGllczsgaSsrKSB7XG4gICAgICAgIGNvbnN0IGIgPSBib2RpZXNbaV07XG4gICAgICAgIGNvbnN0IHZsYW1iZGEgPSBiLnZsYW1iZGE7XG4gICAgICAgIGNvbnN0IHdsYW1iZGEgPSBiLndsYW1iZGE7XG4gICAgICAgIHZsYW1iZGEuc2V0KDAsIDAsIDApO1xuICAgICAgICB3bGFtYmRhLnNldCgwLCAwLCAwKTtcbiAgICAgIH0gLy8gSXRlcmF0ZSBvdmVyIGVxdWF0aW9uc1xuXG5cbiAgICAgIGZvciAoaXRlciA9IDA7IGl0ZXIgIT09IG1heEl0ZXI7IGl0ZXIrKykge1xuICAgICAgICAvLyBBY2N1bXVsYXRlIHRoZSB0b3RhbCBlcnJvciBmb3IgZWFjaCBpdGVyYXRpb24uXG4gICAgICAgIGRlbHRhbGFtYmRhVG90ID0gMC4wO1xuXG4gICAgICAgIGZvciAobGV0IGogPSAwOyBqICE9PSBOZXE7IGorKykge1xuICAgICAgICAgIGNvbnN0IGMgPSBlcXVhdGlvbnNbal07IC8vIENvbXB1dGUgaXRlcmF0aW9uXG5cbiAgICAgICAgICBCID0gQnNbal07XG4gICAgICAgICAgaW52QyA9IGludkNzW2pdO1xuICAgICAgICAgIGxhbWJkYWogPSBsYW1iZGFbal07XG4gICAgICAgICAgR1dsYW1iZGEgPSBjLmNvbXB1dGVHV2xhbWJkYSgpO1xuICAgICAgICAgIGRlbHRhbGFtYmRhID0gaW52QyAqIChCIC0gR1dsYW1iZGEgLSBjLmVwcyAqIGxhbWJkYWopOyAvLyBDbGFtcCBpZiB3ZSBhcmUgbm90IHdpdGhpbiB0aGUgbWluL21heCBpbnRlcnZhbFxuXG4gICAgICAgICAgaWYgKGxhbWJkYWogKyBkZWx0YWxhbWJkYSA8IGMubWluRm9yY2UpIHtcbiAgICAgICAgICAgIGRlbHRhbGFtYmRhID0gYy5taW5Gb3JjZSAtIGxhbWJkYWo7XG4gICAgICAgICAgfSBlbHNlIGlmIChsYW1iZGFqICsgZGVsdGFsYW1iZGEgPiBjLm1heEZvcmNlKSB7XG4gICAgICAgICAgICBkZWx0YWxhbWJkYSA9IGMubWF4Rm9yY2UgLSBsYW1iZGFqO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGxhbWJkYVtqXSArPSBkZWx0YWxhbWJkYTtcbiAgICAgICAgICBkZWx0YWxhbWJkYVRvdCArPSBkZWx0YWxhbWJkYSA+IDAuMCA/IGRlbHRhbGFtYmRhIDogLWRlbHRhbGFtYmRhOyAvLyBhYnMoZGVsdGFsYW1iZGEpXG5cbiAgICAgICAgICBjLmFkZFRvV2xhbWJkYShkZWx0YWxhbWJkYSk7XG4gICAgICAgIH0gLy8gSWYgdGhlIHRvdGFsIGVycm9yIGlzIHNtYWxsIGVub3VnaCAtIHN0b3AgaXRlcmF0ZVxuXG5cbiAgICAgICAgaWYgKGRlbHRhbGFtYmRhVG90ICogZGVsdGFsYW1iZGFUb3QgPCB0b2xTcXVhcmVkKSB7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgIH0gLy8gQWRkIHJlc3VsdCB0byB2ZWxvY2l0eVxuXG5cbiAgICAgIGZvciAobGV0IGkgPSAwOyBpICE9PSBOYm9kaWVzOyBpKyspIHtcbiAgICAgICAgY29uc3QgYiA9IGJvZGllc1tpXTtcbiAgICAgICAgY29uc3QgdiA9IGIudmVsb2NpdHk7XG4gICAgICAgIGNvbnN0IHcgPSBiLmFuZ3VsYXJWZWxvY2l0eTtcbiAgICAgICAgYi52bGFtYmRhLnZtdWwoYi5saW5lYXJGYWN0b3IsIGIudmxhbWJkYSk7XG4gICAgICAgIHYudmFkZChiLnZsYW1iZGEsIHYpO1xuICAgICAgICBiLndsYW1iZGEudm11bChiLmFuZ3VsYXJGYWN0b3IsIGIud2xhbWJkYSk7XG4gICAgICAgIHcudmFkZChiLndsYW1iZGEsIHcpO1xuICAgICAgfSAvLyBTZXQgdGhlIGAubXVsdGlwbGllcmAgcHJvcGVydHkgb2YgZWFjaCBlcXVhdGlvblxuXG5cbiAgICAgIGxldCBsID0gZXF1YXRpb25zLmxlbmd0aDtcbiAgICAgIGNvbnN0IGludkR0ID0gMSAvIGg7XG5cbiAgICAgIHdoaWxlIChsLS0pIHtcbiAgICAgICAgZXF1YXRpb25zW2xdLm11bHRpcGxpZXIgPSBsYW1iZGFbbF0gKiBpbnZEdDtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gaXRlcjtcbiAgfVxuXG59IC8vIEp1c3QgdGVtcG9yYXJ5IG51bWJlciBob2xkZXJzIHRoYXQgd2Ugd2FudCB0byByZXVzZSBlYWNoIGl0ZXJhdGlvbi5cblxuY29uc3QgR1NTb2x2ZXJfc29sdmVfbGFtYmRhID0gW107XG5jb25zdCBHU1NvbHZlcl9zb2x2ZV9pbnZDcyA9IFtdO1xuY29uc3QgR1NTb2x2ZXJfc29sdmVfQnMgPSBbXTtcblxuLyoqXG4gKiBTcGxpdHMgdGhlIGVxdWF0aW9ucyBpbnRvIGlzbGFuZHMgYW5kIHNvbHZlcyB0aGVtIGluZGVwZW5kZW50bHkuIENhbiBpbXByb3ZlIHBlcmZvcm1hbmNlLlxuICovXG5jbGFzcyBTcGxpdFNvbHZlciBleHRlbmRzIFNvbHZlciB7XG4gIC8qKlxuICAgKiBUaGUgbnVtYmVyIG9mIHNvbHZlciBpdGVyYXRpb25zIGRldGVybWluZXMgcXVhbGl0eSBvZiB0aGUgY29uc3RyYWludHMgaW4gdGhlIHdvcmxkLiBUaGUgbW9yZSBpdGVyYXRpb25zLCB0aGUgbW9yZSBjb3JyZWN0IHNpbXVsYXRpb24uIE1vcmUgaXRlcmF0aW9ucyBuZWVkIG1vcmUgY29tcHV0YXRpb25zIHRob3VnaC4gSWYgeW91IGhhdmUgYSBsYXJnZSBncmF2aXR5IGZvcmNlIGluIHlvdXIgd29ybGQsIHlvdSB3aWxsIG5lZWQgbW9yZSBpdGVyYXRpb25zLlxuICAgKi9cblxuICAvKipcbiAgICogV2hlbiB0b2xlcmFuY2UgaXMgcmVhY2hlZCwgdGhlIHN5c3RlbSBpcyBhc3N1bWVkIHRvIGJlIGNvbnZlcmdlZC5cbiAgICovXG5cbiAgLyoqIHN1YnNvbHZlciAqL1xuICBjb25zdHJ1Y3RvcihzdWJzb2x2ZXIpIHtcbiAgICBzdXBlcigpO1xuICAgIHRoaXMuaXRlcmF0aW9ucyA9IHZvaWQgMDtcbiAgICB0aGlzLnRvbGVyYW5jZSA9IHZvaWQgMDtcbiAgICB0aGlzLnN1YnNvbHZlciA9IHZvaWQgMDtcbiAgICB0aGlzLm5vZGVzID0gdm9pZCAwO1xuICAgIHRoaXMubm9kZVBvb2wgPSB2b2lkIDA7XG4gICAgdGhpcy5pdGVyYXRpb25zID0gMTA7XG4gICAgdGhpcy50b2xlcmFuY2UgPSAxZS03O1xuICAgIHRoaXMuc3Vic29sdmVyID0gc3Vic29sdmVyO1xuICAgIHRoaXMubm9kZXMgPSBbXTtcbiAgICB0aGlzLm5vZGVQb29sID0gW107IC8vIENyZWF0ZSBuZWVkZWQgbm9kZXMsIHJldXNlIGlmIHBvc3NpYmxlXG5cbiAgICB3aGlsZSAodGhpcy5ub2RlUG9vbC5sZW5ndGggPCAxMjgpIHtcbiAgICAgIHRoaXMubm9kZVBvb2wucHVzaCh0aGlzLmNyZWF0ZU5vZGUoKSk7XG4gICAgfVxuICB9XG4gIC8qKlxuICAgKiBjcmVhdGVOb2RlXG4gICAqL1xuXG5cbiAgY3JlYXRlTm9kZSgpIHtcbiAgICByZXR1cm4ge1xuICAgICAgYm9keTogbnVsbCxcbiAgICAgIGNoaWxkcmVuOiBbXSxcbiAgICAgIGVxczogW10sXG4gICAgICB2aXNpdGVkOiBmYWxzZVxuICAgIH07XG4gIH1cbiAgLyoqXG4gICAqIFNvbHZlIHRoZSBzdWJzeXN0ZW1zXG4gICAqIEByZXR1cm4gbnVtYmVyIG9mIGl0ZXJhdGlvbnMgcGVyZm9ybWVkXG4gICAqL1xuXG5cbiAgc29sdmUoZHQsIHdvcmxkKSB7XG4gICAgY29uc3Qgbm9kZXMgPSBTcGxpdFNvbHZlcl9zb2x2ZV9ub2RlcztcbiAgICBjb25zdCBub2RlUG9vbCA9IHRoaXMubm9kZVBvb2w7XG4gICAgY29uc3QgYm9kaWVzID0gd29ybGQuYm9kaWVzO1xuICAgIGNvbnN0IGVxdWF0aW9ucyA9IHRoaXMuZXF1YXRpb25zO1xuICAgIGNvbnN0IE5lcSA9IGVxdWF0aW9ucy5sZW5ndGg7XG4gICAgY29uc3QgTmJvZGllcyA9IGJvZGllcy5sZW5ndGg7XG4gICAgY29uc3Qgc3Vic29sdmVyID0gdGhpcy5zdWJzb2x2ZXI7IC8vIENyZWF0ZSBuZWVkZWQgbm9kZXMsIHJldXNlIGlmIHBvc3NpYmxlXG5cbiAgICB3aGlsZSAobm9kZVBvb2wubGVuZ3RoIDwgTmJvZGllcykge1xuICAgICAgbm9kZVBvb2wucHVzaCh0aGlzLmNyZWF0ZU5vZGUoKSk7XG4gICAgfVxuXG4gICAgbm9kZXMubGVuZ3RoID0gTmJvZGllcztcblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgTmJvZGllczsgaSsrKSB7XG4gICAgICBub2Rlc1tpXSA9IG5vZGVQb29sW2ldO1xuICAgIH0gLy8gUmVzZXQgbm9kZSB2YWx1ZXNcblxuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgIT09IE5ib2RpZXM7IGkrKykge1xuICAgICAgY29uc3Qgbm9kZSA9IG5vZGVzW2ldO1xuICAgICAgbm9kZS5ib2R5ID0gYm9kaWVzW2ldO1xuICAgICAgbm9kZS5jaGlsZHJlbi5sZW5ndGggPSAwO1xuICAgICAgbm9kZS5lcXMubGVuZ3RoID0gMDtcbiAgICAgIG5vZGUudmlzaXRlZCA9IGZhbHNlO1xuICAgIH1cblxuICAgIGZvciAobGV0IGsgPSAwOyBrICE9PSBOZXE7IGsrKykge1xuICAgICAgY29uc3QgZXEgPSBlcXVhdGlvbnNba107XG4gICAgICBjb25zdCBpID0gYm9kaWVzLmluZGV4T2YoZXEuYmkpO1xuICAgICAgY29uc3QgaiA9IGJvZGllcy5pbmRleE9mKGVxLmJqKTtcbiAgICAgIGNvbnN0IG5pID0gbm9kZXNbaV07XG4gICAgICBjb25zdCBuaiA9IG5vZGVzW2pdO1xuICAgICAgbmkuY2hpbGRyZW4ucHVzaChuaik7XG4gICAgICBuaS5lcXMucHVzaChlcSk7XG4gICAgICBuai5jaGlsZHJlbi5wdXNoKG5pKTtcbiAgICAgIG5qLmVxcy5wdXNoKGVxKTtcbiAgICB9XG5cbiAgICBsZXQgY2hpbGQ7XG4gICAgbGV0IG4gPSAwO1xuICAgIGxldCBlcXMgPSBTcGxpdFNvbHZlcl9zb2x2ZV9lcXM7XG4gICAgc3Vic29sdmVyLnRvbGVyYW5jZSA9IHRoaXMudG9sZXJhbmNlO1xuICAgIHN1YnNvbHZlci5pdGVyYXRpb25zID0gdGhpcy5pdGVyYXRpb25zO1xuICAgIGNvbnN0IGR1bW15V29ybGQgPSBTcGxpdFNvbHZlcl9zb2x2ZV9kdW1teVdvcmxkO1xuXG4gICAgd2hpbGUgKGNoaWxkID0gZ2V0VW52aXNpdGVkTm9kZShub2RlcykpIHtcbiAgICAgIGVxcy5sZW5ndGggPSAwO1xuICAgICAgZHVtbXlXb3JsZC5ib2RpZXMubGVuZ3RoID0gMDtcbiAgICAgIGJmcyhjaGlsZCwgdmlzaXRGdW5jLCBkdW1teVdvcmxkLmJvZGllcywgZXFzKTtcbiAgICAgIGNvbnN0IE5lcXMgPSBlcXMubGVuZ3RoO1xuICAgICAgZXFzID0gZXFzLnNvcnQoc29ydEJ5SWQpO1xuXG4gICAgICBmb3IgKGxldCBpID0gMDsgaSAhPT0gTmVxczsgaSsrKSB7XG4gICAgICAgIHN1YnNvbHZlci5hZGRFcXVhdGlvbihlcXNbaV0pO1xuICAgICAgfVxuXG4gICAgICBzdWJzb2x2ZXIuc29sdmUoZHQsIGR1bW15V29ybGQpO1xuICAgICAgc3Vic29sdmVyLnJlbW92ZUFsbEVxdWF0aW9ucygpO1xuICAgICAgbisrO1xuICAgIH1cblxuICAgIHJldHVybiBuO1xuICB9XG5cbn0gLy8gUmV0dXJucyB0aGUgbnVtYmVyIG9mIHN1YnN5c3RlbXNcblxuY29uc3QgU3BsaXRTb2x2ZXJfc29sdmVfbm9kZXMgPSBbXTsgLy8gQWxsIGFsbG9jYXRlZCBub2RlIG9iamVjdHNcblxuY29uc3QgU3BsaXRTb2x2ZXJfc29sdmVfZXFzID0gW107IC8vIFRlbXAgYXJyYXlcblxuY29uc3QgU3BsaXRTb2x2ZXJfc29sdmVfZHVtbXlXb3JsZCA9IHtcbiAgYm9kaWVzOiBbXVxufTsgLy8gVGVtcCBvYmplY3RcblxuY29uc3QgU1RBVElDID0gQm9keS5TVEFUSUM7XG5cbmZ1bmN0aW9uIGdldFVudmlzaXRlZE5vZGUobm9kZXMpIHtcbiAgY29uc3QgTm5vZGVzID0gbm9kZXMubGVuZ3RoO1xuXG4gIGZvciAobGV0IGkgPSAwOyBpICE9PSBObm9kZXM7IGkrKykge1xuICAgIGNvbnN0IG5vZGUgPSBub2Rlc1tpXTtcblxuICAgIGlmICghbm9kZS52aXNpdGVkICYmICEobm9kZS5ib2R5LnR5cGUgJiBTVEFUSUMpKSB7XG4gICAgICByZXR1cm4gbm9kZTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gZmFsc2U7XG59XG5cbmNvbnN0IHF1ZXVlID0gW107XG5cbmZ1bmN0aW9uIGJmcyhyb290LCB2aXNpdEZ1bmMsIGJkcywgZXFzKSB7XG4gIHF1ZXVlLnB1c2gocm9vdCk7XG4gIHJvb3QudmlzaXRlZCA9IHRydWU7XG4gIHZpc2l0RnVuYyhyb290LCBiZHMsIGVxcyk7XG5cbiAgd2hpbGUgKHF1ZXVlLmxlbmd0aCkge1xuICAgIGNvbnN0IG5vZGUgPSBxdWV1ZS5wb3AoKTsgLy8gTG9vcCBvdmVyIHVudmlzaXRlZCBjaGlsZCBub2Rlc1xuXG4gICAgbGV0IGNoaWxkO1xuXG4gICAgd2hpbGUgKGNoaWxkID0gZ2V0VW52aXNpdGVkTm9kZShub2RlLmNoaWxkcmVuKSkge1xuICAgICAgY2hpbGQudmlzaXRlZCA9IHRydWU7XG4gICAgICB2aXNpdEZ1bmMoY2hpbGQsIGJkcywgZXFzKTtcbiAgICAgIHF1ZXVlLnB1c2goY2hpbGQpO1xuICAgIH1cbiAgfVxufVxuXG5mdW5jdGlvbiB2aXNpdEZ1bmMobm9kZSwgYmRzLCBlcXMpIHtcbiAgYmRzLnB1c2gobm9kZS5ib2R5KTtcbiAgY29uc3QgTmVxcyA9IG5vZGUuZXFzLmxlbmd0aDtcblxuICBmb3IgKGxldCBpID0gMDsgaSAhPT0gTmVxczsgaSsrKSB7XG4gICAgY29uc3QgZXEgPSBub2RlLmVxc1tpXTtcblxuICAgIGlmICghZXFzLmluY2x1ZGVzKGVxKSkge1xuICAgICAgZXFzLnB1c2goZXEpO1xuICAgIH1cbiAgfVxufVxuXG5mdW5jdGlvbiBzb3J0QnlJZChhLCBiKSB7XG4gIHJldHVybiBiLmlkIC0gYS5pZDtcbn1cblxuLyoqXG4gKiBGb3IgcG9vbGluZyBvYmplY3RzIHRoYXQgY2FuIGJlIHJldXNlZC5cbiAqL1xuY2xhc3MgUG9vbCB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHRoaXMub2JqZWN0cyA9IFtdO1xuICAgIHRoaXMudHlwZSA9IE9iamVjdDtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZWxlYXNlIGFuIG9iamVjdCBhZnRlciB1c2VcbiAgICovXG4gIHJlbGVhc2UoLi4uYXJncykge1xuICAgIGNvbnN0IE5hcmdzID0gYXJncy5sZW5ndGg7XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSAhPT0gTmFyZ3M7IGkrKykge1xuICAgICAgdGhpcy5vYmplY3RzLnB1c2goYXJnc1tpXSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cbiAgLyoqXG4gICAqIEdldCBhbiBvYmplY3RcbiAgICovXG5cblxuICBnZXQoKSB7XG4gICAgaWYgKHRoaXMub2JqZWN0cy5sZW5ndGggPT09IDApIHtcbiAgICAgIHJldHVybiB0aGlzLmNvbnN0cnVjdE9iamVjdCgpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gdGhpcy5vYmplY3RzLnBvcCgpO1xuICAgIH1cbiAgfVxuICAvKipcbiAgICogQ29uc3RydWN0IGFuIG9iamVjdC4gU2hvdWxkIGJlIGltcGxlbWVudGVkIGluIGVhY2ggc3ViY2xhc3MuXG4gICAqL1xuXG5cbiAgY29uc3RydWN0T2JqZWN0KCkge1xuICAgIHRocm93IG5ldyBFcnJvcignY29uc3RydWN0T2JqZWN0KCkgbm90IGltcGxlbWVudGVkIGluIHRoaXMgUG9vbCBzdWJjbGFzcyB5ZXQhJyk7XG4gIH1cbiAgLyoqXG4gICAqIEByZXR1cm4gU2VsZiwgZm9yIGNoYWluaW5nXG4gICAqL1xuXG5cbiAgcmVzaXplKHNpemUpIHtcbiAgICBjb25zdCBvYmplY3RzID0gdGhpcy5vYmplY3RzO1xuXG4gICAgd2hpbGUgKG9iamVjdHMubGVuZ3RoID4gc2l6ZSkge1xuICAgICAgb2JqZWN0cy5wb3AoKTtcbiAgICB9XG5cbiAgICB3aGlsZSAob2JqZWN0cy5sZW5ndGggPCBzaXplKSB7XG4gICAgICBvYmplY3RzLnB1c2godGhpcy5jb25zdHJ1Y3RPYmplY3QoKSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxufVxuXG4vKipcbiAqIFZlYzNQb29sXG4gKi9cblxuY2xhc3MgVmVjM1Bvb2wgZXh0ZW5kcyBQb29sIHtcbiAgY29uc3RydWN0b3IoLi4uYXJncykge1xuICAgIHN1cGVyKC4uLmFyZ3MpO1xuICAgIHRoaXMudHlwZSA9IFZlYzM7XG4gIH1cblxuICAvKipcbiAgICogQ29uc3RydWN0IGEgdmVjdG9yXG4gICAqL1xuICBjb25zdHJ1Y3RPYmplY3QoKSB7XG4gICAgcmV0dXJuIG5ldyBWZWMzKCk7XG4gIH1cblxufVxuXG5sZXQgX0NPTExJU0lPTl9UWVBFUyRzcGhlLCBfQ09MTElTSU9OX1RZUEVTJHNwaGUyLCBfQ09MTElTSU9OX1RZUEVTJGJveEIsIF9DT0xMSVNJT05fVFlQRVMkc3BoZTMsIF9DT0xMSVNJT05fVFlQRVMkcGxhbiwgX0NPTExJU0lPTl9UWVBFUyRjb252LCBfQ09MTElTSU9OX1RZUEVTJHNwaGU0LCBfQ09MTElTSU9OX1RZUEVTJHBsYW4yLCBfQ09MTElTSU9OX1RZUEVTJGJveEMsIF9DT0xMSVNJT05fVFlQRVMkc3BoZTUsIF9DT0xMSVNJT05fVFlQRVMkYm94SCwgX0NPTExJU0lPTl9UWVBFUyRjb252MiwgX0NPTExJU0lPTl9UWVBFUyRzcGhlNiwgX0NPTExJU0lPTl9UWVBFUyRwbGFuMywgX0NPTExJU0lPTl9UWVBFUyRib3hQLCBfQ09MTElTSU9OX1RZUEVTJGNvbnYzLCBfQ09MTElTSU9OX1RZUEVTJGN5bGksIF9DT0xMSVNJT05fVFlQRVMkc3BoZTcsIF9DT0xMSVNJT05fVFlQRVMkcGxhbjQsIF9DT0xMSVNJT05fVFlQRVMkYm94QzIsIF9DT0xMSVNJT05fVFlQRVMkY29udjQsIF9DT0xMSVNJT05fVFlQRVMkaGVpZywgX0NPTExJU0lPTl9UWVBFUyRwYXJ0LCBfQ09MTElTSU9OX1RZUEVTJHNwaGU4LCBfQ09MTElTSU9OX1RZUEVTJHBsYW41O1xuLy8gTmFtaW5nIHJ1bGU6IGJhc2VkIG9mIHRoZSBvcmRlciBpbiBTSEFQRV9UWVBFUyxcbi8vIHRoZSBmaXJzdCBwYXJ0IG9mIHRoZSBtZXRob2QgaXMgZm9ybWVkIGJ5IHRoZVxuLy8gc2hhcGUgdHlwZSB0aGF0IGNvbWVzIGJlZm9yZSwgaW4gdGhlIHNlY29uZCBwYXJ0XG4vLyB0aGVyZSBpcyB0aGUgc2hhcGUgdHlwZSB0aGF0IGNvbWVzIGFmdGVyIGluIHRoZSBTSEFQRV9UWVBFUyBsaXN0XG5jb25zdCBDT0xMSVNJT05fVFlQRVMgPSB7XG4gIHNwaGVyZVNwaGVyZTogU2hhcGUudHlwZXMuU1BIRVJFLFxuICBzcGhlcmVQbGFuZTogU2hhcGUudHlwZXMuU1BIRVJFIHwgU2hhcGUudHlwZXMuUExBTkUsXG4gIGJveEJveDogU2hhcGUudHlwZXMuQk9YIHwgU2hhcGUudHlwZXMuQk9YLFxuICBzcGhlcmVCb3g6IFNoYXBlLnR5cGVzLlNQSEVSRSB8IFNoYXBlLnR5cGVzLkJPWCxcbiAgcGxhbmVCb3g6IFNoYXBlLnR5cGVzLlBMQU5FIHwgU2hhcGUudHlwZXMuQk9YLFxuICBjb252ZXhDb252ZXg6IFNoYXBlLnR5cGVzLkNPTlZFWFBPTFlIRURST04sXG4gIHNwaGVyZUNvbnZleDogU2hhcGUudHlwZXMuU1BIRVJFIHwgU2hhcGUudHlwZXMuQ09OVkVYUE9MWUhFRFJPTixcbiAgcGxhbmVDb252ZXg6IFNoYXBlLnR5cGVzLlBMQU5FIHwgU2hhcGUudHlwZXMuQ09OVkVYUE9MWUhFRFJPTixcbiAgYm94Q29udmV4OiBTaGFwZS50eXBlcy5CT1ggfCBTaGFwZS50eXBlcy5DT05WRVhQT0xZSEVEUk9OLFxuICBzcGhlcmVIZWlnaHRmaWVsZDogU2hhcGUudHlwZXMuU1BIRVJFIHwgU2hhcGUudHlwZXMuSEVJR0hURklFTEQsXG4gIGJveEhlaWdodGZpZWxkOiBTaGFwZS50eXBlcy5CT1ggfCBTaGFwZS50eXBlcy5IRUlHSFRGSUVMRCxcbiAgY29udmV4SGVpZ2h0ZmllbGQ6IFNoYXBlLnR5cGVzLkNPTlZFWFBPTFlIRURST04gfCBTaGFwZS50eXBlcy5IRUlHSFRGSUVMRCxcbiAgc3BoZXJlUGFydGljbGU6IFNoYXBlLnR5cGVzLlBBUlRJQ0xFIHwgU2hhcGUudHlwZXMuU1BIRVJFLFxuICBwbGFuZVBhcnRpY2xlOiBTaGFwZS50eXBlcy5QTEFORSB8IFNoYXBlLnR5cGVzLlBBUlRJQ0xFLFxuICBib3hQYXJ0aWNsZTogU2hhcGUudHlwZXMuQk9YIHwgU2hhcGUudHlwZXMuUEFSVElDTEUsXG4gIGNvbnZleFBhcnRpY2xlOiBTaGFwZS50eXBlcy5QQVJUSUNMRSB8IFNoYXBlLnR5cGVzLkNPTlZFWFBPTFlIRURST04sXG4gIGN5bGluZGVyQ3lsaW5kZXI6IFNoYXBlLnR5cGVzLkNZTElOREVSLFxuICBzcGhlcmVDeWxpbmRlcjogU2hhcGUudHlwZXMuU1BIRVJFIHwgU2hhcGUudHlwZXMuQ1lMSU5ERVIsXG4gIHBsYW5lQ3lsaW5kZXI6IFNoYXBlLnR5cGVzLlBMQU5FIHwgU2hhcGUudHlwZXMuQ1lMSU5ERVIsXG4gIGJveEN5bGluZGVyOiBTaGFwZS50eXBlcy5CT1ggfCBTaGFwZS50eXBlcy5DWUxJTkRFUixcbiAgY29udmV4Q3lsaW5kZXI6IFNoYXBlLnR5cGVzLkNPTlZFWFBPTFlIRURST04gfCBTaGFwZS50eXBlcy5DWUxJTkRFUixcbiAgaGVpZ2h0ZmllbGRDeWxpbmRlcjogU2hhcGUudHlwZXMuSEVJR0hURklFTEQgfCBTaGFwZS50eXBlcy5DWUxJTkRFUixcbiAgcGFydGljbGVDeWxpbmRlcjogU2hhcGUudHlwZXMuUEFSVElDTEUgfCBTaGFwZS50eXBlcy5DWUxJTkRFUixcbiAgc3BoZXJlVHJpbWVzaDogU2hhcGUudHlwZXMuU1BIRVJFIHwgU2hhcGUudHlwZXMuVFJJTUVTSCxcbiAgcGxhbmVUcmltZXNoOiBTaGFwZS50eXBlcy5QTEFORSB8IFNoYXBlLnR5cGVzLlRSSU1FU0hcbn07XG5fQ09MTElTSU9OX1RZUEVTJHNwaGUgPSBDT0xMSVNJT05fVFlQRVMuc3BoZXJlU3BoZXJlO1xuX0NPTExJU0lPTl9UWVBFUyRzcGhlMiA9IENPTExJU0lPTl9UWVBFUy5zcGhlcmVQbGFuZTtcbl9DT0xMSVNJT05fVFlQRVMkYm94QiA9IENPTExJU0lPTl9UWVBFUy5ib3hCb3g7XG5fQ09MTElTSU9OX1RZUEVTJHNwaGUzID0gQ09MTElTSU9OX1RZUEVTLnNwaGVyZUJveDtcbl9DT0xMSVNJT05fVFlQRVMkcGxhbiA9IENPTExJU0lPTl9UWVBFUy5wbGFuZUJveDtcbl9DT0xMSVNJT05fVFlQRVMkY29udiA9IENPTExJU0lPTl9UWVBFUy5jb252ZXhDb252ZXg7XG5fQ09MTElTSU9OX1RZUEVTJHNwaGU0ID0gQ09MTElTSU9OX1RZUEVTLnNwaGVyZUNvbnZleDtcbl9DT0xMSVNJT05fVFlQRVMkcGxhbjIgPSBDT0xMSVNJT05fVFlQRVMucGxhbmVDb252ZXg7XG5fQ09MTElTSU9OX1RZUEVTJGJveEMgPSBDT0xMSVNJT05fVFlQRVMuYm94Q29udmV4O1xuX0NPTExJU0lPTl9UWVBFUyRzcGhlNSA9IENPTExJU0lPTl9UWVBFUy5zcGhlcmVIZWlnaHRmaWVsZDtcbl9DT0xMSVNJT05fVFlQRVMkYm94SCA9IENPTExJU0lPTl9UWVBFUy5ib3hIZWlnaHRmaWVsZDtcbl9DT0xMSVNJT05fVFlQRVMkY29udjIgPSBDT0xMSVNJT05fVFlQRVMuY29udmV4SGVpZ2h0ZmllbGQ7XG5fQ09MTElTSU9OX1RZUEVTJHNwaGU2ID0gQ09MTElTSU9OX1RZUEVTLnNwaGVyZVBhcnRpY2xlO1xuX0NPTExJU0lPTl9UWVBFUyRwbGFuMyA9IENPTExJU0lPTl9UWVBFUy5wbGFuZVBhcnRpY2xlO1xuX0NPTExJU0lPTl9UWVBFUyRib3hQID0gQ09MTElTSU9OX1RZUEVTLmJveFBhcnRpY2xlO1xuX0NPTExJU0lPTl9UWVBFUyRjb252MyA9IENPTExJU0lPTl9UWVBFUy5jb252ZXhQYXJ0aWNsZTtcbl9DT0xMSVNJT05fVFlQRVMkY3lsaSA9IENPTExJU0lPTl9UWVBFUy5jeWxpbmRlckN5bGluZGVyO1xuX0NPTExJU0lPTl9UWVBFUyRzcGhlNyA9IENPTExJU0lPTl9UWVBFUy5zcGhlcmVDeWxpbmRlcjtcbl9DT0xMSVNJT05fVFlQRVMkcGxhbjQgPSBDT0xMSVNJT05fVFlQRVMucGxhbmVDeWxpbmRlcjtcbl9DT0xMSVNJT05fVFlQRVMkYm94QzIgPSBDT0xMSVNJT05fVFlQRVMuYm94Q3lsaW5kZXI7XG5fQ09MTElTSU9OX1RZUEVTJGNvbnY0ID0gQ09MTElTSU9OX1RZUEVTLmNvbnZleEN5bGluZGVyO1xuX0NPTExJU0lPTl9UWVBFUyRoZWlnID0gQ09MTElTSU9OX1RZUEVTLmhlaWdodGZpZWxkQ3lsaW5kZXI7XG5fQ09MTElTSU9OX1RZUEVTJHBhcnQgPSBDT0xMSVNJT05fVFlQRVMucGFydGljbGVDeWxpbmRlcjtcbl9DT0xMSVNJT05fVFlQRVMkc3BoZTggPSBDT0xMSVNJT05fVFlQRVMuc3BoZXJlVHJpbWVzaDtcbl9DT0xMSVNJT05fVFlQRVMkcGxhbjUgPSBDT0xMSVNJT05fVFlQRVMucGxhbmVUcmltZXNoO1xuXG4vKipcbiAqIEhlbHBlciBjbGFzcyBmb3IgdGhlIFdvcmxkLiBHZW5lcmF0ZXMgQ29udGFjdEVxdWF0aW9ucy5cbiAqIEB0b2RvIFNwaGVyZS1Db252ZXhQb2x5aGVkcm9uIGNvbnRhY3RzXG4gKiBAdG9kbyBDb250YWN0IHJlZHVjdGlvblxuICogQHRvZG8gc2hvdWxkIG1vdmUgbWV0aG9kcyB0byBwcm90b3R5cGVcbiAqL1xuY2xhc3MgTmFycm93cGhhc2Uge1xuICAvKipcbiAgICogSW50ZXJuYWwgc3RvcmFnZSBvZiBwb29sZWQgY29udGFjdCBwb2ludHMuXG4gICAqL1xuXG4gIC8qKlxuICAgKiBQb29sZWQgdmVjdG9ycy5cbiAgICovXG4gIGdldCBbX0NPTExJU0lPTl9UWVBFUyRzcGhlXSgpIHtcbiAgICByZXR1cm4gdGhpcy5zcGhlcmVTcGhlcmU7XG4gIH1cblxuICBnZXQgW19DT0xMSVNJT05fVFlQRVMkc3BoZTJdKCkge1xuICAgIHJldHVybiB0aGlzLnNwaGVyZVBsYW5lO1xuICB9XG5cbiAgZ2V0IFtfQ09MTElTSU9OX1RZUEVTJGJveEJdKCkge1xuICAgIHJldHVybiB0aGlzLmJveEJveDtcbiAgfVxuXG4gIGdldCBbX0NPTExJU0lPTl9UWVBFUyRzcGhlM10oKSB7XG4gICAgcmV0dXJuIHRoaXMuc3BoZXJlQm94O1xuICB9XG5cbiAgZ2V0IFtfQ09MTElTSU9OX1RZUEVTJHBsYW5dKCkge1xuICAgIHJldHVybiB0aGlzLnBsYW5lQm94O1xuICB9XG5cbiAgZ2V0IFtfQ09MTElTSU9OX1RZUEVTJGNvbnZdKCkge1xuICAgIHJldHVybiB0aGlzLmNvbnZleENvbnZleDtcbiAgfVxuXG4gIGdldCBbX0NPTExJU0lPTl9UWVBFUyRzcGhlNF0oKSB7XG4gICAgcmV0dXJuIHRoaXMuc3BoZXJlQ29udmV4O1xuICB9XG5cbiAgZ2V0IFtfQ09MTElTSU9OX1RZUEVTJHBsYW4yXSgpIHtcbiAgICByZXR1cm4gdGhpcy5wbGFuZUNvbnZleDtcbiAgfVxuXG4gIGdldCBbX0NPTExJU0lPTl9UWVBFUyRib3hDXSgpIHtcbiAgICByZXR1cm4gdGhpcy5ib3hDb252ZXg7XG4gIH1cblxuICBnZXQgW19DT0xMSVNJT05fVFlQRVMkc3BoZTVdKCkge1xuICAgIHJldHVybiB0aGlzLnNwaGVyZUhlaWdodGZpZWxkO1xuICB9XG5cbiAgZ2V0IFtfQ09MTElTSU9OX1RZUEVTJGJveEhdKCkge1xuICAgIHJldHVybiB0aGlzLmJveEhlaWdodGZpZWxkO1xuICB9XG5cbiAgZ2V0IFtfQ09MTElTSU9OX1RZUEVTJGNvbnYyXSgpIHtcbiAgICByZXR1cm4gdGhpcy5jb252ZXhIZWlnaHRmaWVsZDtcbiAgfVxuXG4gIGdldCBbX0NPTExJU0lPTl9UWVBFUyRzcGhlNl0oKSB7XG4gICAgcmV0dXJuIHRoaXMuc3BoZXJlUGFydGljbGU7XG4gIH1cblxuICBnZXQgW19DT0xMSVNJT05fVFlQRVMkcGxhbjNdKCkge1xuICAgIHJldHVybiB0aGlzLnBsYW5lUGFydGljbGU7XG4gIH1cblxuICBnZXQgW19DT0xMSVNJT05fVFlQRVMkYm94UF0oKSB7XG4gICAgcmV0dXJuIHRoaXMuYm94UGFydGljbGU7XG4gIH1cblxuICBnZXQgW19DT0xMSVNJT05fVFlQRVMkY29udjNdKCkge1xuICAgIHJldHVybiB0aGlzLmNvbnZleFBhcnRpY2xlO1xuICB9XG5cbiAgZ2V0IFtfQ09MTElTSU9OX1RZUEVTJGN5bGldKCkge1xuICAgIHJldHVybiB0aGlzLmNvbnZleENvbnZleDtcbiAgfVxuXG4gIGdldCBbX0NPTExJU0lPTl9UWVBFUyRzcGhlN10oKSB7XG4gICAgcmV0dXJuIHRoaXMuc3BoZXJlQ29udmV4O1xuICB9XG5cbiAgZ2V0IFtfQ09MTElTSU9OX1RZUEVTJHBsYW40XSgpIHtcbiAgICByZXR1cm4gdGhpcy5wbGFuZUNvbnZleDtcbiAgfVxuXG4gIGdldCBbX0NPTExJU0lPTl9UWVBFUyRib3hDMl0oKSB7XG4gICAgcmV0dXJuIHRoaXMuYm94Q29udmV4O1xuICB9XG5cbiAgZ2V0IFtfQ09MTElTSU9OX1RZUEVTJGNvbnY0XSgpIHtcbiAgICByZXR1cm4gdGhpcy5jb252ZXhDb252ZXg7XG4gIH1cblxuICBnZXQgW19DT0xMSVNJT05fVFlQRVMkaGVpZ10oKSB7XG4gICAgcmV0dXJuIHRoaXMuaGVpZ2h0ZmllbGRDeWxpbmRlcjtcbiAgfVxuXG4gIGdldCBbX0NPTExJU0lPTl9UWVBFUyRwYXJ0XSgpIHtcbiAgICByZXR1cm4gdGhpcy5wYXJ0aWNsZUN5bGluZGVyO1xuICB9XG5cbiAgZ2V0IFtfQ09MTElTSU9OX1RZUEVTJHNwaGU4XSgpIHtcbiAgICByZXR1cm4gdGhpcy5zcGhlcmVUcmltZXNoO1xuICB9XG5cbiAgZ2V0IFtfQ09MTElTSU9OX1RZUEVTJHBsYW41XSgpIHtcbiAgICByZXR1cm4gdGhpcy5wbGFuZVRyaW1lc2g7XG4gIH0gLy8gZ2V0IFtDT0xMSVNJT05fVFlQRVMuY29udmV4VHJpbWVzaF0oKSB7XG4gIC8vICAgcmV0dXJuIHRoaXMuY29udmV4VHJpbWVzaFxuICAvLyB9XG5cblxuICBjb25zdHJ1Y3Rvcih3b3JsZCkge1xuICAgIHRoaXMuY29udGFjdFBvaW50UG9vbCA9IHZvaWQgMDtcbiAgICB0aGlzLmZyaWN0aW9uRXF1YXRpb25Qb29sID0gdm9pZCAwO1xuICAgIHRoaXMucmVzdWx0ID0gdm9pZCAwO1xuICAgIHRoaXMuZnJpY3Rpb25SZXN1bHQgPSB2b2lkIDA7XG4gICAgdGhpcy52M3Bvb2wgPSB2b2lkIDA7XG4gICAgdGhpcy53b3JsZCA9IHZvaWQgMDtcbiAgICB0aGlzLmN1cnJlbnRDb250YWN0TWF0ZXJpYWwgPSB2b2lkIDA7XG4gICAgdGhpcy5lbmFibGVGcmljdGlvblJlZHVjdGlvbiA9IHZvaWQgMDtcbiAgICB0aGlzLmNvbnRhY3RQb2ludFBvb2wgPSBbXTtcbiAgICB0aGlzLmZyaWN0aW9uRXF1YXRpb25Qb29sID0gW107XG4gICAgdGhpcy5yZXN1bHQgPSBbXTtcbiAgICB0aGlzLmZyaWN0aW9uUmVzdWx0ID0gW107XG4gICAgdGhpcy52M3Bvb2wgPSBuZXcgVmVjM1Bvb2woKTtcbiAgICB0aGlzLndvcmxkID0gd29ybGQ7XG4gICAgdGhpcy5jdXJyZW50Q29udGFjdE1hdGVyaWFsID0gd29ybGQuZGVmYXVsdENvbnRhY3RNYXRlcmlhbDtcbiAgICB0aGlzLmVuYWJsZUZyaWN0aW9uUmVkdWN0aW9uID0gZmFsc2U7XG4gIH1cbiAgLyoqXG4gICAqIE1ha2UgYSBjb250YWN0IG9iamVjdCwgYnkgdXNpbmcgdGhlIGludGVybmFsIHBvb2wgb3IgY3JlYXRpbmcgYSBuZXcgb25lLlxuICAgKi9cblxuXG4gIGNyZWF0ZUNvbnRhY3RFcXVhdGlvbihiaSwgYmosIHNpLCBzaiwgb3ZlcnJpZGVTaGFwZUEsIG92ZXJyaWRlU2hhcGVCKSB7XG4gICAgbGV0IGM7XG5cbiAgICBpZiAodGhpcy5jb250YWN0UG9pbnRQb29sLmxlbmd0aCkge1xuICAgICAgYyA9IHRoaXMuY29udGFjdFBvaW50UG9vbC5wb3AoKTtcbiAgICAgIGMuYmkgPSBiaTtcbiAgICAgIGMuYmogPSBiajtcbiAgICB9IGVsc2Uge1xuICAgICAgYyA9IG5ldyBDb250YWN0RXF1YXRpb24oYmksIGJqKTtcbiAgICB9XG5cbiAgICBjLmVuYWJsZWQgPSBiaS5jb2xsaXNpb25SZXNwb25zZSAmJiBiai5jb2xsaXNpb25SZXNwb25zZSAmJiBzaS5jb2xsaXNpb25SZXNwb25zZSAmJiBzai5jb2xsaXNpb25SZXNwb25zZTtcbiAgICBjb25zdCBjbSA9IHRoaXMuY3VycmVudENvbnRhY3RNYXRlcmlhbDtcbiAgICBjLnJlc3RpdHV0aW9uID0gY20ucmVzdGl0dXRpb247XG4gICAgYy5zZXRTcG9va1BhcmFtcyhjbS5jb250YWN0RXF1YXRpb25TdGlmZm5lc3MsIGNtLmNvbnRhY3RFcXVhdGlvblJlbGF4YXRpb24sIHRoaXMud29ybGQuZHQpO1xuICAgIGNvbnN0IG1hdEEgPSBzaS5tYXRlcmlhbCB8fCBiaS5tYXRlcmlhbDtcbiAgICBjb25zdCBtYXRCID0gc2oubWF0ZXJpYWwgfHwgYmoubWF0ZXJpYWw7XG5cbiAgICBpZiAobWF0QSAmJiBtYXRCICYmIG1hdEEucmVzdGl0dXRpb24gPj0gMCAmJiBtYXRCLnJlc3RpdHV0aW9uID49IDApIHtcbiAgICAgIGMucmVzdGl0dXRpb24gPSBtYXRBLnJlc3RpdHV0aW9uICogbWF0Qi5yZXN0aXR1dGlvbjtcbiAgICB9XG5cbiAgICBjLnNpID0gb3ZlcnJpZGVTaGFwZUEgfHwgc2k7XG4gICAgYy5zaiA9IG92ZXJyaWRlU2hhcGVCIHx8IHNqO1xuICAgIHJldHVybiBjO1xuICB9XG5cbiAgY3JlYXRlRnJpY3Rpb25FcXVhdGlvbnNGcm9tQ29udGFjdChjb250YWN0RXF1YXRpb24sIG91dEFycmF5KSB7XG4gICAgY29uc3QgYm9keUEgPSBjb250YWN0RXF1YXRpb24uYmk7XG4gICAgY29uc3QgYm9keUIgPSBjb250YWN0RXF1YXRpb24uYmo7XG4gICAgY29uc3Qgc2hhcGVBID0gY29udGFjdEVxdWF0aW9uLnNpO1xuICAgIGNvbnN0IHNoYXBlQiA9IGNvbnRhY3RFcXVhdGlvbi5zajtcbiAgICBjb25zdCB3b3JsZCA9IHRoaXMud29ybGQ7XG4gICAgY29uc3QgY20gPSB0aGlzLmN1cnJlbnRDb250YWN0TWF0ZXJpYWw7IC8vIElmIGZyaWN0aW9uIG9yIHJlc3RpdHV0aW9uIHdlcmUgc3BlY2lmaWVkIGluIHRoZSBtYXRlcmlhbCwgdXNlIHRoZW1cblxuICAgIGxldCBmcmljdGlvbiA9IGNtLmZyaWN0aW9uO1xuICAgIGNvbnN0IG1hdEEgPSBzaGFwZUEubWF0ZXJpYWwgfHwgYm9keUEubWF0ZXJpYWw7XG4gICAgY29uc3QgbWF0QiA9IHNoYXBlQi5tYXRlcmlhbCB8fCBib2R5Qi5tYXRlcmlhbDtcblxuICAgIGlmIChtYXRBICYmIG1hdEIgJiYgbWF0QS5mcmljdGlvbiA+PSAwICYmIG1hdEIuZnJpY3Rpb24gPj0gMCkge1xuICAgICAgZnJpY3Rpb24gPSBtYXRBLmZyaWN0aW9uICogbWF0Qi5mcmljdGlvbjtcbiAgICB9XG5cbiAgICBpZiAoZnJpY3Rpb24gPiAwKSB7XG4gICAgICAvLyBDcmVhdGUgMiB0YW5nZW50IGVxdWF0aW9uc1xuICAgICAgY29uc3QgbXVnID0gZnJpY3Rpb24gKiB3b3JsZC5ncmF2aXR5Lmxlbmd0aCgpO1xuICAgICAgbGV0IHJlZHVjZWRNYXNzID0gYm9keUEuaW52TWFzcyArIGJvZHlCLmludk1hc3M7XG5cbiAgICAgIGlmIChyZWR1Y2VkTWFzcyA+IDApIHtcbiAgICAgICAgcmVkdWNlZE1hc3MgPSAxIC8gcmVkdWNlZE1hc3M7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHBvb2wgPSB0aGlzLmZyaWN0aW9uRXF1YXRpb25Qb29sO1xuICAgICAgY29uc3QgYzEgPSBwb29sLmxlbmd0aCA/IHBvb2wucG9wKCkgOiBuZXcgRnJpY3Rpb25FcXVhdGlvbihib2R5QSwgYm9keUIsIG11ZyAqIHJlZHVjZWRNYXNzKTtcbiAgICAgIGNvbnN0IGMyID0gcG9vbC5sZW5ndGggPyBwb29sLnBvcCgpIDogbmV3IEZyaWN0aW9uRXF1YXRpb24oYm9keUEsIGJvZHlCLCBtdWcgKiByZWR1Y2VkTWFzcyk7XG4gICAgICBjMS5iaSA9IGMyLmJpID0gYm9keUE7XG4gICAgICBjMS5iaiA9IGMyLmJqID0gYm9keUI7XG4gICAgICBjMS5taW5Gb3JjZSA9IGMyLm1pbkZvcmNlID0gLW11ZyAqIHJlZHVjZWRNYXNzO1xuICAgICAgYzEubWF4Rm9yY2UgPSBjMi5tYXhGb3JjZSA9IG11ZyAqIHJlZHVjZWRNYXNzOyAvLyBDb3B5IG92ZXIgdGhlIHJlbGF0aXZlIHZlY3RvcnNcblxuICAgICAgYzEucmkuY29weShjb250YWN0RXF1YXRpb24ucmkpO1xuICAgICAgYzEucmouY29weShjb250YWN0RXF1YXRpb24ucmopO1xuICAgICAgYzIucmkuY29weShjb250YWN0RXF1YXRpb24ucmkpO1xuICAgICAgYzIucmouY29weShjb250YWN0RXF1YXRpb24ucmopOyAvLyBDb25zdHJ1Y3QgdGFuZ2VudHNcblxuICAgICAgY29udGFjdEVxdWF0aW9uLm5pLnRhbmdlbnRzKGMxLnQsIGMyLnQpOyAvLyBTZXQgc3Bvb2sgcGFyYW1zXG5cbiAgICAgIGMxLnNldFNwb29rUGFyYW1zKGNtLmZyaWN0aW9uRXF1YXRpb25TdGlmZm5lc3MsIGNtLmZyaWN0aW9uRXF1YXRpb25SZWxheGF0aW9uLCB3b3JsZC5kdCk7XG4gICAgICBjMi5zZXRTcG9va1BhcmFtcyhjbS5mcmljdGlvbkVxdWF0aW9uU3RpZmZuZXNzLCBjbS5mcmljdGlvbkVxdWF0aW9uUmVsYXhhdGlvbiwgd29ybGQuZHQpO1xuICAgICAgYzEuZW5hYmxlZCA9IGMyLmVuYWJsZWQgPSBjb250YWN0RXF1YXRpb24uZW5hYmxlZDtcbiAgICAgIG91dEFycmF5LnB1c2goYzEsIGMyKTtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICAvKipcbiAgICogVGFrZSB0aGUgYXZlcmFnZSBOIGxhdGVzdCBjb250YWN0IHBvaW50IG9uIHRoZSBwbGFuZS5cbiAgICovXG5cblxuICBjcmVhdGVGcmljdGlvbkZyb21BdmVyYWdlKG51bUNvbnRhY3RzKSB7XG4gICAgLy8gVGhlIGxhc3QgY29udGFjdEVxdWF0aW9uXG4gICAgbGV0IGMgPSB0aGlzLnJlc3VsdFt0aGlzLnJlc3VsdC5sZW5ndGggLSAxXTsgLy8gQ3JlYXRlIHRoZSByZXN1bHQ6IHR3byBcImF2ZXJhZ2VcIiBmcmljdGlvbiBlcXVhdGlvbnNcblxuICAgIGlmICghdGhpcy5jcmVhdGVGcmljdGlvbkVxdWF0aW9uc0Zyb21Db250YWN0KGMsIHRoaXMuZnJpY3Rpb25SZXN1bHQpIHx8IG51bUNvbnRhY3RzID09PSAxKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgZjEgPSB0aGlzLmZyaWN0aW9uUmVzdWx0W3RoaXMuZnJpY3Rpb25SZXN1bHQubGVuZ3RoIC0gMl07XG4gICAgY29uc3QgZjIgPSB0aGlzLmZyaWN0aW9uUmVzdWx0W3RoaXMuZnJpY3Rpb25SZXN1bHQubGVuZ3RoIC0gMV07XG4gICAgYXZlcmFnZU5vcm1hbC5zZXRaZXJvKCk7XG4gICAgYXZlcmFnZUNvbnRhY3RQb2ludEEuc2V0WmVybygpO1xuICAgIGF2ZXJhZ2VDb250YWN0UG9pbnRCLnNldFplcm8oKTtcbiAgICBjb25zdCBib2R5QSA9IGMuYmk7XG4gICAgYy5iajtcblxuICAgIGZvciAobGV0IGkgPSAwOyBpICE9PSBudW1Db250YWN0czsgaSsrKSB7XG4gICAgICBjID0gdGhpcy5yZXN1bHRbdGhpcy5yZXN1bHQubGVuZ3RoIC0gMSAtIGldO1xuXG4gICAgICBpZiAoYy5iaSAhPT0gYm9keUEpIHtcbiAgICAgICAgYXZlcmFnZU5vcm1hbC52YWRkKGMubmksIGF2ZXJhZ2VOb3JtYWwpO1xuICAgICAgICBhdmVyYWdlQ29udGFjdFBvaW50QS52YWRkKGMucmksIGF2ZXJhZ2VDb250YWN0UG9pbnRBKTtcbiAgICAgICAgYXZlcmFnZUNvbnRhY3RQb2ludEIudmFkZChjLnJqLCBhdmVyYWdlQ29udGFjdFBvaW50Qik7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBhdmVyYWdlTm9ybWFsLnZzdWIoYy5uaSwgYXZlcmFnZU5vcm1hbCk7XG4gICAgICAgIGF2ZXJhZ2VDb250YWN0UG9pbnRBLnZhZGQoYy5yaiwgYXZlcmFnZUNvbnRhY3RQb2ludEEpO1xuICAgICAgICBhdmVyYWdlQ29udGFjdFBvaW50Qi52YWRkKGMucmksIGF2ZXJhZ2VDb250YWN0UG9pbnRCKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zdCBpbnZOdW1Db250YWN0cyA9IDEgLyBudW1Db250YWN0cztcbiAgICBhdmVyYWdlQ29udGFjdFBvaW50QS5zY2FsZShpbnZOdW1Db250YWN0cywgZjEucmkpO1xuICAgIGF2ZXJhZ2VDb250YWN0UG9pbnRCLnNjYWxlKGludk51bUNvbnRhY3RzLCBmMS5yaik7XG4gICAgZjIucmkuY29weShmMS5yaSk7IC8vIFNob3VsZCBiZSB0aGUgc2FtZVxuXG4gICAgZjIucmouY29weShmMS5yaik7XG4gICAgYXZlcmFnZU5vcm1hbC5ub3JtYWxpemUoKTtcbiAgICBhdmVyYWdlTm9ybWFsLnRhbmdlbnRzKGYxLnQsIGYyLnQpOyAvLyByZXR1cm4gZXE7XG4gIH1cbiAgLyoqXG4gICAqIEdlbmVyYXRlIGFsbCBjb250YWN0cyBiZXR3ZWVuIGEgbGlzdCBvZiBib2R5IHBhaXJzXG4gICAqIEBwYXJhbSBwMSBBcnJheSBvZiBib2R5IGluZGljZXNcbiAgICogQHBhcmFtIHAyIEFycmF5IG9mIGJvZHkgaW5kaWNlc1xuICAgKiBAcGFyYW0gcmVzdWx0IEFycmF5IHRvIHN0b3JlIGdlbmVyYXRlZCBjb250YWN0c1xuICAgKiBAcGFyYW0gb2xkY29udGFjdHMgT3B0aW9uYWwuIEFycmF5IG9mIHJldXNhYmxlIGNvbnRhY3Qgb2JqZWN0c1xuICAgKi9cblxuXG4gIGdldENvbnRhY3RzKHAxLCBwMiwgd29ybGQsIHJlc3VsdCwgb2xkY29udGFjdHMsIGZyaWN0aW9uUmVzdWx0LCBmcmljdGlvblBvb2wpIHtcbiAgICAvLyBTYXZlIG9sZCBjb250YWN0IG9iamVjdHNcbiAgICB0aGlzLmNvbnRhY3RQb2ludFBvb2wgPSBvbGRjb250YWN0cztcbiAgICB0aGlzLmZyaWN0aW9uRXF1YXRpb25Qb29sID0gZnJpY3Rpb25Qb29sO1xuICAgIHRoaXMucmVzdWx0ID0gcmVzdWx0O1xuICAgIHRoaXMuZnJpY3Rpb25SZXN1bHQgPSBmcmljdGlvblJlc3VsdDtcbiAgICBjb25zdCBxaSA9IHRtcFF1YXQxO1xuICAgIGNvbnN0IHFqID0gdG1wUXVhdDI7XG4gICAgY29uc3QgeGkgPSB0bXBWZWMxO1xuICAgIGNvbnN0IHhqID0gdG1wVmVjMjtcblxuICAgIGZvciAobGV0IGsgPSAwLCBOID0gcDEubGVuZ3RoOyBrICE9PSBOOyBrKyspIHtcbiAgICAgIC8vIEdldCBjdXJyZW50IGNvbGxpc2lvbiBib2RpZXNcbiAgICAgIGNvbnN0IGJpID0gcDFba107XG4gICAgICBjb25zdCBiaiA9IHAyW2tdOyAvLyBHZXQgY29udGFjdCBtYXRlcmlhbFxuXG4gICAgICBsZXQgYm9keUNvbnRhY3RNYXRlcmlhbCA9IG51bGw7XG5cbiAgICAgIGlmIChiaS5tYXRlcmlhbCAmJiBiai5tYXRlcmlhbCkge1xuICAgICAgICBib2R5Q29udGFjdE1hdGVyaWFsID0gd29ybGQuZ2V0Q29udGFjdE1hdGVyaWFsKGJpLm1hdGVyaWFsLCBiai5tYXRlcmlhbCkgfHwgbnVsbDtcbiAgICAgIH1cblxuICAgICAgY29uc3QganVzdFRlc3QgPSBiaS50eXBlICYgQm9keS5LSU5FTUFUSUMgJiYgYmoudHlwZSAmIEJvZHkuU1RBVElDIHx8IGJpLnR5cGUgJiBCb2R5LlNUQVRJQyAmJiBiai50eXBlICYgQm9keS5LSU5FTUFUSUMgfHwgYmkudHlwZSAmIEJvZHkuS0lORU1BVElDICYmIGJqLnR5cGUgJiBCb2R5LktJTkVNQVRJQztcblxuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBiaS5zaGFwZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgYmkucXVhdGVybmlvbi5tdWx0KGJpLnNoYXBlT3JpZW50YXRpb25zW2ldLCBxaSk7XG4gICAgICAgIGJpLnF1YXRlcm5pb24udm11bHQoYmkuc2hhcGVPZmZzZXRzW2ldLCB4aSk7XG4gICAgICAgIHhpLnZhZGQoYmkucG9zaXRpb24sIHhpKTtcbiAgICAgICAgY29uc3Qgc2kgPSBiaS5zaGFwZXNbaV07XG5cbiAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBiai5zaGFwZXMubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgICAvLyBDb21wdXRlIHdvcmxkIHRyYW5zZm9ybSBvZiBzaGFwZXNcbiAgICAgICAgICBiai5xdWF0ZXJuaW9uLm11bHQoYmouc2hhcGVPcmllbnRhdGlvbnNbal0sIHFqKTtcbiAgICAgICAgICBiai5xdWF0ZXJuaW9uLnZtdWx0KGJqLnNoYXBlT2Zmc2V0c1tqXSwgeGopO1xuICAgICAgICAgIHhqLnZhZGQoYmoucG9zaXRpb24sIHhqKTtcbiAgICAgICAgICBjb25zdCBzaiA9IGJqLnNoYXBlc1tqXTtcblxuICAgICAgICAgIGlmICghKHNpLmNvbGxpc2lvbkZpbHRlck1hc2sgJiBzai5jb2xsaXNpb25GaWx0ZXJHcm91cCAmJiBzai5jb2xsaXNpb25GaWx0ZXJNYXNrICYgc2kuY29sbGlzaW9uRmlsdGVyR3JvdXApKSB7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAoeGkuZGlzdGFuY2VUbyh4aikgPiBzaS5ib3VuZGluZ1NwaGVyZVJhZGl1cyArIHNqLmJvdW5kaW5nU3BoZXJlUmFkaXVzKSB7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICB9IC8vIEdldCBjb2xsaXNpb24gbWF0ZXJpYWxcblxuXG4gICAgICAgICAgbGV0IHNoYXBlQ29udGFjdE1hdGVyaWFsID0gbnVsbDtcblxuICAgICAgICAgIGlmIChzaS5tYXRlcmlhbCAmJiBzai5tYXRlcmlhbCkge1xuICAgICAgICAgICAgc2hhcGVDb250YWN0TWF0ZXJpYWwgPSB3b3JsZC5nZXRDb250YWN0TWF0ZXJpYWwoc2kubWF0ZXJpYWwsIHNqLm1hdGVyaWFsKSB8fCBudWxsO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHRoaXMuY3VycmVudENvbnRhY3RNYXRlcmlhbCA9IHNoYXBlQ29udGFjdE1hdGVyaWFsIHx8IGJvZHlDb250YWN0TWF0ZXJpYWwgfHwgd29ybGQuZGVmYXVsdENvbnRhY3RNYXRlcmlhbDsgLy8gR2V0IGNvbnRhY3RzXG5cbiAgICAgICAgICBjb25zdCByZXNvbHZlckluZGV4ID0gc2kudHlwZSB8IHNqLnR5cGU7XG4gICAgICAgICAgY29uc3QgcmVzb2x2ZXIgPSB0aGlzW3Jlc29sdmVySW5kZXhdO1xuXG4gICAgICAgICAgaWYgKHJlc29sdmVyKSB7XG4gICAgICAgICAgICBsZXQgcmV0dmFsID0gZmFsc2U7IC8vIFRPIERPOiBpbnZlc3RpZ2F0ZSB3aHkgc3BoZXJlUGFydGljbGUgYW5kIGNvbnZleFBhcnRpY2xlXG4gICAgICAgICAgICAvLyByZXNvbHZlcnMgZXhwZWN0IHNpIGFuZCBzaiBzaGFwZXMgdG8gYmUgaW4gcmV2ZXJzZSBvcmRlclxuICAgICAgICAgICAgLy8gKGkuZS4gbGFyZ2VyIGludGVnZXIgdmFsdWUgdHlwZSBmaXJzdCBpbnN0ZWFkIG9mIHNtYWxsZXIgZmlyc3QpXG5cbiAgICAgICAgICAgIGlmIChzaS50eXBlIDwgc2oudHlwZSkge1xuICAgICAgICAgICAgICByZXR2YWwgPSByZXNvbHZlci5jYWxsKHRoaXMsIHNpLCBzaiwgeGksIHhqLCBxaSwgcWosIGJpLCBiaiwgc2ksIHNqLCBqdXN0VGVzdCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICByZXR2YWwgPSByZXNvbHZlci5jYWxsKHRoaXMsIHNqLCBzaSwgeGosIHhpLCBxaiwgcWksIGJqLCBiaSwgc2ksIHNqLCBqdXN0VGVzdCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChyZXR2YWwgJiYganVzdFRlc3QpIHtcbiAgICAgICAgICAgICAgLy8gUmVnaXN0ZXIgb3ZlcmxhcFxuICAgICAgICAgICAgICB3b3JsZC5zaGFwZU92ZXJsYXBLZWVwZXIuc2V0KHNpLmlkLCBzai5pZCk7XG4gICAgICAgICAgICAgIHdvcmxkLmJvZHlPdmVybGFwS2VlcGVyLnNldChiaS5pZCwgYmouaWQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHNwaGVyZVNwaGVyZShzaSwgc2osIHhpLCB4aiwgcWksIHFqLCBiaSwgYmosIHJzaSwgcnNqLCBqdXN0VGVzdCkge1xuICAgIGlmIChqdXN0VGVzdCkge1xuICAgICAgcmV0dXJuIHhpLmRpc3RhbmNlU3F1YXJlZCh4aikgPCAoc2kucmFkaXVzICsgc2oucmFkaXVzKSAqKiAyO1xuICAgIH0gLy8gV2Ugd2lsbCBoYXZlIG9ubHkgb25lIGNvbnRhY3QgaW4gdGhpcyBjYXNlXG5cblxuICAgIGNvbnN0IGNvbnRhY3RFcSA9IHRoaXMuY3JlYXRlQ29udGFjdEVxdWF0aW9uKGJpLCBiaiwgc2ksIHNqLCByc2ksIHJzaik7IC8vIENvbnRhY3Qgbm9ybWFsXG5cbiAgICB4ai52c3ViKHhpLCBjb250YWN0RXEubmkpO1xuICAgIGNvbnRhY3RFcS5uaS5ub3JtYWxpemUoKTsgLy8gQ29udGFjdCBwb2ludCBsb2NhdGlvbnNcblxuICAgIGNvbnRhY3RFcS5yaS5jb3B5KGNvbnRhY3RFcS5uaSk7XG4gICAgY29udGFjdEVxLnJqLmNvcHkoY29udGFjdEVxLm5pKTtcbiAgICBjb250YWN0RXEucmkuc2NhbGUoc2kucmFkaXVzLCBjb250YWN0RXEucmkpO1xuICAgIGNvbnRhY3RFcS5yai5zY2FsZSgtc2oucmFkaXVzLCBjb250YWN0RXEucmopO1xuICAgIGNvbnRhY3RFcS5yaS52YWRkKHhpLCBjb250YWN0RXEucmkpO1xuICAgIGNvbnRhY3RFcS5yaS52c3ViKGJpLnBvc2l0aW9uLCBjb250YWN0RXEucmkpO1xuICAgIGNvbnRhY3RFcS5yai52YWRkKHhqLCBjb250YWN0RXEucmopO1xuICAgIGNvbnRhY3RFcS5yai52c3ViKGJqLnBvc2l0aW9uLCBjb250YWN0RXEucmopO1xuICAgIHRoaXMucmVzdWx0LnB1c2goY29udGFjdEVxKTtcbiAgICB0aGlzLmNyZWF0ZUZyaWN0aW9uRXF1YXRpb25zRnJvbUNvbnRhY3QoY29udGFjdEVxLCB0aGlzLmZyaWN0aW9uUmVzdWx0KTtcbiAgfVxuXG4gIHNwaGVyZVBsYW5lKHNpLCBzaiwgeGksIHhqLCBxaSwgcWosIGJpLCBiaiwgcnNpLCByc2osIGp1c3RUZXN0KSB7XG4gICAgLy8gV2Ugd2lsbCBoYXZlIG9uZSBjb250YWN0IGluIHRoaXMgY2FzZVxuICAgIGNvbnN0IHIgPSB0aGlzLmNyZWF0ZUNvbnRhY3RFcXVhdGlvbihiaSwgYmosIHNpLCBzaiwgcnNpLCByc2opOyAvLyBDb250YWN0IG5vcm1hbFxuXG4gICAgci5uaS5zZXQoMCwgMCwgMSk7XG4gICAgcWoudm11bHQoci5uaSwgci5uaSk7XG4gICAgci5uaS5uZWdhdGUoci5uaSk7IC8vIGJvZHkgaSBpcyB0aGUgc3BoZXJlLCBmbGlwIG5vcm1hbFxuXG4gICAgci5uaS5ub3JtYWxpemUoKTsgLy8gTmVlZGVkP1xuICAgIC8vIFZlY3RvciBmcm9tIHNwaGVyZSBjZW50ZXIgdG8gY29udGFjdCBwb2ludFxuXG4gICAgci5uaS5zY2FsZShzaS5yYWRpdXMsIHIucmkpOyAvLyBQcm9qZWN0IGRvd24gc3BoZXJlIG9uIHBsYW5lXG5cbiAgICB4aS52c3ViKHhqLCBwb2ludF9vbl9wbGFuZV90b19zcGhlcmUpO1xuICAgIHIubmkuc2NhbGUoci5uaS5kb3QocG9pbnRfb25fcGxhbmVfdG9fc3BoZXJlKSwgcGxhbmVfdG9fc3BoZXJlX29ydGhvKTtcbiAgICBwb2ludF9vbl9wbGFuZV90b19zcGhlcmUudnN1YihwbGFuZV90b19zcGhlcmVfb3J0aG8sIHIucmopOyAvLyBUaGUgc3BoZXJlIHBvc2l0aW9uIHByb2plY3RlZCB0byBwbGFuZVxuXG4gICAgaWYgKC1wb2ludF9vbl9wbGFuZV90b19zcGhlcmUuZG90KHIubmkpIDw9IHNpLnJhZGl1cykge1xuICAgICAgaWYgKGp1c3RUZXN0KSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfSAvLyBNYWtlIGl0IHJlbGF0aXZlIHRvIHRoZSBib2R5XG5cblxuICAgICAgY29uc3QgcmkgPSByLnJpO1xuICAgICAgY29uc3QgcmogPSByLnJqO1xuICAgICAgcmkudmFkZCh4aSwgcmkpO1xuICAgICAgcmkudnN1YihiaS5wb3NpdGlvbiwgcmkpO1xuICAgICAgcmoudmFkZCh4aiwgcmopO1xuICAgICAgcmoudnN1Yihiai5wb3NpdGlvbiwgcmopO1xuICAgICAgdGhpcy5yZXN1bHQucHVzaChyKTtcbiAgICAgIHRoaXMuY3JlYXRlRnJpY3Rpb25FcXVhdGlvbnNGcm9tQ29udGFjdChyLCB0aGlzLmZyaWN0aW9uUmVzdWx0KTtcbiAgICB9XG4gIH1cblxuICBib3hCb3goc2ksIHNqLCB4aSwgeGosIHFpLCBxaiwgYmksIGJqLCByc2ksIHJzaiwganVzdFRlc3QpIHtcbiAgICBzaS5jb252ZXhQb2x5aGVkcm9uUmVwcmVzZW50YXRpb24ubWF0ZXJpYWwgPSBzaS5tYXRlcmlhbDtcbiAgICBzai5jb252ZXhQb2x5aGVkcm9uUmVwcmVzZW50YXRpb24ubWF0ZXJpYWwgPSBzai5tYXRlcmlhbDtcbiAgICBzaS5jb252ZXhQb2x5aGVkcm9uUmVwcmVzZW50YXRpb24uY29sbGlzaW9uUmVzcG9uc2UgPSBzaS5jb2xsaXNpb25SZXNwb25zZTtcbiAgICBzai5jb252ZXhQb2x5aGVkcm9uUmVwcmVzZW50YXRpb24uY29sbGlzaW9uUmVzcG9uc2UgPSBzai5jb2xsaXNpb25SZXNwb25zZTtcbiAgICByZXR1cm4gdGhpcy5jb252ZXhDb252ZXgoc2kuY29udmV4UG9seWhlZHJvblJlcHJlc2VudGF0aW9uLCBzai5jb252ZXhQb2x5aGVkcm9uUmVwcmVzZW50YXRpb24sIHhpLCB4aiwgcWksIHFqLCBiaSwgYmosIHNpLCBzaiwganVzdFRlc3QpO1xuICB9XG5cbiAgc3BoZXJlQm94KHNpLCBzaiwgeGksIHhqLCBxaSwgcWosIGJpLCBiaiwgcnNpLCByc2osIGp1c3RUZXN0KSB7XG4gICAgY29uc3QgdjNwb29sID0gdGhpcy52M3Bvb2w7IC8vIHdlIHJlZmVyIHRvIHRoZSBib3ggYXMgYm9keSBqXG5cbiAgICBjb25zdCBzaWRlcyA9IHNwaGVyZUJveF9zaWRlcztcbiAgICB4aS52c3ViKHhqLCBib3hfdG9fc3BoZXJlKTtcbiAgICBzai5nZXRTaWRlTm9ybWFscyhzaWRlcywgcWopO1xuICAgIGNvbnN0IFIgPSBzaS5yYWRpdXM7XG5cbiAgICBsZXQgZm91bmQgPSBmYWxzZTsgLy8gU3RvcmUgdGhlIHJlc3VsdGluZyBzaWRlIHBlbmV0cmF0aW9uIGluZm9cblxuICAgIGNvbnN0IHNpZGVfbnMgPSBzcGhlcmVCb3hfc2lkZV9ucztcbiAgICBjb25zdCBzaWRlX25zMSA9IHNwaGVyZUJveF9zaWRlX25zMTtcbiAgICBjb25zdCBzaWRlX25zMiA9IHNwaGVyZUJveF9zaWRlX25zMjtcbiAgICBsZXQgc2lkZV9oID0gbnVsbDtcbiAgICBsZXQgc2lkZV9wZW5ldHJhdGlvbnMgPSAwO1xuICAgIGxldCBzaWRlX2RvdDEgPSAwO1xuICAgIGxldCBzaWRlX2RvdDIgPSAwO1xuICAgIGxldCBzaWRlX2Rpc3RhbmNlID0gbnVsbDtcblxuICAgIGZvciAobGV0IGlkeCA9IDAsIG5zaWRlcyA9IHNpZGVzLmxlbmd0aDsgaWR4ICE9PSBuc2lkZXMgJiYgZm91bmQgPT09IGZhbHNlOyBpZHgrKykge1xuICAgICAgLy8gR2V0IHRoZSBwbGFuZSBzaWRlIG5vcm1hbCAobnMpXG4gICAgICBjb25zdCBucyA9IHNwaGVyZUJveF9ucztcbiAgICAgIG5zLmNvcHkoc2lkZXNbaWR4XSk7XG4gICAgICBjb25zdCBoID0gbnMubGVuZ3RoKCk7XG4gICAgICBucy5ub3JtYWxpemUoKTsgLy8gVGhlIG5vcm1hbC9kaXN0YW5jZSBkb3QgcHJvZHVjdCB0ZWxscyB3aGljaCBzaWRlIG9mIHRoZSBwbGFuZSB3ZSBhcmVcblxuICAgICAgY29uc3QgZG90ID0gYm94X3RvX3NwaGVyZS5kb3QobnMpO1xuXG4gICAgICBpZiAoZG90IDwgaCArIFIgJiYgZG90ID4gMCkge1xuICAgICAgICAvLyBJbnRlcnNlY3RzIHBsYW5lLiBOb3cgY2hlY2sgdGhlIG90aGVyIHR3byBkaW1lbnNpb25zXG4gICAgICAgIGNvbnN0IG5zMSA9IHNwaGVyZUJveF9uczE7XG4gICAgICAgIGNvbnN0IG5zMiA9IHNwaGVyZUJveF9uczI7XG4gICAgICAgIG5zMS5jb3B5KHNpZGVzWyhpZHggKyAxKSAlIDNdKTtcbiAgICAgICAgbnMyLmNvcHkoc2lkZXNbKGlkeCArIDIpICUgM10pO1xuICAgICAgICBjb25zdCBoMSA9IG5zMS5sZW5ndGgoKTtcbiAgICAgICAgY29uc3QgaDIgPSBuczIubGVuZ3RoKCk7XG4gICAgICAgIG5zMS5ub3JtYWxpemUoKTtcbiAgICAgICAgbnMyLm5vcm1hbGl6ZSgpO1xuICAgICAgICBjb25zdCBkb3QxID0gYm94X3RvX3NwaGVyZS5kb3QobnMxKTtcbiAgICAgICAgY29uc3QgZG90MiA9IGJveF90b19zcGhlcmUuZG90KG5zMik7XG5cbiAgICAgICAgaWYgKGRvdDEgPCBoMSAmJiBkb3QxID4gLWgxICYmIGRvdDIgPCBoMiAmJiBkb3QyID4gLWgyKSB7XG4gICAgICAgICAgY29uc3QgZGlzdCA9IE1hdGguYWJzKGRvdCAtIGggLSBSKTtcblxuICAgICAgICAgIGlmIChzaWRlX2Rpc3RhbmNlID09PSBudWxsIHx8IGRpc3QgPCBzaWRlX2Rpc3RhbmNlKSB7XG4gICAgICAgICAgICBzaWRlX2Rpc3RhbmNlID0gZGlzdDtcbiAgICAgICAgICAgIHNpZGVfZG90MSA9IGRvdDE7XG4gICAgICAgICAgICBzaWRlX2RvdDIgPSBkb3QyO1xuICAgICAgICAgICAgc2lkZV9oID0gaDtcbiAgICAgICAgICAgIHNpZGVfbnMuY29weShucyk7XG4gICAgICAgICAgICBzaWRlX25zMS5jb3B5KG5zMSk7XG4gICAgICAgICAgICBzaWRlX25zMi5jb3B5KG5zMik7XG4gICAgICAgICAgICBzaWRlX3BlbmV0cmF0aW9ucysrO1xuXG4gICAgICAgICAgICBpZiAoanVzdFRlc3QpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKHNpZGVfcGVuZXRyYXRpb25zKSB7XG4gICAgICBmb3VuZCA9IHRydWU7XG4gICAgICBjb25zdCByID0gdGhpcy5jcmVhdGVDb250YWN0RXF1YXRpb24oYmksIGJqLCBzaSwgc2osIHJzaSwgcnNqKTtcbiAgICAgIHNpZGVfbnMuc2NhbGUoLVIsIHIucmkpOyAvLyBTcGhlcmUgclxuXG4gICAgICByLm5pLmNvcHkoc2lkZV9ucyk7XG4gICAgICByLm5pLm5lZ2F0ZShyLm5pKTsgLy8gTm9ybWFsIHNob3VsZCBiZSBvdXQgb2Ygc3BoZXJlXG5cbiAgICAgIHNpZGVfbnMuc2NhbGUoc2lkZV9oLCBzaWRlX25zKTtcbiAgICAgIHNpZGVfbnMxLnNjYWxlKHNpZGVfZG90MSwgc2lkZV9uczEpO1xuICAgICAgc2lkZV9ucy52YWRkKHNpZGVfbnMxLCBzaWRlX25zKTtcbiAgICAgIHNpZGVfbnMyLnNjYWxlKHNpZGVfZG90Miwgc2lkZV9uczIpO1xuICAgICAgc2lkZV9ucy52YWRkKHNpZGVfbnMyLCByLnJqKTsgLy8gTWFrZSByZWxhdGl2ZSB0byBib2RpZXNcblxuICAgICAgci5yaS52YWRkKHhpLCByLnJpKTtcbiAgICAgIHIucmkudnN1YihiaS5wb3NpdGlvbiwgci5yaSk7XG4gICAgICByLnJqLnZhZGQoeGosIHIucmopO1xuICAgICAgci5yai52c3ViKGJqLnBvc2l0aW9uLCByLnJqKTtcbiAgICAgIHRoaXMucmVzdWx0LnB1c2gocik7XG4gICAgICB0aGlzLmNyZWF0ZUZyaWN0aW9uRXF1YXRpb25zRnJvbUNvbnRhY3QociwgdGhpcy5mcmljdGlvblJlc3VsdCk7XG4gICAgfSAvLyBDaGVjayBjb3JuZXJzXG5cblxuICAgIGxldCByaiA9IHYzcG9vbC5nZXQoKTtcbiAgICBjb25zdCBzcGhlcmVfdG9fY29ybmVyID0gc3BoZXJlQm94X3NwaGVyZV90b19jb3JuZXI7XG5cbiAgICBmb3IgKGxldCBqID0gMDsgaiAhPT0gMiAmJiAhZm91bmQ7IGorKykge1xuICAgICAgZm9yIChsZXQgayA9IDA7IGsgIT09IDIgJiYgIWZvdW5kOyBrKyspIHtcbiAgICAgICAgZm9yIChsZXQgbCA9IDA7IGwgIT09IDIgJiYgIWZvdW5kOyBsKyspIHtcbiAgICAgICAgICByai5zZXQoMCwgMCwgMCk7XG5cbiAgICAgICAgICBpZiAoaikge1xuICAgICAgICAgICAgcmoudmFkZChzaWRlc1swXSwgcmopO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByai52c3ViKHNpZGVzWzBdLCByaik7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKGspIHtcbiAgICAgICAgICAgIHJqLnZhZGQoc2lkZXNbMV0sIHJqKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmoudnN1YihzaWRlc1sxXSwgcmopO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmIChsKSB7XG4gICAgICAgICAgICByai52YWRkKHNpZGVzWzJdLCByaik7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJqLnZzdWIoc2lkZXNbMl0sIHJqKTtcbiAgICAgICAgICB9IC8vIFdvcmxkIHBvc2l0aW9uIG9mIGNvcm5lclxuXG5cbiAgICAgICAgICB4ai52YWRkKHJqLCBzcGhlcmVfdG9fY29ybmVyKTtcbiAgICAgICAgICBzcGhlcmVfdG9fY29ybmVyLnZzdWIoeGksIHNwaGVyZV90b19jb3JuZXIpO1xuXG4gICAgICAgICAgaWYgKHNwaGVyZV90b19jb3JuZXIubGVuZ3RoU3F1YXJlZCgpIDwgUiAqIFIpIHtcbiAgICAgICAgICAgIGlmIChqdXN0VGVzdCkge1xuICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZm91bmQgPSB0cnVlO1xuICAgICAgICAgICAgY29uc3QgciA9IHRoaXMuY3JlYXRlQ29udGFjdEVxdWF0aW9uKGJpLCBiaiwgc2ksIHNqLCByc2ksIHJzaik7XG4gICAgICAgICAgICByLnJpLmNvcHkoc3BoZXJlX3RvX2Nvcm5lcik7XG4gICAgICAgICAgICByLnJpLm5vcm1hbGl6ZSgpO1xuICAgICAgICAgICAgci5uaS5jb3B5KHIucmkpO1xuICAgICAgICAgICAgci5yaS5zY2FsZShSLCByLnJpKTtcbiAgICAgICAgICAgIHIucmouY29weShyaik7IC8vIE1ha2UgcmVsYXRpdmUgdG8gYm9kaWVzXG5cbiAgICAgICAgICAgIHIucmkudmFkZCh4aSwgci5yaSk7XG4gICAgICAgICAgICByLnJpLnZzdWIoYmkucG9zaXRpb24sIHIucmkpO1xuICAgICAgICAgICAgci5yai52YWRkKHhqLCByLnJqKTtcbiAgICAgICAgICAgIHIucmoudnN1Yihiai5wb3NpdGlvbiwgci5yaik7XG4gICAgICAgICAgICB0aGlzLnJlc3VsdC5wdXNoKHIpO1xuICAgICAgICAgICAgdGhpcy5jcmVhdGVGcmljdGlvbkVxdWF0aW9uc0Zyb21Db250YWN0KHIsIHRoaXMuZnJpY3Rpb25SZXN1bHQpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIHYzcG9vbC5yZWxlYXNlKHJqKTtcbiAgICByaiA9IG51bGw7IC8vIENoZWNrIGVkZ2VzXG5cbiAgICBjb25zdCBlZGdlVGFuZ2VudCA9IHYzcG9vbC5nZXQoKTtcbiAgICBjb25zdCBlZGdlQ2VudGVyID0gdjNwb29sLmdldCgpO1xuICAgIGNvbnN0IHIgPSB2M3Bvb2wuZ2V0KCk7IC8vIHIgPSBlZGdlIGNlbnRlciB0byBzcGhlcmUgY2VudGVyXG5cbiAgICBjb25zdCBvcnRob2dvbmFsID0gdjNwb29sLmdldCgpO1xuICAgIGNvbnN0IGRpc3QgPSB2M3Bvb2wuZ2V0KCk7XG4gICAgY29uc3QgTnNpZGVzID0gc2lkZXMubGVuZ3RoO1xuXG4gICAgZm9yIChsZXQgaiA9IDA7IGogIT09IE5zaWRlcyAmJiAhZm91bmQ7IGorKykge1xuICAgICAgZm9yIChsZXQgayA9IDA7IGsgIT09IE5zaWRlcyAmJiAhZm91bmQ7IGsrKykge1xuICAgICAgICBpZiAoaiAlIDMgIT09IGsgJSAzKSB7XG4gICAgICAgICAgLy8gR2V0IGVkZ2UgdGFuZ2VudFxuICAgICAgICAgIHNpZGVzW2tdLmNyb3NzKHNpZGVzW2pdLCBlZGdlVGFuZ2VudCk7XG4gICAgICAgICAgZWRnZVRhbmdlbnQubm9ybWFsaXplKCk7XG4gICAgICAgICAgc2lkZXNbal0udmFkZChzaWRlc1trXSwgZWRnZUNlbnRlcik7XG4gICAgICAgICAgci5jb3B5KHhpKTtcbiAgICAgICAgICByLnZzdWIoZWRnZUNlbnRlciwgcik7XG4gICAgICAgICAgci52c3ViKHhqLCByKTtcbiAgICAgICAgICBjb25zdCBvcnRob25vcm0gPSByLmRvdChlZGdlVGFuZ2VudCk7IC8vIGRpc3RhbmNlIGZyb20gZWRnZSBjZW50ZXIgdG8gc3BoZXJlIGNlbnRlciBpbiB0aGUgdGFuZ2VudCBkaXJlY3Rpb25cblxuICAgICAgICAgIGVkZ2VUYW5nZW50LnNjYWxlKG9ydGhvbm9ybSwgb3J0aG9nb25hbCk7IC8vIFZlY3RvciBmcm9tIGVkZ2UgY2VudGVyIHRvIHNwaGVyZSBjZW50ZXIgaW4gdGhlIHRhbmdlbnQgZGlyZWN0aW9uXG4gICAgICAgICAgLy8gRmluZCB0aGUgdGhpcmQgc2lkZSBvcnRob2dvbmFsIHRvIHRoaXMgb25lXG5cbiAgICAgICAgICBsZXQgbCA9IDA7XG5cbiAgICAgICAgICB3aGlsZSAobCA9PT0gaiAlIDMgfHwgbCA9PT0gayAlIDMpIHtcbiAgICAgICAgICAgIGwrKztcbiAgICAgICAgICB9IC8vIHZlYyBmcm9tIGVkZ2UgY2VudGVyIHRvIHNwaGVyZSBwcm9qZWN0ZWQgdG8gdGhlIHBsYW5lIG9ydGhvZ29uYWwgdG8gdGhlIGVkZ2UgdGFuZ2VudFxuXG5cbiAgICAgICAgICBkaXN0LmNvcHkoeGkpO1xuICAgICAgICAgIGRpc3QudnN1YihvcnRob2dvbmFsLCBkaXN0KTtcbiAgICAgICAgICBkaXN0LnZzdWIoZWRnZUNlbnRlciwgZGlzdCk7XG4gICAgICAgICAgZGlzdC52c3ViKHhqLCBkaXN0KTsgLy8gRGlzdGFuY2VzIGluIHRhbmdlbnQgZGlyZWN0aW9uIGFuZCBkaXN0YW5jZSBpbiB0aGUgcGxhbmUgb3J0aG9nb25hbCB0byBpdFxuXG4gICAgICAgICAgY29uc3QgdGRpc3QgPSBNYXRoLmFicyhvcnRob25vcm0pO1xuICAgICAgICAgIGNvbnN0IG5kaXN0ID0gZGlzdC5sZW5ndGgoKTtcblxuICAgICAgICAgIGlmICh0ZGlzdCA8IHNpZGVzW2xdLmxlbmd0aCgpICYmIG5kaXN0IDwgUikge1xuICAgICAgICAgICAgaWYgKGp1c3RUZXN0KSB7XG4gICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBmb3VuZCA9IHRydWU7XG4gICAgICAgICAgICBjb25zdCByZXMgPSB0aGlzLmNyZWF0ZUNvbnRhY3RFcXVhdGlvbihiaSwgYmosIHNpLCBzaiwgcnNpLCByc2opO1xuICAgICAgICAgICAgZWRnZUNlbnRlci52YWRkKG9ydGhvZ29uYWwsIHJlcy5yaik7IC8vIGJveCByalxuXG4gICAgICAgICAgICByZXMucmouY29weShyZXMucmopO1xuICAgICAgICAgICAgZGlzdC5uZWdhdGUocmVzLm5pKTtcbiAgICAgICAgICAgIHJlcy5uaS5ub3JtYWxpemUoKTtcbiAgICAgICAgICAgIHJlcy5yaS5jb3B5KHJlcy5yaik7XG4gICAgICAgICAgICByZXMucmkudmFkZCh4aiwgcmVzLnJpKTtcbiAgICAgICAgICAgIHJlcy5yaS52c3ViKHhpLCByZXMucmkpO1xuICAgICAgICAgICAgcmVzLnJpLm5vcm1hbGl6ZSgpO1xuICAgICAgICAgICAgcmVzLnJpLnNjYWxlKFIsIHJlcy5yaSk7IC8vIE1ha2UgcmVsYXRpdmUgdG8gYm9kaWVzXG5cbiAgICAgICAgICAgIHJlcy5yaS52YWRkKHhpLCByZXMucmkpO1xuICAgICAgICAgICAgcmVzLnJpLnZzdWIoYmkucG9zaXRpb24sIHJlcy5yaSk7XG4gICAgICAgICAgICByZXMucmoudmFkZCh4aiwgcmVzLnJqKTtcbiAgICAgICAgICAgIHJlcy5yai52c3ViKGJqLnBvc2l0aW9uLCByZXMucmopO1xuICAgICAgICAgICAgdGhpcy5yZXN1bHQucHVzaChyZXMpO1xuICAgICAgICAgICAgdGhpcy5jcmVhdGVGcmljdGlvbkVxdWF0aW9uc0Zyb21Db250YWN0KHJlcywgdGhpcy5mcmljdGlvblJlc3VsdCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgdjNwb29sLnJlbGVhc2UoZWRnZVRhbmdlbnQsIGVkZ2VDZW50ZXIsIHIsIG9ydGhvZ29uYWwsIGRpc3QpO1xuICB9XG5cbiAgcGxhbmVCb3goc2ksIHNqLCB4aSwgeGosIHFpLCBxaiwgYmksIGJqLCByc2ksIHJzaiwganVzdFRlc3QpIHtcbiAgICBzai5jb252ZXhQb2x5aGVkcm9uUmVwcmVzZW50YXRpb24ubWF0ZXJpYWwgPSBzai5tYXRlcmlhbDtcbiAgICBzai5jb252ZXhQb2x5aGVkcm9uUmVwcmVzZW50YXRpb24uY29sbGlzaW9uUmVzcG9uc2UgPSBzai5jb2xsaXNpb25SZXNwb25zZTtcbiAgICBzai5jb252ZXhQb2x5aGVkcm9uUmVwcmVzZW50YXRpb24uaWQgPSBzai5pZDtcbiAgICByZXR1cm4gdGhpcy5wbGFuZUNvbnZleChzaSwgc2ouY29udmV4UG9seWhlZHJvblJlcHJlc2VudGF0aW9uLCB4aSwgeGosIHFpLCBxaiwgYmksIGJqLCBzaSwgc2osIGp1c3RUZXN0KTtcbiAgfVxuXG4gIGNvbnZleENvbnZleChzaSwgc2osIHhpLCB4aiwgcWksIHFqLCBiaSwgYmosIHJzaSwgcnNqLCBqdXN0VGVzdCwgZmFjZUxpc3RBLCBmYWNlTGlzdEIpIHtcbiAgICBjb25zdCBzZXBBeGlzID0gY29udmV4Q29udmV4X3NlcEF4aXM7XG5cbiAgICBpZiAoeGkuZGlzdGFuY2VUbyh4aikgPiBzaS5ib3VuZGluZ1NwaGVyZVJhZGl1cyArIHNqLmJvdW5kaW5nU3BoZXJlUmFkaXVzKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKHNpLmZpbmRTZXBhcmF0aW5nQXhpcyhzaiwgeGksIHFpLCB4aiwgcWosIHNlcEF4aXMsIGZhY2VMaXN0QSwgZmFjZUxpc3RCKSkge1xuICAgICAgY29uc3QgcmVzID0gW107XG4gICAgICBjb25zdCBxID0gY29udmV4Q29udmV4X3E7XG4gICAgICBzaS5jbGlwQWdhaW5zdEh1bGwoeGksIHFpLCBzaiwgeGosIHFqLCBzZXBBeGlzLCAtMTAwLCAxMDAsIHJlcyk7XG4gICAgICBsZXQgbnVtQ29udGFjdHMgPSAwO1xuXG4gICAgICBmb3IgKGxldCBqID0gMDsgaiAhPT0gcmVzLmxlbmd0aDsgaisrKSB7XG4gICAgICAgIGlmIChqdXN0VGVzdCkge1xuICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgciA9IHRoaXMuY3JlYXRlQ29udGFjdEVxdWF0aW9uKGJpLCBiaiwgc2ksIHNqLCByc2ksIHJzaik7XG4gICAgICAgIGNvbnN0IHJpID0gci5yaTtcbiAgICAgICAgY29uc3QgcmogPSByLnJqO1xuICAgICAgICBzZXBBeGlzLm5lZ2F0ZShyLm5pKTtcbiAgICAgICAgcmVzW2pdLm5vcm1hbC5uZWdhdGUocSk7XG4gICAgICAgIHEuc2NhbGUocmVzW2pdLmRlcHRoLCBxKTtcbiAgICAgICAgcmVzW2pdLnBvaW50LnZhZGQocSwgcmkpO1xuICAgICAgICByai5jb3B5KHJlc1tqXS5wb2ludCk7IC8vIENvbnRhY3QgcG9pbnRzIGFyZSBpbiB3b3JsZCBjb29yZGluYXRlcy4gVHJhbnNmb3JtIGJhY2sgdG8gcmVsYXRpdmVcblxuICAgICAgICByaS52c3ViKHhpLCByaSk7XG4gICAgICAgIHJqLnZzdWIoeGosIHJqKTsgLy8gTWFrZSByZWxhdGl2ZSB0byBib2RpZXNcblxuICAgICAgICByaS52YWRkKHhpLCByaSk7XG4gICAgICAgIHJpLnZzdWIoYmkucG9zaXRpb24sIHJpKTtcbiAgICAgICAgcmoudmFkZCh4aiwgcmopO1xuICAgICAgICByai52c3ViKGJqLnBvc2l0aW9uLCByaik7XG4gICAgICAgIHRoaXMucmVzdWx0LnB1c2gocik7XG4gICAgICAgIG51bUNvbnRhY3RzKys7XG5cbiAgICAgICAgaWYgKCF0aGlzLmVuYWJsZUZyaWN0aW9uUmVkdWN0aW9uKSB7XG4gICAgICAgICAgdGhpcy5jcmVhdGVGcmljdGlvbkVxdWF0aW9uc0Zyb21Db250YWN0KHIsIHRoaXMuZnJpY3Rpb25SZXN1bHQpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmICh0aGlzLmVuYWJsZUZyaWN0aW9uUmVkdWN0aW9uICYmIG51bUNvbnRhY3RzKSB7XG4gICAgICAgIHRoaXMuY3JlYXRlRnJpY3Rpb25Gcm9tQXZlcmFnZShudW1Db250YWN0cyk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgc3BoZXJlQ29udmV4KHNpLCBzaiwgeGksIHhqLCBxaSwgcWosIGJpLCBiaiwgcnNpLCByc2osIGp1c3RUZXN0KSB7XG4gICAgY29uc3QgdjNwb29sID0gdGhpcy52M3Bvb2w7XG4gICAgeGkudnN1Yih4aiwgY29udmV4X3RvX3NwaGVyZSk7XG4gICAgY29uc3Qgbm9ybWFscyA9IHNqLmZhY2VOb3JtYWxzO1xuICAgIGNvbnN0IGZhY2VzID0gc2ouZmFjZXM7XG4gICAgY29uc3QgdmVydHMgPSBzai52ZXJ0aWNlcztcbiAgICBjb25zdCBSID0gc2kucmFkaXVzO1xuICAgIC8vICAgICByZXR1cm47XG4gICAgLy8gfVxuXG4gICAgbGV0IGZvdW5kID0gZmFsc2U7IC8vIENoZWNrIGNvcm5lcnNcblxuICAgIGZvciAobGV0IGkgPSAwOyBpICE9PSB2ZXJ0cy5sZW5ndGg7IGkrKykge1xuICAgICAgY29uc3QgdiA9IHZlcnRzW2ldOyAvLyBXb3JsZCBwb3NpdGlvbiBvZiBjb3JuZXJcblxuICAgICAgY29uc3Qgd29ybGRDb3JuZXIgPSBzcGhlcmVDb252ZXhfd29ybGRDb3JuZXI7XG4gICAgICBxai52bXVsdCh2LCB3b3JsZENvcm5lcik7XG4gICAgICB4ai52YWRkKHdvcmxkQ29ybmVyLCB3b3JsZENvcm5lcik7XG4gICAgICBjb25zdCBzcGhlcmVfdG9fY29ybmVyID0gc3BoZXJlQ29udmV4X3NwaGVyZVRvQ29ybmVyO1xuICAgICAgd29ybGRDb3JuZXIudnN1Yih4aSwgc3BoZXJlX3RvX2Nvcm5lcik7XG5cbiAgICAgIGlmIChzcGhlcmVfdG9fY29ybmVyLmxlbmd0aFNxdWFyZWQoKSA8IFIgKiBSKSB7XG4gICAgICAgIGlmIChqdXN0VGVzdCkge1xuICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgZm91bmQgPSB0cnVlO1xuICAgICAgICBjb25zdCByID0gdGhpcy5jcmVhdGVDb250YWN0RXF1YXRpb24oYmksIGJqLCBzaSwgc2osIHJzaSwgcnNqKTtcbiAgICAgICAgci5yaS5jb3B5KHNwaGVyZV90b19jb3JuZXIpO1xuICAgICAgICByLnJpLm5vcm1hbGl6ZSgpO1xuICAgICAgICByLm5pLmNvcHkoci5yaSk7XG4gICAgICAgIHIucmkuc2NhbGUoUiwgci5yaSk7XG4gICAgICAgIHdvcmxkQ29ybmVyLnZzdWIoeGosIHIucmopOyAvLyBTaG91bGQgYmUgcmVsYXRpdmUgdG8gdGhlIGJvZHkuXG5cbiAgICAgICAgci5yaS52YWRkKHhpLCByLnJpKTtcbiAgICAgICAgci5yaS52c3ViKGJpLnBvc2l0aW9uLCByLnJpKTsgLy8gU2hvdWxkIGJlIHJlbGF0aXZlIHRvIHRoZSBib2R5LlxuXG4gICAgICAgIHIucmoudmFkZCh4aiwgci5yaik7XG4gICAgICAgIHIucmoudnN1Yihiai5wb3NpdGlvbiwgci5yaik7XG4gICAgICAgIHRoaXMucmVzdWx0LnB1c2gocik7XG4gICAgICAgIHRoaXMuY3JlYXRlRnJpY3Rpb25FcXVhdGlvbnNGcm9tQ29udGFjdChyLCB0aGlzLmZyaWN0aW9uUmVzdWx0KTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgIH0gLy8gQ2hlY2sgc2lkZSAocGxhbmUpIGludGVyc2VjdGlvbnNcblxuXG4gICAgZm9yIChsZXQgaSA9IDAsIG5mYWNlcyA9IGZhY2VzLmxlbmd0aDsgaSAhPT0gbmZhY2VzICYmIGZvdW5kID09PSBmYWxzZTsgaSsrKSB7XG4gICAgICBjb25zdCBub3JtYWwgPSBub3JtYWxzW2ldO1xuICAgICAgY29uc3QgZmFjZSA9IGZhY2VzW2ldOyAvLyBHZXQgd29ybGQtdHJhbnNmb3JtZWQgbm9ybWFsIG9mIHRoZSBmYWNlXG5cbiAgICAgIGNvbnN0IHdvcmxkTm9ybWFsID0gc3BoZXJlQ29udmV4X3dvcmxkTm9ybWFsO1xuICAgICAgcWoudm11bHQobm9ybWFsLCB3b3JsZE5vcm1hbCk7IC8vIEdldCBhIHdvcmxkIHZlcnRleCBmcm9tIHRoZSBmYWNlXG5cbiAgICAgIGNvbnN0IHdvcmxkUG9pbnQgPSBzcGhlcmVDb252ZXhfd29ybGRQb2ludDtcbiAgICAgIHFqLnZtdWx0KHZlcnRzW2ZhY2VbMF1dLCB3b3JsZFBvaW50KTtcbiAgICAgIHdvcmxkUG9pbnQudmFkZCh4aiwgd29ybGRQb2ludCk7IC8vIEdldCBhIHBvaW50IG9uIHRoZSBzcGhlcmUsIGNsb3Nlc3QgdG8gdGhlIGZhY2Ugbm9ybWFsXG5cbiAgICAgIGNvbnN0IHdvcmxkU3BoZXJlUG9pbnRDbG9zZXN0VG9QbGFuZSA9IHNwaGVyZUNvbnZleF93b3JsZFNwaGVyZVBvaW50Q2xvc2VzdFRvUGxhbmU7XG4gICAgICB3b3JsZE5vcm1hbC5zY2FsZSgtUiwgd29ybGRTcGhlcmVQb2ludENsb3Nlc3RUb1BsYW5lKTtcbiAgICAgIHhpLnZhZGQod29ybGRTcGhlcmVQb2ludENsb3Nlc3RUb1BsYW5lLCB3b3JsZFNwaGVyZVBvaW50Q2xvc2VzdFRvUGxhbmUpOyAvLyBWZWN0b3IgZnJvbSBhIGZhY2UgcG9pbnQgdG8gdGhlIGNsb3Nlc3QgcG9pbnQgb24gdGhlIHNwaGVyZVxuXG4gICAgICBjb25zdCBwZW5ldHJhdGlvblZlYyA9IHNwaGVyZUNvbnZleF9wZW5ldHJhdGlvblZlYztcbiAgICAgIHdvcmxkU3BoZXJlUG9pbnRDbG9zZXN0VG9QbGFuZS52c3ViKHdvcmxkUG9pbnQsIHBlbmV0cmF0aW9uVmVjKTsgLy8gVGhlIHBlbmV0cmF0aW9uLiBOZWdhdGl2ZSB2YWx1ZSBtZWFucyBvdmVybGFwLlxuXG4gICAgICBjb25zdCBwZW5ldHJhdGlvbiA9IHBlbmV0cmF0aW9uVmVjLmRvdCh3b3JsZE5vcm1hbCk7XG4gICAgICBjb25zdCB3b3JsZFBvaW50VG9TcGhlcmUgPSBzcGhlcmVDb252ZXhfc3BoZXJlVG9Xb3JsZFBvaW50O1xuICAgICAgeGkudnN1Yih3b3JsZFBvaW50LCB3b3JsZFBvaW50VG9TcGhlcmUpO1xuXG4gICAgICBpZiAocGVuZXRyYXRpb24gPCAwICYmIHdvcmxkUG9pbnRUb1NwaGVyZS5kb3Qod29ybGROb3JtYWwpID4gMCkge1xuICAgICAgICAvLyBJbnRlcnNlY3RzIHBsYW5lLiBOb3cgY2hlY2sgaWYgdGhlIHNwaGVyZSBpcyBpbnNpZGUgdGhlIGZhY2UgcG9seWdvblxuICAgICAgICBjb25zdCBmYWNlVmVydHMgPSBbXTsgLy8gRmFjZSB2ZXJ0aWNlcywgaW4gd29ybGQgY29vcmRzXG5cbiAgICAgICAgZm9yIChsZXQgaiA9IDAsIE52ZXJ0cyA9IGZhY2UubGVuZ3RoOyBqICE9PSBOdmVydHM7IGorKykge1xuICAgICAgICAgIGNvbnN0IHdvcmxkVmVydGV4ID0gdjNwb29sLmdldCgpO1xuICAgICAgICAgIHFqLnZtdWx0KHZlcnRzW2ZhY2Vbal1dLCB3b3JsZFZlcnRleCk7XG4gICAgICAgICAgeGoudmFkZCh3b3JsZFZlcnRleCwgd29ybGRWZXJ0ZXgpO1xuICAgICAgICAgIGZhY2VWZXJ0cy5wdXNoKHdvcmxkVmVydGV4KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChwb2ludEluUG9seWdvbihmYWNlVmVydHMsIHdvcmxkTm9ybWFsLCB4aSkpIHtcbiAgICAgICAgICAvLyBJcyB0aGUgc3BoZXJlIGNlbnRlciBpbiB0aGUgZmFjZSBwb2x5Z29uP1xuICAgICAgICAgIGlmIChqdXN0VGVzdCkge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgZm91bmQgPSB0cnVlO1xuICAgICAgICAgIGNvbnN0IHIgPSB0aGlzLmNyZWF0ZUNvbnRhY3RFcXVhdGlvbihiaSwgYmosIHNpLCBzaiwgcnNpLCByc2opO1xuICAgICAgICAgIHdvcmxkTm9ybWFsLnNjYWxlKC1SLCByLnJpKTsgLy8gQ29udGFjdCBvZmZzZXQsIGZyb20gc3BoZXJlIGNlbnRlciB0byBjb250YWN0XG5cbiAgICAgICAgICB3b3JsZE5vcm1hbC5uZWdhdGUoci5uaSk7IC8vIE5vcm1hbCBwb2ludGluZyBvdXQgb2Ygc3BoZXJlXG5cbiAgICAgICAgICBjb25zdCBwZW5ldHJhdGlvblZlYzIgPSB2M3Bvb2wuZ2V0KCk7XG4gICAgICAgICAgd29ybGROb3JtYWwuc2NhbGUoLXBlbmV0cmF0aW9uLCBwZW5ldHJhdGlvblZlYzIpO1xuICAgICAgICAgIGNvbnN0IHBlbmV0cmF0aW9uU3BoZXJlUG9pbnQgPSB2M3Bvb2wuZ2V0KCk7XG4gICAgICAgICAgd29ybGROb3JtYWwuc2NhbGUoLVIsIHBlbmV0cmF0aW9uU3BoZXJlUG9pbnQpOyAvL3hpLnZzdWIoeGopLnZhZGQocGVuZXRyYXRpb25TcGhlcmVQb2ludCkudmFkZChwZW5ldHJhdGlvblZlYzIgLCByLnJqKTtcblxuICAgICAgICAgIHhpLnZzdWIoeGosIHIucmopO1xuICAgICAgICAgIHIucmoudmFkZChwZW5ldHJhdGlvblNwaGVyZVBvaW50LCByLnJqKTtcbiAgICAgICAgICByLnJqLnZhZGQocGVuZXRyYXRpb25WZWMyLCByLnJqKTsgLy8gU2hvdWxkIGJlIHJlbGF0aXZlIHRvIHRoZSBib2R5LlxuXG4gICAgICAgICAgci5yai52YWRkKHhqLCByLnJqKTtcbiAgICAgICAgICByLnJqLnZzdWIoYmoucG9zaXRpb24sIHIucmopOyAvLyBTaG91bGQgYmUgcmVsYXRpdmUgdG8gdGhlIGJvZHkuXG5cbiAgICAgICAgICByLnJpLnZhZGQoeGksIHIucmkpO1xuICAgICAgICAgIHIucmkudnN1YihiaS5wb3NpdGlvbiwgci5yaSk7XG4gICAgICAgICAgdjNwb29sLnJlbGVhc2UocGVuZXRyYXRpb25WZWMyKTtcbiAgICAgICAgICB2M3Bvb2wucmVsZWFzZShwZW5ldHJhdGlvblNwaGVyZVBvaW50KTtcbiAgICAgICAgICB0aGlzLnJlc3VsdC5wdXNoKHIpO1xuICAgICAgICAgIHRoaXMuY3JlYXRlRnJpY3Rpb25FcXVhdGlvbnNGcm9tQ29udGFjdChyLCB0aGlzLmZyaWN0aW9uUmVzdWx0KTsgLy8gUmVsZWFzZSB3b3JsZCB2ZXJ0aWNlc1xuXG4gICAgICAgICAgZm9yIChsZXQgaiA9IDAsIE5mYWNldmVydHMgPSBmYWNlVmVydHMubGVuZ3RoOyBqICE9PSBOZmFjZXZlcnRzOyBqKyspIHtcbiAgICAgICAgICAgIHYzcG9vbC5yZWxlYXNlKGZhY2VWZXJ0c1tqXSk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgcmV0dXJuOyAvLyBXZSBvbmx5IGV4cGVjdCAqb25lKiBmYWNlIGNvbnRhY3RcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyBFZGdlP1xuICAgICAgICAgIGZvciAobGV0IGogPSAwOyBqICE9PSBmYWNlLmxlbmd0aDsgaisrKSB7XG4gICAgICAgICAgICAvLyBHZXQgdHdvIHdvcmxkIHRyYW5zZm9ybWVkIHZlcnRpY2VzXG4gICAgICAgICAgICBjb25zdCB2MSA9IHYzcG9vbC5nZXQoKTtcbiAgICAgICAgICAgIGNvbnN0IHYyID0gdjNwb29sLmdldCgpO1xuICAgICAgICAgICAgcWoudm11bHQodmVydHNbZmFjZVsoaiArIDEpICUgZmFjZS5sZW5ndGhdXSwgdjEpO1xuICAgICAgICAgICAgcWoudm11bHQodmVydHNbZmFjZVsoaiArIDIpICUgZmFjZS5sZW5ndGhdXSwgdjIpO1xuICAgICAgICAgICAgeGoudmFkZCh2MSwgdjEpO1xuICAgICAgICAgICAgeGoudmFkZCh2MiwgdjIpOyAvLyBDb25zdHJ1Y3QgZWRnZSB2ZWN0b3JcblxuICAgICAgICAgICAgY29uc3QgZWRnZSA9IHNwaGVyZUNvbnZleF9lZGdlO1xuICAgICAgICAgICAgdjIudnN1Yih2MSwgZWRnZSk7IC8vIENvbnN0cnVjdCB0aGUgc2FtZSB2ZWN0b3IsIGJ1dCBub3JtYWxpemVkXG5cbiAgICAgICAgICAgIGNvbnN0IGVkZ2VVbml0ID0gc3BoZXJlQ29udmV4X2VkZ2VVbml0O1xuICAgICAgICAgICAgZWRnZS51bml0KGVkZ2VVbml0KTsgLy8gcCBpcyB4aSBwcm9qZWN0ZWQgb250byB0aGUgZWRnZVxuXG4gICAgICAgICAgICBjb25zdCBwID0gdjNwb29sLmdldCgpO1xuICAgICAgICAgICAgY29uc3QgdjFfdG9feGkgPSB2M3Bvb2wuZ2V0KCk7XG4gICAgICAgICAgICB4aS52c3ViKHYxLCB2MV90b194aSk7XG4gICAgICAgICAgICBjb25zdCBkb3QgPSB2MV90b194aS5kb3QoZWRnZVVuaXQpO1xuICAgICAgICAgICAgZWRnZVVuaXQuc2NhbGUoZG90LCBwKTtcbiAgICAgICAgICAgIHAudmFkZCh2MSwgcCk7IC8vIENvbXB1dGUgYSB2ZWN0b3IgZnJvbSBwIHRvIHRoZSBjZW50ZXIgb2YgdGhlIHNwaGVyZVxuXG4gICAgICAgICAgICBjb25zdCB4aV90b19wID0gdjNwb29sLmdldCgpO1xuICAgICAgICAgICAgcC52c3ViKHhpLCB4aV90b19wKTsgLy8gQ29sbGlzaW9uIGlmIHRoZSBlZGdlLXNwaGVyZSBkaXN0YW5jZSBpcyBsZXNzIHRoYW4gdGhlIHJhZGl1c1xuICAgICAgICAgICAgLy8gQU5EIGlmIHAgaXMgaW4gYmV0d2VlbiB2MSBhbmQgdjJcblxuICAgICAgICAgICAgaWYgKGRvdCA+IDAgJiYgZG90ICogZG90IDwgZWRnZS5sZW5ndGhTcXVhcmVkKCkgJiYgeGlfdG9fcC5sZW5ndGhTcXVhcmVkKCkgPCBSICogUikge1xuICAgICAgICAgICAgICAvLyBDb2xsaXNpb24gaWYgdGhlIGVkZ2Utc3BoZXJlIGRpc3RhbmNlIGlzIGxlc3MgdGhhbiB0aGUgcmFkaXVzXG4gICAgICAgICAgICAgIC8vIEVkZ2UgY29udGFjdCFcbiAgICAgICAgICAgICAgaWYgKGp1c3RUZXN0KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICBjb25zdCByID0gdGhpcy5jcmVhdGVDb250YWN0RXF1YXRpb24oYmksIGJqLCBzaSwgc2osIHJzaSwgcnNqKTtcbiAgICAgICAgICAgICAgcC52c3ViKHhqLCByLnJqKTtcbiAgICAgICAgICAgICAgcC52c3ViKHhpLCByLm5pKTtcbiAgICAgICAgICAgICAgci5uaS5ub3JtYWxpemUoKTtcbiAgICAgICAgICAgICAgci5uaS5zY2FsZShSLCByLnJpKTsgLy8gU2hvdWxkIGJlIHJlbGF0aXZlIHRvIHRoZSBib2R5LlxuXG4gICAgICAgICAgICAgIHIucmoudmFkZCh4aiwgci5yaik7XG4gICAgICAgICAgICAgIHIucmoudnN1Yihiai5wb3NpdGlvbiwgci5yaik7IC8vIFNob3VsZCBiZSByZWxhdGl2ZSB0byB0aGUgYm9keS5cblxuICAgICAgICAgICAgICByLnJpLnZhZGQoeGksIHIucmkpO1xuICAgICAgICAgICAgICByLnJpLnZzdWIoYmkucG9zaXRpb24sIHIucmkpO1xuICAgICAgICAgICAgICB0aGlzLnJlc3VsdC5wdXNoKHIpO1xuICAgICAgICAgICAgICB0aGlzLmNyZWF0ZUZyaWN0aW9uRXF1YXRpb25zRnJvbUNvbnRhY3QociwgdGhpcy5mcmljdGlvblJlc3VsdCk7IC8vIFJlbGVhc2Ugd29ybGQgdmVydGljZXNcblxuICAgICAgICAgICAgICBmb3IgKGxldCBqID0gMCwgTmZhY2V2ZXJ0cyA9IGZhY2VWZXJ0cy5sZW5ndGg7IGogIT09IE5mYWNldmVydHM7IGorKykge1xuICAgICAgICAgICAgICAgIHYzcG9vbC5yZWxlYXNlKGZhY2VWZXJ0c1tqXSk7XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICB2M3Bvb2wucmVsZWFzZSh2MSk7XG4gICAgICAgICAgICAgIHYzcG9vbC5yZWxlYXNlKHYyKTtcbiAgICAgICAgICAgICAgdjNwb29sLnJlbGVhc2UocCk7XG4gICAgICAgICAgICAgIHYzcG9vbC5yZWxlYXNlKHhpX3RvX3ApO1xuICAgICAgICAgICAgICB2M3Bvb2wucmVsZWFzZSh2MV90b194aSk7XG4gICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdjNwb29sLnJlbGVhc2UodjEpO1xuICAgICAgICAgICAgdjNwb29sLnJlbGVhc2UodjIpO1xuICAgICAgICAgICAgdjNwb29sLnJlbGVhc2UocCk7XG4gICAgICAgICAgICB2M3Bvb2wucmVsZWFzZSh4aV90b19wKTtcbiAgICAgICAgICAgIHYzcG9vbC5yZWxlYXNlKHYxX3RvX3hpKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gLy8gUmVsZWFzZSB3b3JsZCB2ZXJ0aWNlc1xuXG5cbiAgICAgICAgZm9yIChsZXQgaiA9IDAsIE5mYWNldmVydHMgPSBmYWNlVmVydHMubGVuZ3RoOyBqICE9PSBOZmFjZXZlcnRzOyBqKyspIHtcbiAgICAgICAgICB2M3Bvb2wucmVsZWFzZShmYWNlVmVydHNbal0pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcGxhbmVDb252ZXgocGxhbmVTaGFwZSwgY29udmV4U2hhcGUsIHBsYW5lUG9zaXRpb24sIGNvbnZleFBvc2l0aW9uLCBwbGFuZVF1YXQsIGNvbnZleFF1YXQsIHBsYW5lQm9keSwgY29udmV4Qm9keSwgc2ksIHNqLCBqdXN0VGVzdCkge1xuICAgIC8vIFNpbXBseSByZXR1cm4gdGhlIHBvaW50cyBiZWhpbmQgdGhlIHBsYW5lLlxuICAgIGNvbnN0IHdvcmxkVmVydGV4ID0gcGxhbmVDb252ZXhfdjtcbiAgICBjb25zdCB3b3JsZE5vcm1hbCA9IHBsYW5lQ29udmV4X25vcm1hbDtcbiAgICB3b3JsZE5vcm1hbC5zZXQoMCwgMCwgMSk7XG4gICAgcGxhbmVRdWF0LnZtdWx0KHdvcmxkTm9ybWFsLCB3b3JsZE5vcm1hbCk7IC8vIFR1cm4gbm9ybWFsIGFjY29yZGluZyB0byBwbGFuZSBvcmllbnRhdGlvblxuXG4gICAgbGV0IG51bUNvbnRhY3RzID0gMDtcbiAgICBjb25zdCByZWxwb3MgPSBwbGFuZUNvbnZleF9yZWxwb3M7XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSAhPT0gY29udmV4U2hhcGUudmVydGljZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgIC8vIEdldCB3b3JsZCBjb252ZXggdmVydGV4XG4gICAgICB3b3JsZFZlcnRleC5jb3B5KGNvbnZleFNoYXBlLnZlcnRpY2VzW2ldKTtcbiAgICAgIGNvbnZleFF1YXQudm11bHQod29ybGRWZXJ0ZXgsIHdvcmxkVmVydGV4KTtcbiAgICAgIGNvbnZleFBvc2l0aW9uLnZhZGQod29ybGRWZXJ0ZXgsIHdvcmxkVmVydGV4KTtcbiAgICAgIHdvcmxkVmVydGV4LnZzdWIocGxhbmVQb3NpdGlvbiwgcmVscG9zKTtcbiAgICAgIGNvbnN0IGRvdCA9IHdvcmxkTm9ybWFsLmRvdChyZWxwb3MpO1xuXG4gICAgICBpZiAoZG90IDw9IDAuMCkge1xuICAgICAgICBpZiAoanVzdFRlc3QpIHtcbiAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHIgPSB0aGlzLmNyZWF0ZUNvbnRhY3RFcXVhdGlvbihwbGFuZUJvZHksIGNvbnZleEJvZHksIHBsYW5lU2hhcGUsIGNvbnZleFNoYXBlLCBzaSwgc2opOyAvLyBHZXQgdmVydGV4IHBvc2l0aW9uIHByb2plY3RlZCBvbiBwbGFuZVxuXG4gICAgICAgIGNvbnN0IHByb2plY3RlZCA9IHBsYW5lQ29udmV4X3Byb2plY3RlZDtcbiAgICAgICAgd29ybGROb3JtYWwuc2NhbGUod29ybGROb3JtYWwuZG90KHJlbHBvcyksIHByb2plY3RlZCk7XG4gICAgICAgIHdvcmxkVmVydGV4LnZzdWIocHJvamVjdGVkLCBwcm9qZWN0ZWQpO1xuICAgICAgICBwcm9qZWN0ZWQudnN1YihwbGFuZVBvc2l0aW9uLCByLnJpKTsgLy8gRnJvbSBwbGFuZSB0byB2ZXJ0ZXggcHJvamVjdGVkIG9uIHBsYW5lXG5cbiAgICAgICAgci5uaS5jb3B5KHdvcmxkTm9ybWFsKTsgLy8gQ29udGFjdCBub3JtYWwgaXMgdGhlIHBsYW5lIG5vcm1hbCBvdXQgZnJvbSBwbGFuZVxuICAgICAgICAvLyByaiBpcyBub3cganVzdCB0aGUgdmVjdG9yIGZyb20gdGhlIGNvbnZleCBjZW50ZXIgdG8gdGhlIHZlcnRleFxuXG4gICAgICAgIHdvcmxkVmVydGV4LnZzdWIoY29udmV4UG9zaXRpb24sIHIucmopOyAvLyBNYWtlIGl0IHJlbGF0aXZlIHRvIHRoZSBib2R5XG5cbiAgICAgICAgci5yaS52YWRkKHBsYW5lUG9zaXRpb24sIHIucmkpO1xuICAgICAgICByLnJpLnZzdWIocGxhbmVCb2R5LnBvc2l0aW9uLCByLnJpKTtcbiAgICAgICAgci5yai52YWRkKGNvbnZleFBvc2l0aW9uLCByLnJqKTtcbiAgICAgICAgci5yai52c3ViKGNvbnZleEJvZHkucG9zaXRpb24sIHIucmopO1xuICAgICAgICB0aGlzLnJlc3VsdC5wdXNoKHIpO1xuICAgICAgICBudW1Db250YWN0cysrO1xuXG4gICAgICAgIGlmICghdGhpcy5lbmFibGVGcmljdGlvblJlZHVjdGlvbikge1xuICAgICAgICAgIHRoaXMuY3JlYXRlRnJpY3Rpb25FcXVhdGlvbnNGcm9tQ29udGFjdChyLCB0aGlzLmZyaWN0aW9uUmVzdWx0KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGlmICh0aGlzLmVuYWJsZUZyaWN0aW9uUmVkdWN0aW9uICYmIG51bUNvbnRhY3RzKSB7XG4gICAgICB0aGlzLmNyZWF0ZUZyaWN0aW9uRnJvbUF2ZXJhZ2UobnVtQ29udGFjdHMpO1xuICAgIH1cbiAgfVxuXG4gIGJveENvbnZleChzaSwgc2osIHhpLCB4aiwgcWksIHFqLCBiaSwgYmosIHJzaSwgcnNqLCBqdXN0VGVzdCkge1xuICAgIHNpLmNvbnZleFBvbHloZWRyb25SZXByZXNlbnRhdGlvbi5tYXRlcmlhbCA9IHNpLm1hdGVyaWFsO1xuICAgIHNpLmNvbnZleFBvbHloZWRyb25SZXByZXNlbnRhdGlvbi5jb2xsaXNpb25SZXNwb25zZSA9IHNpLmNvbGxpc2lvblJlc3BvbnNlO1xuICAgIHJldHVybiB0aGlzLmNvbnZleENvbnZleChzaS5jb252ZXhQb2x5aGVkcm9uUmVwcmVzZW50YXRpb24sIHNqLCB4aSwgeGosIHFpLCBxaiwgYmksIGJqLCBzaSwgc2osIGp1c3RUZXN0KTtcbiAgfVxuXG4gIHNwaGVyZUhlaWdodGZpZWxkKHNwaGVyZVNoYXBlLCBoZlNoYXBlLCBzcGhlcmVQb3MsIGhmUG9zLCBzcGhlcmVRdWF0LCBoZlF1YXQsIHNwaGVyZUJvZHksIGhmQm9keSwgcnNpLCByc2osIGp1c3RUZXN0KSB7XG4gICAgY29uc3QgZGF0YSA9IGhmU2hhcGUuZGF0YTtcbiAgICBjb25zdCByYWRpdXMgPSBzcGhlcmVTaGFwZS5yYWRpdXM7XG4gICAgY29uc3QgdyA9IGhmU2hhcGUuZWxlbWVudFNpemU7XG4gICAgY29uc3Qgd29ybGRQaWxsYXJPZmZzZXQgPSBzcGhlcmVIZWlnaHRmaWVsZF90bXAyOyAvLyBHZXQgc3BoZXJlIHBvc2l0aW9uIHRvIGhlaWdodGZpZWxkIGxvY2FsIVxuXG4gICAgY29uc3QgbG9jYWxTcGhlcmVQb3MgPSBzcGhlcmVIZWlnaHRmaWVsZF90bXAxO1xuICAgIFRyYW5zZm9ybS5wb2ludFRvTG9jYWxGcmFtZShoZlBvcywgaGZRdWF0LCBzcGhlcmVQb3MsIGxvY2FsU3BoZXJlUG9zKTsgLy8gR2V0IHRoZSBpbmRleCBvZiB0aGUgZGF0YSBwb2ludHMgdG8gdGVzdCBhZ2FpbnN0XG5cbiAgICBsZXQgaU1pblggPSBNYXRoLmZsb29yKChsb2NhbFNwaGVyZVBvcy54IC0gcmFkaXVzKSAvIHcpIC0gMTtcbiAgICBsZXQgaU1heFggPSBNYXRoLmNlaWwoKGxvY2FsU3BoZXJlUG9zLnggKyByYWRpdXMpIC8gdykgKyAxO1xuICAgIGxldCBpTWluWSA9IE1hdGguZmxvb3IoKGxvY2FsU3BoZXJlUG9zLnkgLSByYWRpdXMpIC8gdykgLSAxO1xuICAgIGxldCBpTWF4WSA9IE1hdGguY2VpbCgobG9jYWxTcGhlcmVQb3MueSArIHJhZGl1cykgLyB3KSArIDE7IC8vIEJhaWwgb3V0IGlmIHdlIGFyZSBvdXQgb2YgdGhlIHRlcnJhaW5cblxuICAgIGlmIChpTWF4WCA8IDAgfHwgaU1heFkgPCAwIHx8IGlNaW5YID4gZGF0YS5sZW5ndGggfHwgaU1pblkgPiBkYXRhWzBdLmxlbmd0aCkge1xuICAgICAgcmV0dXJuO1xuICAgIH0gLy8gQ2xhbXAgaW5kZXggdG8gZWRnZXNcblxuXG4gICAgaWYgKGlNaW5YIDwgMCkge1xuICAgICAgaU1pblggPSAwO1xuICAgIH1cblxuICAgIGlmIChpTWF4WCA8IDApIHtcbiAgICAgIGlNYXhYID0gMDtcbiAgICB9XG5cbiAgICBpZiAoaU1pblkgPCAwKSB7XG4gICAgICBpTWluWSA9IDA7XG4gICAgfVxuXG4gICAgaWYgKGlNYXhZIDwgMCkge1xuICAgICAgaU1heFkgPSAwO1xuICAgIH1cblxuICAgIGlmIChpTWluWCA+PSBkYXRhLmxlbmd0aCkge1xuICAgICAgaU1pblggPSBkYXRhLmxlbmd0aCAtIDE7XG4gICAgfVxuXG4gICAgaWYgKGlNYXhYID49IGRhdGEubGVuZ3RoKSB7XG4gICAgICBpTWF4WCA9IGRhdGEubGVuZ3RoIC0gMTtcbiAgICB9XG5cbiAgICBpZiAoaU1heFkgPj0gZGF0YVswXS5sZW5ndGgpIHtcbiAgICAgIGlNYXhZID0gZGF0YVswXS5sZW5ndGggLSAxO1xuICAgIH1cblxuICAgIGlmIChpTWluWSA+PSBkYXRhWzBdLmxlbmd0aCkge1xuICAgICAgaU1pblkgPSBkYXRhWzBdLmxlbmd0aCAtIDE7XG4gICAgfVxuXG4gICAgY29uc3QgbWluTWF4ID0gW107XG4gICAgaGZTaGFwZS5nZXRSZWN0TWluTWF4KGlNaW5YLCBpTWluWSwgaU1heFgsIGlNYXhZLCBtaW5NYXgpO1xuICAgIGNvbnN0IG1pbiA9IG1pbk1heFswXTtcbiAgICBjb25zdCBtYXggPSBtaW5NYXhbMV07IC8vIEJhaWwgb3V0IGlmIHdlIGNhbid0IHRvdWNoIHRoZSBib3VuZGluZyBoZWlnaHQgYm94XG5cbiAgICBpZiAobG9jYWxTcGhlcmVQb3MueiAtIHJhZGl1cyA+IG1heCB8fCBsb2NhbFNwaGVyZVBvcy56ICsgcmFkaXVzIDwgbWluKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgcmVzdWx0ID0gdGhpcy5yZXN1bHQ7XG5cbiAgICBmb3IgKGxldCBpID0gaU1pblg7IGkgPCBpTWF4WDsgaSsrKSB7XG4gICAgICBmb3IgKGxldCBqID0gaU1pblk7IGogPCBpTWF4WTsgaisrKSB7XG4gICAgICAgIGNvbnN0IG51bUNvbnRhY3RzQmVmb3JlID0gcmVzdWx0Lmxlbmd0aDtcbiAgICAgICAgbGV0IGludGVyc2VjdGluZyA9IGZhbHNlOyAvLyBMb3dlciB0cmlhbmdsZVxuXG4gICAgICAgIGhmU2hhcGUuZ2V0Q29udmV4VHJpYW5nbGVQaWxsYXIoaSwgaiwgZmFsc2UpO1xuICAgICAgICBUcmFuc2Zvcm0ucG9pbnRUb1dvcmxkRnJhbWUoaGZQb3MsIGhmUXVhdCwgaGZTaGFwZS5waWxsYXJPZmZzZXQsIHdvcmxkUGlsbGFyT2Zmc2V0KTtcblxuICAgICAgICBpZiAoc3BoZXJlUG9zLmRpc3RhbmNlVG8od29ybGRQaWxsYXJPZmZzZXQpIDwgaGZTaGFwZS5waWxsYXJDb252ZXguYm91bmRpbmdTcGhlcmVSYWRpdXMgKyBzcGhlcmVTaGFwZS5ib3VuZGluZ1NwaGVyZVJhZGl1cykge1xuICAgICAgICAgIGludGVyc2VjdGluZyA9IHRoaXMuc3BoZXJlQ29udmV4KHNwaGVyZVNoYXBlLCBoZlNoYXBlLnBpbGxhckNvbnZleCwgc3BoZXJlUG9zLCB3b3JsZFBpbGxhck9mZnNldCwgc3BoZXJlUXVhdCwgaGZRdWF0LCBzcGhlcmVCb2R5LCBoZkJvZHksIHNwaGVyZVNoYXBlLCBoZlNoYXBlLCBqdXN0VGVzdCk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoanVzdFRlc3QgJiYgaW50ZXJzZWN0aW5nKSB7XG4gICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH0gLy8gVXBwZXIgdHJpYW5nbGVcblxuXG4gICAgICAgIGhmU2hhcGUuZ2V0Q29udmV4VHJpYW5nbGVQaWxsYXIoaSwgaiwgdHJ1ZSk7XG4gICAgICAgIFRyYW5zZm9ybS5wb2ludFRvV29ybGRGcmFtZShoZlBvcywgaGZRdWF0LCBoZlNoYXBlLnBpbGxhck9mZnNldCwgd29ybGRQaWxsYXJPZmZzZXQpO1xuXG4gICAgICAgIGlmIChzcGhlcmVQb3MuZGlzdGFuY2VUbyh3b3JsZFBpbGxhck9mZnNldCkgPCBoZlNoYXBlLnBpbGxhckNvbnZleC5ib3VuZGluZ1NwaGVyZVJhZGl1cyArIHNwaGVyZVNoYXBlLmJvdW5kaW5nU3BoZXJlUmFkaXVzKSB7XG4gICAgICAgICAgaW50ZXJzZWN0aW5nID0gdGhpcy5zcGhlcmVDb252ZXgoc3BoZXJlU2hhcGUsIGhmU2hhcGUucGlsbGFyQ29udmV4LCBzcGhlcmVQb3MsIHdvcmxkUGlsbGFyT2Zmc2V0LCBzcGhlcmVRdWF0LCBoZlF1YXQsIHNwaGVyZUJvZHksIGhmQm9keSwgc3BoZXJlU2hhcGUsIGhmU2hhcGUsIGp1c3RUZXN0KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChqdXN0VGVzdCAmJiBpbnRlcnNlY3RpbmcpIHtcbiAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IG51bUNvbnRhY3RzID0gcmVzdWx0Lmxlbmd0aCAtIG51bUNvbnRhY3RzQmVmb3JlO1xuXG4gICAgICAgIGlmIChudW1Db250YWN0cyA+IDIpIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgLypcbiAgICAgICAgICAvLyBTa2lwIGFsbCBidXQgMVxuICAgICAgICAgIGZvciAobGV0IGsgPSAwOyBrIDwgbnVtQ29udGFjdHMgLSAxOyBrKyspIHtcbiAgICAgICAgICAgICAgcmVzdWx0LnBvcCgpO1xuICAgICAgICAgIH1cbiAgICAgICAgKi9cblxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGJveEhlaWdodGZpZWxkKHNpLCBzaiwgeGksIHhqLCBxaSwgcWosIGJpLCBiaiwgcnNpLCByc2osIGp1c3RUZXN0KSB7XG4gICAgc2kuY29udmV4UG9seWhlZHJvblJlcHJlc2VudGF0aW9uLm1hdGVyaWFsID0gc2kubWF0ZXJpYWw7XG4gICAgc2kuY29udmV4UG9seWhlZHJvblJlcHJlc2VudGF0aW9uLmNvbGxpc2lvblJlc3BvbnNlID0gc2kuY29sbGlzaW9uUmVzcG9uc2U7XG4gICAgcmV0dXJuIHRoaXMuY29udmV4SGVpZ2h0ZmllbGQoc2kuY29udmV4UG9seWhlZHJvblJlcHJlc2VudGF0aW9uLCBzaiwgeGksIHhqLCBxaSwgcWosIGJpLCBiaiwgc2ksIHNqLCBqdXN0VGVzdCk7XG4gIH1cblxuICBjb252ZXhIZWlnaHRmaWVsZChjb252ZXhTaGFwZSwgaGZTaGFwZSwgY29udmV4UG9zLCBoZlBvcywgY29udmV4UXVhdCwgaGZRdWF0LCBjb252ZXhCb2R5LCBoZkJvZHksIHJzaSwgcnNqLCBqdXN0VGVzdCkge1xuICAgIGNvbnN0IGRhdGEgPSBoZlNoYXBlLmRhdGE7XG4gICAgY29uc3QgdyA9IGhmU2hhcGUuZWxlbWVudFNpemU7XG4gICAgY29uc3QgcmFkaXVzID0gY29udmV4U2hhcGUuYm91bmRpbmdTcGhlcmVSYWRpdXM7XG4gICAgY29uc3Qgd29ybGRQaWxsYXJPZmZzZXQgPSBjb252ZXhIZWlnaHRmaWVsZF90bXAyO1xuICAgIGNvbnN0IGZhY2VMaXN0ID0gY29udmV4SGVpZ2h0ZmllbGRfZmFjZUxpc3Q7IC8vIEdldCBzcGhlcmUgcG9zaXRpb24gdG8gaGVpZ2h0ZmllbGQgbG9jYWwhXG5cbiAgICBjb25zdCBsb2NhbENvbnZleFBvcyA9IGNvbnZleEhlaWdodGZpZWxkX3RtcDE7XG4gICAgVHJhbnNmb3JtLnBvaW50VG9Mb2NhbEZyYW1lKGhmUG9zLCBoZlF1YXQsIGNvbnZleFBvcywgbG9jYWxDb252ZXhQb3MpOyAvLyBHZXQgdGhlIGluZGV4IG9mIHRoZSBkYXRhIHBvaW50cyB0byB0ZXN0IGFnYWluc3RcblxuICAgIGxldCBpTWluWCA9IE1hdGguZmxvb3IoKGxvY2FsQ29udmV4UG9zLnggLSByYWRpdXMpIC8gdykgLSAxO1xuICAgIGxldCBpTWF4WCA9IE1hdGguY2VpbCgobG9jYWxDb252ZXhQb3MueCArIHJhZGl1cykgLyB3KSArIDE7XG4gICAgbGV0IGlNaW5ZID0gTWF0aC5mbG9vcigobG9jYWxDb252ZXhQb3MueSAtIHJhZGl1cykgLyB3KSAtIDE7XG4gICAgbGV0IGlNYXhZID0gTWF0aC5jZWlsKChsb2NhbENvbnZleFBvcy55ICsgcmFkaXVzKSAvIHcpICsgMTsgLy8gQmFpbCBvdXQgaWYgd2UgYXJlIG91dCBvZiB0aGUgdGVycmFpblxuXG4gICAgaWYgKGlNYXhYIDwgMCB8fCBpTWF4WSA8IDAgfHwgaU1pblggPiBkYXRhLmxlbmd0aCB8fCBpTWluWSA+IGRhdGFbMF0ubGVuZ3RoKSB7XG4gICAgICByZXR1cm47XG4gICAgfSAvLyBDbGFtcCBpbmRleCB0byBlZGdlc1xuXG5cbiAgICBpZiAoaU1pblggPCAwKSB7XG4gICAgICBpTWluWCA9IDA7XG4gICAgfVxuXG4gICAgaWYgKGlNYXhYIDwgMCkge1xuICAgICAgaU1heFggPSAwO1xuICAgIH1cblxuICAgIGlmIChpTWluWSA8IDApIHtcbiAgICAgIGlNaW5ZID0gMDtcbiAgICB9XG5cbiAgICBpZiAoaU1heFkgPCAwKSB7XG4gICAgICBpTWF4WSA9IDA7XG4gICAgfVxuXG4gICAgaWYgKGlNaW5YID49IGRhdGEubGVuZ3RoKSB7XG4gICAgICBpTWluWCA9IGRhdGEubGVuZ3RoIC0gMTtcbiAgICB9XG5cbiAgICBpZiAoaU1heFggPj0gZGF0YS5sZW5ndGgpIHtcbiAgICAgIGlNYXhYID0gZGF0YS5sZW5ndGggLSAxO1xuICAgIH1cblxuICAgIGlmIChpTWF4WSA+PSBkYXRhWzBdLmxlbmd0aCkge1xuICAgICAgaU1heFkgPSBkYXRhWzBdLmxlbmd0aCAtIDE7XG4gICAgfVxuXG4gICAgaWYgKGlNaW5ZID49IGRhdGFbMF0ubGVuZ3RoKSB7XG4gICAgICBpTWluWSA9IGRhdGFbMF0ubGVuZ3RoIC0gMTtcbiAgICB9XG5cbiAgICBjb25zdCBtaW5NYXggPSBbXTtcbiAgICBoZlNoYXBlLmdldFJlY3RNaW5NYXgoaU1pblgsIGlNaW5ZLCBpTWF4WCwgaU1heFksIG1pbk1heCk7XG4gICAgY29uc3QgbWluID0gbWluTWF4WzBdO1xuICAgIGNvbnN0IG1heCA9IG1pbk1heFsxXTsgLy8gQmFpbCBvdXQgaWYgd2UncmUgY2FudCB0b3VjaCB0aGUgYm91bmRpbmcgaGVpZ2h0IGJveFxuXG4gICAgaWYgKGxvY2FsQ29udmV4UG9zLnogLSByYWRpdXMgPiBtYXggfHwgbG9jYWxDb252ZXhQb3MueiArIHJhZGl1cyA8IG1pbikge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGZvciAobGV0IGkgPSBpTWluWDsgaSA8IGlNYXhYOyBpKyspIHtcbiAgICAgIGZvciAobGV0IGogPSBpTWluWTsgaiA8IGlNYXhZOyBqKyspIHtcbiAgICAgICAgbGV0IGludGVyc2VjdGluZyA9IGZhbHNlOyAvLyBMb3dlciB0cmlhbmdsZVxuXG4gICAgICAgIGhmU2hhcGUuZ2V0Q29udmV4VHJpYW5nbGVQaWxsYXIoaSwgaiwgZmFsc2UpO1xuICAgICAgICBUcmFuc2Zvcm0ucG9pbnRUb1dvcmxkRnJhbWUoaGZQb3MsIGhmUXVhdCwgaGZTaGFwZS5waWxsYXJPZmZzZXQsIHdvcmxkUGlsbGFyT2Zmc2V0KTtcblxuICAgICAgICBpZiAoY29udmV4UG9zLmRpc3RhbmNlVG8od29ybGRQaWxsYXJPZmZzZXQpIDwgaGZTaGFwZS5waWxsYXJDb252ZXguYm91bmRpbmdTcGhlcmVSYWRpdXMgKyBjb252ZXhTaGFwZS5ib3VuZGluZ1NwaGVyZVJhZGl1cykge1xuICAgICAgICAgIGludGVyc2VjdGluZyA9IHRoaXMuY29udmV4Q29udmV4KGNvbnZleFNoYXBlLCBoZlNoYXBlLnBpbGxhckNvbnZleCwgY29udmV4UG9zLCB3b3JsZFBpbGxhck9mZnNldCwgY29udmV4UXVhdCwgaGZRdWF0LCBjb252ZXhCb2R5LCBoZkJvZHksIG51bGwsIG51bGwsIGp1c3RUZXN0LCBmYWNlTGlzdCwgbnVsbCk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoanVzdFRlc3QgJiYgaW50ZXJzZWN0aW5nKSB7XG4gICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH0gLy8gVXBwZXIgdHJpYW5nbGVcblxuXG4gICAgICAgIGhmU2hhcGUuZ2V0Q29udmV4VHJpYW5nbGVQaWxsYXIoaSwgaiwgdHJ1ZSk7XG4gICAgICAgIFRyYW5zZm9ybS5wb2ludFRvV29ybGRGcmFtZShoZlBvcywgaGZRdWF0LCBoZlNoYXBlLnBpbGxhck9mZnNldCwgd29ybGRQaWxsYXJPZmZzZXQpO1xuXG4gICAgICAgIGlmIChjb252ZXhQb3MuZGlzdGFuY2VUbyh3b3JsZFBpbGxhck9mZnNldCkgPCBoZlNoYXBlLnBpbGxhckNvbnZleC5ib3VuZGluZ1NwaGVyZVJhZGl1cyArIGNvbnZleFNoYXBlLmJvdW5kaW5nU3BoZXJlUmFkaXVzKSB7XG4gICAgICAgICAgaW50ZXJzZWN0aW5nID0gdGhpcy5jb252ZXhDb252ZXgoY29udmV4U2hhcGUsIGhmU2hhcGUucGlsbGFyQ29udmV4LCBjb252ZXhQb3MsIHdvcmxkUGlsbGFyT2Zmc2V0LCBjb252ZXhRdWF0LCBoZlF1YXQsIGNvbnZleEJvZHksIGhmQm9keSwgbnVsbCwgbnVsbCwganVzdFRlc3QsIGZhY2VMaXN0LCBudWxsKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChqdXN0VGVzdCAmJiBpbnRlcnNlY3RpbmcpIHtcbiAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHNwaGVyZVBhcnRpY2xlKHNqLCBzaSwgeGosIHhpLCBxaiwgcWksIGJqLCBiaSwgcnNpLCByc2osIGp1c3RUZXN0KSB7XG4gICAgLy8gVGhlIG5vcm1hbCBpcyB0aGUgdW5pdCB2ZWN0b3IgZnJvbSBzcGhlcmUgY2VudGVyIHRvIHBhcnRpY2xlIGNlbnRlclxuICAgIGNvbnN0IG5vcm1hbCA9IHBhcnRpY2xlU3BoZXJlX25vcm1hbDtcbiAgICBub3JtYWwuc2V0KDAsIDAsIDEpO1xuICAgIHhpLnZzdWIoeGosIG5vcm1hbCk7XG4gICAgY29uc3QgbGVuZ3RoU3F1YXJlZCA9IG5vcm1hbC5sZW5ndGhTcXVhcmVkKCk7XG5cbiAgICBpZiAobGVuZ3RoU3F1YXJlZCA8PSBzai5yYWRpdXMgKiBzai5yYWRpdXMpIHtcbiAgICAgIGlmIChqdXN0VGVzdCkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cblxuICAgICAgY29uc3QgciA9IHRoaXMuY3JlYXRlQ29udGFjdEVxdWF0aW9uKGJpLCBiaiwgc2ksIHNqLCByc2ksIHJzaik7XG4gICAgICBub3JtYWwubm9ybWFsaXplKCk7XG4gICAgICByLnJqLmNvcHkobm9ybWFsKTtcbiAgICAgIHIucmouc2NhbGUoc2oucmFkaXVzLCByLnJqKTtcbiAgICAgIHIubmkuY29weShub3JtYWwpOyAvLyBDb250YWN0IG5vcm1hbFxuXG4gICAgICByLm5pLm5lZ2F0ZShyLm5pKTtcbiAgICAgIHIucmkuc2V0KDAsIDAsIDApOyAvLyBDZW50ZXIgb2YgcGFydGljbGVcblxuICAgICAgdGhpcy5yZXN1bHQucHVzaChyKTtcbiAgICAgIHRoaXMuY3JlYXRlRnJpY3Rpb25FcXVhdGlvbnNGcm9tQ29udGFjdChyLCB0aGlzLmZyaWN0aW9uUmVzdWx0KTtcbiAgICB9XG4gIH1cblxuICBwbGFuZVBhcnRpY2xlKHNqLCBzaSwgeGosIHhpLCBxaiwgcWksIGJqLCBiaSwgcnNpLCByc2osIGp1c3RUZXN0KSB7XG4gICAgY29uc3Qgbm9ybWFsID0gcGFydGljbGVQbGFuZV9ub3JtYWw7XG4gICAgbm9ybWFsLnNldCgwLCAwLCAxKTtcbiAgICBiai5xdWF0ZXJuaW9uLnZtdWx0KG5vcm1hbCwgbm9ybWFsKTsgLy8gVHVybiBub3JtYWwgYWNjb3JkaW5nIHRvIHBsYW5lIG9yaWVudGF0aW9uXG5cbiAgICBjb25zdCByZWxwb3MgPSBwYXJ0aWNsZVBsYW5lX3JlbHBvcztcbiAgICB4aS52c3ViKGJqLnBvc2l0aW9uLCByZWxwb3MpO1xuICAgIGNvbnN0IGRvdCA9IG5vcm1hbC5kb3QocmVscG9zKTtcblxuICAgIGlmIChkb3QgPD0gMC4wKSB7XG4gICAgICBpZiAoanVzdFRlc3QpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHIgPSB0aGlzLmNyZWF0ZUNvbnRhY3RFcXVhdGlvbihiaSwgYmosIHNpLCBzaiwgcnNpLCByc2opO1xuICAgICAgci5uaS5jb3B5KG5vcm1hbCk7IC8vIENvbnRhY3Qgbm9ybWFsIGlzIHRoZSBwbGFuZSBub3JtYWxcblxuICAgICAgci5uaS5uZWdhdGUoci5uaSk7XG4gICAgICByLnJpLnNldCgwLCAwLCAwKTsgLy8gQ2VudGVyIG9mIHBhcnRpY2xlXG4gICAgICAvLyBHZXQgcGFydGljbGUgcG9zaXRpb24gcHJvamVjdGVkIG9uIHBsYW5lXG5cbiAgICAgIGNvbnN0IHByb2plY3RlZCA9IHBhcnRpY2xlUGxhbmVfcHJvamVjdGVkO1xuICAgICAgbm9ybWFsLnNjYWxlKG5vcm1hbC5kb3QoeGkpLCBwcm9qZWN0ZWQpO1xuICAgICAgeGkudnN1Yihwcm9qZWN0ZWQsIHByb2plY3RlZCk7IC8vcHJvamVjdGVkLnZhZGQoYmoucG9zaXRpb24scHJvamVjdGVkKTtcbiAgICAgIC8vIHJqIGlzIG5vdyB0aGUgcHJvamVjdGVkIHdvcmxkIHBvc2l0aW9uIG1pbnVzIHBsYW5lIHBvc2l0aW9uXG5cbiAgICAgIHIucmouY29weShwcm9qZWN0ZWQpO1xuICAgICAgdGhpcy5yZXN1bHQucHVzaChyKTtcbiAgICAgIHRoaXMuY3JlYXRlRnJpY3Rpb25FcXVhdGlvbnNGcm9tQ29udGFjdChyLCB0aGlzLmZyaWN0aW9uUmVzdWx0KTtcbiAgICB9XG4gIH1cblxuICBib3hQYXJ0aWNsZShzaSwgc2osIHhpLCB4aiwgcWksIHFqLCBiaSwgYmosIHJzaSwgcnNqLCBqdXN0VGVzdCkge1xuICAgIHNpLmNvbnZleFBvbHloZWRyb25SZXByZXNlbnRhdGlvbi5tYXRlcmlhbCA9IHNpLm1hdGVyaWFsO1xuICAgIHNpLmNvbnZleFBvbHloZWRyb25SZXByZXNlbnRhdGlvbi5jb2xsaXNpb25SZXNwb25zZSA9IHNpLmNvbGxpc2lvblJlc3BvbnNlO1xuICAgIHJldHVybiB0aGlzLmNvbnZleFBhcnRpY2xlKHNpLmNvbnZleFBvbHloZWRyb25SZXByZXNlbnRhdGlvbiwgc2osIHhpLCB4aiwgcWksIHFqLCBiaSwgYmosIHNpLCBzaiwganVzdFRlc3QpO1xuICB9XG5cbiAgY29udmV4UGFydGljbGUoc2osIHNpLCB4aiwgeGksIHFqLCBxaSwgYmosIGJpLCByc2ksIHJzaiwganVzdFRlc3QpIHtcbiAgICBsZXQgcGVuZXRyYXRlZEZhY2VJbmRleCA9IC0xO1xuICAgIGNvbnN0IHBlbmV0cmF0ZWRGYWNlTm9ybWFsID0gY29udmV4UGFydGljbGVfcGVuZXRyYXRlZEZhY2VOb3JtYWw7XG4gICAgY29uc3Qgd29ybGRQZW5ldHJhdGlvblZlYyA9IGNvbnZleFBhcnRpY2xlX3dvcmxkUGVuZXRyYXRpb25WZWM7XG4gICAgbGV0IG1pblBlbmV0cmF0aW9uID0gbnVsbDtcblxuICAgIGNvbnN0IGxvY2FsID0gY29udmV4UGFydGljbGVfbG9jYWw7XG4gICAgbG9jYWwuY29weSh4aSk7XG4gICAgbG9jYWwudnN1Yih4aiwgbG9jYWwpOyAvLyBDb252ZXJ0IHBvc2l0aW9uIHRvIHJlbGF0aXZlIHRoZSBjb252ZXggb3JpZ2luXG5cbiAgICBxai5jb25qdWdhdGUoY3FqKTtcbiAgICBjcWoudm11bHQobG9jYWwsIGxvY2FsKTtcblxuICAgIGlmIChzai5wb2ludElzSW5zaWRlKGxvY2FsKSkge1xuICAgICAgaWYgKHNqLndvcmxkVmVydGljZXNOZWVkc1VwZGF0ZSkge1xuICAgICAgICBzai5jb21wdXRlV29ybGRWZXJ0aWNlcyh4aiwgcWopO1xuICAgICAgfVxuXG4gICAgICBpZiAoc2oud29ybGRGYWNlTm9ybWFsc05lZWRzVXBkYXRlKSB7XG4gICAgICAgIHNqLmNvbXB1dGVXb3JsZEZhY2VOb3JtYWxzKHFqKTtcbiAgICAgIH0gLy8gRm9yIGVhY2ggd29ybGQgcG9seWdvbiBpbiB0aGUgcG9seWhlZHJhXG5cblxuICAgICAgZm9yIChsZXQgaSA9IDAsIG5mYWNlcyA9IHNqLmZhY2VzLmxlbmd0aDsgaSAhPT0gbmZhY2VzOyBpKyspIHtcbiAgICAgICAgLy8gQ29uc3RydWN0IHdvcmxkIGZhY2UgdmVydGljZXNcbiAgICAgICAgY29uc3QgdmVydHMgPSBbc2oud29ybGRWZXJ0aWNlc1tzai5mYWNlc1tpXVswXV1dO1xuICAgICAgICBjb25zdCBub3JtYWwgPSBzai53b3JsZEZhY2VOb3JtYWxzW2ldOyAvLyBDaGVjayBob3cgbXVjaCB0aGUgcGFydGljbGUgcGVuZXRyYXRlcyB0aGUgcG9seWdvbiBwbGFuZS5cblxuICAgICAgICB4aS52c3ViKHZlcnRzWzBdLCBjb252ZXhQYXJ0aWNsZV92ZXJ0ZXhUb1BhcnRpY2xlKTtcbiAgICAgICAgY29uc3QgcGVuZXRyYXRpb24gPSAtbm9ybWFsLmRvdChjb252ZXhQYXJ0aWNsZV92ZXJ0ZXhUb1BhcnRpY2xlKTtcblxuICAgICAgICBpZiAobWluUGVuZXRyYXRpb24gPT09IG51bGwgfHwgTWF0aC5hYnMocGVuZXRyYXRpb24pIDwgTWF0aC5hYnMobWluUGVuZXRyYXRpb24pKSB7XG4gICAgICAgICAgaWYgKGp1c3RUZXN0KSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBtaW5QZW5ldHJhdGlvbiA9IHBlbmV0cmF0aW9uO1xuICAgICAgICAgIHBlbmV0cmF0ZWRGYWNlSW5kZXggPSBpO1xuICAgICAgICAgIHBlbmV0cmF0ZWRGYWNlTm9ybWFsLmNvcHkobm9ybWFsKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAocGVuZXRyYXRlZEZhY2VJbmRleCAhPT0gLTEpIHtcbiAgICAgICAgLy8gU2V0dXAgY29udGFjdFxuICAgICAgICBjb25zdCByID0gdGhpcy5jcmVhdGVDb250YWN0RXF1YXRpb24oYmksIGJqLCBzaSwgc2osIHJzaSwgcnNqKTtcbiAgICAgICAgcGVuZXRyYXRlZEZhY2VOb3JtYWwuc2NhbGUobWluUGVuZXRyYXRpb24sIHdvcmxkUGVuZXRyYXRpb25WZWMpOyAvLyByaiBpcyB0aGUgcGFydGljbGUgcG9zaXRpb24gcHJvamVjdGVkIHRvIHRoZSBmYWNlXG5cbiAgICAgICAgd29ybGRQZW5ldHJhdGlvblZlYy52YWRkKHhpLCB3b3JsZFBlbmV0cmF0aW9uVmVjKTtcbiAgICAgICAgd29ybGRQZW5ldHJhdGlvblZlYy52c3ViKHhqLCB3b3JsZFBlbmV0cmF0aW9uVmVjKTtcbiAgICAgICAgci5yai5jb3B5KHdvcmxkUGVuZXRyYXRpb25WZWMpOyAvL2NvbnN0IHByb2plY3RlZFRvRmFjZSA9IHhpLnZzdWIoeGopLnZhZGQod29ybGRQZW5ldHJhdGlvblZlYyk7XG4gICAgICAgIC8vcHJvamVjdGVkVG9GYWNlLmNvcHkoci5yaik7XG4gICAgICAgIC8vcWoudm11bHQoci5yaixyLnJqKTtcblxuICAgICAgICBwZW5ldHJhdGVkRmFjZU5vcm1hbC5uZWdhdGUoci5uaSk7IC8vIENvbnRhY3Qgbm9ybWFsXG5cbiAgICAgICAgci5yaS5zZXQoMCwgMCwgMCk7IC8vIENlbnRlciBvZiBwYXJ0aWNsZVxuXG4gICAgICAgIGNvbnN0IHJpID0gci5yaTtcbiAgICAgICAgY29uc3QgcmogPSByLnJqOyAvLyBNYWtlIHJlbGF0aXZlIHRvIGJvZGllc1xuXG4gICAgICAgIHJpLnZhZGQoeGksIHJpKTtcbiAgICAgICAgcmkudnN1YihiaS5wb3NpdGlvbiwgcmkpO1xuICAgICAgICByai52YWRkKHhqLCByaik7XG4gICAgICAgIHJqLnZzdWIoYmoucG9zaXRpb24sIHJqKTtcbiAgICAgICAgdGhpcy5yZXN1bHQucHVzaChyKTtcbiAgICAgICAgdGhpcy5jcmVhdGVGcmljdGlvbkVxdWF0aW9uc0Zyb21Db250YWN0KHIsIHRoaXMuZnJpY3Rpb25SZXN1bHQpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc29sZS53YXJuKCdQb2ludCBmb3VuZCBpbnNpZGUgY29udmV4LCBidXQgZGlkIG5vdCBmaW5kIHBlbmV0cmF0aW5nIGZhY2UhJyk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgaGVpZ2h0ZmllbGRDeWxpbmRlcihoZlNoYXBlLCBjb252ZXhTaGFwZSwgaGZQb3MsIGNvbnZleFBvcywgaGZRdWF0LCBjb252ZXhRdWF0LCBoZkJvZHksIGNvbnZleEJvZHksIHJzaSwgcnNqLCBqdXN0VGVzdCkge1xuICAgIHJldHVybiB0aGlzLmNvbnZleEhlaWdodGZpZWxkKGNvbnZleFNoYXBlLCBoZlNoYXBlLCBjb252ZXhQb3MsIGhmUG9zLCBjb252ZXhRdWF0LCBoZlF1YXQsIGNvbnZleEJvZHksIGhmQm9keSwgcnNpLCByc2osIGp1c3RUZXN0KTtcbiAgfVxuXG4gIHBhcnRpY2xlQ3lsaW5kZXIoc2ksIHNqLCB4aSwgeGosIHFpLCBxaiwgYmksIGJqLCByc2ksIHJzaiwganVzdFRlc3QpIHtcbiAgICByZXR1cm4gdGhpcy5jb252ZXhQYXJ0aWNsZShzaiwgc2ksIHhqLCB4aSwgcWosIHFpLCBiaiwgYmksIHJzaSwgcnNqLCBqdXN0VGVzdCk7XG4gIH1cblxuICBzcGhlcmVUcmltZXNoKHNwaGVyZVNoYXBlLCB0cmltZXNoU2hhcGUsIHNwaGVyZVBvcywgdHJpbWVzaFBvcywgc3BoZXJlUXVhdCwgdHJpbWVzaFF1YXQsIHNwaGVyZUJvZHksIHRyaW1lc2hCb2R5LCByc2ksIHJzaiwganVzdFRlc3QpIHtcbiAgICBjb25zdCBlZGdlVmVydGV4QSA9IHNwaGVyZVRyaW1lc2hfZWRnZVZlcnRleEE7XG4gICAgY29uc3QgZWRnZVZlcnRleEIgPSBzcGhlcmVUcmltZXNoX2VkZ2VWZXJ0ZXhCO1xuICAgIGNvbnN0IGVkZ2VWZWN0b3IgPSBzcGhlcmVUcmltZXNoX2VkZ2VWZWN0b3I7XG4gICAgY29uc3QgZWRnZVZlY3RvclVuaXQgPSBzcGhlcmVUcmltZXNoX2VkZ2VWZWN0b3JVbml0O1xuICAgIGNvbnN0IGxvY2FsU3BoZXJlUG9zID0gc3BoZXJlVHJpbWVzaF9sb2NhbFNwaGVyZVBvcztcbiAgICBjb25zdCB0bXAgPSBzcGhlcmVUcmltZXNoX3RtcDtcbiAgICBjb25zdCBsb2NhbFNwaGVyZUFBQkIgPSBzcGhlcmVUcmltZXNoX2xvY2FsU3BoZXJlQUFCQjtcbiAgICBjb25zdCB2MiA9IHNwaGVyZVRyaW1lc2hfdjI7XG4gICAgY29uc3QgcmVscG9zID0gc3BoZXJlVHJpbWVzaF9yZWxwb3M7XG4gICAgY29uc3QgdHJpYW5nbGVzID0gc3BoZXJlVHJpbWVzaF90cmlhbmdsZXM7IC8vIENvbnZlcnQgc3BoZXJlIHBvc2l0aW9uIHRvIGxvY2FsIGluIHRoZSB0cmltZXNoXG5cbiAgICBUcmFuc2Zvcm0ucG9pbnRUb0xvY2FsRnJhbWUodHJpbWVzaFBvcywgdHJpbWVzaFF1YXQsIHNwaGVyZVBvcywgbG9jYWxTcGhlcmVQb3MpOyAvLyBHZXQgdGhlIGFhYmIgb2YgdGhlIHNwaGVyZSBsb2NhbGx5IGluIHRoZSB0cmltZXNoXG5cbiAgICBjb25zdCBzcGhlcmVSYWRpdXMgPSBzcGhlcmVTaGFwZS5yYWRpdXM7XG4gICAgbG9jYWxTcGhlcmVBQUJCLmxvd2VyQm91bmQuc2V0KGxvY2FsU3BoZXJlUG9zLnggLSBzcGhlcmVSYWRpdXMsIGxvY2FsU3BoZXJlUG9zLnkgLSBzcGhlcmVSYWRpdXMsIGxvY2FsU3BoZXJlUG9zLnogLSBzcGhlcmVSYWRpdXMpO1xuICAgIGxvY2FsU3BoZXJlQUFCQi51cHBlckJvdW5kLnNldChsb2NhbFNwaGVyZVBvcy54ICsgc3BoZXJlUmFkaXVzLCBsb2NhbFNwaGVyZVBvcy55ICsgc3BoZXJlUmFkaXVzLCBsb2NhbFNwaGVyZVBvcy56ICsgc3BoZXJlUmFkaXVzKTtcbiAgICB0cmltZXNoU2hhcGUuZ2V0VHJpYW5nbGVzSW5BQUJCKGxvY2FsU3BoZXJlQUFCQiwgdHJpYW5nbGVzKTsgLy9mb3IgKGxldCBpID0gMDsgaSA8IHRyaW1lc2hTaGFwZS5pbmRpY2VzLmxlbmd0aCAvIDM7IGkrKykgdHJpYW5nbGVzLnB1c2goaSk7IC8vIEFsbFxuICAgIC8vIFZlcnRpY2VzXG5cbiAgICBjb25zdCB2ID0gc3BoZXJlVHJpbWVzaF92O1xuICAgIGNvbnN0IHJhZGl1c1NxdWFyZWQgPSBzcGhlcmVTaGFwZS5yYWRpdXMgKiBzcGhlcmVTaGFwZS5yYWRpdXM7XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRyaWFuZ2xlcy5sZW5ndGg7IGkrKykge1xuICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCAzOyBqKyspIHtcbiAgICAgICAgdHJpbWVzaFNoYXBlLmdldFZlcnRleCh0cmltZXNoU2hhcGUuaW5kaWNlc1t0cmlhbmdsZXNbaV0gKiAzICsgal0sIHYpOyAvLyBDaGVjayB2ZXJ0ZXggb3ZlcmxhcCBpbiBzcGhlcmVcblxuICAgICAgICB2LnZzdWIobG9jYWxTcGhlcmVQb3MsIHJlbHBvcyk7XG5cbiAgICAgICAgaWYgKHJlbHBvcy5sZW5ndGhTcXVhcmVkKCkgPD0gcmFkaXVzU3F1YXJlZCkge1xuICAgICAgICAgIC8vIFNhZmUgdXBcbiAgICAgICAgICB2Mi5jb3B5KHYpO1xuICAgICAgICAgIFRyYW5zZm9ybS5wb2ludFRvV29ybGRGcmFtZSh0cmltZXNoUG9zLCB0cmltZXNoUXVhdCwgdjIsIHYpO1xuICAgICAgICAgIHYudnN1YihzcGhlcmVQb3MsIHJlbHBvcyk7XG5cbiAgICAgICAgICBpZiAoanVzdFRlc3QpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGxldCByID0gdGhpcy5jcmVhdGVDb250YWN0RXF1YXRpb24oc3BoZXJlQm9keSwgdHJpbWVzaEJvZHksIHNwaGVyZVNoYXBlLCB0cmltZXNoU2hhcGUsIHJzaSwgcnNqKTtcbiAgICAgICAgICByLm5pLmNvcHkocmVscG9zKTtcbiAgICAgICAgICByLm5pLm5vcm1hbGl6ZSgpOyAvLyByaSBpcyB0aGUgdmVjdG9yIGZyb20gc3BoZXJlIGNlbnRlciB0byB0aGUgc3BoZXJlIHN1cmZhY2VcblxuICAgICAgICAgIHIucmkuY29weShyLm5pKTtcbiAgICAgICAgICByLnJpLnNjYWxlKHNwaGVyZVNoYXBlLnJhZGl1cywgci5yaSk7XG4gICAgICAgICAgci5yaS52YWRkKHNwaGVyZVBvcywgci5yaSk7XG4gICAgICAgICAgci5yaS52c3ViKHNwaGVyZUJvZHkucG9zaXRpb24sIHIucmkpO1xuICAgICAgICAgIHIucmouY29weSh2KTtcbiAgICAgICAgICByLnJqLnZzdWIodHJpbWVzaEJvZHkucG9zaXRpb24sIHIucmopOyAvLyBTdG9yZSByZXN1bHRcblxuICAgICAgICAgIHRoaXMucmVzdWx0LnB1c2gocik7XG4gICAgICAgICAgdGhpcy5jcmVhdGVGcmljdGlvbkVxdWF0aW9uc0Zyb21Db250YWN0KHIsIHRoaXMuZnJpY3Rpb25SZXN1bHQpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSAvLyBDaGVjayBhbGwgZWRnZXNcblxuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0cmlhbmdsZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgMzsgaisrKSB7XG4gICAgICAgIHRyaW1lc2hTaGFwZS5nZXRWZXJ0ZXgodHJpbWVzaFNoYXBlLmluZGljZXNbdHJpYW5nbGVzW2ldICogMyArIGpdLCBlZGdlVmVydGV4QSk7XG4gICAgICAgIHRyaW1lc2hTaGFwZS5nZXRWZXJ0ZXgodHJpbWVzaFNoYXBlLmluZGljZXNbdHJpYW5nbGVzW2ldICogMyArIChqICsgMSkgJSAzXSwgZWRnZVZlcnRleEIpO1xuICAgICAgICBlZGdlVmVydGV4Qi52c3ViKGVkZ2VWZXJ0ZXhBLCBlZGdlVmVjdG9yKTsgLy8gUHJvamVjdCBzcGhlcmUgcG9zaXRpb24gdG8gdGhlIGVkZ2VcblxuICAgICAgICBsb2NhbFNwaGVyZVBvcy52c3ViKGVkZ2VWZXJ0ZXhCLCB0bXApO1xuICAgICAgICBjb25zdCBwb3NpdGlvbkFsb25nRWRnZUIgPSB0bXAuZG90KGVkZ2VWZWN0b3IpO1xuICAgICAgICBsb2NhbFNwaGVyZVBvcy52c3ViKGVkZ2VWZXJ0ZXhBLCB0bXApO1xuICAgICAgICBsZXQgcG9zaXRpb25BbG9uZ0VkZ2VBID0gdG1wLmRvdChlZGdlVmVjdG9yKTtcblxuICAgICAgICBpZiAocG9zaXRpb25BbG9uZ0VkZ2VBID4gMCAmJiBwb3NpdGlvbkFsb25nRWRnZUIgPCAwKSB7XG4gICAgICAgICAgLy8gTm93IGNoZWNrIHRoZSBvcnRob2dvbmFsIGRpc3RhbmNlIGZyb20gZWRnZSB0byBzcGhlcmUgY2VudGVyXG4gICAgICAgICAgbG9jYWxTcGhlcmVQb3MudnN1YihlZGdlVmVydGV4QSwgdG1wKTtcbiAgICAgICAgICBlZGdlVmVjdG9yVW5pdC5jb3B5KGVkZ2VWZWN0b3IpO1xuICAgICAgICAgIGVkZ2VWZWN0b3JVbml0Lm5vcm1hbGl6ZSgpO1xuICAgICAgICAgIHBvc2l0aW9uQWxvbmdFZGdlQSA9IHRtcC5kb3QoZWRnZVZlY3RvclVuaXQpO1xuICAgICAgICAgIGVkZ2VWZWN0b3JVbml0LnNjYWxlKHBvc2l0aW9uQWxvbmdFZGdlQSwgdG1wKTtcbiAgICAgICAgICB0bXAudmFkZChlZGdlVmVydGV4QSwgdG1wKTsgLy8gdG1wIGlzIG5vdyB0aGUgc3BoZXJlIGNlbnRlciBwb3NpdGlvbiBwcm9qZWN0ZWQgdG8gdGhlIGVkZ2UsIGRlZmluZWQgbG9jYWxseSBpbiB0aGUgdHJpbWVzaCBmcmFtZVxuXG4gICAgICAgICAgY29uc3QgZGlzdCA9IHRtcC5kaXN0YW5jZVRvKGxvY2FsU3BoZXJlUG9zKTtcblxuICAgICAgICAgIGlmIChkaXN0IDwgc3BoZXJlU2hhcGUucmFkaXVzKSB7XG4gICAgICAgICAgICBpZiAoanVzdFRlc3QpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGNvbnN0IHIgPSB0aGlzLmNyZWF0ZUNvbnRhY3RFcXVhdGlvbihzcGhlcmVCb2R5LCB0cmltZXNoQm9keSwgc3BoZXJlU2hhcGUsIHRyaW1lc2hTaGFwZSwgcnNpLCByc2opO1xuICAgICAgICAgICAgdG1wLnZzdWIobG9jYWxTcGhlcmVQb3MsIHIubmkpO1xuICAgICAgICAgICAgci5uaS5ub3JtYWxpemUoKTtcbiAgICAgICAgICAgIHIubmkuc2NhbGUoc3BoZXJlU2hhcGUucmFkaXVzLCByLnJpKTtcbiAgICAgICAgICAgIHIucmkudmFkZChzcGhlcmVQb3MsIHIucmkpO1xuICAgICAgICAgICAgci5yaS52c3ViKHNwaGVyZUJvZHkucG9zaXRpb24sIHIucmkpO1xuICAgICAgICAgICAgVHJhbnNmb3JtLnBvaW50VG9Xb3JsZEZyYW1lKHRyaW1lc2hQb3MsIHRyaW1lc2hRdWF0LCB0bXAsIHRtcCk7XG4gICAgICAgICAgICB0bXAudnN1Yih0cmltZXNoQm9keS5wb3NpdGlvbiwgci5yaik7XG4gICAgICAgICAgICBUcmFuc2Zvcm0udmVjdG9yVG9Xb3JsZEZyYW1lKHRyaW1lc2hRdWF0LCByLm5pLCByLm5pKTtcbiAgICAgICAgICAgIFRyYW5zZm9ybS52ZWN0b3JUb1dvcmxkRnJhbWUodHJpbWVzaFF1YXQsIHIucmksIHIucmkpO1xuICAgICAgICAgICAgdGhpcy5yZXN1bHQucHVzaChyKTtcbiAgICAgICAgICAgIHRoaXMuY3JlYXRlRnJpY3Rpb25FcXVhdGlvbnNGcm9tQ29udGFjdChyLCB0aGlzLmZyaWN0aW9uUmVzdWx0KTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IC8vIFRyaWFuZ2xlIGZhY2VzXG5cblxuICAgIGNvbnN0IHZhID0gc3BoZXJlVHJpbWVzaF92YTtcbiAgICBjb25zdCB2YiA9IHNwaGVyZVRyaW1lc2hfdmI7XG4gICAgY29uc3QgdmMgPSBzcGhlcmVUcmltZXNoX3ZjO1xuICAgIGNvbnN0IG5vcm1hbCA9IHNwaGVyZVRyaW1lc2hfbm9ybWFsO1xuXG4gICAgZm9yIChsZXQgaSA9IDAsIE4gPSB0cmlhbmdsZXMubGVuZ3RoOyBpICE9PSBOOyBpKyspIHtcbiAgICAgIHRyaW1lc2hTaGFwZS5nZXRUcmlhbmdsZVZlcnRpY2VzKHRyaWFuZ2xlc1tpXSwgdmEsIHZiLCB2Yyk7XG4gICAgICB0cmltZXNoU2hhcGUuZ2V0Tm9ybWFsKHRyaWFuZ2xlc1tpXSwgbm9ybWFsKTtcbiAgICAgIGxvY2FsU3BoZXJlUG9zLnZzdWIodmEsIHRtcCk7XG4gICAgICBsZXQgZGlzdCA9IHRtcC5kb3Qobm9ybWFsKTtcbiAgICAgIG5vcm1hbC5zY2FsZShkaXN0LCB0bXApO1xuICAgICAgbG9jYWxTcGhlcmVQb3MudnN1Yih0bXAsIHRtcCk7IC8vIHRtcCBpcyBub3cgdGhlIHNwaGVyZSBwb3NpdGlvbiBwcm9qZWN0ZWQgdG8gdGhlIHRyaWFuZ2xlIHBsYW5lXG5cbiAgICAgIGRpc3QgPSB0bXAuZGlzdGFuY2VUbyhsb2NhbFNwaGVyZVBvcyk7XG5cbiAgICAgIGlmIChSYXkucG9pbnRJblRyaWFuZ2xlKHRtcCwgdmEsIHZiLCB2YykgJiYgZGlzdCA8IHNwaGVyZVNoYXBlLnJhZGl1cykge1xuICAgICAgICBpZiAoanVzdFRlc3QpIHtcbiAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCByID0gdGhpcy5jcmVhdGVDb250YWN0RXF1YXRpb24oc3BoZXJlQm9keSwgdHJpbWVzaEJvZHksIHNwaGVyZVNoYXBlLCB0cmltZXNoU2hhcGUsIHJzaSwgcnNqKTtcbiAgICAgICAgdG1wLnZzdWIobG9jYWxTcGhlcmVQb3MsIHIubmkpO1xuICAgICAgICByLm5pLm5vcm1hbGl6ZSgpO1xuICAgICAgICByLm5pLnNjYWxlKHNwaGVyZVNoYXBlLnJhZGl1cywgci5yaSk7XG4gICAgICAgIHIucmkudmFkZChzcGhlcmVQb3MsIHIucmkpO1xuICAgICAgICByLnJpLnZzdWIoc3BoZXJlQm9keS5wb3NpdGlvbiwgci5yaSk7XG4gICAgICAgIFRyYW5zZm9ybS5wb2ludFRvV29ybGRGcmFtZSh0cmltZXNoUG9zLCB0cmltZXNoUXVhdCwgdG1wLCB0bXApO1xuICAgICAgICB0bXAudnN1Yih0cmltZXNoQm9keS5wb3NpdGlvbiwgci5yaik7XG4gICAgICAgIFRyYW5zZm9ybS52ZWN0b3JUb1dvcmxkRnJhbWUodHJpbWVzaFF1YXQsIHIubmksIHIubmkpO1xuICAgICAgICBUcmFuc2Zvcm0udmVjdG9yVG9Xb3JsZEZyYW1lKHRyaW1lc2hRdWF0LCByLnJpLCByLnJpKTtcbiAgICAgICAgdGhpcy5yZXN1bHQucHVzaChyKTtcbiAgICAgICAgdGhpcy5jcmVhdGVGcmljdGlvbkVxdWF0aW9uc0Zyb21Db250YWN0KHIsIHRoaXMuZnJpY3Rpb25SZXN1bHQpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHRyaWFuZ2xlcy5sZW5ndGggPSAwO1xuICB9XG5cbiAgcGxhbmVUcmltZXNoKHBsYW5lU2hhcGUsIHRyaW1lc2hTaGFwZSwgcGxhbmVQb3MsIHRyaW1lc2hQb3MsIHBsYW5lUXVhdCwgdHJpbWVzaFF1YXQsIHBsYW5lQm9keSwgdHJpbWVzaEJvZHksIHJzaSwgcnNqLCBqdXN0VGVzdCkge1xuICAgIC8vIE1ha2UgY29udGFjdHMhXG4gICAgY29uc3QgdiA9IG5ldyBWZWMzKCk7XG4gICAgY29uc3Qgbm9ybWFsID0gcGxhbmVUcmltZXNoX25vcm1hbDtcbiAgICBub3JtYWwuc2V0KDAsIDAsIDEpO1xuICAgIHBsYW5lUXVhdC52bXVsdChub3JtYWwsIG5vcm1hbCk7IC8vIFR1cm4gbm9ybWFsIGFjY29yZGluZyB0byBwbGFuZVxuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0cmltZXNoU2hhcGUudmVydGljZXMubGVuZ3RoIC8gMzsgaSsrKSB7XG4gICAgICAvLyBHZXQgd29ybGQgdmVydGV4IGZyb20gdHJpbWVzaFxuICAgICAgdHJpbWVzaFNoYXBlLmdldFZlcnRleChpLCB2KTsgLy8gU2FmZSB1cFxuXG4gICAgICBjb25zdCB2MiA9IG5ldyBWZWMzKCk7XG4gICAgICB2Mi5jb3B5KHYpO1xuICAgICAgVHJhbnNmb3JtLnBvaW50VG9Xb3JsZEZyYW1lKHRyaW1lc2hQb3MsIHRyaW1lc2hRdWF0LCB2Miwgdik7IC8vIENoZWNrIHBsYW5lIHNpZGVcblxuICAgICAgY29uc3QgcmVscG9zID0gcGxhbmVUcmltZXNoX3JlbHBvcztcbiAgICAgIHYudnN1YihwbGFuZVBvcywgcmVscG9zKTtcbiAgICAgIGNvbnN0IGRvdCA9IG5vcm1hbC5kb3QocmVscG9zKTtcblxuICAgICAgaWYgKGRvdCA8PSAwLjApIHtcbiAgICAgICAgaWYgKGp1c3RUZXN0KSB7XG4gICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCByID0gdGhpcy5jcmVhdGVDb250YWN0RXF1YXRpb24ocGxhbmVCb2R5LCB0cmltZXNoQm9keSwgcGxhbmVTaGFwZSwgdHJpbWVzaFNoYXBlLCByc2ksIHJzaik7XG4gICAgICAgIHIubmkuY29weShub3JtYWwpOyAvLyBDb250YWN0IG5vcm1hbCBpcyB0aGUgcGxhbmUgbm9ybWFsXG4gICAgICAgIC8vIEdldCB2ZXJ0ZXggcG9zaXRpb24gcHJvamVjdGVkIG9uIHBsYW5lXG5cbiAgICAgICAgY29uc3QgcHJvamVjdGVkID0gcGxhbmVUcmltZXNoX3Byb2plY3RlZDtcbiAgICAgICAgbm9ybWFsLnNjYWxlKHJlbHBvcy5kb3Qobm9ybWFsKSwgcHJvamVjdGVkKTtcbiAgICAgICAgdi52c3ViKHByb2plY3RlZCwgcHJvamVjdGVkKTsgLy8gcmkgaXMgdGhlIHByb2plY3RlZCB3b3JsZCBwb3NpdGlvbiBtaW51cyBwbGFuZSBwb3NpdGlvblxuXG4gICAgICAgIHIucmkuY29weShwcm9qZWN0ZWQpO1xuICAgICAgICByLnJpLnZzdWIocGxhbmVCb2R5LnBvc2l0aW9uLCByLnJpKTtcbiAgICAgICAgci5yai5jb3B5KHYpO1xuICAgICAgICByLnJqLnZzdWIodHJpbWVzaEJvZHkucG9zaXRpb24sIHIucmopOyAvLyBTdG9yZSByZXN1bHRcblxuICAgICAgICB0aGlzLnJlc3VsdC5wdXNoKHIpO1xuICAgICAgICB0aGlzLmNyZWF0ZUZyaWN0aW9uRXF1YXRpb25zRnJvbUNvbnRhY3QociwgdGhpcy5mcmljdGlvblJlc3VsdCk7XG4gICAgICB9XG4gICAgfVxuICB9IC8vIGNvbnZleFRyaW1lc2goXG4gIC8vICAgc2k6IENvbnZleFBvbHloZWRyb24sIHNqOiBUcmltZXNoLCB4aTogVmVjMywgeGo6IFZlYzMsIHFpOiBRdWF0ZXJuaW9uLCBxajogUXVhdGVybmlvbixcbiAgLy8gICBiaTogQm9keSwgYmo6IEJvZHksIHJzaT86IFNoYXBlIHwgbnVsbCwgcnNqPzogU2hhcGUgfCBudWxsLFxuICAvLyAgIGZhY2VMaXN0QT86IG51bWJlcltdIHwgbnVsbCwgZmFjZUxpc3RCPzogbnVtYmVyW10gfCBudWxsLFxuICAvLyApIHtcbiAgLy8gICBjb25zdCBzZXBBeGlzID0gY29udmV4Q29udmV4X3NlcEF4aXM7XG4gIC8vICAgaWYoeGkuZGlzdGFuY2VUbyh4aikgPiBzaS5ib3VuZGluZ1NwaGVyZVJhZGl1cyArIHNqLmJvdW5kaW5nU3BoZXJlUmFkaXVzKXtcbiAgLy8gICAgICAgcmV0dXJuO1xuICAvLyAgIH1cbiAgLy8gICAvLyBDb25zdHJ1Y3QgYSB0ZW1wIGh1bGwgZm9yIGVhY2ggdHJpYW5nbGVcbiAgLy8gICBjb25zdCBodWxsQiA9IG5ldyBDb252ZXhQb2x5aGVkcm9uKCk7XG4gIC8vICAgaHVsbEIuZmFjZXMgPSBbWzAsMSwyXV07XG4gIC8vICAgY29uc3QgdmEgPSBuZXcgVmVjMygpO1xuICAvLyAgIGNvbnN0IHZiID0gbmV3IFZlYzMoKTtcbiAgLy8gICBjb25zdCB2YyA9IG5ldyBWZWMzKCk7XG4gIC8vICAgaHVsbEIudmVydGljZXMgPSBbXG4gIC8vICAgICAgIHZhLFxuICAvLyAgICAgICB2YixcbiAgLy8gICAgICAgdmNcbiAgLy8gICBdO1xuICAvLyAgIGZvciAobGV0IGkgPSAwOyBpIDwgc2ouaW5kaWNlcy5sZW5ndGggLyAzOyBpKyspIHtcbiAgLy8gICAgICAgY29uc3QgdHJpYW5nbGVOb3JtYWwgPSBuZXcgVmVjMygpO1xuICAvLyAgICAgICBzai5nZXROb3JtYWwoaSwgdHJpYW5nbGVOb3JtYWwpO1xuICAvLyAgICAgICBodWxsQi5mYWNlTm9ybWFscyA9IFt0cmlhbmdsZU5vcm1hbF07XG4gIC8vICAgICAgIHNqLmdldFRyaWFuZ2xlVmVydGljZXMoaSwgdmEsIHZiLCB2Yyk7XG4gIC8vICAgICAgIGxldCBkID0gc2kudGVzdFNlcEF4aXModHJpYW5nbGVOb3JtYWwsIGh1bGxCLCB4aSwgcWksIHhqLCBxaik7XG4gIC8vICAgICAgIGlmKCFkKXtcbiAgLy8gICAgICAgICAgIHRyaWFuZ2xlTm9ybWFsLnNjYWxlKC0xLCB0cmlhbmdsZU5vcm1hbCk7XG4gIC8vICAgICAgICAgICBkID0gc2kudGVzdFNlcEF4aXModHJpYW5nbGVOb3JtYWwsIGh1bGxCLCB4aSwgcWksIHhqLCBxaik7XG4gIC8vICAgICAgICAgICBpZighZCl7XG4gIC8vICAgICAgICAgICAgICAgY29udGludWU7XG4gIC8vICAgICAgICAgICB9XG4gIC8vICAgICAgIH1cbiAgLy8gICAgICAgY29uc3QgcmVzOiBDb252ZXhQb2x5aGVkcm9uQ29udGFjdFBvaW50W10gPSBbXTtcbiAgLy8gICAgICAgY29uc3QgcSA9IGNvbnZleENvbnZleF9xO1xuICAvLyAgICAgICBzaS5jbGlwQWdhaW5zdEh1bGwoeGkscWksaHVsbEIseGoscWosdHJpYW5nbGVOb3JtYWwsLTEwMCwxMDAscmVzKTtcbiAgLy8gICAgICAgZm9yKGxldCBqID0gMDsgaiAhPT0gcmVzLmxlbmd0aDsgaisrKXtcbiAgLy8gICAgICAgICAgIGNvbnN0IHIgPSB0aGlzLmNyZWF0ZUNvbnRhY3RFcXVhdGlvbihiaSxiaixzaSxzaixyc2kscnNqKSxcbiAgLy8gICAgICAgICAgICAgICByaSA9IHIucmksXG4gIC8vICAgICAgICAgICAgICAgcmogPSByLnJqO1xuICAvLyAgICAgICAgICAgci5uaS5jb3B5KHRyaWFuZ2xlTm9ybWFsKTtcbiAgLy8gICAgICAgICAgIHIubmkubmVnYXRlKHIubmkpO1xuICAvLyAgICAgICAgICAgcmVzW2pdLm5vcm1hbC5uZWdhdGUocSk7XG4gIC8vICAgICAgICAgICBxLm11bHQocmVzW2pdLmRlcHRoLCBxKTtcbiAgLy8gICAgICAgICAgIHJlc1tqXS5wb2ludC52YWRkKHEsIHJpKTtcbiAgLy8gICAgICAgICAgIHJqLmNvcHkocmVzW2pdLnBvaW50KTtcbiAgLy8gICAgICAgICAgIC8vIENvbnRhY3QgcG9pbnRzIGFyZSBpbiB3b3JsZCBjb29yZGluYXRlcy4gVHJhbnNmb3JtIGJhY2sgdG8gcmVsYXRpdmVcbiAgLy8gICAgICAgICAgIHJpLnZzdWIoeGkscmkpO1xuICAvLyAgICAgICAgICAgcmoudnN1Yih4aixyaik7XG4gIC8vICAgICAgICAgICAvLyBNYWtlIHJlbGF0aXZlIHRvIGJvZGllc1xuICAvLyAgICAgICAgICAgcmkudmFkZCh4aSwgcmkpO1xuICAvLyAgICAgICAgICAgcmkudnN1YihiaS5wb3NpdGlvbiwgcmkpO1xuICAvLyAgICAgICAgICAgcmoudmFkZCh4aiwgcmopO1xuICAvLyAgICAgICAgICAgcmoudnN1Yihiai5wb3NpdGlvbiwgcmopO1xuICAvLyAgICAgICAgICAgcmVzdWx0LnB1c2gocik7XG4gIC8vICAgICAgIH1cbiAgLy8gICB9XG4gIC8vIH1cblxuXG59XG5jb25zdCBhdmVyYWdlTm9ybWFsID0gbmV3IFZlYzMoKTtcbmNvbnN0IGF2ZXJhZ2VDb250YWN0UG9pbnRBID0gbmV3IFZlYzMoKTtcbmNvbnN0IGF2ZXJhZ2VDb250YWN0UG9pbnRCID0gbmV3IFZlYzMoKTtcbmNvbnN0IHRtcFZlYzEgPSBuZXcgVmVjMygpO1xuY29uc3QgdG1wVmVjMiA9IG5ldyBWZWMzKCk7XG5jb25zdCB0bXBRdWF0MSA9IG5ldyBRdWF0ZXJuaW9uKCk7XG5jb25zdCB0bXBRdWF0MiA9IG5ldyBRdWF0ZXJuaW9uKCk7XG5cbmNvbnN0IHBsYW5lVHJpbWVzaF9ub3JtYWwgPSBuZXcgVmVjMygpO1xuY29uc3QgcGxhbmVUcmltZXNoX3JlbHBvcyA9IG5ldyBWZWMzKCk7XG5jb25zdCBwbGFuZVRyaW1lc2hfcHJvamVjdGVkID0gbmV3IFZlYzMoKTtcbmNvbnN0IHNwaGVyZVRyaW1lc2hfbm9ybWFsID0gbmV3IFZlYzMoKTtcbmNvbnN0IHNwaGVyZVRyaW1lc2hfcmVscG9zID0gbmV3IFZlYzMoKTtcbmNvbnN0IHNwaGVyZVRyaW1lc2hfdiA9IG5ldyBWZWMzKCk7XG5jb25zdCBzcGhlcmVUcmltZXNoX3YyID0gbmV3IFZlYzMoKTtcbmNvbnN0IHNwaGVyZVRyaW1lc2hfZWRnZVZlcnRleEEgPSBuZXcgVmVjMygpO1xuY29uc3Qgc3BoZXJlVHJpbWVzaF9lZGdlVmVydGV4QiA9IG5ldyBWZWMzKCk7XG5jb25zdCBzcGhlcmVUcmltZXNoX2VkZ2VWZWN0b3IgPSBuZXcgVmVjMygpO1xuY29uc3Qgc3BoZXJlVHJpbWVzaF9lZGdlVmVjdG9yVW5pdCA9IG5ldyBWZWMzKCk7XG5jb25zdCBzcGhlcmVUcmltZXNoX2xvY2FsU3BoZXJlUG9zID0gbmV3IFZlYzMoKTtcbmNvbnN0IHNwaGVyZVRyaW1lc2hfdG1wID0gbmV3IFZlYzMoKTtcbmNvbnN0IHNwaGVyZVRyaW1lc2hfdmEgPSBuZXcgVmVjMygpO1xuY29uc3Qgc3BoZXJlVHJpbWVzaF92YiA9IG5ldyBWZWMzKCk7XG5jb25zdCBzcGhlcmVUcmltZXNoX3ZjID0gbmV3IFZlYzMoKTtcbmNvbnN0IHNwaGVyZVRyaW1lc2hfbG9jYWxTcGhlcmVBQUJCID0gbmV3IEFBQkIoKTtcbmNvbnN0IHNwaGVyZVRyaW1lc2hfdHJpYW5nbGVzID0gW107XG5jb25zdCBwb2ludF9vbl9wbGFuZV90b19zcGhlcmUgPSBuZXcgVmVjMygpO1xuY29uc3QgcGxhbmVfdG9fc3BoZXJlX29ydGhvID0gbmV3IFZlYzMoKTsgLy8gU2VlIGh0dHA6Ly9idWxsZXRwaHlzaWNzLmNvbS9CdWxsZXQvQnVsbGV0RnVsbC9TcGhlcmVUcmlhbmdsZURldGVjdG9yXzhjcHBfc291cmNlLmh0bWxcblxuY29uc3QgcG9pbnRJblBvbHlnb25fZWRnZSA9IG5ldyBWZWMzKCk7XG5jb25zdCBwb2ludEluUG9seWdvbl9lZGdlX3hfbm9ybWFsID0gbmV3IFZlYzMoKTtcbmNvbnN0IHBvaW50SW5Qb2x5Z29uX3Z0cCA9IG5ldyBWZWMzKCk7XG5cbmZ1bmN0aW9uIHBvaW50SW5Qb2x5Z29uKHZlcnRzLCBub3JtYWwsIHApIHtcbiAgbGV0IHBvc2l0aXZlUmVzdWx0ID0gbnVsbDtcbiAgY29uc3QgTiA9IHZlcnRzLmxlbmd0aDtcblxuICBmb3IgKGxldCBpID0gMDsgaSAhPT0gTjsgaSsrKSB7XG4gICAgY29uc3QgdiA9IHZlcnRzW2ldOyAvLyBHZXQgZWRnZSB0byB0aGUgbmV4dCB2ZXJ0ZXhcblxuICAgIGNvbnN0IGVkZ2UgPSBwb2ludEluUG9seWdvbl9lZGdlO1xuICAgIHZlcnRzWyhpICsgMSkgJSBOXS52c3ViKHYsIGVkZ2UpOyAvLyBHZXQgY3Jvc3MgcHJvZHVjdCBiZXR3ZWVuIHBvbHlnb24gbm9ybWFsIGFuZCB0aGUgZWRnZVxuXG4gICAgY29uc3QgZWRnZV94X25vcm1hbCA9IHBvaW50SW5Qb2x5Z29uX2VkZ2VfeF9ub3JtYWw7IC8vY29uc3QgZWRnZV94X25vcm1hbCA9IG5ldyBWZWMzKCk7XG5cbiAgICBlZGdlLmNyb3NzKG5vcm1hbCwgZWRnZV94X25vcm1hbCk7IC8vIEdldCB2ZWN0b3IgYmV0d2VlbiBwb2ludCBhbmQgY3VycmVudCB2ZXJ0ZXhcblxuICAgIGNvbnN0IHZlcnRleF90b19wID0gcG9pbnRJblBvbHlnb25fdnRwO1xuICAgIHAudnN1Yih2LCB2ZXJ0ZXhfdG9fcCk7IC8vIFRoaXMgZG90IHByb2R1Y3QgZGV0ZXJtaW5lcyB3aGljaCBzaWRlIG9mIHRoZSBlZGdlIHRoZSBwb2ludCBpc1xuXG4gICAgY29uc3QgciA9IGVkZ2VfeF9ub3JtYWwuZG90KHZlcnRleF90b19wKTsgLy8gSWYgYWxsIHN1Y2ggZG90IHByb2R1Y3RzIGhhdmUgc2FtZSBzaWduLCB3ZSBhcmUgaW5zaWRlIHRoZSBwb2x5Z29uLlxuXG4gICAgaWYgKHBvc2l0aXZlUmVzdWx0ID09PSBudWxsIHx8IHIgPiAwICYmIHBvc2l0aXZlUmVzdWx0ID09PSB0cnVlIHx8IHIgPD0gMCAmJiBwb3NpdGl2ZVJlc3VsdCA9PT0gZmFsc2UpIHtcbiAgICAgIGlmIChwb3NpdGl2ZVJlc3VsdCA9PT0gbnVsbCkge1xuICAgICAgICBwb3NpdGl2ZVJlc3VsdCA9IHIgPiAwO1xuICAgICAgfVxuXG4gICAgICBjb250aW51ZTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIGZhbHNlOyAvLyBFbmNvdW50ZXJlZCBzb21lIG90aGVyIHNpZ24uIEV4aXQuXG4gICAgfVxuICB9IC8vIElmIHdlIGdvdCBoZXJlLCBhbGwgZG90IHByb2R1Y3RzIHdlcmUgb2YgdGhlIHNhbWUgc2lnbi5cblxuXG4gIHJldHVybiB0cnVlO1xufVxuXG5jb25zdCBib3hfdG9fc3BoZXJlID0gbmV3IFZlYzMoKTtcbmNvbnN0IHNwaGVyZUJveF9ucyA9IG5ldyBWZWMzKCk7XG5jb25zdCBzcGhlcmVCb3hfbnMxID0gbmV3IFZlYzMoKTtcbmNvbnN0IHNwaGVyZUJveF9uczIgPSBuZXcgVmVjMygpO1xuY29uc3Qgc3BoZXJlQm94X3NpZGVzID0gW25ldyBWZWMzKCksIG5ldyBWZWMzKCksIG5ldyBWZWMzKCksIG5ldyBWZWMzKCksIG5ldyBWZWMzKCksIG5ldyBWZWMzKCldO1xuY29uc3Qgc3BoZXJlQm94X3NwaGVyZV90b19jb3JuZXIgPSBuZXcgVmVjMygpO1xuY29uc3Qgc3BoZXJlQm94X3NpZGVfbnMgPSBuZXcgVmVjMygpO1xuY29uc3Qgc3BoZXJlQm94X3NpZGVfbnMxID0gbmV3IFZlYzMoKTtcbmNvbnN0IHNwaGVyZUJveF9zaWRlX25zMiA9IG5ldyBWZWMzKCk7XG5jb25zdCBjb252ZXhfdG9fc3BoZXJlID0gbmV3IFZlYzMoKTtcbmNvbnN0IHNwaGVyZUNvbnZleF9lZGdlID0gbmV3IFZlYzMoKTtcbmNvbnN0IHNwaGVyZUNvbnZleF9lZGdlVW5pdCA9IG5ldyBWZWMzKCk7XG5jb25zdCBzcGhlcmVDb252ZXhfc3BoZXJlVG9Db3JuZXIgPSBuZXcgVmVjMygpO1xuY29uc3Qgc3BoZXJlQ29udmV4X3dvcmxkQ29ybmVyID0gbmV3IFZlYzMoKTtcbmNvbnN0IHNwaGVyZUNvbnZleF93b3JsZE5vcm1hbCA9IG5ldyBWZWMzKCk7XG5jb25zdCBzcGhlcmVDb252ZXhfd29ybGRQb2ludCA9IG5ldyBWZWMzKCk7XG5jb25zdCBzcGhlcmVDb252ZXhfd29ybGRTcGhlcmVQb2ludENsb3Nlc3RUb1BsYW5lID0gbmV3IFZlYzMoKTtcbmNvbnN0IHNwaGVyZUNvbnZleF9wZW5ldHJhdGlvblZlYyA9IG5ldyBWZWMzKCk7XG5jb25zdCBzcGhlcmVDb252ZXhfc3BoZXJlVG9Xb3JsZFBvaW50ID0gbmV3IFZlYzMoKTtcbmNvbnN0IHBsYW5lQ29udmV4X3YgPSBuZXcgVmVjMygpO1xuY29uc3QgcGxhbmVDb252ZXhfbm9ybWFsID0gbmV3IFZlYzMoKTtcbmNvbnN0IHBsYW5lQ29udmV4X3JlbHBvcyA9IG5ldyBWZWMzKCk7XG5jb25zdCBwbGFuZUNvbnZleF9wcm9qZWN0ZWQgPSBuZXcgVmVjMygpO1xuY29uc3QgY29udmV4Q29udmV4X3NlcEF4aXMgPSBuZXcgVmVjMygpO1xuY29uc3QgY29udmV4Q29udmV4X3EgPSBuZXcgVmVjMygpO1xuY29uc3QgcGFydGljbGVQbGFuZV9ub3JtYWwgPSBuZXcgVmVjMygpO1xuY29uc3QgcGFydGljbGVQbGFuZV9yZWxwb3MgPSBuZXcgVmVjMygpO1xuY29uc3QgcGFydGljbGVQbGFuZV9wcm9qZWN0ZWQgPSBuZXcgVmVjMygpO1xuY29uc3QgcGFydGljbGVTcGhlcmVfbm9ybWFsID0gbmV3IFZlYzMoKTsgLy8gV0lQXG5cbmNvbnN0IGNxaiA9IG5ldyBRdWF0ZXJuaW9uKCk7XG5jb25zdCBjb252ZXhQYXJ0aWNsZV9sb2NhbCA9IG5ldyBWZWMzKCk7XG5jb25zdCBjb252ZXhQYXJ0aWNsZV9wZW5ldHJhdGVkRmFjZU5vcm1hbCA9IG5ldyBWZWMzKCk7XG5jb25zdCBjb252ZXhQYXJ0aWNsZV92ZXJ0ZXhUb1BhcnRpY2xlID0gbmV3IFZlYzMoKTtcbmNvbnN0IGNvbnZleFBhcnRpY2xlX3dvcmxkUGVuZXRyYXRpb25WZWMgPSBuZXcgVmVjMygpO1xuY29uc3QgY29udmV4SGVpZ2h0ZmllbGRfdG1wMSA9IG5ldyBWZWMzKCk7XG5jb25zdCBjb252ZXhIZWlnaHRmaWVsZF90bXAyID0gbmV3IFZlYzMoKTtcbmNvbnN0IGNvbnZleEhlaWdodGZpZWxkX2ZhY2VMaXN0ID0gWzBdO1xuY29uc3Qgc3BoZXJlSGVpZ2h0ZmllbGRfdG1wMSA9IG5ldyBWZWMzKCk7XG5jb25zdCBzcGhlcmVIZWlnaHRmaWVsZF90bXAyID0gbmV3IFZlYzMoKTtcblxuY2xhc3MgT3ZlcmxhcEtlZXBlciB7XG4gIC8qKlxuICAgKiBAdG9kbyBSZW1vdmUgdXNlbGVzcyBjb25zdHJ1Y3RvclxuICAgKi9cbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy5jdXJyZW50ID0gdm9pZCAwO1xuICAgIHRoaXMucHJldmlvdXMgPSB2b2lkIDA7XG4gICAgdGhpcy5jdXJyZW50ID0gW107XG4gICAgdGhpcy5wcmV2aW91cyA9IFtdO1xuICB9XG4gIC8qKlxuICAgKiBnZXRLZXlcbiAgICovXG5cblxuICBnZXRLZXkoaSwgaikge1xuICAgIGlmIChqIDwgaSkge1xuICAgICAgY29uc3QgdGVtcCA9IGo7XG4gICAgICBqID0gaTtcbiAgICAgIGkgPSB0ZW1wO1xuICAgIH1cblxuICAgIHJldHVybiBpIDw8IDE2IHwgajtcbiAgfVxuICAvKipcbiAgICogc2V0XG4gICAqL1xuXG5cbiAgc2V0KGksIGopIHtcbiAgICAvLyBJbnNlcnRpb24gc29ydC4gVGhpcyB3YXkgdGhlIGRpZmYgd2lsbCBoYXZlIGxpbmVhciBjb21wbGV4aXR5LlxuICAgIGNvbnN0IGtleSA9IHRoaXMuZ2V0S2V5KGksIGopO1xuICAgIGNvbnN0IGN1cnJlbnQgPSB0aGlzLmN1cnJlbnQ7XG4gICAgbGV0IGluZGV4ID0gMDtcblxuICAgIHdoaWxlIChrZXkgPiBjdXJyZW50W2luZGV4XSkge1xuICAgICAgaW5kZXgrKztcbiAgICB9XG5cbiAgICBpZiAoa2V5ID09PSBjdXJyZW50W2luZGV4XSkge1xuICAgICAgcmV0dXJuOyAvLyBQYWlyIHdhcyBhbHJlYWR5IGFkZGVkXG4gICAgfVxuXG4gICAgZm9yIChsZXQgaiA9IGN1cnJlbnQubGVuZ3RoIC0gMTsgaiA+PSBpbmRleDsgai0tKSB7XG4gICAgICBjdXJyZW50W2ogKyAxXSA9IGN1cnJlbnRbal07XG4gICAgfVxuXG4gICAgY3VycmVudFtpbmRleF0gPSBrZXk7XG4gIH1cbiAgLyoqXG4gICAqIHRpY2tcbiAgICovXG5cblxuICB0aWNrKCkge1xuICAgIGNvbnN0IHRtcCA9IHRoaXMuY3VycmVudDtcbiAgICB0aGlzLmN1cnJlbnQgPSB0aGlzLnByZXZpb3VzO1xuICAgIHRoaXMucHJldmlvdXMgPSB0bXA7XG4gICAgdGhpcy5jdXJyZW50Lmxlbmd0aCA9IDA7XG4gIH1cbiAgLyoqXG4gICAqIGdldERpZmZcbiAgICovXG5cblxuICBnZXREaWZmKGFkZGl0aW9ucywgcmVtb3ZhbHMpIHtcbiAgICBjb25zdCBhID0gdGhpcy5jdXJyZW50O1xuICAgIGNvbnN0IGIgPSB0aGlzLnByZXZpb3VzO1xuICAgIGNvbnN0IGFsID0gYS5sZW5ndGg7XG4gICAgY29uc3QgYmwgPSBiLmxlbmd0aDtcbiAgICBsZXQgaiA9IDA7XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGFsOyBpKyspIHtcbiAgICAgIGxldCBmb3VuZCA9IGZhbHNlO1xuICAgICAgY29uc3Qga2V5QSA9IGFbaV07XG5cbiAgICAgIHdoaWxlIChrZXlBID4gYltqXSkge1xuICAgICAgICBqKys7XG4gICAgICB9XG5cbiAgICAgIGZvdW5kID0ga2V5QSA9PT0gYltqXTtcblxuICAgICAgaWYgKCFmb3VuZCkge1xuICAgICAgICB1bnBhY2tBbmRQdXNoKGFkZGl0aW9ucywga2V5QSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaiA9IDA7XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGJsOyBpKyspIHtcbiAgICAgIGxldCBmb3VuZCA9IGZhbHNlO1xuICAgICAgY29uc3Qga2V5QiA9IGJbaV07XG5cbiAgICAgIHdoaWxlIChrZXlCID4gYVtqXSkge1xuICAgICAgICBqKys7XG4gICAgICB9XG5cbiAgICAgIGZvdW5kID0gYVtqXSA9PT0ga2V5QjtcblxuICAgICAgaWYgKCFmb3VuZCkge1xuICAgICAgICB1bnBhY2tBbmRQdXNoKHJlbW92YWxzLCBrZXlCKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxufVxuXG5mdW5jdGlvbiB1bnBhY2tBbmRQdXNoKGFycmF5LCBrZXkpIHtcbiAgYXJyYXkucHVzaCgoa2V5ICYgMHhmZmZmMDAwMCkgPj4gMTYsIGtleSAmIDB4MDAwMGZmZmYpO1xufVxuXG4vKipcbiAqIFR1cGxlRGljdGlvbmFyeVxuICovXG5jbGFzcyBUdXBsZURpY3Rpb25hcnkge1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICB0aGlzLmRhdGEgPSB7XG4gICAgICBrZXlzOiBbXVxuICAgIH07XG4gIH1cblxuICAvKiogZ2V0ICovXG4gIGdldChpLCBqKSB7XG4gICAgaWYgKGkgPiBqKSB7XG4gICAgICAvLyBzd2FwXG4gICAgICBjb25zdCB0ZW1wID0gajtcbiAgICAgIGogPSBpO1xuICAgICAgaSA9IHRlbXA7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMuZGF0YVtpICsgXCItXCIgKyBqXTtcbiAgfVxuICAvKiogc2V0ICovXG5cblxuICBzZXQoaSwgaiwgdmFsdWUpIHtcbiAgICBpZiAoaSA+IGopIHtcbiAgICAgIGNvbnN0IHRlbXAgPSBqO1xuICAgICAgaiA9IGk7XG4gICAgICBpID0gdGVtcDtcbiAgICB9XG5cbiAgICBjb25zdCBrZXkgPSBpICsgXCItXCIgKyBqOyAvLyBDaGVjayBpZiBrZXkgYWxyZWFkeSBleGlzdHNcblxuICAgIGlmICghdGhpcy5nZXQoaSwgaikpIHtcbiAgICAgIHRoaXMuZGF0YS5rZXlzLnB1c2goa2V5KTtcbiAgICB9XG5cbiAgICB0aGlzLmRhdGFba2V5XSA9IHZhbHVlO1xuICB9XG4gIC8qKiByZXNldCAqL1xuXG5cbiAgcmVzZXQoKSB7XG4gICAgY29uc3QgZGF0YSA9IHRoaXMuZGF0YTtcbiAgICBjb25zdCBrZXlzID0gZGF0YS5rZXlzO1xuXG4gICAgd2hpbGUgKGtleXMubGVuZ3RoID4gMCkge1xuICAgICAgY29uc3Qga2V5ID0ga2V5cy5wb3AoKTtcbiAgICAgIGRlbGV0ZSBkYXRhW2tleV07XG4gICAgfVxuICB9XG5cbn1cblxuLyoqXG4gKiBUaGUgcGh5c2ljcyB3b3JsZFxuICovXG5jbGFzcyBXb3JsZCBleHRlbmRzIEV2ZW50VGFyZ2V0IHtcbiAgLyoqXG4gICAqIEN1cnJlbnRseSAvIGxhc3QgdXNlZCB0aW1lc3RlcC4gSXMgc2V0IHRvIC0xIGlmIG5vdCBhdmFpbGFibGUuIFRoaXMgdmFsdWUgaXMgdXBkYXRlZCBiZWZvcmUgZWFjaCBpbnRlcm5hbCBzdGVwLCB3aGljaCBtZWFucyB0aGF0IGl0IGlzIFwiZnJlc2hcIiBpbnNpZGUgZXZlbnQgY2FsbGJhY2tzLlxuICAgKi9cblxuICAvKipcbiAgICogTWFrZXMgYm9kaWVzIGdvIHRvIHNsZWVwIHdoZW4gdGhleSd2ZSBiZWVuIGluYWN0aXZlLlxuICAgKiBAZGVmYXVsdCBmYWxzZVxuICAgKi9cblxuICAvKipcbiAgICogQWxsIHRoZSBjdXJyZW50IGNvbnRhY3RzIChpbnN0YW5jZXMgb2YgQ29udGFjdEVxdWF0aW9uKSBpbiB0aGUgd29ybGQuXG4gICAqL1xuXG4gIC8qKlxuICAgKiBIb3cgb2Z0ZW4gdG8gbm9ybWFsaXplIHF1YXRlcm5pb25zLiBTZXQgdG8gMCBmb3IgZXZlcnkgc3RlcCwgMSBmb3IgZXZlcnkgc2Vjb25kIGV0Yy4uIEEgbGFyZ2VyIHZhbHVlIGluY3JlYXNlcyBwZXJmb3JtYW5jZS4gSWYgYm9kaWVzIHRlbmQgdG8gZXhwbG9kZSwgc2V0IHRvIGEgc21hbGxlciB2YWx1ZSAoemVybyB0byBiZSBzdXJlIG5vdGhpbmcgY2FuIGdvIHdyb25nKS5cbiAgICogQGRlZmF1bHQgMFxuICAgKi9cblxuICAvKipcbiAgICogU2V0IHRvIHRydWUgdG8gdXNlIGZhc3QgcXVhdGVybmlvbiBub3JtYWxpemF0aW9uLiBJdCBpcyBvZnRlbiBlbm91Z2ggYWNjdXJhdGUgdG8gdXNlLlxuICAgKiBJZiBib2RpZXMgdGVuZCB0byBleHBsb2RlLCBzZXQgdG8gZmFsc2UuXG4gICAqIEBkZWZhdWx0IGZhbHNlXG4gICAqL1xuXG4gIC8qKlxuICAgKiBUaGUgd2FsbC1jbG9jayB0aW1lIHNpbmNlIHNpbXVsYXRpb24gc3RhcnQuXG4gICAqL1xuXG4gIC8qKlxuICAgKiBOdW1iZXIgb2YgdGltZXN0ZXBzIHRha2VuIHNpbmNlIHN0YXJ0LlxuICAgKi9cblxuICAvKipcbiAgICogRGVmYXVsdCBhbmQgbGFzdCB0aW1lc3RlcCBzaXplcy5cbiAgICovXG5cbiAgLyoqXG4gICAqIFRoZSBncmF2aXR5IG9mIHRoZSB3b3JsZC5cbiAgICovXG5cbiAgLyoqXG4gICAqIFRoZSBicm9hZHBoYXNlIGFsZ29yaXRobSB0byB1c2UuXG4gICAqIEBkZWZhdWx0IE5haXZlQnJvYWRwaGFzZVxuICAgKi9cblxuICAvKipcbiAgICogQWxsIGJvZGllcyBpbiB0aGlzIHdvcmxkXG4gICAqL1xuXG4gIC8qKlxuICAgKiBUcnVlIGlmIGFueSBib2RpZXMgYXJlIG5vdCBzbGVlcGluZywgZmFsc2UgaWYgZXZlcnkgYm9keSBpcyBzbGVlcGluZy5cbiAgICovXG5cbiAgLyoqXG4gICAqIFRoZSBzb2x2ZXIgYWxnb3JpdGhtIHRvIHVzZS5cbiAgICogQGRlZmF1bHQgR1NTb2x2ZXJcbiAgICovXG5cbiAgLyoqXG4gICAqIGNvbGxpc2lvbk1hdHJpeFxuICAgKi9cblxuICAvKipcbiAgICogQ29sbGlzaW9uTWF0cml4IGZyb20gdGhlIHByZXZpb3VzIHN0ZXAuXG4gICAqL1xuXG4gIC8qKlxuICAgKiBBbGwgYWRkZWQgbWF0ZXJpYWxzLlxuICAgKiBAZGVwcmVjYXRlZFxuICAgKiBAdG9kbyBSZW1vdmVcbiAgICovXG5cbiAgLyoqXG4gICAqIEFsbCBhZGRlZCBjb250YWN0bWF0ZXJpYWxzLlxuICAgKi9cblxuICAvKipcbiAgICogVXNlZCB0byBsb29rIHVwIGEgQ29udGFjdE1hdGVyaWFsIGdpdmVuIHR3byBpbnN0YW5jZXMgb2YgTWF0ZXJpYWwuXG4gICAqL1xuXG4gIC8qKlxuICAgKiBUaGUgZGVmYXVsdCBtYXRlcmlhbCBvZiB0aGUgYm9kaWVzLlxuICAgKi9cblxuICAvKipcbiAgICogVGhpcyBjb250YWN0IG1hdGVyaWFsIGlzIHVzZWQgaWYgbm8gc3VpdGFibGUgY29udGFjdG1hdGVyaWFsIGlzIGZvdW5kIGZvciBhIGNvbnRhY3QuXG4gICAqL1xuXG4gIC8qKlxuICAgKiBUaW1lIGFjY3VtdWxhdG9yIGZvciBpbnRlcnBvbGF0aW9uLlxuICAgKiBAc2VlIGh0dHBzOi8vZ2FmZmVyb25nYW1lcy5jb20vZ2FtZS1waHlzaWNzL2ZpeC15b3VyLXRpbWVzdGVwL1xuICAgKi9cblxuICAvKipcbiAgICogRGlzcGF0Y2hlZCBhZnRlciBhIGJvZHkgaGFzIGJlZW4gYWRkZWQgdG8gdGhlIHdvcmxkLlxuICAgKi9cblxuICAvKipcbiAgICogRGlzcGF0Y2hlZCBhZnRlciBhIGJvZHkgaGFzIGJlZW4gcmVtb3ZlZCBmcm9tIHRoZSB3b3JsZC5cbiAgICovXG4gIGNvbnN0cnVjdG9yKG9wdGlvbnMgPSB7fSkge1xuICAgIHN1cGVyKCk7XG4gICAgdGhpcy5kdCA9IHZvaWQgMDtcbiAgICB0aGlzLmFsbG93U2xlZXAgPSB2b2lkIDA7XG4gICAgdGhpcy5jb250YWN0cyA9IHZvaWQgMDtcbiAgICB0aGlzLmZyaWN0aW9uRXF1YXRpb25zID0gdm9pZCAwO1xuICAgIHRoaXMucXVhdE5vcm1hbGl6ZVNraXAgPSB2b2lkIDA7XG4gICAgdGhpcy5xdWF0Tm9ybWFsaXplRmFzdCA9IHZvaWQgMDtcbiAgICB0aGlzLnRpbWUgPSB2b2lkIDA7XG4gICAgdGhpcy5zdGVwbnVtYmVyID0gdm9pZCAwO1xuICAgIHRoaXMuZGVmYXVsdF9kdCA9IHZvaWQgMDtcbiAgICB0aGlzLm5leHRJZCA9IHZvaWQgMDtcbiAgICB0aGlzLmdyYXZpdHkgPSB2b2lkIDA7XG4gICAgdGhpcy5icm9hZHBoYXNlID0gdm9pZCAwO1xuICAgIHRoaXMuYm9kaWVzID0gdm9pZCAwO1xuICAgIHRoaXMuaGFzQWN0aXZlQm9kaWVzID0gdm9pZCAwO1xuICAgIHRoaXMuc29sdmVyID0gdm9pZCAwO1xuICAgIHRoaXMuY29uc3RyYWludHMgPSB2b2lkIDA7XG4gICAgdGhpcy5uYXJyb3dwaGFzZSA9IHZvaWQgMDtcbiAgICB0aGlzLmNvbGxpc2lvbk1hdHJpeCA9IHZvaWQgMDtcbiAgICB0aGlzLmNvbGxpc2lvbk1hdHJpeFByZXZpb3VzID0gdm9pZCAwO1xuICAgIHRoaXMuYm9keU92ZXJsYXBLZWVwZXIgPSB2b2lkIDA7XG4gICAgdGhpcy5zaGFwZU92ZXJsYXBLZWVwZXIgPSB2b2lkIDA7XG4gICAgdGhpcy5tYXRlcmlhbHMgPSB2b2lkIDA7XG4gICAgdGhpcy5jb250YWN0bWF0ZXJpYWxzID0gdm9pZCAwO1xuICAgIHRoaXMuY29udGFjdE1hdGVyaWFsVGFibGUgPSB2b2lkIDA7XG4gICAgdGhpcy5kZWZhdWx0TWF0ZXJpYWwgPSB2b2lkIDA7XG4gICAgdGhpcy5kZWZhdWx0Q29udGFjdE1hdGVyaWFsID0gdm9pZCAwO1xuICAgIHRoaXMuZG9Qcm9maWxpbmcgPSB2b2lkIDA7XG4gICAgdGhpcy5wcm9maWxlID0gdm9pZCAwO1xuICAgIHRoaXMuYWNjdW11bGF0b3IgPSB2b2lkIDA7XG4gICAgdGhpcy5zdWJzeXN0ZW1zID0gdm9pZCAwO1xuICAgIHRoaXMuYWRkQm9keUV2ZW50ID0gdm9pZCAwO1xuICAgIHRoaXMucmVtb3ZlQm9keUV2ZW50ID0gdm9pZCAwO1xuICAgIHRoaXMuaWRUb0JvZHlNYXAgPSB2b2lkIDA7XG4gICAgdGhpcy5kdCA9IC0xO1xuICAgIHRoaXMuYWxsb3dTbGVlcCA9ICEhb3B0aW9ucy5hbGxvd1NsZWVwO1xuICAgIHRoaXMuY29udGFjdHMgPSBbXTtcbiAgICB0aGlzLmZyaWN0aW9uRXF1YXRpb25zID0gW107XG4gICAgdGhpcy5xdWF0Tm9ybWFsaXplU2tpcCA9IG9wdGlvbnMucXVhdE5vcm1hbGl6ZVNraXAgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMucXVhdE5vcm1hbGl6ZVNraXAgOiAwO1xuICAgIHRoaXMucXVhdE5vcm1hbGl6ZUZhc3QgPSBvcHRpb25zLnF1YXROb3JtYWxpemVGYXN0ICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLnF1YXROb3JtYWxpemVGYXN0IDogZmFsc2U7XG4gICAgdGhpcy50aW1lID0gMC4wO1xuICAgIHRoaXMuc3RlcG51bWJlciA9IDA7XG4gICAgdGhpcy5kZWZhdWx0X2R0ID0gMSAvIDYwO1xuICAgIHRoaXMubmV4dElkID0gMDtcbiAgICB0aGlzLmdyYXZpdHkgPSBuZXcgVmVjMygpO1xuXG4gICAgaWYgKG9wdGlvbnMuZ3Jhdml0eSkge1xuICAgICAgdGhpcy5ncmF2aXR5LmNvcHkob3B0aW9ucy5ncmF2aXR5KTtcbiAgICB9XG5cbiAgICB0aGlzLmJyb2FkcGhhc2UgPSBvcHRpb25zLmJyb2FkcGhhc2UgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMuYnJvYWRwaGFzZSA6IG5ldyBOYWl2ZUJyb2FkcGhhc2UoKTtcbiAgICB0aGlzLmJvZGllcyA9IFtdO1xuICAgIHRoaXMuaGFzQWN0aXZlQm9kaWVzID0gZmFsc2U7XG4gICAgdGhpcy5zb2x2ZXIgPSBvcHRpb25zLnNvbHZlciAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5zb2x2ZXIgOiBuZXcgR1NTb2x2ZXIoKTtcbiAgICB0aGlzLmNvbnN0cmFpbnRzID0gW107XG4gICAgdGhpcy5uYXJyb3dwaGFzZSA9IG5ldyBOYXJyb3dwaGFzZSh0aGlzKTtcbiAgICB0aGlzLmNvbGxpc2lvbk1hdHJpeCA9IG5ldyBBcnJheUNvbGxpc2lvbk1hdHJpeCgpO1xuICAgIHRoaXMuY29sbGlzaW9uTWF0cml4UHJldmlvdXMgPSBuZXcgQXJyYXlDb2xsaXNpb25NYXRyaXgoKTtcbiAgICB0aGlzLmJvZHlPdmVybGFwS2VlcGVyID0gbmV3IE92ZXJsYXBLZWVwZXIoKTtcbiAgICB0aGlzLnNoYXBlT3ZlcmxhcEtlZXBlciA9IG5ldyBPdmVybGFwS2VlcGVyKCk7XG4gICAgdGhpcy5tYXRlcmlhbHMgPSBbXTtcbiAgICB0aGlzLmNvbnRhY3RtYXRlcmlhbHMgPSBbXTtcbiAgICB0aGlzLmNvbnRhY3RNYXRlcmlhbFRhYmxlID0gbmV3IFR1cGxlRGljdGlvbmFyeSgpO1xuICAgIHRoaXMuZGVmYXVsdE1hdGVyaWFsID0gbmV3IE1hdGVyaWFsKCdkZWZhdWx0Jyk7XG4gICAgdGhpcy5kZWZhdWx0Q29udGFjdE1hdGVyaWFsID0gbmV3IENvbnRhY3RNYXRlcmlhbCh0aGlzLmRlZmF1bHRNYXRlcmlhbCwgdGhpcy5kZWZhdWx0TWF0ZXJpYWwsIHtcbiAgICAgIGZyaWN0aW9uOiAwLjMsXG4gICAgICByZXN0aXR1dGlvbjogMC4wXG4gICAgfSk7XG4gICAgdGhpcy5kb1Byb2ZpbGluZyA9IGZhbHNlO1xuICAgIHRoaXMucHJvZmlsZSA9IHtcbiAgICAgIHNvbHZlOiAwLFxuICAgICAgbWFrZUNvbnRhY3RDb25zdHJhaW50czogMCxcbiAgICAgIGJyb2FkcGhhc2U6IDAsXG4gICAgICBpbnRlZ3JhdGU6IDAsXG4gICAgICBuYXJyb3dwaGFzZTogMFxuICAgIH07XG4gICAgdGhpcy5hY2N1bXVsYXRvciA9IDA7XG4gICAgdGhpcy5zdWJzeXN0ZW1zID0gW107XG4gICAgdGhpcy5hZGRCb2R5RXZlbnQgPSB7XG4gICAgICB0eXBlOiAnYWRkQm9keScsXG4gICAgICBib2R5OiBudWxsXG4gICAgfTtcbiAgICB0aGlzLnJlbW92ZUJvZHlFdmVudCA9IHtcbiAgICAgIHR5cGU6ICdyZW1vdmVCb2R5JyxcbiAgICAgIGJvZHk6IG51bGxcbiAgICB9O1xuICAgIHRoaXMuaWRUb0JvZHlNYXAgPSB7fTtcbiAgICB0aGlzLmJyb2FkcGhhc2Uuc2V0V29ybGQodGhpcyk7XG4gIH1cbiAgLyoqXG4gICAqIEdldCB0aGUgY29udGFjdCBtYXRlcmlhbCBiZXR3ZWVuIG1hdGVyaWFscyBtMSBhbmQgbTJcbiAgICogQHJldHVybiBUaGUgY29udGFjdCBtYXRlcmlhbCBpZiBpdCB3YXMgZm91bmQuXG4gICAqL1xuXG5cbiAgZ2V0Q29udGFjdE1hdGVyaWFsKG0xLCBtMikge1xuICAgIHJldHVybiB0aGlzLmNvbnRhY3RNYXRlcmlhbFRhYmxlLmdldChtMS5pZCwgbTIuaWQpO1xuICB9XG4gIC8qKlxuICAgKiBHZXQgbnVtYmVyIG9mIG9iamVjdHMgaW4gdGhlIHdvcmxkLlxuICAgKiBAZGVwcmVjYXRlZFxuICAgKi9cblxuXG4gIG51bU9iamVjdHMoKSB7XG4gICAgcmV0dXJuIHRoaXMuYm9kaWVzLmxlbmd0aDtcbiAgfVxuICAvKipcbiAgICogU3RvcmUgb2xkIGNvbGxpc2lvbiBzdGF0ZSBpbmZvXG4gICAqL1xuXG5cbiAgY29sbGlzaW9uTWF0cml4VGljaygpIHtcbiAgICBjb25zdCB0ZW1wID0gdGhpcy5jb2xsaXNpb25NYXRyaXhQcmV2aW91cztcbiAgICB0aGlzLmNvbGxpc2lvbk1hdHJpeFByZXZpb3VzID0gdGhpcy5jb2xsaXNpb25NYXRyaXg7XG4gICAgdGhpcy5jb2xsaXNpb25NYXRyaXggPSB0ZW1wO1xuICAgIHRoaXMuY29sbGlzaW9uTWF0cml4LnJlc2V0KCk7XG4gICAgdGhpcy5ib2R5T3ZlcmxhcEtlZXBlci50aWNrKCk7XG4gICAgdGhpcy5zaGFwZU92ZXJsYXBLZWVwZXIudGljaygpO1xuICB9XG4gIC8qKlxuICAgKiBBZGQgYSBjb25zdHJhaW50IHRvIHRoZSBzaW11bGF0aW9uLlxuICAgKi9cblxuXG4gIGFkZENvbnN0cmFpbnQoYykge1xuICAgIHRoaXMuY29uc3RyYWludHMucHVzaChjKTtcbiAgfVxuICAvKipcbiAgICogUmVtb3ZlcyBhIGNvbnN0cmFpbnRcbiAgICovXG5cblxuICByZW1vdmVDb25zdHJhaW50KGMpIHtcbiAgICBjb25zdCBpZHggPSB0aGlzLmNvbnN0cmFpbnRzLmluZGV4T2YoYyk7XG5cbiAgICBpZiAoaWR4ICE9PSAtMSkge1xuICAgICAgdGhpcy5jb25zdHJhaW50cy5zcGxpY2UoaWR4LCAxKTtcbiAgICB9XG4gIH1cbiAgLyoqXG4gICAqIFJheWNhc3QgdGVzdFxuICAgKiBAZGVwcmVjYXRlZCBVc2UgLnJheWNhc3RBbGwsIC5yYXljYXN0Q2xvc2VzdCBvciAucmF5Y2FzdEFueSBpbnN0ZWFkLlxuICAgKi9cblxuXG4gIHJheVRlc3QoZnJvbSwgdG8sIHJlc3VsdCkge1xuICAgIGlmIChyZXN1bHQgaW5zdGFuY2VvZiBSYXljYXN0UmVzdWx0KSB7XG4gICAgICAvLyBEbyByYXljYXN0Q2xvc2VzdFxuICAgICAgdGhpcy5yYXljYXN0Q2xvc2VzdChmcm9tLCB0bywge1xuICAgICAgICBza2lwQmFja2ZhY2VzOiB0cnVlXG4gICAgICB9LCByZXN1bHQpO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBEbyByYXljYXN0QWxsXG4gICAgICB0aGlzLnJheWNhc3RBbGwoZnJvbSwgdG8sIHtcbiAgICAgICAgc2tpcEJhY2tmYWNlczogdHJ1ZVxuICAgICAgfSwgcmVzdWx0KTtcbiAgICB9XG4gIH1cbiAgLyoqXG4gICAqIFJheSBjYXN0IGFnYWluc3QgYWxsIGJvZGllcy4gVGhlIHByb3ZpZGVkIGNhbGxiYWNrIHdpbGwgYmUgZXhlY3V0ZWQgZm9yIGVhY2ggaGl0IHdpdGggYSBSYXljYXN0UmVzdWx0IGFzIHNpbmdsZSBhcmd1bWVudC5cbiAgICogQHJldHVybiBUcnVlIGlmIGFueSBib2R5IHdhcyBoaXQuXG4gICAqL1xuXG5cbiAgcmF5Y2FzdEFsbChmcm9tLCB0bywgb3B0aW9ucyA9IHt9LCBjYWxsYmFjaykge1xuICAgIG9wdGlvbnMubW9kZSA9IFJheS5BTEw7XG4gICAgb3B0aW9ucy5mcm9tID0gZnJvbTtcbiAgICBvcHRpb25zLnRvID0gdG87XG4gICAgb3B0aW9ucy5jYWxsYmFjayA9IGNhbGxiYWNrO1xuICAgIHJldHVybiB0bXBSYXkuaW50ZXJzZWN0V29ybGQodGhpcywgb3B0aW9ucyk7XG4gIH1cbiAgLyoqXG4gICAqIFJheSBjYXN0LCBhbmQgc3RvcCBhdCB0aGUgZmlyc3QgcmVzdWx0LiBOb3RlIHRoYXQgdGhlIG9yZGVyIGlzIHJhbmRvbSAtIGJ1dCB0aGUgbWV0aG9kIGlzIGZhc3QuXG4gICAqIEByZXR1cm4gVHJ1ZSBpZiBhbnkgYm9keSB3YXMgaGl0LlxuICAgKi9cblxuXG4gIHJheWNhc3RBbnkoZnJvbSwgdG8sIG9wdGlvbnMgPSB7fSwgcmVzdWx0KSB7XG4gICAgb3B0aW9ucy5tb2RlID0gUmF5LkFOWTtcbiAgICBvcHRpb25zLmZyb20gPSBmcm9tO1xuICAgIG9wdGlvbnMudG8gPSB0bztcbiAgICBvcHRpb25zLnJlc3VsdCA9IHJlc3VsdDtcbiAgICByZXR1cm4gdG1wUmF5LmludGVyc2VjdFdvcmxkKHRoaXMsIG9wdGlvbnMpO1xuICB9XG4gIC8qKlxuICAgKiBSYXkgY2FzdCwgYW5kIHJldHVybiBpbmZvcm1hdGlvbiBvZiB0aGUgY2xvc2VzdCBoaXQuXG4gICAqIEByZXR1cm4gVHJ1ZSBpZiBhbnkgYm9keSB3YXMgaGl0LlxuICAgKi9cblxuXG4gIHJheWNhc3RDbG9zZXN0KGZyb20sIHRvLCBvcHRpb25zID0ge30sIHJlc3VsdCkge1xuICAgIG9wdGlvbnMubW9kZSA9IFJheS5DTE9TRVNUO1xuICAgIG9wdGlvbnMuZnJvbSA9IGZyb207XG4gICAgb3B0aW9ucy50byA9IHRvO1xuICAgIG9wdGlvbnMucmVzdWx0ID0gcmVzdWx0O1xuICAgIHJldHVybiB0bXBSYXkuaW50ZXJzZWN0V29ybGQodGhpcywgb3B0aW9ucyk7XG4gIH1cbiAgLyoqXG4gICAqIEFkZCBhIHJpZ2lkIGJvZHkgdG8gdGhlIHNpbXVsYXRpb24uXG4gICAqIEB0b2RvIElmIHRoZSBzaW11bGF0aW9uIGhhcyBub3QgeWV0IHN0YXJ0ZWQsIHdoeSByZWNyZXRlIGFuZCBjb3B5IGFycmF5cyBmb3IgZWFjaCBib2R5PyBBY2N1bXVsYXRlIGluIGR5bmFtaWMgYXJyYXlzIGluIHRoaXMgY2FzZS5cbiAgICogQHRvZG8gQWRkaW5nIGFuIGFycmF5IG9mIGJvZGllcyBzaG91bGQgYmUgcG9zc2libGUuIFRoaXMgd291bGQgc2F2ZSBzb21lIGxvb3BzIHRvb1xuICAgKi9cblxuXG4gIGFkZEJvZHkoYm9keSkge1xuICAgIGlmICh0aGlzLmJvZGllcy5pbmNsdWRlcyhib2R5KSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGJvZHkuaW5kZXggPSB0aGlzLmJvZGllcy5sZW5ndGg7XG4gICAgdGhpcy5ib2RpZXMucHVzaChib2R5KTtcbiAgICBib2R5LndvcmxkID0gdGhpcztcbiAgICBib2R5LmluaXRQb3NpdGlvbi5jb3B5KGJvZHkucG9zaXRpb24pO1xuICAgIGJvZHkuaW5pdFZlbG9jaXR5LmNvcHkoYm9keS52ZWxvY2l0eSk7XG4gICAgYm9keS50aW1lTGFzdFNsZWVweSA9IHRoaXMudGltZTtcblxuICAgIGlmIChib2R5IGluc3RhbmNlb2YgQm9keSkge1xuICAgICAgYm9keS5pbml0QW5ndWxhclZlbG9jaXR5LmNvcHkoYm9keS5hbmd1bGFyVmVsb2NpdHkpO1xuICAgICAgYm9keS5pbml0UXVhdGVybmlvbi5jb3B5KGJvZHkucXVhdGVybmlvbik7XG4gICAgfVxuXG4gICAgdGhpcy5jb2xsaXNpb25NYXRyaXguc2V0TnVtT2JqZWN0cyh0aGlzLmJvZGllcy5sZW5ndGgpO1xuICAgIHRoaXMuYWRkQm9keUV2ZW50LmJvZHkgPSBib2R5O1xuICAgIHRoaXMuaWRUb0JvZHlNYXBbYm9keS5pZF0gPSBib2R5O1xuICAgIHRoaXMuZGlzcGF0Y2hFdmVudCh0aGlzLmFkZEJvZHlFdmVudCk7XG4gIH1cbiAgLyoqXG4gICAqIFJlbW92ZSBhIHJpZ2lkIGJvZHkgZnJvbSB0aGUgc2ltdWxhdGlvbi5cbiAgICovXG5cblxuICByZW1vdmVCb2R5KGJvZHkpIHtcbiAgICBib2R5LndvcmxkID0gbnVsbDtcbiAgICBjb25zdCBuID0gdGhpcy5ib2RpZXMubGVuZ3RoIC0gMTtcbiAgICBjb25zdCBib2RpZXMgPSB0aGlzLmJvZGllcztcbiAgICBjb25zdCBpZHggPSBib2RpZXMuaW5kZXhPZihib2R5KTtcblxuICAgIGlmIChpZHggIT09IC0xKSB7XG4gICAgICBib2RpZXMuc3BsaWNlKGlkeCwgMSk7IC8vIFRvZG86IHNob3VsZCB1c2UgYSBnYXJiYWdlIGZyZWUgbWV0aG9kXG4gICAgICAvLyBSZWNvbXB1dGUgaW5kZXhcblxuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgIT09IGJvZGllcy5sZW5ndGg7IGkrKykge1xuICAgICAgICBib2RpZXNbaV0uaW5kZXggPSBpO1xuICAgICAgfVxuXG4gICAgICB0aGlzLmNvbGxpc2lvbk1hdHJpeC5zZXROdW1PYmplY3RzKG4pO1xuICAgICAgdGhpcy5yZW1vdmVCb2R5RXZlbnQuYm9keSA9IGJvZHk7XG4gICAgICBkZWxldGUgdGhpcy5pZFRvQm9keU1hcFtib2R5LmlkXTtcbiAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudCh0aGlzLnJlbW92ZUJvZHlFdmVudCk7XG4gICAgfVxuICB9XG5cbiAgZ2V0Qm9keUJ5SWQoaWQpIHtcbiAgICByZXR1cm4gdGhpcy5pZFRvQm9keU1hcFtpZF07XG4gIH1cbiAgLyoqXG4gICAqIEB0b2RvIE1ha2UgYSBmYXN0ZXIgbWFwXG4gICAqL1xuXG5cbiAgZ2V0U2hhcGVCeUlkKGlkKSB7XG4gICAgY29uc3QgYm9kaWVzID0gdGhpcy5ib2RpZXM7XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGJvZGllcy5sZW5ndGg7IGkrKykge1xuICAgICAgY29uc3Qgc2hhcGVzID0gYm9kaWVzW2ldLnNoYXBlcztcblxuICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBzaGFwZXMubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgY29uc3Qgc2hhcGUgPSBzaGFwZXNbal07XG5cbiAgICAgICAgaWYgKHNoYXBlLmlkID09PSBpZCkge1xuICAgICAgICAgIHJldHVybiBzaGFwZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBudWxsO1xuICB9XG4gIC8qKlxuICAgKiBBZGRzIGEgbWF0ZXJpYWwgdG8gdGhlIFdvcmxkLlxuICAgKiBAZGVwcmVjYXRlZFxuICAgKiBAdG9kbyBSZW1vdmVcbiAgICovXG5cblxuICBhZGRNYXRlcmlhbChtKSB7XG4gICAgdGhpcy5tYXRlcmlhbHMucHVzaChtKTtcbiAgfVxuICAvKipcbiAgICogQWRkcyBhIGNvbnRhY3QgbWF0ZXJpYWwgdG8gdGhlIFdvcmxkXG4gICAqL1xuXG5cbiAgYWRkQ29udGFjdE1hdGVyaWFsKGNtYXQpIHtcbiAgICAvLyBBZGQgY29udGFjdCBtYXRlcmlhbFxuICAgIHRoaXMuY29udGFjdG1hdGVyaWFscy5wdXNoKGNtYXQpOyAvLyBBZGQgY3VycmVudCBjb250YWN0IG1hdGVyaWFsIHRvIHRoZSBtYXRlcmlhbCB0YWJsZVxuXG4gICAgdGhpcy5jb250YWN0TWF0ZXJpYWxUYWJsZS5zZXQoY21hdC5tYXRlcmlhbHNbMF0uaWQsIGNtYXQubWF0ZXJpYWxzWzFdLmlkLCBjbWF0KTtcbiAgfVxuICAvKipcbiAgICogU3RlcCB0aGUgcGh5c2ljcyB3b3JsZCBmb3J3YXJkIGluIHRpbWUuXG4gICAqXG4gICAqIFRoZXJlIGFyZSB0d28gbW9kZXMuIFRoZSBzaW1wbGUgbW9kZSBpcyBmaXhlZCB0aW1lc3RlcHBpbmcgd2l0aG91dCBpbnRlcnBvbGF0aW9uLiBJbiB0aGlzIGNhc2UgeW91IG9ubHkgdXNlIHRoZSBmaXJzdCBhcmd1bWVudC4gVGhlIHNlY29uZCBjYXNlIHVzZXMgaW50ZXJwb2xhdGlvbi4gSW4gdGhhdCB5b3UgYWxzbyBwcm92aWRlIHRoZSB0aW1lIHNpbmNlIHRoZSBmdW5jdGlvbiB3YXMgbGFzdCB1c2VkLCBhcyB3ZWxsIGFzIHRoZSBtYXhpbXVtIGZpeGVkIHRpbWVzdGVwcyB0byB0YWtlLlxuICAgKlxuICAgKiBAcGFyYW0gZHQgVGhlIGZpeGVkIHRpbWUgc3RlcCBzaXplIHRvIHVzZS5cbiAgICogQHBhcmFtIHRpbWVTaW5jZUxhc3RDYWxsZWQgVGhlIHRpbWUgZWxhcHNlZCBzaW5jZSB0aGUgZnVuY3Rpb24gd2FzIGxhc3QgY2FsbGVkLlxuICAgKiBAcGFyYW0gbWF4U3ViU3RlcHMgTWF4aW11bSBudW1iZXIgb2YgZml4ZWQgc3RlcHMgdG8gdGFrZSBwZXIgZnVuY3Rpb24gY2FsbC5cbiAgICogQHNlZSBodHRwczovL3dlYi5hcmNoaXZlLm9yZy93ZWIvMjAxODA0MjYxNTQ1MzEvaHR0cDovL2J1bGxldHBoeXNpY3Mub3JnL21lZGlhd2lraS0xLjUuOC9pbmRleC5waHAvU3RlcHBpbmdfVGhlX1dvcmxkI1doYXRfZG9fdGhlX3BhcmFtZXRlcnNfdG9fYnREeW5hbWljc1dvcmxkOjpzdGVwU2ltdWxhdGlvbl9tZWFuLjNGXG4gICAqIEBleGFtcGxlXG4gICAqICAgICAvLyBmaXhlZCB0aW1lc3RlcHBpbmcgd2l0aG91dCBpbnRlcnBvbGF0aW9uXG4gICAqICAgICB3b3JsZC5zdGVwKDEgLyA2MClcbiAgICovXG5cblxuICBzdGVwKGR0LCB0aW1lU2luY2VMYXN0Q2FsbGVkLCBtYXhTdWJTdGVwcyA9IDEwKSB7XG4gICAgaWYgKHRpbWVTaW5jZUxhc3RDYWxsZWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgLy8gRml4ZWQsIHNpbXBsZSBzdGVwcGluZ1xuICAgICAgdGhpcy5pbnRlcm5hbFN0ZXAoZHQpOyAvLyBJbmNyZW1lbnQgdGltZVxuXG4gICAgICB0aGlzLnRpbWUgKz0gZHQ7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuYWNjdW11bGF0b3IgKz0gdGltZVNpbmNlTGFzdENhbGxlZDtcbiAgICAgIGNvbnN0IHQwID0gcGVyZm9ybWFuY2Uubm93KCk7XG4gICAgICBsZXQgc3Vic3RlcHMgPSAwO1xuXG4gICAgICB3aGlsZSAodGhpcy5hY2N1bXVsYXRvciA+PSBkdCAmJiBzdWJzdGVwcyA8IG1heFN1YlN0ZXBzKSB7XG4gICAgICAgIC8vIERvIGZpeGVkIHN0ZXBzIHRvIGNhdGNoIHVwXG4gICAgICAgIHRoaXMuaW50ZXJuYWxTdGVwKGR0KTtcbiAgICAgICAgdGhpcy5hY2N1bXVsYXRvciAtPSBkdDtcbiAgICAgICAgc3Vic3RlcHMrKztcblxuICAgICAgICBpZiAocGVyZm9ybWFuY2Uubm93KCkgLSB0MCA+IGR0ICogMTAwMCkge1xuICAgICAgICAgIC8vIFRoZSBmcmFtZXJhdGUgaXMgbm90IGludGVyYWN0aXZlIGFueW1vcmUuXG4gICAgICAgICAgLy8gV2UgYXJlIGJlbG93IHRoZSB0YXJnZXQgZnJhbWVyYXRlLlxuICAgICAgICAgIC8vIEJldHRlciBiYWlsIG91dC5cbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgfSAvLyBSZW1vdmUgdGhlIGV4Y2VzcyBhY2N1bXVsYXRvciwgc2luY2Ugd2UgbWF5IG5vdFxuICAgICAgLy8gaGF2ZSBoYWQgZW5vdWdoIHN1YnN0ZXBzIGF2YWlsYWJsZSB0byBjYXRjaCB1cFxuXG5cbiAgICAgIHRoaXMuYWNjdW11bGF0b3IgPSB0aGlzLmFjY3VtdWxhdG9yICUgZHQ7XG4gICAgICBjb25zdCB0ID0gdGhpcy5hY2N1bXVsYXRvciAvIGR0O1xuXG4gICAgICBmb3IgKGxldCBqID0gMDsgaiAhPT0gdGhpcy5ib2RpZXMubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgY29uc3QgYiA9IHRoaXMuYm9kaWVzW2pdO1xuICAgICAgICBiLnByZXZpb3VzUG9zaXRpb24ubGVycChiLnBvc2l0aW9uLCB0LCBiLmludGVycG9sYXRlZFBvc2l0aW9uKTtcbiAgICAgICAgYi5wcmV2aW91c1F1YXRlcm5pb24uc2xlcnAoYi5xdWF0ZXJuaW9uLCB0LCBiLmludGVycG9sYXRlZFF1YXRlcm5pb24pO1xuICAgICAgICBiLnByZXZpb3VzUXVhdGVybmlvbi5ub3JtYWxpemUoKTtcbiAgICAgIH1cblxuICAgICAgdGhpcy50aW1lICs9IHRpbWVTaW5jZUxhc3RDYWxsZWQ7XG4gICAgfVxuICB9XG5cbiAgaW50ZXJuYWxTdGVwKGR0KSB7XG4gICAgdGhpcy5kdCA9IGR0O1xuICAgIGNvbnN0IGNvbnRhY3RzID0gdGhpcy5jb250YWN0cztcbiAgICBjb25zdCBwMSA9IFdvcmxkX3N0ZXBfcDE7XG4gICAgY29uc3QgcDIgPSBXb3JsZF9zdGVwX3AyO1xuICAgIGNvbnN0IE4gPSB0aGlzLm51bU9iamVjdHMoKTtcbiAgICBjb25zdCBib2RpZXMgPSB0aGlzLmJvZGllcztcbiAgICBjb25zdCBzb2x2ZXIgPSB0aGlzLnNvbHZlcjtcbiAgICBjb25zdCBncmF2aXR5ID0gdGhpcy5ncmF2aXR5O1xuICAgIGNvbnN0IGRvUHJvZmlsaW5nID0gdGhpcy5kb1Byb2ZpbGluZztcbiAgICBjb25zdCBwcm9maWxlID0gdGhpcy5wcm9maWxlO1xuICAgIGNvbnN0IERZTkFNSUMgPSBCb2R5LkRZTkFNSUM7XG4gICAgbGV0IHByb2ZpbGluZ1N0YXJ0ID0gLUluZmluaXR5O1xuICAgIGNvbnN0IGNvbnN0cmFpbnRzID0gdGhpcy5jb25zdHJhaW50cztcbiAgICBjb25zdCBmcmljdGlvbkVxdWF0aW9uUG9vbCA9IFdvcmxkX3N0ZXBfZnJpY3Rpb25FcXVhdGlvblBvb2w7XG4gICAgZ3Jhdml0eS5sZW5ndGgoKTtcbiAgICBjb25zdCBneCA9IGdyYXZpdHkueDtcbiAgICBjb25zdCBneSA9IGdyYXZpdHkueTtcbiAgICBjb25zdCBneiA9IGdyYXZpdHkuejtcbiAgICBsZXQgaSA9IDA7XG5cbiAgICBpZiAoZG9Qcm9maWxpbmcpIHtcbiAgICAgIHByb2ZpbGluZ1N0YXJ0ID0gcGVyZm9ybWFuY2Uubm93KCk7XG4gICAgfSAvLyBBZGQgZ3Jhdml0eSB0byBhbGwgb2JqZWN0c1xuXG5cbiAgICBmb3IgKGkgPSAwOyBpICE9PSBOOyBpKyspIHtcbiAgICAgIGNvbnN0IGJpID0gYm9kaWVzW2ldO1xuXG4gICAgICBpZiAoYmkudHlwZSA9PT0gRFlOQU1JQykge1xuICAgICAgICAvLyBPbmx5IGZvciBkeW5hbWljIGJvZGllc1xuICAgICAgICBjb25zdCBmID0gYmkuZm9yY2U7XG4gICAgICAgIGNvbnN0IG0gPSBiaS5tYXNzO1xuICAgICAgICBmLnggKz0gbSAqIGd4O1xuICAgICAgICBmLnkgKz0gbSAqIGd5O1xuICAgICAgICBmLnogKz0gbSAqIGd6O1xuICAgICAgfVxuICAgIH0gLy8gVXBkYXRlIHN1YnN5c3RlbXNcblxuXG4gICAgZm9yIChsZXQgaSA9IDAsIE5zdWJzeXN0ZW1zID0gdGhpcy5zdWJzeXN0ZW1zLmxlbmd0aDsgaSAhPT0gTnN1YnN5c3RlbXM7IGkrKykge1xuICAgICAgdGhpcy5zdWJzeXN0ZW1zW2ldLnVwZGF0ZSgpO1xuICAgIH0gLy8gQ29sbGlzaW9uIGRldGVjdGlvblxuXG5cbiAgICBpZiAoZG9Qcm9maWxpbmcpIHtcbiAgICAgIHByb2ZpbGluZ1N0YXJ0ID0gcGVyZm9ybWFuY2Uubm93KCk7XG4gICAgfVxuXG4gICAgcDEubGVuZ3RoID0gMDsgLy8gQ2xlYW4gdXAgcGFpciBhcnJheXMgZnJvbSBsYXN0IHN0ZXBcblxuICAgIHAyLmxlbmd0aCA9IDA7XG4gICAgdGhpcy5icm9hZHBoYXNlLmNvbGxpc2lvblBhaXJzKHRoaXMsIHAxLCBwMik7XG5cbiAgICBpZiAoZG9Qcm9maWxpbmcpIHtcbiAgICAgIHByb2ZpbGUuYnJvYWRwaGFzZSA9IHBlcmZvcm1hbmNlLm5vdygpIC0gcHJvZmlsaW5nU3RhcnQ7XG4gICAgfSAvLyBSZW1vdmUgY29uc3RyYWluZWQgcGFpcnMgd2l0aCBjb2xsaWRlQ29ubmVjdGVkID09IGZhbHNlXG5cblxuICAgIGxldCBOY29uc3RyYWludHMgPSBjb25zdHJhaW50cy5sZW5ndGg7XG5cbiAgICBmb3IgKGkgPSAwOyBpICE9PSBOY29uc3RyYWludHM7IGkrKykge1xuICAgICAgY29uc3QgYyA9IGNvbnN0cmFpbnRzW2ldO1xuXG4gICAgICBpZiAoIWMuY29sbGlkZUNvbm5lY3RlZCkge1xuICAgICAgICBmb3IgKGxldCBqID0gcDEubGVuZ3RoIC0gMTsgaiA+PSAwOyBqIC09IDEpIHtcbiAgICAgICAgICBpZiAoYy5ib2R5QSA9PT0gcDFbal0gJiYgYy5ib2R5QiA9PT0gcDJbal0gfHwgYy5ib2R5QiA9PT0gcDFbal0gJiYgYy5ib2R5QSA9PT0gcDJbal0pIHtcbiAgICAgICAgICAgIHAxLnNwbGljZShqLCAxKTtcbiAgICAgICAgICAgIHAyLnNwbGljZShqLCAxKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICB0aGlzLmNvbGxpc2lvbk1hdHJpeFRpY2soKTsgLy8gR2VuZXJhdGUgY29udGFjdHNcblxuICAgIGlmIChkb1Byb2ZpbGluZykge1xuICAgICAgcHJvZmlsaW5nU3RhcnQgPSBwZXJmb3JtYW5jZS5ub3coKTtcbiAgICB9XG5cbiAgICBjb25zdCBvbGRjb250YWN0cyA9IFdvcmxkX3N0ZXBfb2xkQ29udGFjdHM7XG4gICAgY29uc3QgTm9sZENvbnRhY3RzID0gY29udGFjdHMubGVuZ3RoO1xuXG4gICAgZm9yIChpID0gMDsgaSAhPT0gTm9sZENvbnRhY3RzOyBpKyspIHtcbiAgICAgIG9sZGNvbnRhY3RzLnB1c2goY29udGFjdHNbaV0pO1xuICAgIH1cblxuICAgIGNvbnRhY3RzLmxlbmd0aCA9IDA7IC8vIFRyYW5zZmVyIEZyaWN0aW9uRXF1YXRpb24gZnJvbSBjdXJyZW50IGxpc3QgdG8gdGhlIHBvb2wgZm9yIHJldXNlXG5cbiAgICBjb25zdCBOb2xkRnJpY3Rpb25FcXVhdGlvbnMgPSB0aGlzLmZyaWN0aW9uRXF1YXRpb25zLmxlbmd0aDtcblxuICAgIGZvciAoaSA9IDA7IGkgIT09IE5vbGRGcmljdGlvbkVxdWF0aW9uczsgaSsrKSB7XG4gICAgICBmcmljdGlvbkVxdWF0aW9uUG9vbC5wdXNoKHRoaXMuZnJpY3Rpb25FcXVhdGlvbnNbaV0pO1xuICAgIH1cblxuICAgIHRoaXMuZnJpY3Rpb25FcXVhdGlvbnMubGVuZ3RoID0gMDtcbiAgICB0aGlzLm5hcnJvd3BoYXNlLmdldENvbnRhY3RzKHAxLCBwMiwgdGhpcywgY29udGFjdHMsIG9sZGNvbnRhY3RzLCAvLyBUbyBiZSByZXVzZWRcbiAgICB0aGlzLmZyaWN0aW9uRXF1YXRpb25zLCBmcmljdGlvbkVxdWF0aW9uUG9vbCk7XG5cbiAgICBpZiAoZG9Qcm9maWxpbmcpIHtcbiAgICAgIHByb2ZpbGUubmFycm93cGhhc2UgPSBwZXJmb3JtYW5jZS5ub3coKSAtIHByb2ZpbGluZ1N0YXJ0O1xuICAgIH0gLy8gTG9vcCBvdmVyIGFsbCBjb2xsaXNpb25zXG5cblxuICAgIGlmIChkb1Byb2ZpbGluZykge1xuICAgICAgcHJvZmlsaW5nU3RhcnQgPSBwZXJmb3JtYW5jZS5ub3coKTtcbiAgICB9IC8vIEFkZCBhbGwgZnJpY3Rpb24gZXFzXG5cblxuICAgIGZvciAoaSA9IDA7IGkgPCB0aGlzLmZyaWN0aW9uRXF1YXRpb25zLmxlbmd0aDsgaSsrKSB7XG4gICAgICBzb2x2ZXIuYWRkRXF1YXRpb24odGhpcy5mcmljdGlvbkVxdWF0aW9uc1tpXSk7XG4gICAgfVxuXG4gICAgY29uc3QgbmNvbnRhY3RzID0gY29udGFjdHMubGVuZ3RoO1xuXG4gICAgZm9yIChsZXQgayA9IDA7IGsgIT09IG5jb250YWN0czsgaysrKSB7XG4gICAgICAvLyBDdXJyZW50IGNvbnRhY3RcbiAgICAgIGNvbnN0IGMgPSBjb250YWN0c1trXTsgLy8gR2V0IGN1cnJlbnQgY29sbGlzaW9uIGluZGVjZXNcblxuICAgICAgY29uc3QgYmkgPSBjLmJpO1xuICAgICAgY29uc3QgYmogPSBjLmJqO1xuICAgICAgY29uc3Qgc2kgPSBjLnNpO1xuICAgICAgY29uc3Qgc2ogPSBjLnNqOyAvLyBHZXQgY29sbGlzaW9uIHByb3BlcnRpZXNcblxuICAgICAgbGV0IGNtO1xuXG4gICAgICBpZiAoYmkubWF0ZXJpYWwgJiYgYmoubWF0ZXJpYWwpIHtcbiAgICAgICAgY20gPSB0aGlzLmdldENvbnRhY3RNYXRlcmlhbChiaS5tYXRlcmlhbCwgYmoubWF0ZXJpYWwpIHx8IHRoaXMuZGVmYXVsdENvbnRhY3RNYXRlcmlhbDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNtID0gdGhpcy5kZWZhdWx0Q29udGFjdE1hdGVyaWFsO1xuICAgICAgfSAvLyBjLmVuYWJsZWQgPSBiaS5jb2xsaXNpb25SZXNwb25zZSAmJiBiai5jb2xsaXNpb25SZXNwb25zZSAmJiBzaS5jb2xsaXNpb25SZXNwb25zZSAmJiBzai5jb2xsaXNpb25SZXNwb25zZTtcblxuXG4gICAgICBjbS5mcmljdGlvbjsgLy8gYy5yZXN0aXR1dGlvbiA9IGNtLnJlc3RpdHV0aW9uO1xuICAgICAgLy8gSWYgZnJpY3Rpb24gb3IgcmVzdGl0dXRpb24gd2VyZSBzcGVjaWZpZWQgaW4gdGhlIG1hdGVyaWFsLCB1c2UgdGhlbVxuXG4gICAgICBpZiAoYmkubWF0ZXJpYWwgJiYgYmoubWF0ZXJpYWwpIHtcbiAgICAgICAgaWYgKGJpLm1hdGVyaWFsLmZyaWN0aW9uID49IDAgJiYgYmoubWF0ZXJpYWwuZnJpY3Rpb24gPj0gMCkge1xuICAgICAgICAgIGJpLm1hdGVyaWFsLmZyaWN0aW9uICogYmoubWF0ZXJpYWwuZnJpY3Rpb247XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoYmkubWF0ZXJpYWwucmVzdGl0dXRpb24gPj0gMCAmJiBiai5tYXRlcmlhbC5yZXN0aXR1dGlvbiA+PSAwKSB7XG4gICAgICAgICAgYy5yZXN0aXR1dGlvbiA9IGJpLm1hdGVyaWFsLnJlc3RpdHV0aW9uICogYmoubWF0ZXJpYWwucmVzdGl0dXRpb247XG4gICAgICAgIH1cbiAgICAgIH0gLy8gYy5zZXRTcG9va1BhcmFtcyhcbiAgICAgIC8vICAgICAgICAgICBjbS5jb250YWN0RXF1YXRpb25TdGlmZm5lc3MsXG4gICAgICAvLyAgICAgICAgICAgY20uY29udGFjdEVxdWF0aW9uUmVsYXhhdGlvbixcbiAgICAgIC8vICAgICAgICAgICBkdFxuICAgICAgLy8gICAgICAgKTtcblxuXG4gICAgICBzb2x2ZXIuYWRkRXF1YXRpb24oYyk7IC8vIC8vIEFkZCBmcmljdGlvbiBjb25zdHJhaW50IGVxdWF0aW9uXG4gICAgICAvLyBpZihtdSA+IDApe1xuICAgICAgLy8gXHQvLyBDcmVhdGUgMiB0YW5nZW50IGVxdWF0aW9uc1xuICAgICAgLy8gXHRjb25zdCBtdWcgPSBtdSAqIGdub3JtO1xuICAgICAgLy8gXHRjb25zdCByZWR1Y2VkTWFzcyA9IChiaS5pbnZNYXNzICsgYmouaW52TWFzcyk7XG4gICAgICAvLyBcdGlmKHJlZHVjZWRNYXNzID4gMCl7XG4gICAgICAvLyBcdFx0cmVkdWNlZE1hc3MgPSAxL3JlZHVjZWRNYXNzO1xuICAgICAgLy8gXHR9XG4gICAgICAvLyBcdGNvbnN0IHBvb2wgPSBmcmljdGlvbkVxdWF0aW9uUG9vbDtcbiAgICAgIC8vIFx0Y29uc3QgYzEgPSBwb29sLmxlbmd0aCA/IHBvb2wucG9wKCkgOiBuZXcgRnJpY3Rpb25FcXVhdGlvbihiaSxiaixtdWcqcmVkdWNlZE1hc3MpO1xuICAgICAgLy8gXHRjb25zdCBjMiA9IHBvb2wubGVuZ3RoID8gcG9vbC5wb3AoKSA6IG5ldyBGcmljdGlvbkVxdWF0aW9uKGJpLGJqLG11ZypyZWR1Y2VkTWFzcyk7XG4gICAgICAvLyBcdHRoaXMuZnJpY3Rpb25FcXVhdGlvbnMucHVzaChjMSwgYzIpO1xuICAgICAgLy8gXHRjMS5iaSA9IGMyLmJpID0gYmk7XG4gICAgICAvLyBcdGMxLmJqID0gYzIuYmogPSBiajtcbiAgICAgIC8vIFx0YzEubWluRm9yY2UgPSBjMi5taW5Gb3JjZSA9IC1tdWcqcmVkdWNlZE1hc3M7XG4gICAgICAvLyBcdGMxLm1heEZvcmNlID0gYzIubWF4Rm9yY2UgPSBtdWcqcmVkdWNlZE1hc3M7XG4gICAgICAvLyBcdC8vIENvcHkgb3ZlciB0aGUgcmVsYXRpdmUgdmVjdG9yc1xuICAgICAgLy8gXHRjMS5yaS5jb3B5KGMucmkpO1xuICAgICAgLy8gXHRjMS5yai5jb3B5KGMucmopO1xuICAgICAgLy8gXHRjMi5yaS5jb3B5KGMucmkpO1xuICAgICAgLy8gXHRjMi5yai5jb3B5KGMucmopO1xuICAgICAgLy8gXHQvLyBDb25zdHJ1Y3QgdGFuZ2VudHNcbiAgICAgIC8vIFx0Yy5uaS50YW5nZW50cyhjMS50LCBjMi50KTtcbiAgICAgIC8vICAgICAgICAgICAvLyBTZXQgc3Bvb2sgcGFyYW1zXG4gICAgICAvLyAgICAgICAgICAgYzEuc2V0U3Bvb2tQYXJhbXMoY20uZnJpY3Rpb25FcXVhdGlvblN0aWZmbmVzcywgY20uZnJpY3Rpb25FcXVhdGlvblJlbGF4YXRpb24sIGR0KTtcbiAgICAgIC8vICAgICAgICAgICBjMi5zZXRTcG9va1BhcmFtcyhjbS5mcmljdGlvbkVxdWF0aW9uU3RpZmZuZXNzLCBjbS5mcmljdGlvbkVxdWF0aW9uUmVsYXhhdGlvbiwgZHQpO1xuICAgICAgLy8gICAgICAgICAgIGMxLmVuYWJsZWQgPSBjMi5lbmFibGVkID0gYy5lbmFibGVkO1xuICAgICAgLy8gXHQvLyBBZGQgZXF1YXRpb25zIHRvIHNvbHZlclxuICAgICAgLy8gXHRzb2x2ZXIuYWRkRXF1YXRpb24oYzEpO1xuICAgICAgLy8gXHRzb2x2ZXIuYWRkRXF1YXRpb24oYzIpO1xuICAgICAgLy8gfVxuXG4gICAgICBpZiAoYmkuYWxsb3dTbGVlcCAmJiBiaS50eXBlID09PSBCb2R5LkRZTkFNSUMgJiYgYmkuc2xlZXBTdGF0ZSA9PT0gQm9keS5TTEVFUElORyAmJiBiai5zbGVlcFN0YXRlID09PSBCb2R5LkFXQUtFICYmIGJqLnR5cGUgIT09IEJvZHkuU1RBVElDKSB7XG4gICAgICAgIGNvbnN0IHNwZWVkU3F1YXJlZEIgPSBiai52ZWxvY2l0eS5sZW5ndGhTcXVhcmVkKCkgKyBiai5hbmd1bGFyVmVsb2NpdHkubGVuZ3RoU3F1YXJlZCgpO1xuICAgICAgICBjb25zdCBzcGVlZExpbWl0U3F1YXJlZEIgPSBiai5zbGVlcFNwZWVkTGltaXQgKiogMjtcblxuICAgICAgICBpZiAoc3BlZWRTcXVhcmVkQiA+PSBzcGVlZExpbWl0U3F1YXJlZEIgKiAyKSB7XG4gICAgICAgICAgYmkud2FrZVVwQWZ0ZXJOYXJyb3dwaGFzZSA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKGJqLmFsbG93U2xlZXAgJiYgYmoudHlwZSA9PT0gQm9keS5EWU5BTUlDICYmIGJqLnNsZWVwU3RhdGUgPT09IEJvZHkuU0xFRVBJTkcgJiYgYmkuc2xlZXBTdGF0ZSA9PT0gQm9keS5BV0FLRSAmJiBiaS50eXBlICE9PSBCb2R5LlNUQVRJQykge1xuICAgICAgICBjb25zdCBzcGVlZFNxdWFyZWRBID0gYmkudmVsb2NpdHkubGVuZ3RoU3F1YXJlZCgpICsgYmkuYW5ndWxhclZlbG9jaXR5Lmxlbmd0aFNxdWFyZWQoKTtcbiAgICAgICAgY29uc3Qgc3BlZWRMaW1pdFNxdWFyZWRBID0gYmkuc2xlZXBTcGVlZExpbWl0ICoqIDI7XG5cbiAgICAgICAgaWYgKHNwZWVkU3F1YXJlZEEgPj0gc3BlZWRMaW1pdFNxdWFyZWRBICogMikge1xuICAgICAgICAgIGJqLndha2VVcEFmdGVyTmFycm93cGhhc2UgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICB9IC8vIE5vdyB3ZSBrbm93IHRoYXQgaSBhbmQgaiBhcmUgaW4gY29udGFjdC4gU2V0IGNvbGxpc2lvbiBtYXRyaXggc3RhdGVcblxuXG4gICAgICB0aGlzLmNvbGxpc2lvbk1hdHJpeC5zZXQoYmksIGJqLCB0cnVlKTtcblxuICAgICAgaWYgKCF0aGlzLmNvbGxpc2lvbk1hdHJpeFByZXZpb3VzLmdldChiaSwgYmopKSB7XG4gICAgICAgIC8vIEZpcnN0IGNvbnRhY3QhXG4gICAgICAgIC8vIFdlIHJldXNlIHRoZSBjb2xsaWRlRXZlbnQgb2JqZWN0LCBvdGhlcndpc2Ugd2Ugd2lsbCBlbmQgdXAgY3JlYXRpbmcgbmV3IG9iamVjdHMgZm9yIGVhY2ggbmV3IGNvbnRhY3QsIGV2ZW4gaWYgdGhlcmUncyBubyBldmVudCBsaXN0ZW5lciBhdHRhY2hlZC5cbiAgICAgICAgV29ybGRfc3RlcF9jb2xsaWRlRXZlbnQuYm9keSA9IGJqO1xuICAgICAgICBXb3JsZF9zdGVwX2NvbGxpZGVFdmVudC5jb250YWN0ID0gYztcbiAgICAgICAgYmkuZGlzcGF0Y2hFdmVudChXb3JsZF9zdGVwX2NvbGxpZGVFdmVudCk7XG4gICAgICAgIFdvcmxkX3N0ZXBfY29sbGlkZUV2ZW50LmJvZHkgPSBiaTtcbiAgICAgICAgYmouZGlzcGF0Y2hFdmVudChXb3JsZF9zdGVwX2NvbGxpZGVFdmVudCk7XG4gICAgICB9XG5cbiAgICAgIHRoaXMuYm9keU92ZXJsYXBLZWVwZXIuc2V0KGJpLmlkLCBiai5pZCk7XG4gICAgICB0aGlzLnNoYXBlT3ZlcmxhcEtlZXBlci5zZXQoc2kuaWQsIHNqLmlkKTtcbiAgICB9XG5cbiAgICB0aGlzLmVtaXRDb250YWN0RXZlbnRzKCk7XG5cbiAgICBpZiAoZG9Qcm9maWxpbmcpIHtcbiAgICAgIHByb2ZpbGUubWFrZUNvbnRhY3RDb25zdHJhaW50cyA9IHBlcmZvcm1hbmNlLm5vdygpIC0gcHJvZmlsaW5nU3RhcnQ7XG4gICAgICBwcm9maWxpbmdTdGFydCA9IHBlcmZvcm1hbmNlLm5vdygpO1xuICAgIH0gLy8gV2FrZSB1cCBib2RpZXNcblxuXG4gICAgZm9yIChpID0gMDsgaSAhPT0gTjsgaSsrKSB7XG4gICAgICBjb25zdCBiaSA9IGJvZGllc1tpXTtcblxuICAgICAgaWYgKGJpLndha2VVcEFmdGVyTmFycm93cGhhc2UpIHtcbiAgICAgICAgYmkud2FrZVVwKCk7XG4gICAgICAgIGJpLndha2VVcEFmdGVyTmFycm93cGhhc2UgPSBmYWxzZTtcbiAgICAgIH1cbiAgICB9IC8vIEFkZCB1c2VyLWFkZGVkIGNvbnN0cmFpbnRzXG5cblxuICAgIE5jb25zdHJhaW50cyA9IGNvbnN0cmFpbnRzLmxlbmd0aDtcblxuICAgIGZvciAoaSA9IDA7IGkgIT09IE5jb25zdHJhaW50czsgaSsrKSB7XG4gICAgICBjb25zdCBjID0gY29uc3RyYWludHNbaV07XG4gICAgICBjLnVwZGF0ZSgpO1xuXG4gICAgICBmb3IgKGxldCBqID0gMCwgTmVxID0gYy5lcXVhdGlvbnMubGVuZ3RoOyBqICE9PSBOZXE7IGorKykge1xuICAgICAgICBjb25zdCBlcSA9IGMuZXF1YXRpb25zW2pdO1xuICAgICAgICBzb2x2ZXIuYWRkRXF1YXRpb24oZXEpO1xuICAgICAgfVxuICAgIH0gLy8gU29sdmUgdGhlIGNvbnN0cmFpbmVkIHN5c3RlbVxuXG5cbiAgICBzb2x2ZXIuc29sdmUoZHQsIHRoaXMpO1xuXG4gICAgaWYgKGRvUHJvZmlsaW5nKSB7XG4gICAgICBwcm9maWxlLnNvbHZlID0gcGVyZm9ybWFuY2Uubm93KCkgLSBwcm9maWxpbmdTdGFydDtcbiAgICB9IC8vIFJlbW92ZSBhbGwgY29udGFjdHMgZnJvbSBzb2x2ZXJcblxuXG4gICAgc29sdmVyLnJlbW92ZUFsbEVxdWF0aW9ucygpOyAvLyBBcHBseSBkYW1waW5nLCBzZWUgaHR0cDovL2NvZGUuZ29vZ2xlLmNvbS9wL2J1bGxldC9pc3N1ZXMvZGV0YWlsP2lkPTc0IGZvciBkZXRhaWxzXG5cbiAgICBjb25zdCBwb3cgPSBNYXRoLnBvdztcblxuICAgIGZvciAoaSA9IDA7IGkgIT09IE47IGkrKykge1xuICAgICAgY29uc3QgYmkgPSBib2RpZXNbaV07XG5cbiAgICAgIGlmIChiaS50eXBlICYgRFlOQU1JQykge1xuICAgICAgICAvLyBPbmx5IGZvciBkeW5hbWljIGJvZGllc1xuICAgICAgICBjb25zdCBsZCA9IHBvdygxLjAgLSBiaS5saW5lYXJEYW1waW5nLCBkdCk7XG4gICAgICAgIGNvbnN0IHYgPSBiaS52ZWxvY2l0eTtcbiAgICAgICAgdi5zY2FsZShsZCwgdik7XG4gICAgICAgIGNvbnN0IGF2ID0gYmkuYW5ndWxhclZlbG9jaXR5O1xuXG4gICAgICAgIGlmIChhdikge1xuICAgICAgICAgIGNvbnN0IGFkID0gcG93KDEuMCAtIGJpLmFuZ3VsYXJEYW1waW5nLCBkdCk7XG4gICAgICAgICAgYXYuc2NhbGUoYWQsIGF2KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIHRoaXMuZGlzcGF0Y2hFdmVudChXb3JsZF9zdGVwX3ByZVN0ZXBFdmVudCk7IC8vIEludm9rZSBwcmUtc3RlcCBjYWxsYmFja3NcblxuICAgIGZvciAoaSA9IDA7IGkgIT09IE47IGkrKykge1xuICAgICAgY29uc3QgYmkgPSBib2RpZXNbaV07XG5cbiAgICAgIGlmIChiaS5wcmVTdGVwKSB7XG4gICAgICAgIGJpLnByZVN0ZXAuY2FsbChiaSk7XG4gICAgICB9XG4gICAgfSAvLyBMZWFwIGZyb2dcbiAgICAvLyB2bmV3ID0gdiArIGgqZi9tXG4gICAgLy8geG5ldyA9IHggKyBoKnZuZXdcblxuXG4gICAgaWYgKGRvUHJvZmlsaW5nKSB7XG4gICAgICBwcm9maWxpbmdTdGFydCA9IHBlcmZvcm1hbmNlLm5vdygpO1xuICAgIH1cblxuICAgIGNvbnN0IHN0ZXBudW1iZXIgPSB0aGlzLnN0ZXBudW1iZXI7XG4gICAgY29uc3QgcXVhdE5vcm1hbGl6ZSA9IHN0ZXBudW1iZXIgJSAodGhpcy5xdWF0Tm9ybWFsaXplU2tpcCArIDEpID09PSAwO1xuICAgIGNvbnN0IHF1YXROb3JtYWxpemVGYXN0ID0gdGhpcy5xdWF0Tm9ybWFsaXplRmFzdDtcblxuICAgIGZvciAoaSA9IDA7IGkgIT09IE47IGkrKykge1xuICAgICAgYm9kaWVzW2ldLmludGVncmF0ZShkdCwgcXVhdE5vcm1hbGl6ZSwgcXVhdE5vcm1hbGl6ZUZhc3QpO1xuICAgIH1cblxuICAgIHRoaXMuY2xlYXJGb3JjZXMoKTtcbiAgICB0aGlzLmJyb2FkcGhhc2UuZGlydHkgPSB0cnVlO1xuXG4gICAgaWYgKGRvUHJvZmlsaW5nKSB7XG4gICAgICBwcm9maWxlLmludGVncmF0ZSA9IHBlcmZvcm1hbmNlLm5vdygpIC0gcHJvZmlsaW5nU3RhcnQ7XG4gICAgfSAvLyBVcGRhdGUgc3RlcCBudW1iZXJcblxuXG4gICAgdGhpcy5zdGVwbnVtYmVyICs9IDE7XG4gICAgdGhpcy5kaXNwYXRjaEV2ZW50KFdvcmxkX3N0ZXBfcG9zdFN0ZXBFdmVudCk7IC8vIEludm9rZSBwb3N0LXN0ZXAgY2FsbGJhY2tzXG5cbiAgICBmb3IgKGkgPSAwOyBpICE9PSBOOyBpKyspIHtcbiAgICAgIGNvbnN0IGJpID0gYm9kaWVzW2ldO1xuICAgICAgY29uc3QgcG9zdFN0ZXAgPSBiaS5wb3N0U3RlcDtcblxuICAgICAgaWYgKHBvc3RTdGVwKSB7XG4gICAgICAgIHBvc3RTdGVwLmNhbGwoYmkpO1xuICAgICAgfVxuICAgIH0gLy8gU2xlZXBpbmcgdXBkYXRlXG5cblxuICAgIGxldCBoYXNBY3RpdmVCb2RpZXMgPSB0cnVlO1xuXG4gICAgaWYgKHRoaXMuYWxsb3dTbGVlcCkge1xuICAgICAgaGFzQWN0aXZlQm9kaWVzID0gZmFsc2U7XG5cbiAgICAgIGZvciAoaSA9IDA7IGkgIT09IE47IGkrKykge1xuICAgICAgICBjb25zdCBiaSA9IGJvZGllc1tpXTtcbiAgICAgICAgYmkuc2xlZXBUaWNrKHRoaXMudGltZSk7XG5cbiAgICAgICAgaWYgKGJpLnNsZWVwU3RhdGUgIT09IEJvZHkuU0xFRVBJTkcpIHtcbiAgICAgICAgICBoYXNBY3RpdmVCb2RpZXMgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgdGhpcy5oYXNBY3RpdmVCb2RpZXMgPSBoYXNBY3RpdmVCb2RpZXM7XG4gIH1cblxuICBlbWl0Q29udGFjdEV2ZW50cygpIHtcbiAgICBjb25zdCBoYXNCZWdpbkNvbnRhY3QgPSB0aGlzLmhhc0FueUV2ZW50TGlzdGVuZXIoJ2JlZ2luQ29udGFjdCcpO1xuICAgIGNvbnN0IGhhc0VuZENvbnRhY3QgPSB0aGlzLmhhc0FueUV2ZW50TGlzdGVuZXIoJ2VuZENvbnRhY3QnKTtcblxuICAgIGlmIChoYXNCZWdpbkNvbnRhY3QgfHwgaGFzRW5kQ29udGFjdCkge1xuICAgICAgdGhpcy5ib2R5T3ZlcmxhcEtlZXBlci5nZXREaWZmKGFkZGl0aW9ucywgcmVtb3ZhbHMpO1xuICAgIH1cblxuICAgIGlmIChoYXNCZWdpbkNvbnRhY3QpIHtcbiAgICAgIGZvciAobGV0IGkgPSAwLCBsID0gYWRkaXRpb25zLmxlbmd0aDsgaSA8IGw7IGkgKz0gMikge1xuICAgICAgICBiZWdpbkNvbnRhY3RFdmVudC5ib2R5QSA9IHRoaXMuZ2V0Qm9keUJ5SWQoYWRkaXRpb25zW2ldKTtcbiAgICAgICAgYmVnaW5Db250YWN0RXZlbnQuYm9keUIgPSB0aGlzLmdldEJvZHlCeUlkKGFkZGl0aW9uc1tpICsgMV0pO1xuICAgICAgICB0aGlzLmRpc3BhdGNoRXZlbnQoYmVnaW5Db250YWN0RXZlbnQpO1xuICAgICAgfVxuXG4gICAgICBiZWdpbkNvbnRhY3RFdmVudC5ib2R5QSA9IGJlZ2luQ29udGFjdEV2ZW50LmJvZHlCID0gbnVsbDtcbiAgICB9XG5cbiAgICBpZiAoaGFzRW5kQ29udGFjdCkge1xuICAgICAgZm9yIChsZXQgaSA9IDAsIGwgPSByZW1vdmFscy5sZW5ndGg7IGkgPCBsOyBpICs9IDIpIHtcbiAgICAgICAgZW5kQ29udGFjdEV2ZW50LmJvZHlBID0gdGhpcy5nZXRCb2R5QnlJZChyZW1vdmFsc1tpXSk7XG4gICAgICAgIGVuZENvbnRhY3RFdmVudC5ib2R5QiA9IHRoaXMuZ2V0Qm9keUJ5SWQocmVtb3ZhbHNbaSArIDFdKTtcbiAgICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KGVuZENvbnRhY3RFdmVudCk7XG4gICAgICB9XG5cbiAgICAgIGVuZENvbnRhY3RFdmVudC5ib2R5QSA9IGVuZENvbnRhY3RFdmVudC5ib2R5QiA9IG51bGw7XG4gICAgfVxuXG4gICAgYWRkaXRpb25zLmxlbmd0aCA9IHJlbW92YWxzLmxlbmd0aCA9IDA7XG4gICAgY29uc3QgaGFzQmVnaW5TaGFwZUNvbnRhY3QgPSB0aGlzLmhhc0FueUV2ZW50TGlzdGVuZXIoJ2JlZ2luU2hhcGVDb250YWN0Jyk7XG4gICAgY29uc3QgaGFzRW5kU2hhcGVDb250YWN0ID0gdGhpcy5oYXNBbnlFdmVudExpc3RlbmVyKCdlbmRTaGFwZUNvbnRhY3QnKTtcblxuICAgIGlmIChoYXNCZWdpblNoYXBlQ29udGFjdCB8fCBoYXNFbmRTaGFwZUNvbnRhY3QpIHtcbiAgICAgIHRoaXMuc2hhcGVPdmVybGFwS2VlcGVyLmdldERpZmYoYWRkaXRpb25zLCByZW1vdmFscyk7XG4gICAgfVxuXG4gICAgaWYgKGhhc0JlZ2luU2hhcGVDb250YWN0KSB7XG4gICAgICBmb3IgKGxldCBpID0gMCwgbCA9IGFkZGl0aW9ucy5sZW5ndGg7IGkgPCBsOyBpICs9IDIpIHtcbiAgICAgICAgY29uc3Qgc2hhcGVBID0gdGhpcy5nZXRTaGFwZUJ5SWQoYWRkaXRpb25zW2ldKTtcbiAgICAgICAgY29uc3Qgc2hhcGVCID0gdGhpcy5nZXRTaGFwZUJ5SWQoYWRkaXRpb25zW2kgKyAxXSk7XG4gICAgICAgIGJlZ2luU2hhcGVDb250YWN0RXZlbnQuc2hhcGVBID0gc2hhcGVBO1xuICAgICAgICBiZWdpblNoYXBlQ29udGFjdEV2ZW50LnNoYXBlQiA9IHNoYXBlQjtcbiAgICAgICAgaWYgKHNoYXBlQSkgYmVnaW5TaGFwZUNvbnRhY3RFdmVudC5ib2R5QSA9IHNoYXBlQS5ib2R5O1xuICAgICAgICBpZiAoc2hhcGVCKSBiZWdpblNoYXBlQ29udGFjdEV2ZW50LmJvZHlCID0gc2hhcGVCLmJvZHk7XG4gICAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChiZWdpblNoYXBlQ29udGFjdEV2ZW50KTtcbiAgICAgIH1cblxuICAgICAgYmVnaW5TaGFwZUNvbnRhY3RFdmVudC5ib2R5QSA9IGJlZ2luU2hhcGVDb250YWN0RXZlbnQuYm9keUIgPSBiZWdpblNoYXBlQ29udGFjdEV2ZW50LnNoYXBlQSA9IGJlZ2luU2hhcGVDb250YWN0RXZlbnQuc2hhcGVCID0gbnVsbDtcbiAgICB9XG5cbiAgICBpZiAoaGFzRW5kU2hhcGVDb250YWN0KSB7XG4gICAgICBmb3IgKGxldCBpID0gMCwgbCA9IHJlbW92YWxzLmxlbmd0aDsgaSA8IGw7IGkgKz0gMikge1xuICAgICAgICBjb25zdCBzaGFwZUEgPSB0aGlzLmdldFNoYXBlQnlJZChyZW1vdmFsc1tpXSk7XG4gICAgICAgIGNvbnN0IHNoYXBlQiA9IHRoaXMuZ2V0U2hhcGVCeUlkKHJlbW92YWxzW2kgKyAxXSk7XG4gICAgICAgIGVuZFNoYXBlQ29udGFjdEV2ZW50LnNoYXBlQSA9IHNoYXBlQTtcbiAgICAgICAgZW5kU2hhcGVDb250YWN0RXZlbnQuc2hhcGVCID0gc2hhcGVCO1xuICAgICAgICBpZiAoc2hhcGVBKSBlbmRTaGFwZUNvbnRhY3RFdmVudC5ib2R5QSA9IHNoYXBlQS5ib2R5O1xuICAgICAgICBpZiAoc2hhcGVCKSBlbmRTaGFwZUNvbnRhY3RFdmVudC5ib2R5QiA9IHNoYXBlQi5ib2R5O1xuICAgICAgICB0aGlzLmRpc3BhdGNoRXZlbnQoZW5kU2hhcGVDb250YWN0RXZlbnQpO1xuICAgICAgfVxuXG4gICAgICBlbmRTaGFwZUNvbnRhY3RFdmVudC5ib2R5QSA9IGVuZFNoYXBlQ29udGFjdEV2ZW50LmJvZHlCID0gZW5kU2hhcGVDb250YWN0RXZlbnQuc2hhcGVBID0gZW5kU2hhcGVDb250YWN0RXZlbnQuc2hhcGVCID0gbnVsbDtcbiAgICB9XG4gIH1cbiAgLyoqXG4gICAqIFNldHMgYWxsIGJvZHkgZm9yY2VzIGluIHRoZSB3b3JsZCB0byB6ZXJvLlxuICAgKi9cblxuXG4gIGNsZWFyRm9yY2VzKCkge1xuICAgIGNvbnN0IGJvZGllcyA9IHRoaXMuYm9kaWVzO1xuICAgIGNvbnN0IE4gPSBib2RpZXMubGVuZ3RoO1xuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgIT09IE47IGkrKykge1xuICAgICAgY29uc3QgYiA9IGJvZGllc1tpXTtcbiAgICAgIGIuZm9yY2U7XG4gICAgICBiLnRvcnF1ZTtcbiAgICAgIGIuZm9yY2Uuc2V0KDAsIDAsIDApO1xuICAgICAgYi50b3JxdWUuc2V0KDAsIDAsIDApO1xuICAgIH1cbiAgfVxuXG59IC8vIFRlbXAgc3R1ZmZcblxubmV3IEFBQkIoKTtcbmNvbnN0IHRtcFJheSA9IG5ldyBSYXkoKTsgLy8gcGVyZm9ybWFuY2Uubm93KCkgZmFsbGJhY2sgb24gRGF0ZS5ub3coKVxuXG5jb25zdCBwZXJmb3JtYW5jZSA9IGdsb2JhbFRoaXMucGVyZm9ybWFuY2UgfHwge307XG5cbmlmICghcGVyZm9ybWFuY2Uubm93KSB7XG4gIGxldCBub3dPZmZzZXQgPSBEYXRlLm5vdygpO1xuXG4gIGlmIChwZXJmb3JtYW5jZS50aW1pbmcgJiYgcGVyZm9ybWFuY2UudGltaW5nLm5hdmlnYXRpb25TdGFydCkge1xuICAgIG5vd09mZnNldCA9IHBlcmZvcm1hbmNlLnRpbWluZy5uYXZpZ2F0aW9uU3RhcnQ7XG4gIH1cblxuICBwZXJmb3JtYW5jZS5ub3cgPSAoKSA9PiBEYXRlLm5vdygpIC0gbm93T2Zmc2V0O1xufVxuLy8gUmV1c2FibGUgZXZlbnQgb2JqZWN0cyB0byBzYXZlIG1lbW9yeS5cblxuY29uc3QgV29ybGRfc3RlcF9wb3N0U3RlcEV2ZW50ID0ge1xuICB0eXBlOiAncG9zdFN0ZXAnXG59OyAvLyBEaXNwYXRjaGVkIGJlZm9yZSB0aGUgd29ybGQgc3RlcHMgZm9yd2FyZCBpbiB0aW1lLlxuXG5jb25zdCBXb3JsZF9zdGVwX3ByZVN0ZXBFdmVudCA9IHtcbiAgdHlwZTogJ3ByZVN0ZXAnXG59O1xuY29uc3QgV29ybGRfc3RlcF9jb2xsaWRlRXZlbnQgPSB7XG4gIHR5cGU6IEJvZHkuQ09MTElERV9FVkVOVF9OQU1FLFxuICBib2R5OiBudWxsLFxuICBjb250YWN0OiBudWxsXG59OyAvLyBQb29scyBmb3IgdW51c2VkIG9iamVjdHNcblxuY29uc3QgV29ybGRfc3RlcF9vbGRDb250YWN0cyA9IFtdO1xuY29uc3QgV29ybGRfc3RlcF9mcmljdGlvbkVxdWF0aW9uUG9vbCA9IFtdOyAvLyBSZXVzYWJsZSBhcnJheXMgZm9yIGNvbGxpc2lvbiBwYWlyc1xuXG5jb25zdCBXb3JsZF9zdGVwX3AxID0gW107XG5jb25zdCBXb3JsZF9zdGVwX3AyID0gW107IC8vIFN0dWZmIGZvciBlbWl0Q29udGFjdEV2ZW50c1xuXG5jb25zdCBhZGRpdGlvbnMgPSBbXTtcbmNvbnN0IHJlbW92YWxzID0gW107XG5jb25zdCBiZWdpbkNvbnRhY3RFdmVudCA9IHtcbiAgdHlwZTogJ2JlZ2luQ29udGFjdCcsXG4gIGJvZHlBOiBudWxsLFxuICBib2R5QjogbnVsbFxufTtcbmNvbnN0IGVuZENvbnRhY3RFdmVudCA9IHtcbiAgdHlwZTogJ2VuZENvbnRhY3QnLFxuICBib2R5QTogbnVsbCxcbiAgYm9keUI6IG51bGxcbn07XG5jb25zdCBiZWdpblNoYXBlQ29udGFjdEV2ZW50ID0ge1xuICB0eXBlOiAnYmVnaW5TaGFwZUNvbnRhY3QnLFxuICBib2R5QTogbnVsbCxcbiAgYm9keUI6IG51bGwsXG4gIHNoYXBlQTogbnVsbCxcbiAgc2hhcGVCOiBudWxsXG59O1xuY29uc3QgZW5kU2hhcGVDb250YWN0RXZlbnQgPSB7XG4gIHR5cGU6ICdlbmRTaGFwZUNvbnRhY3QnLFxuICBib2R5QTogbnVsbCxcbiAgYm9keUI6IG51bGwsXG4gIHNoYXBlQTogbnVsbCxcbiAgc2hhcGVCOiBudWxsXG59O1xuXG5leHBvcnQgeyBBQUJCLCBBcnJheUNvbGxpc2lvbk1hdHJpeCwgQk9EWV9TTEVFUF9TVEFURVMsIEJPRFlfVFlQRVMsIEJvZHksIEJveCwgQnJvYWRwaGFzZSwgQ09MTElTSU9OX1RZUEVTLCBDb25lVHdpc3RDb25zdHJhaW50LCBDb25zdHJhaW50LCBDb250YWN0RXF1YXRpb24sIENvbnRhY3RNYXRlcmlhbCwgQ29udmV4UG9seWhlZHJvbiwgQ3lsaW5kZXIsIERpc3RhbmNlQ29uc3RyYWludCwgRXF1YXRpb24sIEV2ZW50VGFyZ2V0LCBGcmljdGlvbkVxdWF0aW9uLCBHU1NvbHZlciwgR3JpZEJyb2FkcGhhc2UsIEhlaWdodGZpZWxkLCBIaW5nZUNvbnN0cmFpbnQsIEphY29iaWFuRWxlbWVudCwgTG9ja0NvbnN0cmFpbnQsIE1hdDMsIE1hdGVyaWFsLCBOYWl2ZUJyb2FkcGhhc2UsIE5hcnJvd3BoYXNlLCBPYmplY3RDb2xsaXNpb25NYXRyaXgsIFBhcnRpY2xlLCBQbGFuZSwgUG9pbnRUb1BvaW50Q29uc3RyYWludCwgUG9vbCwgUXVhdGVybmlvbiwgUkFZX01PREVTLCBSYXksIFJheWNhc3RSZXN1bHQsIFJheWNhc3RWZWhpY2xlLCBSaWdpZFZlaGljbGUsIFJvdGF0aW9uYWxFcXVhdGlvbiwgUm90YXRpb25hbE1vdG9yRXF1YXRpb24sIFNBUEJyb2FkcGhhc2UsIFNIQVBFX1RZUEVTLCBTUEhTeXN0ZW0sIFNoYXBlLCBTb2x2ZXIsIFNwaGVyZSwgU3BsaXRTb2x2ZXIsIFNwcmluZywgVHJhbnNmb3JtLCBUcmltZXNoLCBWZWMzLCBWZWMzUG9vbCwgV2hlZWxJbmZvLCBXb3JsZCB9O1xuIiwiaW1wb3J0IHtcbiAgQm9keSxcbiAgQm94LFxuICBDb252ZXhQb2x5aGVkcm9uLFxuICBDeWxpbmRlcixcbiAgSGVpZ2h0ZmllbGQsXG4gIE1hdGVyaWFsLFxuICBQYXJ0aWNsZSxcbiAgUGxhbmUsXG4gIFF1YXRlcm5pb24sXG4gIFNwaGVyZSxcbiAgVHJpbWVzaCxcbiAgVmVjMyxcbn0gZnJvbSAnY2Fubm9uLWVzJ1xuXG5jb25zdCBtYWtlVmVjMyA9IChbeCwgeSwgel0pID0+IG5ldyBWZWMzKHgsIHksIHopXG5jb25zdCBwcmVwYXJlU3BoZXJlID0gKGFyZ3MpID0+IChBcnJheS5pc0FycmF5KGFyZ3MpID8gYXJncyA6IFthcmdzXSlcbmNvbnN0IHByZXBhcmVDb252ZXhQb2x5aGVkcm9uID0gKFt2LCBmYWNlcywgbiwgYSwgYm91bmRpbmdTcGhlcmVSYWRpdXNdKSA9PiBbXG4gIHtcbiAgICB2ZXJ0aWNlczogdiA/IHYubWFwKG1ha2VWZWMzKSA6IHVuZGVmaW5lZCxcbiAgICBmYWNlcyxcbiAgICBub3JtYWxzOiBuID8gbi5tYXAobWFrZVZlYzMpIDogdW5kZWZpbmVkLFxuICAgIGF4ZXM6IGEgPyBhLm1hcChtYWtlVmVjMykgOiB1bmRlZmluZWQsXG4gICAgYm91bmRpbmdTcGhlcmVSYWRpdXMsXG4gIH0sXG5dXG5cbmZ1bmN0aW9uIGNyZWF0ZVNoYXBlKHR5cGUsIGFyZ3MpIHtcbiAgc3dpdGNoICh0eXBlKSB7XG4gICAgY2FzZSAnQm94JzpcbiAgICAgIHJldHVybiBuZXcgQm94KG5ldyBWZWMzKC4uLmFyZ3MubWFwKCh2KSA9PiB2IC8gMikpKSAvLyBleHRlbnRzID0+IGhhbGZFeHRlbnRzXG4gICAgY2FzZSAnQ29udmV4UG9seWhlZHJvbic6XG4gICAgICByZXR1cm4gbmV3IENvbnZleFBvbHloZWRyb24oLi4ucHJlcGFyZUNvbnZleFBvbHloZWRyb24oYXJncykpXG4gICAgY2FzZSAnQ3lsaW5kZXInOlxuICAgICAgcmV0dXJuIG5ldyBDeWxpbmRlciguLi5hcmdzKSAvLyBbIHJhZGl1c1RvcCwgcmFkaXVzQm90dG9tLCBoZWlnaHQsIG51bVNlZ21lbnRzIF0gPSBhcmdzXG4gICAgY2FzZSAnSGVpZ2h0ZmllbGQnOlxuICAgICAgcmV0dXJuIG5ldyBIZWlnaHRmaWVsZCguLi5hcmdzKSAvLyBbIEFycmF5IGRhdGEsIG9wdGlvbnM6IHttaW5WYWx1ZSwgbWF4VmFsdWUsIGVsZW1lbnRTaXplfSAgXSA9IGFyZ3NcbiAgICBjYXNlICdQYXJ0aWNsZSc6XG4gICAgICByZXR1cm4gbmV3IFBhcnRpY2xlKCkgLy8gbm8gYXJnc1xuICAgIGNhc2UgJ1BsYW5lJzpcbiAgICAgIHJldHVybiBuZXcgUGxhbmUoKSAvLyBubyBhcmdzLCBpbmZpbml0ZSB4IGFuZCB5XG4gICAgY2FzZSAnU3BoZXJlJzpcbiAgICAgIHJldHVybiBuZXcgU3BoZXJlKC4uLnByZXBhcmVTcGhlcmUoYXJncykpIC8vIHJhZGl1cyA9IGFyZ3NcbiAgICBjYXNlICdUcmltZXNoJzpcbiAgICAgIHJldHVybiBuZXcgVHJpbWVzaCguLi5hcmdzKSAvLyBbdmVydGljZXMsIGluZGljZXNdID0gYXJnc1xuICB9XG59XG5cbi8qKlxuICpcbiAqIEBwYXJhbSB1dWlkIHtzdHJpbmd9XG4gKiBAcGFyYW0gcHJvcHMge0JvZHlQcm9wc31cbiAqIEBwYXJhbSB0eXBlIHtCb2R5U2hhcGVUeXBlfVxuICogQHJldHVybiB7bW9kdWxlOm9iamVjdHMvQm9keS5Cb2R5fVxuICovXG5jb25zdCBwcm9wc1RvQm9keSA9ICh1dWlkLCBwcm9wcywgdHlwZSkgPT4ge1xuICBjb25zdCB7XG4gICAgYXJncyA9IFtdLFxuICAgIHBvc2l0aW9uID0gWzAsIDAsIDBdLFxuICAgIHJvdGF0aW9uID0gWzAsIDAsIDBdLFxuICAgIHZlbG9jaXR5ID0gWzAsIDAsIDBdLFxuICAgIGFuZ3VsYXJWZWxvY2l0eSA9IFswLCAwLCAwXSxcbiAgICBsaW5lYXJGYWN0b3IgPSBbMSwgMSwgMV0sXG4gICAgYW5ndWxhckZhY3RvciA9IFsxLCAxLCAxXSxcbiAgICB0eXBlOiBib2R5VHlwZSxcbiAgICBtYXNzLFxuICAgIG1hdGVyaWFsLFxuICAgIHNoYXBlcyxcbiAgICBvbkNvbGxpZGUsXG4gICAgY29sbGlzaW9uUmVzcG9uc2UsXG4gICAgLi4uZXh0cmFcbiAgfSA9IHByb3BzXG5cbiAgY29uc3QgYm9keSA9IG5ldyBCb2R5KHtcbiAgICAuLi5leHRyYSxcbiAgICBtYXNzOiBib2R5VHlwZSA9PT0gJ1N0YXRpYycgPyAwIDogbWFzcyxcbiAgICB0eXBlOiBib2R5VHlwZSA/IEJvZHlbYm9keVR5cGUudG9VcHBlckNhc2UoKV0gOiB1bmRlZmluZWQsXG4gICAgbWF0ZXJpYWw6IG1hdGVyaWFsID8gbmV3IE1hdGVyaWFsKG1hdGVyaWFsKSA6IHVuZGVmaW5lZCxcbiAgfSlcbiAgYm9keS51dWlkID0gdXVpZFxuXG4gIGlmIChjb2xsaXNpb25SZXNwb25zZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgYm9keS5jb2xsaXNpb25SZXNwb25zZSA9IGNvbGxpc2lvblJlc3BvbnNlXG4gIH1cblxuICBpZiAodHlwZSA9PT0gJ0NvbXBvdW5kJykge1xuICAgIHNoYXBlcy5mb3JFYWNoKCh7IHR5cGUsIGFyZ3MsIHBvc2l0aW9uLCByb3RhdGlvbiwgbWF0ZXJpYWwsIC4uLmV4dHJhIH0pID0+IHtcbiAgICAgIGNvbnN0IHNoYXBlQm9keSA9IGJvZHkuYWRkU2hhcGUoXG4gICAgICAgIGNyZWF0ZVNoYXBlKHR5cGUsIGFyZ3MpLFxuICAgICAgICBwb3NpdGlvbiA/IG5ldyBWZWMzKC4uLnBvc2l0aW9uKSA6IHVuZGVmaW5lZCxcbiAgICAgICAgcm90YXRpb24gPyBuZXcgUXVhdGVybmlvbigpLnNldEZyb21FdWxlciguLi5yb3RhdGlvbikgOiB1bmRlZmluZWQsXG4gICAgICApXG4gICAgICBpZiAobWF0ZXJpYWwpIHNoYXBlQm9keS5tYXRlcmlhbCA9IG5ldyBNYXRlcmlhbChtYXRlcmlhbClcbiAgICAgIE9iamVjdC5hc3NpZ24oc2hhcGVCb2R5LCBleHRyYSlcbiAgICB9KVxuICB9IGVsc2Uge1xuICAgIGJvZHkuYWRkU2hhcGUoY3JlYXRlU2hhcGUodHlwZSwgYXJncykpXG4gIH1cblxuICBib2R5LnBvc2l0aW9uLnNldChwb3NpdGlvblswXSwgcG9zaXRpb25bMV0sIHBvc2l0aW9uWzJdKVxuICBib2R5LnF1YXRlcm5pb24uc2V0RnJvbUV1bGVyKHJvdGF0aW9uWzBdLCByb3RhdGlvblsxXSwgcm90YXRpb25bMl0pXG4gIGJvZHkudmVsb2NpdHkuc2V0KHZlbG9jaXR5WzBdLCB2ZWxvY2l0eVsxXSwgdmVsb2NpdHlbMl0pXG4gIGJvZHkuYW5ndWxhclZlbG9jaXR5LnNldChhbmd1bGFyVmVsb2NpdHlbMF0sIGFuZ3VsYXJWZWxvY2l0eVsxXSwgYW5ndWxhclZlbG9jaXR5WzJdKVxuICBib2R5LmxpbmVhckZhY3Rvci5zZXQobGluZWFyRmFjdG9yWzBdLCBsaW5lYXJGYWN0b3JbMV0sIGxpbmVhckZhY3RvclsyXSlcbiAgYm9keS5hbmd1bGFyRmFjdG9yLnNldChhbmd1bGFyRmFjdG9yWzBdLCBhbmd1bGFyRmFjdG9yWzFdLCBhbmd1bGFyRmFjdG9yWzJdKVxuICByZXR1cm4gYm9keVxufVxuXG5leHBvcnQgZGVmYXVsdCBwcm9wc1RvQm9keVxuIiwiaW1wb3J0IHtcbiAgV29ybGQsXG4gIE5haXZlQnJvYWRwaGFzZSxcbiAgU0FQQnJvYWRwaGFzZSxcbiAgVmVjMyxcbiAgUG9pbnRUb1BvaW50Q29uc3RyYWludCxcbiAgQ29uZVR3aXN0Q29uc3RyYWludCxcbiAgSGluZ2VDb25zdHJhaW50LFxuICBEaXN0YW5jZUNvbnN0cmFpbnQsXG4gIExvY2tDb25zdHJhaW50LFxuICBDb25zdHJhaW50LFxuICBTcHJpbmcsXG4gIFF1YXRlcm5pb24sXG4gIFJheSxcbiAgUmF5Y2FzdFJlc3VsdCxcbiAgUmF5Y2FzdFZlaGljbGUsXG4gIEdTU29sdmVyLFxuICBTcGxpdFNvbHZlcixcbn0gZnJvbSAnY2Fubm9uLWVzJ1xuaW1wb3J0IHByb3BzVG9Cb2R5IGZyb20gJy4vcHJvcHNUb0JvZHknXG5cbmNvbnN0IHN0YXRlID0ge1xuICBib2RpZXM6IHt9LFxuICB2ZWhpY2xlczoge30sXG4gIHNwcmluZ3M6IHt9LFxuICBzcHJpbmdJbnN0YW5jZXM6IHt9LFxuICByYXlzOiB7fSxcbiAgd29ybGQ6IG5ldyBXb3JsZCgpLFxuICBjb25maWc6IHsgc3RlcDogMSAvIDYwIH0sXG4gIHN1YnNjcmlwdGlvbnM6IHt9LFxuICBib2RpZXNOZWVkU3luY2luZzogZmFsc2UsXG4gIGxhc3RDYWxsVGltZTogdW5kZWZpbmVkLFxufVxuXG5mdW5jdGlvbiBzeW5jQm9kaWVzKCkge1xuICBzdGF0ZS5ib2RpZXNOZWVkU3luY2luZyA9IHRydWVcbiAgc3RhdGUuYm9kaWVzID0gc3RhdGUud29ybGQuYm9kaWVzLnJlZHVjZSgoYWNjLCBib2R5KSA9PiAoeyAuLi5hY2MsIFtib2R5LnV1aWRdOiBib2R5IH0pLCB7fSlcbn1cblxuZnVuY3Rpb24gZW1pdEJlZ2luQ29udGFjdCh7IGJvZHlBLCBib2R5QiB9KSB7XG4gIGlmICghYm9keUEgfHwgIWJvZHlCKSByZXR1cm5cbiAgc2VsZi5wb3N0TWVzc2FnZSh7IG9wOiAnZXZlbnQnLCB0eXBlOiAnY29sbGlkZUJlZ2luJywgYm9keUE6IGJvZHlBLnV1aWQsIGJvZHlCOiBib2R5Qi51dWlkIH0pXG59XG5cbmZ1bmN0aW9uIGVtaXRFbmRDb250YWN0KHsgYm9keUEsIGJvZHlCIH0pIHtcbiAgaWYgKCFib2R5QSB8fCAhYm9keUIpIHJldHVyblxuICBzZWxmLnBvc3RNZXNzYWdlKHsgb3A6ICdldmVudCcsIHR5cGU6ICdjb2xsaWRlRW5kJywgYm9keUE6IGJvZHlBLnV1aWQsIGJvZHlCOiBib2R5Qi51dWlkIH0pXG59XG5cbnNlbGYub25tZXNzYWdlID0gKGUpID0+IHtcbiAgY29uc3QgeyBvcCwgdXVpZCwgdHlwZSwgcG9zaXRpb25zLCBxdWF0ZXJuaW9ucywgcHJvcHMgfSA9IGUuZGF0YVxuICBjb25zdCBicm9hZHBoYXNlcyA9IHsgTmFpdmVCcm9hZHBoYXNlLCBTQVBCcm9hZHBoYXNlIH1cbiAgc3dpdGNoIChvcCkge1xuICAgIGNhc2UgJ2luaXQnOiB7XG4gICAgICBjb25zdCB7XG4gICAgICAgIGdyYXZpdHksXG4gICAgICAgIHRvbGVyYW5jZSxcbiAgICAgICAgc3RlcCxcbiAgICAgICAgaXRlcmF0aW9ucyxcbiAgICAgICAgYWxsb3dTbGVlcCxcbiAgICAgICAgYnJvYWRwaGFzZSxcbiAgICAgICAgYXhpc0luZGV4LFxuICAgICAgICBkZWZhdWx0Q29udGFjdE1hdGVyaWFsLFxuICAgICAgICBxdWF0Tm9ybWFsaXplRmFzdCxcbiAgICAgICAgcXVhdE5vcm1hbGl6ZVNraXAsXG4gICAgICAgIHNvbHZlcixcbiAgICAgIH0gPSBwcm9wc1xuICAgICAgc3RhdGUud29ybGQuYWxsb3dTbGVlcCA9IGFsbG93U2xlZXBcbiAgICAgIHN0YXRlLndvcmxkLmdyYXZpdHkuc2V0KGdyYXZpdHlbMF0sIGdyYXZpdHlbMV0sIGdyYXZpdHlbMl0pXG4gICAgICBzdGF0ZS53b3JsZC5xdWF0Tm9ybWFsaXplRmFzdCA9IHF1YXROb3JtYWxpemVGYXN0XG4gICAgICBzdGF0ZS53b3JsZC5xdWF0Tm9ybWFsaXplU2tpcCA9IHF1YXROb3JtYWxpemVTa2lwXG5cbiAgICAgIGlmIChzb2x2ZXIgPT09ICdTcGxpdCcpIHtcbiAgICAgICAgc3RhdGUud29ybGQuc29sdmVyID0gbmV3IFNwbGl0U29sdmVyKG5ldyBHU1NvbHZlcigpKVxuICAgICAgfVxuXG4gICAgICBzdGF0ZS53b3JsZC5zb2x2ZXIudG9sZXJhbmNlID0gdG9sZXJhbmNlXG4gICAgICBzdGF0ZS53b3JsZC5zb2x2ZXIuaXRlcmF0aW9ucyA9IGl0ZXJhdGlvbnNcbiAgICAgIHN0YXRlLndvcmxkLmJyb2FkcGhhc2UgPSBuZXcgKGJyb2FkcGhhc2VzW2Jyb2FkcGhhc2UgKyAnQnJvYWRwaGFzZSddIHx8IE5haXZlQnJvYWRwaGFzZSkoc3RhdGUud29ybGQpXG4gICAgICBzdGF0ZS53b3JsZC5icm9hZHBoYXNlLmF4aXNJbmRleCA9IGF4aXNJbmRleCA9PT0gdW5kZWZpbmVkIHx8IGF4aXNJbmRleCA9PT0gbnVsbCA/IDAgOiBheGlzSW5kZXhcbiAgICAgIHN0YXRlLndvcmxkLmFkZEV2ZW50TGlzdGVuZXIoJ2JlZ2luQ29udGFjdCcsIGVtaXRCZWdpbkNvbnRhY3QpXG4gICAgICBzdGF0ZS53b3JsZC5hZGRFdmVudExpc3RlbmVyKCdlbmRDb250YWN0JywgZW1pdEVuZENvbnRhY3QpXG4gICAgICBPYmplY3QuYXNzaWduKHN0YXRlLndvcmxkLmRlZmF1bHRDb250YWN0TWF0ZXJpYWwsIGRlZmF1bHRDb250YWN0TWF0ZXJpYWwpXG4gICAgICBzdGF0ZS5jb25maWcuc3RlcCA9IHN0ZXBcbiAgICAgIGJyZWFrXG4gICAgfVxuICAgIGNhc2UgJ3N0ZXAnOiB7XG4gICAgICBjb25zdCBub3cgPSBwZXJmb3JtYW5jZS5ub3coKSAvIDEwMDBcbiAgICAgIGlmICghc3RhdGUubGFzdENhbGxUaW1lKSB7XG4gICAgICAgIHN0YXRlLndvcmxkLnN0ZXAoc3RhdGUuY29uZmlnLnN0ZXApXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zdCB0aW1lU2luY2VMYXN0Q2FsbCA9IG5vdyAtIHN0YXRlLmxhc3RDYWxsVGltZVxuICAgICAgICBzdGF0ZS53b3JsZC5zdGVwKHN0YXRlLmNvbmZpZy5zdGVwLCB0aW1lU2luY2VMYXN0Q2FsbClcbiAgICAgIH1cbiAgICAgIHN0YXRlLmxhc3RDYWxsVGltZSA9IG5vd1xuXG4gICAgICBjb25zdCBudW1iZXJPZkJvZGllcyA9IHN0YXRlLndvcmxkLmJvZGllcy5sZW5ndGhcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbnVtYmVyT2ZCb2RpZXM7IGkrKykge1xuICAgICAgICBsZXQgYiA9IHN0YXRlLndvcmxkLmJvZGllc1tpXSxcbiAgICAgICAgICBwID0gYi5wb3NpdGlvbixcbiAgICAgICAgICBxID0gYi5xdWF0ZXJuaW9uXG4gICAgICAgIHBvc2l0aW9uc1szICogaSArIDBdID0gcC54XG4gICAgICAgIHBvc2l0aW9uc1szICogaSArIDFdID0gcC55XG4gICAgICAgIHBvc2l0aW9uc1szICogaSArIDJdID0gcC56XG4gICAgICAgIHF1YXRlcm5pb25zWzQgKiBpICsgMF0gPSBxLnhcbiAgICAgICAgcXVhdGVybmlvbnNbNCAqIGkgKyAxXSA9IHEueVxuICAgICAgICBxdWF0ZXJuaW9uc1s0ICogaSArIDJdID0gcS56XG4gICAgICAgIHF1YXRlcm5pb25zWzQgKiBpICsgM10gPSBxLndcbiAgICAgIH1cbiAgICAgIGNvbnN0IG9ic2VydmF0aW9ucyA9IFtdXG4gICAgICBmb3IgKGNvbnN0IGlkIG9mIE9iamVjdC5rZXlzKHN0YXRlLnN1YnNjcmlwdGlvbnMpKSB7XG4gICAgICAgIGxldCBbdXVpZCwgdHlwZSwgdGFyZ2V0ID0gJ2JvZGllcyddID0gc3RhdGUuc3Vic2NyaXB0aW9uc1tpZF1cbiAgICAgICAgbGV0IG9iamVjdCA9IHN0YXRlW3RhcmdldF1cbiAgICAgICAgaWYgKCFvYmplY3QgfHwgIW9iamVjdFt1dWlkXSkgY29udGludWVcbiAgICAgICAgbGV0IHZhbHVlID0gb2JqZWN0W3V1aWRdW3R5cGVdXG4gICAgICAgIGlmICh2YWx1ZSBpbnN0YW5jZW9mIFZlYzMgfHwgdmFsdWUgaW5zdGFuY2VvZiBRdWF0ZXJuaW9uKSB2YWx1ZSA9IHZhbHVlLnRvQXJyYXkoKVxuICAgICAgICBvYnNlcnZhdGlvbnMucHVzaChbaWQsIHZhbHVlLCB0eXBlXSlcbiAgICAgIH1cbiAgICAgIGNvbnN0IG1lc3NhZ2UgPSB7XG4gICAgICAgIG9wOiAnZnJhbWUnLFxuICAgICAgICBwb3NpdGlvbnMsXG4gICAgICAgIHF1YXRlcm5pb25zLFxuICAgICAgICBvYnNlcnZhdGlvbnMsXG4gICAgICAgIGFjdGl2ZTogc3RhdGUud29ybGQuaGFzQWN0aXZlQm9kaWVzLFxuICAgICAgfVxuICAgICAgaWYgKHN0YXRlLmJvZGllc05lZWRTeW5jaW5nKSB7XG4gICAgICAgIG1lc3NhZ2UuYm9kaWVzID0gc3RhdGUud29ybGQuYm9kaWVzLm1hcCgoYm9keSkgPT4gYm9keS51dWlkKVxuICAgICAgICBzdGF0ZS5ib2RpZXNOZWVkU3luY2luZyA9IGZhbHNlXG4gICAgICB9XG4gICAgICBzZWxmLnBvc3RNZXNzYWdlKG1lc3NhZ2UsIFtwb3NpdGlvbnMuYnVmZmVyLCBxdWF0ZXJuaW9ucy5idWZmZXJdKVxuICAgICAgYnJlYWtcbiAgICB9XG4gICAgY2FzZSAnYWRkQm9kaWVzJzoge1xuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB1dWlkLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGNvbnN0IGJvZHkgPSBwcm9wc1RvQm9keSh1dWlkW2ldLCBwcm9wc1tpXSwgdHlwZSlcbiAgICAgICAgc3RhdGUud29ybGQuYWRkQm9keShib2R5KVxuXG4gICAgICAgIGlmIChwcm9wc1tpXS5vbkNvbGxpZGUpXG4gICAgICAgICAgYm9keS5hZGRFdmVudExpc3RlbmVyKCdjb2xsaWRlJywgKHsgdHlwZSwgYm9keSwgdGFyZ2V0LCBjb250YWN0IH0pID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHsgbmksIHJpLCByaiwgYmksIGJqLCBpZCB9ID0gY29udGFjdFxuICAgICAgICAgICAgY29uc3QgY29udGFjdFBvaW50ID0gYmkucG9zaXRpb24udmFkZChyaSlcbiAgICAgICAgICAgIGNvbnN0IGNvbnRhY3ROb3JtYWwgPSBiaSA9PT0gYm9keSA/IG5pIDogbmkuc2NhbGUoLTEpXG4gICAgICAgICAgICBzZWxmLnBvc3RNZXNzYWdlKHtcbiAgICAgICAgICAgICAgb3A6ICdldmVudCcsXG4gICAgICAgICAgICAgIHR5cGUsXG4gICAgICAgICAgICAgIGJvZHk6IGJvZHkudXVpZCxcbiAgICAgICAgICAgICAgdGFyZ2V0OiB0YXJnZXQudXVpZCxcbiAgICAgICAgICAgICAgY29udGFjdDoge1xuICAgICAgICAgICAgICAgIG5pOiBuaS50b0FycmF5KCksXG4gICAgICAgICAgICAgICAgcmk6IHJpLnRvQXJyYXkoKSxcbiAgICAgICAgICAgICAgICByajogcmoudG9BcnJheSgpLFxuICAgICAgICAgICAgICAgIGJpOiBiaS51dWlkLFxuICAgICAgICAgICAgICAgIGJqOiBiai51dWlkLFxuICAgICAgICAgICAgICAgIGltcGFjdFZlbG9jaXR5OiBjb250YWN0LmdldEltcGFjdFZlbG9jaXR5QWxvbmdOb3JtYWwoKSxcbiAgICAgICAgICAgICAgICAvLyBXb3JsZCBwb3NpdGlvbiBvZiB0aGUgY29udGFjdFxuICAgICAgICAgICAgICAgIGNvbnRhY3RQb2ludDogY29udGFjdFBvaW50LnRvQXJyYXkoKSxcbiAgICAgICAgICAgICAgICAvLyBOb3JtYWwgb2YgdGhlIGNvbnRhY3QsIHJlbGF0aXZlIHRvIHRoZSBjb2xsaWRpbmcgYm9keVxuICAgICAgICAgICAgICAgIGNvbnRhY3ROb3JtYWw6IGNvbnRhY3ROb3JtYWwudG9BcnJheSgpLFxuICAgICAgICAgICAgICAgIGlkLFxuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICBjb2xsaXNpb25GaWx0ZXJzOiB7XG4gICAgICAgICAgICAgICAgYm9keUZpbHRlckdyb3VwOiBib2R5LmNvbGxpc2lvbkZpbHRlckdyb3VwLFxuICAgICAgICAgICAgICAgIGJvZHlGaWx0ZXJNYXNrOiBib2R5LmNvbGxpc2lvbkZpbHRlck1hc2ssXG4gICAgICAgICAgICAgICAgdGFyZ2V0RmlsdGVyR3JvdXA6IHRhcmdldC5jb2xsaXNpb25GaWx0ZXJHcm91cCxcbiAgICAgICAgICAgICAgICB0YXJnZXRGaWx0ZXJNYXNrOiB0YXJnZXQuY29sbGlzaW9uRmlsdGVyTWFzayxcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgfSlcbiAgICAgIH1cbiAgICAgIHN5bmNCb2RpZXMoKVxuICAgICAgYnJlYWtcbiAgICB9XG4gICAgY2FzZSAncmVtb3ZlQm9kaWVzJzoge1xuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB1dWlkLmxlbmd0aDsgaSsrKSBzdGF0ZS53b3JsZC5yZW1vdmVCb2R5KHN0YXRlLmJvZGllc1t1dWlkW2ldXSlcbiAgICAgIHN5bmNCb2RpZXMoKVxuICAgICAgYnJlYWtcbiAgICB9XG4gICAgY2FzZSAnc3Vic2NyaWJlJzoge1xuICAgICAgY29uc3QgeyBpZCwgdHlwZSwgdGFyZ2V0IH0gPSBwcm9wc1xuICAgICAgc3RhdGUuc3Vic2NyaXB0aW9uc1tpZF0gPSBbdXVpZCwgdHlwZSwgdGFyZ2V0XVxuICAgICAgYnJlYWtcbiAgICB9XG4gICAgY2FzZSAndW5zdWJzY3JpYmUnOiB7XG4gICAgICBkZWxldGUgc3RhdGUuc3Vic2NyaXB0aW9uc1twcm9wc11cbiAgICAgIGJyZWFrXG4gICAgfVxuICAgIGNhc2UgJ3NldFBvc2l0aW9uJzpcbiAgICAgIHN0YXRlLmJvZGllc1t1dWlkXS5wb3NpdGlvbi5zZXQocHJvcHNbMF0sIHByb3BzWzFdLCBwcm9wc1syXSlcbiAgICAgIGJyZWFrXG4gICAgY2FzZSAnc2V0UXVhdGVybmlvbic6XG4gICAgICBzdGF0ZS5ib2RpZXNbdXVpZF0ucXVhdGVybmlvbi5zZXQocHJvcHNbMF0sIHByb3BzWzFdLCBwcm9wc1syXSwgcHJvcHNbM10pXG4gICAgICBicmVha1xuICAgIGNhc2UgJ3NldFJvdGF0aW9uJzpcbiAgICAgIHN0YXRlLmJvZGllc1t1dWlkXS5xdWF0ZXJuaW9uLnNldEZyb21FdWxlcihwcm9wc1swXSwgcHJvcHNbMV0sIHByb3BzWzJdKVxuICAgICAgYnJlYWtcbiAgICBjYXNlICdzZXRWZWxvY2l0eSc6XG4gICAgICBzdGF0ZS5ib2RpZXNbdXVpZF0udmVsb2NpdHkuc2V0KHByb3BzWzBdLCBwcm9wc1sxXSwgcHJvcHNbMl0pXG4gICAgICBicmVha1xuICAgIGNhc2UgJ3NldEFuZ3VsYXJWZWxvY2l0eSc6XG4gICAgICBzdGF0ZS5ib2RpZXNbdXVpZF0uYW5ndWxhclZlbG9jaXR5LnNldChwcm9wc1swXSwgcHJvcHNbMV0sIHByb3BzWzJdKVxuICAgICAgYnJlYWtcbiAgICBjYXNlICdzZXRMaW5lYXJGYWN0b3InOlxuICAgICAgc3RhdGUuYm9kaWVzW3V1aWRdLmxpbmVhckZhY3Rvci5zZXQocHJvcHNbMF0sIHByb3BzWzFdLCBwcm9wc1syXSlcbiAgICAgIGJyZWFrXG4gICAgY2FzZSAnc2V0QW5ndWxhckZhY3Rvcic6XG4gICAgICBzdGF0ZS5ib2RpZXNbdXVpZF0uYW5ndWxhckZhY3Rvci5zZXQocHJvcHNbMF0sIHByb3BzWzFdLCBwcm9wc1syXSlcbiAgICAgIGJyZWFrXG4gICAgY2FzZSAnc2V0TWFzcyc6XG4gICAgICAvLyBhc3N1bWUgdGhhdCBhbiB1cGRhdGUgZnJvbSB6ZXJvLW1hc3MgaW1wbGllcyBhIG5lZWQgZm9yIGR5bmFtaWNzIG9uIHN0YXRpYyBvYmouXG4gICAgICBpZiAocHJvcHMgIT09IDAgJiYgc3RhdGUuYm9kaWVzW3V1aWRdLnR5cGUgPT09IDApIHN0YXRlLmJvZGllc1t1dWlkXS50eXBlID0gMVxuICAgICAgc3RhdGUuYm9kaWVzW3V1aWRdLm1hc3MgPSBwcm9wc1xuICAgICAgc3RhdGUuYm9kaWVzW3V1aWRdLnVwZGF0ZU1hc3NQcm9wZXJ0aWVzKClcbiAgICAgIGJyZWFrXG4gICAgY2FzZSAnc2V0TGluZWFyRGFtcGluZyc6XG4gICAgICBzdGF0ZS5ib2RpZXNbdXVpZF0ubGluZWFyRGFtcGluZyA9IHByb3BzXG4gICAgICBicmVha1xuICAgIGNhc2UgJ3NldEFuZ3VsYXJEYW1waW5nJzpcbiAgICAgIHN0YXRlLmJvZGllc1t1dWlkXS5hbmd1bGFyRGFtcGluZyA9IHByb3BzXG4gICAgICBicmVha1xuICAgIGNhc2UgJ3NldEFsbG93U2xlZXAnOlxuICAgICAgc3RhdGUuYm9kaWVzW3V1aWRdLmFsbG93U2xlZXAgPSBwcm9wc1xuICAgICAgYnJlYWtcbiAgICBjYXNlICdzZXRTbGVlcFNwZWVkTGltaXQnOlxuICAgICAgc3RhdGUuYm9kaWVzW3V1aWRdLnNsZWVwU3BlZWRMaW1pdCA9IHByb3BzXG4gICAgICBicmVha1xuICAgIGNhc2UgJ3NldFNsZWVwVGltZUxpbWl0JzpcbiAgICAgIHN0YXRlLmJvZGllc1t1dWlkXS5zbGVlcFRpbWVMaW1pdCA9IHByb3BzXG4gICAgICBicmVha1xuICAgIGNhc2UgJ3NldENvbGxpc2lvbkZpbHRlckdyb3VwJzpcbiAgICAgIHN0YXRlLmJvZGllc1t1dWlkXS5jb2xsaXNpb25GaWx0ZXJHcm91cCA9IHByb3BzXG4gICAgICBicmVha1xuICAgIGNhc2UgJ3NldENvbGxpc2lvbkZpbHRlck1hc2snOlxuICAgICAgc3RhdGUuYm9kaWVzW3V1aWRdLmNvbGxpc2lvbkZpbHRlck1hc2sgPSBwcm9wc1xuICAgICAgYnJlYWtcbiAgICBjYXNlICdzZXRDb2xsaXNpb25SZXNwb25zZSc6XG4gICAgICBzdGF0ZS5ib2RpZXNbdXVpZF0uY29sbGlzaW9uUmVzcG9uc2UgPSBwcm9wc1xuICAgICAgYnJlYWtcbiAgICBjYXNlICdzZXRGaXhlZFJvdGF0aW9uJzpcbiAgICAgIHN0YXRlLmJvZGllc1t1dWlkXS5maXhlZFJvdGF0aW9uID0gcHJvcHNcbiAgICAgIGJyZWFrXG4gICAgY2FzZSAnc2V0SXNUcmlnZ2VyJzpcbiAgICAgIHN0YXRlLmJvZGllc1t1dWlkXS5pc1RyaWdnZXIgPSBwcm9wc1xuICAgICAgYnJlYWtcbiAgICBjYXNlICdzZXRHcmF2aXR5JzpcbiAgICAgIHN0YXRlLndvcmxkLmdyYXZpdHkuc2V0KHByb3BzWzBdLCBwcm9wc1sxXSwgcHJvcHNbMl0pXG4gICAgICBicmVha1xuICAgIGNhc2UgJ3NldFRvbGVyYW5jZSc6XG4gICAgICBzdGF0ZS53b3JsZC5zb2x2ZXIudG9sZXJhbmNlID0gcHJvcHNcbiAgICAgIGJyZWFrXG4gICAgY2FzZSAnc2V0U3RlcCc6XG4gICAgICBzdGF0ZS5jb25maWcuc3RlcCA9IHByb3BzXG4gICAgICBicmVha1xuICAgIGNhc2UgJ3NldEl0ZXJhdGlvbnMnOlxuICAgICAgc3RhdGUud29ybGQuc29sdmVyLml0ZXJhdGlvbnMgPSBwcm9wc1xuICAgICAgYnJlYWtcbiAgICBjYXNlICdzZXRCcm9hZHBoYXNlJzpcbiAgICAgIHN0YXRlLndvcmxkLmJyb2FkcGhhc2UgPSBuZXcgKGJyb2FkcGhhc2VzW3Byb3BzICsgJ0Jyb2FkcGhhc2UnXSB8fCBOYWl2ZUJyb2FkcGhhc2UpKHN0YXRlLndvcmxkKVxuICAgICAgYnJlYWtcbiAgICBjYXNlICdzZXRBeGlzSW5kZXgnOlxuICAgICAgc3RhdGUud29ybGQuYnJvYWRwaGFzZS5heGlzSW5kZXggPSBwcm9wcyA9PT0gdW5kZWZpbmVkIHx8IHByb3BzID09PSBudWxsID8gMCA6IHByb3BzXG4gICAgICBicmVha1xuICAgIGNhc2UgJ2FwcGx5Rm9yY2UnOlxuICAgICAgc3RhdGUuYm9kaWVzW3V1aWRdLmFwcGx5Rm9yY2UobmV3IFZlYzMoLi4ucHJvcHNbMF0pLCBuZXcgVmVjMyguLi5wcm9wc1sxXSkpXG4gICAgICBicmVha1xuICAgIGNhc2UgJ2FwcGx5SW1wdWxzZSc6XG4gICAgICBzdGF0ZS5ib2RpZXNbdXVpZF0uYXBwbHlJbXB1bHNlKG5ldyBWZWMzKC4uLnByb3BzWzBdKSwgbmV3IFZlYzMoLi4ucHJvcHNbMV0pKVxuICAgICAgYnJlYWtcbiAgICBjYXNlICdhcHBseUxvY2FsRm9yY2UnOlxuICAgICAgc3RhdGUuYm9kaWVzW3V1aWRdLmFwcGx5TG9jYWxGb3JjZShuZXcgVmVjMyguLi5wcm9wc1swXSksIG5ldyBWZWMzKC4uLnByb3BzWzFdKSlcbiAgICAgIGJyZWFrXG4gICAgY2FzZSAnYXBwbHlMb2NhbEltcHVsc2UnOlxuICAgICAgc3RhdGUuYm9kaWVzW3V1aWRdLmFwcGx5TG9jYWxJbXB1bHNlKG5ldyBWZWMzKC4uLnByb3BzWzBdKSwgbmV3IFZlYzMoLi4ucHJvcHNbMV0pKVxuICAgICAgYnJlYWtcbiAgICBjYXNlICdhcHBseVRvcnF1ZSc6XG4gICAgICBzdGF0ZS5ib2RpZXNbdXVpZF0uYXBwbHlUb3JxdWUobmV3IFZlYzMoLi4ucHJvcHNbMF0pKVxuICAgICAgYnJlYWtcbiAgICBjYXNlICdhZGRDb25zdHJhaW50Jzoge1xuICAgICAgY29uc3QgW2JvZHlBLCBib2R5Qiwgb3B0bnNdID0gcHJvcHNcbiAgICAgIGxldCB7IHBpdm90QSwgcGl2b3RCLCBheGlzQSwgYXhpc0IsIC4uLm9wdGlvbnMgfSA9IG9wdG5zXG5cbiAgICAgIC8vIGlzIHRoZXJlIGEgYmV0dGVyIHdheSB0byBlbmZvcmNlIGRlZmF1bHRzP1xuICAgICAgcGl2b3RBID0gQXJyYXkuaXNBcnJheShwaXZvdEEpID8gbmV3IFZlYzMoLi4ucGl2b3RBKSA6IHVuZGVmaW5lZFxuICAgICAgcGl2b3RCID0gQXJyYXkuaXNBcnJheShwaXZvdEIpID8gbmV3IFZlYzMoLi4ucGl2b3RCKSA6IHVuZGVmaW5lZFxuICAgICAgYXhpc0EgPSBBcnJheS5pc0FycmF5KGF4aXNBKSA/IG5ldyBWZWMzKC4uLmF4aXNBKSA6IHVuZGVmaW5lZFxuICAgICAgYXhpc0IgPSBBcnJheS5pc0FycmF5KGF4aXNCKSA/IG5ldyBWZWMzKC4uLmF4aXNCKSA6IHVuZGVmaW5lZFxuXG4gICAgICBsZXQgY29uc3RyYWludFxuXG4gICAgICBzd2l0Y2ggKHR5cGUpIHtcbiAgICAgICAgY2FzZSAnUG9pbnRUb1BvaW50JzpcbiAgICAgICAgICBjb25zdHJhaW50ID0gbmV3IFBvaW50VG9Qb2ludENvbnN0cmFpbnQoXG4gICAgICAgICAgICBzdGF0ZS5ib2RpZXNbYm9keUFdLFxuICAgICAgICAgICAgcGl2b3RBLFxuICAgICAgICAgICAgc3RhdGUuYm9kaWVzW2JvZHlCXSxcbiAgICAgICAgICAgIHBpdm90QixcbiAgICAgICAgICAgIG9wdG5zLm1heEZvcmNlLFxuICAgICAgICAgIClcbiAgICAgICAgICBicmVha1xuICAgICAgICBjYXNlICdDb25lVHdpc3QnOlxuICAgICAgICAgIGNvbnN0cmFpbnQgPSBuZXcgQ29uZVR3aXN0Q29uc3RyYWludChzdGF0ZS5ib2RpZXNbYm9keUFdLCBzdGF0ZS5ib2RpZXNbYm9keUJdLCB7XG4gICAgICAgICAgICBwaXZvdEEsXG4gICAgICAgICAgICBwaXZvdEIsXG4gICAgICAgICAgICBheGlzQSxcbiAgICAgICAgICAgIGF4aXNCLFxuICAgICAgICAgICAgLi4ub3B0aW9ucyxcbiAgICAgICAgICB9KVxuICAgICAgICAgIGJyZWFrXG4gICAgICAgIGNhc2UgJ0hpbmdlJzpcbiAgICAgICAgICBjb25zdHJhaW50ID0gbmV3IEhpbmdlQ29uc3RyYWludChzdGF0ZS5ib2RpZXNbYm9keUFdLCBzdGF0ZS5ib2RpZXNbYm9keUJdLCB7XG4gICAgICAgICAgICBwaXZvdEEsXG4gICAgICAgICAgICBwaXZvdEIsXG4gICAgICAgICAgICBheGlzQSxcbiAgICAgICAgICAgIGF4aXNCLFxuICAgICAgICAgICAgLi4ub3B0aW9ucyxcbiAgICAgICAgICB9KVxuICAgICAgICAgIGJyZWFrXG4gICAgICAgIGNhc2UgJ0Rpc3RhbmNlJzpcbiAgICAgICAgICBjb25zdHJhaW50ID0gbmV3IERpc3RhbmNlQ29uc3RyYWludChcbiAgICAgICAgICAgIHN0YXRlLmJvZGllc1tib2R5QV0sXG4gICAgICAgICAgICBzdGF0ZS5ib2RpZXNbYm9keUJdLFxuICAgICAgICAgICAgb3B0bnMuZGlzdGFuY2UsXG4gICAgICAgICAgICBvcHRucy5tYXhGb3JjZSxcbiAgICAgICAgICApXG4gICAgICAgICAgYnJlYWtcbiAgICAgICAgY2FzZSAnTG9jayc6XG4gICAgICAgICAgY29uc3RyYWludCA9IG5ldyBMb2NrQ29uc3RyYWludChzdGF0ZS5ib2RpZXNbYm9keUFdLCBzdGF0ZS5ib2RpZXNbYm9keUJdLCBvcHRucylcbiAgICAgICAgICBicmVha1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgIGNvbnN0cmFpbnQgPSBuZXcgQ29uc3RyYWludChzdGF0ZS5ib2RpZXNbYm9keUFdLCBzdGF0ZS5ib2RpZXNbYm9keUJdLCBvcHRucylcbiAgICAgICAgICBicmVha1xuICAgICAgfVxuICAgICAgY29uc3RyYWludC51dWlkID0gdXVpZFxuICAgICAgc3RhdGUud29ybGQuYWRkQ29uc3RyYWludChjb25zdHJhaW50KVxuICAgICAgYnJlYWtcbiAgICB9XG4gICAgY2FzZSAncmVtb3ZlQ29uc3RyYWludCc6XG4gICAgICBzdGF0ZS53b3JsZC5jb25zdHJhaW50c1xuICAgICAgICAuZmlsdGVyKCh7IHV1aWQ6IHRoaXNJZCB9KSA9PiB0aGlzSWQgPT09IHV1aWQpXG4gICAgICAgIC5tYXAoKGMpID0+IHN0YXRlLndvcmxkLnJlbW92ZUNvbnN0cmFpbnQoYykpXG4gICAgICBicmVha1xuXG4gICAgY2FzZSAnZW5hYmxlQ29uc3RyYWludCc6XG4gICAgICBzdGF0ZS53b3JsZC5jb25zdHJhaW50cy5maWx0ZXIoKHsgdXVpZDogdGhpc0lkIH0pID0+IHRoaXNJZCA9PT0gdXVpZCkubWFwKChjKSA9PiBjLmVuYWJsZSgpKVxuICAgICAgYnJlYWtcblxuICAgIGNhc2UgJ2Rpc2FibGVDb25zdHJhaW50JzpcbiAgICAgIHN0YXRlLndvcmxkLmNvbnN0cmFpbnRzLmZpbHRlcigoeyB1dWlkOiB0aGlzSWQgfSkgPT4gdGhpc0lkID09PSB1dWlkKS5tYXAoKGMpID0+IGMuZGlzYWJsZSgpKVxuICAgICAgYnJlYWtcblxuICAgIGNhc2UgJ2VuYWJsZUNvbnN0cmFpbnRNb3Rvcic6XG4gICAgICBzdGF0ZS53b3JsZC5jb25zdHJhaW50cy5maWx0ZXIoKHsgdXVpZDogdGhpc0lkIH0pID0+IHRoaXNJZCA9PT0gdXVpZCkubWFwKChjKSA9PiBjLmVuYWJsZU1vdG9yKCkpXG4gICAgICBicmVha1xuXG4gICAgY2FzZSAnZGlzYWJsZUNvbnN0cmFpbnRNb3Rvcic6XG4gICAgICBzdGF0ZS53b3JsZC5jb25zdHJhaW50cy5maWx0ZXIoKHsgdXVpZDogdGhpc0lkIH0pID0+IHRoaXNJZCA9PT0gdXVpZCkubWFwKChjKSA9PiBjLmRpc2FibGVNb3RvcigpKVxuICAgICAgYnJlYWtcblxuICAgIGNhc2UgJ3NldENvbnN0cmFpbnRNb3RvclNwZWVkJzpcbiAgICAgIHN0YXRlLndvcmxkLmNvbnN0cmFpbnRzLmZpbHRlcigoeyB1dWlkOiB0aGlzSWQgfSkgPT4gdGhpc0lkID09PSB1dWlkKS5tYXAoKGMpID0+IGMuc2V0TW90b3JTcGVlZChwcm9wcykpXG4gICAgICBicmVha1xuXG4gICAgY2FzZSAnc2V0Q29uc3RyYWludE1vdG9yTWF4Rm9yY2UnOlxuICAgICAgc3RhdGUud29ybGQuY29uc3RyYWludHNcbiAgICAgICAgLmZpbHRlcigoeyB1dWlkOiB0aGlzSWQgfSkgPT4gdGhpc0lkID09PSB1dWlkKVxuICAgICAgICAubWFwKChjKSA9PiBjLnNldE1vdG9yTWF4Rm9yY2UocHJvcHMpKVxuICAgICAgYnJlYWtcblxuICAgIGNhc2UgJ2FkZFNwcmluZyc6IHtcbiAgICAgIGNvbnN0IFtib2R5QSwgYm9keUIsIG9wdG5zXSA9IHByb3BzXG4gICAgICBsZXQgeyB3b3JsZEFuY2hvckEsIHdvcmxkQW5jaG9yQiwgbG9jYWxBbmNob3JBLCBsb2NhbEFuY2hvckIsIHJlc3RMZW5ndGgsIHN0aWZmbmVzcywgZGFtcGluZyB9ID0gb3B0bnNcblxuICAgICAgd29ybGRBbmNob3JBID0gQXJyYXkuaXNBcnJheSh3b3JsZEFuY2hvckEpID8gbmV3IFZlYzMoLi4ud29ybGRBbmNob3JBKSA6IHVuZGVmaW5lZFxuICAgICAgd29ybGRBbmNob3JCID0gQXJyYXkuaXNBcnJheSh3b3JsZEFuY2hvckIpID8gbmV3IFZlYzMoLi4ud29ybGRBbmNob3JCKSA6IHVuZGVmaW5lZFxuICAgICAgbG9jYWxBbmNob3JBID0gQXJyYXkuaXNBcnJheShsb2NhbEFuY2hvckEpID8gbmV3IFZlYzMoLi4ubG9jYWxBbmNob3JBKSA6IHVuZGVmaW5lZFxuICAgICAgbG9jYWxBbmNob3JCID0gQXJyYXkuaXNBcnJheShsb2NhbEFuY2hvckIpID8gbmV3IFZlYzMoLi4ubG9jYWxBbmNob3JCKSA6IHVuZGVmaW5lZFxuXG4gICAgICBsZXQgc3ByaW5nID0gbmV3IFNwcmluZyhzdGF0ZS5ib2RpZXNbYm9keUFdLCBzdGF0ZS5ib2RpZXNbYm9keUJdLCB7XG4gICAgICAgIHdvcmxkQW5jaG9yQSxcbiAgICAgICAgd29ybGRBbmNob3JCLFxuICAgICAgICBsb2NhbEFuY2hvckEsXG4gICAgICAgIGxvY2FsQW5jaG9yQixcbiAgICAgICAgcmVzdExlbmd0aCxcbiAgICAgICAgc3RpZmZuZXNzLFxuICAgICAgICBkYW1waW5nLFxuICAgICAgfSlcblxuICAgICAgc3ByaW5nLnV1aWQgPSB1dWlkXG5cbiAgICAgIGxldCBwb3N0U3RlcFNwcmluZyA9ICgpID0+IHNwcmluZy5hcHBseUZvcmNlKClcblxuICAgICAgc3RhdGUuc3ByaW5nc1t1dWlkXSA9IHBvc3RTdGVwU3ByaW5nXG4gICAgICBzdGF0ZS5zcHJpbmdJbnN0YW5jZXNbdXVpZF0gPSBzcHJpbmdcblxuICAgICAgLy8gQ29tcHV0ZSB0aGUgZm9yY2UgYWZ0ZXIgZWFjaCBzdGVwXG4gICAgICBzdGF0ZS53b3JsZC5hZGRFdmVudExpc3RlbmVyKCdwb3N0U3RlcCcsIHN0YXRlLnNwcmluZ3NbdXVpZF0pXG4gICAgICBicmVha1xuICAgIH1cbiAgICBjYXNlICdzZXRTcHJpbmdTdGlmZm5lc3MnOiB7XG4gICAgICBzdGF0ZS5zcHJpbmdJbnN0YW5jZXNbdXVpZF0uc3RpZmZuZXNzID0gcHJvcHNcbiAgICAgIGJyZWFrXG4gICAgfVxuICAgIGNhc2UgJ3NldFNwcmluZ1Jlc3RMZW5ndGgnOiB7XG4gICAgICBzdGF0ZS5zcHJpbmdJbnN0YW5jZXNbdXVpZF0ucmVzdExlbmd0aCA9IHByb3BzXG4gICAgICBicmVha1xuICAgIH1cbiAgICBjYXNlICdzZXRTcHJpbmdEYW1waW5nJzoge1xuICAgICAgc3RhdGUuc3ByaW5nSW5zdGFuY2VzW3V1aWRdLmRhbXBpbmcgPSBwcm9wc1xuICAgICAgYnJlYWtcbiAgICB9XG4gICAgY2FzZSAncmVtb3ZlU3ByaW5nJzoge1xuICAgICAgc3RhdGUud29ybGQucmVtb3ZlRXZlbnRMaXN0ZW5lcigncG9zdFN0ZXAnLCBzdGF0ZS5zcHJpbmdzW3V1aWRdKVxuICAgICAgYnJlYWtcbiAgICB9XG4gICAgY2FzZSAnYWRkUmF5Jzoge1xuICAgICAgY29uc3QgeyBmcm9tLCB0bywgLi4ub3B0aW9ucyB9ID0gcHJvcHNcbiAgICAgIGNvbnN0IHJheSA9IG5ldyBSYXkoZnJvbSA/IG5ldyBWZWMzKC4uLmZyb20pIDogdW5kZWZpbmVkLCB0byA/IG5ldyBWZWMzKC4uLnRvKSA6IHVuZGVmaW5lZClcbiAgICAgIG9wdGlvbnMubW9kZSA9IFJheVtvcHRpb25zLm1vZGUudG9VcHBlckNhc2UoKV1cbiAgICAgIG9wdGlvbnMucmVzdWx0ID0gbmV3IFJheWNhc3RSZXN1bHQoKVxuICAgICAgc3RhdGUucmF5c1t1dWlkXSA9ICgpID0+IHtcbiAgICAgICAgcmF5LmludGVyc2VjdFdvcmxkKHN0YXRlLndvcmxkLCBvcHRpb25zKVxuICAgICAgICBjb25zdCB7IGJvZHksIHNoYXBlLCByYXlGcm9tV29ybGQsIHJheVRvV29ybGQsIGhpdE5vcm1hbFdvcmxkLCBoaXRQb2ludFdvcmxkLCAuLi5yZXN0IH0gPVxuICAgICAgICAgIG9wdGlvbnMucmVzdWx0XG4gICAgICAgIHNlbGYucG9zdE1lc3NhZ2Uoe1xuICAgICAgICAgIG9wOiAnZXZlbnQnLFxuICAgICAgICAgIHR5cGU6ICdyYXloaXQnLFxuICAgICAgICAgIHJheToge1xuICAgICAgICAgICAgZnJvbSxcbiAgICAgICAgICAgIHRvLFxuICAgICAgICAgICAgZGlyZWN0aW9uOiByYXkuZGlyZWN0aW9uLnRvQXJyYXkoKSxcbiAgICAgICAgICAgIGNvbGxpc2lvbkZpbHRlckdyb3VwOiByYXkuY29sbGlzaW9uRmlsdGVyR3JvdXAsXG4gICAgICAgICAgICBjb2xsaXNpb25GaWx0ZXJNYXNrOiByYXkuY29sbGlzaW9uRmlsdGVyTWFzayxcbiAgICAgICAgICAgIHV1aWQsXG4gICAgICAgICAgfSxcbiAgICAgICAgICBib2R5OiBib2R5ID8gYm9keS51dWlkIDogbnVsbCxcbiAgICAgICAgICBzaGFwZTogc2hhcGUgPyB7IC4uLnNoYXBlLCBib2R5OiBib2R5LnV1aWQgfSA6IG51bGwsXG4gICAgICAgICAgcmF5RnJvbVdvcmxkOiByYXlGcm9tV29ybGQudG9BcnJheSgpLFxuICAgICAgICAgIHJheVRvV29ybGQ6IHJheVRvV29ybGQudG9BcnJheSgpLFxuICAgICAgICAgIGhpdE5vcm1hbFdvcmxkOiBoaXROb3JtYWxXb3JsZC50b0FycmF5KCksXG4gICAgICAgICAgaGl0UG9pbnRXb3JsZDogaGl0UG9pbnRXb3JsZC50b0FycmF5KCksXG4gICAgICAgICAgLi4ucmVzdCxcbiAgICAgICAgfSlcbiAgICAgIH1cbiAgICAgIHN0YXRlLndvcmxkLmFkZEV2ZW50TGlzdGVuZXIoJ3ByZVN0ZXAnLCBzdGF0ZS5yYXlzW3V1aWRdKVxuICAgICAgYnJlYWtcbiAgICB9XG4gICAgY2FzZSAncmVtb3ZlUmF5Jzoge1xuICAgICAgc3RhdGUud29ybGQucmVtb3ZlRXZlbnRMaXN0ZW5lcigncHJlU3RlcCcsIHN0YXRlLnJheXNbdXVpZF0pXG4gICAgICBkZWxldGUgc3RhdGUucmF5c1t1dWlkXVxuICAgICAgYnJlYWtcbiAgICB9XG4gICAgY2FzZSAnYWRkUmF5Y2FzdFZlaGljbGUnOiB7XG4gICAgICBjb25zdCBbY2hhc3Npc0JvZHksIHdoZWVscywgd2hlZWxJbmZvcywgaW5kZXhGb3J3YXJkQXhpcywgaW5kZXhSaWdodEF4aXMsIGluZGV4VXBBeGlzXSA9IHByb3BzXG4gICAgICBjb25zdCB2ZWhpY2xlID0gbmV3IFJheWNhc3RWZWhpY2xlKHtcbiAgICAgICAgY2hhc3Npc0JvZHk6IHN0YXRlLmJvZGllc1tjaGFzc2lzQm9keV0sXG4gICAgICAgIGluZGV4Rm9yd2FyZEF4aXM6IGluZGV4Rm9yd2FyZEF4aXMsXG4gICAgICAgIGluZGV4UmlnaHRBeGlzOiBpbmRleFJpZ2h0QXhpcyxcbiAgICAgICAgaW5kZXhVcEF4aXM6IGluZGV4VXBBeGlzLFxuICAgICAgfSlcbiAgICAgIHZlaGljbGUud29ybGQgPSBzdGF0ZS53b3JsZFxuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB3aGVlbEluZm9zLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGNvbnN0IHdoZWVsSW5mbyA9IHdoZWVsSW5mb3NbaV1cbiAgICAgICAgd2hlZWxJbmZvLmRpcmVjdGlvbkxvY2FsID0gbmV3IFZlYzMoLi4ud2hlZWxJbmZvLmRpcmVjdGlvbkxvY2FsKVxuICAgICAgICB3aGVlbEluZm8uY2hhc3Npc0Nvbm5lY3Rpb25Qb2ludExvY2FsID0gbmV3IFZlYzMoLi4ud2hlZWxJbmZvLmNoYXNzaXNDb25uZWN0aW9uUG9pbnRMb2NhbClcbiAgICAgICAgd2hlZWxJbmZvLmF4bGVMb2NhbCA9IG5ldyBWZWMzKC4uLndoZWVsSW5mby5heGxlTG9jYWwpXG4gICAgICAgIHZlaGljbGUuYWRkV2hlZWwod2hlZWxJbmZvKVxuICAgICAgfVxuXG4gICAgICB2ZWhpY2xlLnByZVN0ZXAgPSAoKSA9PiB7XG4gICAgICAgIHN0YXRlLnZlaGljbGVzW3V1aWRdLnVwZGF0ZVZlaGljbGUoc3RhdGUud29ybGQuZHQpXG4gICAgICB9XG4gICAgICA7KHZlaGljbGUucG9zdFN0ZXAgPSAoKSA9PiB7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc3RhdGUudmVoaWNsZXNbdXVpZF0ud2hlZWxJbmZvcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIHN0YXRlLnZlaGljbGVzW3V1aWRdLnVwZGF0ZVdoZWVsVHJhbnNmb3JtKGkpXG4gICAgICAgICAgY29uc3QgdCA9IHN0YXRlLnZlaGljbGVzW3V1aWRdLndoZWVsSW5mb3NbaV0ud29ybGRUcmFuc2Zvcm1cbiAgICAgICAgICBjb25zdCB3aGVlbEJvZHkgPSBzdGF0ZS5ib2RpZXNbd2hlZWxzW2ldXVxuICAgICAgICAgIHdoZWVsQm9keS5wb3NpdGlvbi5jb3B5KHQucG9zaXRpb24pXG4gICAgICAgICAgd2hlZWxCb2R5LnF1YXRlcm5pb24uY29weSh0LnF1YXRlcm5pb24pXG4gICAgICAgIH1cbiAgICAgIH0pLFxuICAgICAgICAoc3RhdGUudmVoaWNsZXNbdXVpZF0gPSB2ZWhpY2xlKVxuICAgICAgc3RhdGUud29ybGQuYWRkRXZlbnRMaXN0ZW5lcigncHJlU3RlcCcsIHN0YXRlLnZlaGljbGVzW3V1aWRdLnByZVN0ZXApXG4gICAgICBzdGF0ZS53b3JsZC5hZGRFdmVudExpc3RlbmVyKCdwb3N0U3RlcCcsIHN0YXRlLnZlaGljbGVzW3V1aWRdLnBvc3RTdGVwKVxuICAgICAgYnJlYWtcbiAgICB9XG4gICAgY2FzZSAncmVtb3ZlUmF5Y2FzdFZlaGljbGUnOiB7XG4gICAgICBzdGF0ZS53b3JsZC5yZW1vdmVFdmVudExpc3RlbmVyKCdwcmVTdGVwJywgc3RhdGUudmVoaWNsZXNbdXVpZF0ucHJlU3RlcClcbiAgICAgIHN0YXRlLndvcmxkLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3Bvc3RTdGVwJywgc3RhdGUudmVoaWNsZXNbdXVpZF0ucG9zdFN0ZXApXG4gICAgICBzdGF0ZS52ZWhpY2xlc1t1dWlkXS53b3JsZCA9IG51bGxcbiAgICAgIGRlbGV0ZSBzdGF0ZS52ZWhpY2xlc1t1dWlkXVxuICAgICAgYnJlYWtcbiAgICB9XG4gICAgY2FzZSAnc2V0UmF5Y2FzdFZlaGljbGVTdGVlcmluZ1ZhbHVlJzoge1xuICAgICAgY29uc3QgW3ZhbHVlLCB3aGVlbEluZGV4XSA9IHByb3BzXG4gICAgICBzdGF0ZS52ZWhpY2xlc1t1dWlkXS5zZXRTdGVlcmluZ1ZhbHVlKHZhbHVlLCB3aGVlbEluZGV4KVxuICAgICAgYnJlYWtcbiAgICB9XG4gICAgY2FzZSAnYXBwbHlSYXljYXN0VmVoaWNsZUVuZ2luZUZvcmNlJzoge1xuICAgICAgY29uc3QgW3ZhbHVlLCB3aGVlbEluZGV4XSA9IHByb3BzXG4gICAgICBzdGF0ZS52ZWhpY2xlc1t1dWlkXS5hcHBseUVuZ2luZUZvcmNlKHZhbHVlLCB3aGVlbEluZGV4KVxuICAgICAgYnJlYWtcbiAgICB9XG4gICAgY2FzZSAnc2V0UmF5Y2FzdFZlaGljbGVCcmFrZSc6IHtcbiAgICAgIGNvbnN0IFticmFrZSwgd2hlZWxJbmRleF0gPSBwcm9wc1xuICAgICAgc3RhdGUudmVoaWNsZXNbdXVpZF0uc2V0QnJha2UoYnJha2UsIHdoZWVsSW5kZXgpXG4gICAgICBicmVha1xuICAgIH1cblxuICAgIGNhc2UgJ3dha2VVcCc6IHtcbiAgICAgIHN0YXRlLmJvZGllc1t1dWlkXS53YWtlVXAoKVxuICAgICAgYnJlYWtcbiAgICB9XG4gICAgY2FzZSAnc2xlZXAnOiB7XG4gICAgICBzdGF0ZS5ib2RpZXNbdXVpZF0uc2xlZXAoKVxuICAgICAgYnJlYWtcbiAgICB9XG4gIH1cbn1cbiJdLCJuYW1lcyI6WyJNYXQzIiwiY29uc3RydWN0b3IiLCJlbGVtZW50cyIsImlkZW50aXR5IiwiZSIsInNldFplcm8iLCJzZXRUcmFjZSIsInZlY3RvciIsIngiLCJ5IiwieiIsImdldFRyYWNlIiwidGFyZ2V0IiwiVmVjMyIsInZtdWx0IiwidiIsInNtdWx0IiwicyIsImkiLCJsZW5ndGgiLCJtbXVsdCIsIm1hdHJpeCIsIkEiLCJCIiwiVCIsImExMSIsImExMiIsImExMyIsImEyMSIsImEyMiIsImEyMyIsImEzMSIsImEzMiIsImEzMyIsImIxMSIsImIxMiIsImIxMyIsImIyMSIsImIyMiIsImIyMyIsImIzMSIsImIzMiIsImIzMyIsInNjYWxlIiwidCIsInNvbHZlIiwiYiIsIm5yIiwibmMiLCJlcW5zIiwiaiIsInB1c2giLCJuIiwiayIsIm5wIiwia3AiLCJwIiwibXVsdGlwbGllciIsImlzTmFOIiwiSW5maW5pdHkiLCJ0b1N0cmluZyIsInJvdyIsImNvbHVtbiIsInZhbHVlIiwidW5kZWZpbmVkIiwiY29weSIsInIiLCJzZXAiLCJyZXZlcnNlIiwicmV2ZXJzZV9lcW5zIiwic2V0Um90YXRpb25Gcm9tUXVhdGVybmlvbiIsInEiLCJ3IiwieDIiLCJ5MiIsInoyIiwieHgiLCJ4eSIsInh6IiwieXkiLCJ5eiIsInp6Iiwid3giLCJ3eSIsInd6IiwidHJhbnNwb3NlIiwiTSIsInRtcCIsImNyb3NzIiwidngiLCJ2eSIsInZ6Iiwic2V0IiwidmFkZCIsInZzdWIiLCJjcm9zc21hdCIsIm5vcm1hbGl6ZSIsIk1hdGgiLCJzcXJ0IiwiaW52TiIsInVuaXQiLCJuaW52IiwibGVuZ3RoU3F1YXJlZCIsImRvdCIsImRpc3RhbmNlVG8iLCJweCIsInB5IiwicHoiLCJkaXN0YW5jZVNxdWFyZWQiLCJzY2FsYXIiLCJ2bXVsIiwiYWRkU2NhbGVkVmVjdG9yIiwiaXNaZXJvIiwibmVnYXRlIiwidGFuZ2VudHMiLCJ0MSIsInQyIiwibm9ybSIsIlZlYzNfdGFuZ2VudHNfbiIsImlub3JtIiwicmFuZFZlYyIsIlZlYzNfdGFuZ2VudHNfcmFuZFZlYyIsImFicyIsInRvQXJyYXkiLCJsZXJwIiwiYWxtb3N0RXF1YWxzIiwicHJlY2lzaW9uIiwiYWxtb3N0WmVybyIsImlzQW50aXBhcmFsbGVsVG8iLCJhbnRpcF9uZWciLCJjbG9uZSIsIlpFUk8iLCJVTklUX1giLCJVTklUX1kiLCJVTklUX1oiLCJBQUJCIiwib3B0aW9ucyIsImxvd2VyQm91bmQiLCJ1cHBlckJvdW5kIiwic2V0RnJvbVBvaW50cyIsInBvaW50cyIsInBvc2l0aW9uIiwicXVhdGVybmlvbiIsInNraW5TaXplIiwibCIsInUiLCJ0bXAkMSIsImFhYmIiLCJleHRlbmQiLCJtaW4iLCJtYXgiLCJvdmVybGFwcyIsImwxIiwidTEiLCJsMiIsInUyIiwib3ZlcmxhcHNYIiwib3ZlcmxhcHNZIiwib3ZlcmxhcHNaIiwidm9sdW1lIiwiY29udGFpbnMiLCJnZXRDb3JuZXJzIiwiYSIsImMiLCJkIiwiZiIsImciLCJoIiwidG9Mb2NhbEZyYW1lIiwiZnJhbWUiLCJjb3JuZXJzIiwidHJhbnNmb3JtSW50b0ZyYW1lX2Nvcm5lcnMiLCJjb3JuZXIiLCJwb2ludFRvTG9jYWwiLCJ0b1dvcmxkRnJhbWUiLCJwb2ludFRvV29ybGQiLCJvdmVybGFwc1JheSIsInJheSIsImRpcmVjdGlvbiIsImZyb20iLCJkaXJGcmFjWCIsImRpckZyYWNZIiwiZGlyRnJhY1oiLCJ0MyIsInQ0IiwidDUiLCJ0NiIsInRtaW4iLCJ0bWF4IiwiQXJyYXlDb2xsaXNpb25NYXRyaXgiLCJnZXQiLCJiaSIsImJqIiwiaW5kZXgiLCJ0ZW1wIiwicmVzZXQiLCJzZXROdW1PYmplY3RzIiwiRXZlbnRUYXJnZXQiLCJfbGlzdGVuZXJzIiwiYWRkRXZlbnRMaXN0ZW5lciIsInR5cGUiLCJsaXN0ZW5lciIsImxpc3RlbmVycyIsImluY2x1ZGVzIiwiaGFzRXZlbnRMaXN0ZW5lciIsImhhc0FueUV2ZW50TGlzdGVuZXIiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiaW5kZXhPZiIsInNwbGljZSIsImRpc3BhdGNoRXZlbnQiLCJldmVudCIsImxpc3RlbmVyQXJyYXkiLCJjYWxsIiwiUXVhdGVybmlvbiIsInNldEZyb21BeGlzQW5nbGUiLCJhbmdsZSIsInNpbiIsImNvcyIsInRvQXhpc0FuZ2xlIiwidGFyZ2V0QXhpcyIsImFjb3MiLCJzZXRGcm9tVmVjdG9ycyIsInNmdl90MSIsInNmdl90MiIsIlBJIiwibXVsdCIsInF1YXQiLCJheCIsImF5IiwiYXoiLCJhdyIsImJ4IiwiYnkiLCJieiIsImJ3IiwiaW52ZXJzZSIsImNvbmp1Z2F0ZSIsImlub3JtMiIsIm5vcm1hbGl6ZUZhc3QiLCJxeCIsInF5IiwicXoiLCJxdyIsIml4IiwiaXkiLCJpeiIsIml3IiwidG9FdWxlciIsIm9yZGVyIiwiaGVhZGluZyIsImF0dGl0dWRlIiwiYmFuayIsInRlc3QiLCJhdGFuMiIsInNxeCIsInNxeSIsInNxeiIsImFzaW4iLCJFcnJvciIsInNldEZyb21FdWxlciIsImMxIiwiYzIiLCJjMyIsInMxIiwiczIiLCJzMyIsInNsZXJwIiwidG9RdWF0Iiwib21lZ2EiLCJjb3NvbSIsInNpbm9tIiwic2NhbGUwIiwic2NhbGUxIiwiaW50ZWdyYXRlIiwiYW5ndWxhclZlbG9jaXR5IiwiZHQiLCJhbmd1bGFyRmFjdG9yIiwiaGFsZl9kdCIsIlNIQVBFX1RZUEVTIiwiU1BIRVJFIiwiUExBTkUiLCJCT1giLCJDT01QT1VORCIsIkNPTlZFWFBPTFlIRURST04iLCJIRUlHSFRGSUVMRCIsIlBBUlRJQ0xFIiwiQ1lMSU5ERVIiLCJUUklNRVNIIiwiU2hhcGUiLCJpZCIsImJvdW5kaW5nU3BoZXJlUmFkaXVzIiwiY29sbGlzaW9uUmVzcG9uc2UiLCJjb2xsaXNpb25GaWx0ZXJHcm91cCIsImNvbGxpc2lvbkZpbHRlck1hc2siLCJtYXRlcmlhbCIsImJvZHkiLCJpZENvdW50ZXIiLCJ1cGRhdGVCb3VuZGluZ1NwaGVyZVJhZGl1cyIsImNhbGN1bGF0ZUxvY2FsSW5lcnRpYSIsIm1hc3MiLCJjYWxjdWxhdGVXb3JsZEFBQkIiLCJwb3MiLCJ0eXBlcyIsIlRyYW5zZm9ybSIsIndvcmxkUG9pbnQiLCJyZXN1bHQiLCJwb2ludFRvTG9jYWxGcmFtZSIsImxvY2FsUG9pbnQiLCJwb2ludFRvV29ybGRGcmFtZSIsInZlY3RvclRvV29ybGRGcmFtZSIsImxvY2FsVmVjdG9yIiwidG1wUXVhdCQxIiwidmVjdG9yVG9Mb2NhbEZyYW1lIiwid29ybGRWZWN0b3IiLCJDb252ZXhQb2x5aGVkcm9uIiwicHJvcHMiLCJ2ZXJ0aWNlcyIsImZhY2VzIiwibm9ybWFscyIsImF4ZXMiLCJmYWNlTm9ybWFscyIsIndvcmxkVmVydGljZXMiLCJ3b3JsZFZlcnRpY2VzTmVlZHNVcGRhdGUiLCJ3b3JsZEZhY2VOb3JtYWxzIiwid29ybGRGYWNlTm9ybWFsc05lZWRzVXBkYXRlIiwidW5pcXVlQXhlcyIsInVuaXF1ZUVkZ2VzIiwiY29tcHV0ZU5vcm1hbHMiLCJzbGljZSIsImNvbXB1dGVFZGdlcyIsImVkZ2VzIiwiZWRnZSIsImZhY2UiLCJudW1WZXJ0aWNlcyIsImZvdW5kIiwiZ2V0RmFjZU5vcm1hbCIsInZlcnRleCIsImNvbnNvbGUiLCJlcnJvciIsIndhcm4iLCJ2YSIsInZiIiwidmMiLCJjb21wdXRlTm9ybWFsIiwiY2IiLCJhYiIsImNsaXBBZ2FpbnN0SHVsbCIsInBvc0EiLCJxdWF0QSIsImh1bGxCIiwicG9zQiIsInF1YXRCIiwic2VwYXJhdGluZ05vcm1hbCIsIm1pbkRpc3QiLCJtYXhEaXN0IiwiV29ybGROb3JtYWwiLCJjbG9zZXN0RmFjZUIiLCJkbWF4IiwiTnVtYmVyIiwiTUFYX1ZBTFVFIiwid29ybGRWZXJ0c0IxIiwid29ybGRiIiwiY2xpcEZhY2VBZ2FpbnN0SHVsbCIsImZpbmRTZXBhcmF0aW5nQXhpcyIsImZhY2VMaXN0QSIsImZhY2VMaXN0QiIsImZhY2VBTm9ybWFsV1MzIiwiV29ybGRub3JtYWwxIiwiZGVsdGFDIiwid29ybGRFZGdlMCIsIndvcmxkRWRnZTEiLCJDcm9zcyIsImRtaW4iLCJodWxsQSIsIm51bUZhY2VzQSIsImZpIiwidGVzdFNlcEF4aXMiLCJudW1GYWNlc0IiLCJlMCIsImUxIiwiZGlzdCIsImF4aXMiLCJwcm9qZWN0IiwibWF4bWluQSIsIm1heG1pbkIiLCJtYXhBIiwibWluQSIsIm1heEIiLCJtaW5CIiwiZDAiLCJkMSIsImRlcHRoIiwiYWFiYm1heCIsImFhYmJtaW4iLCJjb21wdXRlTG9jYWxBQUJCIiwiZ2V0UGxhbmVDb25zdGFudE9mRmFjZSIsImZhY2VfaSIsImZhY2VBTm9ybWFsV1MiLCJlZGdlMCIsIldvcmxkRWRnZTAiLCJ3b3JsZFBsYW5lQW5vcm1hbDEiLCJwbGFuZU5vcm1hbFdTMSIsIndvcmxkQTEiLCJsb2NhbFBsYW5lTm9ybWFsIiwicGxhbmVOb3JtYWxXUyIsIndvcmxkVmVydHNCMiIsInBWdHhJbiIsInBWdHhPdXQiLCJjbG9zZXN0RmFjZUEiLCJwb2x5QSIsImNvbm5lY3RlZEZhY2VzIiwibnVtVmVydGljZXNBIiwib3RoZXJGYWNlIiwibG9jYWxQbGFuZUVxIiwicGxhbmVFcVdTIiwiY2xpcEZhY2VBZ2FpbnN0UGxhbmUiLCJzaGlmdCIsImxvZyIsInBvaW50Iiwibm9ybWFsIiwiaW5WZXJ0aWNlcyIsIm91dFZlcnRpY2VzIiwicGxhbmVOb3JtYWwiLCJwbGFuZUNvbnN0YW50Iiwibl9kb3RfZmlyc3QiLCJuX2RvdF9sYXN0IiwibnVtVmVydHMiLCJmaXJzdFZlcnRleCIsImxhc3RWZXJ0ZXgiLCJ2aSIsIm5ld3YiLCJjb21wdXRlV29ybGRWZXJ0aWNlcyIsInZlcnRzIiwid29ybGRWZXJ0cyIsImNvbXB1dGVXb3JsZEZhY2VOb3JtYWxzIiwiTiIsIndvcmxkTm9ybWFscyIsIm1heDIiLCJub3JtMiIsIm1pbngiLCJtaW55IiwibWlueiIsIm1heHgiLCJtYXh5IiwibWF4eiIsInRlbXBXb3JsZFZlcnRleCIsImdldEF2ZXJhZ2VQb2ludExvY2FsIiwidHJhbnNmb3JtQWxsUG9pbnRzIiwib2Zmc2V0IiwicG9pbnRJc0luc2lkZSIsInBvaW50SW5zaWRlIiwidlRvUCIsInIxIiwidlRvUG9pbnRJbnNpZGUiLCJyMiIsInNoYXBlIiwibG9jYWxBeGlzIiwicHJvamVjdF9sb2NhbEF4aXMiLCJsb2NhbE9yaWdpbiIsInByb2plY3RfbG9jYWxPcmlnaW4iLCJ2cyIsImFkZCIsInZhbCIsIkJveCIsImhhbGZFeHRlbnRzIiwiY29udmV4UG9seWhlZHJvblJlcHJlc2VudGF0aW9uIiwidXBkYXRlQ29udmV4UG9seWhlZHJvblJlcHJlc2VudGF0aW9uIiwic3giLCJzeSIsInN6IiwiViIsImNhbGN1bGF0ZUluZXJ0aWEiLCJnZXRTaWRlTm9ybWFscyIsInNpeFRhcmdldFZlY3RvcnMiLCJzaWRlcyIsImV4IiwiZm9yRWFjaFdvcmxkQ29ybmVyIiwiY2FsbGJhY2siLCJ3b3JsZENvcm5lclRlbXBQb3MiLCJ3b3JsZENvcm5lcnNUZW1wIiwid2MiLCJCT0RZX1RZUEVTIiwiRFlOQU1JQyIsIlNUQVRJQyIsIktJTkVNQVRJQyIsIkJPRFlfU0xFRVBfU1RBVEVTIiwiQVdBS0UiLCJTTEVFUFkiLCJTTEVFUElORyIsIkJvZHkiLCJ3b3JsZCIsInByZVN0ZXAiLCJwb3N0U3RlcCIsInZsYW1iZGEiLCJwcmV2aW91c1Bvc2l0aW9uIiwiaW50ZXJwb2xhdGVkUG9zaXRpb24iLCJpbml0UG9zaXRpb24iLCJ2ZWxvY2l0eSIsImluaXRWZWxvY2l0eSIsImZvcmNlIiwiaW52TWFzcyIsImxpbmVhckRhbXBpbmciLCJhbGxvd1NsZWVwIiwic2xlZXBTdGF0ZSIsInNsZWVwU3BlZWRMaW1pdCIsInNsZWVwVGltZUxpbWl0IiwidGltZUxhc3RTbGVlcHkiLCJ3YWtlVXBBZnRlck5hcnJvd3BoYXNlIiwidG9ycXVlIiwiaW5pdFF1YXRlcm5pb24iLCJwcmV2aW91c1F1YXRlcm5pb24iLCJpbnRlcnBvbGF0ZWRRdWF0ZXJuaW9uIiwiaW5pdEFuZ3VsYXJWZWxvY2l0eSIsInNoYXBlcyIsInNoYXBlT2Zmc2V0cyIsInNoYXBlT3JpZW50YXRpb25zIiwiaW5lcnRpYSIsImludkluZXJ0aWEiLCJpbnZJbmVydGlhV29ybGQiLCJpbnZNYXNzU29sdmUiLCJpbnZJbmVydGlhU29sdmUiLCJpbnZJbmVydGlhV29ybGRTb2x2ZSIsImZpeGVkUm90YXRpb24iLCJhbmd1bGFyRGFtcGluZyIsImxpbmVhckZhY3RvciIsImFhYmJOZWVkc1VwZGF0ZSIsImJvdW5kaW5nUmFkaXVzIiwid2xhbWJkYSIsImlzVHJpZ2dlciIsIkJvb2xlYW4iLCJhZGRTaGFwZSIsInVwZGF0ZU1hc3NQcm9wZXJ0aWVzIiwid2FrZVVwIiwicHJldlN0YXRlIiwid2FrZXVwRXZlbnQiLCJzbGVlcCIsInNsZWVwVGljayIsInRpbWUiLCJzcGVlZFNxdWFyZWQiLCJzcGVlZExpbWl0U3F1YXJlZCIsInNsZWVweUV2ZW50Iiwic2xlZXBFdmVudCIsInVwZGF0ZVNvbHZlTWFzc1Byb3BlcnRpZXMiLCJfb2Zmc2V0IiwiX29yaWVudGF0aW9uIiwib3JpZW50YXRpb24iLCJ1cGRhdGVCb3VuZGluZ1JhZGl1cyIsInJlbW92ZVNoYXBlIiwicmFkaXVzIiwidXBkYXRlQUFCQiIsInRtcFZlYyIsInRtcFF1YXQiLCJib2R5UXVhdCIsInNoYXBlQUFCQiIsInVwZGF0ZUFBQkJfc2hhcGVBQUJCIiwidXBkYXRlSW5lcnRpYVdvcmxkIiwiSSIsIm0xIiwidWl3X20xIiwibTIiLCJ1aXdfbTIiLCJhcHBseUZvcmNlIiwicmVsYXRpdmVQb2ludCIsInJvdEZvcmNlIiwiQm9keV9hcHBseUZvcmNlX3JvdEZvcmNlIiwiYXBwbHlMb2NhbEZvcmNlIiwibG9jYWxGb3JjZSIsIndvcmxkRm9yY2UiLCJCb2R5X2FwcGx5TG9jYWxGb3JjZV93b3JsZEZvcmNlIiwicmVsYXRpdmVQb2ludFdvcmxkIiwiQm9keV9hcHBseUxvY2FsRm9yY2VfcmVsYXRpdmVQb2ludFdvcmxkIiwiYXBwbHlUb3JxdWUiLCJhcHBseUltcHVsc2UiLCJpbXB1bHNlIiwidmVsbyIsIkJvZHlfYXBwbHlJbXB1bHNlX3ZlbG8iLCJyb3RWZWxvIiwiQm9keV9hcHBseUltcHVsc2Vfcm90VmVsbyIsImFwcGx5TG9jYWxJbXB1bHNlIiwibG9jYWxJbXB1bHNlIiwid29ybGRJbXB1bHNlIiwiQm9keV9hcHBseUxvY2FsSW1wdWxzZV93b3JsZEltcHVsc2UiLCJCb2R5X2FwcGx5TG9jYWxJbXB1bHNlX3JlbGF0aXZlUG9pbnQiLCJCb2R5X3VwZGF0ZU1hc3NQcm9wZXJ0aWVzX2hhbGZFeHRlbnRzIiwiZml4ZWQiLCJnZXRWZWxvY2l0eUF0V29ybGRQb2ludCIsInF1YXROb3JtYWxpemUiLCJxdWF0Tm9ybWFsaXplRmFzdCIsImFuZ3VsYXJWZWxvIiwiaU1kdCIsInR4IiwidHkiLCJ0eiIsIkNPTExJREVfRVZFTlRfTkFNRSIsIkJyb2FkcGhhc2UiLCJ1c2VCb3VuZGluZ0JveGVzIiwiZGlydHkiLCJjb2xsaXNpb25QYWlycyIsInAxIiwicDIiLCJuZWVkQnJvYWRwaGFzZUNvbGxpc2lvbiIsImJvZHlBIiwiYm9keUIiLCJpbnRlcnNlY3Rpb25UZXN0IiwicGFpcnMxIiwicGFpcnMyIiwiZG9Cb3VuZGluZ0JveEJyb2FkcGhhc2UiLCJkb0JvdW5kaW5nU3BoZXJlQnJvYWRwaGFzZSIsIkJyb2FkcGhhc2VfY29sbGlzaW9uUGFpcnNfciIsImJvdW5kaW5nUmFkaXVzU3VtMiIsIm1ha2VQYWlyc1VuaXF1ZSIsIkJyb2FkcGhhc2VfbWFrZVBhaXJzVW5pcXVlX3RlbXAiLCJCcm9hZHBoYXNlX21ha2VQYWlyc1VuaXF1ZV9wMSIsIkJyb2FkcGhhc2VfbWFrZVBhaXJzVW5pcXVlX3AyIiwiaWQxIiwiaWQyIiwia2V5Iiwia2V5cyIsInBvcCIsInBhaXJJbmRleCIsInNldFdvcmxkIiwiYm91bmRpbmdTcGhlcmVDaGVjayIsInNhIiwic2IiLCJwb3ciLCJhYWJiUXVlcnkiLCJOYWl2ZUJyb2FkcGhhc2UiLCJib2RpZXMiLCJSYXljYXN0UmVzdWx0IiwicmF5RnJvbVdvcmxkIiwicmF5VG9Xb3JsZCIsImhpdE5vcm1hbFdvcmxkIiwiaGl0UG9pbnRXb3JsZCIsImhhc0hpdCIsImhpdEZhY2VJbmRleCIsImRpc3RhbmNlIiwic2hvdWxkU3RvcCIsImFib3J0IiwiX1NoYXBlJHR5cGVzJFNQSEVSRSIsIl9TaGFwZSR0eXBlcyRQTEFORSIsIl9TaGFwZSR0eXBlcyRCT1giLCJfU2hhcGUkdHlwZXMkQ1lMSU5ERVIiLCJfU2hhcGUkdHlwZXMkQ09OVkVYUE8iLCJfU2hhcGUkdHlwZXMkSEVJR0hURkkiLCJfU2hhcGUkdHlwZXMkVFJJTUVTSCIsIlJBWV9NT0RFUyIsIkNMT1NFU1QiLCJBTlkiLCJBTEwiLCJSYXkiLCJfaW50ZXJzZWN0U3BoZXJlIiwiX2ludGVyc2VjdFBsYW5lIiwiX2ludGVyc2VjdEJveCIsIl9pbnRlcnNlY3RDb252ZXgiLCJfaW50ZXJzZWN0SGVpZ2h0ZmllbGQiLCJfaW50ZXJzZWN0VHJpbWVzaCIsInRvIiwiY2hlY2tDb2xsaXNpb25SZXNwb25zZSIsInNraXBCYWNrZmFjZXMiLCJtb2RlIiwiaW50ZXJzZWN0V29ybGQiLCJ1cGRhdGVEaXJlY3Rpb24iLCJnZXRBQUJCIiwidG1wQUFCQiQxIiwidG1wQXJyYXkiLCJicm9hZHBoYXNlIiwiaW50ZXJzZWN0Qm9kaWVzIiwiaW50ZXJzZWN0Qm9keSIsInhpIiwiaW50ZXJzZWN0Qm9keV94aSIsInFpIiwiaW50ZXJzZWN0Qm9keV9xaSIsImludGVyc2VjdFNoYXBlIiwiZGlzdGFuY2VGcm9tSW50ZXJzZWN0aW9uIiwiaW50ZXJzZWN0TWV0aG9kIiwiYm94IiwicmVwb3J0ZWRTaGFwZSIsIndvcmxkTm9ybWFsIiwibGVuIiwicGxhbmVUb0Zyb20iLCJwbGFuZVRvVG8iLCJuX2RvdF9kaXIiLCJwbGFuZVBvaW50VG9Gcm9tIiwiZGlyX3NjYWxlZF93aXRoX3QiLCJyZXBvcnRJbnRlcnNlY3Rpb24iLCJkYXRhIiwiZWxlbWVudFNpemUiLCJsb2NhbFJheSIsImludGVyc2VjdEhlaWdodGZpZWxkX2xvY2FsUmF5IiwiaW50ZXJzZWN0SGVpZ2h0ZmllbGRfaW5kZXgiLCJpTWluWCIsImlNaW5ZIiwiaU1heFgiLCJpTWF4WSIsImdldEluZGV4T2ZQb3NpdGlvbiIsImdldEFhYmJBdEluZGV4IiwiZ2V0Q29udmV4VHJpYW5nbGVQaWxsYXIiLCJwaWxsYXJPZmZzZXQiLCJ3b3JsZFBpbGxhck9mZnNldCIsInBpbGxhckNvbnZleCIsImludGVyc2VjdENvbnZleE9wdGlvbnMiLCJzcGhlcmUiLCJkZWx0YSIsImludGVyc2VjdGlvblBvaW50IiwiUmF5X2ludGVyc2VjdFNwaGVyZV9pbnRlcnNlY3Rpb25Qb2ludCIsIlJheV9pbnRlcnNlY3RTcGhlcmVfbm9ybWFsIiwiZDIiLCJpbnRlcnNlY3RDb252ZXhfbm9ybWFsIiwiaW50ZXJzZWN0Q29udmV4X3ZlY3RvciIsImZhY2VMaXN0IiwiZnJvbVRvRGlzdGFuY2UiLCJOZmFjZXMiLCJmYWNlTm9ybWFsIiwiaW50ZXJzZWN0UG9pbnQiLCJwb2ludEluVHJpYW5nbGUiLCJtZXNoIiwiaW50ZXJzZWN0VHJpbWVzaF9ub3JtYWwiLCJ0cmlhbmdsZXMiLCJpbnRlcnNlY3RUcmltZXNoX3RyaWFuZ2xlcyIsInRyZWVUcmFuc2Zvcm0iLCJpbnRlcnNlY3RUcmltZXNoX3RyZWVUcmFuc2Zvcm0iLCJsb2NhbERpcmVjdGlvbiIsImludGVyc2VjdFRyaW1lc2hfbG9jYWxEaXJlY3Rpb24iLCJsb2NhbEZyb20iLCJpbnRlcnNlY3RUcmltZXNoX2xvY2FsRnJvbSIsImxvY2FsVG8iLCJpbnRlcnNlY3RUcmltZXNoX2xvY2FsVG8iLCJ3b3JsZEludGVyc2VjdFBvaW50IiwiaW50ZXJzZWN0VHJpbWVzaF93b3JsZEludGVyc2VjdFBvaW50IiwiaW50ZXJzZWN0VHJpbWVzaF93b3JsZE5vcm1hbCIsImluZGljZXMiLCJmcm9tVG9EaXN0YW5jZVNxdWFyZWQiLCJ0cmVlIiwicmF5UXVlcnkiLCJ0cmlhbmdsZXNJbmRleCIsImdldE5vcm1hbCIsImdldFZlcnRleCIsInNxdWFyZWREaXN0YW5jZSIsInYwIiwidjEiLCJ2MiIsImRvdDAwIiwiZG90MDEiLCJkb3QwMiIsImRvdDExIiwiZG90MTIiLCJpbnRlcnNlY3QiLCJTQVBCcm9hZHBoYXNlIiwiY2hlY2tCb3VuZHMiLCJheGlzSW5kZXgiLCJiaVBvcyIsImJqUG9zIiwicmkiLCJyaiIsImJvdW5kQTIiLCJib3VuZEIxIiwiaW5zZXJ0aW9uU29ydFgiLCJpbnNlcnRpb25Tb3J0WSIsImluc2VydGlvblNvcnRaIiwiYXhpc0xpc3QiLCJfYWRkQm9keUhhbmRsZXIiLCJfcmVtb3ZlQm9keUhhbmRsZXIiLCJpZHgiLCJzb3J0TGlzdCIsImF1dG9EZXRlY3RBeGlzIiwic3VtWCIsInN1bVgyIiwic3VtWSIsInN1bVkyIiwic3VtWiIsInN1bVoyIiwiY2VudGVyWCIsImNlbnRlclkiLCJjZW50ZXJaIiwidmFyaWFuY2VYIiwidmFyaWFuY2VZIiwidmFyaWFuY2VaIiwiVXRpbHMiLCJkZWZhdWx0cyIsIkNvbnN0cmFpbnQiLCJlcXVhdGlvbnMiLCJjb2xsaWRlQ29ubmVjdGVkIiwid2FrZVVwQm9kaWVzIiwidXBkYXRlIiwiZW5hYmxlIiwiZXFzIiwiZW5hYmxlZCIsImRpc2FibGUiLCJKYWNvYmlhbkVsZW1lbnQiLCJzcGF0aWFsIiwicm90YXRpb25hbCIsIm11bHRpcGx5RWxlbWVudCIsImVsZW1lbnQiLCJtdWx0aXBseVZlY3RvcnMiLCJFcXVhdGlvbiIsIm1pbkZvcmNlIiwibWF4Rm9yY2UiLCJzaSIsInNqIiwiZXBzIiwiamFjb2JpYW5FbGVtZW50QSIsImphY29iaWFuRWxlbWVudEIiLCJzZXRTcG9va1BhcmFtcyIsInN0aWZmbmVzcyIsInJlbGF4YXRpb24iLCJ0aW1lU3RlcCIsImNvbXB1dGVCIiwiR1ciLCJjb21wdXRlR1ciLCJHcSIsImNvbXB1dGVHcSIsIkdpTWYiLCJjb21wdXRlR2lNZiIsIkdBIiwiR0IiLCJ4aiIsInZqIiwid2kiLCJ3aiIsImNvbXB1dGVHV2xhbWJkYSIsInRpIiwiZmoiLCJ0aiIsImludk1hc3NpIiwiaW52TWFzc2oiLCJpTWZpIiwiaU1maiIsImludklpX3ZtdWx0X3RhdWkiLCJpbnZJal92bXVsdF90YXVqIiwiY29tcHV0ZUdpTUd0IiwiaW52SWkiLCJpbnZJaiIsImFkZFRvV2xhbWJkYSIsImRlbHRhbGFtYmRhIiwiYWRkVG9XbGFtYmRhX3RlbXAiLCJjb21wdXRlQyIsIkNvbnRhY3RFcXVhdGlvbiIsInJlc3RpdHV0aW9uIiwibmkiLCJyaXhuIiwiQ29udGFjdEVxdWF0aW9uX2NvbXB1dGVCX3RlbXAxIiwicmp4biIsIkNvbnRhY3RFcXVhdGlvbl9jb21wdXRlQl90ZW1wMiIsInBlbmV0cmF0aW9uVmVjIiwiQ29udGFjdEVxdWF0aW9uX2NvbXB1dGVCX3RlbXAzIiwiZVBsdXNPbmUiLCJnZXRJbXBhY3RWZWxvY2l0eUFsb25nTm9ybWFsIiwiQ29udGFjdEVxdWF0aW9uX2dldEltcGFjdFZlbG9jaXR5QWxvbmdOb3JtYWxfdmkiLCJDb250YWN0RXF1YXRpb25fZ2V0SW1wYWN0VmVsb2NpdHlBbG9uZ05vcm1hbF92aiIsIkNvbnRhY3RFcXVhdGlvbl9nZXRJbXBhY3RWZWxvY2l0eUFsb25nTm9ybWFsX3hpIiwiQ29udGFjdEVxdWF0aW9uX2dldEltcGFjdFZlbG9jaXR5QWxvbmdOb3JtYWxfeGoiLCJyZWxWZWwiLCJDb250YWN0RXF1YXRpb25fZ2V0SW1wYWN0VmVsb2NpdHlBbG9uZ05vcm1hbF9yZWxWZWwiLCJQb2ludFRvUG9pbnRDb25zdHJhaW50IiwicGl2b3RBIiwicGl2b3RCIiwiZXF1YXRpb25YIiwiZXF1YXRpb25ZIiwiZXF1YXRpb25aIiwiQ29uZUVxdWF0aW9uIiwiYXhpc0EiLCJheGlzQiIsIm5qIiwibml4bmoiLCJ0bXBWZWMxJDIiLCJuanhuaSIsInRtcFZlYzIkMiIsIlJvdGF0aW9uYWxFcXVhdGlvbiIsIm1heEFuZ2xlIiwidG1wVmVjMSQxIiwidG1wVmVjMiQxIiwiQ29uZVR3aXN0Q29uc3RyYWludCIsInR3aXN0QW5nbGUiLCJjb25lRXF1YXRpb24iLCJ0d2lzdEVxdWF0aW9uIiwiY29uZSIsInR3aXN0IiwiRGlzdGFuY2VDb25zdHJhaW50IiwiZGlzdGFuY2VFcXVhdGlvbiIsImVxIiwiaGFsZkRpc3QiLCJMb2NrQ29uc3RyYWludCIsImhhbGZXYXkiLCJ4QSIsInhCIiwieUEiLCJ5QiIsInpBIiwiekIiLCJyb3RhdGlvbmFsRXF1YXRpb24xIiwicm90YXRpb25hbEVxdWF0aW9uMiIsInJvdGF0aW9uYWxFcXVhdGlvbjMiLCJtb3RvckVxdWF0aW9uIiwicjMiLCJSb3RhdGlvbmFsTW90b3JFcXVhdGlvbiIsInRhcmdldFZlbG9jaXR5IiwiSGluZ2VDb25zdHJhaW50Iiwicm90YXRpb25hbDEiLCJyb3RhdGlvbmFsMiIsIm1vdG9yIiwiZW5hYmxlTW90b3IiLCJkaXNhYmxlTW90b3IiLCJzZXRNb3RvclNwZWVkIiwic3BlZWQiLCJzZXRNb3Rvck1heEZvcmNlIiwid29ybGRBeGlzQSIsIkhpbmdlQ29uc3RyYWludF91cGRhdGVfdG1wVmVjMSIsIndvcmxkQXhpc0IiLCJIaW5nZUNvbnN0cmFpbnRfdXBkYXRlX3RtcFZlYzIiLCJGcmljdGlvbkVxdWF0aW9uIiwic2xpcEZvcmNlIiwicml4dCIsIkZyaWN0aW9uRXF1YXRpb25fY29tcHV0ZUJfdGVtcDEiLCJyanh0IiwiRnJpY3Rpb25FcXVhdGlvbl9jb21wdXRlQl90ZW1wMiIsIkNvbnRhY3RNYXRlcmlhbCIsIm1hdGVyaWFscyIsImZyaWN0aW9uIiwiY29udGFjdEVxdWF0aW9uU3RpZmZuZXNzIiwiY29udGFjdEVxdWF0aW9uUmVsYXhhdGlvbiIsImZyaWN0aW9uRXF1YXRpb25TdGlmZm5lc3MiLCJmcmljdGlvbkVxdWF0aW9uUmVsYXhhdGlvbiIsIk1hdGVyaWFsIiwibmFtZSIsIlNwcmluZyIsInJlc3RMZW5ndGgiLCJkYW1waW5nIiwibG9jYWxBbmNob3JBIiwibG9jYWxBbmNob3JCIiwid29ybGRBbmNob3JBIiwic2V0V29ybGRBbmNob3JBIiwid29ybGRBbmNob3JCIiwic2V0V29ybGRBbmNob3JCIiwiZ2V0V29ybGRBbmNob3JBIiwiZ2V0V29ybGRBbmNob3JCIiwiYXBwbHlGb3JjZV9yIiwicl91bml0IiwiYXBwbHlGb3JjZV9yX3VuaXQiLCJhcHBseUZvcmNlX3UiLCJhcHBseUZvcmNlX2YiLCJhcHBseUZvcmNlX3RtcCIsImFwcGx5Rm9yY2Vfd29ybGRBbmNob3JBIiwiYXBwbHlGb3JjZV93b3JsZEFuY2hvckIiLCJhcHBseUZvcmNlX3JpIiwiYXBwbHlGb3JjZV9yaiIsInJpX3hfZiIsImFwcGx5Rm9yY2VfcmlfeF9mIiwicmpfeF9mIiwiYXBwbHlGb3JjZV9yal94X2YiLCJybGVuIiwiV2hlZWxJbmZvIiwibWF4U3VzcGVuc2lvblRyYXZlbCIsImN1c3RvbVNsaWRpbmdSb3RhdGlvbmFsU3BlZWQiLCJ1c2VDdXN0b21TbGlkaW5nUm90YXRpb25hbFNwZWVkIiwic2xpZGluZyIsImNoYXNzaXNDb25uZWN0aW9uUG9pbnRMb2NhbCIsImNoYXNzaXNDb25uZWN0aW9uUG9pbnRXb3JsZCIsImRpcmVjdGlvbkxvY2FsIiwiZGlyZWN0aW9uV29ybGQiLCJheGxlTG9jYWwiLCJheGxlV29ybGQiLCJzdXNwZW5zaW9uUmVzdExlbmd0aCIsInN1c3BlbnNpb25NYXhMZW5ndGgiLCJzdXNwZW5zaW9uU3RpZmZuZXNzIiwiZGFtcGluZ0NvbXByZXNzaW9uIiwiZGFtcGluZ1JlbGF4YXRpb24iLCJmcmljdGlvblNsaXAiLCJmb3J3YXJkQWNjZWxlcmF0aW9uIiwic2lkZUFjY2VsZXJhdGlvbiIsInN0ZWVyaW5nIiwicm90YXRpb24iLCJkZWx0YVJvdGF0aW9uIiwicm9sbEluZmx1ZW5jZSIsIm1heFN1c3BlbnNpb25Gb3JjZSIsImVuZ2luZUZvcmNlIiwiYnJha2UiLCJpc0Zyb250V2hlZWwiLCJjbGlwcGVkSW52Q29udGFjdERvdFN1c3BlbnNpb24iLCJzdXNwZW5zaW9uUmVsYXRpdmVWZWxvY2l0eSIsInN1c3BlbnNpb25Gb3JjZSIsInNsaXBJbmZvIiwic2tpZEluZm8iLCJzdXNwZW5zaW9uTGVuZ3RoIiwic2lkZUltcHVsc2UiLCJmb3J3YXJkSW1wdWxzZSIsInJheWNhc3RSZXN1bHQiLCJ3b3JsZFRyYW5zZm9ybSIsImlzSW5Db250YWN0IiwidXBkYXRlV2hlZWwiLCJjaGFzc2lzIiwicmVscG9zIiwiY2hhc3Npc192ZWxvY2l0eV9hdF9jb250YWN0UG9pbnQiLCJwcm9qVmVsIiwiaW52IiwiUmF5Y2FzdFZlaGljbGUiLCJjaGFzc2lzQm9keSIsIndoZWVsSW5mb3MiLCJpbmRleFJpZ2h0QXhpcyIsImluZGV4Rm9yd2FyZEF4aXMiLCJpbmRleFVwQXhpcyIsImNvbnN0cmFpbnRzIiwicHJlU3RlcENhbGxiYWNrIiwiY3VycmVudFZlaGljbGVTcGVlZEttSG91ciIsIm51bVdoZWVsc09uR3JvdW5kIiwiYWRkV2hlZWwiLCJpbmZvIiwic2V0U3RlZXJpbmdWYWx1ZSIsIndoZWVsSW5kZXgiLCJ3aGVlbCIsImFwcGx5RW5naW5lRm9yY2UiLCJzZXRCcmFrZSIsImFkZFRvV29ybGQiLCJhZGRCb2R5IiwidGhhdCIsInVwZGF0ZVZlaGljbGUiLCJnZXRWZWhpY2xlQXhpc1dvcmxkIiwibnVtV2hlZWxzIiwidXBkYXRlV2hlZWxUcmFuc2Zvcm0iLCJmb3J3YXJkV29ybGQiLCJjYXN0UmF5IiwidXBkYXRlU3VzcGVuc2lvbiIsInVwZGF0ZUZyaWN0aW9uIiwiaGl0Tm9ybWFsV29ybGRTY2FsZWRXaXRoUHJvaiIsImZ3ZCIsInZlbCIsIm0iLCJwcm9qIiwicHJvajIiLCJkZWx0YVRpbWUiLCJjaGFzc2lzTWFzcyIsIndfaXQiLCJzdXNwX2xlbmd0aCIsImN1cnJlbnRfbGVuZ3RoIiwibGVuZ3RoX2RpZmYiLCJwcm9qZWN0ZWRfcmVsX3ZlbCIsInN1c3BfZGFtcGluZyIsInJlbW92ZUZyb21Xb3JsZCIsInJlbW92ZUJvZHkiLCJyYXl2ZWN0b3IiLCJjYXN0UmF5X3JheXZlY3RvciIsImNhc3RSYXlfdGFyZ2V0IiwidXBkYXRlV2hlZWxUcmFuc2Zvcm1Xb3JsZCIsInJheWxlbiIsInNvdXJjZSIsIm9sZFN0YXRlIiwicmF5VGVzdCIsIm9iamVjdCIsImdyb3VuZE9iamVjdCIsImhpdERpc3RhbmNlIiwibWluU3VzcGVuc2lvbkxlbmd0aCIsIm1heFN1c3BlbnNpb25MZW5ndGgiLCJkZW5vbWluYXRvciIsInVwIiwidG1wVmVjNCIsInJpZ2h0IiwidG1wVmVjNSIsInRtcFZlYzYiLCJzdGVlcmluZ09ybiIsInJvdGF0aW5nT3JuIiwiZ2V0V2hlZWxUcmFuc2Zvcm1Xb3JsZCIsInN1cmZOb3JtYWxXU19zY2FsZWRfcHJvaiIsInVwZGF0ZUZyaWN0aW9uX3N1cmZOb3JtYWxXU19zY2FsZWRfcHJvaiIsImZvcndhcmRXUyIsInVwZGF0ZUZyaWN0aW9uX2ZvcndhcmRXUyIsImF4bGUiLCJ1cGRhdGVGcmljdGlvbl9heGxlIiwiYXhsZWkiLCJ3aGVlbFRyYW5zIiwiZGlyZWN0aW9ucyIsInN1cmZOb3JtYWxXUyIsInJlc29sdmVTaW5nbGVCaWxhdGVyYWwiLCJzaWRlRnJpY3Rpb25TdGlmZm5lc3MyIiwic2lkZUZhY3RvciIsImZ3ZEZhY3RvciIsInJvbGxpbmdGcmljdGlvbiIsImRlZmF1bHRSb2xsaW5nRnJpY3Rpb25JbXB1bHNlIiwibWF4SW1wdWxzZSIsImNhbGNSb2xsaW5nRnJpY3Rpb24iLCJmYWN0b3IiLCJtYXhpbXAiLCJtYXhpbXBTaWRlIiwibWF4aW1wU3F1YXJlZCIsImltcHVsc2VTcXVhcmVkIiwicmVsX3BvcyIsInJlbF9wb3MyIiwic2lkZUltcCIsImNhbGNSb2xsaW5nRnJpY3Rpb25fdmVsMSIsImNhbGNSb2xsaW5nRnJpY3Rpb25fdmVsMiIsImNhbGNSb2xsaW5nRnJpY3Rpb25fdmVsIiwiYm9keTAiLCJib2R5MSIsImZyaWN0aW9uUG9zV29ybGQiLCJmcmljdGlvbkRpcmVjdGlvbldvcmxkIiwiajEiLCJjb250YWN0UG9zV29ybGQiLCJ2ZWwxIiwidmVsMiIsInZyZWwiLCJkZW5vbTAiLCJjb21wdXRlSW1wdWxzZURlbm9taW5hdG9yIiwiZGVub20xIiwiamFjRGlhZ0FCSW52IiwiY29tcHV0ZUltcHVsc2VEZW5vbWluYXRvcl9yMCIsImNvbXB1dGVJbXB1bHNlRGVub21pbmF0b3JfYzAiLCJjb21wdXRlSW1wdWxzZURlbm9taW5hdG9yX3ZlYyIsImNvbXB1dGVJbXB1bHNlRGVub21pbmF0b3JfbSIsInIwIiwiYzAiLCJ2ZWMiLCJyZXNvbHZlU2luZ2xlQmlsYXRlcmFsX3ZlbDEiLCJyZXNvbHZlU2luZ2xlQmlsYXRlcmFsX3ZlbDIiLCJyZXNvbHZlU2luZ2xlQmlsYXRlcmFsX3ZlbCIsInBvczEiLCJib2R5MiIsInBvczIiLCJub3JtYWxMZW5TcXIiLCJyZWxfdmVsIiwiY29udGFjdERhbXBpbmciLCJtYXNzVGVybSIsIlNwaGVyZSIsIkN5bGluZGVyIiwicmFkaXVzVG9wIiwicmFkaXVzQm90dG9tIiwiaGVpZ2h0IiwibnVtU2VnbWVudHMiLCJib3R0b21mYWNlIiwidG9wZmFjZSIsInRoZXRhIiwidGhldGFOIiwiUGFydGljbGUiLCJQbGFuZSIsIndvcmxkTm9ybWFsTmVlZHNVcGRhdGUiLCJjb21wdXRlV29ybGROb3JtYWwiLCJ0ZW1wTm9ybWFsIiwibWF4VmFsIiwiSGVpZ2h0ZmllbGQiLCJtYXhWYWx1ZSIsIm1pblZhbHVlIiwiY2FjaGVFbmFibGVkIiwiX2NhY2hlZFBpbGxhcnMiLCJ1cGRhdGVNaW5WYWx1ZSIsInVwZGF0ZU1heFZhbHVlIiwic2V0SGVpZ2h0VmFsdWVBdEluZGV4IiwieWkiLCJjbGVhckNhY2hlZENvbnZleFRyaWFuZ2xlUGlsbGFyIiwiZ2V0UmVjdE1pbk1heCIsImNsYW1wIiwiZmxvb3IiLCJnZXRUcmlhbmdsZUF0IiwiZWRnZUNsYW1wIiwiZ2V0SGVpZ2h0QXRfaWR4IiwibG93ZXJEaXN0MiIsInVwcGVyRGlzdDIiLCJ1cHBlciIsImdldFRyaWFuZ2xlIiwiZ2V0Tm9ybWFsQXQiLCJnZXROb3JtYWxBdF9hIiwiZ2V0Tm9ybWFsQXRfYiIsImdldE5vcm1hbEF0X2MiLCJnZXROb3JtYWxBdF9lMCIsImdldE5vcm1hbEF0X2UxIiwiZ2V0SGVpZ2h0QXQiLCJnZXRIZWlnaHRBdF9hIiwiZ2V0SGVpZ2h0QXRfYiIsImdldEhlaWdodEF0X2MiLCJiYXJ5Y2VudHJpY1dlaWdodHMiLCJnZXRIZWlnaHRBdF93ZWlnaHRzIiwiZ2V0Q2FjaGVDb252ZXhUcmlhbmdsZVBpbGxhcktleSIsImdldFVwcGVyVHJpYW5nbGUiLCJnZXRDYWNoZWRDb252ZXhUcmlhbmdsZVBpbGxhciIsInNldENhY2hlZENvbnZleFRyaWFuZ2xlUGlsbGFyIiwiY29udmV4Iiwib2Zmc2V0UmVzdWx0Iiwic2V0SGVpZ2h0c0Zyb21JbWFnZSIsImltYWdlIiwiY2FudmFzIiwiZG9jdW1lbnQiLCJjcmVhdGVFbGVtZW50Iiwid2lkdGgiLCJjb250ZXh0IiwiZ2V0Q29udGV4dCIsImRyYXdJbWFnZSIsImltYWdlRGF0YSIsImdldEltYWdlRGF0YSIsInVuc2hpZnQiLCJjeCIsImN5IiwiT2N0cmVlTm9kZSIsInJvb3QiLCJjaGlsZHJlbiIsImluc2VydCIsImVsZW1lbnREYXRhIiwibGV2ZWwiLCJub2RlRGF0YSIsIm1heERlcHRoIiwic3ViZGl2aWRlZCIsInN1YmRpdmlkZSIsImhhbGZEaWFnb25hbCIsImNoaWxkIiwicXVldWUiLCJub2RlIiwiQXJyYXkiLCJwcm90b3R5cGUiLCJhcHBseSIsInRtcEFBQkIiLCJyZW1vdmVFbXB0eU5vZGVzIiwiT2N0cmVlIiwiVHJpbWVzaCIsIkZsb2F0MzJBcnJheSIsIkludDE2QXJyYXkiLCJ1cGRhdGVFZGdlcyIsInVwZGF0ZU5vcm1hbHMiLCJ1cGRhdGVUcmVlIiwidHJpYW5nbGVBQUJCIiwiaTMiLCJfZ2V0VW5zY2FsZWRWZXJ0ZXgiLCJnZXRUcmlhbmdsZXNJbkFBQkIiLCJ1bnNjYWxlZEFBQkIiLCJpc3giLCJpc3kiLCJpc3oiLCJzZXRTY2FsZSIsIndhc1VuaWZvcm0iLCJpc1VuaWZvcm0iLCJjb21wdXRlTm9ybWFsc19uIiwiT2JqZWN0Iiwic3BsaXQiLCJwYXJzZUludCIsImdldEVkZ2VWZXJ0ZXgiLCJlZGdlSW5kZXgiLCJmaXJzdE9yU2Vjb25kIiwidmVydGV4U3RvcmUiLCJ2ZXJ0ZXhJbmRleCIsImdldEVkZ2VWZWN0b3IiLCJ2ZWN0b3JTdG9yZSIsImdldEVkZ2VWZWN0b3JfdmEiLCJnZXRFZGdlVmVjdG9yX3ZiIiwib3V0IiwiZ2V0V29ybGRWZXJ0ZXgiLCJnZXRUcmlhbmdsZVZlcnRpY2VzIiwiY2xpX2FhYmIiLCJjb21wdXRlTG9jYWxBQUJCX3dvcmxkVmVydCIsImNhbGN1bGF0ZVdvcmxkQUFCQl9mcmFtZSIsImNhbGN1bGF0ZVdvcmxkQUFCQl9hYWJiIiwiY3JlYXRlVG9ydXMiLCJ0dWJlIiwicmFkaWFsU2VnbWVudHMiLCJ0dWJ1bGFyU2VnbWVudHMiLCJhcmMiLCJTb2x2ZXIiLCJhZGRFcXVhdGlvbiIsInJlbW92ZUVxdWF0aW9uIiwicmVtb3ZlQWxsRXF1YXRpb25zIiwiR1NTb2x2ZXIiLCJpdGVyYXRpb25zIiwidG9sZXJhbmNlIiwiaXRlciIsIm1heEl0ZXIiLCJ0b2xTcXVhcmVkIiwiTmVxIiwiTmJvZGllcyIsImludkMiLCJkZWx0YWxhbWJkYVRvdCIsIkdXbGFtYmRhIiwibGFtYmRhaiIsImludkNzIiwiR1NTb2x2ZXJfc29sdmVfaW52Q3MiLCJCcyIsIkdTU29sdmVyX3NvbHZlX0JzIiwibGFtYmRhIiwiR1NTb2x2ZXJfc29sdmVfbGFtYmRhIiwiaW52RHQiLCJTcGxpdFNvbHZlciIsInN1YnNvbHZlciIsIm5vZGVzIiwibm9kZVBvb2wiLCJjcmVhdGVOb2RlIiwidmlzaXRlZCIsIlNwbGl0U29sdmVyX3NvbHZlX25vZGVzIiwiU3BsaXRTb2x2ZXJfc29sdmVfZXFzIiwiZHVtbXlXb3JsZCIsIlNwbGl0U29sdmVyX3NvbHZlX2R1bW15V29ybGQiLCJnZXRVbnZpc2l0ZWROb2RlIiwiYmZzIiwidmlzaXRGdW5jIiwiTmVxcyIsInNvcnQiLCJzb3J0QnlJZCIsIk5ub2RlcyIsImJkcyIsIlBvb2wiLCJvYmplY3RzIiwicmVsZWFzZSIsIk5hcmdzIiwiY29uc3RydWN0T2JqZWN0IiwicmVzaXplIiwic2l6ZSIsIlZlYzNQb29sIiwiX0NPTExJU0lPTl9UWVBFUyRzcGhlIiwiX0NPTExJU0lPTl9UWVBFUyRzcGhlMiIsIl9DT0xMSVNJT05fVFlQRVMkYm94QiIsIl9DT0xMSVNJT05fVFlQRVMkc3BoZTMiLCJfQ09MTElTSU9OX1RZUEVTJHBsYW4iLCJfQ09MTElTSU9OX1RZUEVTJGNvbnYiLCJfQ09MTElTSU9OX1RZUEVTJHNwaGU0IiwiX0NPTExJU0lPTl9UWVBFUyRwbGFuMiIsIl9DT0xMSVNJT05fVFlQRVMkYm94QyIsIl9DT0xMSVNJT05fVFlQRVMkc3BoZTUiLCJfQ09MTElTSU9OX1RZUEVTJGJveEgiLCJfQ09MTElTSU9OX1RZUEVTJGNvbnYyIiwiX0NPTExJU0lPTl9UWVBFUyRzcGhlNiIsIl9DT0xMSVNJT05fVFlQRVMkcGxhbjMiLCJfQ09MTElTSU9OX1RZUEVTJGJveFAiLCJfQ09MTElTSU9OX1RZUEVTJGNvbnYzIiwiX0NPTExJU0lPTl9UWVBFUyRjeWxpIiwiX0NPTExJU0lPTl9UWVBFUyRzcGhlNyIsIl9DT0xMSVNJT05fVFlQRVMkcGxhbjQiLCJfQ09MTElTSU9OX1RZUEVTJGJveEMyIiwiX0NPTExJU0lPTl9UWVBFUyRjb252NCIsIl9DT0xMSVNJT05fVFlQRVMkaGVpZyIsIl9DT0xMSVNJT05fVFlQRVMkcGFydCIsIl9DT0xMSVNJT05fVFlQRVMkc3BoZTgiLCJfQ09MTElTSU9OX1RZUEVTJHBsYW41IiwiQ09MTElTSU9OX1RZUEVTIiwic3BoZXJlU3BoZXJlIiwic3BoZXJlUGxhbmUiLCJib3hCb3giLCJzcGhlcmVCb3giLCJwbGFuZUJveCIsImNvbnZleENvbnZleCIsInNwaGVyZUNvbnZleCIsInBsYW5lQ29udmV4IiwiYm94Q29udmV4Iiwic3BoZXJlSGVpZ2h0ZmllbGQiLCJib3hIZWlnaHRmaWVsZCIsImNvbnZleEhlaWdodGZpZWxkIiwic3BoZXJlUGFydGljbGUiLCJwbGFuZVBhcnRpY2xlIiwiYm94UGFydGljbGUiLCJjb252ZXhQYXJ0aWNsZSIsImN5bGluZGVyQ3lsaW5kZXIiLCJzcGhlcmVDeWxpbmRlciIsInBsYW5lQ3lsaW5kZXIiLCJib3hDeWxpbmRlciIsImNvbnZleEN5bGluZGVyIiwiaGVpZ2h0ZmllbGRDeWxpbmRlciIsInBhcnRpY2xlQ3lsaW5kZXIiLCJzcGhlcmVUcmltZXNoIiwicGxhbmVUcmltZXNoIiwiTmFycm93cGhhc2UiLCJjb250YWN0UG9pbnRQb29sIiwiZnJpY3Rpb25FcXVhdGlvblBvb2wiLCJmcmljdGlvblJlc3VsdCIsInYzcG9vbCIsImN1cnJlbnRDb250YWN0TWF0ZXJpYWwiLCJlbmFibGVGcmljdGlvblJlZHVjdGlvbiIsImRlZmF1bHRDb250YWN0TWF0ZXJpYWwiLCJjcmVhdGVDb250YWN0RXF1YXRpb24iLCJvdmVycmlkZVNoYXBlQSIsIm92ZXJyaWRlU2hhcGVCIiwiY20iLCJtYXRBIiwibWF0QiIsImNyZWF0ZUZyaWN0aW9uRXF1YXRpb25zRnJvbUNvbnRhY3QiLCJjb250YWN0RXF1YXRpb24iLCJvdXRBcnJheSIsInNoYXBlQSIsInNoYXBlQiIsIm11ZyIsImdyYXZpdHkiLCJyZWR1Y2VkTWFzcyIsInBvb2wiLCJjcmVhdGVGcmljdGlvbkZyb21BdmVyYWdlIiwibnVtQ29udGFjdHMiLCJmMSIsImYyIiwiYXZlcmFnZU5vcm1hbCIsImF2ZXJhZ2VDb250YWN0UG9pbnRBIiwiYXZlcmFnZUNvbnRhY3RQb2ludEIiLCJpbnZOdW1Db250YWN0cyIsImdldENvbnRhY3RzIiwib2xkY29udGFjdHMiLCJmcmljdGlvblBvb2wiLCJ0bXBRdWF0MSIsInFqIiwidG1wUXVhdDIiLCJ0bXBWZWMxIiwidG1wVmVjMiIsImJvZHlDb250YWN0TWF0ZXJpYWwiLCJnZXRDb250YWN0TWF0ZXJpYWwiLCJqdXN0VGVzdCIsInNoYXBlQ29udGFjdE1hdGVyaWFsIiwicmVzb2x2ZXJJbmRleCIsInJlc29sdmVyIiwicmV0dmFsIiwic2hhcGVPdmVybGFwS2VlcGVyIiwiYm9keU92ZXJsYXBLZWVwZXIiLCJyc2kiLCJyc2oiLCJjb250YWN0RXEiLCJwb2ludF9vbl9wbGFuZV90b19zcGhlcmUiLCJwbGFuZV90b19zcGhlcmVfb3J0aG8iLCJzcGhlcmVCb3hfc2lkZXMiLCJib3hfdG9fc3BoZXJlIiwiUiIsInNpZGVfbnMiLCJzcGhlcmVCb3hfc2lkZV9ucyIsInNpZGVfbnMxIiwic3BoZXJlQm94X3NpZGVfbnMxIiwic2lkZV9uczIiLCJzcGhlcmVCb3hfc2lkZV9uczIiLCJzaWRlX2giLCJzaWRlX3BlbmV0cmF0aW9ucyIsInNpZGVfZG90MSIsInNpZGVfZG90MiIsInNpZGVfZGlzdGFuY2UiLCJuc2lkZXMiLCJucyIsInNwaGVyZUJveF9ucyIsIm5zMSIsInNwaGVyZUJveF9uczEiLCJuczIiLCJzcGhlcmVCb3hfbnMyIiwiaDEiLCJoMiIsImRvdDEiLCJkb3QyIiwic3BoZXJlX3RvX2Nvcm5lciIsInNwaGVyZUJveF9zcGhlcmVfdG9fY29ybmVyIiwiZWRnZVRhbmdlbnQiLCJlZGdlQ2VudGVyIiwib3J0aG9nb25hbCIsIk5zaWRlcyIsIm9ydGhvbm9ybSIsInRkaXN0IiwibmRpc3QiLCJyZXMiLCJzZXBBeGlzIiwiY29udmV4Q29udmV4X3NlcEF4aXMiLCJjb252ZXhDb252ZXhfcSIsImNvbnZleF90b19zcGhlcmUiLCJ3b3JsZENvcm5lciIsInNwaGVyZUNvbnZleF93b3JsZENvcm5lciIsInNwaGVyZUNvbnZleF9zcGhlcmVUb0Nvcm5lciIsIm5mYWNlcyIsInNwaGVyZUNvbnZleF93b3JsZE5vcm1hbCIsInNwaGVyZUNvbnZleF93b3JsZFBvaW50Iiwid29ybGRTcGhlcmVQb2ludENsb3Nlc3RUb1BsYW5lIiwic3BoZXJlQ29udmV4X3dvcmxkU3BoZXJlUG9pbnRDbG9zZXN0VG9QbGFuZSIsInNwaGVyZUNvbnZleF9wZW5ldHJhdGlvblZlYyIsInBlbmV0cmF0aW9uIiwid29ybGRQb2ludFRvU3BoZXJlIiwic3BoZXJlQ29udmV4X3NwaGVyZVRvV29ybGRQb2ludCIsImZhY2VWZXJ0cyIsIk52ZXJ0cyIsIndvcmxkVmVydGV4IiwicG9pbnRJblBvbHlnb24iLCJwZW5ldHJhdGlvblZlYzIiLCJwZW5ldHJhdGlvblNwaGVyZVBvaW50IiwiTmZhY2V2ZXJ0cyIsInNwaGVyZUNvbnZleF9lZGdlIiwiZWRnZVVuaXQiLCJzcGhlcmVDb252ZXhfZWRnZVVuaXQiLCJ2MV90b194aSIsInhpX3RvX3AiLCJwbGFuZVNoYXBlIiwiY29udmV4U2hhcGUiLCJwbGFuZVBvc2l0aW9uIiwiY29udmV4UG9zaXRpb24iLCJwbGFuZVF1YXQiLCJjb252ZXhRdWF0IiwicGxhbmVCb2R5IiwiY29udmV4Qm9keSIsInBsYW5lQ29udmV4X3YiLCJwbGFuZUNvbnZleF9ub3JtYWwiLCJwbGFuZUNvbnZleF9yZWxwb3MiLCJwcm9qZWN0ZWQiLCJwbGFuZUNvbnZleF9wcm9qZWN0ZWQiLCJzcGhlcmVTaGFwZSIsImhmU2hhcGUiLCJzcGhlcmVQb3MiLCJoZlBvcyIsInNwaGVyZVF1YXQiLCJoZlF1YXQiLCJzcGhlcmVCb2R5IiwiaGZCb2R5Iiwic3BoZXJlSGVpZ2h0ZmllbGRfdG1wMiIsImxvY2FsU3BoZXJlUG9zIiwic3BoZXJlSGVpZ2h0ZmllbGRfdG1wMSIsImNlaWwiLCJtaW5NYXgiLCJudW1Db250YWN0c0JlZm9yZSIsImludGVyc2VjdGluZyIsImNvbnZleFBvcyIsImNvbnZleEhlaWdodGZpZWxkX3RtcDIiLCJjb252ZXhIZWlnaHRmaWVsZF9mYWNlTGlzdCIsImxvY2FsQ29udmV4UG9zIiwiY29udmV4SGVpZ2h0ZmllbGRfdG1wMSIsInBhcnRpY2xlU3BoZXJlX25vcm1hbCIsInBhcnRpY2xlUGxhbmVfbm9ybWFsIiwicGFydGljbGVQbGFuZV9yZWxwb3MiLCJwYXJ0aWNsZVBsYW5lX3Byb2plY3RlZCIsInBlbmV0cmF0ZWRGYWNlSW5kZXgiLCJwZW5ldHJhdGVkRmFjZU5vcm1hbCIsImNvbnZleFBhcnRpY2xlX3BlbmV0cmF0ZWRGYWNlTm9ybWFsIiwid29ybGRQZW5ldHJhdGlvblZlYyIsImNvbnZleFBhcnRpY2xlX3dvcmxkUGVuZXRyYXRpb25WZWMiLCJtaW5QZW5ldHJhdGlvbiIsImxvY2FsIiwiY29udmV4UGFydGljbGVfbG9jYWwiLCJjcWoiLCJjb252ZXhQYXJ0aWNsZV92ZXJ0ZXhUb1BhcnRpY2xlIiwidHJpbWVzaFNoYXBlIiwidHJpbWVzaFBvcyIsInRyaW1lc2hRdWF0IiwidHJpbWVzaEJvZHkiLCJlZGdlVmVydGV4QSIsInNwaGVyZVRyaW1lc2hfZWRnZVZlcnRleEEiLCJlZGdlVmVydGV4QiIsInNwaGVyZVRyaW1lc2hfZWRnZVZlcnRleEIiLCJlZGdlVmVjdG9yIiwic3BoZXJlVHJpbWVzaF9lZGdlVmVjdG9yIiwiZWRnZVZlY3RvclVuaXQiLCJzcGhlcmVUcmltZXNoX2VkZ2VWZWN0b3JVbml0Iiwic3BoZXJlVHJpbWVzaF9sb2NhbFNwaGVyZVBvcyIsInNwaGVyZVRyaW1lc2hfdG1wIiwibG9jYWxTcGhlcmVBQUJCIiwic3BoZXJlVHJpbWVzaF9sb2NhbFNwaGVyZUFBQkIiLCJzcGhlcmVUcmltZXNoX3YyIiwic3BoZXJlVHJpbWVzaF9yZWxwb3MiLCJzcGhlcmVUcmltZXNoX3RyaWFuZ2xlcyIsInNwaGVyZVJhZGl1cyIsInNwaGVyZVRyaW1lc2hfdiIsInJhZGl1c1NxdWFyZWQiLCJwb3NpdGlvbkFsb25nRWRnZUIiLCJwb3NpdGlvbkFsb25nRWRnZUEiLCJzcGhlcmVUcmltZXNoX3ZhIiwic3BoZXJlVHJpbWVzaF92YiIsInNwaGVyZVRyaW1lc2hfdmMiLCJzcGhlcmVUcmltZXNoX25vcm1hbCIsInBsYW5lUG9zIiwicGxhbmVUcmltZXNoX25vcm1hbCIsInBsYW5lVHJpbWVzaF9yZWxwb3MiLCJwbGFuZVRyaW1lc2hfcHJvamVjdGVkIiwicG9pbnRJblBvbHlnb25fZWRnZSIsInBvaW50SW5Qb2x5Z29uX2VkZ2VfeF9ub3JtYWwiLCJwb2ludEluUG9seWdvbl92dHAiLCJwb3NpdGl2ZVJlc3VsdCIsImVkZ2VfeF9ub3JtYWwiLCJ2ZXJ0ZXhfdG9fcCIsIk92ZXJsYXBLZWVwZXIiLCJjdXJyZW50IiwicHJldmlvdXMiLCJnZXRLZXkiLCJ0aWNrIiwiZ2V0RGlmZiIsImFkZGl0aW9ucyIsInJlbW92YWxzIiwiYWwiLCJibCIsImtleUEiLCJ1bnBhY2tBbmRQdXNoIiwia2V5QiIsImFycmF5IiwiVHVwbGVEaWN0aW9uYXJ5IiwiV29ybGQiLCJjb250YWN0cyIsImZyaWN0aW9uRXF1YXRpb25zIiwicXVhdE5vcm1hbGl6ZVNraXAiLCJzdGVwbnVtYmVyIiwiZGVmYXVsdF9kdCIsIm5leHRJZCIsImhhc0FjdGl2ZUJvZGllcyIsInNvbHZlciIsIm5hcnJvd3BoYXNlIiwiY29sbGlzaW9uTWF0cml4IiwiY29sbGlzaW9uTWF0cml4UHJldmlvdXMiLCJjb250YWN0bWF0ZXJpYWxzIiwiY29udGFjdE1hdGVyaWFsVGFibGUiLCJkZWZhdWx0TWF0ZXJpYWwiLCJkb1Byb2ZpbGluZyIsInByb2ZpbGUiLCJhY2N1bXVsYXRvciIsInN1YnN5c3RlbXMiLCJhZGRCb2R5RXZlbnQiLCJyZW1vdmVCb2R5RXZlbnQiLCJpZFRvQm9keU1hcCIsIm1ha2VDb250YWN0Q29uc3RyYWludHMiLCJudW1PYmplY3RzIiwiY29sbGlzaW9uTWF0cml4VGljayIsImFkZENvbnN0cmFpbnQiLCJyZW1vdmVDb25zdHJhaW50IiwicmF5Y2FzdENsb3Nlc3QiLCJyYXljYXN0QWxsIiwidG1wUmF5IiwicmF5Y2FzdEFueSIsImdldEJvZHlCeUlkIiwiZ2V0U2hhcGVCeUlkIiwiYWRkTWF0ZXJpYWwiLCJhZGRDb250YWN0TWF0ZXJpYWwiLCJjbWF0Iiwic3RlcCIsInRpbWVTaW5jZUxhc3RDYWxsZWQiLCJtYXhTdWJTdGVwcyIsImludGVybmFsU3RlcCIsInQwIiwicGVyZm9ybWFuY2UiLCJub3ciLCJzdWJzdGVwcyIsIldvcmxkX3N0ZXBfcDEiLCJXb3JsZF9zdGVwX3AyIiwicHJvZmlsaW5nU3RhcnQiLCJXb3JsZF9zdGVwX2ZyaWN0aW9uRXF1YXRpb25Qb29sIiwiZ3giLCJneSIsImd6IiwiTnN1YnN5c3RlbXMiLCJOY29uc3RyYWludHMiLCJXb3JsZF9zdGVwX29sZENvbnRhY3RzIiwiTm9sZENvbnRhY3RzIiwiTm9sZEZyaWN0aW9uRXF1YXRpb25zIiwibmNvbnRhY3RzIiwic3BlZWRTcXVhcmVkQiIsInNwZWVkTGltaXRTcXVhcmVkQiIsInNwZWVkU3F1YXJlZEEiLCJzcGVlZExpbWl0U3F1YXJlZEEiLCJXb3JsZF9zdGVwX2NvbGxpZGVFdmVudCIsImNvbnRhY3QiLCJlbWl0Q29udGFjdEV2ZW50cyIsImxkIiwiYXYiLCJhZCIsIldvcmxkX3N0ZXBfcHJlU3RlcEV2ZW50IiwiY2xlYXJGb3JjZXMiLCJXb3JsZF9zdGVwX3Bvc3RTdGVwRXZlbnQiLCJoYXNCZWdpbkNvbnRhY3QiLCJoYXNFbmRDb250YWN0IiwiYmVnaW5Db250YWN0RXZlbnQiLCJlbmRDb250YWN0RXZlbnQiLCJoYXNCZWdpblNoYXBlQ29udGFjdCIsImhhc0VuZFNoYXBlQ29udGFjdCIsImJlZ2luU2hhcGVDb250YWN0RXZlbnQiLCJlbmRTaGFwZUNvbnRhY3RFdmVudCIsImdsb2JhbFRoaXMiLCJub3dPZmZzZXQiLCJEYXRlIiwidGltaW5nIiwibmF2aWdhdGlvblN0YXJ0IiwibWFrZVZlYzMiLCJwcmVwYXJlU3BoZXJlIiwiYXJncyIsImlzQXJyYXkiLCJwcmVwYXJlQ29udmV4UG9seWhlZHJvbiIsIm1hcCIsImNyZWF0ZVNoYXBlIiwicHJvcHNUb0JvZHkiLCJ1dWlkIiwiYm9keVR5cGUiLCJvbkNvbGxpZGUiLCJleHRyYSIsInRvVXBwZXJDYXNlIiwiZm9yRWFjaCIsInNoYXBlQm9keSIsImFzc2lnbiIsInN0YXRlIiwidmVoaWNsZXMiLCJzcHJpbmdzIiwic3ByaW5nSW5zdGFuY2VzIiwicmF5cyIsImNvbmZpZyIsInN1YnNjcmlwdGlvbnMiLCJib2RpZXNOZWVkU3luY2luZyIsImxhc3RDYWxsVGltZSIsInN5bmNCb2RpZXMiLCJyZWR1Y2UiLCJhY2MiLCJlbWl0QmVnaW5Db250YWN0Iiwic2VsZiIsInBvc3RNZXNzYWdlIiwib3AiLCJlbWl0RW5kQ29udGFjdCIsIm9ubWVzc2FnZSIsInBvc2l0aW9ucyIsInF1YXRlcm5pb25zIiwiYnJvYWRwaGFzZXMiLCJ0aW1lU2luY2VMYXN0Q2FsbCIsIm51bWJlck9mQm9kaWVzIiwib2JzZXJ2YXRpb25zIiwibWVzc2FnZSIsImFjdGl2ZSIsImJ1ZmZlciIsImNvbnRhY3RQb2ludCIsImNvbnRhY3ROb3JtYWwiLCJpbXBhY3RWZWxvY2l0eSIsImNvbGxpc2lvbkZpbHRlcnMiLCJib2R5RmlsdGVyR3JvdXAiLCJib2R5RmlsdGVyTWFzayIsInRhcmdldEZpbHRlckdyb3VwIiwidGFyZ2V0RmlsdGVyTWFzayIsIm9wdG5zIiwiY29uc3RyYWludCIsImZpbHRlciIsInRoaXNJZCIsInNwcmluZyIsInBvc3RTdGVwU3ByaW5nIiwicmVzdCIsIndoZWVscyIsInZlaGljbGUiLCJ3aGVlbEluZm8iLCJ3aGVlbEJvZHkiXSwibWFwcGluZ3MiOiI7OztFQUFBO0VBQ0E7RUFDQTtFQTRFQTtFQUNBO0VBQ0E7RUFDQTs7O0VBQ0EsTUFBTUEsSUFBTixDQUFXO0VBQ1Q7RUFDRjtFQUNBOztFQUVFO0VBQ0Y7RUFDQTtFQUNFQyxFQUFBQSxXQUFXLENBQUNDLFFBQUQsRUFBeUM7RUFBQSxRQUF4Q0EsUUFBd0M7RUFBeENBLE1BQUFBLFFBQXdDLEdBQTdCLENBQUMsQ0FBRCxFQUFJLENBQUosRUFBTyxDQUFQLEVBQVUsQ0FBVixFQUFhLENBQWIsRUFBZ0IsQ0FBaEIsRUFBbUIsQ0FBbkIsRUFBc0IsQ0FBdEIsRUFBeUIsQ0FBekIsQ0FBNkI7RUFBQTs7RUFDbEQsU0FBS0EsUUFBTCxHQUFnQixLQUFLLENBQXJCO0VBQ0EsU0FBS0EsUUFBTCxHQUFnQkEsUUFBaEI7RUFDRDtFQUNEO0VBQ0Y7RUFDQTtFQUNBO0VBQ0E7OztFQUdFQyxFQUFBQSxRQUFRLEdBQUc7RUFDVCxVQUFNQyxDQUFDLEdBQUcsS0FBS0YsUUFBZjtFQUNBRSxJQUFBQSxDQUFDLENBQUMsQ0FBRCxDQUFELEdBQU8sQ0FBUDtFQUNBQSxJQUFBQSxDQUFDLENBQUMsQ0FBRCxDQUFELEdBQU8sQ0FBUDtFQUNBQSxJQUFBQSxDQUFDLENBQUMsQ0FBRCxDQUFELEdBQU8sQ0FBUDtFQUNBQSxJQUFBQSxDQUFDLENBQUMsQ0FBRCxDQUFELEdBQU8sQ0FBUDtFQUNBQSxJQUFBQSxDQUFDLENBQUMsQ0FBRCxDQUFELEdBQU8sQ0FBUDtFQUNBQSxJQUFBQSxDQUFDLENBQUMsQ0FBRCxDQUFELEdBQU8sQ0FBUDtFQUNBQSxJQUFBQSxDQUFDLENBQUMsQ0FBRCxDQUFELEdBQU8sQ0FBUDtFQUNBQSxJQUFBQSxDQUFDLENBQUMsQ0FBRCxDQUFELEdBQU8sQ0FBUDtFQUNBQSxJQUFBQSxDQUFDLENBQUMsQ0FBRCxDQUFELEdBQU8sQ0FBUDtFQUNEO0VBQ0Q7RUFDRjtFQUNBOzs7RUFHRUMsRUFBQUEsT0FBTyxHQUFHO0VBQ1IsVUFBTUQsQ0FBQyxHQUFHLEtBQUtGLFFBQWY7RUFDQUUsSUFBQUEsQ0FBQyxDQUFDLENBQUQsQ0FBRCxHQUFPLENBQVA7RUFDQUEsSUFBQUEsQ0FBQyxDQUFDLENBQUQsQ0FBRCxHQUFPLENBQVA7RUFDQUEsSUFBQUEsQ0FBQyxDQUFDLENBQUQsQ0FBRCxHQUFPLENBQVA7RUFDQUEsSUFBQUEsQ0FBQyxDQUFDLENBQUQsQ0FBRCxHQUFPLENBQVA7RUFDQUEsSUFBQUEsQ0FBQyxDQUFDLENBQUQsQ0FBRCxHQUFPLENBQVA7RUFDQUEsSUFBQUEsQ0FBQyxDQUFDLENBQUQsQ0FBRCxHQUFPLENBQVA7RUFDQUEsSUFBQUEsQ0FBQyxDQUFDLENBQUQsQ0FBRCxHQUFPLENBQVA7RUFDQUEsSUFBQUEsQ0FBQyxDQUFDLENBQUQsQ0FBRCxHQUFPLENBQVA7RUFDQUEsSUFBQUEsQ0FBQyxDQUFDLENBQUQsQ0FBRCxHQUFPLENBQVA7RUFDRDtFQUNEO0VBQ0Y7RUFDQTs7O0VBR0VFLEVBQUFBLFFBQVEsQ0FBQ0MsTUFBRCxFQUFTO0VBQ2YsVUFBTUgsQ0FBQyxHQUFHLEtBQUtGLFFBQWY7RUFDQUUsSUFBQUEsQ0FBQyxDQUFDLENBQUQsQ0FBRCxHQUFPRyxNQUFNLENBQUNDLENBQWQ7RUFDQUosSUFBQUEs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', false);
var CannonWorker = WorkerFactory;
/* eslint-enable */

function useUpdateWorldPropsEffect(_ref) {
  let {
    axisIndex,
    broadphase,
    gravity,
    iterations,
    step,
    tolerance,
    worker
  } = _ref;
  useEffect(() => void worker.postMessage({
    op: 'setAxisIndex',
    props: axisIndex
  }), [axisIndex]);
  useEffect(() => void worker.postMessage({
    op: 'setBroadphase',
    props: broadphase
  }), [broadphase]);
  useEffect(() => void worker.postMessage({
    op: 'setGravity',
    props: gravity
  }), [gravity]);
  useEffect(() => void worker.postMessage({
    op: 'setIterations',
    props: iterations
  }), [iterations]);
  useEffect(() => void worker.postMessage({
    op: 'setStep',
    props: step
  }), [step]);
  useEffect(() => void worker.postMessage({
    op: 'setTolerance',
    props: tolerance
  }), [tolerance]);
}

function noop() {
  /**/
}

const v$1 = new Vector3();
const s$1 = new Vector3(1, 1, 1);
const q$2 = new Quaternion$1();
const m = new Matrix4();

function apply(index, buffers, object) {
  if (index !== undefined) {
    m.compose(v$1.fromArray(buffers.positions, index * 3), q$2.fromArray(buffers.quaternions, index * 4), object ? object.scale : s$1);

    if (object) {
      object.matrixAutoUpdate = false;
      object.matrix.copy(m);
    }

    return m;
  }

  return m.identity();
}

function Provider(_ref) {
  let {
    children,
    shouldInvalidate = true,
    step = 1 / 60,
    gravity = [0, -9.81, 0],
    tolerance = 0.001,
    iterations = 5,
    allowSleep = false,
    broadphase = 'Naive',
    axisIndex = 0,
    quatNormalizeFast = false,
    quatNormalizeSkip = 0,
    solver = 'GS',
    defaultContactMaterial = {
      contactEquationStiffness: 1e6
    },
    size = 1000
  } = _ref;
  const {
    invalidate
  } = useThree();
  const [worker] = useState(() => new CannonWorker());
  const [refs] = useState({});
  const [buffers] = useState(() => ({
    positions: new Float32Array(size * 3),
    quaternions: new Float32Array(size * 4)
  }));
  const [events] = useState({});
  const [subscriptions] = useState({});
  const bodies = useRef({});
  const loop = useCallback(() => {
    if (buffers.positions.byteLength !== 0 && buffers.quaternions.byteLength !== 0) {
      worker.postMessage({
        op: 'step',
        ...buffers
      }, [buffers.positions.buffer, buffers.quaternions.buffer]);
    }
  }, []); // Run loop *after* all the physics objects have ran theirs!
  // Otherwise the buffers will be invalidated by the browser

  useFrame(loop);
  useLayoutEffect(() => {
    worker.postMessage({
      op: 'init',
      props: {
        gravity,
        tolerance,
        step,
        iterations,
        broadphase,
        allowSleep,
        axisIndex,
        defaultContactMaterial,
        quatNormalizeFast,
        quatNormalizeSkip,
        solver
      }
    });
    let i = 0;
    let body;
    let callback;

    worker.onmessage = e => {
      var _events$e$data$target, _events$e$data$bodyA, _events$e$data$bodyB, _events$e$data$bodyA2, _events$e$data$bodyB2, _events$e$data$ray$uu;

      switch (e.data.op) {
        case 'frame':
          buffers.positions = e.data.positions;
          buffers.quaternions = e.data.quaternions;

          if (e.data.bodies) {
            for (i = 0; i < e.data.bodies.length; i++) {
              body = e.data.bodies[i];
              bodies.current[body] = e.data.bodies.indexOf(body);
            }
          }

          e.data.observations.forEach(_ref2 => {
            let [id, value, type] = _ref2;
            const subscription = subscriptions[id] || {};
            callback = subscription[type] || noop; // HELP: We clearly know the type of the callback, but typescript can't deal with it

            callback(value);
          });

          if (e.data.active) {
            for (const ref of Object.values(refs)) {
              if (ref instanceof InstancedMesh) {
                for (let i = 0; i < ref.count; i++) {
                  const index = bodies.current[`${ref.uuid}/${i}`];

                  if (index !== undefined) {
                    ref.setMatrixAt(i, apply(index, buffers));
                  }

                  ref.instanceMatrix.needsUpdate = true;
                }
              } else {
                apply(bodies.current[ref.uuid], buffers, ref);
              }
            }

            if (shouldInvalidate) {
              invalidate();
            }
          }

          break;

        case 'event':
          switch (e.data.type) {
            case 'collide':
              callback = ((_events$e$data$target = events[e.data.target]) == null ? void 0 : _events$e$data$target.collide) || noop;
              callback({ ...e.data,
                target: refs[e.data.target],
                body: refs[e.data.body],
                contact: { ...e.data.contact,
                  bi: refs[e.data.contact.bi],
                  bj: refs[e.data.contact.bj]
                }
              });
              break;

            case 'collideBegin':
              callback = ((_events$e$data$bodyA = events[e.data.bodyA]) == null ? void 0 : _events$e$data$bodyA.collideBegin) || noop;
              callback({
                op: 'event',
                type: 'collideBegin',
                target: refs[e.data.bodyA],
                body: refs[e.data.bodyB]
              });
              callback = ((_events$e$data$bodyB = events[e.data.bodyB]) == null ? void 0 : _events$e$data$bodyB.collideBegin) || noop;
              callback({
                op: 'event',
                type: 'collideBegin',
                target: refs[e.data.bodyB],
                body: refs[e.data.bodyA]
              });
              break;

            case 'collideEnd':
              callback = ((_events$e$data$bodyA2 = events[e.data.bodyA]) == null ? void 0 : _events$e$data$bodyA2.collideEnd) || noop;
              callback({
                op: 'event',
                type: 'collideEnd',
                target: refs[e.data.bodyA],
                body: refs[e.data.bodyB]
              });
              callback = ((_events$e$data$bodyB2 = events[e.data.bodyB]) == null ? void 0 : _events$e$data$bodyB2.collideEnd) || noop;
              callback({
                op: 'event',
                type: 'collideEnd',
                target: refs[e.data.bodyB],
                body: refs[e.data.bodyA]
              });
              break;

            case 'rayhit':
              callback = ((_events$e$data$ray$uu = events[e.data.ray.uuid]) == null ? void 0 : _events$e$data$ray$uu.rayhit) || noop;
              callback({ ...e.data,
                body: e.data.body ? refs[e.data.body] : null
              });
              break;
          }

          break;
      }
    };

    return () => worker.terminate();
  }, []);
  useUpdateWorldPropsEffect({
    axisIndex,
    broadphase,
    gravity,
    iterations,
    step,
    tolerance,
    worker
  });
  const api = useMemo(() => ({
    worker,
    bodies,
    refs,
    buffers,
    events,
    subscriptions
  }), [worker, bodies, refs, buffers, events, subscriptions]);
  return /*#__PURE__*/React.createElement(context.Provider, {
    value: api
  }, children);
}

/**
 * Records what objects are colliding with each other
 */
/**
 * A 3x3 matrix.
 * Authored by {@link http://github.com/schteppe/ schteppe}
 */


class Mat3 {
  /**
   * A vector of length 9, containing all matrix elements.
   */

  /**
   * @param elements A vector of length 9, containing all matrix elements.
   */
  constructor(elements) {
    if (elements === void 0) {
      elements = [0, 0, 0, 0, 0, 0, 0, 0, 0];
    }

    this.elements = void 0;
    this.elements = elements;
  }
  /**
   * Sets the matrix to identity
   * @todo Should perhaps be renamed to `setIdentity()` to be more clear.
   * @todo Create another function that immediately creates an identity matrix eg. `eye()`
   */


  identity() {
    const e = this.elements;
    e[0] = 1;
    e[1] = 0;
    e[2] = 0;
    e[3] = 0;
    e[4] = 1;
    e[5] = 0;
    e[6] = 0;
    e[7] = 0;
    e[8] = 1;
  }
  /**
   * Set all elements to zero
   */


  setZero() {
    const e = this.elements;
    e[0] = 0;
    e[1] = 0;
    e[2] = 0;
    e[3] = 0;
    e[4] = 0;
    e[5] = 0;
    e[6] = 0;
    e[7] = 0;
    e[8] = 0;
  }
  /**
   * Sets the matrix diagonal elements from a Vec3
   */


  setTrace(vector) {
    const e = this.elements;
    e[0] = vector.x;
    e[4] = vector.y;
    e[8] = vector.z;
  }
  /**
   * Gets the matrix diagonal elements
   */


  getTrace(target) {
    if (target === void 0) {
      target = new Vec3();
    }

    const e = this.elements;
    target.x = e[0];
    target.y = e[4];
    target.z = e[8];
    return target;
  }
  /**
   * Matrix-Vector multiplication
   * @param v The vector to multiply with
   * @param target Optional, target to save the result in.
   */


  vmult(v, target) {
    if (target === void 0) {
      target = new Vec3();
    }

    const e = this.elements;
    const x = v.x;
    const y = v.y;
    const z = v.z;
    target.x = e[0] * x + e[1] * y + e[2] * z;
    target.y = e[3] * x + e[4] * y + e[5] * z;
    target.z = e[6] * x + e[7] * y + e[8] * z;
    return target;
  }
  /**
   * Matrix-scalar multiplication
   */


  smult(s) {
    for (let i = 0; i < this.elements.length; i++) {
      this.elements[i] *= s;
    }
  }
  /**
   * Matrix multiplication
   * @param matrix Matrix to multiply with from left side.
   */


  mmult(matrix, target) {
    if (target === void 0) {
      target = new Mat3();
    }

    const A = this.elements;
    const B = matrix.elements;
    const T = target.elements;
    const a11 = A[0],
          a12 = A[1],
          a13 = A[2],
          a21 = A[3],
          a22 = A[4],
          a23 = A[5],
          a31 = A[6],
          a32 = A[7],
          a33 = A[8];
    const b11 = B[0],
          b12 = B[1],
          b13 = B[2],
          b21 = B[3],
          b22 = B[4],
          b23 = B[5],
          b31 = B[6],
          b32 = B[7],
          b33 = B[8];
    T[0] = a11 * b11 + a12 * b21 + a13 * b31;
    T[1] = a11 * b12 + a12 * b22 + a13 * b32;
    T[2] = a11 * b13 + a12 * b23 + a13 * b33;
    T[3] = a21 * b11 + a22 * b21 + a23 * b31;
    T[4] = a21 * b12 + a22 * b22 + a23 * b32;
    T[5] = a21 * b13 + a22 * b23 + a23 * b33;
    T[6] = a31 * b11 + a32 * b21 + a33 * b31;
    T[7] = a31 * b12 + a32 * b22 + a33 * b32;
    T[8] = a31 * b13 + a32 * b23 + a33 * b33;
    return target;
  }
  /**
   * Scale each column of the matrix
   */


  scale(vector, target) {
    if (target === void 0) {
      target = new Mat3();
    }

    const e = this.elements;
    const t = target.elements;

    for (let i = 0; i !== 3; i++) {
      t[3 * i + 0] = vector.x * e[3 * i + 0];
      t[3 * i + 1] = vector.y * e[3 * i + 1];
      t[3 * i + 2] = vector.z * e[3 * i + 2];
    }

    return target;
  }
  /**
   * Solve Ax=b
   * @param b The right hand side
   * @param target Optional. Target vector to save in.
   * @return The solution x
   * @todo should reuse arrays
   */


  solve(b, target) {
    if (target === void 0) {
      target = new Vec3();
    }

    // Construct equations
    const nr = 3; // num rows

    const nc = 4; // num cols

    const eqns = [];
    let i;
    let j;

    for (i = 0; i < nr * nc; i++) {
      eqns.push(0);
    }

    for (i = 0; i < 3; i++) {
      for (j = 0; j < 3; j++) {
        eqns[i + nc * j] = this.elements[i + 3 * j];
      }
    }

    eqns[3 + 4 * 0] = b.x;
    eqns[3 + 4 * 1] = b.y;
    eqns[3 + 4 * 2] = b.z; // Compute right upper triangular version of the matrix - Gauss elimination

    let n = 3;
    const k = n;
    let np;
    const kp = 4; // num rows

    let p;

    do {
      i = k - n;

      if (eqns[i + nc * i] === 0) {
        // the pivot is null, swap lines
        for (j = i + 1; j < k; j++) {
          if (eqns[i + nc * j] !== 0) {
            np = kp;

            do {
              // do ligne( i ) = ligne( i ) + ligne( k )
              p = kp - np;
              eqns[p + nc * i] += eqns[p + nc * j];
            } while (--np);

            break;
          }
        }
      }

      if (eqns[i + nc * i] !== 0) {
        for (j = i + 1; j < k; j++) {
          const multiplier = eqns[i + nc * j] / eqns[i + nc * i];
          np = kp;

          do {
            // do ligne( k ) = ligne( k ) - multiplier * ligne( i )
            p = kp - np;
            eqns[p + nc * j] = p <= i ? 0 : eqns[p + nc * j] - eqns[p + nc * i] * multiplier;
          } while (--np);
        }
      }
    } while (--n); // Get the solution


    target.z = eqns[2 * nc + 3] / eqns[2 * nc + 2];
    target.y = (eqns[1 * nc + 3] - eqns[1 * nc + 2] * target.z) / eqns[1 * nc + 1];
    target.x = (eqns[0 * nc + 3] - eqns[0 * nc + 2] * target.z - eqns[0 * nc + 1] * target.y) / eqns[0 * nc + 0];

    if (isNaN(target.x) || isNaN(target.y) || isNaN(target.z) || target.x === Infinity || target.y === Infinity || target.z === Infinity) {
      throw "Could not solve equation! Got x=[" + target.toString() + "], b=[" + b.toString() + "], A=[" + this.toString() + "]";
    }

    return target;
  }
  /**
   * Get an element in the matrix by index. Index starts at 0, not 1!!!
   * @param value If provided, the matrix element will be set to this value.
   */


  e(row, column, value) {
    if (value === undefined) {
      return this.elements[column + 3 * row];
    } else {
      // Set value
      this.elements[column + 3 * row] = value;
    }
  }
  /**
   * Copy another matrix into this matrix object.
   */


  copy(matrix) {
    for (let i = 0; i < matrix.elements.length; i++) {
      this.elements[i] = matrix.elements[i];
    }

    return this;
  }
  /**
   * Returns a string representation of the matrix.
   */


  toString() {
    let r = '';
    const sep = ',';

    for (let i = 0; i < 9; i++) {
      r += this.elements[i] + sep;
    }

    return r;
  }
  /**
   * reverse the matrix
   * @param target Target matrix to save in.
   * @return The solution x
   */


  reverse(target) {
    if (target === void 0) {
      target = new Mat3();
    }

    // Construct equations
    const nr = 3; // num rows

    const nc = 6; // num cols

    const eqns = reverse_eqns;
    let i;
    let j;

    for (i = 0; i < 3; i++) {
      for (j = 0; j < 3; j++) {
        eqns[i + nc * j] = this.elements[i + 3 * j];
      }
    }

    eqns[3 + 6 * 0] = 1;
    eqns[3 + 6 * 1] = 0;
    eqns[3 + 6 * 2] = 0;
    eqns[4 + 6 * 0] = 0;
    eqns[4 + 6 * 1] = 1;
    eqns[4 + 6 * 2] = 0;
    eqns[5 + 6 * 0] = 0;
    eqns[5 + 6 * 1] = 0;
    eqns[5 + 6 * 2] = 1; // Compute right upper triangular version of the matrix - Gauss elimination

    let n = 3;
    const k = n;
    let np;
    const kp = nc; // num rows

    let p;

    do {
      i = k - n;

      if (eqns[i + nc * i] === 0) {
        // the pivot is null, swap lines
        for (j = i + 1; j < k; j++) {
          if (eqns[i + nc * j] !== 0) {
            np = kp;

            do {
              // do line( i ) = line( i ) + line( k )
              p = kp - np;
              eqns[p + nc * i] += eqns[p + nc * j];
            } while (--np);

            break;
          }
        }
      }

      if (eqns[i + nc * i] !== 0) {
        for (j = i + 1; j < k; j++) {
          const multiplier = eqns[i + nc * j] / eqns[i + nc * i];
          np = kp;

          do {
            // do line( k ) = line( k ) - multiplier * line( i )
            p = kp - np;
            eqns[p + nc * j] = p <= i ? 0 : eqns[p + nc * j] - eqns[p + nc * i] * multiplier;
          } while (--np);
        }
      }
    } while (--n); // eliminate the upper left triangle of the matrix


    i = 2;

    do {
      j = i - 1;

      do {
        const multiplier = eqns[i + nc * j] / eqns[i + nc * i];
        np = nc;

        do {
          p = nc - np;
          eqns[p + nc * j] = eqns[p + nc * j] - eqns[p + nc * i] * multiplier;
        } while (--np);
      } while (j--);
    } while (--i); // operations on the diagonal


    i = 2;

    do {
      const multiplier = 1 / eqns[i + nc * i];
      np = nc;

      do {
        p = nc - np;
        eqns[p + nc * i] = eqns[p + nc * i] * multiplier;
      } while (--np);
    } while (i--);

    i = 2;

    do {
      j = 2;

      do {
        p = eqns[nr + j + nc * i];

        if (isNaN(p) || p === Infinity) {
          throw "Could not reverse! A=[" + this.toString() + "]";
        }

        target.e(i, j, p);
      } while (j--);
    } while (i--);

    return target;
  }
  /**
   * Set the matrix from a quaterion
   */


  setRotationFromQuaternion(q) {
    const x = q.x;
    const y = q.y;
    const z = q.z;
    const w = q.w;
    const x2 = x + x;
    const y2 = y + y;
    const z2 = z + z;
    const xx = x * x2;
    const xy = x * y2;
    const xz = x * z2;
    const yy = y * y2;
    const yz = y * z2;
    const zz = z * z2;
    const wx = w * x2;
    const wy = w * y2;
    const wz = w * z2;
    const e = this.elements;
    e[3 * 0 + 0] = 1 - (yy + zz);
    e[3 * 0 + 1] = xy - wz;
    e[3 * 0 + 2] = xz + wy;
    e[3 * 1 + 0] = xy + wz;
    e[3 * 1 + 1] = 1 - (xx + zz);
    e[3 * 1 + 2] = yz - wx;
    e[3 * 2 + 0] = xz - wy;
    e[3 * 2 + 1] = yz + wx;
    e[3 * 2 + 2] = 1 - (xx + yy);
    return this;
  }
  /**
   * Transpose the matrix
   * @param target Optional. Where to store the result.
   * @return The target Mat3, or a new Mat3 if target was omitted.
   */


  transpose(target) {
    if (target === void 0) {
      target = new Mat3();
    }

    const M = this.elements;
    const T = target.elements;
    let tmp; //Set diagonals

    T[0] = M[0];
    T[4] = M[4];
    T[8] = M[8];
    tmp = M[1];
    T[1] = M[3];
    T[3] = tmp;
    tmp = M[2];
    T[2] = M[6];
    T[6] = tmp;
    tmp = M[5];
    T[5] = M[7];
    T[7] = tmp;
    return target;
  }

}

const reverse_eqns = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];
/**
 * 3-dimensional vector
 * @example
 *     const v = new Vec3(1, 2, 3)
 *     console.log('x=' + v.x) // x=1
 */

class Vec3 {
  constructor(x, y, z) {
    if (x === void 0) {
      x = 0.0;
    }

    if (y === void 0) {
      y = 0.0;
    }

    if (z === void 0) {
      z = 0.0;
    }

    this.x = void 0;
    this.y = void 0;
    this.z = void 0;
    this.x = x;
    this.y = y;
    this.z = z;
  }
  /**
   * Vector cross product
   * @param target Optional target to save in.
   */


  cross(vector, target) {
    if (target === void 0) {
      target = new Vec3();
    }

    const vx = vector.x;
    const vy = vector.y;
    const vz = vector.z;
    const x = this.x;
    const y = this.y;
    const z = this.z;
    target.x = y * vz - z * vy;
    target.y = z * vx - x * vz;
    target.z = x * vy - y * vx;
    return target;
  }
  /**
   * Set the vectors' 3 elements
   */


  set(x, y, z) {
    this.x = x;
    this.y = y;
    this.z = z;
    return this;
  }
  /**
   * Set all components of the vector to zero.
   */


  setZero() {
    this.x = this.y = this.z = 0;
  }
  /**
   * Vector addition
   */


  vadd(vector, target) {
    if (target) {
      target.x = vector.x + this.x;
      target.y = vector.y + this.y;
      target.z = vector.z + this.z;
    } else {
      return new Vec3(this.x + vector.x, this.y + vector.y, this.z + vector.z);
    }
  }
  /**
   * Vector subtraction
   * @param target Optional target to save in.
   */


  vsub(vector, target) {
    if (target) {
      target.x = this.x - vector.x;
      target.y = this.y - vector.y;
      target.z = this.z - vector.z;
    } else {
      return new Vec3(this.x - vector.x, this.y - vector.y, this.z - vector.z);
    }
  }
  /**
   * Get the cross product matrix a_cross from a vector, such that a x b = a_cross * b = c
   *
   * See {@link https://www8.cs.umu.se/kurser/TDBD24/VT06/lectures/Lecture6.pdf Umeå University Lecture}
   */


  crossmat() {
    return new Mat3([0, -this.z, this.y, this.z, 0, -this.x, -this.y, this.x, 0]);
  }
  /**
   * Normalize the vector. Note that this changes the values in the vector.
    * @return Returns the norm of the vector
   */


  normalize() {
    const x = this.x;
    const y = this.y;
    const z = this.z;
    const n = Math.sqrt(x * x + y * y + z * z);

    if (n > 0.0) {
      const invN = 1 / n;
      this.x *= invN;
      this.y *= invN;
      this.z *= invN;
    } else {
      // Make something up
      this.x = 0;
      this.y = 0;
      this.z = 0;
    }

    return n;
  }
  /**
   * Get the version of this vector that is of length 1.
   * @param target Optional target to save in
   * @return Returns the unit vector
   */


  unit(target) {
    if (target === void 0) {
      target = new Vec3();
    }

    const x = this.x;
    const y = this.y;
    const z = this.z;
    let ninv = Math.sqrt(x * x + y * y + z * z);

    if (ninv > 0.0) {
      ninv = 1.0 / ninv;
      target.x = x * ninv;
      target.y = y * ninv;
      target.z = z * ninv;
    } else {
      target.x = 1;
      target.y = 0;
      target.z = 0;
    }

    return target;
  }
  /**
   * Get the length of the vector
   */


  length() {
    const x = this.x;
    const y = this.y;
    const z = this.z;
    return Math.sqrt(x * x + y * y + z * z);
  }
  /**
   * Get the squared length of the vector.
   */


  lengthSquared() {
    return this.dot(this);
  }
  /**
   * Get distance from this point to another point
   */


  distanceTo(p) {
    const x = this.x;
    const y = this.y;
    const z = this.z;
    const px = p.x;
    const py = p.y;
    const pz = p.z;
    return Math.sqrt((px - x) * (px - x) + (py - y) * (py - y) + (pz - z) * (pz - z));
  }
  /**
   * Get squared distance from this point to another point
   */


  distanceSquared(p) {
    const x = this.x;
    const y = this.y;
    const z = this.z;
    const px = p.x;
    const py = p.y;
    const pz = p.z;
    return (px - x) * (px - x) + (py - y) * (py - y) + (pz - z) * (pz - z);
  }
  /**
   * Multiply all the components of the vector with a scalar.
   * @param target The vector to save the result in.
   */


  scale(scalar, target) {
    if (target === void 0) {
      target = new Vec3();
    }

    const x = this.x;
    const y = this.y;
    const z = this.z;
    target.x = scalar * x;
    target.y = scalar * y;
    target.z = scalar * z;
    return target;
  }
  /**
   * Multiply the vector with an other vector, component-wise.
   * @param target The vector to save the result in.
   */


  vmul(vector, target) {
    if (target === void 0) {
      target = new Vec3();
    }

    target.x = vector.x * this.x;
    target.y = vector.y * this.y;
    target.z = vector.z * this.z;
    return target;
  }
  /**
   * Scale a vector and add it to this vector. Save the result in "target". (target = this + vector * scalar)
   * @param target The vector to save the result in.
   */


  addScaledVector(scalar, vector, target) {
    if (target === void 0) {
      target = new Vec3();
    }

    target.x = this.x + scalar * vector.x;
    target.y = this.y + scalar * vector.y;
    target.z = this.z + scalar * vector.z;
    return target;
  }
  /**
   * Calculate dot product
   * @param vector
   */


  dot(vector) {
    return this.x * vector.x + this.y * vector.y + this.z * vector.z;
  }

  isZero() {
    return this.x === 0 && this.y === 0 && this.z === 0;
  }
  /**
   * Make the vector point in the opposite direction.
   * @param target Optional target to save in
   */


  negate(target) {
    if (target === void 0) {
      target = new Vec3();
    }

    target.x = -this.x;
    target.y = -this.y;
    target.z = -this.z;
    return target;
  }
  /**
   * Compute two artificial tangents to the vector
   * @param t1 Vector object to save the first tangent in
   * @param t2 Vector object to save the second tangent in
   */


  tangents(t1, t2) {
    const norm = this.length();

    if (norm > 0.0) {
      const n = Vec3_tangents_n;
      const inorm = 1 / norm;
      n.set(this.x * inorm, this.y * inorm, this.z * inorm);
      const randVec = Vec3_tangents_randVec;

      if (Math.abs(n.x) < 0.9) {
        randVec.set(1, 0, 0);
        n.cross(randVec, t1);
      } else {
        randVec.set(0, 1, 0);
        n.cross(randVec, t1);
      }

      n.cross(t1, t2);
    } else {
      // The normal length is zero, make something up
      t1.set(1, 0, 0);
      t2.set(0, 1, 0);
    }
  }
  /**
   * Converts to a more readable format
   */


  toString() {
    return this.x + "," + this.y + "," + this.z;
  }
  /**
   * Converts to an array
   */


  toArray() {
    return [this.x, this.y, this.z];
  }
  /**
   * Copies value of source to this vector.
   */


  copy(vector) {
    this.x = vector.x;
    this.y = vector.y;
    this.z = vector.z;
    return this;
  }
  /**
   * Do a linear interpolation between two vectors
   * @param t A number between 0 and 1. 0 will make this function return u, and 1 will make it return v. Numbers in between will generate a vector in between them.
   */


  lerp(vector, t, target) {
    const x = this.x;
    const y = this.y;
    const z = this.z;
    target.x = x + (vector.x - x) * t;
    target.y = y + (vector.y - y) * t;
    target.z = z + (vector.z - z) * t;
  }
  /**
   * Check if a vector equals is almost equal to another one.
   */


  almostEquals(vector, precision) {
    if (precision === void 0) {
      precision = 1e-6;
    }

    if (Math.abs(this.x - vector.x) > precision || Math.abs(this.y - vector.y) > precision || Math.abs(this.z - vector.z) > precision) {
      return false;
    }

    return true;
  }
  /**
   * Check if a vector is almost zero
   */


  almostZero(precision) {
    if (precision === void 0) {
      precision = 1e-6;
    }

    if (Math.abs(this.x) > precision || Math.abs(this.y) > precision || Math.abs(this.z) > precision) {
      return false;
    }

    return true;
  }
  /**
   * Check if the vector is anti-parallel to another vector.
   * @param precision Set to zero for exact comparisons
   */


  isAntiparallelTo(vector, precision) {
    this.negate(antip_neg);
    return antip_neg.almostEquals(vector, precision);
  }
  /**
   * Clone the vector
   */


  clone() {
    return new Vec3(this.x, this.y, this.z);
  }

}

Vec3.ZERO = void 0;
Vec3.UNIT_X = void 0;
Vec3.UNIT_Y = void 0;
Vec3.UNIT_Z = void 0;
Vec3.ZERO = new Vec3(0, 0, 0);
Vec3.UNIT_X = new Vec3(1, 0, 0);
Vec3.UNIT_Y = new Vec3(0, 1, 0);
Vec3.UNIT_Z = new Vec3(0, 0, 1);
const Vec3_tangents_n = new Vec3();
const Vec3_tangents_randVec = new Vec3();
const antip_neg = new Vec3();
/**
 * Axis aligned bounding box class.
 */

class AABB {
  /**
   * The lower bound of the bounding box
   */

  /**
   * The upper bound of the bounding box
   */
  constructor(options) {
    if (options === void 0) {
      options = {};
    }

    this.lowerBound = void 0;
    this.upperBound = void 0;
    this.lowerBound = new Vec3();
    this.upperBound = new Vec3();

    if (options.lowerBound) {
      this.lowerBound.copy(options.lowerBound);
    }

    if (options.upperBound) {
      this.upperBound.copy(options.upperBound);
    }
  }
  /**
   * Set the AABB bounds from a set of points.
   * @param points An array of Vec3's.
   * @return The self object
   */


  setFromPoints(points, position, quaternion, skinSize) {
    const l = this.lowerBound;
    const u = this.upperBound;
    const q = quaternion; // Set to the first point

    l.copy(points[0]);

    if (q) {
      q.vmult(l, l);
    }

    u.copy(l);

    for (let i = 1; i < points.length; i++) {
      let p = points[i];

      if (q) {
        q.vmult(p, tmp$1);
        p = tmp$1;
      }

      if (p.x > u.x) {
        u.x = p.x;
      }

      if (p.x < l.x) {
        l.x = p.x;
      }

      if (p.y > u.y) {
        u.y = p.y;
      }

      if (p.y < l.y) {
        l.y = p.y;
      }

      if (p.z > u.z) {
        u.z = p.z;
      }

      if (p.z < l.z) {
        l.z = p.z;
      }
    } // Add offset


    if (position) {
      position.vadd(l, l);
      position.vadd(u, u);
    }

    if (skinSize) {
      l.x -= skinSize;
      l.y -= skinSize;
      l.z -= skinSize;
      u.x += skinSize;
      u.y += skinSize;
      u.z += skinSize;
    }

    return this;
  }
  /**
   * Copy bounds from an AABB to this AABB
   * @param aabb Source to copy from
   * @return The this object, for chainability
   */


  copy(aabb) {
    this.lowerBound.copy(aabb.lowerBound);
    this.upperBound.copy(aabb.upperBound);
    return this;
  }
  /**
   * Clone an AABB
   */


  clone() {
    return new AABB().copy(this);
  }
  /**
   * Extend this AABB so that it covers the given AABB too.
   */


  extend(aabb) {
    this.lowerBound.x = Math.min(this.lowerBound.x, aabb.lowerBound.x);
    this.upperBound.x = Math.max(this.upperBound.x, aabb.upperBound.x);
    this.lowerBound.y = Math.min(this.lowerBound.y, aabb.lowerBound.y);
    this.upperBound.y = Math.max(this.upperBound.y, aabb.upperBound.y);
    this.lowerBound.z = Math.min(this.lowerBound.z, aabb.lowerBound.z);
    this.upperBound.z = Math.max(this.upperBound.z, aabb.upperBound.z);
  }
  /**
   * Returns true if the given AABB overlaps this AABB.
   */


  overlaps(aabb) {
    const l1 = this.lowerBound;
    const u1 = this.upperBound;
    const l2 = aabb.lowerBound;
    const u2 = aabb.upperBound; //      l2        u2
    //      |---------|
    // |--------|
    // l1       u1

    const overlapsX = l2.x <= u1.x && u1.x <= u2.x || l1.x <= u2.x && u2.x <= u1.x;
    const overlapsY = l2.y <= u1.y && u1.y <= u2.y || l1.y <= u2.y && u2.y <= u1.y;
    const overlapsZ = l2.z <= u1.z && u1.z <= u2.z || l1.z <= u2.z && u2.z <= u1.z;
    return overlapsX && overlapsY && overlapsZ;
  } // Mostly for debugging


  volume() {
    const l = this.lowerBound;
    const u = this.upperBound;
    return (u.x - l.x) * (u.y - l.y) * (u.z - l.z);
  }
  /**
   * Returns true if the given AABB is fully contained in this AABB.
   */


  contains(aabb) {
    const l1 = this.lowerBound;
    const u1 = this.upperBound;
    const l2 = aabb.lowerBound;
    const u2 = aabb.upperBound; //      l2        u2
    //      |---------|
    // |---------------|
    // l1              u1

    return l1.x <= l2.x && u1.x >= u2.x && l1.y <= l2.y && u1.y >= u2.y && l1.z <= l2.z && u1.z >= u2.z;
  }

  getCorners(a, b, c, d, e, f, g, h) {
    const l = this.lowerBound;
    const u = this.upperBound;
    a.copy(l);
    b.set(u.x, l.y, l.z);
    c.set(u.x, u.y, l.z);
    d.set(l.x, u.y, u.z);
    e.set(u.x, l.y, u.z);
    f.set(l.x, u.y, l.z);
    g.set(l.x, l.y, u.z);
    h.copy(u);
  }
  /**
   * Get the representation of an AABB in another frame.
   * @return The "target" AABB object.
   */


  toLocalFrame(frame, target) {
    const corners = transformIntoFrame_corners;
    const a = corners[0];
    const b = corners[1];
    const c = corners[2];
    const d = corners[3];
    const e = corners[4];
    const f = corners[5];
    const g = corners[6];
    const h = corners[7]; // Get corners in current frame

    this.getCorners(a, b, c, d, e, f, g, h); // Transform them to new local frame

    for (let i = 0; i !== 8; i++) {
      const corner = corners[i];
      frame.pointToLocal(corner, corner);
    }

    return target.setFromPoints(corners);
  }
  /**
   * Get the representation of an AABB in the global frame.
   * @return The "target" AABB object.
   */


  toWorldFrame(frame, target) {
    const corners = transformIntoFrame_corners;
    const a = corners[0];
    const b = corners[1];
    const c = corners[2];
    const d = corners[3];
    const e = corners[4];
    const f = corners[5];
    const g = corners[6];
    const h = corners[7]; // Get corners in current frame

    this.getCorners(a, b, c, d, e, f, g, h); // Transform them to new local frame

    for (let i = 0; i !== 8; i++) {
      const corner = corners[i];
      frame.pointToWorld(corner, corner);
    }

    return target.setFromPoints(corners);
  }
  /**
   * Check if the AABB is hit by a ray.
   */


  overlapsRay(ray) {
    const {
      direction,
      from
    } = ray; // const t = 0
    // ray.direction is unit direction vector of ray

    const dirFracX = 1 / direction.x;
    const dirFracY = 1 / direction.y;
    const dirFracZ = 1 / direction.z; // this.lowerBound is the corner of AABB with minimal coordinates - left bottom, rt is maximal corner

    const t1 = (this.lowerBound.x - from.x) * dirFracX;
    const t2 = (this.upperBound.x - from.x) * dirFracX;
    const t3 = (this.lowerBound.y - from.y) * dirFracY;
    const t4 = (this.upperBound.y - from.y) * dirFracY;
    const t5 = (this.lowerBound.z - from.z) * dirFracZ;
    const t6 = (this.upperBound.z - from.z) * dirFracZ; // const tmin = Math.max(Math.max(Math.min(t1, t2), Math.min(t3, t4)));
    // const tmax = Math.min(Math.min(Math.max(t1, t2), Math.max(t3, t4)));

    const tmin = Math.max(Math.max(Math.min(t1, t2), Math.min(t3, t4)), Math.min(t5, t6));
    const tmax = Math.min(Math.min(Math.max(t1, t2), Math.max(t3, t4)), Math.max(t5, t6)); // if tmax < 0, ray (line) is intersecting AABB, but whole AABB is behing us

    if (tmax < 0) {
      //t = tmax;
      return false;
    } // if tmin > tmax, ray doesn't intersect AABB


    if (tmin > tmax) {
      //t = tmax;
      return false;
    }

    return true;
  }

}

const tmp$1 = new Vec3();
const transformIntoFrame_corners = [new Vec3(), new Vec3(), new Vec3(), new Vec3(), new Vec3(), new Vec3(), new Vec3(), new Vec3()];
/**
 * Base class for objects that dispatches events.
 */


class EventTarget {
  constructor() {
    this._listeners = void 0;
  }
  /**
   * Add an event listener
   * @return The self object, for chainability.
   */


  addEventListener(type, listener) {
    if (this._listeners === undefined) {
      this._listeners = {};
    }

    const listeners = this._listeners;

    if (listeners[type] === undefined) {
      listeners[type] = [];
    }

    if (!listeners[type].includes(listener)) {
      listeners[type].push(listener);
    }

    return this;
  }
  /**
   * Check if an event listener is added
   */


  hasEventListener(type, listener) {
    if (this._listeners === undefined) {
      return false;
    }

    const listeners = this._listeners;

    if (listeners[type] !== undefined && listeners[type].includes(listener)) {
      return true;
    }

    return false;
  }
  /**
   * Check if any event listener of the given type is added
   */


  hasAnyEventListener(type) {
    if (this._listeners === undefined) {
      return false;
    }

    const listeners = this._listeners;
    return listeners[type] !== undefined;
  }
  /**
   * Remove an event listener
   * @return The self object, for chainability.
   */


  removeEventListener(type, listener) {
    if (this._listeners === undefined) {
      return this;
    }

    const listeners = this._listeners;

    if (listeners[type] === undefined) {
      return this;
    }

    const index = listeners[type].indexOf(listener);

    if (index !== -1) {
      listeners[type].splice(index, 1);
    }

    return this;
  }
  /**
   * Emit an event.
   * @return The self object, for chainability.
   */


  dispatchEvent(event) {
    if (this._listeners === undefined) {
      return this;
    }

    const listeners = this._listeners;
    const listenerArray = listeners[event.type];

    if (listenerArray !== undefined) {
      event.target = this;

      for (let i = 0, l = listenerArray.length; i < l; i++) {
        listenerArray[i].call(this, event);
      }
    }

    return this;
  }

}
/**
 * A Quaternion describes a rotation in 3D space. The Quaternion is mathematically defined as Q = x*i + y*j + z*k + w, where (i,j,k) are imaginary basis vectors. (x,y,z) can be seen as a vector related to the axis of rotation, while the real multiplier, w, is related to the amount of rotation.
 * @param x Multiplier of the imaginary basis vector i.
 * @param y Multiplier of the imaginary basis vector j.
 * @param z Multiplier of the imaginary basis vector k.
 * @param w Multiplier of the real part.
 * @see http://en.wikipedia.org/wiki/Quaternion
 */


class Quaternion {
  constructor(x, y, z, w) {
    if (x === void 0) {
      x = 0;
    }

    if (y === void 0) {
      y = 0;
    }

    if (z === void 0) {
      z = 0;
    }

    if (w === void 0) {
      w = 1;
    }

    this.x = void 0;
    this.y = void 0;
    this.z = void 0;
    this.w = void 0;
    this.x = x;
    this.y = y;
    this.z = z;
    this.w = w;
  }
  /**
   * Set the value of the quaternion.
   */


  set(x, y, z, w) {
    this.x = x;
    this.y = y;
    this.z = z;
    this.w = w;
    return this;
  }
  /**
   * Convert to a readable format
   * @return "x,y,z,w"
   */


  toString() {
    return this.x + "," + this.y + "," + this.z + "," + this.w;
  }
  /**
   * Convert to an Array
   * @return [x, y, z, w]
   */


  toArray() {
    return [this.x, this.y, this.z, this.w];
  }
  /**
   * Set the quaternion components given an axis and an angle in radians.
   */


  setFromAxisAngle(vector, angle) {
    const s = Math.sin(angle * 0.5);
    this.x = vector.x * s;
    this.y = vector.y * s;
    this.z = vector.z * s;
    this.w = Math.cos(angle * 0.5);
    return this;
  }
  /**
   * Converts the quaternion to [ axis, angle ] representation.
   * @param targetAxis A vector object to reuse for storing the axis.
   * @return An array, first element is the axis and the second is the angle in radians.
   */


  toAxisAngle(targetAxis) {
    if (targetAxis === void 0) {
      targetAxis = new Vec3();
    }

    this.normalize(); // if w>1 acos and sqrt will produce errors, this cant happen if quaternion is normalised

    const angle = 2 * Math.acos(this.w);
    const s = Math.sqrt(1 - this.w * this.w); // assuming quaternion normalised then w is less than 1, so term always positive.

    if (s < 0.001) {
      // test to avoid divide by zero, s is always positive due to sqrt
      // if s close to zero then direction of axis not important
      targetAxis.x = this.x; // if it is important that axis is normalised then replace with x=1; y=z=0;

      targetAxis.y = this.y;
      targetAxis.z = this.z;
    } else {
      targetAxis.x = this.x / s; // normalise axis

      targetAxis.y = this.y / s;
      targetAxis.z = this.z / s;
    }

    return [targetAxis, angle];
  }
  /**
   * Set the quaternion value given two vectors. The resulting rotation will be the needed rotation to rotate u to v.
   */


  setFromVectors(u, v) {
    if (u.isAntiparallelTo(v)) {
      const t1 = sfv_t1;
      const t2 = sfv_t2;
      u.tangents(t1, t2);
      this.setFromAxisAngle(t1, Math.PI);
    } else {
      const a = u.cross(v);
      this.x = a.x;
      this.y = a.y;
      this.z = a.z;
      this.w = Math.sqrt(u.length() ** 2 * v.length() ** 2) + u.dot(v);
      this.normalize();
    }

    return this;
  }
  /**
   * Multiply the quaternion with an other quaternion.
   */


  mult(quat, target) {
    if (target === void 0) {
      target = new Quaternion();
    }

    const ax = this.x;
    const ay = this.y;
    const az = this.z;
    const aw = this.w;
    const bx = quat.x;
    const by = quat.y;
    const bz = quat.z;
    const bw = quat.w;
    target.x = ax * bw + aw * bx + ay * bz - az * by;
    target.y = ay * bw + aw * by + az * bx - ax * bz;
    target.z = az * bw + aw * bz + ax * by - ay * bx;
    target.w = aw * bw - ax * bx - ay * by - az * bz;
    return target;
  }
  /**
   * Get the inverse quaternion rotation.
   */


  inverse(target) {
    if (target === void 0) {
      target = new Quaternion();
    }

    const x = this.x;
    const y = this.y;
    const z = this.z;
    const w = this.w;
    this.conjugate(target);
    const inorm2 = 1 / (x * x + y * y + z * z + w * w);
    target.x *= inorm2;
    target.y *= inorm2;
    target.z *= inorm2;
    target.w *= inorm2;
    return target;
  }
  /**
   * Get the quaternion conjugate
   */


  conjugate(target) {
    if (target === void 0) {
      target = new Quaternion();
    }

    target.x = -this.x;
    target.y = -this.y;
    target.z = -this.z;
    target.w = this.w;
    return target;
  }
  /**
   * Normalize the quaternion. Note that this changes the values of the quaternion.
   */


  normalize() {
    let l = Math.sqrt(this.x * this.x + this.y * this.y + this.z * this.z + this.w * this.w);

    if (l === 0) {
      this.x = 0;
      this.y = 0;
      this.z = 0;
      this.w = 0;
    } else {
      l = 1 / l;
      this.x *= l;
      this.y *= l;
      this.z *= l;
      this.w *= l;
    }

    return this;
  }
  /**
   * Approximation of quaternion normalization. Works best when quat is already almost-normalized.
   * @author unphased, https://github.com/unphased
   */


  normalizeFast() {
    const f = (3.0 - (this.x * this.x + this.y * this.y + this.z * this.z + this.w * this.w)) / 2.0;

    if (f === 0) {
      this.x = 0;
      this.y = 0;
      this.z = 0;
      this.w = 0;
    } else {
      this.x *= f;
      this.y *= f;
      this.z *= f;
      this.w *= f;
    }

    return this;
  }
  /**
   * Multiply the quaternion by a vector
   */


  vmult(v, target) {
    if (target === void 0) {
      target = new Vec3();
    }

    const x = v.x;
    const y = v.y;
    const z = v.z;
    const qx = this.x;
    const qy = this.y;
    const qz = this.z;
    const qw = this.w; // q*v

    const ix = qw * x + qy * z - qz * y;
    const iy = qw * y + qz * x - qx * z;
    const iz = qw * z + qx * y - qy * x;
    const iw = -qx * x - qy * y - qz * z;
    target.x = ix * qw + iw * -qx + iy * -qz - iz * -qy;
    target.y = iy * qw + iw * -qy + iz * -qx - ix * -qz;
    target.z = iz * qw + iw * -qz + ix * -qy - iy * -qx;
    return target;
  }
  /**
   * Copies value of source to this quaternion.
   * @return this
   */


  copy(quat) {
    this.x = quat.x;
    this.y = quat.y;
    this.z = quat.z;
    this.w = quat.w;
    return this;
  }
  /**
   * Convert the quaternion to euler angle representation. Order: YZX, as this page describes: https://www.euclideanspace.com/maths/standards/index.htm
   * @param order Three-character string, defaults to "YZX"
   */


  toEuler(target, order) {
    if (order === void 0) {
      order = 'YZX';
    }

    let heading;
    let attitude;
    let bank;
    const x = this.x;
    const y = this.y;
    const z = this.z;
    const w = this.w;

    switch (order) {
      case 'YZX':
        const test = x * y + z * w;

        if (test > 0.499) {
          // singularity at north pole
          heading = 2 * Math.atan2(x, w);
          attitude = Math.PI / 2;
          bank = 0;
        }

        if (test < -0.499) {
          // singularity at south pole
          heading = -2 * Math.atan2(x, w);
          attitude = -Math.PI / 2;
          bank = 0;
        }

        if (heading === undefined) {
          const sqx = x * x;
          const sqy = y * y;
          const sqz = z * z;
          heading = Math.atan2(2 * y * w - 2 * x * z, 1 - 2 * sqy - 2 * sqz); // Heading

          attitude = Math.asin(2 * test); // attitude

          bank = Math.atan2(2 * x * w - 2 * y * z, 1 - 2 * sqx - 2 * sqz); // bank
        }

        break;

      default:
        throw new Error("Euler order " + order + " not supported yet.");
    }

    target.y = heading;
    target.z = attitude;
    target.x = bank;
  }
  /**
   * @param order The order to apply angles: 'XYZ' or 'YXZ' or any other combination.
   *
   * See {@link https://www.mathworks.com/matlabcentral/fileexchange/20696-function-to-convert-between-dcm-euler-angles-quaternions-and-euler-vectors MathWorks} reference
   */


  setFromEuler(x, y, z, order) {
    if (order === void 0) {
      order = 'XYZ';
    }

    const c1 = Math.cos(x / 2);
    const c2 = Math.cos(y / 2);
    const c3 = Math.cos(z / 2);
    const s1 = Math.sin(x / 2);
    const s2 = Math.sin(y / 2);
    const s3 = Math.sin(z / 2);

    if (order === 'XYZ') {
      this.x = s1 * c2 * c3 + c1 * s2 * s3;
      this.y = c1 * s2 * c3 - s1 * c2 * s3;
      this.z = c1 * c2 * s3 + s1 * s2 * c3;
      this.w = c1 * c2 * c3 - s1 * s2 * s3;
    } else if (order === 'YXZ') {
      this.x = s1 * c2 * c3 + c1 * s2 * s3;
      this.y = c1 * s2 * c3 - s1 * c2 * s3;
      this.z = c1 * c2 * s3 - s1 * s2 * c3;
      this.w = c1 * c2 * c3 + s1 * s2 * s3;
    } else if (order === 'ZXY') {
      this.x = s1 * c2 * c3 - c1 * s2 * s3;
      this.y = c1 * s2 * c3 + s1 * c2 * s3;
      this.z = c1 * c2 * s3 + s1 * s2 * c3;
      this.w = c1 * c2 * c3 - s1 * s2 * s3;
    } else if (order === 'ZYX') {
      this.x = s1 * c2 * c3 - c1 * s2 * s3;
      this.y = c1 * s2 * c3 + s1 * c2 * s3;
      this.z = c1 * c2 * s3 - s1 * s2 * c3;
      this.w = c1 * c2 * c3 + s1 * s2 * s3;
    } else if (order === 'YZX') {
      this.x = s1 * c2 * c3 + c1 * s2 * s3;
      this.y = c1 * s2 * c3 + s1 * c2 * s3;
      this.z = c1 * c2 * s3 - s1 * s2 * c3;
      this.w = c1 * c2 * c3 - s1 * s2 * s3;
    } else if (order === 'XZY') {
      this.x = s1 * c2 * c3 - c1 * s2 * s3;
      this.y = c1 * s2 * c3 - s1 * c2 * s3;
      this.z = c1 * c2 * s3 + s1 * s2 * c3;
      this.w = c1 * c2 * c3 + s1 * s2 * s3;
    }

    return this;
  }

  clone() {
    return new Quaternion(this.x, this.y, this.z, this.w);
  }
  /**
   * Performs a spherical linear interpolation between two quat
   *
   * @param toQuat second operand
   * @param t interpolation amount between the self quaternion and toQuat
   * @param target A quaternion to store the result in. If not provided, a new one will be created.
   * @returns {Quaternion} The "target" object
   */


  slerp(toQuat, t, target) {
    if (target === void 0) {
      target = new Quaternion();
    }

    const ax = this.x;
    const ay = this.y;
    const az = this.z;
    const aw = this.w;
    let bx = toQuat.x;
    let by = toQuat.y;
    let bz = toQuat.z;
    let bw = toQuat.w;
    let omega;
    let cosom;
    let sinom;
    let scale0;
    let scale1; // calc cosine

    cosom = ax * bx + ay * by + az * bz + aw * bw; // adjust signs (if necessary)

    if (cosom < 0.0) {
      cosom = -cosom;
      bx = -bx;
      by = -by;
      bz = -bz;
      bw = -bw;
    } // calculate coefficients


    if (1.0 - cosom > 0.000001) {
      // standard case (slerp)
      omega = Math.acos(cosom);
      sinom = Math.sin(omega);
      scale0 = Math.sin((1.0 - t) * omega) / sinom;
      scale1 = Math.sin(t * omega) / sinom;
    } else {
      // "from" and "to" quaternions are very close
      //  ... so we can do a linear interpolation
      scale0 = 1.0 - t;
      scale1 = t;
    } // calculate final values


    target.x = scale0 * ax + scale1 * bx;
    target.y = scale0 * ay + scale1 * by;
    target.z = scale0 * az + scale1 * bz;
    target.w = scale0 * aw + scale1 * bw;
    return target;
  }
  /**
   * Rotate an absolute orientation quaternion given an angular velocity and a time step.
   */


  integrate(angularVelocity, dt, angularFactor, target) {
    if (target === void 0) {
      target = new Quaternion();
    }

    const ax = angularVelocity.x * angularFactor.x,
          ay = angularVelocity.y * angularFactor.y,
          az = angularVelocity.z * angularFactor.z,
          bx = this.x,
          by = this.y,
          bz = this.z,
          bw = this.w;
    const half_dt = dt * 0.5;
    target.x += half_dt * (ax * bw + ay * bz - az * by);
    target.y += half_dt * (ay * bw + az * bx - ax * bz);
    target.z += half_dt * (az * bw + ax * by - ay * bx);
    target.w += half_dt * (-ax * bx - ay * by - az * bz);
    return target;
  }

}

const sfv_t1 = new Vec3();
const sfv_t2 = new Vec3();
/**
 * The available shape types.
 */

const SHAPE_TYPES = {
  /** SPHERE */
  SPHERE: 1,

  /** PLANE */
  PLANE: 2,

  /** BOX */
  BOX: 4,

  /** COMPOUND */
  COMPOUND: 8,

  /** CONVEXPOLYHEDRON */
  CONVEXPOLYHEDRON: 16,

  /** HEIGHTFIELD */
  HEIGHTFIELD: 32,

  /** PARTICLE */
  PARTICLE: 64,

  /** CYLINDER */
  CYLINDER: 128,

  /** TRIMESH */
  TRIMESH: 256
};
/**
 * ShapeType
 */

/**
 * Base class for shapes
 */

class Shape {
  /**
   * Identifier of the Shape.
   */

  /**
   * The type of this shape. Must be set to an int > 0 by subclasses.
   */

  /**
   * The local bounding sphere radius of this shape.
   */

  /**
   * Whether to produce contact forces when in contact with other bodies. Note that contacts will be generated, but they will be disabled.
   * @default true
   */

  /**
   * @default 1
   */

  /**
   * @default -1
   */

  /**
   * Optional material of the shape that regulates contact properties.
   */

  /**
   * The body to which the shape is added to.
   */

  /**
   * All the Shape types.
   */
  constructor(options) {
    if (options === void 0) {
      options = {};
    }

    this.id = void 0;
    this.type = void 0;
    this.boundingSphereRadius = void 0;
    this.collisionResponse = void 0;
    this.collisionFilterGroup = void 0;
    this.collisionFilterMask = void 0;
    this.material = void 0;
    this.body = void 0;
    this.id = Shape.idCounter++;
    this.type = options.type || 0;
    this.boundingSphereRadius = 0;
    this.collisionResponse = options.collisionResponse ? options.collisionResponse : true;
    this.collisionFilterGroup = options.collisionFilterGroup !== undefined ? options.collisionFilterGroup : 1;
    this.collisionFilterMask = options.collisionFilterMask !== undefined ? options.collisionFilterMask : -1;
    this.material = options.material ? options.material : null;
    this.body = null;
  }
  /**
   * Computes the bounding sphere radius.
   * The result is stored in the property `.boundingSphereRadius`
   */


  updateBoundingSphereRadius() {
    throw "computeBoundingSphereRadius() not implemented for shape type " + this.type;
  }
  /**
   * Get the volume of this shape
   */


  volume() {
    throw "volume() not implemented for shape type " + this.type;
  }
  /**
   * Calculates the inertia in the local frame for this shape.
   * @see http://en.wikipedia.org/wiki/List_of_moments_of_inertia
   */


  calculateLocalInertia(mass, target) {
    throw "calculateLocalInertia() not implemented for shape type " + this.type;
  }
  /**
   * @todo use abstract for these kind of methods
   */


  calculateWorldAABB(pos, quat, min, max) {
    throw "calculateWorldAABB() not implemented for shape type " + this.type;
  }

}

Shape.idCounter = 0;
Shape.types = SHAPE_TYPES;
/**
 * Transformation utilities.
 */

class Transform {
  /**
   * position
   */

  /**
   * quaternion
   */
  constructor(options) {
    if (options === void 0) {
      options = {};
    }

    this.position = void 0;
    this.quaternion = void 0;
    this.position = new Vec3();
    this.quaternion = new Quaternion();

    if (options.position) {
      this.position.copy(options.position);
    }

    if (options.quaternion) {
      this.quaternion.copy(options.quaternion);
    }
  }
  /**
   * Get a global point in local transform coordinates.
   */


  pointToLocal(worldPoint, result) {
    return Transform.pointToLocalFrame(this.position, this.quaternion, worldPoint, result);
  }
  /**
   * Get a local point in global transform coordinates.
   */


  pointToWorld(localPoint, result) {
    return Transform.pointToWorldFrame(this.position, this.quaternion, localPoint, result);
  }
  /**
   * vectorToWorldFrame
   */


  vectorToWorldFrame(localVector, result) {
    if (result === void 0) {
      result = new Vec3();
    }

    this.quaternion.vmult(localVector, result);
    return result;
  }
  /**
   * pointToLocalFrame
   */


  static pointToLocalFrame(position, quaternion, worldPoint, result) {
    if (result === void 0) {
      result = new Vec3();
    }

    worldPoint.vsub(position, result);
    quaternion.conjugate(tmpQuat$1);
    tmpQuat$1.vmult(result, result);
    return result;
  }
  /**
   * pointToWorldFrame
   */


  static pointToWorldFrame(position, quaternion, localPoint, result) {
    if (result === void 0) {
      result = new Vec3();
    }

    quaternion.vmult(localPoint, result);
    result.vadd(position, result);
    return result;
  }
  /**
   * vectorToWorldFrame
   */


  static vectorToWorldFrame(quaternion, localVector, result) {
    if (result === void 0) {
      result = new Vec3();
    }

    quaternion.vmult(localVector, result);
    return result;
  }
  /**
   * vectorToLocalFrame
   */


  static vectorToLocalFrame(position, quaternion, worldVector, result) {
    if (result === void 0) {
      result = new Vec3();
    }

    quaternion.w *= -1;
    quaternion.vmult(worldVector, result);
    quaternion.w *= -1;
    return result;
  }

}

const tmpQuat$1 = new Quaternion();
/**
 * A set of polygons describing a convex shape.
 *
 * The shape MUST be convex for the code to work properly. No polygons may be coplanar (contained
 * in the same 3D plane), instead these should be merged into one polygon.
 *
 * @author qiao / https://github.com/qiao (original author, see https://github.com/qiao/three.js/commit/85026f0c769e4000148a67d45a9e9b9c5108836f)
 * @author schteppe / https://github.com/schteppe
 * @see https://www.altdevblogaday.com/2011/05/13/contact-generation-between-3d-convex-meshes/
 *
 * @todo Move the clipping functions to ContactGenerator?
 * @todo Automatically merge coplanar polygons in constructor.
 * @example
 *     const convexShape = new CANNON.ConvexPolyhedron({ vertices, faces })
 *     const convexBody = new CANNON.Body({ mass: 1, shape: convexShape })
 *     world.addBody(convexBody)
 */

class ConvexPolyhedron extends Shape {
  /** vertices */

  /**
   * Array of integer arrays, indicating which vertices each face consists of
   */

  /** faceNormals */

  /** worldVertices */

  /** worldVerticesNeedsUpdate */

  /** worldFaceNormals */

  /** worldFaceNormalsNeedsUpdate */

  /**
   * If given, these locally defined, normalized axes are the only ones being checked when doing separating axis check.
   */

  /** uniqueEdges */

  /**
   * @param vertices An array of Vec3's
   * @param faces Array of integer arrays, describing which vertices that is included in each face.
   */
  constructor(props) {
    if (props === void 0) {
      props = {};
    }

    const {
      vertices = [],
      faces = [],
      normals = [],
      axes,
      boundingSphereRadius
    } = props;
    super({
      type: Shape.types.CONVEXPOLYHEDRON
    });
    this.vertices = void 0;
    this.faces = void 0;
    this.faceNormals = void 0;
    this.worldVertices = void 0;
    this.worldVerticesNeedsUpdate = void 0;
    this.worldFaceNormals = void 0;
    this.worldFaceNormalsNeedsUpdate = void 0;
    this.uniqueAxes = void 0;
    this.uniqueEdges = void 0;
    this.vertices = vertices;
    this.faces = faces;
    this.faceNormals = normals;

    if (this.faceNormals.length === 0) {
      this.computeNormals();
    }

    if (!boundingSphereRadius) {
      this.updateBoundingSphereRadius();
    } else {
      this.boundingSphereRadius = boundingSphereRadius;
    }

    this.worldVertices = []; // World transformed version of .vertices

    this.worldVerticesNeedsUpdate = true;
    this.worldFaceNormals = []; // World transformed version of .faceNormals

    this.worldFaceNormalsNeedsUpdate = true;
    this.uniqueAxes = axes ? axes.slice() : null;
    this.uniqueEdges = [];
    this.computeEdges();
  }
  /**
   * Computes uniqueEdges
   */


  computeEdges() {
    const faces = this.faces;
    const vertices = this.vertices;
    const edges = this.uniqueEdges;
    edges.length = 0;
    const edge = new Vec3();

    for (let i = 0; i !== faces.length; i++) {
      const face = faces[i];
      const numVertices = face.length;

      for (let j = 0; j !== numVertices; j++) {
        const k = (j + 1) % numVertices;
        vertices[face[j]].vsub(vertices[face[k]], edge);
        edge.normalize();
        let found = false;

        for (let p = 0; p !== edges.length; p++) {
          if (edges[p].almostEquals(edge) || edges[p].almostEquals(edge)) {
            found = true;
            break;
          }
        }

        if (!found) {
          edges.push(edge.clone());
        }
      }
    }
  }
  /**
   * Compute the normals of the faces.
   * Will reuse existing Vec3 objects in the `faceNormals` array if they exist.
   */


  computeNormals() {
    this.faceNormals.length = this.faces.length; // Generate normals

    for (let i = 0; i < this.faces.length; i++) {
      // Check so all vertices exists for this face
      for (let j = 0; j < this.faces[i].length; j++) {
        if (!this.vertices[this.faces[i][j]]) {
          throw new Error("Vertex " + this.faces[i][j] + " not found!");
        }
      }

      const n = this.faceNormals[i] || new Vec3();
      this.getFaceNormal(i, n);
      n.negate(n);
      this.faceNormals[i] = n;
      const vertex = this.vertices[this.faces[i][0]];

      if (n.dot(vertex) < 0) {
        console.error(".faceNormals[" + i + "] = Vec3(" + n.toString() + ") looks like it points into the shape? The vertices follow. Make sure they are ordered CCW around the normal, using the right hand rule.");

        for (let j = 0; j < this.faces[i].length; j++) {
          console.warn(".vertices[" + this.faces[i][j] + "] = Vec3(" + this.vertices[this.faces[i][j]].toString() + ")");
        }
      }
    }
  }
  /**
   * Compute the normal of a face from its vertices
   */


  getFaceNormal(i, target) {
    const f = this.faces[i];
    const va = this.vertices[f[0]];
    const vb = this.vertices[f[1]];
    const vc = this.vertices[f[2]];
    ConvexPolyhedron.computeNormal(va, vb, vc, target);
  }
  /**
   * Get face normal given 3 vertices
   */


  static computeNormal(va, vb, vc, target) {
    const cb = new Vec3();
    const ab = new Vec3();
    vb.vsub(va, ab);
    vc.vsub(vb, cb);
    cb.cross(ab, target);

    if (!target.isZero()) {
      target.normalize();
    }
  }
  /**
   * @param minDist Clamp distance
   * @param result The an array of contact point objects, see clipFaceAgainstHull
   */


  clipAgainstHull(posA, quatA, hullB, posB, quatB, separatingNormal, minDist, maxDist, result) {
    const WorldNormal = new Vec3();
    let closestFaceB = -1;
    let dmax = -Number.MAX_VALUE;

    for (let face = 0; face < hullB.faces.length; face++) {
      WorldNormal.copy(hullB.faceNormals[face]);
      quatB.vmult(WorldNormal, WorldNormal);
      const d = WorldNormal.dot(separatingNormal);

      if (d > dmax) {
        dmax = d;
        closestFaceB = face;
      }
    }

    const worldVertsB1 = [];

    for (let i = 0; i < hullB.faces[closestFaceB].length; i++) {
      const b = hullB.vertices[hullB.faces[closestFaceB][i]];
      const worldb = new Vec3();
      worldb.copy(b);
      quatB.vmult(worldb, worldb);
      posB.vadd(worldb, worldb);
      worldVertsB1.push(worldb);
    }

    if (closestFaceB >= 0) {
      this.clipFaceAgainstHull(separatingNormal, posA, quatA, worldVertsB1, minDist, maxDist, result);
    }
  }
  /**
   * Find the separating axis between this hull and another
   * @param target The target vector to save the axis in
   * @return Returns false if a separation is found, else true
   */


  findSeparatingAxis(hullB, posA, quatA, posB, quatB, target, faceListA, faceListB) {
    const faceANormalWS3 = new Vec3();
    const Worldnormal1 = new Vec3();
    const deltaC = new Vec3();
    const worldEdge0 = new Vec3();
    const worldEdge1 = new Vec3();
    const Cross = new Vec3();
    let dmin = Number.MAX_VALUE;
    const hullA = this;

    if (!hullA.uniqueAxes) {
      const numFacesA = faceListA ? faceListA.length : hullA.faces.length; // Test face normals from hullA

      for (let i = 0; i < numFacesA; i++) {
        const fi = faceListA ? faceListA[i] : i; // Get world face normal

        faceANormalWS3.copy(hullA.faceNormals[fi]);
        quatA.vmult(faceANormalWS3, faceANormalWS3);
        const d = hullA.testSepAxis(faceANormalWS3, hullB, posA, quatA, posB, quatB);

        if (d === false) {
          return false;
        }

        if (d < dmin) {
          dmin = d;
          target.copy(faceANormalWS3);
        }
      }
    } else {
      // Test unique axes
      for (let i = 0; i !== hullA.uniqueAxes.length; i++) {
        // Get world axis
        quatA.vmult(hullA.uniqueAxes[i], faceANormalWS3);
        const d = hullA.testSepAxis(faceANormalWS3, hullB, posA, quatA, posB, quatB);

        if (d === false) {
          return false;
        }

        if (d < dmin) {
          dmin = d;
          target.copy(faceANormalWS3);
        }
      }
    }

    if (!hullB.uniqueAxes) {
      // Test face normals from hullB
      const numFacesB = faceListB ? faceListB.length : hullB.faces.length;

      for (let i = 0; i < numFacesB; i++) {
        const fi = faceListB ? faceListB[i] : i;
        Worldnormal1.copy(hullB.faceNormals[fi]);
        quatB.vmult(Worldnormal1, Worldnormal1);
        const d = hullA.testSepAxis(Worldnormal1, hullB, posA, quatA, posB, quatB);

        if (d === false) {
          return false;
        }

        if (d < dmin) {
          dmin = d;
          target.copy(Worldnormal1);
        }
      }
    } else {
      // Test unique axes in B
      for (let i = 0; i !== hullB.uniqueAxes.length; i++) {
        quatB.vmult(hullB.uniqueAxes[i], Worldnormal1);
        const d = hullA.testSepAxis(Worldnormal1, hullB, posA, quatA, posB, quatB);

        if (d === false) {
          return false;
        }

        if (d < dmin) {
          dmin = d;
          target.copy(Worldnormal1);
        }
      }
    } // Test edges


    for (let e0 = 0; e0 !== hullA.uniqueEdges.length; e0++) {
      // Get world edge
      quatA.vmult(hullA.uniqueEdges[e0], worldEdge0);

      for (let e1 = 0; e1 !== hullB.uniqueEdges.length; e1++) {
        // Get world edge 2
        quatB.vmult(hullB.uniqueEdges[e1], worldEdge1);
        worldEdge0.cross(worldEdge1, Cross);

        if (!Cross.almostZero()) {
          Cross.normalize();
          const dist = hullA.testSepAxis(Cross, hullB, posA, quatA, posB, quatB);

          if (dist === false) {
            return false;
          }

          if (dist < dmin) {
            dmin = dist;
            target.copy(Cross);
          }
        }
      }
    }

    posB.vsub(posA, deltaC);

    if (deltaC.dot(target) > 0.0) {
      target.negate(target);
    }

    return true;
  }
  /**
   * Test separating axis against two hulls. Both hulls are projected onto the axis and the overlap size is returned if there is one.
   * @return The overlap depth, or FALSE if no penetration.
   */


  testSepAxis(axis, hullB, posA, quatA, posB, quatB) {
    const hullA = this;
    ConvexPolyhedron.project(hullA, axis, posA, quatA, maxminA);
    ConvexPolyhedron.project(hullB, axis, posB, quatB, maxminB);
    const maxA = maxminA[0];
    const minA = maxminA[1];
    const maxB = maxminB[0];
    const minB = maxminB[1];

    if (maxA < minB || maxB < minA) {
      return false; // Separated
    }

    const d0 = maxA - minB;
    const d1 = maxB - minA;
    const depth = d0 < d1 ? d0 : d1;
    return depth;
  }
  /**
   * calculateLocalInertia
   */


  calculateLocalInertia(mass, target) {
    // Approximate with box inertia
    // Exact inertia calculation is overkill, but see http://geometrictools.com/Documentation/PolyhedralMassProperties.pdf for the correct way to do it
    const aabbmax = new Vec3();
    const aabbmin = new Vec3();
    this.computeLocalAABB(aabbmin, aabbmax);
    const x = aabbmax.x - aabbmin.x;
    const y = aabbmax.y - aabbmin.y;
    const z = aabbmax.z - aabbmin.z;
    target.x = 1.0 / 12.0 * mass * (2 * y * 2 * y + 2 * z * 2 * z);
    target.y = 1.0 / 12.0 * mass * (2 * x * 2 * x + 2 * z * 2 * z);
    target.z = 1.0 / 12.0 * mass * (2 * y * 2 * y + 2 * x * 2 * x);
  }
  /**
   * @param face_i Index of the face
   */


  getPlaneConstantOfFace(face_i) {
    const f = this.faces[face_i];
    const n = this.faceNormals[face_i];
    const v = this.vertices[f[0]];
    const c = -n.dot(v);
    return c;
  }
  /**
   * Clip a face against a hull.
   * @param worldVertsB1 An array of Vec3 with vertices in the world frame.
   * @param minDist Distance clamping
   * @param Array result Array to store resulting contact points in. Will be objects with properties: point, depth, normal. These are represented in world coordinates.
   */


  clipFaceAgainstHull(separatingNormal, posA, quatA, worldVertsB1, minDist, maxDist, result) {
    const faceANormalWS = new Vec3();
    const edge0 = new Vec3();
    const WorldEdge0 = new Vec3();
    const worldPlaneAnormal1 = new Vec3();
    const planeNormalWS1 = new Vec3();
    const worldA1 = new Vec3();
    const localPlaneNormal = new Vec3();
    const planeNormalWS = new Vec3();
    const hullA = this;
    const worldVertsB2 = [];
    const pVtxIn = worldVertsB1;
    const pVtxOut = worldVertsB2;
    let closestFaceA = -1;
    let dmin = Number.MAX_VALUE; // Find the face with normal closest to the separating axis

    for (let face = 0; face < hullA.faces.length; face++) {
      faceANormalWS.copy(hullA.faceNormals[face]);
      quatA.vmult(faceANormalWS, faceANormalWS);
      const d = faceANormalWS.dot(separatingNormal);

      if (d < dmin) {
        dmin = d;
        closestFaceA = face;
      }
    }

    if (closestFaceA < 0) {
      return;
    } // Get the face and construct connected faces


    const polyA = hullA.faces[closestFaceA];
    polyA.connectedFaces = [];

    for (let i = 0; i < hullA.faces.length; i++) {
      for (let j = 0; j < hullA.faces[i].length; j++) {
        if (
        /* Sharing a vertex*/
        polyA.indexOf(hullA.faces[i][j]) !== -1 &&
        /* Not the one we are looking for connections from */
        i !== closestFaceA &&
        /* Not already added */
        polyA.connectedFaces.indexOf(i) === -1) {
          polyA.connectedFaces.push(i);
        }
      }
    } // Clip the polygon to the back of the planes of all faces of hull A,
    // that are adjacent to the witness face


    const numVerticesA = polyA.length;

    for (let i = 0; i < numVerticesA; i++) {
      const a = hullA.vertices[polyA[i]];
      const b = hullA.vertices[polyA[(i + 1) % numVerticesA]];
      a.vsub(b, edge0);
      WorldEdge0.copy(edge0);
      quatA.vmult(WorldEdge0, WorldEdge0);
      posA.vadd(WorldEdge0, WorldEdge0);
      worldPlaneAnormal1.copy(this.faceNormals[closestFaceA]);
      quatA.vmult(worldPlaneAnormal1, worldPlaneAnormal1);
      posA.vadd(worldPlaneAnormal1, worldPlaneAnormal1);
      WorldEdge0.cross(worldPlaneAnormal1, planeNormalWS1);
      planeNormalWS1.negate(planeNormalWS1);
      worldA1.copy(a);
      quatA.vmult(worldA1, worldA1);
      posA.vadd(worldA1, worldA1);
      const otherFace = polyA.connectedFaces[i];
      localPlaneNormal.copy(this.faceNormals[otherFace]);
      const localPlaneEq = this.getPlaneConstantOfFace(otherFace);
      planeNormalWS.copy(localPlaneNormal);
      quatA.vmult(planeNormalWS, planeNormalWS);
      const planeEqWS = localPlaneEq - planeNormalWS.dot(posA); // Clip face against our constructed plane

      this.clipFaceAgainstPlane(pVtxIn, pVtxOut, planeNormalWS, planeEqWS); // Throw away all clipped points, but save the remaining until next clip

      while (pVtxIn.length) {
        pVtxIn.shift();
      }

      while (pVtxOut.length) {
        pVtxIn.push(pVtxOut.shift());
      }
    } // only keep contact points that are behind the witness face


    localPlaneNormal.copy(this.faceNormals[closestFaceA]);
    const localPlaneEq = this.getPlaneConstantOfFace(closestFaceA);
    planeNormalWS.copy(localPlaneNormal);
    quatA.vmult(planeNormalWS, planeNormalWS);
    const planeEqWS = localPlaneEq - planeNormalWS.dot(posA);

    for (let i = 0; i < pVtxIn.length; i++) {
      let depth = planeNormalWS.dot(pVtxIn[i]) + planeEqWS; // ???

      if (depth <= minDist) {
        console.log("clamped: depth=" + depth + " to minDist=" + minDist);
        depth = minDist;
      }

      if (depth <= maxDist) {
        const point = pVtxIn[i];

        if (depth <= 1e-6) {
          const p = {
            point,
            normal: planeNormalWS,
            depth
          };
          result.push(p);
        }
      }
    }
  }
  /**
   * Clip a face in a hull against the back of a plane.
   * @param planeConstant The constant in the mathematical plane equation
   */


  clipFaceAgainstPlane(inVertices, outVertices, planeNormal, planeConstant) {
    let n_dot_first;
    let n_dot_last;
    const numVerts = inVertices.length;

    if (numVerts < 2) {
      return outVertices;
    }

    let firstVertex = inVertices[inVertices.length - 1];
    let lastVertex = inVertices[0];
    n_dot_first = planeNormal.dot(firstVertex) + planeConstant;

    for (let vi = 0; vi < numVerts; vi++) {
      lastVertex = inVertices[vi];
      n_dot_last = planeNormal.dot(lastVertex) + planeConstant;

      if (n_dot_first < 0) {
        if (n_dot_last < 0) {
          // Start < 0, end < 0, so output lastVertex
          const newv = new Vec3();
          newv.copy(lastVertex);
          outVertices.push(newv);
        } else {
          // Start < 0, end >= 0, so output intersection
          const newv = new Vec3();
          firstVertex.lerp(lastVertex, n_dot_first / (n_dot_first - n_dot_last), newv);
          outVertices.push(newv);
        }
      } else {
        if (n_dot_last < 0) {
          // Start >= 0, end < 0 so output intersection and end
          const newv = new Vec3();
          firstVertex.lerp(lastVertex, n_dot_first / (n_dot_first - n_dot_last), newv);
          outVertices.push(newv);
          outVertices.push(lastVertex);
        }
      }

      firstVertex = lastVertex;
      n_dot_first = n_dot_last;
    }

    return outVertices;
  }
  /**
   * Updates `.worldVertices` and sets `.worldVerticesNeedsUpdate` to false.
   */


  computeWorldVertices(position, quat) {
    while (this.worldVertices.length < this.vertices.length) {
      this.worldVertices.push(new Vec3());
    }

    const verts = this.vertices;
    const worldVerts = this.worldVertices;

    for (let i = 0; i !== this.vertices.length; i++) {
      quat.vmult(verts[i], worldVerts[i]);
      position.vadd(worldVerts[i], worldVerts[i]);
    }

    this.worldVerticesNeedsUpdate = false;
  }

  computeLocalAABB(aabbmin, aabbmax) {
    const vertices = this.vertices;
    aabbmin.set(Number.MAX_VALUE, Number.MAX_VALUE, Number.MAX_VALUE);
    aabbmax.set(-Number.MAX_VALUE, -Number.MAX_VALUE, -Number.MAX_VALUE);

    for (let i = 0; i < this.vertices.length; i++) {
      const v = vertices[i];

      if (v.x < aabbmin.x) {
        aabbmin.x = v.x;
      } else if (v.x > aabbmax.x) {
        aabbmax.x = v.x;
      }

      if (v.y < aabbmin.y) {
        aabbmin.y = v.y;
      } else if (v.y > aabbmax.y) {
        aabbmax.y = v.y;
      }

      if (v.z < aabbmin.z) {
        aabbmin.z = v.z;
      } else if (v.z > aabbmax.z) {
        aabbmax.z = v.z;
      }
    }
  }
  /**
   * Updates `worldVertices` and sets `worldVerticesNeedsUpdate` to false.
   */


  computeWorldFaceNormals(quat) {
    const N = this.faceNormals.length;

    while (this.worldFaceNormals.length < N) {
      this.worldFaceNormals.push(new Vec3());
    }

    const normals = this.faceNormals;
    const worldNormals = this.worldFaceNormals;

    for (let i = 0; i !== N; i++) {
      quat.vmult(normals[i], worldNormals[i]);
    }

    this.worldFaceNormalsNeedsUpdate = false;
  }
  /**
   * updateBoundingSphereRadius
   */


  updateBoundingSphereRadius() {
    // Assume points are distributed with local (0,0,0) as center
    let max2 = 0;
    const verts = this.vertices;

    for (let i = 0; i !== verts.length; i++) {
      const norm2 = verts[i].lengthSquared();

      if (norm2 > max2) {
        max2 = norm2;
      }
    }

    this.boundingSphereRadius = Math.sqrt(max2);
  }
  /**
   * calculateWorldAABB
   */


  calculateWorldAABB(pos, quat, min, max) {
    const verts = this.vertices;
    let minx;
    let miny;
    let minz;
    let maxx;
    let maxy;
    let maxz;
    let tempWorldVertex = new Vec3();

    for (let i = 0; i < verts.length; i++) {
      tempWorldVertex.copy(verts[i]);
      quat.vmult(tempWorldVertex, tempWorldVertex);
      pos.vadd(tempWorldVertex, tempWorldVertex);
      const v = tempWorldVertex;

      if (minx === undefined || v.x < minx) {
        minx = v.x;
      }

      if (maxx === undefined || v.x > maxx) {
        maxx = v.x;
      }

      if (miny === undefined || v.y < miny) {
        miny = v.y;
      }

      if (maxy === undefined || v.y > maxy) {
        maxy = v.y;
      }

      if (minz === undefined || v.z < minz) {
        minz = v.z;
      }

      if (maxz === undefined || v.z > maxz) {
        maxz = v.z;
      }
    }

    min.set(minx, miny, minz);
    max.set(maxx, maxy, maxz);
  }
  /**
   * Get approximate convex volume
   */


  volume() {
    return 4.0 * Math.PI * this.boundingSphereRadius / 3.0;
  }
  /**
   * Get an average of all the vertices positions
   */


  getAveragePointLocal(target) {
    if (target === void 0) {
      target = new Vec3();
    }

    const verts = this.vertices;

    for (let i = 0; i < verts.length; i++) {
      target.vadd(verts[i], target);
    }

    target.scale(1 / verts.length, target);
    return target;
  }
  /**
   * Transform all local points. Will change the .vertices
   */


  transformAllPoints(offset, quat) {
    const n = this.vertices.length;
    const verts = this.vertices; // Apply rotation

    if (quat) {
      // Rotate vertices
      for (let i = 0; i < n; i++) {
        const v = verts[i];
        quat.vmult(v, v);
      } // Rotate face normals


      for (let i = 0; i < this.faceNormals.length; i++) {
        const v = this.faceNormals[i];
        quat.vmult(v, v);
      }
      /*
            // Rotate edges
            for(let i=0; i<this.uniqueEdges.length; i++){
                const v = this.uniqueEdges[i];
                quat.vmult(v,v);
            }*/

    } // Apply offset


    if (offset) {
      for (let i = 0; i < n; i++) {
        const v = verts[i];
        v.vadd(offset, v);
      }
    }
  }
  /**
   * Checks whether p is inside the polyhedra. Must be in local coords.
   * The point lies outside of the convex hull of the other points if and only if the direction
   * of all the vectors from it to those other points are on less than one half of a sphere around it.
   * @param p A point given in local coordinates
   */


  pointIsInside(p) {
    const verts = this.vertices;
    const faces = this.faces;
    const normals = this.faceNormals;
    const pointInside = new Vec3();
    this.getAveragePointLocal(pointInside);

    for (let i = 0; i < this.faces.length; i++) {
      let n = normals[i];
      const v = verts[faces[i][0]]; // We only need one point in the face
      // This dot product determines which side of the edge the point is

      const vToP = new Vec3();
      p.vsub(v, vToP);
      const r1 = n.dot(vToP);
      const vToPointInside = new Vec3();
      pointInside.vsub(v, vToPointInside);
      const r2 = n.dot(vToPointInside);

      if (r1 < 0 && r2 > 0 || r1 > 0 && r2 < 0) {
        return false; // Encountered some other sign. Exit.
      }
    } // If we got here, all dot products were of the same sign.


    return -1;
  }
  /**
   * Get max and min dot product of a convex hull at position (pos,quat) projected onto an axis.
   * Results are saved in the array maxmin.
   * @param result result[0] and result[1] will be set to maximum and minimum, respectively.
   */


  static project(shape, axis, pos, quat, result) {
    const n = shape.vertices.length;
    const localAxis = project_localAxis;
    let max = 0;
    let min = 0;
    const localOrigin = project_localOrigin;
    const vs = shape.vertices;
    localOrigin.setZero(); // Transform the axis to local

    Transform.vectorToLocalFrame(pos, quat, axis, localAxis);
    Transform.pointToLocalFrame(pos, quat, localOrigin, localOrigin);
    const add = localOrigin.dot(localAxis);
    min = max = vs[0].dot(localAxis);

    for (let i = 1; i < n; i++) {
      const val = vs[i].dot(localAxis);

      if (val > max) {
        max = val;
      }

      if (val < min) {
        min = val;
      }
    }

    min -= add;
    max -= add;

    if (min > max) {
      // Inconsistent - swap
      const temp = min;
      min = max;
      max = temp;
    } // Output


    result[0] = max;
    result[1] = min;
  }

}

const maxminA = [];
const maxminB = [];
const project_localAxis = new Vec3();
const project_localOrigin = new Vec3();
/**
 * A 3d box shape.
 * @example
 *     const size = 1
 *     const halfExtents = new CANNON.Vec3(size, size, size)
 *     const boxShape = new CANNON.Box(halfExtents)
 *     const boxBody = new CANNON.Body({ mass: 1, shape: boxShape })
 *     world.addBody(boxBody)
 */

class Box extends Shape {
  /**
   * The half extents of the box.
   */

  /**
   * Used by the contact generator to make contacts with other convex polyhedra for example.
   */
  constructor(halfExtents) {
    super({
      type: Shape.types.BOX
    });
    this.halfExtents = void 0;
    this.convexPolyhedronRepresentation = void 0;
    this.halfExtents = halfExtents;
    this.convexPolyhedronRepresentation = null;
    this.updateConvexPolyhedronRepresentation();
    this.updateBoundingSphereRadius();
  }
  /**
   * Updates the local convex polyhedron representation used for some collisions.
   */


  updateConvexPolyhedronRepresentation() {
    const sx = this.halfExtents.x;
    const sy = this.halfExtents.y;
    const sz = this.halfExtents.z;
    const V = Vec3;
    const vertices = [new V(-sx, -sy, -sz), new V(sx, -sy, -sz), new V(sx, sy, -sz), new V(-sx, sy, -sz), new V(-sx, -sy, sz), new V(sx, -sy, sz), new V(sx, sy, sz), new V(-sx, sy, sz)];
    const faces = [[3, 2, 1, 0], // -z
    [4, 5, 6, 7], // +z
    [5, 4, 0, 1], // -y
    [2, 3, 7, 6], // +y
    [0, 4, 7, 3], // -x
    [1, 2, 6, 5] // +x
    ];
    const axes = [new V(0, 0, 1), new V(0, 1, 0), new V(1, 0, 0)];
    const h = new ConvexPolyhedron({
      vertices,
      faces,
      axes
    });
    this.convexPolyhedronRepresentation = h;
    h.material = this.material;
  }
  /**
   * Calculate the inertia of the box.
   */


  calculateLocalInertia(mass, target) {
    if (target === void 0) {
      target = new Vec3();
    }

    Box.calculateInertia(this.halfExtents, mass, target);
    return target;
  }

  static calculateInertia(halfExtents, mass, target) {
    const e = halfExtents;
    target.x = 1.0 / 12.0 * mass * (2 * e.y * 2 * e.y + 2 * e.z * 2 * e.z);
    target.y = 1.0 / 12.0 * mass * (2 * e.x * 2 * e.x + 2 * e.z * 2 * e.z);
    target.z = 1.0 / 12.0 * mass * (2 * e.y * 2 * e.y + 2 * e.x * 2 * e.x);
  }
  /**
   * Get the box 6 side normals
   * @param sixTargetVectors An array of 6 vectors, to store the resulting side normals in.
   * @param quat Orientation to apply to the normal vectors. If not provided, the vectors will be in respect to the local frame.
   */


  getSideNormals(sixTargetVectors, quat) {
    const sides = sixTargetVectors;
    const ex = this.halfExtents;
    sides[0].set(ex.x, 0, 0);
    sides[1].set(0, ex.y, 0);
    sides[2].set(0, 0, ex.z);
    sides[3].set(-ex.x, 0, 0);
    sides[4].set(0, -ex.y, 0);
    sides[5].set(0, 0, -ex.z);

    if (quat !== undefined) {
      for (let i = 0; i !== sides.length; i++) {
        quat.vmult(sides[i], sides[i]);
      }
    }

    return sides;
  }
  /**
   * Returns the volume of the box.
   */


  volume() {
    return 8.0 * this.halfExtents.x * this.halfExtents.y * this.halfExtents.z;
  }
  /**
   * updateBoundingSphereRadius
   */


  updateBoundingSphereRadius() {
    this.boundingSphereRadius = this.halfExtents.length();
  }
  /**
   * forEachWorldCorner
   */


  forEachWorldCorner(pos, quat, callback) {
    const e = this.halfExtents;
    const corners = [[e.x, e.y, e.z], [-e.x, e.y, e.z], [-e.x, -e.y, e.z], [-e.x, -e.y, -e.z], [e.x, -e.y, -e.z], [e.x, e.y, -e.z], [-e.x, e.y, -e.z], [e.x, -e.y, e.z]];

    for (let i = 0; i < corners.length; i++) {
      worldCornerTempPos.set(corners[i][0], corners[i][1], corners[i][2]);
      quat.vmult(worldCornerTempPos, worldCornerTempPos);
      pos.vadd(worldCornerTempPos, worldCornerTempPos);
      callback(worldCornerTempPos.x, worldCornerTempPos.y, worldCornerTempPos.z);
    }
  }
  /**
   * calculateWorldAABB
   */


  calculateWorldAABB(pos, quat, min, max) {
    const e = this.halfExtents;
    worldCornersTemp[0].set(e.x, e.y, e.z);
    worldCornersTemp[1].set(-e.x, e.y, e.z);
    worldCornersTemp[2].set(-e.x, -e.y, e.z);
    worldCornersTemp[3].set(-e.x, -e.y, -e.z);
    worldCornersTemp[4].set(e.x, -e.y, -e.z);
    worldCornersTemp[5].set(e.x, e.y, -e.z);
    worldCornersTemp[6].set(-e.x, e.y, -e.z);
    worldCornersTemp[7].set(e.x, -e.y, e.z);
    const wc = worldCornersTemp[0];
    quat.vmult(wc, wc);
    pos.vadd(wc, wc);
    max.copy(wc);
    min.copy(wc);

    for (let i = 1; i < 8; i++) {
      const wc = worldCornersTemp[i];
      quat.vmult(wc, wc);
      pos.vadd(wc, wc);
      const x = wc.x;
      const y = wc.y;
      const z = wc.z;

      if (x > max.x) {
        max.x = x;
      }

      if (y > max.y) {
        max.y = y;
      }

      if (z > max.z) {
        max.z = z;
      }

      if (x < min.x) {
        min.x = x;
      }

      if (y < min.y) {
        min.y = y;
      }

      if (z < min.z) {
        min.z = z;
      }
    } // Get each axis max
    // min.set(Infinity,Infinity,Infinity);
    // max.set(-Infinity,-Infinity,-Infinity);
    // this.forEachWorldCorner(pos,quat,function(x,y,z){
    //     if(x > max.x){
    //         max.x = x;
    //     }
    //     if(y > max.y){
    //         max.y = y;
    //     }
    //     if(z > max.z){
    //         max.z = z;
    //     }
    //     if(x < min.x){
    //         min.x = x;
    //     }
    //     if(y < min.y){
    //         min.y = y;
    //     }
    //     if(z < min.z){
    //         min.z = z;
    //     }
    // });

  }

}

const worldCornerTempPos = new Vec3();
const worldCornersTemp = [new Vec3(), new Vec3(), new Vec3(), new Vec3(), new Vec3(), new Vec3(), new Vec3(), new Vec3()];
/**
 * BODY_TYPES
 */

const BODY_TYPES = {
  /** DYNAMIC */
  DYNAMIC: 1,

  /** STATIC */
  STATIC: 2,

  /** KINEMATIC */
  KINEMATIC: 4
};
/**
 * BodyType
 */

/**
 * BODY_SLEEP_STATES
 */

const BODY_SLEEP_STATES = {
  /** AWAKE */
  AWAKE: 0,

  /** SLEEPY */
  SLEEPY: 1,

  /** SLEEPING */
  SLEEPING: 2
};
/**
 * BodySleepState
 */

/**
 * Base class for all body types.
 * @example
 *     const shape = new CANNON.Sphere(1)
 *     const body = new CANNON.Body({
 *       mass: 1,
 *       shape,
 *     })
 *     world.addBody(body)
 */

class Body extends EventTarget {
  /**
   * Dispatched after two bodies collide. This event is dispatched on each
   * of the two bodies involved in the collision.
   * @event collide
   * @param body The body that was involved in the collision.
   * @param contact The details of the collision.
   */

  /**
   * A dynamic body is fully simulated. Can be moved manually by the user, but normally they move according to forces. A dynamic body can collide with all body types. A dynamic body always has finite, non-zero mass.
   */

  /**
   * A static body does not move during simulation and behaves as if it has infinite mass. Static bodies can be moved manually by setting the position of the body. The velocity of a static body is always zero. Static bodies do not collide with other static or kinematic bodies.
   */

  /**
   * A kinematic body moves under simulation according to its velocity. They do not respond to forces. They can be moved manually, but normally a kinematic body is moved by setting its velocity. A kinematic body behaves as if it has infinite mass. Kinematic bodies do not collide with other static or kinematic bodies.
   */

  /**
   * AWAKE
   */

  /**
   * SLEEPY
   */

  /**
   * SLEEPING
   */

  /**
   * Dispatched after a sleeping body has woken up.
   * @event wakeup
   */

  /**
   * Dispatched after a body has gone in to the sleepy state.
   * @event sleepy
   */

  /**
   * Dispatched after a body has fallen asleep.
   * @event sleep
   */

  /**
   * Identifier of the body.
   */

  /**
   * Position of body in World.bodies. Updated by World and used in ArrayCollisionMatrix.
   */

  /**
   * Reference to the world the body is living in.
   */

  /**
   * Callback function that is used BEFORE stepping the system. Use it to apply forces, for example. Inside the function, "this" will refer to this Body object. Deprecated - use World events instead.
   * @deprecated Use World events instead
   */

  /**
   * Callback function that is used AFTER stepping the system. Inside the function, "this" will refer to this Body object. Deprecated - use World events instead.
   * @deprecated Use World events instead
   */

  /**
   * The collision group the body belongs to.
   * @default 1
   */

  /**
   * The collision group the body can collide with.
   * @default -1
   */

  /**
   * Whether to produce contact forces when in contact with other bodies. Note that contacts will be generated, but they will be disabled - i.e. "collide" events will be raised, but forces will not be altered.
   */

  /**
   * World space position of the body.
   */

  /**
   * Interpolated position of the body.
   */

  /**
   * Initial position of the body.
   */

  /**
   * World space velocity of the body.
   */

  /**
   * Initial velocity of the body.
   */

  /**
   * Linear force on the body in world space.
   */

  /**
   * The mass of the body.
   * @default 0
   */

  /**
   * The physics material of the body. It defines the body interaction with other bodies.
   */

  /**
   * How much to damp the body velocity each step. It can go from 0 to 1.
   * @default 0.01
   */

  /**
   * One of: `Body.DYNAMIC`, `Body.STATIC` and `Body.KINEMATIC`.
   */

  /**
   * If true, the body will automatically fall to sleep.
   * @default true
   */

  /**
   * Current sleep state.
   */

  /**
   * If the speed (the norm of the velocity) is smaller than this value, the body is considered sleepy.
   * @default 0.1
   */

  /**
   * If the body has been sleepy for this sleepTimeLimit seconds, it is considered sleeping.
   * @default 1
   */

  /**
   * World space rotational force on the body, around center of mass.
   */

  /**
   * World space orientation of the body.
   */

  /**
   * Initial quaternion of the body.
   */

  /**
   * Interpolated orientation of the body.
   */

  /**
   * Angular velocity of the body, in world space. Think of the angular velocity as a vector, which the body rotates around. The length of this vector determines how fast (in radians per second) the body rotates.
   */

  /**
   * Initial angular velocity of the body.
   */

  /**
   * List of Shapes that have been added to the body.
   */

  /**
   * Position of each Shape in the body, given in local Body space.
   */

  /**
   * Orientation of each Shape, given in local Body space.
   */

  /**
   * The inertia of the body.
   */

  /**
   * Set to true if you don't want the body to rotate. Make sure to run .updateMassProperties() if you change this after the body creation.
   * @default false
   */

  /**
   * How much to damp the body angular velocity each step. It can go from 0 to 1.
   * @default 0.01
   */

  /**
   * Use this property to limit the motion along any world axis. (1,1,1) will allow motion along all axes while (0,0,0) allows none.
   */

  /**
   * Use this property to limit the rotational motion along any world axis. (1,1,1) will allow rotation along all axes while (0,0,0) allows none.
   */

  /**
   * World space bounding box of the body and its shapes.
   */

  /**
   * Indicates if the AABB needs to be updated before use.
   */

  /**
   * Total bounding radius of the Body including its shapes, relative to body.position.
   */

  /**
   * When true the body behaves like a trigger. It does not collide
   * with other bodies but collision events are still triggered.
   * @default false
   */
  constructor(options) {
    if (options === void 0) {
      options = {};
    }

    super();
    this.id = void 0;
    this.index = void 0;
    this.world = void 0;
    this.preStep = void 0;
    this.postStep = void 0;
    this.vlambda = void 0;
    this.collisionFilterGroup = void 0;
    this.collisionFilterMask = void 0;
    this.collisionResponse = void 0;
    this.position = void 0;
    this.previousPosition = void 0;
    this.interpolatedPosition = void 0;
    this.initPosition = void 0;
    this.velocity = void 0;
    this.initVelocity = void 0;
    this.force = void 0;
    this.mass = void 0;
    this.invMass = void 0;
    this.material = void 0;
    this.linearDamping = void 0;
    this.type = void 0;
    this.allowSleep = void 0;
    this.sleepState = void 0;
    this.sleepSpeedLimit = void 0;
    this.sleepTimeLimit = void 0;
    this.timeLastSleepy = void 0;
    this.wakeUpAfterNarrowphase = void 0;
    this.torque = void 0;
    this.quaternion = void 0;
    this.initQuaternion = void 0;
    this.previousQuaternion = void 0;
    this.interpolatedQuaternion = void 0;
    this.angularVelocity = void 0;
    this.initAngularVelocity = void 0;
    this.shapes = void 0;
    this.shapeOffsets = void 0;
    this.shapeOrientations = void 0;
    this.inertia = void 0;
    this.invInertia = void 0;
    this.invInertiaWorld = void 0;
    this.invMassSolve = void 0;
    this.invInertiaSolve = void 0;
    this.invInertiaWorldSolve = void 0;
    this.fixedRotation = void 0;
    this.angularDamping = void 0;
    this.linearFactor = void 0;
    this.angularFactor = void 0;
    this.aabb = void 0;
    this.aabbNeedsUpdate = void 0;
    this.boundingRadius = void 0;
    this.wlambda = void 0;
    this.isTrigger = void 0;
    this.id = Body.idCounter++;
    this.index = -1;
    this.world = null;
    this.preStep = null;
    this.postStep = null;
    this.vlambda = new Vec3();
    this.collisionFilterGroup = typeof options.collisionFilterGroup === 'number' ? options.collisionFilterGroup : 1;
    this.collisionFilterMask = typeof options.collisionFilterMask === 'number' ? options.collisionFilterMask : -1;
    this.collisionResponse = typeof options.collisionResponse === 'boolean' ? options.collisionResponse : true;
    this.position = new Vec3();
    this.previousPosition = new Vec3();
    this.interpolatedPosition = new Vec3();
    this.initPosition = new Vec3();

    if (options.position) {
      this.position.copy(options.position);
      this.previousPosition.copy(options.position);
      this.interpolatedPosition.copy(options.position);
      this.initPosition.copy(options.position);
    }

    this.velocity = new Vec3();

    if (options.velocity) {
      this.velocity.copy(options.velocity);
    }

    this.initVelocity = new Vec3();
    this.force = new Vec3();
    const mass = typeof options.mass === 'number' ? options.mass : 0;
    this.mass = mass;
    this.invMass = mass > 0 ? 1.0 / mass : 0;
    this.material = options.material || null;
    this.linearDamping = typeof options.linearDamping === 'number' ? options.linearDamping : 0.01;
    this.type = mass <= 0.0 ? Body.STATIC : Body.DYNAMIC;

    if (typeof options.type === typeof Body.STATIC) {
      this.type = options.type;
    }

    this.allowSleep = typeof options.allowSleep !== 'undefined' ? options.allowSleep : true;
    this.sleepState = Body.AWAKE;
    this.sleepSpeedLimit = typeof options.sleepSpeedLimit !== 'undefined' ? options.sleepSpeedLimit : 0.1;
    this.sleepTimeLimit = typeof options.sleepTimeLimit !== 'undefined' ? options.sleepTimeLimit : 1;
    this.timeLastSleepy = 0;
    this.wakeUpAfterNarrowphase = false;
    this.torque = new Vec3();
    this.quaternion = new Quaternion();
    this.initQuaternion = new Quaternion();
    this.previousQuaternion = new Quaternion();
    this.interpolatedQuaternion = new Quaternion();

    if (options.quaternion) {
      this.quaternion.copy(options.quaternion);
      this.initQuaternion.copy(options.quaternion);
      this.previousQuaternion.copy(options.quaternion);
      this.interpolatedQuaternion.copy(options.quaternion);
    }

    this.angularVelocity = new Vec3();

    if (options.angularVelocity) {
      this.angularVelocity.copy(options.angularVelocity);
    }

    this.initAngularVelocity = new Vec3();
    this.shapes = [];
    this.shapeOffsets = [];
    this.shapeOrientations = [];
    this.inertia = new Vec3();
    this.invInertia = new Vec3();
    this.invInertiaWorld = new Mat3();
    this.invMassSolve = 0;
    this.invInertiaSolve = new Vec3();
    this.invInertiaWorldSolve = new Mat3();
    this.fixedRotation = typeof options.fixedRotation !== 'undefined' ? options.fixedRotation : false;
    this.angularDamping = typeof options.angularDamping !== 'undefined' ? options.angularDamping : 0.01;
    this.linearFactor = new Vec3(1, 1, 1);

    if (options.linearFactor) {
      this.linearFactor.copy(options.linearFactor);
    }

    this.angularFactor = new Vec3(1, 1, 1);

    if (options.angularFactor) {
      this.angularFactor.copy(options.angularFactor);
    }

    this.aabb = new AABB();
    this.aabbNeedsUpdate = true;
    this.boundingRadius = 0;
    this.wlambda = new Vec3();
    this.isTrigger = Boolean(options.isTrigger);

    if (options.shape) {
      this.addShape(options.shape);
    }

    this.updateMassProperties();
  }
  /**
   * Wake the body up.
   */


  wakeUp() {
    const prevState = this.sleepState;
    this.sleepState = Body.AWAKE;
    this.wakeUpAfterNarrowphase = false;

    if (prevState === Body.SLEEPING) {
      this.dispatchEvent(Body.wakeupEvent);
    }
  }
  /**
   * Force body sleep
   */


  sleep() {
    this.sleepState = Body.SLEEPING;
    this.velocity.set(0, 0, 0);
    this.angularVelocity.set(0, 0, 0);
    this.wakeUpAfterNarrowphase = false;
  }
  /**
   * Called every timestep to update internal sleep timer and change sleep state if needed.
   * @param time The world time in seconds
   */


  sleepTick(time) {
    if (this.allowSleep) {
      const sleepState = this.sleepState;
      const speedSquared = this.velocity.lengthSquared() + this.angularVelocity.lengthSquared();
      const speedLimitSquared = this.sleepSpeedLimit ** 2;

      if (sleepState === Body.AWAKE && speedSquared < speedLimitSquared) {
        this.sleepState = Body.SLEEPY; // Sleepy

        this.timeLastSleepy = time;
        this.dispatchEvent(Body.sleepyEvent);
      } else if (sleepState === Body.SLEEPY && speedSquared > speedLimitSquared) {
        this.wakeUp(); // Wake up
      } else if (sleepState === Body.SLEEPY && time - this.timeLastSleepy > this.sleepTimeLimit) {
        this.sleep(); // Sleeping

        this.dispatchEvent(Body.sleepEvent);
      }
    }
  }
  /**
   * If the body is sleeping, it should be immovable / have infinite mass during solve. We solve it by having a separate "solve mass".
   */


  updateSolveMassProperties() {
    if (this.sleepState === Body.SLEEPING || this.type === Body.KINEMATIC) {
      this.invMassSolve = 0;
      this.invInertiaSolve.setZero();
      this.invInertiaWorldSolve.setZero();
    } else {
      this.invMassSolve = this.invMass;
      this.invInertiaSolve.copy(this.invInertia);
      this.invInertiaWorldSolve.copy(this.invInertiaWorld);
    }
  }
  /**
   * Convert a world point to local body frame.
   */


  pointToLocalFrame(worldPoint, result) {
    if (result === void 0) {
      result = new Vec3();
    }

    worldPoint.vsub(this.position, result);
    this.quaternion.conjugate().vmult(result, result);
    return result;
  }
  /**
   * Convert a world vector to local body frame.
   */


  vectorToLocalFrame(worldVector, result) {
    if (result === void 0) {
      result = new Vec3();
    }

    this.quaternion.conjugate().vmult(worldVector, result);
    return result;
  }
  /**
   * Convert a local body point to world frame.
   */


  pointToWorldFrame(localPoint, result) {
    if (result === void 0) {
      result = new Vec3();
    }

    this.quaternion.vmult(localPoint, result);
    result.vadd(this.position, result);
    return result;
  }
  /**
   * Convert a local body point to world frame.
   */


  vectorToWorldFrame(localVector, result) {
    if (result === void 0) {
      result = new Vec3();
    }

    this.quaternion.vmult(localVector, result);
    return result;
  }
  /**
   * Add a shape to the body with a local offset and orientation.
   * @return The body object, for chainability.
   */


  addShape(shape, _offset, _orientation) {
    const offset = new Vec3();
    const orientation = new Quaternion();

    if (_offset) {
      offset.copy(_offset);
    }

    if (_orientation) {
      orientation.copy(_orientation);
    }

    this.shapes.push(shape);
    this.shapeOffsets.push(offset);
    this.shapeOrientations.push(orientation);
    this.updateMassProperties();
    this.updateBoundingRadius();
    this.aabbNeedsUpdate = true;
    shape.body = this;
    return this;
  }
  /**
   * Remove a shape from the body.
   * @return The body object, for chainability.
   */


  removeShape(shape) {
    const index = this.shapes.indexOf(shape);

    if (index === -1) {
      console.warn('Shape does not belong to the body');
      return this;
    }

    this.shapes.splice(index, 1);
    this.shapeOffsets.splice(index, 1);
    this.shapeOrientations.splice(index, 1);
    this.updateMassProperties();
    this.updateBoundingRadius();
    this.aabbNeedsUpdate = true;
    shape.body = null;
    return this;
  }
  /**
   * Update the bounding radius of the body. Should be done if any of the shapes are changed.
   */


  updateBoundingRadius() {
    const shapes = this.shapes;
    const shapeOffsets = this.shapeOffsets;
    const N = shapes.length;
    let radius = 0;

    for (let i = 0; i !== N; i++) {
      const shape = shapes[i];
      shape.updateBoundingSphereRadius();
      const offset = shapeOffsets[i].length();
      const r = shape.boundingSphereRadius;

      if (offset + r > radius) {
        radius = offset + r;
      }
    }

    this.boundingRadius = radius;
  }
  /**
   * Updates the .aabb
   */


  updateAABB() {
    const shapes = this.shapes;
    const shapeOffsets = this.shapeOffsets;
    const shapeOrientations = this.shapeOrientations;
    const N = shapes.length;
    const offset = tmpVec;
    const orientation = tmpQuat;
    const bodyQuat = this.quaternion;
    const aabb = this.aabb;
    const shapeAABB = updateAABB_shapeAABB;

    for (let i = 0; i !== N; i++) {
      const shape = shapes[i]; // Get shape world position

      bodyQuat.vmult(shapeOffsets[i], offset);
      offset.vadd(this.position, offset); // Get shape world quaternion

      bodyQuat.mult(shapeOrientations[i], orientation); // Get shape AABB

      shape.calculateWorldAABB(offset, orientation, shapeAABB.lowerBound, shapeAABB.upperBound);

      if (i === 0) {
        aabb.copy(shapeAABB);
      } else {
        aabb.extend(shapeAABB);
      }
    }

    this.aabbNeedsUpdate = false;
  }
  /**
   * Update `.inertiaWorld` and `.invInertiaWorld`
   */


  updateInertiaWorld(force) {
    const I = this.invInertia;
    if (I.x === I.y && I.y === I.z && !force) ;else {
      const m1 = uiw_m1;
      const m2 = uiw_m2;
      m1.setRotationFromQuaternion(this.quaternion);
      m1.transpose(m2);
      m1.scale(I, m1);
      m1.mmult(m2, this.invInertiaWorld);
    }
  }
  /**
   * Apply force to a point of the body. This could for example be a point on the Body surface.
   * Applying force this way will add to Body.force and Body.torque.
   * @param force The amount of force to add.
   * @param relativePoint A point relative to the center of mass to apply the force on.
   */


  applyForce(force, relativePoint) {
    if (relativePoint === void 0) {
      relativePoint = new Vec3();
    }

    // Needed?
    if (this.type !== Body.DYNAMIC) {
      return;
    }

    if (this.sleepState === Body.SLEEPING) {
      this.wakeUp();
    } // Compute produced rotational force


    const rotForce = Body_applyForce_rotForce;
    relativePoint.cross(force, rotForce); // Add linear force

    this.force.vadd(force, this.force); // Add rotational force

    this.torque.vadd(rotForce, this.torque);
  }
  /**
   * Apply force to a local point in the body.
   * @param force The force vector to apply, defined locally in the body frame.
   * @param localPoint A local point in the body to apply the force on.
   */


  applyLocalForce(localForce, localPoint) {
    if (localPoint === void 0) {
      localPoint = new Vec3();
    }

    if (this.type !== Body.DYNAMIC) {
      return;
    }

    const worldForce = Body_applyLocalForce_worldForce;
    const relativePointWorld = Body_applyLocalForce_relativePointWorld; // Transform the force vector to world space

    this.vectorToWorldFrame(localForce, worldForce);
    this.vectorToWorldFrame(localPoint, relativePointWorld);
    this.applyForce(worldForce, relativePointWorld);
  }
  /**
   * Apply torque to the body.
   * @param torque The amount of torque to add.
   */


  applyTorque(torque) {
    if (this.type !== Body.DYNAMIC) {
      return;
    }

    if (this.sleepState === Body.SLEEPING) {
      this.wakeUp();
    } // Add rotational force


    this.torque.vadd(torque, this.torque);
  }
  /**
   * Apply impulse to a point of the body. This could for example be a point on the Body surface.
   * An impulse is a force added to a body during a short period of time (impulse = force * time).
   * Impulses will be added to Body.velocity and Body.angularVelocity.
   * @param impulse The amount of impulse to add.
   * @param relativePoint A point relative to the center of mass to apply the force on.
   */


  applyImpulse(impulse, relativePoint) {
    if (relativePoint === void 0) {
      relativePoint = new Vec3();
    }

    if (this.type !== Body.DYNAMIC) {
      return;
    }

    if (this.sleepState === Body.SLEEPING) {
      this.wakeUp();
    } // Compute point position relative to the body center


    const r = relativePoint; // Compute produced central impulse velocity

    const velo = Body_applyImpulse_velo;
    velo.copy(impulse);
    velo.scale(this.invMass, velo); // Add linear impulse

    this.velocity.vadd(velo, this.velocity); // Compute produced rotational impulse velocity

    const rotVelo = Body_applyImpulse_rotVelo;
    r.cross(impulse, rotVelo);
    /*
     rotVelo.x *= this.invInertia.x;
     rotVelo.y *= this.invInertia.y;
     rotVelo.z *= this.invInertia.z;
     */

    this.invInertiaWorld.vmult(rotVelo, rotVelo); // Add rotational Impulse

    this.angularVelocity.vadd(rotVelo, this.angularVelocity);
  }
  /**
   * Apply locally-defined impulse to a local point in the body.
   * @param force The force vector to apply, defined locally in the body frame.
   * @param localPoint A local point in the body to apply the force on.
   */


  applyLocalImpulse(localImpulse, localPoint) {
    if (localPoint === void 0) {
      localPoint = new Vec3();
    }

    if (this.type !== Body.DYNAMIC) {
      return;
    }

    const worldImpulse = Body_applyLocalImpulse_worldImpulse;
    const relativePointWorld = Body_applyLocalImpulse_relativePoint; // Transform the force vector to world space

    this.vectorToWorldFrame(localImpulse, worldImpulse);
    this.vectorToWorldFrame(localPoint, relativePointWorld);
    this.applyImpulse(worldImpulse, relativePointWorld);
  }
  /**
   * Should be called whenever you change the body shape or mass.
   */


  updateMassProperties() {
    const halfExtents = Body_updateMassProperties_halfExtents;
    this.invMass = this.mass > 0 ? 1.0 / this.mass : 0;
    const I = this.inertia;
    const fixed = this.fixedRotation; // Approximate with AABB box

    this.updateAABB();
    halfExtents.set((this.aabb.upperBound.x - this.aabb.lowerBound.x) / 2, (this.aabb.upperBound.y - this.aabb.lowerBound.y) / 2, (this.aabb.upperBound.z - this.aabb.lowerBound.z) / 2);
    Box.calculateInertia(halfExtents, this.mass, I);
    this.invInertia.set(I.x > 0 && !fixed ? 1.0 / I.x : 0, I.y > 0 && !fixed ? 1.0 / I.y : 0, I.z > 0 && !fixed ? 1.0 / I.z : 0);
    this.updateInertiaWorld(true);
  }
  /**
   * Get world velocity of a point in the body.
   * @param worldPoint
   * @param result
   * @return The result vector.
   */


  getVelocityAtWorldPoint(worldPoint, result) {
    const r = new Vec3();
    worldPoint.vsub(this.position, r);
    this.angularVelocity.cross(r, result);
    this.velocity.vadd(result, result);
    return result;
  }
  /**
   * Move the body forward in time.
   * @param dt Time step
   * @param quatNormalize Set to true to normalize the body quaternion
   * @param quatNormalizeFast If the quaternion should be normalized using "fast" quaternion normalization
   */


  integrate(dt, quatNormalize, quatNormalizeFast) {
    // Save previous position
    this.previousPosition.copy(this.position);
    this.previousQuaternion.copy(this.quaternion);

    if (!(this.type === Body.DYNAMIC || this.type === Body.KINEMATIC) || this.sleepState === Body.SLEEPING) {
      // Only for dynamic
      return;
    }

    const velo = this.velocity;
    const angularVelo = this.angularVelocity;
    const pos = this.position;
    const force = this.force;
    const torque = this.torque;
    const quat = this.quaternion;
    const invMass = this.invMass;
    const invInertia = this.invInertiaWorld;
    const linearFactor = this.linearFactor;
    const iMdt = invMass * dt;
    velo.x += force.x * iMdt * linearFactor.x;
    velo.y += force.y * iMdt * linearFactor.y;
    velo.z += force.z * iMdt * linearFactor.z;
    const e = invInertia.elements;
    const angularFactor = this.angularFactor;
    const tx = torque.x * angularFactor.x;
    const ty = torque.y * angularFactor.y;
    const tz = torque.z * angularFactor.z;
    angularVelo.x += dt * (e[0] * tx + e[1] * ty + e[2] * tz);
    angularVelo.y += dt * (e[3] * tx + e[4] * ty + e[5] * tz);
    angularVelo.z += dt * (e[6] * tx + e[7] * ty + e[8] * tz); // Use new velocity  - leap frog

    pos.x += velo.x * dt;
    pos.y += velo.y * dt;
    pos.z += velo.z * dt;
    quat.integrate(this.angularVelocity, dt, this.angularFactor, quat);

    if (quatNormalize) {
      if (quatNormalizeFast) {
        quat.normalizeFast();
      } else {
        quat.normalize();
      }
    }

    this.aabbNeedsUpdate = true; // Update world inertia

    this.updateInertiaWorld();
  }

}

Body.idCounter = 0;
Body.COLLIDE_EVENT_NAME = 'collide';
Body.DYNAMIC = BODY_TYPES.DYNAMIC;
Body.STATIC = BODY_TYPES.STATIC;
Body.KINEMATIC = BODY_TYPES.KINEMATIC;
Body.AWAKE = BODY_SLEEP_STATES.AWAKE;
Body.SLEEPY = BODY_SLEEP_STATES.SLEEPY;
Body.SLEEPING = BODY_SLEEP_STATES.SLEEPING;
Body.wakeupEvent = {
  type: 'wakeup'
};
Body.sleepyEvent = {
  type: 'sleepy'
};
Body.sleepEvent = {
  type: 'sleep'
};
const tmpVec = new Vec3();
const tmpQuat = new Quaternion();
const updateAABB_shapeAABB = new AABB();
const uiw_m1 = new Mat3();
const uiw_m2 = new Mat3();
const Body_applyForce_rotForce = new Vec3();
const Body_applyLocalForce_worldForce = new Vec3();
const Body_applyLocalForce_relativePointWorld = new Vec3();
const Body_applyImpulse_velo = new Vec3();
const Body_applyImpulse_rotVelo = new Vec3();
const Body_applyLocalImpulse_worldImpulse = new Vec3();
const Body_applyLocalImpulse_relativePoint = new Vec3();
const Body_updateMassProperties_halfExtents = new Vec3();


new Vec3();

new Vec3();
/**
 * Storage for Ray casting data
 */


class RaycastResult {
  /**
   * rayFromWorld
   */

  /**
   * rayToWorld
   */

  /**
   * hitNormalWorld
   */

  /**
   * hitPointWorld
   */

  /**
   * hasHit
   */

  /**
   * shape
   */

  /**
   * body
   */

  /**
   * The index of the hit triangle, if the hit shape was a trimesh
   */

  /**
   * Distance to the hit. Will be set to -1 if there was no hit
   */

  /**
   * If the ray should stop traversing the bodies
   */
  constructor() {
    this.rayFromWorld = void 0;
    this.rayToWorld = void 0;
    this.hitNormalWorld = void 0;
    this.hitPointWorld = void 0;
    this.hasHit = void 0;
    this.shape = void 0;
    this.body = void 0;
    this.hitFaceIndex = void 0;
    this.distance = void 0;
    this.shouldStop = void 0;
    this.rayFromWorld = new Vec3();
    this.rayToWorld = new Vec3();
    this.hitNormalWorld = new Vec3();
    this.hitPointWorld = new Vec3();
    this.hasHit = false;
    this.shape = null;
    this.body = null;
    this.hitFaceIndex = -1;
    this.distance = -1;
    this.shouldStop = false;
  }
  /**
   * Reset all result data.
   */


  reset() {
    this.rayFromWorld.setZero();
    this.rayToWorld.setZero();
    this.hitNormalWorld.setZero();
    this.hitPointWorld.setZero();
    this.hasHit = false;
    this.shape = null;
    this.body = null;
    this.hitFaceIndex = -1;
    this.distance = -1;
    this.shouldStop = false;
  }
  /**
   * abort
   */


  abort() {
    this.shouldStop = true;
  }
  /**
   * Set result data.
   */


  set(rayFromWorld, rayToWorld, hitNormalWorld, hitPointWorld, shape, body, distance) {
    this.rayFromWorld.copy(rayFromWorld);
    this.rayToWorld.copy(rayToWorld);
    this.hitNormalWorld.copy(hitNormalWorld);
    this.hitPointWorld.copy(hitPointWorld);
    this.shape = shape;
    this.body = body;
    this.distance = distance;
  }

}

let _Shape$types$SPHERE, _Shape$types$PLANE, _Shape$types$BOX, _Shape$types$CYLINDER, _Shape$types$CONVEXPO, _Shape$types$HEIGHTFI, _Shape$types$TRIMESH;
/**
 * RAY_MODES
 */


const RAY_MODES = {
  /** CLOSEST */
  CLOSEST: 1,

  /** ANY */
  ANY: 2,

  /** ALL */
  ALL: 4
};
/**
 * RayMode
 */

_Shape$types$SPHERE = Shape.types.SPHERE;
_Shape$types$PLANE = Shape.types.PLANE;
_Shape$types$BOX = Shape.types.BOX;
_Shape$types$CYLINDER = Shape.types.CYLINDER;
_Shape$types$CONVEXPO = Shape.types.CONVEXPOLYHEDRON;
_Shape$types$HEIGHTFI = Shape.types.HEIGHTFIELD;
_Shape$types$TRIMESH = Shape.types.TRIMESH;
/**
 * A line in 3D space that intersects bodies and return points.
 */

class Ray {
  /**
   * from
   */

  /**
   * to
   */

  /**
   * direction
   */

  /**
   * The precision of the ray. Used when checking parallelity etc.
   * @default 0.0001
   */

  /**
   * Set to `false` if you don't want the Ray to take `collisionResponse` flags into account on bodies and shapes.
   * @default true
   */

  /**
   * If set to `true`, the ray skips any hits with normal.dot(rayDirection) < 0.
   * @default false
   */

  /**
   * collisionFilterMask
   * @default -1
   */

  /**
   * collisionFilterGroup
   * @default -1
   */

  /**
   * The intersection mode. Should be Ray.ANY, Ray.ALL or Ray.CLOSEST.
   * @default RAY.ANY
   */

  /**
   * Current result object.
   */

  /**
   * Will be set to `true` during intersectWorld() if the ray hit anything.
   */

  /**
   * User-provided result callback. Will be used if mode is Ray.ALL.
   */

  /**
   * CLOSEST
   */

  /**
   * ANY
   */

  /**
   * ALL
   */
  get [_Shape$types$SPHERE]() {
    return this._intersectSphere;
  }

  get [_Shape$types$PLANE]() {
    return this._intersectPlane;
  }

  get [_Shape$types$BOX]() {
    return this._intersectBox;
  }

  get [_Shape$types$CYLINDER]() {
    return this._intersectConvex;
  }

  get [_Shape$types$CONVEXPO]() {
    return this._intersectConvex;
  }

  get [_Shape$types$HEIGHTFI]() {
    return this._intersectHeightfield;
  }

  get [_Shape$types$TRIMESH]() {
    return this._intersectTrimesh;
  }

  constructor(from, to) {
    if (from === void 0) {
      from = new Vec3();
    }

    if (to === void 0) {
      to = new Vec3();
    }

    this.from = void 0;
    this.to = void 0;
    this.direction = void 0;
    this.precision = void 0;
    this.checkCollisionResponse = void 0;
    this.skipBackfaces = void 0;
    this.collisionFilterMask = void 0;
    this.collisionFilterGroup = void 0;
    this.mode = void 0;
    this.result = void 0;
    this.hasHit = void 0;
    this.callback = void 0;
    this.from = from.clone();
    this.to = to.clone();
    this.direction = new Vec3();
    this.precision = 0.0001;
    this.checkCollisionResponse = true;
    this.skipBackfaces = false;
    this.collisionFilterMask = -1;
    this.collisionFilterGroup = -1;
    this.mode = Ray.ANY;
    this.result = new RaycastResult();
    this.hasHit = false;

    this.callback = result => {};
  }
  /**
   * Do itersection against all bodies in the given World.
   * @return True if the ray hit anything, otherwise false.
   */


  intersectWorld(world, options) {
    this.mode = options.mode || Ray.ANY;
    this.result = options.result || new RaycastResult();
    this.skipBackfaces = !!options.skipBackfaces;
    this.collisionFilterMask = typeof options.collisionFilterMask !== 'undefined' ? options.collisionFilterMask : -1;
    this.collisionFilterGroup = typeof options.collisionFilterGroup !== 'undefined' ? options.collisionFilterGroup : -1;
    this.checkCollisionResponse = typeof options.checkCollisionResponse !== 'undefined' ? options.checkCollisionResponse : true;

    if (options.from) {
      this.from.copy(options.from);
    }

    if (options.to) {
      this.to.copy(options.to);
    }

    this.callback = options.callback || (() => {});

    this.hasHit = false;
    this.result.reset();
    this.updateDirection();
    this.getAABB(tmpAABB$1);
    tmpArray.length = 0;
    world.broadphase.aabbQuery(world, tmpAABB$1, tmpArray);
    this.intersectBodies(tmpArray);
    return this.hasHit;
  }
  /**
   * Shoot a ray at a body, get back information about the hit.
   * @deprecated @param result set the result property of the Ray instead.
   */


  intersectBody(body, result) {
    if (result) {
      this.result = result;
      this.updateDirection();
    }

    const checkCollisionResponse = this.checkCollisionResponse;

    if (checkCollisionResponse && !body.collisionResponse) {
      return;
    }

    if ((this.collisionFilterGroup & body.collisionFilterMask) === 0 || (body.collisionFilterGroup & this.collisionFilterMask) === 0) {
      return;
    }

    const xi = intersectBody_xi;
    const qi = intersectBody_qi;

    for (let i = 0, N = body.shapes.length; i < N; i++) {
      const shape = body.shapes[i];

      if (checkCollisionResponse && !shape.collisionResponse) {
        continue; // Skip
      }

      body.quaternion.mult(body.shapeOrientations[i], qi);
      body.quaternion.vmult(body.shapeOffsets[i], xi);
      xi.vadd(body.position, xi);
      this.intersectShape(shape, qi, xi, body);

      if (this.result.shouldStop) {
        break;
      }
    }
  }
  /**
   * Shoot a ray at an array bodies, get back information about the hit.
   * @param bodies An array of Body objects.
   * @deprecated @param result set the result property of the Ray instead.
   *
   */


  intersectBodies(bodies, result) {
    if (result) {
      this.result = result;
      this.updateDirection();
    }

    for (let i = 0, l = bodies.length; !this.result.shouldStop && i < l; i++) {
      this.intersectBody(bodies[i]);
    }
  }
  /**
   * Updates the direction vector.
   */


  updateDirection() {
    this.to.vsub(this.from, this.direction);
    this.direction.normalize();
  }

  intersectShape(shape, quat, position, body) {
    const from = this.from; // Checking boundingSphere

    const distance = distanceFromIntersection(from, this.direction, position);

    if (distance > shape.boundingSphereRadius) {
      return;
    }

    const intersectMethod = this[shape.type];

    if (intersectMethod) {
      intersectMethod.call(this, shape, quat, position, body, shape);
    }
  }

  _intersectBox(box, quat, position, body, reportedShape) {
    return this._intersectConvex(box.convexPolyhedronRepresentation, quat, position, body, reportedShape);
  }

  _intersectPlane(shape, quat, position, body, reportedShape) {
    const from = this.from;
    const to = this.to;
    const direction = this.direction; // Get plane normal

    const worldNormal = new Vec3(0, 0, 1);
    quat.vmult(worldNormal, worldNormal);
    const len = new Vec3();
    from.vsub(position, len);
    const planeToFrom = len.dot(worldNormal);
    to.vsub(position, len);
    const planeToTo = len.dot(worldNormal);

    if (planeToFrom * planeToTo > 0) {
      // "from" and "to" are on the same side of the plane... bail out
      return;
    }

    if (from.distanceTo(to) < planeToFrom) {
      return;
    }

    const n_dot_dir = worldNormal.dot(direction);

    if (Math.abs(n_dot_dir) < this.precision) {
      // No intersection
      return;
    }

    const planePointToFrom = new Vec3();
    const dir_scaled_with_t = new Vec3();
    const hitPointWorld = new Vec3();
    from.vsub(position, planePointToFrom);
    const t = -worldNormal.dot(planePointToFrom) / n_dot_dir;
    direction.scale(t, dir_scaled_with_t);
    from.vadd(dir_scaled_with_t, hitPointWorld);
    this.reportIntersection(worldNormal, hitPointWorld, reportedShape, body, -1);
  }
  /**
   * Get the world AABB of the ray.
   */


  getAABB(aabb) {
    const {
      lowerBound,
      upperBound
    } = aabb;
    const to = this.to;
    const from = this.from;
    lowerBound.x = Math.min(to.x, from.x);
    lowerBound.y = Math.min(to.y, from.y);
    lowerBound.z = Math.min(to.z, from.z);
    upperBound.x = Math.max(to.x, from.x);
    upperBound.y = Math.max(to.y, from.y);
    upperBound.z = Math.max(to.z, from.z);
  }

  _intersectHeightfield(shape, quat, position, body, reportedShape) {
    shape.data;
    shape.elementSize; // Convert the ray to local heightfield coordinates

    const localRay = intersectHeightfield_localRay; //new Ray(this.from, this.to);

    localRay.from.copy(this.from);
    localRay.to.copy(this.to);
    Transform.pointToLocalFrame(position, quat, localRay.from, localRay.from);
    Transform.pointToLocalFrame(position, quat, localRay.to, localRay.to);
    localRay.updateDirection(); // Get the index of the data points to test against

    const index = intersectHeightfield_index;
    let iMinX;
    let iMinY;
    let iMaxX;
    let iMaxY; // Set to max

    iMinX = iMinY = 0;
    iMaxX = iMaxY = shape.data.length - 1;
    const aabb = new AABB();
    localRay.getAABB(aabb);
    shape.getIndexOfPosition(aabb.lowerBound.x, aabb.lowerBound.y, index, true);
    iMinX = Math.max(iMinX, index[0]);
    iMinY = Math.max(iMinY, index[1]);
    shape.getIndexOfPosition(aabb.upperBound.x, aabb.upperBound.y, index, true);
    iMaxX = Math.min(iMaxX, index[0] + 1);
    iMaxY = Math.min(iMaxY, index[1] + 1);

    for (let i = iMinX; i < iMaxX; i++) {
      for (let j = iMinY; j < iMaxY; j++) {
        if (this.result.shouldStop) {
          return;
        }

        shape.getAabbAtIndex(i, j, aabb);

        if (!aabb.overlapsRay(localRay)) {
          continue;
        } // Lower triangle


        shape.getConvexTrianglePillar(i, j, false);
        Transform.pointToWorldFrame(position, quat, shape.pillarOffset, worldPillarOffset);

        this._intersectConvex(shape.pillarConvex, quat, worldPillarOffset, body, reportedShape, intersectConvexOptions);

        if (this.result.shouldStop) {
          return;
        } // Upper triangle


        shape.getConvexTrianglePillar(i, j, true);
        Transform.pointToWorldFrame(position, quat, shape.pillarOffset, worldPillarOffset);

        this._intersectConvex(shape.pillarConvex, quat, worldPillarOffset, body, reportedShape, intersectConvexOptions);
      }
    }
  }

  _intersectSphere(sphere, quat, position, body, reportedShape) {
    const from = this.from;
    const to = this.to;
    const r = sphere.radius;
    const a = (to.x - from.x) ** 2 + (to.y - from.y) ** 2 + (to.z - from.z) ** 2;
    const b = 2 * ((to.x - from.x) * (from.x - position.x) + (to.y - from.y) * (from.y - position.y) + (to.z - from.z) * (from.z - position.z));
    const c = (from.x - position.x) ** 2 + (from.y - position.y) ** 2 + (from.z - position.z) ** 2 - r ** 2;
    const delta = b ** 2 - 4 * a * c;
    const intersectionPoint = Ray_intersectSphere_intersectionPoint;
    const normal = Ray_intersectSphere_normal;

    if (delta < 0) {
      // No intersection
      return;
    } else if (delta === 0) {
      // single intersection point
      from.lerp(to, delta, intersectionPoint);
      intersectionPoint.vsub(position, normal);
      normal.normalize();
      this.reportIntersection(normal, intersectionPoint, reportedShape, body, -1);
    } else {
      const d1 = (-b - Math.sqrt(delta)) / (2 * a);
      const d2 = (-b + Math.sqrt(delta)) / (2 * a);

      if (d1 >= 0 && d1 <= 1) {
        from.lerp(to, d1, intersectionPoint);
        intersectionPoint.vsub(position, normal);
        normal.normalize();
        this.reportIntersection(normal, intersectionPoint, reportedShape, body, -1);
      }

      if (this.result.shouldStop) {
        return;
      }

      if (d2 >= 0 && d2 <= 1) {
        from.lerp(to, d2, intersectionPoint);
        intersectionPoint.vsub(position, normal);
        normal.normalize();
        this.reportIntersection(normal, intersectionPoint, reportedShape, body, -1);
      }
    }
  }

  _intersectConvex(shape, quat, position, body, reportedShape, options) {
    const normal = intersectConvex_normal;
    const vector = intersectConvex_vector;
    const faceList = options && options.faceList || null; // Checking faces

    const faces = shape.faces;
    const vertices = shape.vertices;
    const normals = shape.faceNormals;
    const direction = this.direction;
    const from = this.from;
    const to = this.to;
    const fromToDistance = from.distanceTo(to);
    const Nfaces = faceList ? faceList.length : faces.length;
    const result = this.result;

    for (let j = 0; !result.shouldStop && j < Nfaces; j++) {
      const fi = faceList ? faceList[j] : j;
      const face = faces[fi];
      const faceNormal = normals[fi];
      const q = quat;
      const x = position; // determine if ray intersects the plane of the face
      // note: this works regardless of the direction of the face normal
      // Get plane point in world coordinates...

      vector.copy(vertices[face[0]]);
      q.vmult(vector, vector);
      vector.vadd(x, vector); // ...but make it relative to the ray from. We'll fix this later.

      vector.vsub(from, vector); // Get plane normal

      q.vmult(faceNormal, normal); // If this dot product is negative, we have something interesting

      const dot = direction.dot(normal); // Bail out if ray and plane are parallel

      if (Math.abs(dot) < this.precision) {
        continue;
      } // calc distance to plane


      const scalar = normal.dot(vector) / dot; // if negative distance, then plane is behind ray

      if (scalar < 0) {
        continue;
      } // if (dot < 0) {
      // Intersection point is from + direction * scalar


      direction.scale(scalar, intersectPoint);
      intersectPoint.vadd(from, intersectPoint); // a is the point we compare points b and c with.

      a.copy(vertices[face[0]]);
      q.vmult(a, a);
      x.vadd(a, a);

      for (let i = 1; !result.shouldStop && i < face.length - 1; i++) {
        // Transform 3 vertices to world coords
        b.copy(vertices[face[i]]);
        c.copy(vertices[face[i + 1]]);
        q.vmult(b, b);
        q.vmult(c, c);
        x.vadd(b, b);
        x.vadd(c, c);
        const distance = intersectPoint.distanceTo(from);

        if (!(Ray.pointInTriangle(intersectPoint, a, b, c) || Ray.pointInTriangle(intersectPoint, b, a, c)) || distance > fromToDistance) {
          continue;
        }

        this.reportIntersection(normal, intersectPoint, reportedShape, body, fi);
      } // }

    }
  }
  /**
   * @todo Optimize by transforming the world to local space first.
   * @todo Use Octree lookup
   */


  _intersectTrimesh(mesh, quat, position, body, reportedShape, options) {
    const normal = intersectTrimesh_normal;
    const triangles = intersectTrimesh_triangles;
    const treeTransform = intersectTrimesh_treeTransform;
    const vector = intersectConvex_vector;
    const localDirection = intersectTrimesh_localDirection;
    const localFrom = intersectTrimesh_localFrom;
    const localTo = intersectTrimesh_localTo;
    const worldIntersectPoint = intersectTrimesh_worldIntersectPoint;
    const worldNormal = intersectTrimesh_worldNormal; // Checking faces

    const indices = mesh.indices;
    mesh.vertices; // const normals = mesh.faceNormals

    const from = this.from;
    const to = this.to;
    const direction = this.direction;
    treeTransform.position.copy(position);
    treeTransform.quaternion.copy(quat); // Transform ray to local space!

    Transform.vectorToLocalFrame(position, quat, direction, localDirection);
    Transform.pointToLocalFrame(position, quat, from, localFrom);
    Transform.pointToLocalFrame(position, quat, to, localTo);
    localTo.x *= mesh.scale.x;
    localTo.y *= mesh.scale.y;
    localTo.z *= mesh.scale.z;
    localFrom.x *= mesh.scale.x;
    localFrom.y *= mesh.scale.y;
    localFrom.z *= mesh.scale.z;
    localTo.vsub(localFrom, localDirection);
    localDirection.normalize();
    const fromToDistanceSquared = localFrom.distanceSquared(localTo);
    mesh.tree.rayQuery(this, treeTransform, triangles);

    for (let i = 0, N = triangles.length; !this.result.shouldStop && i !== N; i++) {
      const trianglesIndex = triangles[i];
      mesh.getNormal(trianglesIndex, normal); // determine if ray intersects the plane of the face
      // note: this works regardless of the direction of the face normal
      // Get plane point in world coordinates...

      mesh.getVertex(indices[trianglesIndex * 3], a); // ...but make it relative to the ray from. We'll fix this later.

      a.vsub(localFrom, vector); // If this dot product is negative, we have something interesting

      const dot = localDirection.dot(normal); // Bail out if ray and plane are parallel
      // if (Math.abs( dot ) < this.precision){
      //     continue;
      // }
      // calc distance to plane

      const scalar = normal.dot(vector) / dot; // if negative distance, then plane is behind ray

      if (scalar < 0) {
        continue;
      } // Intersection point is from + direction * scalar


      localDirection.scale(scalar, intersectPoint);
      intersectPoint.vadd(localFrom, intersectPoint); // Get triangle vertices

      mesh.getVertex(indices[trianglesIndex * 3 + 1], b);
      mesh.getVertex(indices[trianglesIndex * 3 + 2], c);
      const squaredDistance = intersectPoint.distanceSquared(localFrom);

      if (!(Ray.pointInTriangle(intersectPoint, b, a, c) || Ray.pointInTriangle(intersectPoint, a, b, c)) || squaredDistance > fromToDistanceSquared) {
        continue;
      } // transform intersectpoint and normal to world


      Transform.vectorToWorldFrame(quat, normal, worldNormal);
      Transform.pointToWorldFrame(position, quat, intersectPoint, worldIntersectPoint);
      this.reportIntersection(worldNormal, worldIntersectPoint, reportedShape, body, trianglesIndex);
    }

    triangles.length = 0;
  }
  /**
   * @return True if the intersections should continue
   */


  reportIntersection(normal, hitPointWorld, shape, body, hitFaceIndex) {
    const from = this.from;
    const to = this.to;
    const distance = from.distanceTo(hitPointWorld);
    const result = this.result; // Skip back faces?

    if (this.skipBackfaces && normal.dot(this.direction) > 0) {
      return;
    }

    result.hitFaceIndex = typeof hitFaceIndex !== 'undefined' ? hitFaceIndex : -1;

    switch (this.mode) {
      case Ray.ALL:
        this.hasHit = true;
        result.set(from, to, normal, hitPointWorld, shape, body, distance);
        result.hasHit = true;
        this.callback(result);
        break;

      case Ray.CLOSEST:
        // Store if closer than current closest
        if (distance < result.distance || !result.hasHit) {
          this.hasHit = true;
          result.hasHit = true;
          result.set(from, to, normal, hitPointWorld, shape, body, distance);
        }

        break;

      case Ray.ANY:
        // Report and stop.
        this.hasHit = true;
        result.hasHit = true;
        result.set(from, to, normal, hitPointWorld, shape, body, distance);
        result.shouldStop = true;
        break;
    }
  }
  /**
   * As per "Barycentric Technique" as named
   * {@link https://www.blackpawn.com/texts/pointinpoly/default.html here} but without the division
   */


  static pointInTriangle(p, a, b, c) {
    c.vsub(a, v0);
    b.vsub(a, v1);
    p.vsub(a, v2);
    const dot00 = v0.dot(v0);
    const dot01 = v0.dot(v1);
    const dot02 = v0.dot(v2);
    const dot11 = v1.dot(v1);
    const dot12 = v1.dot(v2);
    let u;
    let v;
    return (u = dot11 * dot02 - dot01 * dot12) >= 0 && (v = dot00 * dot12 - dot01 * dot02) >= 0 && u + v < dot00 * dot11 - dot01 * dot01;
  }

}

Ray.CLOSEST = RAY_MODES.CLOSEST;
Ray.ANY = RAY_MODES.ANY;
Ray.ALL = RAY_MODES.ALL;
const tmpAABB$1 = new AABB();
const tmpArray = [];
const v1 = new Vec3();
const v2 = new Vec3();
const intersectBody_xi = new Vec3();
const intersectBody_qi = new Quaternion();
const intersectPoint = new Vec3();
const a = new Vec3();
const b = new Vec3();
const c = new Vec3();
const intersectConvexOptions = {
  faceList: [0]
};
const worldPillarOffset = new Vec3();
const intersectHeightfield_localRay = new Ray();
const intersectHeightfield_index = [];
const Ray_intersectSphere_intersectionPoint = new Vec3();
const Ray_intersectSphere_normal = new Vec3();
const intersectConvex_normal = new Vec3();
const intersectConvex_vector = new Vec3();
const intersectTrimesh_normal = new Vec3();
const intersectTrimesh_localDirection = new Vec3();
const intersectTrimesh_localFrom = new Vec3();
const intersectTrimesh_localTo = new Vec3();
const intersectTrimesh_worldNormal = new Vec3();
const intersectTrimesh_worldIntersectPoint = new Vec3();
new AABB();
const intersectTrimesh_triangles = [];
const intersectTrimesh_treeTransform = new Transform();
const v0 = new Vec3();
const intersect = new Vec3();

function distanceFromIntersection(from, direction, position) {
  // v0 is vector from from to position
  position.vsub(from, v0);
  const dot = v0.dot(direction); // intersect = direction*dot + from

  direction.scale(dot, intersect);
  intersect.vadd(from, intersect);
  const distance = position.distanceTo(intersect);
  return distance;
}

class Utils {
  /**
   * Extend an options object with default values.
   * @param options The options object. May be falsy: in this case, a new object is created and returned.
   * @param defaults An object containing default values.
   * @return The modified options object.
   */
  static defaults(options, defaults) {
    if (options === void 0) {
      options = {};
    }

    for (let key in defaults) {
      if (!(key in options)) {
        options[key] = defaults[key];
      }
    }

    return options;
  }

}
new Vec3();
new Vec3();
new Vec3();
new Vec3();
new Vec3();
new Vec3();

new Vec3(); // Temp vectors

new Vec3();
new Vec3();
new Vec3();
new Vec3();
new Vec3();
new Vec3();
new Vec3();

new Vec3();
new Vec3();

new Vec3();
new Vec3();

new Vec3();
new Vec3();

new Vec3();
new Vec3();
/**
 * Defines a physics material.
 */

class Material {
  /**
   * Material name.
   * If options is a string, name will be set to that string.
   * @todo Deprecate this
   */

  /** Material id. */

  /**
   * Friction for this material.
   * If non-negative, it will be used instead of the friction given by ContactMaterials. If there's no matching ContactMaterial, the value from `defaultContactMaterial` in the World will be used.
   */

  /**
   * Restitution for this material.
   * If non-negative, it will be used instead of the restitution given by ContactMaterials. If there's no matching ContactMaterial, the value from `defaultContactMaterial` in the World will be used.
   */
  constructor(options) {
    if (options === void 0) {
      options = {};
    }

    this.name = void 0;
    this.id = void 0;
    this.friction = void 0;
    this.restitution = void 0;
    let name = ''; // Backwards compatibility fix

    if (typeof options === 'string') {
      //console.warn(`Passing a string to MaterialOptions is deprecated, and has no effect`)
      name = options;
      options = {};
    }

    this.name = name;
    this.id = Material.idCounter++;
    this.friction = typeof options.friction !== 'undefined' ? options.friction : -1;
    this.restitution = typeof options.restitution !== 'undefined' ? options.restitution : -1;
  }

}

Material.idCounter = 0;

new Vec3();
new Vec3();
new Vec3();
new Vec3();
new Vec3();
new Vec3();
new Vec3();
new Vec3();
new Vec3();
new Vec3();
new Vec3();

new Vec3();
new Vec3();

new Vec3();
new Vec3();
new Vec3();
new Ray();
new Vec3();
new Vec3();
[new Vec3(1, 0, 0), new Vec3(0, 1, 0), new Vec3(0, 0, 1)];
new Vec3();
new Vec3();
new Vec3();
new Vec3();

new Vec3();
new Vec3();
new Vec3();
new Vec3();

new Vec3();
new Vec3();
new Vec3(); // bilateral constraint between two dynamic objects
/**
 * Spherical shape
 * @example
 *     const radius = 1
 *     const sphereShape = new CANNON.Sphere(radius)
 *     const sphereBody = new CANNON.Body({ mass: 1, shape: sphereShape })
 *     world.addBody(sphereBody)
 */


class Sphere extends Shape {
  /**
   * The radius of the sphere.
   */

  /**
   *
   * @param radius The radius of the sphere, a non-negative number.
   */
  constructor(radius) {
    super({
      type: Shape.types.SPHERE
    });
    this.radius = void 0;
    this.radius = radius !== undefined ? radius : 1.0;

    if (this.radius < 0) {
      throw new Error('The sphere radius cannot be negative.');
    }

    this.updateBoundingSphereRadius();
  }
  /** calculateLocalInertia */


  calculateLocalInertia(mass, target) {
    if (target === void 0) {
      target = new Vec3();
    }

    const I = 2.0 * mass * this.radius * this.radius / 5.0;
    target.x = I;
    target.y = I;
    target.z = I;
    return target;
  }
  /** volume */


  volume() {
    return 4.0 * Math.PI * Math.pow(this.radius, 3) / 3.0;
  }

  updateBoundingSphereRadius() {
    this.boundingSphereRadius = this.radius;
  }

  calculateWorldAABB(pos, quat, min, max) {
    const r = this.radius;
    const axes = ['x', 'y', 'z'];

    for (let i = 0; i < axes.length; i++) {
      const ax = axes[i];
      min[ax] = pos[ax] - r;
      max[ax] = pos[ax] + r;
    }
  }

}

new Vec3();
new Vec3();

new Vec3(); // Temp vectors for calculation

new Vec3(); // Relative velocity

new Vec3();
new Vec3();
new Vec3();
new Vec3();
new Vec3();
/**
 * Cylinder class.
 * @example
 *     const radiusTop = 0.5
 *     const radiusBottom = 0.5
 *     const height = 2
 *     const numSegments = 12
 *     const cylinderShape = new CANNON.Cylinder(radiusTop, radiusBottom, height, numSegments)
 *     const cylinderBody = new CANNON.Body({ mass: 1, shape: cylinderShape })
 *     world.addBody(cylinderBody)
 */

class Cylinder extends ConvexPolyhedron {
  /** The radius of the top of the Cylinder. */

  /** The radius of the bottom of the Cylinder. */

  /** The height of the Cylinder. */

  /** The number of segments to build the cylinder out of. */

  /**
   * @param radiusTop The radius of the top of the Cylinder.
   * @param radiusBottom The radius of the bottom of the Cylinder.
   * @param height The height of the Cylinder.
   * @param numSegments The number of segments to build the cylinder out of.
   */
  constructor(radiusTop, radiusBottom, height, numSegments) {
    if (radiusTop === void 0) {
      radiusTop = 1;
    }

    if (radiusBottom === void 0) {
      radiusBottom = 1;
    }

    if (height === void 0) {
      height = 1;
    }

    if (numSegments === void 0) {
      numSegments = 8;
    }

    if (radiusTop < 0) {
      throw new Error('The cylinder radiusTop cannot be negative.');
    }

    if (radiusBottom < 0) {
      throw new Error('The cylinder radiusBottom cannot be negative.');
    }

    const N = numSegments;
    const vertices = [];
    const axes = [];
    const faces = [];
    const bottomface = [];
    const topface = [];
    const cos = Math.cos;
    const sin = Math.sin; // First bottom point

    vertices.push(new Vec3(-radiusBottom * sin(0), -height * 0.5, radiusBottom * cos(0)));
    bottomface.push(0); // First top point

    vertices.push(new Vec3(-radiusTop * sin(0), height * 0.5, radiusTop * cos(0)));
    topface.push(1);

    for (let i = 0; i < N; i++) {
      const theta = 2 * Math.PI / N * (i + 1);
      const thetaN = 2 * Math.PI / N * (i + 0.5);

      if (i < N - 1) {
        // Bottom
        vertices.push(new Vec3(-radiusBottom * sin(theta), -height * 0.5, radiusBottom * cos(theta)));
        bottomface.push(2 * i + 2); // Top

        vertices.push(new Vec3(-radiusTop * sin(theta), height * 0.5, radiusTop * cos(theta)));
        topface.push(2 * i + 3); // Face

        faces.push([2 * i, 2 * i + 1, 2 * i + 3, 2 * i + 2]);
      } else {
        faces.push([2 * i, 2 * i + 1, 1, 0]); // Connect
      } // Axis: we can cut off half of them if we have even number of segments


      if (N % 2 === 1 || i < N / 2) {
        axes.push(new Vec3(-sin(thetaN), 0, cos(thetaN)));
      }
    }

    faces.push(bottomface);
    axes.push(new Vec3(0, 1, 0)); // Reorder top face

    const temp = [];

    for (let i = 0; i < topface.length; i++) {
      temp.push(topface[topface.length - i - 1]);
    }

    faces.push(temp);
    super({
      vertices,
      faces,
      axes
    });
    this.radiusTop = void 0;
    this.radiusBottom = void 0;
    this.height = void 0;
    this.numSegments = void 0;
    this.type = Shape.types.CYLINDER;
    this.radiusTop = radiusTop;
    this.radiusBottom = radiusBottom;
    this.height = height;
    this.numSegments = numSegments;
  }

}
/**
 * Particle shape.
 * @example
 *     const particleShape = new CANNON.Particle()
 *     const particleBody = new CANNON.Body({ mass: 1, shape: particleShape })
 *     world.addBody(particleBody)
 */


class Particle extends Shape {
  constructor() {
    super({
      type: Shape.types.PARTICLE
    });
  }
  /**
   * calculateLocalInertia
   */


  calculateLocalInertia(mass, target) {
    if (target === void 0) {
      target = new Vec3();
    }

    target.set(0, 0, 0);
    return target;
  }

  volume() {
    return 0;
  }

  updateBoundingSphereRadius() {
    this.boundingSphereRadius = 0;
  }

  calculateWorldAABB(pos, quat, min, max) {
    // Get each axis max
    min.copy(pos);
    max.copy(pos);
  }

}
/**
 * A plane, facing in the Z direction. The plane has its surface at z=0 and everything below z=0 is assumed to be solid plane. To make the plane face in some other direction than z, you must put it inside a Body and rotate that body. See the demos.
 * @example
 *     const planeShape = new CANNON.Plane()
 *     const planeBody = new CANNON.Body({ mass: 0, shape:  planeShape })
 *     planeBody.quaternion.setFromEuler(-Math.PI / 2, 0, 0) // make it face up
 *     world.addBody(planeBody)
 */


class Plane extends Shape {
  /** worldNormal */

  /** worldNormalNeedsUpdate */
  constructor() {
    super({
      type: Shape.types.PLANE
    }); // World oriented normal

    this.worldNormal = void 0;
    this.worldNormalNeedsUpdate = void 0;
    this.boundingSphereRadius = void 0;
    this.worldNormal = new Vec3();
    this.worldNormalNeedsUpdate = true;
    this.boundingSphereRadius = Number.MAX_VALUE;
  }
  /** computeWorldNormal */


  computeWorldNormal(quat) {
    const n = this.worldNormal;
    n.set(0, 0, 1);
    quat.vmult(n, n);
    this.worldNormalNeedsUpdate = false;
  }

  calculateLocalInertia(mass, target) {
    if (target === void 0) {
      target = new Vec3();
    }

    return target;
  }

  volume() {
    return (// The plane is infinite...
      Number.MAX_VALUE
    );
  }

  calculateWorldAABB(pos, quat, min, max) {
    // The plane AABB is infinite, except if the normal is pointing along any axis
    tempNormal.set(0, 0, 1); // Default plane normal is z

    quat.vmult(tempNormal, tempNormal);
    const maxVal = Number.MAX_VALUE;
    min.set(-maxVal, -maxVal, -maxVal);
    max.set(maxVal, maxVal, maxVal);

    if (tempNormal.x === 1) {
      max.x = pos.x;
    } else if (tempNormal.x === -1) {
      min.x = pos.x;
    }

    if (tempNormal.y === 1) {
      max.y = pos.y;
    } else if (tempNormal.y === -1) {
      min.y = pos.y;
    }

    if (tempNormal.z === 1) {
      max.z = pos.z;
    } else if (tempNormal.z === -1) {
      min.z = pos.z;
    }
  }

  updateBoundingSphereRadius() {
    this.boundingSphereRadius = Number.MAX_VALUE;
  }

}

const tempNormal = new Vec3();
/**
 * Heightfield shape class. Height data is given as an array. These data points are spread out evenly with a given distance.
 * @todo Should be possible to use along all axes, not just y
 * @todo should be possible to scale along all axes
 * @todo Refactor elementSize to elementSizeX and elementSizeY
 *
 * @example
 *     // Generate some height data (y-values).
 *     const data = []
 *     for (let i = 0; i < 1000; i++) {
 *         const y = 0.5 * Math.cos(0.2 * i)
 *         data.push(y)
 *     }
 *
 *     // Create the heightfield shape
 *     const heightfieldShape = new CANNON.Heightfield(data, {
 *         elementSize: 1 // Distance between the data points in X and Y directions
 *     })
 *     const heightfieldBody = new CANNON.Body({ shape: heightfieldShape })
 *     world.addBody(heightfieldBody)
 */

class Heightfield extends Shape {
  /**
   * An array of numbers, or height values, that are spread out along the x axis.
   */

  /**
   * Max value of the data points in the data array.
   */

  /**
   * Minimum value of the data points in the data array.
   */

  /**
   * World spacing between the data points in X and Y direction.
   * @todo elementSizeX and Y
   * @default 1
   */

  /**
   * @default true
   */

  /**
   * @param data An array of numbers, or height values, that are spread out along the x axis.
   */
  constructor(data, options) {
    if (options === void 0) {
      options = {};
    }

    options = Utils.defaults(options, {
      maxValue: null,
      minValue: null,
      elementSize: 1
    });
    super({
      type: Shape.types.HEIGHTFIELD
    });
    this.data = void 0;
    this.maxValue = void 0;
    this.minValue = void 0;
    this.elementSize = void 0;
    this.cacheEnabled = void 0;
    this.pillarConvex = void 0;
    this.pillarOffset = void 0;
    this._cachedPillars = void 0;
    this.data = data;
    this.maxValue = options.maxValue;
    this.minValue = options.minValue;
    this.elementSize = options.elementSize;

    if (options.minValue === null) {
      this.updateMinValue();
    }

    if (options.maxValue === null) {
      this.updateMaxValue();
    }

    this.cacheEnabled = true;
    this.pillarConvex = new ConvexPolyhedron();
    this.pillarOffset = new Vec3();
    this.updateBoundingSphereRadius(); // "i_j_isUpper" => { convex: ..., offset: ... }
    // for example:
    // _cachedPillars["0_2_1"]

    this._cachedPillars = {};
  }
  /**
   * Call whenever you change the data array.
   */


  update() {
    this._cachedPillars = {};
  }
  /**
   * Update the `minValue` property
   */


  updateMinValue() {
    const data = this.data;
    let minValue = data[0][0];

    for (let i = 0; i !== data.length; i++) {
      for (let j = 0; j !== data[i].length; j++) {
        const v = data[i][j];

        if (v < minValue) {
          minValue = v;
        }
      }
    }

    this.minValue = minValue;
  }
  /**
   * Update the `maxValue` property
   */


  updateMaxValue() {
    const data = this.data;
    let maxValue = data[0][0];

    for (let i = 0; i !== data.length; i++) {
      for (let j = 0; j !== data[i].length; j++) {
        const v = data[i][j];

        if (v > maxValue) {
          maxValue = v;
        }
      }
    }

    this.maxValue = maxValue;
  }
  /**
   * Set the height value at an index. Don't forget to update maxValue and minValue after you're done.
   */


  setHeightValueAtIndex(xi, yi, value) {
    const data = this.data;
    data[xi][yi] = value; // Invalidate cache

    this.clearCachedConvexTrianglePillar(xi, yi, false);

    if (xi > 0) {
      this.clearCachedConvexTrianglePillar(xi - 1, yi, true);
      this.clearCachedConvexTrianglePillar(xi - 1, yi, false);
    }

    if (yi > 0) {
      this.clearCachedConvexTrianglePillar(xi, yi - 1, true);
      this.clearCachedConvexTrianglePillar(xi, yi - 1, false);
    }

    if (yi > 0 && xi > 0) {
      this.clearCachedConvexTrianglePillar(xi - 1, yi - 1, true);
    }
  }
  /**
   * Get max/min in a rectangle in the matrix data
   * @param result An array to store the results in.
   * @return The result array, if it was passed in. Minimum will be at position 0 and max at 1.
   */


  getRectMinMax(iMinX, iMinY, iMaxX, iMaxY, result) {
    if (result === void 0) {
      result = [];
    }

    // Get max and min of the data
    const data = this.data; // Set first value

    let max = this.minValue;

    for (let i = iMinX; i <= iMaxX; i++) {
      for (let j = iMinY; j <= iMaxY; j++) {
        const height = data[i][j];

        if (height > max) {
          max = height;
        }
      }
    }

    result[0] = this.minValue;
    result[1] = max;
  }
  /**
   * Get the index of a local position on the heightfield. The indexes indicate the rectangles, so if your terrain is made of N x N height data points, you will have rectangle indexes ranging from 0 to N-1.
   * @param result Two-element array
   * @param clamp If the position should be clamped to the heightfield edge.
   */


  getIndexOfPosition(x, y, result, clamp) {
    // Get the index of the data points to test against
    const w = this.elementSize;
    const data = this.data;
    let xi = Math.floor(x / w);
    let yi = Math.floor(y / w);
    result[0] = xi;
    result[1] = yi;

    if (clamp) {
      // Clamp index to edges
      if (xi < 0) {
        xi = 0;
      }

      if (yi < 0) {
        yi = 0;
      }

      if (xi >= data.length - 1) {
        xi = data.length - 1;
      }

      if (yi >= data[0].length - 1) {
        yi = data[0].length - 1;
      }
    } // Bail out if we are out of the terrain


    if (xi < 0 || yi < 0 || xi >= data.length - 1 || yi >= data[0].length - 1) {
      return false;
    }

    return true;
  }

  getTriangleAt(x, y, edgeClamp, a, b, c) {
    const idx = getHeightAt_idx;
    this.getIndexOfPosition(x, y, idx, edgeClamp);
    let xi = idx[0];
    let yi = idx[1];
    const data = this.data;

    if (edgeClamp) {
      xi = Math.min(data.length - 2, Math.max(0, xi));
      yi = Math.min(data[0].length - 2, Math.max(0, yi));
    }

    const elementSize = this.elementSize;
    const lowerDist2 = (x / elementSize - xi) ** 2 + (y / elementSize - yi) ** 2;
    const upperDist2 = (x / elementSize - (xi + 1)) ** 2 + (y / elementSize - (yi + 1)) ** 2;
    const upper = lowerDist2 > upperDist2;
    this.getTriangle(xi, yi, upper, a, b, c);
    return upper;
  }

  getNormalAt(x, y, edgeClamp, result) {
    const a = getNormalAt_a;
    const b = getNormalAt_b;
    const c = getNormalAt_c;
    const e0 = getNormalAt_e0;
    const e1 = getNormalAt_e1;
    this.getTriangleAt(x, y, edgeClamp, a, b, c);
    b.vsub(a, e0);
    c.vsub(a, e1);
    e0.cross(e1, result);
    result.normalize();
  }
  /**
   * Get an AABB of a square in the heightfield
   * @param xi
   * @param yi
   * @param result
   */


  getAabbAtIndex(xi, yi, _ref) {
    let {
      lowerBound,
      upperBound
    } = _ref;
    const data = this.data;
    const elementSize = this.elementSize;
    lowerBound.set(xi * elementSize, yi * elementSize, data[xi][yi]);
    upperBound.set((xi + 1) * elementSize, (yi + 1) * elementSize, data[xi + 1][yi + 1]);
  }
  /**
   * Get the height in the heightfield at a given position
   */


  getHeightAt(x, y, edgeClamp) {
    const data = this.data;
    const a = getHeightAt_a;
    const b = getHeightAt_b;
    const c = getHeightAt_c;
    const idx = getHeightAt_idx;
    this.getIndexOfPosition(x, y, idx, edgeClamp);
    let xi = idx[0];
    let yi = idx[1];

    if (edgeClamp) {
      xi = Math.min(data.length - 2, Math.max(0, xi));
      yi = Math.min(data[0].length - 2, Math.max(0, yi));
    }

    const upper = this.getTriangleAt(x, y, edgeClamp, a, b, c);
    barycentricWeights(x, y, a.x, a.y, b.x, b.y, c.x, c.y, getHeightAt_weights);
    const w = getHeightAt_weights;

    if (upper) {
      // Top triangle verts
      return data[xi + 1][yi + 1] * w.x + data[xi][yi + 1] * w.y + data[xi + 1][yi] * w.z;
    } else {
      // Top triangle verts
      return data[xi][yi] * w.x + data[xi + 1][yi] * w.y + data[xi][yi + 1] * w.z;
    }
  }

  getCacheConvexTrianglePillarKey(xi, yi, getUpperTriangle) {
    return xi + "_" + yi + "_" + (getUpperTriangle ? 1 : 0);
  }

  getCachedConvexTrianglePillar(xi, yi, getUpperTriangle) {
    return this._cachedPillars[this.getCacheConvexTrianglePillarKey(xi, yi, getUpperTriangle)];
  }

  setCachedConvexTrianglePillar(xi, yi, getUpperTriangle, convex, offset) {
    this._cachedPillars[this.getCacheConvexTrianglePillarKey(xi, yi, getUpperTriangle)] = {
      convex,
      offset
    };
  }

  clearCachedConvexTrianglePillar(xi, yi, getUpperTriangle) {
    delete this._cachedPillars[this.getCacheConvexTrianglePillarKey(xi, yi, getUpperTriangle)];
  }
  /**
   * Get a triangle from the heightfield
   */


  getTriangle(xi, yi, upper, a, b, c) {
    const data = this.data;
    const elementSize = this.elementSize;

    if (upper) {
      // Top triangle verts
      a.set((xi + 1) * elementSize, (yi + 1) * elementSize, data[xi + 1][yi + 1]);
      b.set(xi * elementSize, (yi + 1) * elementSize, data[xi][yi + 1]);
      c.set((xi + 1) * elementSize, yi * elementSize, data[xi + 1][yi]);
    } else {
      // Top triangle verts
      a.set(xi * elementSize, yi * elementSize, data[xi][yi]);
      b.set((xi + 1) * elementSize, yi * elementSize, data[xi + 1][yi]);
      c.set(xi * elementSize, (yi + 1) * elementSize, data[xi][yi + 1]);
    }
  }
  /**
   * Get a triangle in the terrain in the form of a triangular convex shape.
   */


  getConvexTrianglePillar(xi, yi, getUpperTriangle) {
    let result = this.pillarConvex;
    let offsetResult = this.pillarOffset;

    if (this.cacheEnabled) {
      const data = this.getCachedConvexTrianglePillar(xi, yi, getUpperTriangle);

      if (data) {
        this.pillarConvex = data.convex;
        this.pillarOffset = data.offset;
        return;
      }

      result = new ConvexPolyhedron();
      offsetResult = new Vec3();
      this.pillarConvex = result;
      this.pillarOffset = offsetResult;
    }

    const data = this.data;
    const elementSize = this.elementSize;
    const faces = result.faces; // Reuse verts if possible

    result.vertices.length = 6;

    for (let i = 0; i < 6; i++) {
      if (!result.vertices[i]) {
        result.vertices[i] = new Vec3();
      }
    } // Reuse faces if possible


    faces.length = 5;

    for (let i = 0; i < 5; i++) {
      if (!faces[i]) {
        faces[i] = [];
      }
    }

    const verts = result.vertices;
    const h = (Math.min(data[xi][yi], data[xi + 1][yi], data[xi][yi + 1], data[xi + 1][yi + 1]) - this.minValue) / 2 + this.minValue;

    if (!getUpperTriangle) {
      // Center of the triangle pillar - all polygons are given relative to this one
      offsetResult.set((xi + 0.25) * elementSize, // sort of center of a triangle
      (yi + 0.25) * elementSize, h // vertical center
      ); // Top triangle verts

      verts[0].set(-0.25 * elementSize, -0.25 * elementSize, data[xi][yi] - h);
      verts[1].set(0.75 * elementSize, -0.25 * elementSize, data[xi + 1][yi] - h);
      verts[2].set(-0.25 * elementSize, 0.75 * elementSize, data[xi][yi + 1] - h); // bottom triangle verts

      verts[3].set(-0.25 * elementSize, -0.25 * elementSize, -Math.abs(h) - 1);
      verts[4].set(0.75 * elementSize, -0.25 * elementSize, -Math.abs(h) - 1);
      verts[5].set(-0.25 * elementSize, 0.75 * elementSize, -Math.abs(h) - 1); // top triangle

      faces[0][0] = 0;
      faces[0][1] = 1;
      faces[0][2] = 2; // bottom triangle

      faces[1][0] = 5;
      faces[1][1] = 4;
      faces[1][2] = 3; // -x facing quad

      faces[2][0] = 0;
      faces[2][1] = 2;
      faces[2][2] = 5;
      faces[2][3] = 3; // -y facing quad

      faces[3][0] = 1;
      faces[3][1] = 0;
      faces[3][2] = 3;
      faces[3][3] = 4; // +xy facing quad

      faces[4][0] = 4;
      faces[4][1] = 5;
      faces[4][2] = 2;
      faces[4][3] = 1;
    } else {
      // Center of the triangle pillar - all polygons are given relative to this one
      offsetResult.set((xi + 0.75) * elementSize, // sort of center of a triangle
      (yi + 0.75) * elementSize, h // vertical center
      ); // Top triangle verts

      verts[0].set(0.25 * elementSize, 0.25 * elementSize, data[xi + 1][yi + 1] - h);
      verts[1].set(-0.75 * elementSize, 0.25 * elementSize, data[xi][yi + 1] - h);
      verts[2].set(0.25 * elementSize, -0.75 * elementSize, data[xi + 1][yi] - h); // bottom triangle verts

      verts[3].set(0.25 * elementSize, 0.25 * elementSize, -Math.abs(h) - 1);
      verts[4].set(-0.75 * elementSize, 0.25 * elementSize, -Math.abs(h) - 1);
      verts[5].set(0.25 * elementSize, -0.75 * elementSize, -Math.abs(h) - 1); // Top triangle

      faces[0][0] = 0;
      faces[0][1] = 1;
      faces[0][2] = 2; // bottom triangle

      faces[1][0] = 5;
      faces[1][1] = 4;
      faces[1][2] = 3; // +x facing quad

      faces[2][0] = 2;
      faces[2][1] = 5;
      faces[2][2] = 3;
      faces[2][3] = 0; // +y facing quad

      faces[3][0] = 3;
      faces[3][1] = 4;
      faces[3][2] = 1;
      faces[3][3] = 0; // -xy facing quad

      faces[4][0] = 1;
      faces[4][1] = 4;
      faces[4][2] = 5;
      faces[4][3] = 2;
    }

    result.computeNormals();
    result.computeEdges();
    result.updateBoundingSphereRadius();
    this.setCachedConvexTrianglePillar(xi, yi, getUpperTriangle, result, offsetResult);
  }

  calculateLocalInertia(mass, target) {
    if (target === void 0) {
      target = new Vec3();
    }

    target.set(0, 0, 0);
    return target;
  }

  volume() {
    return (// The terrain is infinite
      Number.MAX_VALUE
    );
  }

  calculateWorldAABB(pos, quat, min, max) {
    /** @TODO do it properly */
    min.set(-Number.MAX_VALUE, -Number.MAX_VALUE, -Number.MAX_VALUE);
    max.set(Number.MAX_VALUE, Number.MAX_VALUE, Number.MAX_VALUE);
  }

  updateBoundingSphereRadius() {
    // Use the bounding box of the min/max values
    const data = this.data;
    const s = this.elementSize;
    this.boundingSphereRadius = new Vec3(data.length * s, data[0].length * s, Math.max(Math.abs(this.maxValue), Math.abs(this.minValue))).length();
  }
  /**
   * Sets the height values from an image. Currently only supported in browser.
   */


  setHeightsFromImage(image, scale) {
    const {
      x,
      z,
      y
    } = scale;
    const canvas = document.createElement('canvas');
    canvas.width = image.width;
    canvas.height = image.height;
    const context = canvas.getContext('2d');
    context.drawImage(image, 0, 0);
    const imageData = context.getImageData(0, 0, image.width, image.height);
    const matrix = this.data;
    matrix.length = 0;
    this.elementSize = Math.abs(x) / imageData.width;

    for (let i = 0; i < imageData.height; i++) {
      const row = [];

      for (let j = 0; j < imageData.width; j++) {
        const a = imageData.data[(i * imageData.height + j) * 4];
        const b = imageData.data[(i * imageData.height + j) * 4 + 1];
        const c = imageData.data[(i * imageData.height + j) * 4 + 2];
        const height = (a + b + c) / 4 / 255 * z;

        if (x < 0) {
          row.push(height);
        } else {
          row.unshift(height);
        }
      }

      if (y < 0) {
        matrix.unshift(row);
      } else {
        matrix.push(row);
      }
    }

    this.updateMaxValue();
    this.updateMinValue();
    this.update();
  }

}

const getHeightAt_idx = [];
const getHeightAt_weights = new Vec3();
const getHeightAt_a = new Vec3();
const getHeightAt_b = new Vec3();
const getHeightAt_c = new Vec3();
const getNormalAt_a = new Vec3();
const getNormalAt_b = new Vec3();
const getNormalAt_c = new Vec3();
const getNormalAt_e0 = new Vec3();
const getNormalAt_e1 = new Vec3(); // from https://en.wikipedia.org/wiki/Barycentric_coordinate_system

function barycentricWeights(x, y, ax, ay, bx, by, cx, cy, result) {
  result.x = ((by - cy) * (x - cx) + (cx - bx) * (y - cy)) / ((by - cy) * (ax - cx) + (cx - bx) * (ay - cy));
  result.y = ((cy - ay) * (x - cx) + (ax - cx) * (y - cy)) / ((by - cy) * (ax - cx) + (cx - bx) * (ay - cy));
  result.z = 1 - result.x - result.y;
}
/**
 * OctreeNode
 */


class OctreeNode {
  /** The root node */

  /** Boundary of this node */

  /** Contained data at the current node level */

  /** Children to this node */
  constructor(options) {
    if (options === void 0) {
      options = {};
    }

    this.root = void 0;
    this.aabb = void 0;
    this.data = void 0;
    this.children = void 0;
    this.root = options.root || null;
    this.aabb = options.aabb ? options.aabb.clone() : new AABB();
    this.data = [];
    this.children = [];
  }
  /**
   * reset
   */


  reset() {
    this.children.length = this.data.length = 0;
  }
  /**
   * Insert data into this node
   * @return True if successful, otherwise false
   */


  insert(aabb, elementData, level) {
    if (level === void 0) {
      level = 0;
    }

    const nodeData = this.data; // Ignore objects that do not belong in this node

    if (!this.aabb.contains(aabb)) {
      return false; // object cannot be added
    }

    const children = this.children;
    const maxDepth = this.maxDepth || this.root.maxDepth;

    if (level < maxDepth) {
      // Subdivide if there are no children yet
      let subdivided = false;

      if (!children.length) {
        this.subdivide();
        subdivided = true;
      } // add to whichever node will accept it


      for (let i = 0; i !== 8; i++) {
        if (children[i].insert(aabb, elementData, level + 1)) {
          return true;
        }
      }

      if (subdivided) {
        // No children accepted! Might as well just remove em since they contain none
        children.length = 0;
      }
    } // Too deep, or children didnt want it. add it in current node


    nodeData.push(elementData);
    return true;
  }
  /**
   * Create 8 equally sized children nodes and put them in the `children` array.
   */


  subdivide() {
    const aabb = this.aabb;
    const l = aabb.lowerBound;
    const u = aabb.upperBound;
    const children = this.children;
    children.push(new OctreeNode({
      aabb: new AABB({
        lowerBound: new Vec3(0, 0, 0)
      })
    }), new OctreeNode({
      aabb: new AABB({
        lowerBound: new Vec3(1, 0, 0)
      })
    }), new OctreeNode({
      aabb: new AABB({
        lowerBound: new Vec3(1, 1, 0)
      })
    }), new OctreeNode({
      aabb: new AABB({
        lowerBound: new Vec3(1, 1, 1)
      })
    }), new OctreeNode({
      aabb: new AABB({
        lowerBound: new Vec3(0, 1, 1)
      })
    }), new OctreeNode({
      aabb: new AABB({
        lowerBound: new Vec3(0, 0, 1)
      })
    }), new OctreeNode({
      aabb: new AABB({
        lowerBound: new Vec3(1, 0, 1)
      })
    }), new OctreeNode({
      aabb: new AABB({
        lowerBound: new Vec3(0, 1, 0)
      })
    }));
    u.vsub(l, halfDiagonal);
    halfDiagonal.scale(0.5, halfDiagonal);
    const root = this.root || this;

    for (let i = 0; i !== 8; i++) {
      const child = children[i]; // Set current node as root

      child.root = root; // Compute bounds

      const lowerBound = child.aabb.lowerBound;
      lowerBound.x *= halfDiagonal.x;
      lowerBound.y *= halfDiagonal.y;
      lowerBound.z *= halfDiagonal.z;
      lowerBound.vadd(l, lowerBound); // Upper bound is always lower bound + halfDiagonal

      lowerBound.vadd(halfDiagonal, child.aabb.upperBound);
    }
  }
  /**
   * Get all data, potentially within an AABB
   * @return The "result" object
   */


  aabbQuery(aabb, result) {
    this.data; // abort if the range does not intersect this node
    // if (!this.aabb.overlaps(aabb)){
    //     return result;
    // }
    // Add objects at this level
    // Array.prototype.push.apply(result, nodeData);
    // Add child data
    // @todo unwrap recursion into a queue / loop, that's faster in JS

    this.children; // for (let i = 0, N = this.children.length; i !== N; i++) {
    //     children[i].aabbQuery(aabb, result);
    // }

    const queue = [this];

    while (queue.length) {
      const node = queue.pop();

      if (node.aabb.overlaps(aabb)) {
        Array.prototype.push.apply(result, node.data);
      }

      Array.prototype.push.apply(queue, node.children);
    }

    return result;
  }
  /**
   * Get all data, potentially intersected by a ray.
   * @return The "result" object
   */


  rayQuery(ray, treeTransform, result) {
    // Use aabb query for now.

    /** @todo implement real ray query which needs less lookups */
    ray.getAABB(tmpAABB);
    tmpAABB.toLocalFrame(treeTransform, tmpAABB);
    this.aabbQuery(tmpAABB, result);
    return result;
  }
  /**
   * removeEmptyNodes
   */


  removeEmptyNodes() {
    for (let i = this.children.length - 1; i >= 0; i--) {
      this.children[i].removeEmptyNodes();

      if (!this.children[i].children.length && !this.children[i].data.length) {
        this.children.splice(i, 1);
      }
    }
  }

}
/**
 * Octree
 */


class Octree extends OctreeNode {
  /**
   * Maximum subdivision depth
   * @default 8
   */

  /**
   * @param aabb The total AABB of the tree
   */
  constructor(aabb, options) {
    if (options === void 0) {
      options = {};
    }

    super({
      root: null,
      aabb
    });
    this.maxDepth = void 0;
    this.maxDepth = typeof options.maxDepth !== 'undefined' ? options.maxDepth : 8;
  }

}

const halfDiagonal = new Vec3();
const tmpAABB = new AABB();
/**
 * Trimesh.
 * @example
 *     // How to make a mesh with a single triangle
 *     const vertices = [
 *         0, 0, 0, // vertex 0
 *         1, 0, 0, // vertex 1
 *         0, 1, 0  // vertex 2
 *     ]
 *     const indices = [
 *         0, 1, 2  // triangle 0
 *     ]
 *     const trimeshShape = new CANNON.Trimesh(vertices, indices)
 */

class Trimesh extends Shape {
  /**
   * vertices
   */

  /**
   * Array of integers, indicating which vertices each triangle consists of. The length of this array is thus 3 times the number of triangles.
   */

  /**
   * The normals data.
   */

  /**
   * The local AABB of the mesh.
   */

  /**
   * References to vertex pairs, making up all unique edges in the trimesh.
   */

  /**
   * Local scaling of the mesh. Use .setScale() to set it.
   */

  /**
   * The indexed triangles. Use .updateTree() to update it.
   */
  constructor(vertices, indices) {
    super({
      type: Shape.types.TRIMESH
    });
    this.vertices = void 0;
    this.indices = void 0;
    this.normals = void 0;
    this.aabb = void 0;
    this.edges = void 0;
    this.scale = void 0;
    this.tree = void 0;
    this.vertices = new Float32Array(vertices);
    this.indices = new Int16Array(indices);
    this.normals = new Float32Array(indices.length);
    this.aabb = new AABB();
    this.edges = null;
    this.scale = new Vec3(1, 1, 1);
    this.tree = new Octree();
    this.updateEdges();
    this.updateNormals();
    this.updateAABB();
    this.updateBoundingSphereRadius();
    this.updateTree();
  }
  /**
   * updateTree
   */


  updateTree() {
    const tree = this.tree;
    tree.reset();
    tree.aabb.copy(this.aabb);
    const scale = this.scale; // The local mesh AABB is scaled, but the octree AABB should be unscaled

    tree.aabb.lowerBound.x *= 1 / scale.x;
    tree.aabb.lowerBound.y *= 1 / scale.y;
    tree.aabb.lowerBound.z *= 1 / scale.z;
    tree.aabb.upperBound.x *= 1 / scale.x;
    tree.aabb.upperBound.y *= 1 / scale.y;
    tree.aabb.upperBound.z *= 1 / scale.z; // Insert all triangles

    const triangleAABB = new AABB();
    const a = new Vec3();
    const b = new Vec3();
    const c = new Vec3();
    const points = [a, b, c];

    for (let i = 0; i < this.indices.length / 3; i++) {
      //this.getTriangleVertices(i, a, b, c);
      // Get unscaled triangle verts
      const i3 = i * 3;

      this._getUnscaledVertex(this.indices[i3], a);

      this._getUnscaledVertex(this.indices[i3 + 1], b);

      this._getUnscaledVertex(this.indices[i3 + 2], c);

      triangleAABB.setFromPoints(points);
      tree.insert(triangleAABB, i);
    }

    tree.removeEmptyNodes();
  }
  /**
   * Get triangles in a local AABB from the trimesh.
   * @param result An array of integers, referencing the queried triangles.
   */


  getTrianglesInAABB(aabb, result) {
    unscaledAABB.copy(aabb); // Scale it to local

    const scale = this.scale;
    const isx = scale.x;
    const isy = scale.y;
    const isz = scale.z;
    const l = unscaledAABB.lowerBound;
    const u = unscaledAABB.upperBound;
    l.x /= isx;
    l.y /= isy;
    l.z /= isz;
    u.x /= isx;
    u.y /= isy;
    u.z /= isz;
    return this.tree.aabbQuery(unscaledAABB, result);
  }
  /**
   * setScale
   */


  setScale(scale) {
    const wasUniform = this.scale.x === this.scale.y && this.scale.y === this.scale.z;
    const isUniform = scale.x === scale.y && scale.y === scale.z;

    if (!(wasUniform && isUniform)) {
      // Non-uniform scaling. Need to update normals.
      this.updateNormals();
    }

    this.scale.copy(scale);
    this.updateAABB();
    this.updateBoundingSphereRadius();
  }
  /**
   * Compute the normals of the faces. Will save in the `.normals` array.
   */


  updateNormals() {
    const n = computeNormals_n; // Generate normals

    const normals = this.normals;

    for (let i = 0; i < this.indices.length / 3; i++) {
      const i3 = i * 3;
      const a = this.indices[i3];
      const b = this.indices[i3 + 1];
      const c = this.indices[i3 + 2];
      this.getVertex(a, va);
      this.getVertex(b, vb);
      this.getVertex(c, vc);
      Trimesh.computeNormal(vb, va, vc, n);
      normals[i3] = n.x;
      normals[i3 + 1] = n.y;
      normals[i3 + 2] = n.z;
    }
  }
  /**
   * Update the `.edges` property
   */


  updateEdges() {
    const edges = {};

    const add = (a, b) => {
      const key = a < b ? a + "_" + b : b + "_" + a;
      edges[key] = true;
    };

    for (let i = 0; i < this.indices.length / 3; i++) {
      const i3 = i * 3;
      const a = this.indices[i3];
      const b = this.indices[i3 + 1];
      const c = this.indices[i3 + 2];
      add(a, b);
      add(b, c);
      add(c, a);
    }

    const keys = Object.keys(edges);
    this.edges = new Int16Array(keys.length * 2);

    for (let i = 0; i < keys.length; i++) {
      const indices = keys[i].split('_');
      this.edges[2 * i] = parseInt(indices[0], 10);
      this.edges[2 * i + 1] = parseInt(indices[1], 10);
    }
  }
  /**
   * Get an edge vertex
   * @param firstOrSecond 0 or 1, depending on which one of the vertices you need.
   * @param vertexStore Where to store the result
   */


  getEdgeVertex(edgeIndex, firstOrSecond, vertexStore) {
    const vertexIndex = this.edges[edgeIndex * 2 + (firstOrSecond ? 1 : 0)];
    this.getVertex(vertexIndex, vertexStore);
  }
  /**
   * Get a vector along an edge.
   */


  getEdgeVector(edgeIndex, vectorStore) {
    const va = getEdgeVector_va;
    const vb = getEdgeVector_vb;
    this.getEdgeVertex(edgeIndex, 0, va);
    this.getEdgeVertex(edgeIndex, 1, vb);
    vb.vsub(va, vectorStore);
  }
  /**
   * Get face normal given 3 vertices
   */


  static computeNormal(va, vb, vc, target) {
    vb.vsub(va, ab);
    vc.vsub(vb, cb);
    cb.cross(ab, target);

    if (!target.isZero()) {
      target.normalize();
    }
  }
  /**
   * Get vertex i.
   * @return The "out" vector object
   */


  getVertex(i, out) {
    const scale = this.scale;

    this._getUnscaledVertex(i, out);

    out.x *= scale.x;
    out.y *= scale.y;
    out.z *= scale.z;
    return out;
  }
  /**
   * Get raw vertex i
   * @return The "out" vector object
   */


  _getUnscaledVertex(i, out) {
    const i3 = i * 3;
    const vertices = this.vertices;
    return out.set(vertices[i3], vertices[i3 + 1], vertices[i3 + 2]);
  }
  /**
   * Get a vertex from the trimesh,transformed by the given position and quaternion.
   * @return The "out" vector object
   */


  getWorldVertex(i, pos, quat, out) {
    this.getVertex(i, out);
    Transform.pointToWorldFrame(pos, quat, out, out);
    return out;
  }
  /**
   * Get the three vertices for triangle i.
   */


  getTriangleVertices(i, a, b, c) {
    const i3 = i * 3;
    this.getVertex(this.indices[i3], a);
    this.getVertex(this.indices[i3 + 1], b);
    this.getVertex(this.indices[i3 + 2], c);
  }
  /**
   * Compute the normal of triangle i.
   * @return The "target" vector object
   */


  getNormal(i, target) {
    const i3 = i * 3;
    return target.set(this.normals[i3], this.normals[i3 + 1], this.normals[i3 + 2]);
  }
  /**
   * @return The "target" vector object
   */


  calculateLocalInertia(mass, target) {
    // Approximate with box inertia
    // Exact inertia calculation is overkill, but see http://geometrictools.com/Documentation/PolyhedralMassProperties.pdf for the correct way to do it
    this.computeLocalAABB(cli_aabb);
    const x = cli_aabb.upperBound.x - cli_aabb.lowerBound.x;
    const y = cli_aabb.upperBound.y - cli_aabb.lowerBound.y;
    const z = cli_aabb.upperBound.z - cli_aabb.lowerBound.z;
    return target.set(1.0 / 12.0 * mass * (2 * y * 2 * y + 2 * z * 2 * z), 1.0 / 12.0 * mass * (2 * x * 2 * x + 2 * z * 2 * z), 1.0 / 12.0 * mass * (2 * y * 2 * y + 2 * x * 2 * x));
  }
  /**
   * Compute the local AABB for the trimesh
   */


  computeLocalAABB(aabb) {
    const l = aabb.lowerBound;
    const u = aabb.upperBound;
    const n = this.vertices.length;
    this.vertices;
    const v = computeLocalAABB_worldVert;
    this.getVertex(0, v);
    l.copy(v);
    u.copy(v);

    for (let i = 0; i !== n; i++) {
      this.getVertex(i, v);

      if (v.x < l.x) {
        l.x = v.x;
      } else if (v.x > u.x) {
        u.x = v.x;
      }

      if (v.y < l.y) {
        l.y = v.y;
      } else if (v.y > u.y) {
        u.y = v.y;
      }

      if (v.z < l.z) {
        l.z = v.z;
      } else if (v.z > u.z) {
        u.z = v.z;
      }
    }
  }
  /**
   * Update the `.aabb` property
   */


  updateAABB() {
    this.computeLocalAABB(this.aabb);
  }
  /**
   * Will update the `.boundingSphereRadius` property
   */


  updateBoundingSphereRadius() {
    // Assume points are distributed with local (0,0,0) as center
    let max2 = 0;
    const vertices = this.vertices;
    const v = new Vec3();

    for (let i = 0, N = vertices.length / 3; i !== N; i++) {
      this.getVertex(i, v);
      const norm2 = v.lengthSquared();

      if (norm2 > max2) {
        max2 = norm2;
      }
    }

    this.boundingSphereRadius = Math.sqrt(max2);
  }
  /**
   * calculateWorldAABB
   */


  calculateWorldAABB(pos, quat, min, max) {
    /*
        const n = this.vertices.length / 3,
            verts = this.vertices;
        const minx,miny,minz,maxx,maxy,maxz;
         const v = tempWorldVertex;
        for(let i=0; i<n; i++){
            this.getVertex(i, v);
            quat.vmult(v, v);
            pos.vadd(v, v);
            if (v.x < minx || minx===undefined){
                minx = v.x;
            } else if(v.x > maxx || maxx===undefined){
                maxx = v.x;
            }
             if (v.y < miny || miny===undefined){
                miny = v.y;
            } else if(v.y > maxy || maxy===undefined){
                maxy = v.y;
            }
             if (v.z < minz || minz===undefined){
                minz = v.z;
            } else if(v.z > maxz || maxz===undefined){
                maxz = v.z;
            }
        }
        min.set(minx,miny,minz);
        max.set(maxx,maxy,maxz);
        */
    // Faster approximation using local AABB
    const frame = calculateWorldAABB_frame;
    const result = calculateWorldAABB_aabb;
    frame.position = pos;
    frame.quaternion = quat;
    this.aabb.toWorldFrame(frame, result);
    min.copy(result.lowerBound);
    max.copy(result.upperBound);
  }
  /**
   * Get approximate volume
   */


  volume() {
    return 4.0 * Math.PI * this.boundingSphereRadius / 3.0;
  }
  /**
   * Create a Trimesh instance, shaped as a torus.
   */


  static createTorus(radius, tube, radialSegments, tubularSegments, arc) {
    if (radius === void 0) {
      radius = 1;
    }

    if (tube === void 0) {
      tube = 0.5;
    }

    if (radialSegments === void 0) {
      radialSegments = 8;
    }

    if (tubularSegments === void 0) {
      tubularSegments = 6;
    }

    if (arc === void 0) {
      arc = Math.PI * 2;
    }

    const vertices = [];
    const indices = [];

    for (let j = 0; j <= radialSegments; j++) {
      for (let i = 0; i <= tubularSegments; i++) {
        const u = i / tubularSegments * arc;
        const v = j / radialSegments * Math.PI * 2;
        const x = (radius + tube * Math.cos(v)) * Math.cos(u);
        const y = (radius + tube * Math.cos(v)) * Math.sin(u);
        const z = tube * Math.sin(v);
        vertices.push(x, y, z);
      }
    }

    for (let j = 1; j <= radialSegments; j++) {
      for (let i = 1; i <= tubularSegments; i++) {
        const a = (tubularSegments + 1) * j + i - 1;
        const b = (tubularSegments + 1) * (j - 1) + i - 1;
        const c = (tubularSegments + 1) * (j - 1) + i;
        const d = (tubularSegments + 1) * j + i;
        indices.push(a, b, d);
        indices.push(b, c, d);
      }
    }

    return new Trimesh(vertices, indices);
  }

}

const computeNormals_n = new Vec3();
const unscaledAABB = new AABB();
const getEdgeVector_va = new Vec3();
const getEdgeVector_vb = new Vec3();
const cb = new Vec3();
const ab = new Vec3();
const va = new Vec3();
const vb = new Vec3();
const vc = new Vec3();
const cli_aabb = new AABB();
const computeLocalAABB_worldVert = new Vec3();
const calculateWorldAABB_frame = new Transform();
const calculateWorldAABB_aabb = new AABB();
// the first part of the method is formed by the
// shape type that comes before, in the second part
// there is the shape type that comes after in the SHAPE_TYPES list


({
  sphereSphere: Shape.types.SPHERE,
  spherePlane: Shape.types.SPHERE | Shape.types.PLANE,
  boxBox: Shape.types.BOX | Shape.types.BOX,
  sphereBox: Shape.types.SPHERE | Shape.types.BOX,
  planeBox: Shape.types.PLANE | Shape.types.BOX,
  convexConvex: Shape.types.CONVEXPOLYHEDRON,
  sphereConvex: Shape.types.SPHERE | Shape.types.CONVEXPOLYHEDRON,
  planeConvex: Shape.types.PLANE | Shape.types.CONVEXPOLYHEDRON,
  boxConvex: Shape.types.BOX | Shape.types.CONVEXPOLYHEDRON,
  sphereHeightfield: Shape.types.SPHERE | Shape.types.HEIGHTFIELD,
  boxHeightfield: Shape.types.BOX | Shape.types.HEIGHTFIELD,
  convexHeightfield: Shape.types.CONVEXPOLYHEDRON | Shape.types.HEIGHTFIELD,
  sphereParticle: Shape.types.PARTICLE | Shape.types.SPHERE,
  planeParticle: Shape.types.PLANE | Shape.types.PARTICLE,
  boxParticle: Shape.types.BOX | Shape.types.PARTICLE,
  convexParticle: Shape.types.PARTICLE | Shape.types.CONVEXPOLYHEDRON,
  cylinderCylinder: Shape.types.CYLINDER,
  sphereCylinder: Shape.types.SPHERE | Shape.types.CYLINDER,
  planeCylinder: Shape.types.PLANE | Shape.types.CYLINDER,
  boxCylinder: Shape.types.BOX | Shape.types.CYLINDER,
  convexCylinder: Shape.types.CONVEXPOLYHEDRON | Shape.types.CYLINDER,
  heightfieldCylinder: Shape.types.HEIGHTFIELD | Shape.types.CYLINDER,
  particleCylinder: Shape.types.PARTICLE | Shape.types.CYLINDER,
  sphereTrimesh: Shape.types.SPHERE | Shape.types.TRIMESH,
  planeTrimesh: Shape.types.PLANE | Shape.types.TRIMESH
});

new Vec3();
new Vec3();
new Vec3();
new Vec3();
new Vec3();
new Quaternion();
new Quaternion();
new Vec3();
new Vec3();
new Vec3();
new Vec3();
new Vec3();
new Vec3();
new Vec3();
new Vec3();
new Vec3();
new Vec3();
new Vec3();
new Vec3();
new Vec3();
new Vec3();
new Vec3();
new Vec3();
new AABB();
new Vec3();
new Vec3(); // See http://bulletphysics.com/Bullet/BulletFull/SphereTriangleDetector_8cpp_source.html

new Vec3();
new Vec3();
new Vec3();

new Vec3();
new Vec3();
new Vec3();
new Vec3();
[new Vec3(), new Vec3(), new Vec3(), new Vec3(), new Vec3(), new Vec3()];
new Vec3();
new Vec3();
new Vec3();
new Vec3();
new Vec3();
new Vec3();
new Vec3();
new Vec3();
new Vec3();
new Vec3();
new Vec3();
new Vec3();
new Vec3();
new Vec3();
new Vec3();
new Vec3();
new Vec3();
new Vec3();
new Vec3();
new Vec3();
new Vec3();
new Vec3();
new Vec3();
new Vec3(); // WIP

new Quaternion();
new Vec3();
new Vec3();
new Vec3();
new Vec3();
new Vec3();
new Vec3();
new Vec3();
new Vec3();


new AABB();
new Ray(); // performance.now() fallback on Date.now()

const performance = globalThis.performance || {};

if (!performance.now) {
  let nowOffset = Date.now();

  if (performance.timing && performance.timing.navigationStart) {
    nowOffset = performance.timing.navigationStart;
  }

  performance.now = () => Date.now() - nowOffset;
} // Reusable event objects to save memory.

function cannonDebugger(scene, bodies, _temp) {
  let {
    color = 0x00ff00,
    scale = 1,
    onInit,
    onUpdate,
    autoUpdate
  } = _temp === void 0 ? {} : _temp;
  const _meshes = [];

  const _material = new MeshBasicMaterial({
    color: color != null ? color : 0x00ff00,
    wireframe: true
  });

  const _tempVec0 = new Vec3();

  const _tempVec1 = new Vec3();

  const _tempVec2 = new Vec3();

  const _tempQuat0 = new Quaternion();

  const _sphereGeometry = new SphereGeometry(1);

  const _boxGeometry = new BoxGeometry(1, 1, 1);

  const _planeGeometry = new PlaneGeometry(10, 10, 10, 10);

  function createConvexPolyhedronGeometry(shape) {
    const geometry = new BufferGeometry(); // Add vertices

    const positions = [];

    for (let i = 0; i < shape.vertices.length; i++) {
      const vertex = shape.vertices[i];
      positions.push(vertex.x, vertex.y, vertex.z);
    }

    geometry.setAttribute('position', new Float32BufferAttribute(positions, 3)); // Add faces

    const indices = [];

    for (let i = 0; i < shape.faces.length; i++) {
      const face = shape.faces[i];
      const a = face[0];

      for (let j = 1; j < face.length - 1; j++) {
        const b = face[j];
        const c = face[j + 1];
        indices.push(a, b, c);
      }
    }

    geometry.setIndex(indices);
    geometry.computeBoundingSphere();
    geometry.computeVertexNormals();
    return geometry;
  }

  function createTrimeshGeometry(shape) {
    const geometry = new BufferGeometry();
    const positions = [];
    const v0 = _tempVec0;
    const v1 = _tempVec1;
    const v2 = _tempVec2;

    for (let i = 0; i < shape.indices.length / 3; i++) {
      shape.getTriangleVertices(i, v0, v1, v2);
      positions.push(v0.x, v0.y, v0.z);
      positions.push(v1.x, v1.y, v1.z);
      positions.push(v2.x, v2.y, v2.z);
    }

    geometry.setAttribute('position', new Float32BufferAttribute(positions, 3));
    geometry.computeBoundingSphere();
    geometry.computeVertexNormals();
    return geometry;
  }

  function createHeightfieldGeometry(shape) {
    const geometry = new BufferGeometry();
    const s = shape.elementSize || 1; // assumes square heightfield, else i*x, j*y

    const positions = shape.data.flatMap((row, i) => row.flatMap((z, j) => [i * s, j * s, z]));
    const indices = [];

    for (let xi = 0; xi < shape.data.length - 1; xi++) {
      for (let yi = 0; yi < shape.data[xi].length - 1; yi++) {
        const stride = shape.data[xi].length;
        const index = xi * stride + yi;
        indices.push(index + 1, index + stride, index + stride + 1);
        indices.push(index + stride, index + 1, index);
      }
    }

    geometry.setIndex(indices);
    geometry.setAttribute('position', new Float32BufferAttribute(positions, 3));
    geometry.computeBoundingSphere();
    geometry.computeVertexNormals();
    return geometry;
  }

  function createMesh(shape) {
    let mesh = new Mesh();
    const {
      SPHERE,
      BOX,
      PLANE,
      CYLINDER,
      CONVEXPOLYHEDRON,
      TRIMESH,
      HEIGHTFIELD
    } = Shape.types;

    switch (shape.type) {
      case SPHERE:
        {
          mesh = new Mesh(_sphereGeometry, _material);
          break;
        }

      case BOX:
        {
          mesh = new Mesh(_boxGeometry, _material);
          break;
        }

      case PLANE:
        {
          mesh = new Mesh(_planeGeometry, _material);
          break;
        }

      case CYLINDER:
        {
          const geometry = new CylinderGeometry(shape.radiusTop, shape.radiusBottom, shape.height, shape.numSegments);
          mesh = new Mesh(geometry, _material);
          shape.geometryId = geometry.id;
          break;
        }

      case CONVEXPOLYHEDRON:
        {
          const geometry = createConvexPolyhedronGeometry(shape);
          mesh = new Mesh(geometry, _material);
          shape.geometryId = geometry.id;
          break;
        }

      case TRIMESH:
        {
          const geometry = createTrimeshGeometry(shape);
          mesh = new Mesh(geometry, _material);
          shape.geometryId = geometry.id;
          break;
        }

      case HEIGHTFIELD:
        {
          const geometry = createHeightfieldGeometry(shape);
          mesh = new Mesh(geometry, _material);
          shape.geometryId = geometry.id;
          break;
        }
    }

    scene.add(mesh);
    return mesh;
  }

  function scaleMesh(mesh, shape) {
    const {
      SPHERE,
      BOX,
      PLANE,
      CYLINDER,
      CONVEXPOLYHEDRON,
      TRIMESH,
      HEIGHTFIELD
    } = Shape.types;

    switch (shape.type) {
      case SPHERE:
        {
          const {
            radius
          } = shape;
          mesh.scale.set(radius * scale, radius * scale, radius * scale);
          break;
        }

      case BOX:
        {
          mesh.scale.copy(shape.halfExtents);
          mesh.scale.multiplyScalar(2 * scale);
          break;
        }

      case PLANE:
        {
          break;
        }

      case CYLINDER:
        {
          mesh.scale.set(1 * scale, 1 * scale, 1 * scale);
          break;
        }

      case CONVEXPOLYHEDRON:
        {
          mesh.scale.set(1 * scale, 1 * scale, 1 * scale);
          break;
        }

      case TRIMESH:
        {
          mesh.scale.copy(shape.scale).multiplyScalar(scale);
          break;
        }

      case HEIGHTFIELD:
        {
          mesh.scale.set(1 * scale, 1 * scale, 1 * scale);
          break;
        }
    }
  }

  function typeMatch(mesh, shape) {
    if (!mesh) return false;
    const {
      geometry
    } = mesh;
    return geometry instanceof SphereGeometry && shape.type === Shape.types.SPHERE || geometry instanceof BoxGeometry && shape.type === Shape.types.BOX || geometry instanceof PlaneGeometry && shape.type === Shape.types.PLANE || geometry.id === shape.geometryId && shape.type === Shape.types.CYLINDER || geometry.id === shape.geometryId && shape.type === Shape.types.CONVEXPOLYHEDRON || geometry.id === shape.geometryId && shape.type === Shape.types.TRIMESH || geometry.id === shape.geometryId && shape.type === Shape.types.HEIGHTFIELD;
  }

  function updateMesh(index, shape) {
    let mesh = _meshes[index];
    let didCreateNewMesh = false;

    if (!typeMatch(mesh, shape)) {
      if (mesh) scene.remove(mesh);
      _meshes[index] = mesh = createMesh(shape);
      didCreateNewMesh = true;
    }

    scaleMesh(mesh, shape);
    return didCreateNewMesh;
  }

  function update() {
    const meshes = _meshes;
    const shapeWorldPosition = _tempVec0;
    const shapeWorldQuaternion = _tempQuat0;
    let meshIndex = 0;

    for (const body of bodies) {
      for (let i = 0; i !== body.shapes.length; i++) {
        const shape = body.shapes[i];
        const didCreateNewMesh = updateMesh(meshIndex, shape);
        const mesh = meshes[meshIndex];

        if (mesh) {
          // Get world position
          body.quaternion.vmult(body.shapeOffsets[i], shapeWorldPosition);
          body.position.vadd(shapeWorldPosition, shapeWorldPosition); // Get world quaternion

          body.quaternion.mult(body.shapeOrientations[i], shapeWorldQuaternion); // Copy to meshes

          mesh.position.copy(shapeWorldPosition);
          mesh.quaternion.copy(shapeWorldQuaternion);
          if (didCreateNewMesh && onInit instanceof Function) onInit(body, mesh, shape);
          if (!didCreateNewMesh && onUpdate instanceof Function) onUpdate(body, mesh, shape);
        }

        meshIndex++;
      }
    }

    for (let i = meshIndex; i < meshes.length; i++) {
      const mesh = meshes[i];
      if (mesh) scene.remove(mesh);
    }

    meshes.length = meshIndex;
    if (autoUpdate !== false) requestAnimationFrame(update);
  }

  if (autoUpdate !== false) requestAnimationFrame(update);
  return {
    update
  };
}

const makeVec3 = _ref => {
  let [x, y, z] = _ref;
  return new Vec3(x, y, z);
};

const prepareSphere = args => Array.isArray(args) ? args : [args];

const prepareConvexPolyhedron = _ref2 => {
  let [v, faces, n, a, boundingSphereRadius] = _ref2;
  return [{
    vertices: v ? v.map(makeVec3) : undefined,
    faces,
    normals: n ? n.map(makeVec3) : undefined,
    axes: a ? a.map(makeVec3) : undefined,
    boundingSphereRadius
  }];
};

function createShape(type, args) {
  switch (type) {
    case 'Box':
      return new Box(new Vec3(...args.map(v => v / 2)));
    // extents => halfExtents

    case 'ConvexPolyhedron':
      return new ConvexPolyhedron(...prepareConvexPolyhedron(args));

    case 'Cylinder':
      return new Cylinder(...args);
    // [ radiusTop, radiusBottom, height, numSegments ] = args

    case 'Heightfield':
      return new Heightfield(...args);
    // [ Array data, options: {minValue, maxValue, elementSize}  ] = args

    case 'Particle':
      return new Particle();
    // no args

    case 'Plane':
      return new Plane();
    // no args, infinite x and y

    case 'Sphere':
      return new Sphere(...prepareSphere(args));
    // radius = args

    case 'Trimesh':
      return new Trimesh(...args);
    // [vertices, indices] = args
  }
}
/**
 *
 * @param uuid {string}
 * @param props {BodyProps}
 * @param type {BodyShapeType}
 * @return {module:objects/Body.Body}
 */


const propsToBody = (uuid, props, type) => {
  const {
    args = [],
    position = [0, 0, 0],
    rotation = [0, 0, 0],
    velocity = [0, 0, 0],
    angularVelocity = [0, 0, 0],
    linearFactor = [1, 1, 1],
    angularFactor = [1, 1, 1],
    type: bodyType,
    mass,
    material,
    shapes,
    onCollide,
    collisionResponse,
    ...extra
  } = props;
  const body = new Body({ ...extra,
    mass: bodyType === 'Static' ? 0 : mass,
    type: bodyType ? Body[bodyType.toUpperCase()] : undefined,
    material: material ? new Material(material) : undefined
  });
  body.uuid = uuid;

  if (collisionResponse !== undefined) {
    body.collisionResponse = collisionResponse;
  }

  if (type === 'Compound') {
    shapes.forEach(_ref3 => {
      let {
        type,
        args,
        position,
        rotation,
        material,
        ...extra
      } = _ref3;
      const shapeBody = body.addShape(createShape(type, args), position ? new Vec3(...position) : undefined, rotation ? new Quaternion().setFromEuler(...rotation) : undefined);
      if (material) shapeBody.material = new Material(material);
      Object.assign(shapeBody, extra);
    });
  } else {
    body.addShape(createShape(type, args));
  }

  body.position.set(position[0], position[1], position[2]);
  body.quaternion.setFromEuler(rotation[0], rotation[1], rotation[2]);
  body.velocity.set(velocity[0], velocity[1], velocity[2]);
  body.angularVelocity.set(angularVelocity[0], angularVelocity[1], angularVelocity[2]);
  body.linearFactor.set(linearFactor[0], linearFactor[1], linearFactor[2]);
  body.angularFactor.set(angularFactor[0], angularFactor[1], angularFactor[2]);
  return body;
};

var propsToBody$1 = propsToBody;

const v = new Vector3();
const s = new Vector3(1, 1, 1);
const q$1 = new Quaternion$1();
function Debug(_ref) {
  let {
    color = 'black',
    scale = 1,
    children,
    impl = cannonDebugger
  } = _ref;
  const [debugInfo] = useState({
    bodies: [],
    refs: {}
  });
  const {
    refs
  } = useContext(context);
  const [scene] = useState(() => new Scene());
  const instance = useRef();
  let lastBodies = 0;
  useFrame(() => {
    if (!instance.current || lastBodies !== debugInfo.bodies.length) {
      lastBodies = debugInfo.bodies.length;
      scene.children = [];
      instance.current = impl(scene, debugInfo.bodies, {
        color,
        scale,
        autoUpdate: false
      });
    }

    for (const uuid in debugInfo.refs) {
      refs[uuid].matrix.decompose(v, q$1, s);
      debugInfo.refs[uuid].position.copy(v);
      debugInfo.refs[uuid].quaternion.copy(q$1);
    }

    instance.current.update();
  });
  const api = useMemo(() => ({
    add(id, props, type) {
      const body = propsToBody$1(id, props, type);
      debugInfo.bodies.push(body);
      debugInfo.refs[id] = body;
    },

    remove(id) {
      const debugBodyIndex = debugInfo.bodies.indexOf(debugInfo.refs[id]);
      if (debugBodyIndex > -1) debugInfo.bodies.splice(debugBodyIndex, 1);
      delete debugInfo.refs[id];
    }

  }), []);
  return /*#__PURE__*/React.createElement(debugContext.Provider, {
    value: api
  }, /*#__PURE__*/React.createElement("primitive", {
    object: scene
  }), children);
}

const temp = new Object3D();

function useForwardedRef(ref) {
  const nullRef = useRef(null);
  return ref && typeof ref !== 'function' ? ref : nullRef;
}

function capitalize(str) {
  return str.charAt(0).toUpperCase() + str.slice(1);
}

function getUUID(ref, index) {
  const suffix = index === undefined ? '' : `/${index}`;
  if (typeof ref === 'function') return null;
  return ref && ref.current && `${ref.current.uuid}${suffix}`;
}

const e = new Euler();
const q = new Quaternion$1();

const quaternionToRotation = callback => {
  return v => callback(e.setFromQuaternion(q.fromArray(v)).toArray());
};

let incrementingId = 0;

function subscribe(ref, worker, subscriptions, type, index, target) {
  if (target === void 0) {
    target = 'bodies';
  }

  return callback => {
    const id = incrementingId++;
    subscriptions[id] = {
      [type]: callback
    };
    const uuid = getUUID(ref, index);
    uuid && worker.postMessage({
      op: 'subscribe',
      uuid,
      props: {
        id,
        type,
        target
      }
    });
    return () => {
      delete subscriptions[id];
      worker.postMessage({
        op: 'unsubscribe',
        props: id
      });
    };
  };
}

function prepare(object, props) {
  object.userData = props.userData || {};
  object.position.set(...(props.position || [0, 0, 0]));
  object.rotation.set(...(props.rotation || [0, 0, 0]));
  object.updateMatrix();
}

function setupCollision(events, _ref, uuid) {
  let {
    onCollide,
    onCollideBegin,
    onCollideEnd
  } = _ref;
  events[uuid] = {
    collide: onCollide,
    collideBegin: onCollideBegin,
    collideEnd: onCollideEnd
  };
}

function useBody(type, fn, argsFn, fwdRef, deps) {
  if (deps === void 0) {
    deps = [];
  }

  const ref = useForwardedRef(fwdRef);
  const {
    worker,
    refs,
    events,
    subscriptions
  } = useContext(context);
  const debugApi = useContext(debugContext);
  useLayoutEffect(() => {
    if (!ref.current) {
      // When the reference isn't used we create a stub
      // The body doesn't have a visual representation but can still be constrained
      ref.current = new Object3D();
    }

    const object = ref.current;
    const currentWorker = worker;
    const objectCount = object instanceof InstancedMesh ? (object.instanceMatrix.setUsage(DynamicDrawUsage), object.count) : 1;
    const uuid = object instanceof InstancedMesh ? new Array(objectCount).fill(0).map((_, i) => `${object.uuid}/${i}`) : [object.uuid];
    const props = object instanceof InstancedMesh ? uuid.map((id, i) => {
      const props = fn(i);
      prepare(temp, props);
      object.setMatrixAt(i, temp.matrix);
      object.instanceMatrix.needsUpdate = true;
      refs[id] = object;
      if (debugApi) debugApi.add(id, props, type);
      setupCollision(events, props, id);
      return { ...props,
        args: argsFn(props.args)
      };
    }) : uuid.map((id, i) => {
      const props = fn(i);
      prepare(object, props);
      refs[id] = object;
      if (debugApi) debugApi.add(id, props, type);
      setupCollision(events, props, id);
      return { ...props,
        args: argsFn(props.args)
      };
    }); // Register on mount, unregister on unmount

    currentWorker.postMessage({
      op: 'addBodies',
      type,
      uuid,
      props: props.map(_ref2 => {
        let {
          onCollide,
          onCollideBegin,
          onCollideEnd,
          ...serializableProps
        } = _ref2;
        return {
          onCollide: Boolean(onCollide),
          ...serializableProps
        };
      })
    });
    return () => {
      uuid.forEach(id => {
        delete refs[id];
        if (debugApi) debugApi.remove(id);
        delete events[id];
      });
      currentWorker.postMessage({
        op: 'removeBodies',
        uuid
      });
    };
  }, deps);
  const api = useMemo(() => {
    const makeAtomic = (type, index) => {
      const op = `set${capitalize(type)}`;
      return {
        set: value => {
          const uuid = getUUID(ref, index);
          uuid && worker.postMessage({
            op,
            props: value,
            uuid
          });
        },
        subscribe: subscribe(ref, worker, subscriptions, type, index)
      };
    };

    const makeQuaternion = index => {
      const op = 'setQuaternion';
      const type = 'quaternion';
      return {
        set: (x, y, z, w) => {
          const uuid = getUUID(ref, index);
          uuid && worker.postMessage({
            op,
            props: [x, y, z, w],
            uuid
          });
        },
        copy: _ref3 => {
          let {
            w,
            x,
            y,
            z
          } = _ref3;
          const uuid = getUUID(ref, index);
          uuid && worker.postMessage({
            op,
            props: [x, y, z, w],
            uuid
          });
        },
        subscribe: subscribe(ref, worker, subscriptions, type, index)
      };
    };

    const makeRotation = index => {
      const op = 'setRotation';
      return {
        set: (x, y, z) => {
          const uuid = getUUID(ref, index);
          uuid && worker.postMessage({
            op,
            props: [x, y, z],
            uuid
          });
        },
        copy: _ref4 => {
          let {
            x,
            y,
            z
          } = _ref4;
          const uuid = getUUID(ref, index);
          uuid && worker.postMessage({
            op,
            props: [x, y, z],
            uuid
          });
        },
        subscribe: callback => {
          const id = incrementingId++;
          const target = 'bodies';
          const type = 'quaternion';
          const uuid = getUUID(ref, index);
          subscriptions[id] = {
            [type]: quaternionToRotation(callback)
          };
          uuid && worker.postMessage({
            op: 'subscribe',
            uuid,
            props: {
              id,
              type,
              target
            }
          });
          return () => {
            delete subscriptions[id];
            worker.postMessage({
              op: 'unsubscribe',
              props: id
            });
          };
        }
      };
    };

    const makeVec = (type, index) => {
      const op = `set${capitalize(type)}`;
      return {
        set: (x, y, z) => {
          const uuid = getUUID(ref, index);
          uuid && worker.postMessage({
            op,
            props: [x, y, z],
            uuid
          });
        },
        copy: _ref5 => {
          let {
            x,
            y,
            z
          } = _ref5;
          const uuid = getUUID(ref, index);
          uuid && worker.postMessage({
            op,
            props: [x, y, z],
            uuid
          });
        },
        subscribe: subscribe(ref, worker, subscriptions, type, index)
      };
    };

    function makeApi(index) {
      return {
        angularFactor: makeVec('angularFactor', index),
        angularVelocity: makeVec('angularVelocity', index),
        linearFactor: makeVec('linearFactor', index),
        position: makeVec('position', index),
        quaternion: makeQuaternion(index),
        rotation: makeRotation(index),
        velocity: makeVec('velocity', index),
        allowSleep: makeAtomic('allowSleep', index),
        angularDamping: makeAtomic('angularDamping', index),
        collisionFilterGroup: makeAtomic('collisionFilterGroup', index),
        collisionFilterMask: makeAtomic('collisionFilterMask', index),
        collisionResponse: makeAtomic('collisionResponse', index),
        isTrigger: makeAtomic('isTrigger', index),
        fixedRotation: makeAtomic('fixedRotation', index),
        linearDamping: makeAtomic('linearDamping', index),
        mass: makeAtomic('mass', index),
        material: makeAtomic('material', index),
        sleepSpeedLimit: makeAtomic('sleepSpeedLimit', index),
        sleepTimeLimit: makeAtomic('sleepTimeLimit', index),
        userData: makeAtomic('userData', index),

        // Apply functions
        applyForce(force, worldPoint) {
          const uuid = getUUID(ref, index);
          uuid && worker.postMessage({
            op: 'applyForce',
            props: [force, worldPoint],
            uuid
          });
        },

        applyImpulse(impulse, worldPoint) {
          const uuid = getUUID(ref, index);
          uuid && worker.postMessage({
            op: 'applyImpulse',
            props: [impulse, worldPoint],
            uuid
          });
        },

        applyLocalForce(force, localPoint) {
          const uuid = getUUID(ref, index);
          uuid && worker.postMessage({
            op: 'applyLocalForce',
            props: [force, localPoint],
            uuid
          });
        },

        applyLocalImpulse(impulse, localPoint) {
          const uuid = getUUID(ref, index);
          uuid && worker.postMessage({
            op: 'applyLocalImpulse',
            props: [impulse, localPoint],
            uuid
          });
        },

        applyTorque(torque) {
          const uuid = getUUID(ref, index);
          uuid && worker.postMessage({
            op: 'applyTorque',
            props: [torque],
            uuid
          });
        },

        // force particular sleep state
        sleep() {
          const uuid = getUUID(ref, index);
          uuid && worker.postMessage({
            op: 'sleep',
            uuid
          });
        },

        wakeUp() {
          const uuid = getUUID(ref, index);
          uuid && worker.postMessage({
            op: 'wakeUp',
            uuid
          });
        }

      };
    }

    const cache = {};
    return { ...makeApi(undefined),
      at: index => cache[index] || (cache[index] = makeApi(index))
    };
  }, []);
  return [ref, api];
}

function makeTriplet(v) {
  return v instanceof Vector3 ? [v.x, v.y, v.z] : v;
}

function usePlane(fn, fwdRef, deps) {
  if (fwdRef === void 0) {
    fwdRef = null;
  }

  return useBody('Plane', fn, () => [], fwdRef, deps);
}
function useBox(fn, fwdRef, deps) {
  if (fwdRef === void 0) {
    fwdRef = null;
  }

  const defaultBoxArgs = [1, 1, 1];
  return useBody('Box', fn, function (args) {
    if (args === void 0) {
      args = defaultBoxArgs;
    }

    return args;
  }, fwdRef, deps);
}
function useCylinder(fn, fwdRef, deps) {
  if (fwdRef === void 0) {
    fwdRef = null;
  }

  return useBody('Cylinder', fn, function (args) {
    if (args === void 0) {
      args = [];
    }

    return args;
  }, fwdRef, deps);
}
function useHeightfield(fn, fwdRef, deps) {
  if (fwdRef === void 0) {
    fwdRef = null;
  }

  return useBody('Heightfield', fn, args => args, fwdRef, deps);
}
function useParticle(fn, fwdRef, deps) {
  if (fwdRef === void 0) {
    fwdRef = null;
  }

  return useBody('Particle', fn, () => [], fwdRef, deps);
}
function useSphere(fn, fwdRef, deps) {
  if (fwdRef === void 0) {
    fwdRef = null;
  }

  return useBody('Sphere', fn, function (args) {
    if (args === void 0) {
      args = [1];
    }

    if (!Array.isArray(args)) throw new Error('useSphere args must be an array');
    return [args[0]];
  }, fwdRef, deps);
}
function useTrimesh(fn, fwdRef, deps) {
  if (fwdRef === void 0) {
    fwdRef = null;
  }

  return useBody('Trimesh', fn, args => args, fwdRef, deps);
}
function useConvexPolyhedron(fn, fwdRef, deps) {
  if (fwdRef === void 0) {
    fwdRef = null;
  }

  return useBody('ConvexPolyhedron', fn, function (_temp) {
    let [vertices, faces, normals, axes, boundingSphereRadius] = _temp === void 0 ? [] : _temp;
    return [vertices && vertices.map(makeTriplet), faces, normals && normals.map(makeTriplet), axes && axes.map(makeTriplet), boundingSphereRadius];
  }, fwdRef, deps);
}
function useCompoundBody(fn, fwdRef, deps) {
  if (fwdRef === void 0) {
    fwdRef = null;
  }

  return useBody('Compound', fn, args => args, fwdRef, deps);
}

function useConstraint(type, bodyA, bodyB, optns, deps) {
  if (optns === void 0) {
    optns = {};
  }

  if (deps === void 0) {
    deps = [];
  }

  const {
    worker
  } = useContext(context);
  const uuid = MathUtils.generateUUID();
  const refA = useForwardedRef(bodyA);
  const refB = useForwardedRef(bodyB);
  useEffect(() => {
    if (refA.current && refB.current) {
      worker.postMessage({
        op: 'addConstraint',
        props: [refA.current.uuid, refB.current.uuid, optns],
        type,
        uuid
      });
      return () => worker.postMessage({
        op: 'removeConstraint',
        uuid
      });
    }
  }, deps);
  const api = useMemo(() => {
    const enableDisable = {
      enable: () => worker.postMessage({
        op: 'enableConstraint',
        uuid
      }),
      disable: () => worker.postMessage({
        op: 'disableConstraint',
        uuid
      })
    };

    if (type === 'Hinge') {
      return { ...enableDisable,
        enableMotor: () => worker.postMessage({
          op: 'enableConstraintMotor',
          uuid
        }),
        disableMotor: () => worker.postMessage({
          op: 'disableConstraintMotor',
          uuid
        }),
        setMotorSpeed: value => worker.postMessage({
          op: 'setConstraintMotorSpeed',
          uuid,
          props: value
        }),
        setMotorMaxForce: value => worker.postMessage({
          op: 'setConstraintMotorMaxForce',
          uuid,
          props: value
        })
      };
    }

    return enableDisable;
  }, deps);
  return [refA, refB, api];
}

function usePointToPointConstraint(bodyA, bodyB, optns, deps) {
  if (bodyA === void 0) {
    bodyA = null;
  }

  if (bodyB === void 0) {
    bodyB = null;
  }

  if (deps === void 0) {
    deps = [];
  }

  return useConstraint('PointToPoint', bodyA, bodyB, optns, deps);
}
function useConeTwistConstraint(bodyA, bodyB, optns, deps) {
  if (bodyA === void 0) {
    bodyA = null;
  }

  if (bodyB === void 0) {
    bodyB = null;
  }

  if (deps === void 0) {
    deps = [];
  }

  return useConstraint('ConeTwist', bodyA, bodyB, optns, deps);
}
function useDistanceConstraint(bodyA, bodyB, optns, deps) {
  if (bodyA === void 0) {
    bodyA = null;
  }

  if (bodyB === void 0) {
    bodyB = null;
  }

  if (deps === void 0) {
    deps = [];
  }

  return useConstraint('Distance', bodyA, bodyB, optns, deps);
}
function useHingeConstraint(bodyA, bodyB, optns, deps) {
  if (bodyA === void 0) {
    bodyA = null;
  }

  if (bodyB === void 0) {
    bodyB = null;
  }

  if (deps === void 0) {
    deps = [];
  }

  return useConstraint('Hinge', bodyA, bodyB, optns, deps);
}
function useLockConstraint(bodyA, bodyB, optns, deps) {
  if (bodyA === void 0) {
    bodyA = null;
  }

  if (bodyB === void 0) {
    bodyB = null;
  }

  if (deps === void 0) {
    deps = [];
  }

  return useConstraint('Lock', bodyA, bodyB, optns, deps);
}
function useSpring(bodyA, bodyB, optns, deps) {
  if (bodyA === void 0) {
    bodyA = null;
  }

  if (bodyB === void 0) {
    bodyB = null;
  }

  if (deps === void 0) {
    deps = [];
  }

  const {
    worker
  } = useContext(context);
  const [uuid] = useState(() => MathUtils.generateUUID());
  const refA = useForwardedRef(bodyA);
  const refB = useForwardedRef(bodyB);
  useEffect(() => {
    if (refA.current && refB.current) {
      worker.postMessage({
        op: 'addSpring',
        uuid,
        props: [refA.current.uuid, refB.current.uuid, optns]
      });
      return () => {
        worker.postMessage({
          op: 'removeSpring',
          uuid
        });
      };
    }
  }, deps);
  const api = useMemo(() => ({
    setStiffness: value => worker.postMessage({
      op: 'setSpringStiffness',
      props: value,
      uuid
    }),
    setRestLength: value => worker.postMessage({
      op: 'setSpringRestLength',
      props: value,
      uuid
    }),
    setDamping: value => worker.postMessage({
      op: 'setSpringDamping',
      props: value,
      uuid
    })
  }), deps);
  return [refA, refB, api];
}

function useRay(mode, options, callback, deps) {
  if (deps === void 0) {
    deps = [];
  }

  const {
    worker,
    events
  } = useContext(context);
  const [uuid] = useState(() => MathUtils.generateUUID());
  useEffect(() => {
    events[uuid] = {
      rayhit: callback
    };
    worker.postMessage({
      op: 'addRay',
      uuid,
      props: {
        mode,
        ...options
      }
    });
    return () => {
      worker.postMessage({
        op: 'removeRay',
        uuid
      });
      delete events[uuid];
    };
  }, deps);
}

function useRaycastClosest(options, callback, deps) {
  if (deps === void 0) {
    deps = [];
  }

  useRay('Closest', options, callback, deps);
}
function useRaycastAny(options, callback, deps) {
  if (deps === void 0) {
    deps = [];
  }

  useRay('Any', options, callback, deps);
}
function useRaycastAll(options, callback, deps) {
  if (deps === void 0) {
    deps = [];
  }

  useRay('All', options, callback, deps);
}

function isString(v) {
  return typeof v === 'string';
}

function useRaycastVehicle(fn, fwdRef, deps) {
  if (fwdRef === void 0) {
    fwdRef = null;
  }

  if (deps === void 0) {
    deps = [];
  }

  const ref = useForwardedRef(fwdRef);
  const {
    worker,
    subscriptions
  } = useContext(context);
  useLayoutEffect(() => {
    if (!ref.current) {
      // When the reference isn't used we create a stub
      // The body doesn't have a visual representation but can still be constrained
      ref.current = new Object3D();
    }

    const currentWorker = worker;
    const uuid = [ref.current.uuid];
    const raycastVehicleProps = fn();
    const chassisBodyUUID = getUUID(raycastVehicleProps.chassisBody);
    const wheelUUIDs = raycastVehicleProps.wheels.map(ref => getUUID(ref));
    if (!chassisBodyUUID || !wheelUUIDs.every(isString)) return;
    currentWorker.postMessage({
      op: 'addRaycastVehicle',
      uuid,
      props: [chassisBodyUUID, wheelUUIDs, raycastVehicleProps.wheelInfos, (raycastVehicleProps == null ? void 0 : raycastVehicleProps.indexForwardAxis) || 2, (raycastVehicleProps == null ? void 0 : raycastVehicleProps.indexRightAxis) || 0, (raycastVehicleProps == null ? void 0 : raycastVehicleProps.indexUpAxis) || 1]
    });
    return () => {
      currentWorker.postMessage({
        op: 'removeRaycastVehicle',
        uuid
      });
    };
  }, deps);
  const api = useMemo(() => {
    return {
      sliding: {
        subscribe: subscribe(ref, worker, subscriptions, 'sliding', undefined, 'vehicles')
      },

      setSteeringValue(value, wheelIndex) {
        const uuid = getUUID(ref);
        uuid && worker.postMessage({
          op: 'setRaycastVehicleSteeringValue',
          props: [value, wheelIndex],
          uuid
        });
      },

      applyEngineForce(value, wheelIndex) {
        const uuid = getUUID(ref);
        uuid && worker.postMessage({
          op: 'applyRaycastVehicleEngineForce',
          props: [value, wheelIndex],
          uuid
        });
      },

      setBrake(brake, wheelIndex) {
        const uuid = getUUID(ref);
        uuid && worker.postMessage({
          op: 'setRaycastVehicleBrake',
          props: [brake, wheelIndex],
          uuid
        });
      }

    };
  }, deps);
  return [ref, api];
}

function Physics(props) {
  return /*#__PURE__*/React.createElement(Suspense, {
    fallback: null
  }, /*#__PURE__*/React.createElement(Provider, props));
}

export { Debug, Physics, context, useBox, useCompoundBody, useConeTwistConstraint, useConvexPolyhedron, useCylinder, useDistanceConstraint, useHeightfield, useHingeConstraint, useLockConstraint, useParticle, usePlane, usePointToPointConstraint, useRaycastAll, useRaycastAny, useRaycastClosest, useRaycastVehicle, useSphere, useSpring, useTrimesh };
